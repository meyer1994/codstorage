(self["webpackChunkappw"]=self["webpackChunkappw"]||[]).push([[631],{25787:function(t,e,r){var n=r(47976),i=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw i("Incorrect invocation")}},50206:function(t,e,r){var n=r(1702);t.exports=n([].slice)},93678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6833:function(t,e,r){var n=r(88113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},35268:function(t,e,r){var n=r(84326),i=r(17854);t.exports="process"==n(i.process)},20261:function(t,e,r){var n,i,o,s,a=r(17854),u=r(22104),c=r(49974),h=r(60614),l=r(92597),f=r(47293),d=r(60490),p=r(50206),y=r(80317),g=r(48053),m=r(6833),b=r(35268),w=a.setImmediate,v=a.clearImmediate,_=a.process,E=a.Dispatch,S=a.Function,A=a.MessageChannel,I=a.String,T=0,R={},M="onreadystatechange";try{n=a.location}catch(B){}var k=function(t){if(l(R,t)){var e=R[t];delete R[t],e()}},C=function(t){return function(){k(t)}},O=function(t){k(t.data)},P=function(t){a.postMessage(I(t),n.protocol+"//"+n.host)};w&&v||(w=function(t){g(arguments.length,1);var e=h(t)?t:S(t),r=p(arguments,1);return R[++T]=function(){u(e,void 0,r)},i(T),T},v=function(t){delete R[t]},b?i=function(t){_.nextTick(C(t))}:E&&E.now?i=function(t){E.now(C(t))}:A&&!m?(o=new A,s=o.port2,o.port1.onmessage=O,i=c(s.postMessage,s)):a.addEventListener&&h(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!f(P)?(i=P,a.addEventListener("message",O,!1)):i=M in y("script")?function(t){d.appendChild(y("script"))[M]=function(){d.removeChild(this),k(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:w,clear:v}},48053:function(t){var e=TypeError;t.exports=function(t,r){if(t<r)throw e("Not enough arguments");return t}},52262:function(t,e,r){"use strict";var n=r(82109),i=r(47908),o=r(26244),s=r(19303),a=r(51223);n({target:"Array",proto:!0},{at:function(t){var e=i(this),r=o(e),n=s(t),a=n>=0?n:r+n;return a<0||a>=r?void 0:e[a]}}),a("at")},24506:function(t,e,r){"use strict";var n=r(82109),i=r(1702),o=r(84488),s=r(19303),a=r(41340),u=r(47293),c=i("".charAt),h=u((function(){return"\ud842"!=="ð ®·".at(-2)}));n({target:"String",proto:!0,forced:h},{at:function(t){var e=a(o(this)),r=e.length,n=s(t),i=n>=0?n:r+n;return i<0||i>=r?void 0:c(e,i)}})},11091:function(t,e,r){var n=r(82109),i=r(17854),o=r(20261).clear;n({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==o},{clearImmediate:o})},82801:function(t,e,r){"use strict";var n=r(82109),i=r(17854),o=r(35005),s=r(79114),a=r(3070).f,u=r(92597),c=r(25787),h=r(79587),l=r(56277),f=r(93678),d=r(77741),p=r(19781),y=r(31913),g="DOMException",m=o("Error"),b=o(g),w=function(){c(this,v);var t=arguments.length,e=l(t<1?void 0:arguments[0]),r=l(t<2?void 0:arguments[1],"Error"),n=new b(e,r),i=m(e);return i.name=g,a(n,"stack",s(1,d(i.stack,1))),h(n,this,w),n},v=w.prototype=b.prototype,_="stack"in m(g),E="stack"in new b(1,2),S=b&&p&&Object.getOwnPropertyDescriptor(i,g),A=!!S&&!(S.writable&&S.configurable),I=_&&!A&&!E;n({global:!0,constructor:!0,forced:y||I},{DOMException:I?w:b});var T=o(g),R=T.prototype;if(R.constructor!==T)for(var M in y||a(R,"constructor",s(1,T)),f)if(u(f,M)){var k=f[M],C=k.s;u(T,C)||a(T,C,s(6,k.c))}},84633:function(t,e,r){r(11091),r(12986)},12986:function(t,e,r){var n=r(82109),i=r(17854),o=r(20261).set;n({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==o},{setImmediate:o})},25476:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUMP_SESSION_KEYS=e.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=e.NOISE_MSG_MAX_LENGTH_BYTES=void 0,e.NOISE_MSG_MAX_LENGTH_BYTES=65535,e.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=e.NOISE_MSG_MAX_LENGTH_BYTES-16,e.DUMP_SESSION_KEYS={NODE_ENV:"production",BASE_URL:"/codstorage/"}.DUMP_SESSION_KEYS},79813:function(t,e,r){"use strict";r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.decryptStream=e.encryptStream=void 0;const n=r(25476);function i(t){return async function*(e){for await(const r of e)for(let e=0;e<r.length;e+=n.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let i=e+n.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;i>r.length&&(i=r.length);const o=t.encrypt(r.slice(e,i),t.session);yield o}}}function o(t){return async function*(e){for await(const r of e)for(let e=0;e<r.length;e+=n.NOISE_MSG_MAX_LENGTH_BYTES){let i=e+n.NOISE_MSG_MAX_LENGTH_BYTES;i>r.length&&(i=r.length);const{plaintext:o,valid:s}=await t.decrypt(r.slice(e,i),t.session);if(!s)throw new Error("Failed to validate decrypted chunk");yield o}}}e.encryptStream=i,e.decryptStream=o},45815:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decode2=e.decode1=e.decode0=e.encode2=e.encode1=e.encode0=e.uint16BEDecode=e.uint16BEEncode=void 0;const i=n(r(17266)),o=r(85489),s=t=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t),a=(t,e,r)=>(e=e||s(2),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(r,t,!1),e);e.uint16BEEncode=a,e.uint16BEEncode.bytes=2;const u=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t instanceof i.default?t.readUInt16BE(0):new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1)};function c(t){return(0,o.concat)([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length)}function h(t){return(0,o.concat)([t.ne,t.ns,t.ciphertext],t.ne.length+t.ns.length+t.ciphertext.length)}function l(t){return(0,o.concat)([t.ns,t.ciphertext],t.ns.length+t.ciphertext.length)}function f(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:new Uint8Array(0)}}function d(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}}function p(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}e.uint16BEDecode=u,e.uint16BEDecode.bytes=2,e.encode0=c,e.encode1=h,e.encode2=l,e.decode0=f,e.decode1=d,e.decode2=p},57773:function(t,e,r){"use strict";r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.FailedIKError=void 0;class n extends Error{constructor(t,e){super(e),this.initialMsg=t,this.name="FailedIKhandshake"}}e.FailedIKError=n},78858:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.IKHandshake=void 0;const n=r(10957),i=r(45815),o=r(50835),s=r(57773),a=r(8587);class u{constructor(t,e,r,i,o,s,a,u){this.isInitiator=t,this.payload=e,this.prologue=r,this.staticKeypair=i,this.connection=o,a&&(this.remotePeer=a),this.ik=null!==u&&void 0!==u?u:new n.IK,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,s),this.remoteEarlyData=new Uint8Array}async stage0(){if((0,a.logLocalStaticKeys)(this.session.hs.s),(0,a.logRemoteStaticKey)(this.session.hs.rs),this.isInitiator){(0,a.logger)("IK Stage 0 - Initiator sending message...");const t=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP((0,i.encode1)(t)),(0,a.logger)("IK Stage 0 - Initiator sent message."),(0,a.logLocalEphemeralKeys)(this.session.hs.e)}else{(0,a.logger)("IK Stage 0 - Responder receiving message...");const e=await this.connection.readLP();try{const t=(0,i.decode1)(e.slice()),{plaintext:r,valid:n}=this.ik.recvMessage(this.session,t);if(!n)throw new Error("ik handshake stage 0 decryption validation fail");(0,a.logger)("IK Stage 0 - Responder got message, going to verify payload.");const s=await(0,o.decodePayload)(r);this.remotePeer=this.remotePeer||await(0,o.getPeerIdFromPayload)(s),await(0,o.verifySignedPayload)(this.session.hs.rs,s,this.remotePeer),this.setRemoteEarlyData(s.data),(0,a.logger)("IK Stage 0 - Responder successfully verified payload!"),(0,a.logRemoteEphemeralKey)(this.session.hs.re)}catch(t){const r=t;throw(0,a.logger)("Responder breaking up with IK handshake in stage 0."),new s.FailedIKError(e,`Error occurred while verifying initiator's signed payload: ${r.message}`)}}}async stage1(){if(this.isInitiator){(0,a.logger)("IK Stage 1 - Initiator receiving message...");const e=(await this.connection.readLP()).slice(),r=(0,i.decode0)(e),{plaintext:n,valid:u}=this.ik.recvMessage(this.session,r);(0,a.logger)("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!u)throw new Error("ik stage 1 decryption validation fail");const t=await(0,o.decodePayload)(n);this.remotePeer=this.remotePeer||await(0,o.getPeerIdFromPayload)(t),await(0,o.verifySignedPayload)(r.ns.slice(0,32),t,this.remotePeer),this.setRemoteEarlyData(t.data),(0,a.logger)("IK Stage 1 - Initiator successfully verified payload!"),(0,a.logRemoteEphemeralKey)(this.session.hs.re)}catch(t){const r=t;throw(0,a.logger)("Initiator breaking up with IK handshake in stage 1."),new s.FailedIKError(e,`Error occurred while verifying responder's signed payload: ${r.message}`)}}else{(0,a.logger)("IK Stage 1 - Responder sending message...");const t=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP((0,i.encode0)(t)),(0,a.logger)("IK Stage 1 - Responder sent message..."),(0,a.logLocalEphemeralKeys)(this.session.hs.e)}(0,a.logCipherState)(this.session)}decrypt(t,e){const r=this.getCS(e,!1);return this.ik.decryptWithAd(r,new Uint8Array(0),t)}encrypt(t,e){const r=this.getCS(e);return this.ik.encryptWithAd(r,new Uint8Array(0),t)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(t,e=!0){if(!t.cs1||!t.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?e?t.cs1:t.cs2:e?t.cs2:t.cs1}setRemoteEarlyData(t){t&&(this.remoteEarlyData=t)}}e.IKHandshake=u},79167:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.XXFallbackHandshake=void 0;const n=r(11285),i=r(50835),o=r(8587),s=r(45815);class a extends n.XXHandshake{constructor(t,e,r,n,i,o,s,a,u){super(t,e,r,n,i,s,u),a&&(this.ephemeralKeys=a),this.initialMsg=o}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),(0,o.logger)("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),(0,o.logLocalEphemeralKeys)(this.session.hs.e);else{(0,o.logger)("XX Fallback Stage 0 - Responder decoding initial msg from IK.");const t=(0,s.decode0)(this.initialMsg),{valid:e}=this.xx.recvMessage(this.session,{ne:t.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)});if(!e)throw new Error("xx fallback stage 0 decryption validation fail");(0,o.logger)("XX Fallback Stage 0 - Responder used received message from IK."),(0,o.logRemoteEphemeralKey)(this.session.hs.re)}}async exchange(){if(this.isInitiator){const e=(0,s.decode1)(this.initialMsg),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx fallback stage 1 decryption validation fail");(0,o.logger)("XX Fallback Stage 1 - Initiator used received message from IK."),(0,o.logRemoteEphemeralKey)(this.session.hs.re),(0,o.logRemoteStaticKey)(this.session.hs.rs),(0,o.logger)("Initiator going to check remote's signature...");try{const t=await(0,i.decodePayload)(r);this.remotePeer=this.remotePeer||await(0,i.getPeerIdFromPayload)(t),await(0,i.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){const e=t;throw new Error(`Error occurred while verifying signed payload from responder: ${e.message}`)}(0,o.logger)("All good with the signature!")}else(0,o.logger)("XX Fallback Stage 1 - Responder start"),await super.exchange(),(0,o.logger)("XX Fallback Stage 1 - Responder end")}}e.XXFallbackHandshake=a},11285:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.XXHandshake=void 0;const n=r(15114),i=r(50835),o=r(8587),s=r(45815);class a{constructor(t,e,r,i,o,s,a){this.isInitiator=t,this.payload=e,this.prologue=r,this.staticKeypair=i,this.connection=o,s&&(this.remotePeer=s),this.xx=null!==a&&void 0!==a?a:new n.XX,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if((0,o.logLocalStaticKeys)(this.session.hs.s),this.isInitiator){(0,o.logger)("Stage 0 - Initiator starting to send first message.");const t=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP((0,s.encode0)(t)),(0,o.logger)("Stage 0 - Initiator finished sending first message."),(0,o.logLocalEphemeralKeys)(this.session.hs.e)}else{(0,o.logger)("Stage 0 - Responder waiting to receive first message...");const t=(0,s.decode0)((await this.connection.readLP()).slice()),{valid:e}=this.xx.recvMessage(this.session,t);if(!e)throw new Error("xx handshake stage 0 validation fail");(0,o.logger)("Stage 0 - Responder received first message."),(0,o.logRemoteEphemeralKey)(this.session.hs.re)}}async exchange(){if(this.isInitiator){(0,o.logger)("Stage 1 - Initiator waiting to receive first message from responder...");const e=(0,s.decode1)((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx handshake stage 1 validation fail");(0,o.logger)("Stage 1 - Initiator received the message."),(0,o.logRemoteEphemeralKey)(this.session.hs.re),(0,o.logRemoteStaticKey)(this.session.hs.rs),(0,o.logger)("Initiator going to check remote's signature...");try{const t=await(0,i.decodePayload)(r);this.remotePeer=this.remotePeer||await(0,i.getPeerIdFromPayload)(t),this.remotePeer=await(0,i.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){const e=t;throw new Error(`Error occurred while verifying signed payload: ${e.message}`)}(0,o.logger)("All good with the signature!")}else{(0,o.logger)("Stage 1 - Responder sending out first message with signed payload and static key.");const t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((0,s.encode1)(t)),(0,o.logger)("Stage 1 - Responder sent the second handshake message with signed payload."),(0,o.logLocalEphemeralKeys)(this.session.hs.e)}}async finish(){if(this.isInitiator){(0,o.logger)("Stage 2 - Initiator sending third handshake message.");const t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((0,s.encode2)(t)),(0,o.logger)("Stage 2 - Initiator sent message with signed payload.")}else{(0,o.logger)("Stage 2 - Responder waiting for third handshake message...");const e=(0,s.decode2)((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx handshake stage 2 validation fail");(0,o.logger)("Stage 2 - Responder received the message, finished handshake.");try{const t=await(0,i.decodePayload)(r);this.remotePeer=this.remotePeer||await(0,i.getPeerIdFromPayload)(t),await(0,i.verifySignedPayload)(this.session.hs.rs,t,this.remotePeer),this.setRemoteEarlyData(t.data)}catch(t){const e=t;throw new Error(`Error occurred while verifying signed payload: ${e.message}`)}}(0,o.logCipherState)(this.session)}encrypt(t,e){const r=this.getCS(e);return this.xx.encryptWithAd(r,new Uint8Array(0),t)}decrypt(t,e){const r=this.getCS(e,!1);return this.xx.decryptWithAd(r,new Uint8Array(0),t)}getRemoteStaticKey(){return this.session.hs.rs}getCS(t,e=!0){if(!t.cs1||!t.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?e?t.cs1:t.cs2:e?t.cs2:t.cs1}setRemoteEarlyData(t){t&&(this.remoteEarlyData=t)}}e.XXHandshake=a},25249:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractHandshake=e.MAX_NONCE=e.MIN_NONCE=void 0;const s=o(r(92982)),a=o(r(14185)),u=r(52130),c=r(74141),h=r(85489),l=r(73627),f=r(50835),d=r(8587);e.MIN_NONCE=0,e.MAX_NONCE=Number.MAX_SAFE_INTEGER;const p="Cipherstate has reached maximum n, a new handshake must be performed";class y{encryptWithAd(t,e,r){const n=this.encrypt(t.k,t.n,e,r);return this.setNonce(t,this.incrementNonce(t.n)),n}decryptWithAd(t,e,r){const{plaintext:n,valid:i}=this.decrypt(t.k,t.n,e,r);return this.setNonce(t,this.incrementNonce(t.n)),{plaintext:n,valid:i}}hasKey(t){return!this.isEmptyKey(t.k)}setNonce(t,e){t.n=e}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(t){const e=this.createEmptyKey();return(0,c.equals)(e,t)}incrementNonce(t){return t+1}nonceToBytes(t){const e=new Uint8Array(12);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(4,t,!0),e}encrypt(t,r,n,i){if(r>e.MAX_NONCE)throw new Error(p);const o=this.nonceToBytes(r),s=new u.ChaCha20Poly1305(t);return s.seal(o,i,n)}encryptAndHash(t,e){let r;return r=this.hasKey(t.cs)?this.encryptWithAd(t.cs,t.h,e):e,this.mixHash(t,r),r}decrypt(t,r,n,i){if(r>e.MAX_NONCE)throw new Error(p);const o=this.nonceToBytes(r),s=new u.ChaCha20Poly1305(t),a=s.open(o,i,n);return a?{plaintext:a,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(t,e){let r,n=!0;return this.hasKey(t.cs)?({plaintext:r,valid:n}=this.decryptWithAd(t.cs,t.h,e)):r=e,this.mixHash(t,e),{plaintext:r,valid:n}}dh(t,e){try{const r=s.sharedKey(t,e);return 32===r.length?r:r.slice(0,32)}catch(r){return(0,d.logger)(r.message),new Uint8Array(32)}}mixHash(t,e){t.h=this.getHash(t.h,e)}getHash(t,e){const r=a.hash((0,h.concat)([t,e],t.length+e.length));return r}mixKey(t,e){const[r,n]=(0,f.getHkdf)(t.ck,e);t.cs=this.initializeKey(n),t.ck=r}initializeKey(t){const r=e.MIN_NONCE;return{k:t,n:r}}initializeSymmetric(t){const e=(0,l.fromString)(t,"utf-8"),r=this.hashProtocolName(e),n=r,i=this.createEmptyKey(),o=this.initializeKey(i);return{cs:o,ck:n,h:r}}hashProtocolName(t){if(t.length<=32){const e=new Uint8Array(32);return e.set(t),e}return this.getHash(t,new Uint8Array(0))}split(t){const[e,r]=(0,f.getHkdf)(t.ck,new Uint8Array(0)),n=this.initializeKey(e),i=this.initializeKey(r);return{cs1:n,cs2:i}}writeMessageRegular(t,e){const r=this.encryptWithAd(t,new Uint8Array(0),e),n=this.createEmptyKey(),i=new Uint8Array(0);return{ne:n,ns:i,ciphertext:r}}readMessageRegular(t,e){return this.decryptWithAd(t,new Uint8Array(0),e.ciphertext)}}e.AbstractHandshake=y},10957:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118),Object.defineProperty(e,"__esModule",{value:!0}),e.IK=void 0;const n=r(50835),i=r(25249);class o extends i.AbstractHandshake{initSession(t,e,r,n){const i=this.createEmptyKey();let o;return o=t?this.initializeInitiator(e,r,n,i):this.initializeResponder(e,r,n,i),{hs:o,i:t,mc:0}}sendMessage(t,e){let r;if(0===t.mc)r=this.writeMessageA(t.hs,e);else if(1===t.mc){const{messageBuffer:n,h:i,cs1:o,cs2:s}=this.writeMessageB(t.hs,e);r=n,t.h=i,t.cs1=o,t.cs2=s}else{if(!(t.mc>1))throw new Error("Session invalid.");if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");r=this.writeMessageRegular(t.cs1,e)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");r=this.writeMessageRegular(t.cs2,e)}}return t.mc++,r}recvMessage(t,e){let r=new Uint8Array(0),n=!1;if(0===t.mc&&({plaintext:r,valid:n}=this.readMessageA(t.hs,e)),1===t.mc){const{plaintext:i,valid:o,h:s,cs1:a,cs2:u}=this.readMessageB(t.hs,e);r=i,n=o,t.h=s,t.cs1=a,t.cs2=u}return t.mc++,{plaintext:r,valid:n}}writeMessageA(t,e){t.e=(0,n.generateKeypair)();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const i=t.s.publicKey,o=this.encryptAndHash(t.ss,i);this.mixKey(t.ss,this.dh(t.s.privateKey,t.rs));const s=this.encryptAndHash(t.ss,e);return{ne:r,ns:o,ciphertext:s}}writeMessageB(t,e){t.e=(0,n.generateKeypair)();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re)),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const i=this.encryptAndHash(t.ss,e),o=this.createEmptyKey(),s={ne:r,ns:o,ciphertext:i},{cs1:a,cs2:u}=this.split(t.ss);return{messageBuffer:s,cs1:a,cs2:u,h:t.ss.h}}readMessageA(t,e){(0,n.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const{plaintext:r,valid:i}=this.decryptAndHash(t.ss,e.ns);i&&32===r.length&&(0,n.isValidPublicKey)(r)&&(t.rs=r),this.mixKey(t.ss,this.dh(t.s.privateKey,t.rs));const{plaintext:o,valid:s}=this.decryptAndHash(t.ss,e.ciphertext);return{plaintext:o,valid:i&&s}}readMessageB(t,e){if((0,n.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re)),this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const{plaintext:r,valid:i}=this.decryptAndHash(t.ss,e.ciphertext),{cs1:o,cs2:s}=this.split(t.ss);return{h:t.ss.h,valid:i,plaintext:r,cs1:o,cs2:s}}initializeInitiator(t,e,r,n){const i="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(i);this.mixHash(o,t),this.mixHash(o,r);const s=new Uint8Array(32);return{ss:o,s:e,rs:r,re:s,psk:n}}initializeResponder(t,e,r,n){const i="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(i);this.mixHash(o,t),this.mixHash(o,e.publicKey);const s=new Uint8Array(32);return{ss:o,s:e,rs:r,re:s,psk:n}}}e.IK=o},15114:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.XX=void 0;const n=r(50835),i=r(25249);class o extends i.AbstractHandshake{initializeInitiator(t,e,r,n){const i="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(i);this.mixHash(o,t);const s=new Uint8Array(32);return{ss:o,s:e,rs:r,psk:n,re:s}}initializeResponder(t,e,r,n){const i="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(i);this.mixHash(o,t);const s=new Uint8Array(32);return{ss:o,s:e,rs:r,psk:n,re:s}}writeMessageA(t,e,r){const i=new Uint8Array(0);t.e=void 0!==r?r:(0,n.generateKeypair)();const o=t.e.publicKey;this.mixHash(t.ss,o);const s=this.encryptAndHash(t.ss,e);return{ne:o,ns:i,ciphertext:s}}writeMessageB(t,e){t.e=(0,n.generateKeypair)();const r=t.e.publicKey;this.mixHash(t.ss,r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));const i=t.s.publicKey,o=this.encryptAndHash(t.ss,i);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const s=this.encryptAndHash(t.ss,e);return{ne:r,ns:o,ciphertext:s}}writeMessageC(t,e){const r=t.s.publicKey,n=this.encryptAndHash(t.ss,r);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));const i=this.encryptAndHash(t.ss,e),o=this.createEmptyKey(),s={ne:o,ns:n,ciphertext:i},{cs1:a,cs2:u}=this.split(t.ss);return{h:t.ss.h,messageBuffer:s,cs1:a,cs2:u}}readMessageA(t,e){return(0,n.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),this.decryptAndHash(t.ss,e.ciphertext)}readMessageB(t,e){if((0,n.isValidPublicKey)(e.ne)&&(t.re=e.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));const{plaintext:r,valid:i}=this.decryptAndHash(t.ss,e.ns);i&&32===r.length&&(0,n.isValidPublicKey)(r)&&(t.rs=r),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const{plaintext:o,valid:s}=this.decryptAndHash(t.ss,e.ciphertext);return{plaintext:o,valid:i&&s}}readMessageC(t,e){const{plaintext:r,valid:i}=this.decryptAndHash(t.ss,e.ns);if(i&&32===r.length&&(0,n.isValidPublicKey)(r)&&(t.rs=r),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));const{plaintext:o,valid:s}=this.decryptAndHash(t.ss,e.ciphertext),{cs1:a,cs2:u}=this.split(t.ss);return{h:t.ss.h,plaintext:o,valid:i&&s,cs1:a,cs2:u}}initSession(t,e,r){const n=this.createEmptyKey(),i=new Uint8Array(32);let o;return o=t?this.initializeInitiator(e,r,i,n):this.initializeResponder(e,r,i,n),{hs:o,i:t,mc:0}}sendMessage(t,e,r){let n;if(0===t.mc)n=this.writeMessageA(t.hs,e,r);else if(1===t.mc)n=this.writeMessageB(t.hs,e);else if(2===t.mc){const{h:r,messageBuffer:i,cs1:o,cs2:s}=this.writeMessageC(t.hs,e);n=i,t.h=r,t.cs1=o,t.cs2=s}else{if(!(t.mc>2))throw new Error("Session invalid.");if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(t.cs1,e)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(t.cs2,e)}}return t.mc++,n}recvMessage(t,e){let r=new Uint8Array(0),n=!1;if(0===t.mc)({plaintext:r,valid:n}=this.readMessageA(t.hs,e));else if(1===t.mc)({plaintext:r,valid:n}=this.readMessageB(t.hs,e));else if(2===t.mc){const{h:i,plaintext:o,valid:s,cs1:a,cs2:u}=this.readMessageC(t.hs,e);r=o,n=s,t.h=i,t.cs1=a,t.cs2=u}return t.mc++,{plaintext:r,valid:n}}}e.XX=o},43499:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.NOISE=void 0;const o=r(97429);i(r(97429),e),e.NOISE=new o.Noise},90916:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyCache=void 0;class r{constructor(){this.storage=new Map}store(t,e){this.storage.set(t.id,e)}load(t){var e;return t&&null!==(e=this.storage.get(t.id))&&void 0!==e?e:null}resetStorage(){this.storage.clear()}}const n=new r;e.KeyCache=n},8587:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.logCipherState=e.logRemoteEphemeralKey=e.logRemoteStaticKey=e.logLocalEphemeralKeys=e.logLocalStaticKeys=e.logger=void 0;const i=n(r(15652)),o=r(25476),s=r(96523);let a;function u(t){a(`LOCAL_STATIC_PUBLIC_KEY ${(0,s.toString)(t.publicKey,"hex")}`),a(`LOCAL_STATIC_PRIVATE_KEY ${(0,s.toString)(t.privateKey,"hex")}`)}function c(t){t?(a(`LOCAL_PUBLIC_EPHEMERAL_KEY ${(0,s.toString)(t.publicKey,"hex")}`),a(`LOCAL_PRIVATE_EPHEMERAL_KEY ${(0,s.toString)(t.privateKey,"hex")}`)):a("Missing local ephemeral keys.")}function h(t){a(`REMOTE_STATIC_PUBLIC_KEY ${(0,s.toString)(t,"hex")}`)}function l(t){a(`REMOTE_EPHEMERAL_PUBLIC_KEY ${(0,s.toString)(t,"hex")}`)}function f(t){t.cs1&&t.cs2?(a(`CIPHER_STATE_1 ${t.cs1.n} ${(0,s.toString)(t.cs1.k,"hex")}`),a(`CIPHER_STATE_2 ${t.cs2.n} ${(0,s.toString)(t.cs2.k,"hex")}`)):a("Missing cipher state.")}e.logger=(0,i.default)("libp2p:noise"),a=o.DUMP_SESSION_KEYS?e.logger:()=>{},e.logLocalStaticKeys=u,e.logLocalEphemeralKeys=c,e.logRemoteStaticKey=h,e.logRemoteEphemeralKey=l,e.logCipherState=f},97429:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;const a=o(r(92982)),u=s(r(70564)),c=s(r(4542)),h=s(r(26632)),l=s(r(62100)),f=r(92992),d=r(11285),p=r(78858),y=r(79167),g=r(50835),m=r(45815),b=r(79813),w=r(90916),v=r(8587),_=r(25476);class E{constructor(t,e){if(this.protocol="/noise",this.prologue=new Uint8Array(0),this.earlyData=null!==e&&void 0!==e?e:new Uint8Array(0),this.useNoisePipes=!1,t){const e=a.generateKeyPairFromSeed(t);this.staticKeys={privateKey:e.secretKey,publicKey:e.publicKey}}else this.staticKeys=(0,g.generateKeypair)()}async secureOutbound(t,e,r){const n=(0,u.default)(e,{lengthEncoder:m.uint16BEEncode,lengthDecoder:m.uint16BEDecode,maxDataLength:_.NOISE_MSG_MAX_LENGTH_BYTES}),i=await this.performHandshake({connection:n,isInitiator:!0,localPeer:t,remotePeer:r}),o=await this.createSecureConnection(n,i);return{conn:o,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async secureInbound(t,e,r){const n=(0,u.default)(e,{lengthEncoder:m.uint16BEEncode,lengthDecoder:m.uint16BEDecode,maxDataLength:_.NOISE_MSG_MAX_LENGTH_BYTES}),i=await this.performHandshake({connection:n,isInitiator:!1,localPeer:t,remotePeer:r}),o=await this.createSecureConnection(n,i);return{conn:o,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async performHandshake(t){var e;const r=await(0,g.getPayload)(t.localPeer,this.staticKeys.publicKey,this.earlyData);let n=this.useNoisePipes;if(t.isInitiator&&null===w.KeyCache.load(t.remotePeer)&&(n=!1),!n)return await this.performXXHandshake(t,r);{const{remotePeer:n,connection:o,isInitiator:s}=t,a=new p.IKHandshake(s,r,this.prologue,this.staticKeys,o,null!==(e=w.KeyCache.load(t.remotePeer))&&void 0!==e?e:new Uint8Array(32),n);try{return await this.performIKHandshake(a)}catch(i){let e;return t.isInitiator&&(e=a.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(t,r,i.initialMsg,e)}}}async performXXFallbackHandshake(t,e,r,n){const{isInitiator:i,remotePeer:o,connection:s}=t,a=new y.XXFallbackHandshake(i,e,this.prologue,this.staticKeys,s,r,o,n);try{await a.propose(),await a.exchange(),await a.finish()}catch(u){(0,v.logger)(u);const t=u;throw new Error(`Error occurred during XX Fallback handshake: ${t.message}`)}return a}async performXXHandshake(t,e){const{isInitiator:r,remotePeer:n,connection:i}=t,o=new d.XXHandshake(r,e,this.prologue,this.staticKeys,i,n);try{await o.propose(),await o.exchange(),await o.finish(),this.useNoisePipes&&o.remotePeer&&w.KeyCache.store(o.remotePeer,o.getRemoteStaticKey())}catch(s){const t=s;throw new Error(`Error occurred during XX handshake: ${t.message}`)}return o}async performIKHandshake(t){return await t.stage0(),await t.stage1(),t}async createSecureConnection(t,e){const[r,n]=(0,c.default)(),i=t.unwrap();return await(0,l.default)(r,h.default,(0,b.encryptStream)(e),(0,f.encode)({lengthEncoder:m.uint16BEEncode}),i,(0,f.decode)({lengthDecoder:m.uint16BEDecode}),h.default,(0,b.decryptStream)(e),r),n}}e.Noise=E},2953:function(t,e,r){"use strict";var n,i,o;(function(s,a){i=[r(86425)],n=a,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o)})(0,(function(t){var e=t.Reader,r=t.Writer,n=t.util,i=t.roots["libp2p-noise"]||(t.roots["libp2p-noise"]={});return i.pb=function(){var o={};return o.NoiseHandshakePayload=function(){function o(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return o.prototype.identityKey=n.newBuffer([]),o.prototype.identitySig=n.newBuffer([]),o.prototype.data=n.newBuffer([]),o.create=function(t){return new o(t)},o.encode=function(t,e){return e||(e=r.create()),null!=t.identityKey&&Object.hasOwnProperty.call(t,"identityKey")&&e.uint32(10).bytes(t.identityKey),null!=t.identitySig&&Object.hasOwnProperty.call(t,"identitySig")&&e.uint32(18).bytes(t.identitySig),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(26).bytes(t.data),e},o.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.pb.NoiseHandshakePayload;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.identityKey=t.bytes();break;case 2:o.identitySig=t.bytes();break;case 3:o.data=t.bytes();break;default:t.skipType(7&s);break}}return o},o.decodeDelimited=function(t){return t instanceof e||(t=new e(t)),this.decode(t,t.uint32())},o.verify=function(t){return"object"!==typeof t||null===t?"object expected":null!=t.identityKey&&t.hasOwnProperty("identityKey")&&!(t.identityKey&&"number"===typeof t.identityKey.length||n.isString(t.identityKey))?"identityKey: buffer expected":null!=t.identitySig&&t.hasOwnProperty("identitySig")&&!(t.identitySig&&"number"===typeof t.identitySig.length||n.isString(t.identitySig))?"identitySig: buffer expected":null!=t.data&&t.hasOwnProperty("data")&&!(t.data&&"number"===typeof t.data.length||n.isString(t.data))?"data: buffer expected":null},o.fromObject=function(t){if(t instanceof i.pb.NoiseHandshakePayload)return t;var e=new i.pb.NoiseHandshakePayload;return null!=t.identityKey&&("string"===typeof t.identityKey?n.base64.decode(t.identityKey,e.identityKey=n.newBuffer(n.base64.length(t.identityKey)),0):t.identityKey.length&&(e.identityKey=t.identityKey)),null!=t.identitySig&&("string"===typeof t.identitySig?n.base64.decode(t.identitySig,e.identitySig=n.newBuffer(n.base64.length(t.identitySig)),0):t.identitySig.length&&(e.identitySig=t.identitySig)),null!=t.data&&("string"===typeof t.data?n.base64.decode(t.data,e.data=n.newBuffer(n.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},o.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.identityKey="":(r.identityKey=[],e.bytes!==Array&&(r.identityKey=n.newBuffer(r.identityKey))),e.bytes===String?r.identitySig="":(r.identitySig=[],e.bytes!==Array&&(r.identitySig=n.newBuffer(r.identitySig))),e.bytes===String?r.data="":(r.data=[],e.bytes!==Array&&(r.data=n.newBuffer(r.data)))),null!=t.identityKey&&t.hasOwnProperty("identityKey")&&(r.identityKey=e.bytes===String?n.base64.encode(t.identityKey,0,t.identityKey.length):e.bytes===Array?Array.prototype.slice.call(t.identityKey):t.identityKey),null!=t.identitySig&&t.hasOwnProperty("identitySig")&&(r.identitySig=e.bytes===String?n.base64.encode(t.identitySig,0,t.identitySig.length):e.bytes===Array?Array.prototype.slice.call(t.identitySig):t.identitySig),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?n.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o}(),i}))},50835:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isValidPublicKey=e.getHkdf=e.verifySignedPayload=e.getHandshakePayload=e.decodePayload=e.getPeerIdFromPayload=e.signPayload=e.createHandshakePayload=e.getPayload=e.generateKeypair=void 0;const a=r(56711),u=r(14185),c=o(r(92982)),h=s(r(68292)),l=r(2953),f=r(74141),d=r(92259),p=r(85489),y=l.pb.NoiseHandshakePayload;function g(){const t=c.generateKeyPair();return{publicKey:t.publicKey,privateKey:t.secretKey}}async function m(t,e,r){const n=await w(t,E(e)),i=null!==r&&void 0!==r?r:new Uint8Array(0);return b(t.marshalPubKey(),n,i)}function b(t,e,r){const n=y.create({identityKey:t,identitySig:e,data:null!==r&&void 0!==r?r:null});return y.encode(n).finish()}async function w(t,e){return await t.privKey.sign(e)}async function v(t){return await h.default.createFromPubKey(t.identityKey)}function _(t){return y.toObject(y.decode(t))}function E(t){const e=(0,d.fromString)("noise-libp2p-static-key:");return(0,p.concat)([e,t],e.length+t.length)}async function S(t,e){const r=await h.default.createFromPubKey(e);return(0,f.equals)(r.id,t)}async function A(t,e,r){const n=e.identityKey;if(!await S(r.id,n))throw new Error("Peer ID doesn't match libp2p public key.");const i=E(t),o=await h.default.createFromPubKey(n);if(!e.identitySig||!await o.pubKey.verify(i,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return o}function I(t,e){const r=new a.HKDF(u.SHA256,e,t),n=r.expand(96),i=n,o=i.slice(0,32),s=i.slice(32,64),c=i.slice(64,96);return[o,s,c]}function T(t){return t instanceof Uint8Array&&32===t.length}e.generateKeypair=g,e.getPayload=m,e.createHandshakePayload=b,e.signPayload=w,e.getPeerIdFromPayload=v,e.decodePayload=_,e.getHandshakePayload=E,e.verifySignedPayload=A,e.getHkdf=I,e.isValidPublicKey=T},17266:function(t,e,r){"use strict";r(21703);const{Buffer:n}=r(59600),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const o=!!t,s=this._offset(r),a=i-r;let u=a,c=o&&e||0,h=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(u<=this._bufs[s[0]].length-h)return o?this._bufs[s[0]].copy(t,e,h,h+u):this._bufs[s[0]].slice(h,h+u);o||(t=n.allocUnsafe(a));for(let n=s[0];n<this._bufs.length;n++){const e=this._bufs[n].length-h;if(!(u>e)){this._bufs[n].copy(t,c,h,h+u),c+=e;break}this._bufs[n].copy(t,c,h),c+=e,u-=e,h&&(h=0)}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"===typeof e&&(r=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=n.from([t]):"string"===typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const r=e.length-s;if(r>=t.length){const r=e.indexOf(t,s);if(-1!==r)return this._reverseOffset([o,r]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,r){return this.slice(t,t+r)[e](0,r)}:o.prototype[e]=function(r=0){return this.slice(r,r+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},59600:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},80594:function(t,e,r){"use strict";r.d(e,{Kn:function(){return g},CR:function(){return m}});r(48675),r(3462),r(37380),r(1118);var n=r(36482),i=r(83966),o=r(76502),s=r(27991),a=r(48737);const u="address/5.6.1",c=new a.Yd(u);function h(t){(0,n.A7)(t,20)||c.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let n=0;n<40;n++)r[n]=e[n].charCodeAt(0);const i=(0,n.lE)((0,o.w)(r));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(e[n]=e[n].toUpperCase()),(15&i[n>>1])>=8&&(e[n+1]=e[n+1].toUpperCase());return"0x"+e.join("")}const l=9007199254740991;function f(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const d={};for(let b=0;b<10;b++)d[String(b)]=String(b);for(let b=0;b<26;b++)d[String.fromCharCode(65+b)]=String(10+b);const p=Math.floor(f(l));function y(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map((t=>d[t])).join("");while(e.length>=p){let t=e.substring(0,p);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);while(r.length<2)r="0"+r;return r}function g(t){let e=null;if("string"!==typeof t&&c.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=h(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&c.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){t.substring(2,4)!==y(t)&&c.throwArgumentError("bad icap checksum","address",t),e=(0,i.g$)(t.substring(4));while(e.length<40)e="0"+e;e=h("0x"+e)}else c.throwArgumentError("invalid address","address",t);return e}function m(t){let e=null;try{e=g(t.from)}catch(a){c.throwArgumentError("missing from address","transaction",t)}const r=(0,n.G1)((0,n.lE)(i.O$.from(t.nonce).toHexString()));return g((0,n.p3)((0,o.w)((0,s.encode)([e,r])),12))}},83966:function(t,e,r){"use strict";r.d(e,{O$:function(){return d},g$:function(){return b}});var n=r(2396),i=r.n(n),o=r(36482),s=r(48737);const a="bignumber/5.6.2";var u=i().BN;const c=new s.Yd(a),h={},l=9007199254740991;let f=!1;class d{constructor(t,e){t!==h&&c.throwError("cannot call constructor directly; use BigNumber.from",s.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return y(g(this).fromTwos(t))}toTwos(t){return y(g(this).toTwos(t))}abs(){return"-"===this._hex[0]?d.from(this._hex.substring(1)):this}add(t){return y(g(this).add(g(t)))}sub(t){return y(g(this).sub(g(t)))}div(t){const e=d.from(t);return e.isZero()&&m("division-by-zero","div"),y(g(this).div(g(t)))}mul(t){return y(g(this).mul(g(t)))}mod(t){const e=g(t);return e.isNeg()&&m("division-by-zero","mod"),y(g(this).umod(e))}pow(t){const e=g(t);return e.isNeg()&&m("negative-power","pow"),y(g(this).pow(e))}and(t){const e=g(t);return(this.isNegative()||e.isNeg())&&m("unbound-bitwise-result","and"),y(g(this).and(e))}or(t){const e=g(t);return(this.isNegative()||e.isNeg())&&m("unbound-bitwise-result","or"),y(g(this).or(e))}xor(t){const e=g(t);return(this.isNegative()||e.isNeg())&&m("unbound-bitwise-result","xor"),y(g(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&m("negative-width","mask"),y(g(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&m("negative-width","shl"),y(g(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&m("negative-width","shr"),y(g(this).shrn(t))}eq(t){return g(this).eq(g(t))}lt(t){return g(this).lt(g(t))}lte(t){return g(this).lte(g(t))}gt(t){return g(this).gt(g(t))}gte(t){return g(this).gte(g(t))}isNegative(){return"-"===this._hex[0]}isZero(){return g(this).isZero()}toNumber(){try{return g(this).toNumber()}catch(t){m("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(t){}return c.throwError("this platform does not support BigInt",s.Yd.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?f||(f=!0,c.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?c.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",s.Yd.errors.UNEXPECTED_ARGUMENT,{}):c.throwError("BigNumber.toString does not accept parameters",s.Yd.errors.UNEXPECTED_ARGUMENT,{})),g(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof d)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new d(h,p(t)):t.match(/^-?[0-9]+$/)?new d(h,p(new u(t))):c.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&m("underflow","BigNumber.from",t),(t>=l||t<=-l)&&m("overflow","BigNumber.from",t),d.from(String(t));const e=t;if("bigint"===typeof e)return d.from(e.toString());if((0,o._t)(e))return d.from((0,o.Dv)(e));if(e)if(e.toHexString){const t=e.toHexString();if("string"===typeof t)return d.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"===typeof t&&((0,o.A7)(t)||"-"===t[0]&&(0,o.A7)(t.substring(1))))return d.from(t)}return c.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!(!t||!t._isBigNumber)}}function p(t){if("string"!==typeof t)return p(t.toString(16));if("-"===t[0])return t=t.substring(1),"-"===t[0]&&c.throwArgumentError("invalid hex","value",t),t=p(t),"0x00"===t?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";t.length%2&&(t="0x0"+t.substring(2));while(t.length>4&&"0x00"===t.substring(0,4))t="0x"+t.substring(4);return t}function y(t){return d.from(p(t))}function g(t){const e=d.from(t).toHexString();return"-"===e[0]?new u("-"+e.substring(3),16):new u(e.substring(2),16)}function m(t,e,r){const n={fault:t,operation:e};return null!=r&&(n.value=r),c.throwError(t,s.Yd.errors.NUMERIC_FAULT,n)}function b(t){return new u(t,36).toString(16)}},36482:function(t,e,r){"use strict";r.d(e,{lE:function(){return l},zo:function(){return f},xs:function(){return v},E1:function(){return b},p3:function(){return w},$P:function(){return _},$m:function(){return S},Dv:function(){return m},_t:function(){return h},Zq:function(){return u},A7:function(){return y},N:function(){return A},G1:function(){return d}});r(48675),r(3462),r(37380),r(1118);var n=r(48737);const i="bytes/5.6.1",o=new n.Yd(i);function s(t){return!!t.toHexString}function a(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return a(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function u(t){return y(t)&&!(t.length%2)||h(t)}function c(t){return"number"===typeof t&&t==t&&t%1===0}function h(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"===typeof t)return!1;if(!c(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!c(r)||r<0||r>=256)return!1}return!0}function l(t,e){if(e||(e={}),"number"===typeof t){o.checkSafeUint53(t,"invalid arrayify value");const e=[];while(t)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),a(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"===typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),s(t)&&(t=t.toHexString()),y(t)){let r=t.substring(2);r.length%2&&("left"===e.hexPad?r="0"+r:"right"===e.hexPad?r+="0":o.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let t=0;t<r.length;t+=2)n.push(parseInt(r.substring(t,t+2),16));return a(new Uint8Array(n))}return h(t)?a(new Uint8Array(t)):o.throwArgumentError("invalid arrayify value","value",t)}function f(t){const e=t.map((t=>l(t))),r=e.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(r);return e.reduce(((t,e)=>(n.set(e,t),t+e.length)),0),a(n)}function d(t){let e=l(t);if(0===e.length)return e;let r=0;while(r<e.length&&0===e[r])r++;return r&&(e=e.slice(r)),e}function p(t,e){t=l(t),t.length>e&&o.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),a(r)}function y(t,e){return!("string"!==typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}const g="0123456789abcdef";function m(t,e){if(e||(e={}),"number"===typeof t){o.checkSafeUint53(t,"invalid hexlify value");let e="";while(t)e=g[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("bigint"===typeof t)return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"===typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),s(t))return t.toHexString();if(y(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":o.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(h(t)){let e="0x";for(let r=0;r<t.length;r++){let n=t[r];e+=g[(240&n)>>4]+g[15&n]}return e}return o.throwArgumentError("invalid hexlify value","value",t)}function b(t){if("string"!==typeof t)t=m(t);else if(!y(t)||t.length%2)return null;return(t.length-2)/2}function w(t,e,r){return"string"!==typeof t?t=m(t):(!y(t)||t.length%2)&&o.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=r?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function v(t){let e="0x";return t.forEach((t=>{e+=m(t).substring(2)})),e}function _(t){const e=E(m(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function E(t){"string"!==typeof t&&(t=m(t)),y(t)||o.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;while(e<t.length&&"0"===t[e])e++;return"0x"+t.substring(e)}function S(t,e){"string"!==typeof t?t=m(t):y(t)||o.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&o.throwArgumentError("value out of range","value",arguments[1]);while(t.length<2*e+2)t="0x0"+t.substring(2);return t}function A(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(u(t)){let r=l(t);64===r.length?(e.v=27+(r[32]>>7),r[32]&=127,e.r=m(r.slice(0,32)),e.s=m(r.slice(32,64))):65===r.length?(e.r=m(r.slice(0,32)),e.s=m(r.slice(32,64)),e.v=r[64]):o.throwArgumentError("invalid signature string","signature",t),e.v<27&&(0===e.v||1===e.v?e.v+=27:o.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=m(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){const r=p(l(e._vs),32);e._vs=m(r);const n=r[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=n:e.recoveryParam!==n&&o.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),r[0]&=127;const i=m(r);null==e.s?e.s=i:e.s!==i&&o.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?o.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{const r=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==r&&o.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&y(e.r)?e.r=S(e.r,32):o.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&y(e.s)?e.s=S(e.s,32):o.throwArgumentError("signature missing or invalid s","signature",t);const r=l(e.s);r[0]>=128&&o.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=m(r);e._vs&&(y(e._vs)||o.throwArgumentError("signature invalid _vs","signature",t),e._vs=S(e._vs,32)),null==e._vs?e._vs=n:e._vs!==n&&o.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}},16343:function(t,e,r){"use strict";r.d(e,{r:function(){return a}});var n=r(36482),i=r(76502),o=r(94469);const s="Ethereum Signed Message:\n";function a(t){return"string"===typeof t&&(t=(0,o.Y0)(t)),(0,i.w)((0,n.zo)([(0,o.Y0)(s),(0,o.Y0)(String(t.length)),t]))}},76502:function(t,e,r){"use strict";r.d(e,{w:function(){return s}});var n=r(69893),i=r.n(n),o=r(36482);function s(t){return"0x"+i().keccak_256((0,o.lE)(t))}},48737:function(t,e,r){"use strict";r.d(e,{Yd:function(){return y}});r(21703),r(48675),r(3462),r(37380),r(1118);const n="logger/5.6.0";var i=r(15941);let o=!1,s=!1;const a={debug:1,default:2,info:2,warning:3,error:4,off:5};let u=a["default"],c=null;function h(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const l=h();var f,d;(function(t){t["DEBUG"]="DEBUG",t["INFO"]="INFO",t["WARNING"]="WARNING",t["ERROR"]="ERROR",t["OFF"]="OFF"})(f||(f={})),function(t){t["UNKNOWN_ERROR"]="UNKNOWN_ERROR",t["NOT_IMPLEMENTED"]="NOT_IMPLEMENTED",t["UNSUPPORTED_OPERATION"]="UNSUPPORTED_OPERATION",t["NETWORK_ERROR"]="NETWORK_ERROR",t["SERVER_ERROR"]="SERVER_ERROR",t["TIMEOUT"]="TIMEOUT",t["BUFFER_OVERRUN"]="BUFFER_OVERRUN",t["NUMERIC_FAULT"]="NUMERIC_FAULT",t["MISSING_NEW"]="MISSING_NEW",t["INVALID_ARGUMENT"]="INVALID_ARGUMENT",t["MISSING_ARGUMENT"]="MISSING_ARGUMENT",t["UNEXPECTED_ARGUMENT"]="UNEXPECTED_ARGUMENT",t["CALL_EXCEPTION"]="CALL_EXCEPTION",t["INSUFFICIENT_FUNDS"]="INSUFFICIENT_FUNDS",t["NONCE_EXPIRED"]="NONCE_EXPIRED",t["REPLACEMENT_UNDERPRICED"]="REPLACEMENT_UNDERPRICED",t["UNPREDICTABLE_GAS_LIMIT"]="UNPREDICTABLE_GAS_LIMIT",t["TRANSACTION_REPLACED"]="TRANSACTION_REPLACED"}(d||(d={}));const p="0123456789abcdef";class y{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const r=t.toLowerCase();null==a[r]&&this.throwArgumentError("invalid log level name","logLevel",t),u>a[r]||i.log.apply(i,e)}debug(...t){this._log(y.levels.DEBUG,t)}info(...t){this._log(y.levels.INFO,t)}warn(...t){this._log(y.levels.WARNING,t)}makeError(t,e,r){if(s)return this.makeError("censored error",e,{});e||(e=y.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((t=>{const e=r[t];try{if(e instanceof Uint8Array){let r="";for(let t=0;t<e.length;t++)r+=p[e[t]>>4],r+=p[15&e[t]];n.push(t+"=Uint8Array(0x"+r+")")}else n.push(t+"="+JSON.stringify(e))}catch(a){n.push(t+"="+JSON.stringify(r[t].toString()))}})),n.push(`code=${e}`),n.push(`version=${this.version}`);const i=t;let o="";switch(e){case d.NUMERIC_FAULT:{o="NUMERIC_FAULT";const e=t;switch(e){case"overflow":case"underflow":case"division-by-zero":o+="-"+e;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case d.CALL_EXCEPTION:case d.INSUFFICIENT_FUNDS:case d.MISSING_NEW:case d.NONCE_EXPIRED:case d.REPLACEMENT_UNDERPRICED:case d.TRANSACTION_REPLACED:case d.UNPREDICTABLE_GAS_LIMIT:o=e;break}o&&(t+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const a=new Error(t);return a.reason=i,a.code=e,Object.keys(r).forEach((function(t){a[t]=r[t]})),a}throwError(t,e,r){throw this.makeError(t,e,r)}throwArgumentError(t,e,r){return this.throwError(t,y.errors.INVALID_ARGUMENT,{argument:e,value:r})}assert(t,e,r,n){t||this.throwError(e,r,n)}assertArgument(t,e,r,n){t||this.throwArgumentError(e,r,n)}checkNormalize(t){null==t&&(t="platform missing String.prototype.normalize"),l&&this.throwError("platform missing String.prototype.normalize",y.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:l})}checkSafeUint53(t,e){"number"===typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,y.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,y.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,r){r=r?": "+r:"",t<e&&this.throwError("missing argument"+r,y.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+r,y.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",y.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",y.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",y.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return c||(c=new y(n)),c}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",y.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),o){if(!t)return;this.globalLogger().throwError("error censorship permanent",y.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}s=!!t,o=!!e}static setLogLevel(t){const e=a[t.toLowerCase()];null!=e?u=e:y.globalLogger().warn("invalid log level - "+t)}static from(t){return new y(t)}}y.errors=d,y.levels=f},72224:function(t,e,r){"use strict";r.d(e,{dk:function(){return g},uj:function(){return h},p$:function(){return y},zG:function(){return a},tu:function(){return u},mE:function(){return c},DC:function(){return l}});var n=r(48737);const i="properties/5.6.0";var o=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const s=new n.Yd(i);function a(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function u(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||"object"!==typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function c(t){return o(this,void 0,void 0,(function*(){const e=Object.keys(t).map((e=>{const r=t[e];return Promise.resolve(r).then((t=>({key:e,value:t})))})),r=yield Promise.all(e);return r.reduce(((t,e)=>(t[e.key]=e.value,t)),{})}))}function h(t,e){t&&"object"===typeof t||s.throwArgumentError("invalid object","object",t),Object.keys(t).forEach((r=>{e[r]||s.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)}))}function l(t){const e={};for(const r in t)e[r]=t[r];return e}const f={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function d(t){if(void 0===t||null===t||f[typeof t])return!0;if(Array.isArray(t)||"object"===typeof t){if(!Object.isFrozen(t))return!1;const r=Object.keys(t);for(let n=0;n<r.length;n++){let i=null;try{i=t[r[n]]}catch(e){continue}if(!d(i))return!1}return!0}return s.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function p(t){if(d(t))return t;if(Array.isArray(t))return Object.freeze(t.map((t=>y(t))));if("object"===typeof t){const e={};for(const r in t){const n=t[r];void 0!==n&&a(e,r,y(n))}return e}return s.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function y(t){return p(t)}class g{constructor(t){for(const e in t)this[e]=y(t[e])}}},27991:function(t,e,r){"use strict";r.r(e),r.d(e,{decode:function(){return d},encode:function(){return h}});var n=r(36482),i=r(48737);const o="rlp/5.6.1",s=new i.Yd(o);function a(t){const e=[];while(t)e.unshift(255&t),t>>=8;return e}function u(t,e,r){let n=0;for(let i=0;i<r;i++)n=256*n+t[e+i];return n}function c(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(c(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=a(e.length);return r.unshift(247+r.length),r.concat(e)}(0,n.Zq)(t)||s.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call((0,n.lE)(t));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=a(e.length);return r.unshift(183+r.length),r.concat(e)}function h(t){return(0,n.Dv)(c(t))}function l(t,e,r,n){const o=[];while(r<e+1+n){const a=f(t,r);o.push(a.result),r+=a.consumed,r>e+1+n&&s.throwError("child data too short",i.Yd.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:o}}function f(t,e){if(0===t.length&&s.throwError("data too short",i.Yd.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&s.throwError("data short segment too short",i.Yd.errors.BUFFER_OVERRUN,{});const n=u(t,e+1,r);return e+1+r+n>t.length&&s.throwError("data long segment too short",i.Yd.errors.BUFFER_OVERRUN,{}),l(t,e,e+1+r,r+n)}if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&s.throwError("data array too short",i.Yd.errors.BUFFER_OVERRUN,{}),l(t,e,e+1,r)}if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&s.throwError("data array too short",i.Yd.errors.BUFFER_OVERRUN,{});const o=u(t,e+1,r);e+1+r+o>t.length&&s.throwError("data array too short",i.Yd.errors.BUFFER_OVERRUN,{});const a=(0,n.Dv)(t.slice(e+1+r,e+1+r+o));return{consumed:1+r+o,result:a}}if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&s.throwError("data too short",i.Yd.errors.BUFFER_OVERRUN,{});const o=(0,n.Dv)(t.slice(e+1,e+1+r));return{consumed:1+r,result:o}}return{consumed:1,result:(0,n.Dv)(t[e])}}function d(t){const e=(0,n.lE)(t),r=f(e,0);return r.consumed!==e.length&&s.throwArgumentError("invalid rlp data","data",t),r.result}},94469:function(t,e,r){"use strict";r.d(e,{Uj:function(){return a},uu:function(){return y},Y0:function(){return p},XL:function(){return m},ZN:function(){return g}});r(21703);var n=r(36482),i=r(48737);const o="strings/5.6.1",s=new i.Yd(o);var a,u;function c(t,e,r,n,i){return s.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function h(t,e,r,n,i){if(t===u.BAD_PREFIX||t===u.UNEXPECTED_CONTINUE){let t=0;for(let n=e+1;n<r.length;n++){if(r[n]>>6!==2)break;t++}return t}return t===u.OVERRUN?r.length-e-1:0}function l(t,e,r,n,i){return t===u.OVERLONG?(n.push(i),0):(n.push(65533),h(t,e,r,n,i))}(function(t){t["current"]="",t["NFC"]="NFC",t["NFD"]="NFD",t["NFKC"]="NFKC",t["NFKD"]="NFKD"})(a||(a={})),function(t){t["UNEXPECTED_CONTINUE"]="unexpected continuation byte",t["BAD_PREFIX"]="bad codepoint prefix",t["OVERRUN"]="string overrun",t["MISSING_CONTINUE"]="missing continuation byte",t["OUT_OF_RANGE"]="out of UTF-8 range",t["UTF16_SURROGATE"]="UTF-16 surrogate",t["OVERLONG"]="overlong representation"}(u||(u={}));const f=Object.freeze({error:c,ignore:h,replace:l});function d(t,e){null==e&&(e=f.error),t=(0,n.lE)(t);const r=[];let i=0;while(i<t.length){const n=t[i++];if(n>>7===0){r.push(n);continue}let o=null,s=null;if(192===(224&n))o=1,s=127;else if(224===(240&n))o=2,s=2047;else{if(240!==(248&n)){i+=e(128===(192&n)?u.UNEXPECTED_CONTINUE:u.BAD_PREFIX,i-1,t,r);continue}o=3,s=65535}if(i-1+o>=t.length){i+=e(u.OVERRUN,i-1,t,r);continue}let a=n&(1<<8-o-1)-1;for(let c=0;c<o;c++){let n=t[i];if(128!=(192&n)){i+=e(u.MISSING_CONTINUE,i,t,r),a=null;break}a=a<<6|63&n,i++}null!==a&&(a>1114111?i+=e(u.OUT_OF_RANGE,i-1-o,t,r,a):a>=55296&&a<=57343?i+=e(u.UTF16_SURROGATE,i-1-o,t,r,a):a<=s?i+=e(u.OVERLONG,i-1-o,t,r,a):r.push(a))}return r}function p(t,e=a.current){e!=a.current&&(s.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const e=t.charCodeAt(n);if(e<128)r.push(e);else if(e<2048)r.push(e>>6|192),r.push(63&e|128);else if(55296==(64512&e)){n++;const i=t.charCodeAt(n);if(n>=t.length||56320!==(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&e)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(e>>12|224),r.push(e>>6&63|128),r.push(63&e|128)}return(0,n.lE)(r)}function y(t){return t.map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function g(t,e){return y(d(t,e))}function m(t,e=a.current){return d(p(t,e))}},6831:function(t,e,r){"use strict";r.d(e,{z7:function(){return yt},db:function(){return lt},Qc:function(){return St},RJ:function(){return ft}});r(21703);var n=r(80594),i=r(83966),o=r(36482);const s=i.O$.from(0);var a=r(76502),u=r(27991),c=r(2396),h=r.n(c),l=r(78730),f=r.n(l);"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self&&self;function d(t,e,r){return r={path:e,exports:{},require:function(t,e){return p(t,void 0===e||null===e?r.path:e)}},t(r,r.exports),r.exports}function p(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var y=g;function g(t,e){if(!t)throw new Error(e||"Assertion failed")}g.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var m=d((function(t,e){var r=e;function n(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!==typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r}function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}r.toArray=n,r.zero2=i,r.toHex=o,r.encode=function(t,e){return"hex"===e?o(t):t}})),b=d((function(t,e){var r=e;function n(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n}function i(t,e){var r=[[],[]];t=t.clone(),e=e.clone();var n,i=0,o=0;while(t.cmpn(-i)>0||e.cmpn(-o)>0){var s,a,u=t.andln(3)+i&3,c=e.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),0===(1&u)?s=0:(n=t.andln(7)+i&7,s=3!==n&&5!==n||2!==c?u:-u),r[0].push(s),0===(1&c)?a=0:(n=e.andln(7)+o&7,a=3!==n&&5!==n||2!==u?c:-c),r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r}function o(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}}function s(t){return"string"===typeof t?r.toArray(t,"hex"):t}function a(t){return new(h())(t,"hex","le")}r.assert=y,r.toArray=m.toArray,r.zero2=m.zero2,r.toHex=m.toHex,r.encode=m.encode,r.getNAF=n,r.getJSF=i,r.cachedProperty=o,r.parseBytes=s,r.intFromLE=a})),w=b.getNAF,v=b.getJSF,_=b.assert;function E(t,e){this.type=t,this.p=new(h())(e.p,16),this.red=e.prime?h().red(e.prime):h().mont(this.p),this.zero=new(h())(0).toRed(this.red),this.one=new(h())(1).toRed(this.red),this.two=new(h())(2).toRed(this.red),this.n=e.n&&new(h())(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var S=E;function A(t,e){this.curve=t,this.type=e,this.precomputed=null}E.prototype.point=function(){throw new Error("Not implemented")},E.prototype.validate=function(){throw new Error("Not implemented")},E.prototype._fixedNafMul=function(t,e){_(t.precomputed);var r=t._getDoubles(),n=w(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+n[u];a.push(s)}for(var c=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<a.length;o++)s=a[o],s===l?h=h.mixedAdd(r.points[o]):s===-l&&(h=h.mixedAdd(r.points[o].neg()));c=c.add(h)}return c.toP()},E.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=w(e,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];_(0!==c),s="affine"===t.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===t.type?s.toP():s},E.prototype._wnafMulAdd=function(t,e,r,n,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,h=this._wnafT3,l=0;for(o=0;o<n;o++){a=e[o];var f=a._getNAFPoints(t);u[o]=f.wnd,c[o]=f.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var y=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(y[1]=e[d].add(e[p]),y[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(y[1]=e[d].toJ().mixedAdd(e[p]),y[2]=e[d].add(e[p].neg())):(y[1]=e[d].toJ().mixedAdd(e[p]),y[2]=e[d].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=v(r[d],r[p]);for(l=Math.max(m[0].length,l),h[d]=new Array(l),h[p]=new Array(l),s=0;s<l;s++){var b=0|m[0][s],_=0|m[1][s];h[d][s]=g[3*(b+1)+(_+1)],h[p][s]=0,c[d]=y}}else h[d]=w(r[d],u[d],this._bitLength),h[p]=w(r[p],u[p],this._bitLength),l=Math.max(h[d].length,l),l=Math.max(h[p].length,l)}var E=this.jpoint(null,null,null),S=this._wnafT4;for(o=l;o>=0;o--){var A=0;while(o>=0){var I=!0;for(s=0;s<n;s++)S[s]=0|h[s][o],0!==S[s]&&(I=!1);if(!I)break;A++,o--}if(o>=0&&A++,E=E.dblp(A),o<0)break;for(s=0;s<n;s++){var T=S[s];0!==T&&(T>0?a=c[s][T-1>>1]:T<0&&(a=c[s][-T-1>>1].neg()),E="affine"===a.type?E.mixedAdd(a):E.add(a))}}for(o=0;o<n;o++)c[o]=null;return i?E:E.toP()},E.BasePoint=A,A.prototype.eq=function(){throw new Error("Not implemented")},A.prototype.validate=function(){return this.curve.validate(this)},E.prototype.decodePoint=function(t,e){t=b.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1===2*r){6===t[0]?_(t[t.length-1]%2===0):7===t[0]&&_(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));return n}if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},A.prototype.encodeCompressed=function(t){return this.encode(t,!0)},A.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},A.prototype.encode=function(t,e){return b.encode(this._encode(e),t)},A.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},A.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},A.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},A.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},A.prototype._getBeta=function(){return null},A.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var I=d((function(t){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),T=b.assert;function R(t){S.call(this,"short",t),this.a=new(h())(t.a,16).toRed(this.red),this.b=new(h())(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}I(R,S);var M=R;function k(t,e,r,n){S.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(h())(e,16),this.y=new(h())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function C(t,e,r,n){S.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(h())(0)):(this.x=new(h())(e,16),this.y=new(h())(r,16),this.z=new(h())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}R.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r,n;if(t.beta)e=new(h())(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=i[0].cmp(i[1])<0?i[0]:i[1],e=e.toRed(this.red)}if(t.lambda)r=new(h())(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?r=o[0]:(r=o[1],T(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return n=t.basis?t.basis.map((function(t){return{a:new(h())(t.a,16),b:new(h())(t.b,16)}})):this._getEndoBasis(r),{beta:e,lambda:r,basis:n}}},R.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:h().mont(t),r=new(h())(2).toRed(e).redInvm(),n=r.redNeg(),i=new(h())(3).toRed(e).redNeg().redSqrt().redMul(r),o=n.redAdd(i).fromRed(),s=n.redSub(i).fromRed();return[o,s]},R.prototype._getEndoBasis=function(t){var e,r,n,i,o,s,a,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new(h())(1),y=new(h())(0),g=new(h())(0),m=new(h())(1),b=0;while(0!==f.cmpn(0)){var w=d.div(f);u=d.sub(w.mul(f)),c=g.sub(w.mul(p));var v=m.sub(w.mul(y));if(!n&&u.cmp(l)<0)e=a.neg(),r=p,n=u.neg(),i=c;else if(n&&2===++b)break;a=u,d=f,f=u,g=p,p=c,m=y,y=v}o=u.neg(),s=c;var _=n.sqr().add(i.sqr()),E=o.sqr().add(s.sqr());return E.cmp(_)>=0&&(o=e,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},R.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b),h=t.sub(s).sub(a),l=u.add(c).neg();return{k1:h,k2:l}},R.prototype.pointFromX=function(t,e){t=new(h())(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},R.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},R.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),h=0;h<2*o;h++)n[h]=null,i[h]=null;return c},I(k,S.BasePoint),R.prototype.point=function(t,e,r){return new k(this,t,e,r)},R.prototype.pointFromJSON=function(t,e){return k.fromJSON(this,t,e)},k.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},k.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},k.fromJSON=function(t,e,r){"string"===typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},k.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},k.prototype.isInfinity=function(){return this.inf},k.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},k.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},k.prototype.getX=function(){return this.x.fromRed()},k.prototype.getY=function(){return this.y.fromRed()},k.prototype.mul=function(t){return t=new(h())(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},k.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},k.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},k.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},k.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},k.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t},I(C,S.BasePoint),R.prototype.jpoint=function(t,e,r){return new C(this,t,e,r)},C.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},C.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},C.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),h=c.redMul(a),l=n.redMul(c),f=u.redSqr().redIAdd(h).redISub(l).redISub(l),d=u.redMul(l.redISub(f)).redISub(o.redMul(h)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},C.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),h=r.redMul(u),l=a.redSqr().redIAdd(c).redISub(h).redISub(h),f=a.redMul(h.redISub(l)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(l,f,d)},C.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(e=0;e<t;e++){var h=o.redSqr(),l=c.redSqr(),f=l.redSqr(),d=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(u)),p=o.redMul(l),y=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(y),m=d.redMul(g);m=m.redIAdd(m).redISub(f);var b=c.redMul(a);e+1<t&&(u=u.redMul(f)),o=y,a=b,c=m}return this.curve.jpoint(o,c.redMul(i),a)},C.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},C.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=u,e=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(h).redISub(f);d=d.redIAdd(d);var p=h.redAdd(h).redIAdd(h),y=p.redSqr(),g=f.redIAdd(f);g=g.redIAdd(g),g=g.redIAdd(g),t=y.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(t,e,r)},C.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);t=u;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),e=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),d=this.x.redSub(h).redMul(this.x.redAdd(h));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f);p=p.redIAdd(p);var y=p.redAdd(p);t=d.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var g=l.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},C.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e);u=u.redIAdd(u);var c=u.redMul(s),h=a.redSqr().redISub(c.redAdd(c)),l=c.redISub(h),f=s.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var d=a.redMul(l).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(h,d,p)},C.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(o);var a=s.redSqr(),u=n.redIAdd(n);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),h=e.redMul(c);h=h.redIAdd(h),h=h.redIAdd(h);var l=this.x.redMul(a).redISub(h);l=l.redIAdd(l),l=l.redIAdd(l);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,f,d)},C.prototype.mul=function(t,e){return t=new(h())(t,e),this.curve._wnafMul(this,t)},C.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},C.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},C.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},C.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var O=d((function(t,e){var r=e;r.base=S,r.short=M,r.mont=null,r.edwards=null})),P=d((function(t,e){var r,n=e,i=b.assert;function o(t){"short"===t.type?this.curve=new O.short(t):"edwards"===t.type?this.curve=new O.edwards(t):this.curve=new O.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new o(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:f().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:f().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:f().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:f().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:f().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:f().sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:f().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(a){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:f().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function B(t){if(!(this instanceof B))return new B(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=m.toArray(t.entropy,t.entropyEnc||"hex"),r=m.toArray(t.nonce,t.nonceEnc||"hex"),n=m.toArray(t.pers,t.persEnc||"hex");y(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var x=B;B.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},B.prototype._hmac=function(){return new(f().hmac)(this.hash,this.K)},B.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},B.prototype.reseed=function(t,e,r,n){"string"!==typeof e&&(n=r,r=e,e=null),t=m.toArray(t,e),r=m.toArray(r,n),y(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},B.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof e&&(n=r,r=e,e=null),r&&(r=m.toArray(r,n||"hex"),this._update(r));var i=[];while(i.length<t)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(r),this._reseed++,m.encode(o,e)};var N=b.assert;function D(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var L=D;D.fromPublic=function(t,e,r){return e instanceof D?e:new D(t,{pub:e,pubEnc:r})},D.fromPrivate=function(t,e,r){return e instanceof D?e:new D(t,{priv:e,privEnc:r})},D.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},D.prototype.getPublic=function(t,e){return"string"===typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},D.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},D.prototype._importPrivate=function(t,e){this.priv=new(h())(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},D.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?N(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||N(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},D.prototype.derive=function(t){return t.validate()||N(t.validate(),"public point not validated"),t.mul(this.priv).getX()},D.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},D.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},D.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var U=b.assert;function j(t,e){if(t instanceof j)return t;this._importDER(t,e)||(U(t.r&&t.s,"Signature without r or s"),this.r=new(h())(t.r,16),this.s=new(h())(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var F=j;function K(){this.place=0}function $(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function q(t){var e=0,r=t.length-1;while(!t[e]&&!(128&t[e+1])&&e<r)e++;return 0===e?t:t.slice(e)}function H(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);t.push(128|r);while(--r)t.push(e>>>(r<<3)&255);t.push(e)}}j.prototype._importDER=function(t,e){t=b.toArray(t,e);var r=new K;if(48!==t[r.place++])return!1;var n=$(t,r);if(!1===n)return!1;if(n+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var i=$(t,r);if(!1===i)return!1;var o=t.slice(r.place,i+r.place);if(r.place+=i,2!==t[r.place++])return!1;var s=$(t,r);if(!1===s)return!1;if(t.length!==s+r.place)return!1;var a=t.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(h())(o),this.s=new(h())(a),this.recoveryParam=null,!0},j.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=q(e),r=q(r);while(!r[0]&&!(128&r[1]))r=r.slice(1);var n=[2];H(n,e.length),n=n.concat(e),n.push(2),H(n,r.length);var i=n.concat(r),o=[48];return H(o,i.length),o=o.concat(i),b.encode(o,t)};var z=function(){throw new Error("unsupported")},V=b.assert;function G(t){if(!(this instanceof G))return new G(t);"string"===typeof t&&(V(Object.prototype.hasOwnProperty.call(P,t),"Unknown curve "+t),t=P[t]),t instanceof P.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var W=G;G.prototype.keyPair=function(t){return new L(this,t)},G.prototype.keyFromPrivate=function(t,e){return L.fromPrivate(this,t,e)},G.prototype.keyFromPublic=function(t,e){return L.fromPublic(this,t,e)},G.prototype.genKeyPair=function(t){t||(t={});for(var e=new x({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||z(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(h())(2));;){var i=new(h())(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},G.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},G.prototype.sign=function(t,e,r,n){"object"===typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new(h())(t,16));for(var i=this.n.byteLength(),o=e.getPrivate().toArray("be",i),s=t.toArray("be",i),a=new x({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new(h())(1)),c=0;;c++){var l=n.k?n.k(c):new(h())(a.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(u)>=0)){var f=this.g.mul(l);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var y=l.invm(this.n).mul(p.mul(e.getPrivate()).iadd(t));if(y=y.umod(this.n),0!==y.cmpn(0)){var g=(f.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return n.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),g^=1),new F({r:p,s:y,recoveryParam:g})}}}}}},G.prototype.verify=function(t,e,r,n){t=this._truncateToN(new(h())(t,16)),r=this.keyFromPublic(r,n),e=new F(e,"hex");var i=e.r,o=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),u=a.mul(t).umod(this.n),c=a.mul(i).umod(this.n);return this.curve._maxwellTrick?(s=this.g.jmulAdd(u,r.getPublic(),c),!s.isInfinity()&&s.eqXToP(i)):(s=this.g.mulAdd(u,r.getPublic(),c),!s.isInfinity()&&0===s.getX().umod(this.n).cmp(i))},G.prototype.recoverPubKey=function(t,e,r,n){V((3&r)===r,"The recovery param is more than two bits"),e=new F(e,n);var i=this.n,o=new(h())(t),s=e.r,a=e.s,u=1&r,c=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");s=c?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var l=e.r.invm(i),f=i.sub(o).mul(l).umod(i),d=a.mul(l).umod(i);return this.g.mulAdd(f,s,d)},G.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new F(e,n),null!==e.recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Y=d((function(t,e){var r=e;r.version={version:"6.5.4"}.version,r.utils=b,r.rand=function(){throw new Error("unsupported")},r.curve=O,r.curves=P,r.ec=W,r.eddsa=null})),J=Y.ec,Z=r(72224),X=r(48737);const Q="signing-key/5.6.2",tt=new X.Yd(Q);let et=null;function rt(){return et||(et=new J("secp256k1")),et}class nt{constructor(t){(0,Z.zG)(this,"curve","secp256k1"),(0,Z.zG)(this,"privateKey",(0,o.Dv)(t)),32!==(0,o.E1)(this.privateKey)&&tt.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const e=rt().keyFromPrivate((0,o.lE)(this.privateKey));(0,Z.zG)(this,"publicKey","0x"+e.getPublic(!1,"hex")),(0,Z.zG)(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),(0,Z.zG)(this,"_isSigningKey",!0)}_addPoint(t){const e=rt().keyFromPublic((0,o.lE)(this.publicKey)),r=rt().keyFromPublic((0,o.lE)(t));return"0x"+e.pub.add(r.pub).encodeCompressed("hex")}signDigest(t){const e=rt().keyFromPrivate((0,o.lE)(this.privateKey)),r=(0,o.lE)(t);32!==r.length&&tt.throwArgumentError("bad digest length","digest",t);const n=e.sign(r,{canonical:!0});return(0,o.N)({recoveryParam:n.recoveryParam,r:(0,o.$m)("0x"+n.r.toString(16),32),s:(0,o.$m)("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const e=rt().keyFromPrivate((0,o.lE)(this.privateKey)),r=rt().keyFromPublic((0,o.lE)(ot(t)));return(0,o.$m)("0x"+e.derive(r.getPublic()).toString(16),32)}static isSigningKey(t){return!(!t||!t._isSigningKey)}}function it(t,e){const r=(0,o.N)(e),n={r:(0,o.lE)(r.r),s:(0,o.lE)(r.s)};return"0x"+rt().recoverPubKey((0,o.lE)(t),n,r.recoveryParam).encode("hex",!1)}function ot(t,e){const r=(0,o.lE)(t);if(32===r.length){const t=new nt(r);return e?"0x"+rt().keyFromPrivate(r).getPublic(!0,"hex"):t.publicKey}return 33===r.length?e?(0,o.Dv)(r):"0x"+rt().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?e?"0x"+rt().keyFromPublic(r).getPublic(!0,"hex"):(0,o.Dv)(r):tt.throwArgumentError("invalid public or private key","key","[REDACTED]")}const st="transactions/5.6.2",at=new X.Yd(st);var ut;function ct(t){return"0x"===t?null:(0,n.Kn)(t)}function ht(t){return"0x"===t?s:i.O$.from(t)}(function(t){t[t["legacy"]=0]="legacy",t[t["eip2930"]=1]="eip2930",t[t["eip1559"]=2]="eip1559"})(ut||(ut={}));function lt(t){const e=ot(t);return(0,n.Kn)((0,o.p3)((0,a.w)((0,o.p3)(e,1)),12))}function ft(t,e){return lt(it((0,o.lE)(t),e))}function dt(t,e){const r=(0,o.G1)(i.O$.from(t).toHexString());return r.length>32&&at.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function pt(t,e){return{address:(0,n.Kn)(t),storageKeys:(e||[]).map(((e,r)=>(32!==(0,o.E1)(e)&&at.throwArgumentError("invalid access list storageKey",`accessList[${t}:${r}]`,e),e.toLowerCase())))}}function yt(t){if(Array.isArray(t))return t.map(((t,e)=>Array.isArray(t)?(t.length>2&&at.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${e}]`,t),pt(t[0],t[1])):pt(t.address,t.storageKeys)));const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return pt(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function gt(t){return yt(t).map((t=>[t.address,t.storageKeys]))}function mt(t,e){if(null!=t.gasPrice){const e=i.O$.from(t.gasPrice),r=i.O$.from(t.maxFeePerGas||0);e.eq(r)||at.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:e,maxFeePerGas:r})}const r=[dt(t.chainId||0,"chainId"),dt(t.nonce||0,"nonce"),dt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),dt(t.maxFeePerGas||0,"maxFeePerGas"),dt(t.gasLimit||0,"gasLimit"),null!=t.to?(0,n.Kn)(t.to):"0x",dt(t.value||0,"value"),t.data||"0x",gt(t.accessList||[])];if(e){const t=(0,o.N)(e);r.push(dt(t.recoveryParam,"recoveryParam")),r.push((0,o.G1)(t.r)),r.push((0,o.G1)(t.s))}return(0,o.xs)(["0x02",u.encode(r)])}function bt(t,e){const r=[dt(t.chainId||0,"chainId"),dt(t.nonce||0,"nonce"),dt(t.gasPrice||0,"gasPrice"),dt(t.gasLimit||0,"gasLimit"),null!=t.to?(0,n.Kn)(t.to):"0x",dt(t.value||0,"value"),t.data||"0x",gt(t.accessList||[])];if(e){const t=(0,o.N)(e);r.push(dt(t.recoveryParam,"recoveryParam")),r.push((0,o.G1)(t.r)),r.push((0,o.G1)(t.s))}return(0,o.xs)(["0x01",u.encode(r)])}function wt(t,e,r){try{const r=ht(e[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");t.v=r}catch(n){at.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=(0,o.$m)(e[1],32),t.s=(0,o.$m)(e[2],32);try{const e=(0,a.w)(r(t));t.from=ft(e,{r:t.r,s:t.s,recoveryParam:t.v})}catch(n){}}function vt(t){const e=u.decode(t.slice(1));9!==e.length&&12!==e.length&&at.throwArgumentError("invalid component count for transaction type: 2","payload",(0,o.Dv)(t));const r=ht(e[2]),n=ht(e[3]),i={type:2,chainId:ht(e[0]).toNumber(),nonce:ht(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:ht(e[4]),to:ct(e[5]),value:ht(e[6]),data:e[7],accessList:yt(e[8])};return 9===e.length||(i.hash=(0,a.w)(t),wt(i,e.slice(9),mt)),i}function _t(t){const e=u.decode(t.slice(1));8!==e.length&&11!==e.length&&at.throwArgumentError("invalid component count for transaction type: 1","payload",(0,o.Dv)(t));const r={type:1,chainId:ht(e[0]).toNumber(),nonce:ht(e[1]).toNumber(),gasPrice:ht(e[2]),gasLimit:ht(e[3]),to:ct(e[4]),value:ht(e[5]),data:e[6],accessList:yt(e[7])};return 8===e.length||(r.hash=(0,a.w)(t),wt(r,e.slice(8),bt)),r}function Et(t){const e=u.decode(t);9!==e.length&&6!==e.length&&at.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:ht(e[0]).toNumber(),gasPrice:ht(e[1]),gasLimit:ht(e[2]),to:ct(e[3]),value:ht(e[4]),data:e[5],chainId:0};if(6===e.length)return r;try{r.v=i.O$.from(e[6]).toNumber()}catch(n){return r}if(r.r=(0,o.$m)(e[7],32),r.s=(0,o.$m)(e[8],32),i.O$.from(r.r).isZero()&&i.O$.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let i=r.v-27;const s=e.slice(0,6);0!==r.chainId&&(s.push((0,o.Dv)(r.chainId)),s.push("0x"),s.push("0x"),i-=2*r.chainId+8);const c=(0,a.w)(u.encode(s));try{r.from=ft(c,{r:(0,o.Dv)(r.r),s:(0,o.Dv)(r.s),recoveryParam:i})}catch(n){}r.hash=(0,a.w)(t)}return r.type=null,r}function St(t){const e=(0,o.lE)(t);if(e[0]>127)return Et(e);switch(e[0]){case 1:return _t(e);case 2:return vt(e);default:break}return at.throwError(`unsupported transaction type: ${e[0]}`,X.Yd.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}},32600:function(t,e,r){"use strict";function n(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var r=0,n=0,i=0,o=e.length;while(i!==o&&0===e[i])i++,r++;var u=(o-i)*c+1>>>0,h=new Uint8Array(u);while(i!==o){for(var l=e[i],f=0,d=u-1;(0!==l||f<n)&&-1!==d;d--,f++)l+=256*h[d]>>>0,h[d]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=f,i++}var p=u-n;while(p!==u&&0===h[p])p++;for(var y=a.repeat(r);p<u;++p)y+=t.charAt(h[p]);return y}function l(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var r=0;if(" "!==t[r]){var n=0,i=0;while(t[r]===a)n++,r++;var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);while(t[r]){var h=e[t.charCodeAt(r)];if(255===h)return;for(var l=0,f=o-1;(0!==h||l<i)&&-1!==f;f--,l++)h+=s*c[f]>>>0,c[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}if(" "!==t[r]){var d=o-i;while(d!==o&&0===c[d])d++;var p=new Uint8Array(n+(o-d)),y=n;while(d!==o)p[y++]=c[d++];return p}}}function f(t){var e=l(t);if(e)return e;throw new Error("Non-base"+s+" character")}return{encode:h,decodeUnsafe:l,decode:f}}r(21703),r(48675),r(3462),r(37380),r(1118),t.exports=n},19675:function(t,e,r){"use strict";
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */r(21703),r(48675),r(3462),r(37380),r(1118);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.curve25519=e.getSharedSecret=e.verify=e.sign=e.getPublicKey=e.Signature=e.Point=e.RistrettoPoint=e.ExtendedPoint=e.CURVE=void 0;const i=n(r(43094)),o=BigInt(0),s=BigInt(1),a=BigInt(2),u=BigInt(255),c=a**BigInt(252)+BigInt("27742317777372353535851937790883648493"),h={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:a**u-BigInt(19),l:c,n:c,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")};e.CURVE=h;const l=a**BigInt(256),f=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),d=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),p=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),y=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),g=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class m{constructor(t,e,r,n){this.x=t,this.y=e,this.z=r,this.t=n}static fromAffine(t){if(!(t instanceof S))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(S.ZERO)?m.ZERO:new m(t.x,t.y,s,x(t.x*t.y))}static toAffineBatch(t){const e=D(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){b(t);const{x:e,y:r,z:n}=this,{x:i,y:o,z:s}=t,a=x(e*s),u=x(i*n),c=x(r*s),h=x(o*n);return a===u&&c===h}negate(){return new m(x(-this.x),this.y,this.z,x(-this.t))}double(){const{x:t,y:e,z:r}=this,{a:n}=h,i=x(t**a),o=x(e**a),s=x(a*x(r**a)),u=x(n*i),c=x(x((t+e)**a)-i-o),l=u+o,f=l-s,d=u-o,p=x(c*f),y=x(l*d),g=x(c*d),b=x(f*l);return new m(p,y,b,g)}add(t){b(t);const{x:e,y:r,z:n,t:i}=this,{x:s,y:u,z:c,t:h}=t,l=x((r-e)*(u+s)),f=x((r+e)*(u-s)),d=x(f-l);if(d===o)return this.double();const p=x(n*a*h),y=x(i*a*c),g=y+p,w=f+l,v=y-p,_=x(g*d),E=x(w*v),S=x(g*v),A=x(d*w);return new m(_,E,A,S)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,r=[];let n=this,i=n;for(let o=0;o<e;o++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(m.BASE)&&(e=S.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&E.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=m.normalizeZ(n),E.set(e,n)));let i=m.ZERO,o=m.ZERO;const a=1+256/r,u=2**(r-1),c=BigInt(2**r-1),h=2**r,l=BigInt(r);for(let f=0;f<a;f++){const e=f*u;let r=Number(t&c);if(t>>=l,r>u&&(r-=h,t+=s),0===r){let t=n[e];f%2&&(t=t.negate()),o=o.add(t)}else{let t=n[e+Math.abs(r)-1];r<0&&(t=t.negate()),i=i.add(t)}}return m.normalizeZ([i,o])[0]}multiply(t,e){return this.wNAF(H(t,h.l),e)}multiplyUnsafe(t){let e=H(t,h.l,!1);const r=m.BASE,n=m.ZERO;if(e===o)return n;if(this.equals(n)||e===s)return this;if(this.equals(r))return this.wNAF(e);let i=n,a=this;while(e>o)e&s&&(i=i.add(a)),a=a.double(),e>>=s;return i}isSmallOrder(){return this.multiplyUnsafe(h.h).equals(m.ZERO)}isTorsionFree(){return this.multiplyUnsafe(h.l).equals(m.ZERO)}toAffine(t=N(this.z)){const{x:e,y:r,z:n}=this,i=x(e*t),o=x(r*t),a=x(n*t);if(a!==s)throw new Error("invZ was invalid");return new S(i,o)}fromRistrettoBytes(){v()}toRistrettoBytes(){v()}fromRistrettoHash(){v()}}function b(t){if(!(t instanceof m))throw new TypeError("ExtendedPoint expected")}function w(t){if(!(t instanceof _))throw new TypeError("RistrettoPoint expected")}function v(){throw new Error("Legacy method: switch to RistrettoPoint")}e.ExtendedPoint=m,m.BASE=new m(h.Gx,h.Gy,s,x(h.Gx*h.Gy)),m.ZERO=new m(o,s,s,o);class _{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=h,r=x(f*t*t),n=x((r+s)*y);let i=BigInt(-1);const o=x((i-e*r)*x(r+e));let{isValid:a,value:u}=j(n,o),c=x(u*t);O(c)||(c=x(-c)),a||(u=c),a||(i=r);const l=x(i*(r-s)*g-o),p=u*u,b=x((u+u)*o),w=x(l*d),v=x(s-p),_=x(s+p);return new m(x(b*_),x(v*w),x(w*_),x(b*v))}static hashToCurve(t){t=q(t,64);const e=B(t.slice(0,32)),r=this.calcElligatorRistrettoMap(e),n=B(t.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new _(r.add(i))}static fromHex(t){t=q(t,32);const{a:e,d:r}=h,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=B(t);if(!$(C(i),t)||O(i))throw new Error(n);const a=x(i*i),u=x(s+e*a),c=x(s-e*a),l=x(u*u),f=x(c*c),d=x(e*r*l-f),{isValid:p,value:y}=F(x(d*f)),g=x(y*c),b=x(y*g*d);let w=x((i+i)*g);O(w)&&(w=x(-w));const v=x(u*b),E=x(w*v);if(!p||O(E)||v===o)throw new Error(n);return new _(new m(w,v,s,E))}toRawBytes(){let{x:t,y:e,z:r,t:n}=this.ep;const i=x(x(r+e)*x(r-e)),o=x(t*e),{value:s}=F(x(i*o**a)),u=x(s*i),c=x(s*o),h=x(u*c*n);let l;if(O(n*h)){let r=x(e*f),n=x(t*f);t=r,e=n,l=x(u*p)}else l=c;O(t*h)&&(e=x(-e));let d=x((r-e)*l);return O(d)&&(d=x(-d)),C(d)}toHex(){return R(this.toRawBytes())}toString(){return this.toHex()}equals(t){w(t);const e=this.ep,r=t.ep,n=x(e.x*r.y)===x(e.y*r.x),i=x(e.y*r.y)===x(e.x*r.x);return n||i}add(t){return w(t),new _(this.ep.add(t.ep))}subtract(t){return w(t),new _(this.ep.subtract(t.ep))}multiply(t){return new _(this.ep.multiply(t))}multiplyUnsafe(t){return new _(this.ep.multiplyUnsafe(t))}}e.RistrettoPoint=_,_.BASE=new _(m.BASE),_.ZERO=new _(m.ZERO);const E=new WeakMap;class S{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,E.delete(this)}static fromHex(t,e=!0){const{d:r,P:n}=h;t=q(t,32);const i=t.slice();i[31]=-129&t[31];const o=P(i);if(e&&o>=n)throw new Error("Expected 0 < hex < P");if(!e&&o>=l)throw new Error("Expected 0 < hex < 2**256");const a=x(o*o),u=x(a-s),c=x(r*a+s);let{isValid:f,value:d}=j(u,c);if(!f)throw new Error("Point.fromHex: invalid y coordinate");const p=(d&s)===s,y=0!==(128&t[31]);return y!==p&&(d=x(-d)),new S(d,o)}static async fromPrivateKey(t){return(await G(t)).point}toRawBytes(){const t=C(this.y);return t[31]|=this.x&s?128:0,t}toHex(){return R(this.toRawBytes())}toX25519(){const{y:t}=this,e=x((s+t)*N(s-t));return C(e)}isTorsionFree(){return m.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new S(x(-this.x),this.y)}add(t){return m.fromAffine(this).add(m.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return m.fromAffine(this).multiply(t,this).toAffine()}}e.Point=S,S.BASE=new S(h.Gx,h.Gy),S.ZERO=new S(o,s);class A{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=q(t,64),r=S.fromHex(e.slice(0,32),!1),n=P(e.slice(32,64));return new A(r,n)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof S))throw new Error("Expected Point instance");return H(e,h.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(C(this.s),32),t}toHex(){return R(this.toRawBytes())}}function I(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const e=t[n];r.set(e,i),i+=e.length}return r}e.Signature=A;const T=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function R(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=T[t[r]];return e}function M(t){if("string"!==typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function k(t){const e=32,r=t.toString(16).padStart(2*e,"0");return M(r)}function C(t){return k(t).reverse()}function O(t){return(x(t)&s)===s}function P(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+R(Uint8Array.from(t).reverse()))}function B(t){return x(P(t)&a**u-s)}function x(t,e=h.P){const r=t%e;return r>=o?r:e+r}function N(t,e=h.P){if(t===o||e<=o)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=x(t,e),n=e,i=o,a=s,u=s,c=o;while(r!==o){const t=n/r,e=n%r,o=i-u*t,s=a-c*t;n=r,r=e,i=u,a=c,u=o,c=s}const l=n;if(l!==s)throw new Error("invert: does not exist");return x(i,e)}function D(t,e=h.P){const r=new Array(t.length),n=t.reduce(((t,n,i)=>n===o?t:(r[i]=t,x(t*n,e))),s),i=N(n,e);return t.reduceRight(((t,n,i)=>n===o?t:(r[i]=x(t*r[i],e),x(t*n,e))),i),r}function L(t,e){const{P:r}=h;let n=t;while(e-- >o)n*=n,n%=r;return n}function U(t){const{P:e}=h,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),u=BigInt(80),c=t*t%e,l=c*t%e,f=L(l,a)*l%e,d=L(f,s)*t%e,p=L(d,r)*d%e,y=L(p,n)*p%e,g=L(y,i)*y%e,m=L(g,o)*g%e,b=L(m,u)*m%e,w=L(b,u)*m%e,v=L(w,n)*p%e,_=L(v,a)*t%e;return{pow_p_5_8:_,b2:l}}function j(t,e){const r=x(e*e*e),n=x(r*r*e),i=U(t*n).pow_p_5_8;let o=x(t*r*i);const s=x(e*o*o),a=o,u=x(o*f),c=s===t,h=s===x(-t),l=s===x(-t*f);return c&&(o=a),(h||l)&&(o=u),O(o)&&(o=x(-o)),{isValid:c||h,value:o}}function F(t){return j(s,t)}async function K(...t){const r=await e.utils.sha512(I(...t)),n=P(r);return x(n,h.l)}function $(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function q(t,e){const r=t instanceof Uint8Array?Uint8Array.from(t):M(t);if("number"===typeof e&&r.length!==e)throw new Error(`Expected ${e} bytes`);return r}function H(t,e,r=!0){if(!e)throw new TypeError("Specify max value");if("number"===typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"===typeof t&&t<e)if(r){if(o<t)return t}else if(o<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function z(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function V(t){return P(z(q(t,32)))}async function G(t){if(t="bigint"===typeof t||"number"===typeof t?k(H(t,l)):q(t),32!==t.length)throw new Error("Expected 32 bytes");const r=await e.utils.sha512(t),n=z(r.slice(0,32)),i=r.slice(32,64),o=x(P(n),h.l),s=S.BASE.multiply(o),a=s.toRawBytes();return{head:n,prefix:i,scalar:o,point:s,pointBytes:a}}async function W(t){return(await G(t)).pointBytes}async function Y(t,e){t=q(t);const{prefix:r,scalar:n,pointBytes:i}=await G(e),o=await K(r,t),s=S.BASE.multiply(o),a=await K(s.toRawBytes(),i,t),u=x(o+a*n,h.l);return new A(s,u).toRawBytes()}async function J(t,e,r){e=q(e),r instanceof S||(r=S.fromHex(r,!1));const{r:n,s:i}=t instanceof A?t.assertValidity():A.fromHex(t),o=m.BASE.multiplyUnsafe(i),s=await K(n.toRawBytes(),r.toRawBytes(),e),a=m.fromAffine(r).multiplyUnsafe(s),u=m.fromAffine(n).add(a);return u.subtract(o).multiplyUnsafe(h.h).equals(m.ZERO)}async function Z(t,r){const{head:n}=await G(t),i=S.fromHex(r).toX25519();return e.curve25519.scalarMult(n,i)}function X(t,e,r){const n=x(t*(e-r));return e=x(e-n),r=x(r+n),[e,r]}function Q(t,e){const{P:r}=h,n=H(t,r),i=H(e,r),u=BigInt(121665),c=n;let l,f=s,d=o,p=n,y=s,g=o;for(let h=BigInt(254);h>=o;h--){const t=i>>h&s;g^=t,l=X(g,f,p),f=l[0],p=l[1],l=X(g,d,y),d=l[0],y=l[1],g=t;const e=f+d,r=x(e*e),n=f-d,o=x(n*n),m=r-o,b=p+y,w=p-y,v=x(w*e),_=x(b*n);p=x((v+_)**a),y=x(c*(v-_)**a),f=x(r*o),d=x(m*(r+x(u*m)))}l=X(g,f,p),f=l[0],p=l[1],l=X(g,d,y),d=l[0],y=l[1];const{pow_p_5_8:m,b2:b}=U(d),w=x(L(m,BigInt(3))*b);return x(f*w)}function tt(t){return C(x(t,h.P))}function et(t){const e=q(t,32);return e[31]&=127,P(e)}e.getPublicKey=W,e.sign=Y,e.verify=J,e.getSharedSecret=Z,S.BASE._setWindowSize(8),e.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){const r=et(e),n=V(t),i=Q(r,n);if(i===o)throw new Error("Invalid private or public key received");return tt(i)},scalarMultBase(t){return e.curve25519.scalarMult(t,e.curve25519.BASE_POINT_U)}};const rt={node:i.default,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0};e.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:R,getExtendedPublicKey:G,mod:x,invert:N,hashToPrivateScalar:t=>{if(t=q(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=x(P(t),h.l);if(e===o||e===s)throw new Error("Invalid private key");return e},randomBytes:(t=32)=>{if(rt.web)return rt.web.getRandomValues(new Uint8Array(t));if(rt.node){const{randomBytes:e}=rt.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>e.utils.randomBytes(32),sha512:async t=>{if(rt.web){const e=await rt.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(rt.node)return Uint8Array.from(rt.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(t=8,e=S.BASE){const r=e.equals(S.BASE)?e:new S(e.x,e.y);return r._setWindowSize(t),r.multiply(a),r}}},20272:function(t,e,r){"use strict";
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */r(21703),r(48675),r(3462),r(37380),r(1118),Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.schnorr=e.verify=e.signSync=e.sign=e.getSharedSecret=e.recoverPublicKey=e.getPublicKey=e.Signature=e.Point=e.CURVE=void 0;const n=r(69159),i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),u=BigInt(8),c=s**BigInt(256),h={a:i,b:BigInt(7),P:c-s**BigInt(32)-BigInt(977),n:c-BigInt("432420386565659656852420866394968145599"),h:o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function l(t){const{a:e,b:r}=h,n=P(t*t),i=P(n*t);return P(i+e*t+r)}e.CURVE=h;const f=h.a===i;class d{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof y))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new d(t.x,t.y,o)}static toAffineBatch(t){const e=D(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return d.toAffineBatch(t).map(d.fromAffine)}equals(t){if(!(t instanceof d))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:i,y:o,z:a}=t,u=P(n**s),c=P(a**s),h=P(e*c),l=P(i*u),f=P(P(r*a)*c),p=P(P(o*n)*u);return h===l&&f===p}negate(){return new d(this.x,P(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,n=P(t**s),i=P(e**s),o=P(i**s),c=P(s*(P((t+i)**s)-n-o)),h=P(a*n),l=P(h**s),f=P(l-s*c),p=P(h*(c-f)-u*o),y=P(s*e*r);return new d(f,p,y)}add(t){if(!(t instanceof d))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:o,y:a,z:u}=t;if(o===i||a===i)return this;if(e===i||r===i)return t;const c=P(n**s),h=P(u**s),l=P(e*h),f=P(o*c),p=P(P(r*u)*h),y=P(P(a*n)*c),g=P(f-l),m=P(y-p);if(g===i)return m===i?this.double():d.ZERO;const b=P(g**s),w=P(g*b),v=P(l*b),_=P(m**s-w-s*v),E=P(m*(v-_)-p*w),S=P(n*u*g);return new d(_,E,S)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=d.ZERO;if("bigint"===typeof t&&t===i)return e;let r=O(t);if(r===o)return this;if(!f){let t=e,n=this;while(r>i)r&o&&(t=t.add(n)),n=n.double(),r>>=o;return t}let{k1neg:n,k1:s,k2neg:a,k2:u}=j(r),c=e,l=e,p=this;while(s>i||u>i)s&o&&(c=c.add(p)),u&o&&(l=l.add(p)),p=p.double(),s>>=o,u>>=o;return n&&(c=c.negate()),a&&(l=l.negate()),l=new d(P(l.x*h.beta),l.y,l.z),c.add(l)}precomputeWindow(t){const e=f?128/t+1:256/t+1,r=[];let n=this,i=n;for(let o=0;o<e;o++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(d.BASE)&&(e=y.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&p.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=d.normalizeZ(n),p.set(e,n)));let i=d.ZERO,s=d.ZERO;const a=1+(f?128/r:256/r),u=2**(r-1),c=BigInt(2**r-1),h=2**r,l=BigInt(r);for(let f=0;f<a;f++){const e=f*u;let r=Number(t&c);if(t>>=l,r>u&&(r-=h,t+=o),0===r){let t=n[e];f%2&&(t=t.negate()),s=s.add(t)}else{let t=n[e+Math.abs(r)-1];r<0&&(t=t.negate()),i=i.add(t)}}return{p:i,f:s}}multiply(t,e){let r,n,i=O(t);if(f){const{k1neg:t,k1:o,k2neg:s,k2:a}=j(i);let{p:u,f:c}=this.wNAF(o,e),{p:l,f:f}=this.wNAF(a,e);t&&(u=u.negate()),s&&(l=l.negate()),l=new d(P(l.x*h.beta),l.y,l.z),r=u.add(l),n=c.add(f)}else{const{p:t,f:o}=this.wNAF(i,e);r=t,n=o}return d.normalizeZ([r,n])[0]}toAffine(t=N(this.z)){const{x:e,y:r,z:n}=this,i=t,s=P(i*i),a=P(s*i),u=P(e*s),c=P(r*a),h=P(n*i);if(h!==o)throw new Error("invZ was invalid");return new y(u,c)}}d.BASE=new d(h.Gx,h.Gy,o),d.ZERO=new d(i,o,i);const p=new WeakMap;class y{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,p.delete(this)}static fromCompressedHex(t){const e=32===t.length,r=k(e?t:t.subarray(1));if(!q(r))throw new Error("Point is not on curve");const n=l(r);let i=x(n);const s=(i&o)===o;if(e)s&&(i=P(-i));else{const e=1===(1&t[0]);e!==s&&(i=P(-i))}const a=new y(r,i);return a.assertValidity(),a}static fromUncompressedHex(t){const e=k(t.subarray(1,33)),r=k(t.subarray(33,65)),n=new y(e,r);return n.assertValidity(),n}static fromHex(t){const e=C(t),r=e.length,n=e[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(e);if(65===r&&4===n)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return y.BASE.multiply(z(t))}static fromSignature(t,e,r){t=C(t);const n=F(t),{r:i,s:o}=G(e);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");const s=1&r?"03":"02",a=y.fromHex(s+A(i)),{n:u}=h,c=N(i,u),l=P(-n*c,u),f=P(o*c,u),d=y.BASE.multiplyAndAddUnsafe(a,l,f);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}toRawBytes(t=!1){return M(this.toHex(t))}toHex(t=!1){const e=A(this.x);if(t){const t=this.y&o?"03":"02";return`${t}${e}`}return`04${e}${A(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!q(e)||!q(r))throw new Error(t);const n=P(r*r),o=l(e);if(P(n-o)!==i)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new y(this.x,P(-this.y))}double(){return d.fromAffine(this).double().toAffine()}add(t){return d.fromAffine(this).add(d.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return d.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const n=d.fromAffine(this),s=e===i||e===o||this!==y.BASE?n.multiplyUnsafe(e):n.multiply(e),a=d.fromAffine(t).multiplyUnsafe(r),u=s.add(a);return u.equals(d.ZERO)?void 0:u.toAffine()}}function g(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function m(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${S(t)}`);const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:k(r),left:t.subarray(e+2)}}function b(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${S(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:r}=m(t.subarray(2)),{data:n,left:i}=m(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${S(i)}`);return{r:e,s:n}}e.Point=y,y.BASE=new y(h.Gx,h.Gy),y.ZERO=new y(i,i);class w{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=_(t),r="Signature.fromCompact";if("string"!==typeof t&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=e?S(t):t;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new w(R(n.slice(0,64)),R(n.slice(64,128)))}static fromDER(t){const e=_(t);if("string"!==typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=b(e?t:M(t));return new w(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!$(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!$(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=h.n>>o;return this.s>t}normalizeS(){return this.hasHighS()?new w(this.r,h.n-this.s):this}toDERRawBytes(t=!1){return M(this.toDERHex(t))}toDERHex(t=!1){const e=g(T(this.s));if(t)return e;const r=g(T(this.r)),n=T(r.length/2),i=T(e.length/2),o=T(r.length/2+e.length/2+4);return`30${o}02${n}${r}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return M(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}function v(...t){if(!t.every(_))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const e=t[n];r.set(e,i),i+=e.length}return r}function _(t){return t instanceof Uint8Array}e.Signature=w;const E=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function S(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=E[t[r]];return e}function A(t){if(t>c)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function I(t){return M(A(t))}function T(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function R(t){if("string"!==typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function M(t){if("string"!==typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function k(t){return R(S(t))}function C(t){return t instanceof Uint8Array?Uint8Array.from(t):M(t)}function O(t){if("number"===typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"===typeof t&&$(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function P(t,e=h.P){const r=t%e;return r>=i?r:e+r}function B(t,e){const{P:r}=h;let n=t;while(e-- >i)n*=n,n%=r;return n}function x(t){const{P:e}=h,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),u=BigInt(44),c=BigInt(88),l=t*t*t%e,f=l*l*t%e,d=B(f,a)*f%e,p=B(d,a)*f%e,y=B(p,s)*l%e,g=B(y,n)*y%e,m=B(g,i)*g%e,b=B(m,u)*m%e,w=B(b,c)*b%e,v=B(w,u)*m%e,_=B(v,a)*f%e,E=B(_,o)*g%e,S=B(E,r)*l%e;return B(S,s)}function N(t,e=h.P){if(t===i||e<=i)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=P(t,e),n=e,s=i,a=o,u=o,c=i;while(r!==i){const t=n/r,e=n%r,i=s-u*t,o=a-c*t;n=r,r=e,s=u,a=c,u=i,c=o}const l=n;if(l!==o)throw new Error("invert: does not exist");return P(s,e)}function D(t,e=h.P){const r=new Array(t.length),n=t.reduce(((t,n,o)=>n===i?t:(r[o]=t,P(t*n,e))),o),s=N(n,e);return t.reduceRight(((t,n,o)=>n===i?t:(r[o]=P(t*r[o],e),P(t*n,e))),s),r}const L=(t,e)=>(t+e/s)/e,U=s**BigInt(128);function j(t){const{n:e}=h,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=L(s*t,e),u=L(-n*t,e);let c=P(t-a*r-u*i,e),l=P(-a*n-u*s,e);const f=c>U,d=l>U;if(f&&(c=e-c),d&&(l=e-l),c>U||l>U)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:f,k1:c,k2neg:d,k2:l}}function F(t){const{n:e}=h,r=t.length,n=8*r-256;let i=k(t);return n>0&&(i>>=BigInt(n)),i>=e&&(i-=e),i}class K{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...t){return e.utils.hmacSha256(this.k,...t)}hmacSync(...t){if("function"!==typeof e.utils.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");const r=e.utils.hmacSha256Sync(this.k,...t);if(r instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return r}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function $(t){return i<t&&t<h.n}function q(t){return i<t&&t<h.P}function H(t,e,r){const n=k(t);if(!$(n))return;const{n:s}=h,a=y.BASE.multiply(n),u=P(a.x,s);if(u===i)return;const c=P(N(n,s)*P(e+r*u,s),s);if(c===i)return;const l=new w(u,c),f=(a.x===l.r?0:2)|Number(a.y&o);return{sig:l,recovery:f}}function z(t){let e;if("bigint"===typeof t)e=t;else if("number"===typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"===typeof t){if(64!==t.length)throw new Error("Expected 32 bytes of private key");e=R(t)}else{if(!_(t))throw new TypeError("Expected valid private key");if(32!==t.length)throw new Error("Expected 32 bytes of private key");e=k(t)}if(!$(e))throw new Error("Expected private key: 0 < key < n");return e}function V(t){return t instanceof y?(t.assertValidity(),t):y.fromHex(t)}function G(t){if(t instanceof w)return t.assertValidity(),t;try{return w.fromDER(t)}catch(e){return w.fromCompact(t)}}function W(t,e=!1){return y.fromPrivateKey(t).toRawBytes(e)}function Y(t,e,r,n=!1){return y.fromSignature(t,e,r).toRawBytes(n)}function J(t){const e=_(t),r="string"===typeof t,n=(e||r)&&t.length;return e?33===n||65===n:r?66===n||130===n:t instanceof y}function Z(t,e,r=!1){if(J(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!J(e))throw new TypeError("getSharedSecret: second arg must be public key");const n=V(e);return n.assertValidity(),n.multiply(z(t)).toRawBytes(r)}function X(t){const e=t.length>32?t.slice(0,32):t;return k(e)}function Q(t){const e=X(t),r=P(e,h.n);return tt(r<i?e:r)}function tt(t){if("bigint"!==typeof t)throw new Error("Expected bigint");const e=A(t);return M(e)}function et(t,r,n){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const i=C(t),o=z(r),s=[tt(o),Q(i)];if(null!=n){!0===n&&(n=e.utils.randomBytes(32));const t=C(n);if(32!==t.length)throw new Error("sign: Expected 32 bytes of extra data");s.push(t)}const a=v(...s),u=X(i);return{seed:a,m:u,d:o}}function rt(t,e){let{sig:r,recovery:n}=t;const{canonical:i,der:o,recovered:s}=Object.assign({canonical:!0,der:!0},e);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=o?r.toDERRawBytes():r.toCompactRawBytes();return s?[a,n]:a}async function nt(t,e,r={}){const{seed:n,m:i,d:o}=et(t,e,r.extraEntropy);let s;const a=new K;await a.reseed(n);while(!(s=H(await a.generate(),i,o)))await a.reseed();return rt(s,r)}function it(t,e,r={}){const{seed:n,m:i,d:o}=et(t,e,r.extraEntropy);let s;const a=new K;a.reseedSync(n);while(!(s=H(a.generateSync(),i,o)))a.reseedSync();return rt(s,r)}e.getPublicKey=W,e.recoverPublicKey=Y,e.getSharedSecret=Z,e.sign=nt,e.signSync=it;const ot={strict:!0};function st(t,e,r,n=ot){let i;try{i=G(t),e=C(e)}catch(m){return!1}const{r:o,s:s}=i;if(n.strict&&i.hasHighS())return!1;const a=F(e);let u;try{u=V(r)}catch(m){return!1}const{n:c}=h,l=N(s,c),f=P(a*l,c),d=P(o*l,c),p=y.BASE.multiplyAndAddUnsafe(u,f,d);if(!p)return!1;const g=P(p.x,c);return g===o}function at(t){return P(k(t),h.n)}function ut(t){return(t.y&o)===i}e.verify=st;class ct{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=C(t);if(64!==e.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${e.length}`);const r=k(e.subarray(0,32)),n=k(e.subarray(32,64));return new ct(r,n)}assertValidity(){const{r:t,s:e}=this;if(!q(t)||!$(e))throw new Error("Invalid signature")}toHex(){return A(this.r)+A(this.s)}toRawBytes(){return M(this.toHex())}}function ht(t){return y.fromPrivateKey(t).toRawX()}function lt(t,e,r){if(null==t)throw new TypeError(`sign: Expected valid message, not "${t}"`);const n=C(t),i=z(e),o=C(r);if(32!==o.length)throw new TypeError("sign: Expected 32 bytes of aux randomness");const s=y.fromPrivateKey(i),a=s.toRawX(),u=ut(s)?i:h.n-i;return{m:n,P:s,px:a,d:u,rand:o}}function ft(t,e){return I(t^k(e))}function dt(t){const e=P(k(t),h.n);if(e===i)throw new Error("sign: Creation of signature failed. k is zero");const r=y.fromPrivateKey(e),n=r.toRawX(),o=ut(r)?e:h.n-e;return{R:r,rx:n,k:o}}function pt(t,e,r,n){return new ct(t.x,P(e+r*n,h.n)).toRawBytes()}async function yt(t,r,n=e.utils.randomBytes()){const{m:i,px:o,d:s,rand:a}=lt(t,r,n),u=ft(s,await e.utils.taggedHash(Et.aux,a)),{R:c,rx:h,k:l}=dt(await e.utils.taggedHash(Et.nonce,u,o,i)),f=at(await e.utils.taggedHash(Et.challenge,h,o,i)),d=pt(c,l,f,s),p=await wt(d,i,o);if(!p)throw new Error("sign: Invalid signature produced");return d}function gt(t,r,n=e.utils.randomBytes()){const{m:i,px:o,d:s,rand:a}=lt(t,r,n),u=ft(s,e.utils.taggedHashSync(Et.aux,a)),{R:c,rx:h,k:l}=dt(e.utils.taggedHashSync(Et.nonce,u,o,i)),f=at(e.utils.taggedHashSync(Et.challenge,h,o,i)),d=pt(c,l,f,s),p=vt(d,i,o);if(!p)throw new Error("sign: Invalid signature produced");return d}function mt(t,e,r){const n=t instanceof ct,i=n?t:ct.fromHex(t);return n&&i.assertValidity(),{...i,m:C(e),P:V(r)}}function bt(t,e,r,n){const i=y.BASE.multiplyAndAddUnsafe(e,z(r),P(-n,h.n));return!(!i||!ut(i)||i.x!==t)}async function wt(t,r,n){try{const{r:i,s:o,m:s,P:a}=mt(t,r,n),u=at(await e.utils.taggedHash(Et.challenge,I(i),a.toRawX(),s));return bt(i,a,o,u)}catch(i){return!1}}function vt(t,r,n){try{const{r:i,s:o,m:s,P:a}=mt(t,r,n),u=at(e.utils.taggedHashSync(Et.challenge,I(i),a.toRawX(),s));return bt(i,a,o,u)}catch(i){return!1}}e.schnorr={Signature:ct,getPublicKey:ht,sign:yt,verify:wt,signSync:gt,verifySync:vt},y.BASE._setWindowSize(8);const _t={node:n,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Et={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},St={};e.utils={isValidPrivateKey(t){try{return z(t),!0}catch(e){return!1}},privateAdd:(t,e)=>{const r=z(t),n=z(e);return I(P(r+n,h.n))},privateNegate:t=>{const e=z(t);return I(h.n-e)},pointAddScalar:(t,e,r)=>{const n=y.fromHex(t),i=z(e),s=y.BASE.multiplyAndAddUnsafe(n,i,o);if(!s)throw new Error("Tweaked point at infinity");return s.toRawBytes(r)},pointMultiply:(t,e,r)=>{const n=y.fromHex(t),i=k(C(e));return n.multiply(i).toRawBytes(r)},hashToPrivateKey:t=>{if(t=C(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=P(k(t),h.n-o)+o;return I(e)},randomBytes:(t=32)=>{if(_t.web)return _t.web.getRandomValues(new Uint8Array(t));if(_t.node){const{randomBytes:e}=_t.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>e.utils.hashToPrivateKey(e.utils.randomBytes(40)),bytesToHex:S,hexToBytes:M,concatBytes:v,mod:P,invert:N,sha256:async(...t)=>{if(_t.web){const e=await _t.web.subtle.digest("SHA-256",v(...t));return new Uint8Array(e)}if(_t.node){const{createHash:e}=_t.node,r=e("sha256");return t.forEach((t=>r.update(t))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(_t.web){const r=await _t.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=v(...e),i=await _t.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(_t.node){const{createHmac:r}=_t.node,n=r("sha256",t);return e.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...r)=>{let n=St[t];if(void 0===n){const r=await e.utils.sha256(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=v(r,r),St[t]=n}return e.utils.sha256(n,...r)},taggedHashSync:(t,...r)=>{if("function"!==typeof e.utils.sha256Sync)throw new Error("utils.sha256Sync is undefined, you need to set it");let n=St[t];if(void 0===n){const r=e.utils.sha256Sync(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=v(r,r),St[t]=n}return e.utils.sha256Sync(n,...r)},precompute(t=8,e=y.BASE){const r=e===y.BASE?e:new y(e.x,e.y);return r._setWindowSize(t),r.multiply(a),r}}},45186:function(t){"use strict";function e(t,e){var r=new Array(arguments.length-1),n=0,i=2,o=!0;while(i<arguments.length)r[n++]=arguments[i++];return new Promise((function(i,s){r[n]=function(t){if(o)if(o=!1,t)s(t);else{var e=new Array(arguments.length-1),r=0;while(r<e.length)e[r++]=arguments[r];i.apply(null,e)}};try{t.apply(e||null,r)}catch(a){o&&(o=!1,s(a))}}))}t.exports=e},28673:function(t,e,r){"use strict";r(21703);var n=e;n.length=function(t){var e=t.length;if(!e)return 0;var r=0;while(--e%4>1&&"="===t.charAt(e))++r;return Math.ceil(3*t.length)/4-r};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(t,e,r){var n,o=null,s=[],a=0,u=0;while(e<r){var c=t[e++];switch(u){case 0:s[a++]=i[c>>2],n=(3&c)<<4,u=1;break;case 1:s[a++]=i[n|c>>4],n=(15&c)<<2,u=2;break;case 2:s[a++]=i[n|c>>6],s[a++]=i[63&c],u=0;break}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=i[n],s[a++]=61,1===u&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";n.decode=function(t,e,r){for(var n,i=r,s=0,u=0;u<t.length;){var c=t.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error(a);switch(s){case 0:n=c,s=1;break;case 1:e[r++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:e[r++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:e[r++]=(3&n)<<6|c,s=0;break}}if(1===s)throw Error(a);return r-i},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},48825:function(t){"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}},62913:function(t,e,r){"use strict";function n(t){return"undefined"!==typeof Float32Array?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=128===r[3];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(t,n,i){e[0]=t,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function s(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],e[0]}function a(t,n){return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e[0]}t.writeFloatLE=n?i:o,t.writeFloatBE=n?o:i,t.readFloatLE=n?s:a,t.readFloatBE=n?a:s}():function(){function e(t,e,r,n){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,r,n);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(e)/Math.LN2),s=8388607&Math.round(e*Math.pow(2,-o)*8388608);t((i<<31|o+127<<23|s)>>>0,r,n)}}function r(t,e,r){var n=t(e,r),i=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,o),t.readFloatLE=r.bind(null,s),t.readFloatBE=r.bind(null,a)}(),"undefined"!==typeof Float64Array?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=128===r[7];function i(t,n,i){e[0]=t,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(t,n,i){e[0]=t,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function s(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],e[0]}function a(t,n){return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],e[0]}t.writeDoubleLE=n?i:o,t.writeDoubleBE=n?o:i,t.readDoubleLE=n?s:a,t.readDoubleBE=n?a:s}():function(){function e(t,e,r,n,i,o){var s=n<0?1:0;if(s&&(n=-n),0===n)t(0,i,o+e),t(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))t(0,i,o+e),t(2146959360,i,o+r);else if(n>17976931348623157e292)t(0,i,o+e),t((s<<31|2146435072)>>>0,i,o+r);else{var a;if(n<22250738585072014e-324)a=n/5e-324,t(a>>>0,i,o+e),t((s<<31|a/4294967296)>>>0,i,o+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),a=n*Math.pow(2,-u),t(4503599627370496*a>>>0,i,o+e),t((s<<31|u+1023<<20|1048576*a&1048575)>>>0,i,o+r)}}}function r(t,e,r,n,i){var o=t(n,i+e),s=t(n,i+r),a=2*(s>>31)+1,u=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===u?c?NaN:a*(1/0):0===u?5e-324*a*c:a*Math.pow(2,u-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,o,4,0),t.readDoubleLE=r.bind(null,s,0,4),t.readDoubleBE=r.bind(null,a,4,0)}(),t}function i(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function o(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function s(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}r(48675),r(3462),r(37380),r(1118),t.exports=n(n)},26332:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},91168:function(t){"use strict";function e(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return t(r);s+r>n&&(o=t(n),s=0);var a=e.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}t.exports=e},19561:function(t,e){"use strict";var r=e;r.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:55296===(64512&r)&&56320===(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},r.read=function(t,e,r){var n=r-e;if(n<1)return"";var i,o=null,s=[],a=0;while(e<r)i=t[e++],i<128?s[a++]=i:i>191&&i<224?s[a++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,s[a++]=55296+(i>>10),s[a++]=56320+(1023&i)):s[a++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.write=function(t,e,r){for(var n,i,o=r,s=0;s<t.length;++s)n=t.charCodeAt(s),n<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296===(64512&n)&&56320===(64512&(i=t.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&i),++s,e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128);return r-o}},62267:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(69763);function i(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}function o(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])>>>0}function s(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])<<16>>16}function a(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])>>>0}function u(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}function c(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}function h(t,e){return void 0===e&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function l(t,e){return void 0===e&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function f(t,e){return void 0===e&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function d(t,e){return void 0===e&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}function p(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}function y(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}function g(t,e){void 0===e&&(e=0);var r=h(t,e),n=h(t,e+4);return 4294967296*r+n-4294967296*(n>>31)}function m(t,e){void 0===e&&(e=0);var r=l(t,e),n=l(t,e+4);return 4294967296*r+n}function b(t,e){void 0===e&&(e=0);var r=f(t,e),n=f(t,e+4);return 4294967296*n+r-4294967296*(r>>31)}function w(t,e){void 0===e&&(e=0);var r=d(t,e),n=d(t,e+4);return 4294967296*n+r}function v(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),p(t/4294967296>>>0,e,r),p(t>>>0,e,r+4),e}function _(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),y(t>>>0,e,r),y(t/4294967296>>>0,e,r+4),e}function E(t,e,r){if(void 0===r&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=t/8+r-1;o>=r;o--)n+=e[o]*i,i*=256;return n}function S(t,e,r){if(void 0===r&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+t/8;o++)n+=e[o]*i,i*=256;return n}function A(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,s=t/8+i-1;s>=i;s--)r[s]=e/o&255,o*=256;return r}function I(t,e,r,i){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===i&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,s=i;s<i+t/8;s++)r[s]=e/o&255,o*=256;return r}function T(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}function R(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}function M(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}function k(t,e){void 0===e&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}function C(t,e,r){void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}function O(t,e,r){void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}function P(t,e,r){void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}function B(t,e,r){void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}e.readInt16BE=i,e.readUint16BE=o,e.readInt16LE=s,e.readUint16LE=a,e.writeUint16BE=u,e.writeInt16BE=u,e.writeUint16LE=c,e.writeInt16LE=c,e.readInt32BE=h,e.readUint32BE=l,e.readInt32LE=f,e.readUint32LE=d,e.writeUint32BE=p,e.writeInt32BE=p,e.writeUint32LE=y,e.writeInt32LE=y,e.readInt64BE=g,e.readUint64BE=m,e.readInt64LE=b,e.readUint64LE=w,e.writeUint64BE=v,e.writeInt64BE=v,e.writeUint64LE=_,e.writeInt64LE=_,e.readUintBE=E,e.readUintLE=S,e.writeUintBE=A,e.writeUintLE=I,e.readFloat32BE=T,e.readFloat32LE=R,e.readFloat64BE=M,e.readFloat64LE=k,e.writeFloat32BE=C,e.writeFloat32LE=O,e.writeFloat64BE=P,e.writeFloat64LE=B},23038:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118),Object.defineProperty(e,"__esModule",{value:!0});var n=r(62267),i=r(85279),o=20;function s(t,e,r){for(var i=1634760805,s=857760878,a=2036477234,u=1797285236,c=r[3]<<24|r[2]<<16|r[1]<<8|r[0],h=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],g=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=e[3]<<24|e[2]<<16|e[1]<<8|e[0],b=e[7]<<24|e[6]<<16|e[5]<<8|e[4],w=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],_=i,E=s,S=a,A=u,I=c,T=h,R=l,M=f,k=d,C=p,O=y,P=g,B=m,x=b,N=w,D=v,L=0;L<o;L+=2)_=_+I|0,B^=_,B=B>>>16|B<<16,k=k+B|0,I^=k,I=I>>>20|I<<12,E=E+T|0,x^=E,x=x>>>16|x<<16,C=C+x|0,T^=C,T=T>>>20|T<<12,S=S+R|0,N^=S,N=N>>>16|N<<16,O=O+N|0,R^=O,R=R>>>20|R<<12,A=A+M|0,D^=A,D=D>>>16|D<<16,P=P+D|0,M^=P,M=M>>>20|M<<12,S=S+R|0,N^=S,N=N>>>24|N<<8,O=O+N|0,R^=O,R=R>>>25|R<<7,A=A+M|0,D^=A,D=D>>>24|D<<8,P=P+D|0,M^=P,M=M>>>25|M<<7,E=E+T|0,x^=E,x=x>>>24|x<<8,C=C+x|0,T^=C,T=T>>>25|T<<7,_=_+I|0,B^=_,B=B>>>24|B<<8,k=k+B|0,I^=k,I=I>>>25|I<<7,_=_+T|0,D^=_,D=D>>>16|D<<16,O=O+D|0,T^=O,T=T>>>20|T<<12,E=E+R|0,B^=E,B=B>>>16|B<<16,P=P+B|0,R^=P,R=R>>>20|R<<12,S=S+M|0,x^=S,x=x>>>16|x<<16,k=k+x|0,M^=k,M=M>>>20|M<<12,A=A+I|0,N^=A,N=N>>>16|N<<16,C=C+N|0,I^=C,I=I>>>20|I<<12,S=S+M|0,x^=S,x=x>>>24|x<<8,k=k+x|0,M^=k,M=M>>>25|M<<7,A=A+I|0,N^=A,N=N>>>24|N<<8,C=C+N|0,I^=C,I=I>>>25|I<<7,E=E+R|0,B^=E,B=B>>>24|B<<8,P=P+B|0,R^=P,R=R>>>25|R<<7,_=_+T|0,D^=_,D=D>>>24|D<<8,O=O+D|0,T^=O,T=T>>>25|T<<7;n.writeUint32LE(_+i|0,t,0),n.writeUint32LE(E+s|0,t,4),n.writeUint32LE(S+a|0,t,8),n.writeUint32LE(A+u|0,t,12),n.writeUint32LE(I+c|0,t,16),n.writeUint32LE(T+h|0,t,20),n.writeUint32LE(R+l|0,t,24),n.writeUint32LE(M+f|0,t,28),n.writeUint32LE(k+d|0,t,32),n.writeUint32LE(C+p|0,t,36),n.writeUint32LE(O+y|0,t,40),n.writeUint32LE(P+g|0,t,44),n.writeUint32LE(B+m|0,t,48),n.writeUint32LE(x+b|0,t,52),n.writeUint32LE(N+w|0,t,56),n.writeUint32LE(D+v|0,t,60)}function a(t,e,r,n,o){if(void 0===o&&(o=0),32!==t.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var a,u;if(0===o){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),u=a.length-e.length,a.set(e,u)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,u=o}for(var h=new Uint8Array(64),l=0;l<r.length;l+=64){s(h,a,t);for(var f=l;f<l+64&&f<r.length;f++)n[f]=r[f]^h[f-l];c(a,0,u)}return i.wipe(h),0===o&&i.wipe(a),n}function u(t,e,r,n){return void 0===n&&(n=0),i.wipe(r),a(t,e,r,r,n)}function c(t,e,r){var n=1;while(r--)n=n+(255&t[e])|0,t[e]=255&n,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}e.streamXOR=a,e.stream=u},52130:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(23038),i=r(85910),o=r(85279),s=r(62267),a=r(94501);e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var u=new Uint8Array(16),c=function(){function t(t){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,t.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(t,s.length-t.length);var a=new Uint8Array(32);n.stream(this._key,s,a,4);var u,c=e.length+this.tagLength;if(i){if(i.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(c);return n.streamXOR(this._key,s,e,u,4),this._authenticate(u.subarray(u.length-this.tagLength,u.length),a,u.subarray(0,u.length-this.tagLength),r),o.wipe(s),u},t.prototype.open=function(t,e,r,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(t,s.length-t.length);var u=new Uint8Array(32);n.stream(this._key,s,u,4);var c=new Uint8Array(this.tagLength);if(this._authenticate(c,u,e.subarray(0,e.length-this.tagLength),r),!a.equal(c,e.subarray(e.length-this.tagLength,e.length)))return null;var h,l=e.length-this.tagLength;if(i){if(i.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");h=i}else h=new Uint8Array(l);return n.streamXOR(this._key,s,e.subarray(0,e.length-this.tagLength),h,4),o.wipe(s),h},t.prototype.clean=function(){return o.wipe(this._key),this},t.prototype._authenticate=function(t,e,r,n){var a=new i.Poly1305(e);n&&(a.update(n),n.length%16>0&&a.update(u.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(u.subarray(r.length%16));var c=new Uint8Array(8);n&&s.writeUint64LE(n.length,c),a.update(c),s.writeUint64LE(r.length,c),a.update(c);for(var h=a.digest(),l=0;l<h.length;l++)t[l]=h[l];a.clean(),o.wipe(h),o.wipe(c)},t}();e.ChaCha20Poly1305=c},94501:function(t,e){"use strict";function r(t,e,r){return~(t-1)&e|t-1&r}function n(t,e){return(0|t)-(0|e)-1>>>31&1}function i(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}function o(t,e){return 0!==t.length&&0!==e.length&&0!==i(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.select=r,e.lessOrEqual=n,e.compare=i,e.equal=o},81725:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);var n=r(21257),i=r(23996),o=r(85279);function s(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}e.jQ=64,e.KS=64,e.aP=32;var a=new Uint8Array(32);a[0]=9;var u=s(),c=s([1]),h=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(t,e){for(var r=0;r<16;r++)t[r]=0|e[r]}function g(t){for(var e=1,r=0;r<16;r++){var n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function m(t,e,r){for(var n=~(r-1),i=0;i<16;i++){var o=n&(t[i]^e[i]);t[i]^=o,e[i]^=o}}function b(t,e){for(var r=s(),n=s(),i=0;i<16;i++)n[i]=e[i];g(n),g(n),g(n);for(var o=0;o<2;o++){r[0]=n[0]-65517;for(i=1;i<15;i++)r[i]=n[i]-65535-(r[i-1]>>16&1),r[i-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);var a=r[15]>>16&1;r[14]&=65535,m(n,r,1-a)}for(i=0;i<16;i++)t[2*i]=255&n[i],t[2*i+1]=n[i]>>8}function w(t,e){for(var r=0,n=0;n<32;n++)r|=t[n]^e[n];return(1&r-1>>>8)-1}function v(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return b(r,t),b(n,e),w(r,n)}function _(t){var e=new Uint8Array(32);return b(e,t),1&e[0]}function E(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function S(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function A(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function I(t,e,r){var n,i,o=0,s=0,a=0,u=0,c=0,h=0,l=0,f=0,d=0,p=0,y=0,g=0,m=0,b=0,w=0,v=0,_=0,E=0,S=0,A=0,I=0,T=0,R=0,M=0,k=0,C=0,O=0,P=0,B=0,x=0,N=0,D=r[0],L=r[1],U=r[2],j=r[3],F=r[4],K=r[5],$=r[6],q=r[7],H=r[8],z=r[9],V=r[10],G=r[11],W=r[12],Y=r[13],J=r[14],Z=r[15];n=e[0],o+=n*D,s+=n*L,a+=n*U,u+=n*j,c+=n*F,h+=n*K,l+=n*$,f+=n*q,d+=n*H,p+=n*z,y+=n*V,g+=n*G,m+=n*W,b+=n*Y,w+=n*J,v+=n*Z,n=e[1],s+=n*D,a+=n*L,u+=n*U,c+=n*j,h+=n*F,l+=n*K,f+=n*$,d+=n*q,p+=n*H,y+=n*z,g+=n*V,m+=n*G,b+=n*W,w+=n*Y,v+=n*J,_+=n*Z,n=e[2],a+=n*D,u+=n*L,c+=n*U,h+=n*j,l+=n*F,f+=n*K,d+=n*$,p+=n*q,y+=n*H,g+=n*z,m+=n*V,b+=n*G,w+=n*W,v+=n*Y,_+=n*J,E+=n*Z,n=e[3],u+=n*D,c+=n*L,h+=n*U,l+=n*j,f+=n*F,d+=n*K,p+=n*$,y+=n*q,g+=n*H,m+=n*z,b+=n*V,w+=n*G,v+=n*W,_+=n*Y,E+=n*J,S+=n*Z,n=e[4],c+=n*D,h+=n*L,l+=n*U,f+=n*j,d+=n*F,p+=n*K,y+=n*$,g+=n*q,m+=n*H,b+=n*z,w+=n*V,v+=n*G,_+=n*W,E+=n*Y,S+=n*J,A+=n*Z,n=e[5],h+=n*D,l+=n*L,f+=n*U,d+=n*j,p+=n*F,y+=n*K,g+=n*$,m+=n*q,b+=n*H,w+=n*z,v+=n*V,_+=n*G,E+=n*W,S+=n*Y,A+=n*J,I+=n*Z,n=e[6],l+=n*D,f+=n*L,d+=n*U,p+=n*j,y+=n*F,g+=n*K,m+=n*$,b+=n*q,w+=n*H,v+=n*z,_+=n*V,E+=n*G,S+=n*W,A+=n*Y,I+=n*J,T+=n*Z,n=e[7],f+=n*D,d+=n*L,p+=n*U,y+=n*j,g+=n*F,m+=n*K,b+=n*$,w+=n*q,v+=n*H,_+=n*z,E+=n*V,S+=n*G,A+=n*W,I+=n*Y,T+=n*J,R+=n*Z,n=e[8],d+=n*D,p+=n*L,y+=n*U,g+=n*j,m+=n*F,b+=n*K,w+=n*$,v+=n*q,_+=n*H,E+=n*z,S+=n*V,A+=n*G,I+=n*W,T+=n*Y,R+=n*J,M+=n*Z,n=e[9],p+=n*D,y+=n*L,g+=n*U,m+=n*j,b+=n*F,w+=n*K,v+=n*$,_+=n*q,E+=n*H,S+=n*z,A+=n*V,I+=n*G,T+=n*W,R+=n*Y,M+=n*J,k+=n*Z,n=e[10],y+=n*D,g+=n*L,m+=n*U,b+=n*j,w+=n*F,v+=n*K,_+=n*$,E+=n*q,S+=n*H,A+=n*z,I+=n*V,T+=n*G,R+=n*W,M+=n*Y,k+=n*J,C+=n*Z,n=e[11],g+=n*D,m+=n*L,b+=n*U,w+=n*j,v+=n*F,_+=n*K,E+=n*$,S+=n*q,A+=n*H,I+=n*z,T+=n*V,R+=n*G,M+=n*W,k+=n*Y,C+=n*J,O+=n*Z,n=e[12],m+=n*D,b+=n*L,w+=n*U,v+=n*j,_+=n*F,E+=n*K,S+=n*$,A+=n*q,I+=n*H,T+=n*z,R+=n*V,M+=n*G,k+=n*W,C+=n*Y,O+=n*J,P+=n*Z,n=e[13],b+=n*D,w+=n*L,v+=n*U,_+=n*j,E+=n*F,S+=n*K,A+=n*$,I+=n*q,T+=n*H,R+=n*z,M+=n*V,k+=n*G,C+=n*W,O+=n*Y,P+=n*J,B+=n*Z,n=e[14],w+=n*D,v+=n*L,_+=n*U,E+=n*j,S+=n*F,A+=n*K,I+=n*$,T+=n*q,R+=n*H,M+=n*z,k+=n*V,C+=n*G,O+=n*W,P+=n*Y,B+=n*J,x+=n*Z,n=e[15],v+=n*D,_+=n*L,E+=n*U,S+=n*j,A+=n*F,I+=n*K,T+=n*$,R+=n*q,M+=n*H,k+=n*z,C+=n*V,O+=n*G,P+=n*W,B+=n*Y,x+=n*J,N+=n*Z,o+=38*_,s+=38*E,a+=38*S,u+=38*A,c+=38*I,h+=38*T,l+=38*R,f+=38*M,d+=38*k,p+=38*C,y+=38*O,g+=38*P,m+=38*B,b+=38*x,w+=38*N,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=u,t[4]=c,t[5]=h,t[6]=l,t[7]=f,t[8]=d,t[9]=p,t[10]=y,t[11]=g,t[12]=m,t[13]=b,t[14]=w,t[15]=v}function T(t,e){I(t,e,e)}function R(t,e){var r,n=s();for(r=0;r<16;r++)n[r]=e[r];for(r=253;r>=0;r--)T(n,n),2!==r&&4!==r&&I(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}function M(t,e){var r,n=s();for(r=0;r<16;r++)n[r]=e[r];for(r=250;r>=0;r--)T(n,n),1!==r&&I(n,n,e);for(r=0;r<16;r++)t[r]=n[r]}function k(t,e){var r=s(),n=s(),i=s(),o=s(),a=s(),u=s(),c=s(),h=s(),f=s();A(r,t[1],t[0]),A(f,e[1],e[0]),I(r,r,f),S(n,t[0],t[1]),S(f,e[0],e[1]),I(n,n,f),I(i,t[3],e[3]),I(i,i,l),I(o,t[2],e[2]),S(o,o,o),A(a,n,r),A(u,o,i),S(c,o,i),S(h,n,r),I(t[0],a,u),I(t[1],h,c),I(t[2],c,u),I(t[3],a,h)}function C(t,e,r){for(var n=0;n<4;n++)m(t[n],e[n],r)}function O(t,e){var r=s(),n=s(),i=s();R(i,e[2]),I(r,e[0],i),I(n,e[1],i),b(t,n),t[31]^=_(r)<<7}function P(t,e,r){y(t[0],u),y(t[1],c),y(t[2],c),y(t[3],u);for(var n=255;n>=0;--n){var i=r[n/8|0]>>(7&n)&1;C(t,e,i),k(e,t),k(t,t),C(t,e,i)}}function B(t,e){var r=[s(),s(),s(),s()];y(r[0],f),y(r[1],d),y(r[2],c),I(r[3],f,d),P(t,r,e)}function x(t){if(t.length!==e.aP)throw new Error("ed25519: seed must be "+e.aP+" bytes");var r=i.hash(t);r[0]&=248,r[31]&=127,r[31]|=64;var n=new Uint8Array(32),o=[s(),s(),s(),s()];B(o,r),O(n,o);var a=new Uint8Array(64);return a.set(t),a.set(n,32),{publicKey:n,secretKey:a}}function N(t){var e=n.randomBytes(32,t),r=x(e);return o.wipe(e),r}function D(t){if(t.length!==e.KS)throw new Error("ed25519: secret key must be "+e.KS+" bytes");return new Uint8Array(t.subarray(32))}e._w=x;var L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*L[i-(n-32)],r=Math.floor((e[i]+128)/256),e[i]-=256*r;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*L[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*L[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function j(t){for(var e=new Float64Array(64),r=0;r<64;r++)e[r]=t[r];for(r=0;r<64;r++)t[r]=0;U(t,e)}function F(t,e){var r=new Float64Array(64),n=[s(),s(),s(),s()],o=i.hash(t.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;var a=new Uint8Array(64);a.set(o.subarray(32),32);var u=new i.SHA512;u.update(a.subarray(32)),u.update(e);var c=u.digest();u.clean(),j(c),B(n,c),O(a,n),u.reset(),u.update(a.subarray(0,32)),u.update(t.subarray(32)),u.update(e);var h=u.digest();j(h);for(var l=0;l<32;l++)r[l]=c[l];for(l=0;l<32;l++)for(var f=0;f<32;f++)r[l+f]+=h[l]*o[f];return U(a.subarray(32),r),a}function K(t,e){var r=s(),n=s(),i=s(),o=s(),a=s(),l=s(),f=s();return y(t[2],c),E(t[1],e),T(i,t[1]),I(o,i,h),A(i,i,t[2]),S(o,t[2],o),T(a,o),T(l,a),I(f,l,a),I(r,f,i),I(r,r,o),M(r,r),I(r,r,i),I(r,r,o),I(r,r,o),I(t[0],r,o),T(n,t[0]),I(n,n,o),v(n,i)&&I(t[0],t[0],p),T(n,t[0]),I(n,n,o),v(n,i)?-1:(_(t[0])===e[31]>>7&&A(t[0],u,t[0]),I(t[3],t[0],t[1]),0)}function $(t,r,n){var o=new Uint8Array(32),a=[s(),s(),s(),s()],u=[s(),s(),s(),s()];if(n.length!==e.jQ)throw new Error("ed25519: signature must be "+e.jQ+" bytes");if(K(u,t))return!1;var c=new i.SHA512;c.update(n.subarray(0,32)),c.update(t),c.update(r);var h=c.digest();return j(h),P(a,u,h),B(u,n.subarray(32)),k(a,u),O(o,a),!w(n,o)}function q(t){var e=[s(),s(),s(),s()];if(K(e,t))throw new Error("Ed25519: invalid public key");var r=s(),n=s(),i=e[1];S(r,c,i),A(n,c,i),R(n,n),I(r,r,n);var o=new Uint8Array(32);return b(o,r),o}function H(t){var e=i.hash(t.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;var r=new Uint8Array(e.subarray(0,32));return o.wipe(e),r}e.Xx=F,e.T=$,e.SH=q,e.zh=H},42270:function(t,e){"use strict";function r(t){return"undefined"!==typeof t.saveState&&"undefined"!==typeof t.restoreState&&"undefined"!==typeof t.cleanSavedState}Object.defineProperty(e,"__esModule",{value:!0}),e.isSerializableHash=r},56711:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(66702),i=r(85279),o=function(){function t(t,e,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=i;var o=n.hmac(this._hash,r,e);this._hmac=new n.HMAC(t,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(0===t)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(t){for(var e=new Uint8Array(t),r=0;r<e.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[r]=this._buffer[this._bufpos++];return e},t.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},t}();e.HKDF=o},66702:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(42270),i=r(94501),o=r(85279),s=function(){function t(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(r).clean():r.set(e);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),o.wipe(r)}return t.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(t){return this._inner.update(t),this},t.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(t){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(t){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},t}();function a(t,e,r){var n=new s(t,e);n.update(r);var i=n.digest();return n.clean(),i}e.HMAC=s,e.hmac=a,e.equal=i.equal},69763:function(t,e){"use strict";function r(t,e){var r=t>>>16&65535,n=65535&t,i=e>>>16&65535,o=65535&e;return n*o+(r*o+n*i<<16>>>0)|0}function n(t,e){return t+e|0}function i(t,e){return t-e|0}function o(t,e){return t<<e|t>>>32-e}function s(t,e){return t<<32-e|t>>>e}function a(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||r,e.add=n,e.sub=i,e.rotl=o,e.rotr=s,e.isInteger=Number.isInteger||a,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}},85910:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(94501),i=r(85279);e.DIGEST_LENGTH=16;var o=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=8191&r;var n=t[2]|t[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=t[4]|t[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var o=t[6]|t[7]<<8;this._r[3]=8191&(i>>>7|o<<9);var s=t[8]|t[9]<<8;this._r[4]=255&(o>>>4|s<<12),this._r[5]=s>>>1&8190;var a=t[10]|t[11]<<8;this._r[6]=8191&(s>>>14|a<<2);var u=t[12]|t[13]<<8;this._r[7]=8065&(a>>>11|u<<5);var c=t[14]|t[15]<<8;this._r[8]=8191&(u>>>8|c<<8),this._r[9]=c>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(t,e,r){var n=this._fin?0:2048,i=this._h[0],o=this._h[1],s=this._h[2],a=this._h[3],u=this._h[4],c=this._h[5],h=this._h[6],l=this._h[7],f=this._h[8],d=this._h[9],p=this._r[0],y=this._r[1],g=this._r[2],m=this._r[3],b=this._r[4],w=this._r[5],v=this._r[6],_=this._r[7],E=this._r[8],S=this._r[9];while(r>=16){var A=t[e+0]|t[e+1]<<8;i+=8191&A;var I=t[e+2]|t[e+3]<<8;o+=8191&(A>>>13|I<<3);var T=t[e+4]|t[e+5]<<8;s+=8191&(I>>>10|T<<6);var R=t[e+6]|t[e+7]<<8;a+=8191&(T>>>7|R<<9);var M=t[e+8]|t[e+9]<<8;u+=8191&(R>>>4|M<<12),c+=M>>>1&8191;var k=t[e+10]|t[e+11]<<8;h+=8191&(M>>>14|k<<2);var C=t[e+12]|t[e+13]<<8;l+=8191&(k>>>11|C<<5);var O=t[e+14]|t[e+15]<<8;f+=8191&(C>>>8|O<<8),d+=O>>>5|n;var P=0,B=P;B+=i*p,B+=o*(5*S),B+=s*(5*E),B+=a*(5*_),B+=u*(5*v),P=B>>>13,B&=8191,B+=c*(5*w),B+=h*(5*b),B+=l*(5*m),B+=f*(5*g),B+=d*(5*y),P+=B>>>13,B&=8191;var x=P;x+=i*y,x+=o*p,x+=s*(5*S),x+=a*(5*E),x+=u*(5*_),P=x>>>13,x&=8191,x+=c*(5*v),x+=h*(5*w),x+=l*(5*b),x+=f*(5*m),x+=d*(5*g),P+=x>>>13,x&=8191;var N=P;N+=i*g,N+=o*y,N+=s*p,N+=a*(5*S),N+=u*(5*E),P=N>>>13,N&=8191,N+=c*(5*_),N+=h*(5*v),N+=l*(5*w),N+=f*(5*b),N+=d*(5*m),P+=N>>>13,N&=8191;var D=P;D+=i*m,D+=o*g,D+=s*y,D+=a*p,D+=u*(5*S),P=D>>>13,D&=8191,D+=c*(5*E),D+=h*(5*_),D+=l*(5*v),D+=f*(5*w),D+=d*(5*b),P+=D>>>13,D&=8191;var L=P;L+=i*b,L+=o*m,L+=s*g,L+=a*y,L+=u*p,P=L>>>13,L&=8191,L+=c*(5*S),L+=h*(5*E),L+=l*(5*_),L+=f*(5*v),L+=d*(5*w),P+=L>>>13,L&=8191;var U=P;U+=i*w,U+=o*b,U+=s*m,U+=a*g,U+=u*y,P=U>>>13,U&=8191,U+=c*p,U+=h*(5*S),U+=l*(5*E),U+=f*(5*_),U+=d*(5*v),P+=U>>>13,U&=8191;var j=P;j+=i*v,j+=o*w,j+=s*b,j+=a*m,j+=u*g,P=j>>>13,j&=8191,j+=c*y,j+=h*p,j+=l*(5*S),j+=f*(5*E),j+=d*(5*_),P+=j>>>13,j&=8191;var F=P;F+=i*_,F+=o*v,F+=s*w,F+=a*b,F+=u*m,P=F>>>13,F&=8191,F+=c*g,F+=h*y,F+=l*p,F+=f*(5*S),F+=d*(5*E),P+=F>>>13,F&=8191;var K=P;K+=i*E,K+=o*_,K+=s*v,K+=a*w,K+=u*b,P=K>>>13,K&=8191,K+=c*m,K+=h*g,K+=l*y,K+=f*p,K+=d*(5*S),P+=K>>>13,K&=8191;var $=P;$+=i*S,$+=o*E,$+=s*_,$+=a*v,$+=u*w,P=$>>>13,$&=8191,$+=c*b,$+=h*m,$+=l*g,$+=f*y,$+=d*p,P+=$>>>13,$&=8191,P=(P<<2)+P|0,P=P+B|0,B=8191&P,P>>>=13,x+=P,i=B,o=x,s=N,a=D,u=L,c=U,h=j,l=F,f=K,d=$,e+=16,r-=16}this._h[0]=i,this._h[1]=o,this._h[2]=s,this._h[3]=a,this._h[4]=u,this._h[5]=c,this._h[6]=h,this._h[7]=l,this._h[8]=f,this._h[9]=d},t.prototype.finish=function(t,e){void 0===e&&(e=0);var r,n,i,o,s=new Uint16Array(10);if(this._leftover){for(o=this._leftover,this._buffer[o++]=1;o<16;o++)this._buffer[o]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,o=2;o<10;o++)this._h[o]+=r,r=this._h[o]>>>13,this._h[o]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,s[0]=this._h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this._h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this._h[o]=this._h[o]&n|s[o];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,o=1;o<8;o++)i=(this._h[o]+this._pad[o]|0)+(i>>>16)|0,this._h[o]=65535&i;return t[e+0]=this._h[0]>>>0,t[e+1]=this._h[0]>>>8,t[e+2]=this._h[1]>>>0,t[e+3]=this._h[1]>>>8,t[e+4]=this._h[2]>>>0,t[e+5]=this._h[2]>>>8,t[e+6]=this._h[3]>>>0,t[e+7]=this._h[3]>>>8,t[e+8]=this._h[4]>>>0,t[e+9]=this._h[4]>>>8,t[e+10]=this._h[5]>>>0,t[e+11]=this._h[5]>>>8,t[e+12]=this._h[6]>>>0,t[e+13]=this._h[6]>>>8,t[e+14]=this._h[7]>>>0,t[e+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(t){var e,r=0,n=t.length;if(this._leftover){e=16-this._leftover,e>n&&(e=n);for(var i=0;i<e;i++)this._buffer[this._leftover+i]=t[r+i];if(n-=e,r+=e,this._leftover+=e,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(e=n-n%16,this._blocks(t,r,e),r+=e,n-=e),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=t[r+i];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},t.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();function s(t,e){var r=new o(t);r.update(e);var n=r.digest();return r.clean(),n}function a(t,r){return t.length===e.DIGEST_LENGTH&&r.length===e.DIGEST_LENGTH&&n.equal(t,r)}e.Poly1305=o,e.oneTimeAuth=s,e.equal=a},21257:function(t,e,r){"use strict";r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(61299),i=r(62267),o=r(85279);function s(t,r){return void 0===r&&(r=e.defaultRandomSource),r.randomBytes(t)}function a(t){void 0===t&&(t=e.defaultRandomSource);var r=s(4,t),n=i.readUint32LE(r);return o.wipe(r),n}e.defaultRandomSource=new n.SystemRandomSource,e.randomBytes=s,e.randomUint32=a;var u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(t,r,n){if(void 0===r&&(r=u),void 0===n&&(n=e.defaultRandomSource),r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");var i="",a=r.length,c=256-256%a;while(t>0){for(var h=s(Math.ceil(256*t/c),n),l=0;l<h.length&&t>0;l++){var f=h[l];f<c&&(i+=r.charAt(f%a),t--)}o.wipe(h)}return i}function h(t,r,n){void 0===r&&(r=u),void 0===n&&(n=e.defaultRandomSource);var i=Math.ceil(t/(Math.log(r.length)/Math.LN2));return c(i,r,n)}e.randomString=c,e.randomStringForEntropy=h},20169:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118),Object.defineProperty(e,"__esModule",{value:!0});var n=65536,i=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var t="undefined"!==typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var e=new Uint8Array(t),r=0;r<e.length;r+=n)this._crypto.getRandomValues(e.subarray(r,r+Math.min(e.length-r,n)));return e},t}();e.BrowserRandomSource=i},9378:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118),Object.defineProperty(e,"__esModule",{value:!0});var n=r(85279),i=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var t=r(35883);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var r=new Uint8Array(t),i=0;i<r.length;i++)r[i]=e[i];return n.wipe(e),r},t}();e.NodeRandomSource=i},61299:function(t,e,r){"use strict";r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(20169),i=r(9378),o=function(){function t(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}return t.prototype.randomBytes=function(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)},t}();e.SystemRandomSource=o},14185:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(62267),i=r(85279);e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var o=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},t.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=e,this._bufferLength>0){while(this._bufferLength<this.blockSize&&e>0)this._buffer[this._bufferLength++]=t[r++],e--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}e>=this.blockSize&&(r=a(this._temp,this._state,t,r,e),e%=this.blockSize);while(e>0)this._buffer[this._bufferLength++]=t[r++],e--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,o=e<<3,s=e%64<56?64:128;this._buffer[r]=128;for(var u=r+1;u<s-8;u++)this._buffer[u]=0;n.writeUint32BE(i,this._buffer,s-8),n.writeUint32BE(o,this._buffer,s-4),a(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(u=0;u<this.digestLength/4;u++)n.writeUint32BE(this._state[u],t,4*u);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.state),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA256=o;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(t,e,r,i,o){while(o>=64){for(var a=e[0],u=e[1],c=e[2],h=e[3],l=e[4],f=e[5],d=e[6],p=e[7],y=0;y<16;y++){var g=i+4*y;t[y]=n.readUint32BE(r,g)}for(y=16;y<64;y++){var m=t[y-2],b=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10;m=t[y-15];var w=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;t[y]=(b+t[y-7]|0)+(w+t[y-16]|0)}for(y=0;y<64;y++){b=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&f^~l&d)|0)+(p+(s[y]+t[y]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&u^a&c^u&c)|0;p=d,d=f,f=l,l=h+b|0,h=c,c=u,u=a,a=b+w|0}e[0]+=a,e[1]+=u,e[2]+=c,e[3]+=h,e[4]+=l,e[5]+=f,e[6]+=d,e[7]+=p,i+=64,o-=64}return i}function u(t){var e=new o;e.update(t);var r=e.digest();return e.clean(),r}e.hash=u},23996:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(62267),i=r(85279);e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var o=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._tempHi),i.wipe(this._tempLo),this.reset()},t.prototype.update=function(t,r){if(void 0===r&&(r=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){while(this._bufferLength<e.BLOCK_SIZE&&r>0)this._buffer[this._bufferLength++]=t[n++],r--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}r>=this.blockSize&&(n=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,n,r),r%=this.blockSize);while(r>0)this._buffer[this._bufferLength++]=t[n++],r--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,i=e/536870912|0,o=e<<3,s=e%128<112?128:256;this._buffer[r]=128;for(var u=r+1;u<s-8;u++)this._buffer[u]=0;n.writeUint32BE(i,this._buffer,s-8),n.writeUint32BE(o,this._buffer,s-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,s),this._finished=!0}for(u=0;u<this.digestLength/8;u++)n.writeUint32BE(this._stateHi[u],t,8*u),n.writeUint32BE(this._stateLo[u],t,8*u+4);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){i.wipe(t.stateHi),i.wipe(t.stateLo),t.buffer&&i.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA512=o;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(t,e,r,i,o,a,u){var c,h,l,f,d,p,y,g,m=r[0],b=r[1],w=r[2],v=r[3],_=r[4],E=r[5],S=r[6],A=r[7],I=i[0],T=i[1],R=i[2],M=i[3],k=i[4],C=i[5],O=i[6],P=i[7];while(u>=128){for(var B=0;B<16;B++){var x=8*B+a;t[B]=n.readUint32BE(o,x),e[B]=n.readUint32BE(o,x+4)}for(B=0;B<80;B++){var N=m,D=b,L=w,U=v,j=_,F=E,K=S,$=A,q=I,H=T,z=R,V=M,G=k,W=C,Y=O,J=P;if(c=A,h=P,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=(_>>>14|k<<18)^(_>>>18|k<<14)^(k>>>9|_<<23),h=(k>>>14|_<<18)^(k>>>18|_<<14)^(_>>>9|k<<23),d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,c=_&E^~_&S,h=k&C^~k&O,d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,c=s[2*B],h=s[2*B+1],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,c=t[B%16],h=e[B%16],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,l=65535&y|g<<16,f=65535&d|p<<16,c=l,h=f,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=(m>>>28|I<<4)^(I>>>2|m<<30)^(I>>>7|m<<25),h=(I>>>28|m<<4)^(m>>>2|I<<30)^(m>>>7|I<<25),d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,c=m&b^m&w^b&w,h=I&T^I&R^T&R,d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,$=65535&y|g<<16,J=65535&d|p<<16,c=U,h=V,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=l,h=f,d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,U=65535&y|g<<16,V=65535&d|p<<16,b=N,w=D,v=L,_=U,E=j,S=F,A=K,m=$,T=q,R=H,M=z,k=V,C=G,O=W,P=Y,I=J,B%16===15)for(x=0;x<16;x++)c=t[x],h=e[x],d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=t[(x+9)%16],h=e[(x+9)%16],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,l=t[(x+1)%16],f=e[(x+1)%16],c=(l>>>1|f<<31)^(l>>>8|f<<24)^l>>>7,h=(f>>>1|l<<31)^(f>>>8|l<<24)^(f>>>7|l<<25),d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,l=t[(x+14)%16],f=e[(x+14)%16],c=(l>>>19|f<<13)^(f>>>29|l<<3)^l>>>6,h=(f>>>19|l<<13)^(l>>>29|f<<3)^(f>>>6|l<<26),d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,t[x]=65535&y|g<<16,e[x]=65535&d|p<<16}c=m,h=I,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=r[0],h=i[0],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,r[0]=m=65535&y|g<<16,i[0]=I=65535&d|p<<16,c=b,h=T,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=r[1],h=i[1],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,r[1]=b=65535&y|g<<16,i[1]=T=65535&d|p<<16,c=w,h=R,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=r[2],h=i[2],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,r[2]=w=65535&y|g<<16,i[2]=R=65535&d|p<<16,c=v,h=M,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=r[3],h=i[3],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,r[3]=v=65535&y|g<<16,i[3]=M=65535&d|p<<16,c=_,h=k,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=r[4],h=i[4],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,r[4]=_=65535&y|g<<16,i[4]=k=65535&d|p<<16,c=E,h=C,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=r[5],h=i[5],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,r[5]=E=65535&y|g<<16,i[5]=C=65535&d|p<<16,c=S,h=O,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=r[6],h=i[6],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,r[6]=S=65535&y|g<<16,i[6]=O=65535&d|p<<16,c=A,h=P,d=65535&h,p=h>>>16,y=65535&c,g=c>>>16,c=r[7],h=i[7],d+=65535&h,p+=h>>>16,y+=65535&c,g+=c>>>16,p+=d>>>16,y+=p>>>16,g+=y>>>16,r[7]=A=65535&y|g<<16,i[7]=P=65535&d|p<<16,a+=128,u-=128}return a}function u(t){var e=new o;e.update(t);var r=e.digest();return e.clean(),r}e.hash=u},85279:function(t,e){"use strict";function r(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=r},92982:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0});var n=r(21257),i=r(85279);function o(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;var s=new Uint8Array(32);s[0]=9;var a=o([56129,1]);function u(t){for(var e=1,r=0;r<16;r++){var n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-65536*e}t[0]+=e-1+37*(e-1)}function c(t,e,r){for(var n=~(r-1),i=0;i<16;i++){var o=n&(t[i]^e[i]);t[i]^=o,e[i]^=o}}function h(t,e){for(var r=o(),n=o(),i=0;i<16;i++)n[i]=e[i];u(n),u(n),u(n);for(var s=0;s<2;s++){r[0]=n[0]-65517;for(i=1;i<15;i++)r[i]=n[i]-65535-(r[i-1]>>16&1),r[i-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);var a=r[15]>>16&1;r[14]&=65535,c(n,r,1-a)}for(i=0;i<16;i++)t[2*i]=255&n[i],t[2*i+1]=n[i]>>8}function l(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function f(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function d(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function p(t,e,r){var n,i,o=0,s=0,a=0,u=0,c=0,h=0,l=0,f=0,d=0,p=0,y=0,g=0,m=0,b=0,w=0,v=0,_=0,E=0,S=0,A=0,I=0,T=0,R=0,M=0,k=0,C=0,O=0,P=0,B=0,x=0,N=0,D=r[0],L=r[1],U=r[2],j=r[3],F=r[4],K=r[5],$=r[6],q=r[7],H=r[8],z=r[9],V=r[10],G=r[11],W=r[12],Y=r[13],J=r[14],Z=r[15];n=e[0],o+=n*D,s+=n*L,a+=n*U,u+=n*j,c+=n*F,h+=n*K,l+=n*$,f+=n*q,d+=n*H,p+=n*z,y+=n*V,g+=n*G,m+=n*W,b+=n*Y,w+=n*J,v+=n*Z,n=e[1],s+=n*D,a+=n*L,u+=n*U,c+=n*j,h+=n*F,l+=n*K,f+=n*$,d+=n*q,p+=n*H,y+=n*z,g+=n*V,m+=n*G,b+=n*W,w+=n*Y,v+=n*J,_+=n*Z,n=e[2],a+=n*D,u+=n*L,c+=n*U,h+=n*j,l+=n*F,f+=n*K,d+=n*$,p+=n*q,y+=n*H,g+=n*z,m+=n*V,b+=n*G,w+=n*W,v+=n*Y,_+=n*J,E+=n*Z,n=e[3],u+=n*D,c+=n*L,h+=n*U,l+=n*j,f+=n*F,d+=n*K,p+=n*$,y+=n*q,g+=n*H,m+=n*z,b+=n*V,w+=n*G,v+=n*W,_+=n*Y,E+=n*J,S+=n*Z,n=e[4],c+=n*D,h+=n*L,l+=n*U,f+=n*j,d+=n*F,p+=n*K,y+=n*$,g+=n*q,m+=n*H,b+=n*z,w+=n*V,v+=n*G,_+=n*W,E+=n*Y,S+=n*J,A+=n*Z,n=e[5],h+=n*D,l+=n*L,f+=n*U,d+=n*j,p+=n*F,y+=n*K,g+=n*$,m+=n*q,b+=n*H,w+=n*z,v+=n*V,_+=n*G,E+=n*W,S+=n*Y,A+=n*J,I+=n*Z,n=e[6],l+=n*D,f+=n*L,d+=n*U,p+=n*j,y+=n*F,g+=n*K,m+=n*$,b+=n*q,w+=n*H,v+=n*z,_+=n*V,E+=n*G,S+=n*W,A+=n*Y,I+=n*J,T+=n*Z,n=e[7],f+=n*D,d+=n*L,p+=n*U,y+=n*j,g+=n*F,m+=n*K,b+=n*$,w+=n*q,v+=n*H,_+=n*z,E+=n*V,S+=n*G,A+=n*W,I+=n*Y,T+=n*J,R+=n*Z,n=e[8],d+=n*D,p+=n*L,y+=n*U,g+=n*j,m+=n*F,b+=n*K,w+=n*$,v+=n*q,_+=n*H,E+=n*z,S+=n*V,A+=n*G,I+=n*W,T+=n*Y,R+=n*J,M+=n*Z,n=e[9],p+=n*D,y+=n*L,g+=n*U,m+=n*j,b+=n*F,w+=n*K,v+=n*$,_+=n*q,E+=n*H,S+=n*z,A+=n*V,I+=n*G,T+=n*W,R+=n*Y,M+=n*J,k+=n*Z,n=e[10],y+=n*D,g+=n*L,m+=n*U,b+=n*j,w+=n*F,v+=n*K,_+=n*$,E+=n*q,S+=n*H,A+=n*z,I+=n*V,T+=n*G,R+=n*W,M+=n*Y,k+=n*J,C+=n*Z,n=e[11],g+=n*D,m+=n*L,b+=n*U,w+=n*j,v+=n*F,_+=n*K,E+=n*$,S+=n*q,A+=n*H,I+=n*z,T+=n*V,R+=n*G,M+=n*W,k+=n*Y,C+=n*J,O+=n*Z,n=e[12],m+=n*D,b+=n*L,w+=n*U,v+=n*j,_+=n*F,E+=n*K,S+=n*$,A+=n*q,I+=n*H,T+=n*z,R+=n*V,M+=n*G,k+=n*W,C+=n*Y,O+=n*J,P+=n*Z,n=e[13],b+=n*D,w+=n*L,v+=n*U,_+=n*j,E+=n*F,S+=n*K,A+=n*$,I+=n*q,T+=n*H,R+=n*z,M+=n*V,k+=n*G,C+=n*W,O+=n*Y,P+=n*J,B+=n*Z,n=e[14],w+=n*D,v+=n*L,_+=n*U,E+=n*j,S+=n*F,A+=n*K,I+=n*$,T+=n*q,R+=n*H,M+=n*z,k+=n*V,C+=n*G,O+=n*W,P+=n*Y,B+=n*J,x+=n*Z,n=e[15],v+=n*D,_+=n*L,E+=n*U,S+=n*j,A+=n*F,I+=n*K,T+=n*$,R+=n*q,M+=n*H,k+=n*z,C+=n*V,O+=n*G,P+=n*W,B+=n*Y,x+=n*J,N+=n*Z,o+=38*_,s+=38*E,a+=38*S,u+=38*A,c+=38*I,h+=38*T,l+=38*R,f+=38*M,d+=38*k,p+=38*C,y+=38*O,g+=38*P,m+=38*B,b+=38*x,w+=38*N,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=u,t[4]=c,t[5]=h,t[6]=l,t[7]=f,t[8]=d,t[9]=p,t[10]=y,t[11]=g,t[12]=m,t[13]=b,t[14]=w,t[15]=v}function y(t,e){p(t,e,e)}function g(t,e){for(var r=o(),n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)y(r,r),2!==n&&4!==n&&p(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function m(t,e){for(var r=new Uint8Array(32),n=new Float64Array(80),i=o(),s=o(),u=o(),m=o(),b=o(),w=o(),v=0;v<31;v++)r[v]=t[v];r[31]=127&t[31]|64,r[0]&=248,l(n,e);for(v=0;v<16;v++)s[v]=n[v];i[0]=m[0]=1;for(v=254;v>=0;--v){var _=r[v>>>3]>>>(7&v)&1;c(i,s,_),c(u,m,_),f(b,i,u),d(i,i,u),f(u,s,m),d(s,s,m),y(m,b),y(w,i),p(i,u,i),p(u,s,b),f(b,i,u),d(i,i,u),y(s,i),d(u,m,w),p(i,u,a),f(i,i,m),p(u,u,i),p(i,m,w),p(m,s,n),y(s,b),c(i,s,_),c(u,m,_)}for(v=0;v<16;v++)n[v+16]=i[v],n[v+32]=u[v],n[v+48]=s[v],n[v+64]=m[v];var E=n.subarray(32),S=n.subarray(16);g(E,E),p(S,S,E);var A=new Uint8Array(32);return h(A,S),A}function b(t){return m(t,s)}function w(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+e.SECRET_KEY_LENGTH+" bytes");var r=new Uint8Array(t),n=b(r);return{publicKey:n,secretKey:r}}function v(t){var e=n.randomBytes(32,t),r=w(e);return i.wipe(e),r}function _(t,r,n){if(void 0===n&&(n=!1),t.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(r.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var i=m(t,r);if(n){for(var o=0,s=0;s<i.length;s++)o|=i[s];if(0===o)throw new Error("X25519: invalid shared key")}return i}e.scalarMult=m,e.scalarMultBase=b,e.generateKeyPairFromSeed=w,e.generateKeyPair=v,e.sharedKey=_},46362:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118),Object.defineProperty(e,"__esModule",{value:!0});var n=r(62267),i=r(85279),o=r(23038),s=20;function a(t,e,r,n){if(24!==e.length)throw new Error("XChaCha20 nonce must be 24 bytes");var s=c(t,e.subarray(0,16),new Uint8Array(32)),a=new Uint8Array(12);a.set(e.subarray(16),4);var u=o.streamXOR(s,a,r,n);return i.wipe(s),u}function u(t,e,r){return i.wipe(r),a(t,e,r,r)}function c(t,e,r){for(var i=1634760805,o=857760878,a=2036477234,u=1797285236,c=t[3]<<24|t[2]<<16|t[1]<<8|t[0],h=t[7]<<24|t[6]<<16|t[5]<<8|t[4],l=t[11]<<24|t[10]<<16|t[9]<<8|t[8],f=t[15]<<24|t[14]<<16|t[13]<<8|t[12],d=t[19]<<24|t[18]<<16|t[17]<<8|t[16],p=t[23]<<24|t[22]<<16|t[21]<<8|t[20],y=t[27]<<24|t[26]<<16|t[25]<<8|t[24],g=t[31]<<24|t[30]<<16|t[29]<<8|t[28],m=e[3]<<24|e[2]<<16|e[1]<<8|e[0],b=e[7]<<24|e[6]<<16|e[5]<<8|e[4],w=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],_=i,E=o,S=a,A=u,I=c,T=h,R=l,M=f,k=d,C=p,O=y,P=g,B=m,x=b,N=w,D=v,L=0;L<s;L+=2)_=_+I|0,B^=_,B=B>>>16|B<<16,k=k+B|0,I^=k,I=I>>>20|I<<12,E=E+T|0,x^=E,x=x>>>16|x<<16,C=C+x|0,T^=C,T=T>>>20|T<<12,S=S+R|0,N^=S,N=N>>>16|N<<16,O=O+N|0,R^=O,R=R>>>20|R<<12,A=A+M|0,D^=A,D=D>>>16|D<<16,P=P+D|0,M^=P,M=M>>>20|M<<12,S=S+R|0,N^=S,N=N>>>24|N<<8,O=O+N|0,R^=O,R=R>>>25|R<<7,A=A+M|0,D^=A,D=D>>>24|D<<8,P=P+D|0,M^=P,M=M>>>25|M<<7,E=E+T|0,x^=E,x=x>>>24|x<<8,C=C+x|0,T^=C,T=T>>>25|T<<7,_=_+I|0,B^=_,B=B>>>24|B<<8,k=k+B|0,I^=k,I=I>>>25|I<<7,_=_+T|0,D^=_,D=D>>>16|D<<16,O=O+D|0,T^=O,T=T>>>20|T<<12,E=E+R|0,B^=E,B=B>>>16|B<<16,P=P+B|0,R^=P,R=R>>>20|R<<12,S=S+M|0,x^=S,x=x>>>16|x<<16,k=k+x|0,M^=k,M=M>>>20|M<<12,A=A+I|0,N^=A,N=N>>>16|N<<16,C=C+N|0,I^=C,I=I>>>20|I<<12,S=S+M|0,x^=S,x=x>>>24|x<<8,k=k+x|0,M^=k,M=M>>>25|M<<7,A=A+I|0,N^=A,N=N>>>24|N<<8,C=C+N|0,I^=C,I=I>>>25|I<<7,E=E+R|0,B^=E,B=B>>>24|B<<8,P=P+B|0,R^=P,R=R>>>25|R<<7,_=_+T|0,D^=_,D=D>>>24|D<<8,O=O+D|0,T^=O,T=T>>>25|T<<7;return n.writeUint32LE(_,r,0),n.writeUint32LE(E,r,4),n.writeUint32LE(S,r,8),n.writeUint32LE(A,r,12),n.writeUint32LE(B,r,16),n.writeUint32LE(x,r,20),n.writeUint32LE(N,r,24),n.writeUint32LE(D,r,28),r}e.streamXOR=a,e.stream=u,e.hchacha=c},31499:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);var n=r(46362),i=r(52130),o=r(85279);e.Cv=32,e.WH=24,e.pg=16;var s=function(){function t(t){if(this.nonceLength=e.WH,this.tagLength=e.pg,t.length!==e.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,r,s){if(24!==t.length)throw new Error("XChaCha20Poly1305: incorrect nonce length");var a=n.hchacha(this._key,t.subarray(0,16),new Uint8Array(32)),u=new Uint8Array(12);u.set(t.subarray(16),4);var c=new i.ChaCha20Poly1305(a),h=c.seal(u,e,r,s);return o.wipe(a),o.wipe(u),c.clean(),h},t.prototype.open=function(t,e,r,s){if(24!==t.length)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var a=n.hchacha(this._key,t.subarray(0,16),new Uint8Array(32)),u=new Uint8Array(12);u.set(t.subarray(16),4);var c=new i.ChaCha20Poly1305(a),h=c.open(u,e,r,s);return o.wipe(a),o.wipe(u),c.clean(),h},t.prototype.clean=function(){return o.wipe(this._key),this},t}();e.NV=s},14937:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){__webpack_require__(48675),__webpack_require__(3462),__webpack_require__(37380),__webpack_require__(1118),__webpack_require__(82801),__webpack_require__(21703),function(){"use strict";const state_=Symbol("state_"),storedError_=Symbol("storedError_");function isInteger(t){if(!isFinite(t))return!1;const e=Math.abs(t);return Math.floor(e)===e}function isFiniteNonNegativeNumber(t){return!("number"!=typeof t||!isFinite(t))&&t>=0}function isAbortSignal(t){if("object"!=typeof t||null===t)return!1;try{return Object.getOwnPropertyDescriptor(AbortSignal.prototype,"aborted").get.call(t),!0}catch(e){return!1}}function invokeOrNoop(t,e,r){const n=t[e];if(void 0!==n)return Function.prototype.apply.call(n,t,r)}function cloneArrayBuffer(t,e,r,n){return t.slice(e,e+r)}function transferArrayBuffer(t){return t.slice(0)}function copyDataBlockBytes(t,e,r,n,i){new Uint8Array(t,e,i).set(new Uint8Array(r,n,i))}const objectCloneMemo=new WeakMap;let sharedArrayBufferSupported_;function supportsSharedArrayBuffer(){if(void 0===sharedArrayBufferSupported_)try{new SharedArrayBuffer(16),sharedArrayBufferSupported_=!0}catch(t){sharedArrayBufferSupported_=!1}return sharedArrayBufferSupported_}function cloneValue(t){switch(typeof t){case"number":case"string":case"boolean":case"undefined":case"bigint":return t;case"object":{if(objectCloneMemo.has(t))return objectCloneMemo.get(t);if(null===t)return t;if(t instanceof Date)return new Date(t.valueOf());if(t instanceof RegExp)return new RegExp(t);if(supportsSharedArrayBuffer()&&t instanceof SharedArrayBuffer)return t;if(t instanceof ArrayBuffer){const e=cloneArrayBuffer(t,0,t.byteLength);return objectCloneMemo.set(t,e),e}if(ArrayBuffer.isView(t)){const e=cloneValue(t.buffer);let r;return r=t instanceof DataView?t.byteLength:t.length,new t.constructor(e,t.byteOffset,r)}if(t instanceof Map){const e=new Map;return objectCloneMemo.set(t,e),t.forEach(((t,r)=>e.set(r,cloneValue(t)))),e}if(t instanceof Set){const e=new Map;return objectCloneMemo.set(t,e),t.forEach(((t,r)=>e.set(r,cloneValue(t)))),e}const e={};objectCloneMemo.set(t,e);const r=Object.getOwnPropertyNames(t);for(const n of r)e[n]=cloneValue(t[n]);return e}case"symbol":case"function":default:throw new DOMException("Uncloneable value in stream","DataCloneError")}}function promiseCall(t,e,r){try{const n=Function.prototype.apply.call(t,e,r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}function createAlgorithmFromUnderlyingMethod(t,e,r){const n=t[e];if(void 0===n)return()=>Promise.resolve(void 0);if("function"!=typeof n)throw new TypeError(`Field "${e}" is not a function.`);return function(...e){return promiseCall(n,t,e.concat(r))}}function validateAndNormalizeHighWaterMark(t){const e=Number(t);if(isNaN(e)||e<0)throw new RangeError("highWaterMark must be a valid, non-negative integer.");return e}function makeSizeAlgorithmFromSizeFunction(t){if("function"!=typeof t&&void 0!==t)throw new TypeError("size function must be undefined or a function");return function(e){return"function"==typeof t?t(e):1}}function createControlledPromise(){const t={state:0};return t.promise=new Promise((function(e,r){t.resolve=function(r){t.state=1,e(r)},t.reject=function(e){t.state=2,r(e)}})),t}const CHUNK_SIZE=16384;class QueueImpl{constructor(){this.chunks_=[[]],this.readChunk_=this.writeChunk_=this.chunks_[0],this.length_=0}push(t){this.writeChunk_.push(t),this.length_+=1,this.writeChunk_.length===CHUNK_SIZE&&(this.writeChunk_=[],this.chunks_.push(this.writeChunk_))}front(){if(0!==this.length_)return this.readChunk_[0]}shift(){if(0===this.length_)return;const t=this.readChunk_.shift();return this.length_-=1,0===this.readChunk_.length&&this.readChunk_!==this.writeChunk_&&(this.chunks_.shift(),this.readChunk_=this.chunks_[0]),t}get length(){return this.length_}}const queue_=Symbol("queue_"),queueTotalSize_=Symbol("queueTotalSize_");function dequeueValue(t){const e=t[queue_].shift(),r=t[queueTotalSize_]-e.size;return t[queueTotalSize_]=Math.max(0,r),e.value}function enqueueValueWithSize(t,e,r){if(!isFiniteNonNegativeNumber(r))throw new RangeError("Chunk size must be a non-negative, finite numbers");t[queue_].push({value:e,size:r}),t[queueTotalSize_]+=r}function peekQueueValue(t){return t[queue_].front().value}function resetQueue(t){t[queue_]=new QueueImpl,t[queueTotalSize_]=0}const controlledReadableStream_=Symbol("controlledReadableStream_"),pullAlgorithm_=Symbol("pullAlgorithm_"),cancelAlgorithm_=Symbol("cancelAlgorithm_"),strategySizeAlgorithm_=Symbol("strategySizeAlgorithm_"),strategyHWM_=Symbol("strategyHWM_"),started_=Symbol("started_"),closeRequested_=Symbol("closeRequested_"),pullAgain_=Symbol("pullAgain_"),pulling_=Symbol("pulling_"),cancelSteps_=Symbol("cancelSteps_"),pullSteps_=Symbol("pullSteps_"),autoAllocateChunkSize_=Symbol("autoAllocateChunkSize_"),byobRequest_=Symbol("byobRequest_"),controlledReadableByteStream_=Symbol("controlledReadableByteStream_"),pendingPullIntos_=Symbol("pendingPullIntos_"),closedPromise_=Symbol("closedPromise_"),ownerReadableStream_=Symbol("ownerReadableStream_"),readRequests_=Symbol("readRequests_"),readIntoRequests_=Symbol("readIntoRequests_"),associatedReadableByteStreamController_=Symbol("associatedReadableByteStreamController_"),view_=Symbol("view_"),reader_=Symbol("reader_"),readableStreamController_=Symbol("readableStreamController_");function initializeReadableStream(t){t[state_]="readable",t[reader_]=void 0,t[storedError_]=void 0,t[readableStreamController_]=void 0}function isReadableStream(t){return"object"==typeof t&&null!==t&&readableStreamController_ in t}function isReadableStreamLocked(t){return void 0!==t[reader_]}function readableStreamGetNumReadIntoRequests(t){const e=t[reader_];return void 0===e?0:e[readIntoRequests_].length}function readableStreamGetNumReadRequests(t){const e=t[reader_];return void 0===e?0:e[readRequests_].length}function readableStreamCreateReadResult(t,e,r){const n=r?Object.prototype:null,i=Object.create(n);return i.value=t,i.done=e,i}function readableStreamAddReadIntoRequest(t,e){const r=t[reader_],n=createControlledPromise();return n.forAuthorCode=e,r[readIntoRequests_].push(n),n.promise}function readableStreamAddReadRequest(t,e){const r=t[reader_],n=createControlledPromise();return n.forAuthorCode=e,r[readRequests_].push(n),n.promise}function readableStreamHasBYOBReader(t){return isReadableStreamBYOBReader(t[reader_])}function readableStreamHasDefaultReader(t){return isReadableStreamDefaultReader(t[reader_])}function readableStreamCancel(t,e){return"closed"===t[state_]?Promise.resolve(void 0):"errored"===t[state_]?Promise.reject(t[storedError_]):(readableStreamClose(t),t[readableStreamController_][cancelSteps_](e).then((t=>{})))}function readableStreamClose(t){t[state_]="closed";const e=t[reader_];if(void 0!==e&&(e[closedPromise_].resolve(),e[closedPromise_].promise.catch((()=>{})),isReadableStreamDefaultReader(e))){for(const t of e[readRequests_])t.resolve(readableStreamCreateReadResult(void 0,!0,t.forAuthorCode));e[readRequests_]=[]}}function readableStreamError(t,e){if("readable"!==t[state_])throw new RangeError("Stream is in an invalid state");t[state_]="errored",t[storedError_]=e;const r=t[reader_];if(void 0!==r)if(r[closedPromise_].reject(e),isReadableStreamDefaultReader(r)){for(const t of r[readRequests_])t.reject(e);r[readRequests_]=[]}else{const t=r[readIntoRequests_];for(const r of t)r.reject(e);r[readIntoRequests_]=[]}}function isReadableStreamDefaultReader(t){return"object"==typeof t&&null!==t&&readRequests_ in t}function isReadableStreamBYOBReader(t){return"object"==typeof t&&null!==t&&readIntoRequests_ in t}function readableStreamReaderGenericInitialize(t,e){t[ownerReadableStream_]=e,e[reader_]=t;const r=e[state_];t[closedPromise_]=createControlledPromise(),"readable"===r||("closed"===r?t[closedPromise_].resolve(void 0):(t[closedPromise_].reject(e[storedError_]),t[closedPromise_].promise.catch((()=>{}))))}function readableStreamReaderGenericRelease(t){const e=t[ownerReadableStream_];if(void 0===e)throw new TypeError("Reader is in an inconsistent state");"readable"===e[state_]||(t[closedPromise_]=createControlledPromise()),t[closedPromise_].reject(new TypeError),t[closedPromise_].promise.catch((()=>{})),e[reader_]=void 0,t[ownerReadableStream_]=void 0}function readableStreamBYOBReaderRead(t,e,r=!1){const n=t[ownerReadableStream_];return"errored"===n[state_]?Promise.reject(n[storedError_]):readableByteStreamControllerPullInto(n[readableStreamController_],e,r)}function readableStreamDefaultReaderRead(t,e=!1){const r=t[ownerReadableStream_];return"closed"===r[state_]?Promise.resolve(readableStreamCreateReadResult(void 0,!0,e)):"errored"===r[state_]?Promise.reject(r[storedError_]):r[readableStreamController_][pullSteps_](e)}function readableStreamFulfillReadIntoRequest(t,e,r){const n=t[reader_][readIntoRequests_].shift();n.resolve(readableStreamCreateReadResult(e,r,n.forAuthorCode))}function readableStreamFulfillReadRequest(t,e,r){const n=t[reader_][readRequests_].shift();n.resolve(readableStreamCreateReadResult(e,r,n.forAuthorCode))}function setUpReadableStreamDefaultController(t,e,r,n,i,o,s){e[controlledReadableStream_]=t,resetQueue(e),e[started_]=!1,e[closeRequested_]=!1,e[pullAgain_]=!1,e[pulling_]=!1,e[strategySizeAlgorithm_]=s,e[strategyHWM_]=o,e[pullAlgorithm_]=n,e[cancelAlgorithm_]=i,t[readableStreamController_]=e;const a=r();Promise.resolve(a).then((t=>{e[started_]=!0,readableStreamDefaultControllerCallPullIfNeeded(e)}),(t=>{readableStreamDefaultControllerError(e,t)}))}function isReadableStreamDefaultController(t){return"object"==typeof t&&null!==t&&controlledReadableStream_ in t}function readableStreamDefaultControllerHasBackpressure(t){return!readableStreamDefaultControllerShouldCallPull(t)}function readableStreamDefaultControllerCanCloseOrEnqueue(t){const e=t[controlledReadableStream_][state_];return!1===t[closeRequested_]&&"readable"===e}function readableStreamDefaultControllerGetDesiredSize(t){const e=t[controlledReadableStream_][state_];return"errored"===e?null:"closed"===e?0:t[strategyHWM_]-t[queueTotalSize_]}function readableStreamDefaultControllerClose(t){t[closeRequested_]=!0;const e=t[controlledReadableStream_];0===t[queue_].length&&(readableStreamDefaultControllerClearAlgorithms(t),readableStreamClose(e))}function readableStreamDefaultControllerEnqueue(t,e){const r=t[controlledReadableStream_];if(isReadableStreamLocked(r)&&readableStreamGetNumReadRequests(r)>0)readableStreamFulfillReadRequest(r,e,!1);else{let r;try{r=t[strategySizeAlgorithm_](e)}catch(n){throw readableStreamDefaultControllerError(t,n),n}try{enqueueValueWithSize(t,e,r)}catch(n){throw readableStreamDefaultControllerError(t,n),n}}readableStreamDefaultControllerCallPullIfNeeded(t)}function readableStreamDefaultControllerError(t,e){const r=t[controlledReadableStream_];"readable"===r[state_]&&(resetQueue(t),readableStreamDefaultControllerClearAlgorithms(t),readableStreamError(r,e))}function readableStreamDefaultControllerCallPullIfNeeded(t){if(readableStreamDefaultControllerShouldCallPull(t))if(t[pulling_])t[pullAgain_]=!0;else{if(t[pullAgain_])throw new RangeError("Stream controller is in an invalid state.");t[pulling_]=!0,t[pullAlgorithm_](t).then((e=>{t[pulling_]=!1,t[pullAgain_]&&(t[pullAgain_]=!1,readableStreamDefaultControllerCallPullIfNeeded(t))}),(e=>{readableStreamDefaultControllerError(t,e)}))}}function readableStreamDefaultControllerShouldCallPull(t){const e=t[controlledReadableStream_];if(!readableStreamDefaultControllerCanCloseOrEnqueue(t))return!1;if(!1===t[started_])return!1;if(isReadableStreamLocked(e)&&readableStreamGetNumReadRequests(e)>0)return!0;const r=readableStreamDefaultControllerGetDesiredSize(t);if(null===r)throw new RangeError("Stream is in an invalid state.");return r>0}function readableStreamDefaultControllerClearAlgorithms(t){t[pullAlgorithm_]=void 0,t[cancelAlgorithm_]=void 0,t[strategySizeAlgorithm_]=void 0}function setUpReadableByteStreamController(t,e,r,n,i,o,s){if(void 0!==t[readableStreamController_])throw new TypeError("Cannot reuse streams");if(void 0!==s&&(!isInteger(s)||s<=0))throw new RangeError("autoAllocateChunkSize must be a positive, finite integer");e[controlledReadableByteStream_]=t,e[pullAgain_]=!1,e[pulling_]=!1,readableByteStreamControllerClearPendingPullIntos(e),resetQueue(e),e[closeRequested_]=!1,e[started_]=!1,e[strategyHWM_]=validateAndNormalizeHighWaterMark(o),e[pullAlgorithm_]=n,e[cancelAlgorithm_]=i,e[autoAllocateChunkSize_]=s,e[pendingPullIntos_]=[],t[readableStreamController_]=e;const a=r();Promise.resolve(a).then((t=>{e[started_]=!0,readableByteStreamControllerCallPullIfNeeded(e)}),(t=>{readableByteStreamControllerError(e,t)}))}function isReadableStreamBYOBRequest(t){return"object"==typeof t&&null!==t&&associatedReadableByteStreamController_ in t}function isReadableByteStreamController(t){return"object"==typeof t&&null!==t&&controlledReadableByteStream_ in t}function readableByteStreamControllerCallPullIfNeeded(t){readableByteStreamControllerShouldCallPull(t)&&(t[pulling_]?t[pullAgain_]=!0:(t[pulling_]=!0,t[pullAlgorithm_](t).then((e=>{t[pulling_]=!1,t[pullAgain_]&&(t[pullAgain_]=!1,readableByteStreamControllerCallPullIfNeeded(t))}),(e=>{readableByteStreamControllerError(t,e)}))))}function readableByteStreamControllerClearAlgorithms(t){t[pullAlgorithm_]=void 0,t[cancelAlgorithm_]=void 0}function readableByteStreamControllerClearPendingPullIntos(t){readableByteStreamControllerInvalidateBYOBRequest(t),t[pendingPullIntos_]=[]}function readableByteStreamControllerClose(t){const e=t[controlledReadableByteStream_];if(t[queueTotalSize_]>0)t[closeRequested_]=!0;else{if(t[pendingPullIntos_].length>0&&t[pendingPullIntos_][0].bytesFilled>0){const e=new TypeError;throw readableByteStreamControllerError(t,e),e}readableByteStreamControllerClearAlgorithms(t),readableStreamClose(e)}}function readableByteStreamControllerCommitPullIntoDescriptor(t,e){let r=!1;"closed"===t[state_]&&(r=!0);const n=readableByteStreamControllerConvertPullIntoDescriptor(e);"default"===e.readerType?readableStreamFulfillReadRequest(t,n,r):readableStreamFulfillReadIntoRequest(t,n,r)}function readableByteStreamControllerConvertPullIntoDescriptor(t){const{bytesFilled:e,elementSize:r}=t;return new t.ctor(t.buffer,t.byteOffset,e/r)}function readableByteStreamControllerEnqueue(t,e){const r=t[controlledReadableByteStream_],{buffer:n,byteOffset:i,byteLength:o}=e,s=transferArrayBuffer(n);readableStreamHasDefaultReader(r)?0===readableStreamGetNumReadRequests(r)?readableByteStreamControllerEnqueueChunkToQueue(t,s,i,o):readableStreamFulfillReadRequest(r,new Uint8Array(s,i,o),!1):readableStreamHasBYOBReader(r)?(readableByteStreamControllerEnqueueChunkToQueue(t,s,i,o),readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)):readableByteStreamControllerEnqueueChunkToQueue(t,s,i,o),readableByteStreamControllerCallPullIfNeeded(t)}function readableByteStreamControllerEnqueueChunkToQueue(t,e,r,n){t[queue_].push({buffer:e,byteOffset:r,byteLength:n}),t[queueTotalSize_]+=n}function readableByteStreamControllerError(t,e){const r=t[controlledReadableByteStream_];"readable"===r[state_]&&(readableByteStreamControllerClearPendingPullIntos(t),resetQueue(t),readableByteStreamControllerClearAlgorithms(t),readableStreamError(r,e))}function readableByteStreamControllerFillHeadPullIntoDescriptor(t,e,r){readableByteStreamControllerInvalidateBYOBRequest(t),r.bytesFilled+=e}function readableByteStreamControllerFillPullIntoDescriptorFromQueue(t,e){const r=e.elementSize,n=e.bytesFilled-e.bytesFilled%r,i=Math.min(t[queueTotalSize_],e.byteLength-e.bytesFilled),o=e.bytesFilled+i,s=o-o%r;let a=i,u=!1;s>n&&(a=s-e.bytesFilled,u=!0);const c=t[queue_];for(;a>0;){const r=c.front(),n=Math.min(a,r.byteLength),i=e.byteOffset+e.bytesFilled;copyDataBlockBytes(e.buffer,i,r.buffer,r.byteOffset,n),r.byteLength===n?c.shift():(r.byteOffset+=n,r.byteLength-=n),t[queueTotalSize_]-=n,readableByteStreamControllerFillHeadPullIntoDescriptor(t,n,e),a-=n}return u}function readableByteStreamControllerGetDesiredSize(t){const e=t[controlledReadableByteStream_][state_];return"errored"===e?null:"closed"===e?0:t[strategyHWM_]-t[queueTotalSize_]}function readableByteStreamControllerHandleQueueDrain(t){0===t[queueTotalSize_]&&t[closeRequested_]?(readableByteStreamControllerClearAlgorithms(t),readableStreamClose(t[controlledReadableByteStream_])):readableByteStreamControllerCallPullIfNeeded(t)}function readableByteStreamControllerInvalidateBYOBRequest(t){const e=t[byobRequest_];void 0!==e&&(e[associatedReadableByteStreamController_]=void 0,e[view_]=void 0,t[byobRequest_]=void 0)}function readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t){const e=t[pendingPullIntos_];for(;e.length>0;){if(0===t[queueTotalSize_])return;const r=e[0];readableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r)&&(readableByteStreamControllerShiftPendingPullInto(t),readableByteStreamControllerCommitPullIntoDescriptor(t[controlledReadableByteStream_],r))}}function readableByteStreamControllerPullInto(t,e,r){const n=t[controlledReadableByteStream_],i=e.BYTES_PER_ELEMENT||1,o=e.constructor,s=e.byteOffset,a=e.byteLength,u={buffer:transferArrayBuffer(e.buffer),byteOffset:s,byteLength:a,bytesFilled:0,elementSize:i,ctor:o,readerType:"byob"};if(t[pendingPullIntos_].length>0)return t[pendingPullIntos_].push(u),readableStreamAddReadIntoRequest(n,r);if("closed"===n[state_]){const t=new o(u.buffer,u.byteOffset,0);return Promise.resolve(readableStreamCreateReadResult(t,!0,r))}if(t[queueTotalSize_]>0){if(readableByteStreamControllerFillPullIntoDescriptorFromQueue(t,u)){const e=readableByteStreamControllerConvertPullIntoDescriptor(u);return readableByteStreamControllerHandleQueueDrain(t),Promise.resolve(readableStreamCreateReadResult(e,!1,r))}if(t[closeRequested_]){const e=new TypeError;return readableByteStreamControllerError(t,e),Promise.reject(e)}}t[pendingPullIntos_].push(u);const c=readableStreamAddReadIntoRequest(n,r);return readableByteStreamControllerCallPullIfNeeded(t),c}function readableByteStreamControllerRespond(t,e){if(!isFiniteNonNegativeNumber(e=Number(e)))throw new RangeError("bytesWritten must be a finite, non-negative number");readableByteStreamControllerRespondInternal(t,e)}function readableByteStreamControllerRespondInClosedState(t,e){e.buffer=transferArrayBuffer(e.buffer);const r=t[controlledReadableByteStream_];if(readableStreamHasBYOBReader(r))for(;readableStreamGetNumReadIntoRequests(r)>0;)readableByteStreamControllerCommitPullIntoDescriptor(r,readableByteStreamControllerShiftPendingPullInto(t))}function readableByteStreamControllerRespondInReadableState(t,e,r){if(r.bytesFilled+e>r.byteLength)throw new RangeError;if(readableByteStreamControllerFillHeadPullIntoDescriptor(t,e,r),r.bytesFilled<r.elementSize)return;readableByteStreamControllerShiftPendingPullInto(t);const n=r.bytesFilled%r.elementSize;if(n>0){const e=r.byteOffset+r.bytesFilled,i=cloneArrayBuffer(r.buffer,e-n,n);readableByteStreamControllerEnqueueChunkToQueue(t,i,0,i.byteLength)}r.buffer=transferArrayBuffer(r.buffer),r.bytesFilled=r.bytesFilled-n,readableByteStreamControllerCommitPullIntoDescriptor(t[controlledReadableByteStream_],r),readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}function readableByteStreamControllerRespondInternal(t,e){const r=t[pendingPullIntos_][0];if("closed"===t[controlledReadableByteStream_][state_]){if(0!==e)throw new TypeError;readableByteStreamControllerRespondInClosedState(t,r)}else readableByteStreamControllerRespondInReadableState(t,e,r);readableByteStreamControllerCallPullIfNeeded(t)}function readableByteStreamControllerRespondWithNewView(t,e){const r=t[pendingPullIntos_][0];if(r.byteOffset+r.bytesFilled!==e.byteOffset)throw new RangeError;if(r.byteLength!==e.byteLength)throw new RangeError;r.buffer=e.buffer,readableByteStreamControllerRespondInternal(t,e.byteLength)}function readableByteStreamControllerShiftPendingPullInto(t){const e=t[pendingPullIntos_].shift();return readableByteStreamControllerInvalidateBYOBRequest(t),e}function readableByteStreamControllerShouldCallPull(t){const e=t[controlledReadableByteStream_];return"readable"===e[state_]&&(!t[closeRequested_]&&(!!t[started_]&&(!!(readableStreamHasDefaultReader(e)&&readableStreamGetNumReadRequests(e)>0)||(!!(readableStreamHasBYOBReader(e)&&readableStreamGetNumReadIntoRequests(e)>0)||readableByteStreamControllerGetDesiredSize(t)>0))))}function setUpReadableStreamBYOBRequest(t,e,r){if(!isReadableByteStreamController(e))throw new TypeError;if(!ArrayBuffer.isView(r))throw new TypeError;t[associatedReadableByteStreamController_]=e,t[view_]=r}const backpressure_=Symbol("backpressure_"),closeRequest_=Symbol("closeRequest_"),inFlightWriteRequest_=Symbol("inFlightWriteRequest_"),inFlightCloseRequest_=Symbol("inFlightCloseRequest_"),pendingAbortRequest_=Symbol("pendingAbortRequest_"),writableStreamController_=Symbol("writableStreamController_"),writer_=Symbol("writer_"),writeRequests_=Symbol("writeRequests_"),abortAlgorithm_=Symbol("abortAlgorithm_"),closeAlgorithm_=Symbol("closeAlgorithm_"),controlledWritableStream_=Symbol("controlledWritableStream_"),started_$1=Symbol("started_"),strategyHWM_$1=Symbol("strategyHWM_"),strategySizeAlgorithm_$1=Symbol("strategySizeAlgorithm_"),writeAlgorithm_=Symbol("writeAlgorithm_"),ownerWritableStream_=Symbol("ownerWritableStream_"),closedPromise_$1=Symbol("closedPromise_"),readyPromise_=Symbol("readyPromise_"),errorSteps_=Symbol("errorSteps_"),abortSteps_=Symbol("abortSteps_");function initializeWritableStream(t){t[state_]="writable",t[storedError_]=void 0,t[writer_]=void 0,t[writableStreamController_]=void 0,t[inFlightWriteRequest_]=void 0,t[closeRequest_]=void 0,t[inFlightCloseRequest_]=void 0,t[pendingAbortRequest_]=void 0,t[writeRequests_]=[],t[backpressure_]=!1}function isWritableStream(t){return"object"==typeof t&&null!==t&&writableStreamController_ in t}function isWritableStreamLocked(t){return void 0!==t[writer_]}function writableStreamAbort(t,e){const r=t[state_];if("closed"===r||"errored"===r)return Promise.resolve(void 0);let n=t[pendingAbortRequest_];if(void 0!==n)return n.promise;let i=!1;"erroring"===r&&(i=!0,e=void 0),n={reason:e,wasAlreadyErroring:i};const o=new Promise(((t,e)=>{n.resolve=t,n.reject=e}));return n.promise=o,t[pendingAbortRequest_]=n,i||writableStreamStartErroring(t,e),o}function writableStreamAddWriteRequest(t){const e=createControlledPromise();return t[writeRequests_].push(e),e.promise}function writableStreamDealWithRejection(t,e){"writable"!==t[state_]?writableStreamFinishErroring(t):writableStreamStartErroring(t,e)}function writableStreamStartErroring(t,e){const r=t[writableStreamController_];t[state_]="erroring",t[storedError_]=e;const n=t[writer_];void 0!==n&&writableStreamDefaultWriterEnsureReadyPromiseRejected(n,e),!writableStreamHasOperationMarkedInFlight(t)&&r[started_$1]&&writableStreamFinishErroring(t)}function writableStreamFinishErroring(t){t[state_]="errored";const e=t[writableStreamController_];e[errorSteps_]();const r=t[storedError_];for(const i of t[writeRequests_])i.reject(r);t[writeRequests_]=[];const n=t[pendingAbortRequest_];if(void 0!==n)return t[pendingAbortRequest_]=void 0,n.wasAlreadyErroring?(n.reject(r),void writableStreamRejectCloseAndClosedPromiseIfNeeded(t)):void e[abortSteps_](n.reason).then((e=>{n.resolve(),writableStreamRejectCloseAndClosedPromiseIfNeeded(t)}),(e=>{n.reject(e),writableStreamRejectCloseAndClosedPromiseIfNeeded(t)}));writableStreamRejectCloseAndClosedPromiseIfNeeded(t)}function writableStreamFinishInFlightWrite(t){t[inFlightWriteRequest_].resolve(void 0),t[inFlightWriteRequest_]=void 0}function writableStreamFinishInFlightWriteWithError(t,e){t[inFlightWriteRequest_].reject(e),t[inFlightWriteRequest_]=void 0,writableStreamDealWithRejection(t,e)}function writableStreamFinishInFlightClose(t){t[inFlightCloseRequest_].resolve(void 0),t[inFlightCloseRequest_]=void 0,"erroring"===t[state_]&&(t[storedError_]=void 0,void 0!==t[pendingAbortRequest_]&&(t[pendingAbortRequest_].resolve(),t[pendingAbortRequest_]=void 0)),t[state_]="closed";const e=t[writer_];void 0!==e&&e[closedPromise_$1].resolve(void 0)}function writableStreamFinishInFlightCloseWithError(t,e){t[inFlightCloseRequest_].reject(e),t[inFlightCloseRequest_]=void 0,void 0!==t[pendingAbortRequest_]&&(t[pendingAbortRequest_].reject(e),t[pendingAbortRequest_]=void 0),writableStreamDealWithRejection(t,e)}function writableStreamCloseQueuedOrInFlight(t){return void 0!==t[closeRequest_]||void 0!==t[inFlightCloseRequest_]}function writableStreamHasOperationMarkedInFlight(t){return void 0!==t[inFlightWriteRequest_]||void 0!==t[inFlightCloseRequest_]}function writableStreamMarkCloseRequestInFlight(t){t[inFlightCloseRequest_]=t[closeRequest_],t[closeRequest_]=void 0}function writableStreamMarkFirstWriteRequestInFlight(t){const e=t[writeRequests_].shift();t[inFlightWriteRequest_]=e}function writableStreamRejectCloseAndClosedPromiseIfNeeded(t){const e=t[closeRequest_];void 0!==e&&(e.reject(t[storedError_]),t[closeRequest_]=void 0);const r=t[writer_];void 0!==r&&(r[closedPromise_$1].reject(t[storedError_]),r[closedPromise_$1].promise.catch((()=>{})))}function writableStreamUpdateBackpressure(t,e){const r=t[writer_];void 0!==r&&e!==t[backpressure_]&&(e?r[readyPromise_]=createControlledPromise():r[readyPromise_].resolve(void 0)),t[backpressure_]=e}function isWritableStreamDefaultWriter(t){return"object"==typeof t&&null!==t&&ownerWritableStream_ in t}function writableStreamDefaultWriterAbort(t,e){return writableStreamAbort(t[ownerWritableStream_],e)}function writableStreamDefaultWriterClose(t){const e=t[ownerWritableStream_],r=e[state_];if("closed"===r||"errored"===r)return Promise.reject(new TypeError("Writer stream is already closed or errored"));const n=createControlledPromise();return e[closeRequest_]=n,e[backpressure_]&&"writable"===r&&t[readyPromise_].resolve(void 0),writableStreamDefaultControllerClose(e[writableStreamController_]),n.promise}function writableStreamDefaultWriterCloseWithErrorPropagation(t){const e=t[ownerWritableStream_],r=e[state_];return writableStreamCloseQueuedOrInFlight(e)||"closed"===r?Promise.resolve(void 0):"errored"===r?Promise.reject(e[storedError_]):writableStreamDefaultWriterClose(t)}function writableStreamDefaultWriterEnsureClosedPromiseRejected(t,e){const r=t[closedPromise_$1];0===r.state?r.reject(e):(t[closedPromise_$1]=createControlledPromise(),t[closedPromise_$1].reject(e)),t[closedPromise_$1].promise.catch((()=>{}))}function writableStreamDefaultWriterEnsureReadyPromiseRejected(t,e){const r=t[readyPromise_];0===r.state?r.reject(e):(t[readyPromise_]=createControlledPromise(),t[readyPromise_].reject(e)),t[readyPromise_].promise.catch((()=>{}))}function writableStreamDefaultWriterGetDesiredSize(t){const e=t[ownerWritableStream_],r=e[state_];return"errored"===r||"erroring"===r?null:"closed"===r?0:writableStreamDefaultControllerGetDesiredSize(e[writableStreamController_])}function writableStreamDefaultWriterRelease(t){const e=t[ownerWritableStream_],r=new TypeError;writableStreamDefaultWriterEnsureReadyPromiseRejected(t,r),writableStreamDefaultWriterEnsureClosedPromiseRejected(t,r),e[writer_]=void 0,t[ownerWritableStream_]=void 0}function writableStreamDefaultWriterWrite(t,e){const r=t[ownerWritableStream_],n=r[writableStreamController_],i=writableStreamDefaultControllerGetChunkSize(n,e);if(t[ownerWritableStream_]!==r)return Promise.reject(new TypeError);const o=r[state_];if("errored"===o)return Promise.reject(r[storedError_]);if(writableStreamCloseQueuedOrInFlight(r)||"closed"===o)return Promise.reject(new TypeError("Cannot write to a closing or closed stream"));if("erroring"===o)return Promise.reject(r[storedError_]);const s=writableStreamAddWriteRequest(r);return writableStreamDefaultControllerWrite(n,e,i),s}function setUpWritableStreamDefaultController(t,e,r,n,i,o,s,a){if(!isWritableStream(t))throw new TypeError;if(void 0!==t[writableStreamController_])throw new TypeError;e[controlledWritableStream_]=t,t[writableStreamController_]=e,resetQueue(e),e[started_$1]=!1,e[strategySizeAlgorithm_$1]=a,e[strategyHWM_$1]=s,e[writeAlgorithm_]=n,e[closeAlgorithm_]=i,e[abortAlgorithm_]=o;const u=writableStreamDefaultControllerGetBackpressure(e);writableStreamUpdateBackpressure(t,u);const c=r();Promise.resolve(c).then((t=>{e[started_$1]=!0,writableStreamDefaultControllerAdvanceQueueIfNeeded(e)}),(r=>{e[started_$1]=!0,writableStreamDealWithRejection(t,r)}))}function isWritableStreamDefaultController(t){return"object"==typeof t&&null!==t&&controlledWritableStream_ in t}function writableStreamDefaultControllerClearAlgorithms(t){t[writeAlgorithm_]=void 0,t[closeAlgorithm_]=void 0,t[abortAlgorithm_]=void 0,t[strategySizeAlgorithm_$1]=void 0}function writableStreamDefaultControllerClose(t){enqueueValueWithSize(t,"close",0),writableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function writableStreamDefaultControllerGetChunkSize(t,e){let r;try{r=t[strategySizeAlgorithm_$1](e)}catch(n){writableStreamDefaultControllerErrorIfNeeded(t,n),r=1}return r}function writableStreamDefaultControllerGetDesiredSize(t){return t[strategyHWM_$1]-t[queueTotalSize_]}function writableStreamDefaultControllerWrite(t,e,r){try{enqueueValueWithSize(t,{chunk:e},r)}catch(i){return void writableStreamDefaultControllerErrorIfNeeded(t,i)}const n=t[controlledWritableStream_];writableStreamCloseQueuedOrInFlight(n)||"writable"!==n[state_]||writableStreamUpdateBackpressure(n,writableStreamDefaultControllerGetBackpressure(t)),writableStreamDefaultControllerAdvanceQueueIfNeeded(t)}function writableStreamDefaultControllerAdvanceQueueIfNeeded(t){if(!t[started_$1])return;const e=t[controlledWritableStream_];if(void 0!==e[inFlightWriteRequest_])return;const r=e[state_];if("closed"===r||"errored"===r)return;if("erroring"===r)return void writableStreamFinishErroring(e);if(0===t[queue_].length)return;const n=peekQueueValue(t);"close"===n?writableStreamDefaultControllerProcessClose(t):writableStreamDefaultControllerProcessWrite(t,n.chunk)}function writableStreamDefaultControllerErrorIfNeeded(t,e){"writable"===t[controlledWritableStream_][state_]&&writableStreamDefaultControllerError(t,e)}function writableStreamDefaultControllerProcessClose(t){const e=t[controlledWritableStream_];writableStreamMarkCloseRequestInFlight(e),dequeueValue(t);const r=t[closeAlgorithm_]();writableStreamDefaultControllerClearAlgorithms(t),r.then((t=>{writableStreamFinishInFlightClose(e)}),(t=>{writableStreamFinishInFlightCloseWithError(e,t)}))}function writableStreamDefaultControllerProcessWrite(t,e){const r=t[controlledWritableStream_];writableStreamMarkFirstWriteRequestInFlight(r),t[writeAlgorithm_](e).then((e=>{writableStreamFinishInFlightWrite(r);const n=r[state_];if(dequeueValue(t),!writableStreamCloseQueuedOrInFlight(r)&&"writable"===n){const e=writableStreamDefaultControllerGetBackpressure(t);writableStreamUpdateBackpressure(r,e)}writableStreamDefaultControllerAdvanceQueueIfNeeded(t)}),(e=>{"writable"===r[state_]&&writableStreamDefaultControllerClearAlgorithms(t),writableStreamFinishInFlightWriteWithError(r,e)}))}function writableStreamDefaultControllerGetBackpressure(t){return writableStreamDefaultControllerGetDesiredSize(t)<=0}function writableStreamDefaultControllerError(t,e){const r=t[controlledWritableStream_];writableStreamDefaultControllerClearAlgorithms(t),writableStreamStartErroring(r,e)}class ReadableStreamDefaultReader{constructor(t){if(!isReadableStream(t))throw new TypeError;if(isReadableStreamLocked(t))throw new TypeError("The stream is locked.");readableStreamReaderGenericInitialize(this,t),this[readRequests_]=[]}get closed(){return isReadableStreamDefaultReader(this)?this[closedPromise_].promise:Promise.reject(new TypeError)}cancel(t){if(!isReadableStreamDefaultReader(this))return Promise.reject(new TypeError);const e=this[ownerReadableStream_];return void 0===e?Promise.reject(new TypeError("Reader is not associated with a stream")):readableStreamCancel(e,t)}read(){return isReadableStreamDefaultReader(this)?void 0===this[ownerReadableStream_]?Promise.reject(new TypeError("Reader is not associated with a stream")):readableStreamDefaultReaderRead(this,!0):Promise.reject(new TypeError)}releaseLock(){if(!isReadableStreamDefaultReader(this))throw new TypeError;if(void 0!==this[ownerReadableStream_]){if(0!==this[readRequests_].length)throw new TypeError("Cannot release a stream with pending read requests");readableStreamReaderGenericRelease(this)}}}class WritableStreamDefaultWriter{constructor(t){if(!isWritableStream(t))throw new TypeError;if(isWritableStreamLocked(t))throw new TypeError("Stream is already locked");this[ownerWritableStream_]=t,t[writer_]=this;const e=createControlledPromise(),r=createControlledPromise();this[readyPromise_]=e,this[closedPromise_$1]=r;const n=t[state_];if("writable"===n)!writableStreamCloseQueuedOrInFlight(t)&&t[backpressure_]||e.resolve(void 0);else if("erroring"===n)e.reject(t[storedError_]),e.promise.catch((()=>{}));else if("closed"===n)e.resolve(void 0),r.resolve(void 0);else{const n=t[storedError_];e.reject(n),e.promise.catch((()=>{})),r.reject(n),r.promise.catch((()=>{}))}}abort(t){return isWritableStreamDefaultWriter(this)?void 0===this[ownerWritableStream_]?Promise.reject(new TypeError("Writer is not connected to a stream")):writableStreamDefaultWriterAbort(this,t):Promise.reject(new TypeError)}close(){if(!isWritableStreamDefaultWriter(this))return Promise.reject(new TypeError);const t=this[ownerWritableStream_];return void 0===t?Promise.reject(new TypeError("Writer is not connected to a stream")):writableStreamCloseQueuedOrInFlight(t)?Promise.reject(new TypeError):writableStreamDefaultWriterClose(this)}releaseLock(){void 0!==this[ownerWritableStream_]&&writableStreamDefaultWriterRelease(this)}write(t){return isWritableStreamDefaultWriter(this)?void 0===this[ownerWritableStream_]?Promise.reject(new TypeError("Writer is not connected to a stream")):writableStreamDefaultWriterWrite(this,t):Promise.reject(new TypeError)}get closed(){return isWritableStreamDefaultWriter(this)?this[closedPromise_$1].promise:Promise.reject(new TypeError)}get desiredSize(){if(!isWritableStreamDefaultWriter(this))throw new TypeError;if(void 0===this[ownerWritableStream_])throw new TypeError("Writer is not connected to stream");return writableStreamDefaultWriterGetDesiredSize(this)}get ready(){return isWritableStreamDefaultWriter(this)?this[readyPromise_].promise:Promise.reject(new TypeError)}}function pipeTo(t,e,r){const n=!!r.preventClose,i=!!r.preventAbort,o=!!r.preventCancel,s=r.signal;let a=!1,u=Promise.resolve();const c=createControlledPromise(),h=new ReadableStreamDefaultReader(t),l=new WritableStreamDefaultWriter(e);let f;function d(t,e,r){"errored"===t[state_]?r(t[storedError_]):e.catch(r)}if(void 0!==s&&(f=()=>{const r=new DOMException("Aborted","AbortError"),n=[];!1===i&&n.push((()=>"writable"===e[state_]?writableStreamAbort(e,r):Promise.resolve())),!1===o&&n.push((()=>"readable"===t[state_]?readableStreamCancel(t,r):Promise.resolve())),g((()=>Promise.all(n.map((t=>t()))).then((t=>{}))),{actualError:r})},!0===s.aborted?f():s.addEventListener("abort",f)),d(t,h[closedPromise_].promise,(t=>{g(i?void 0:()=>writableStreamAbort(e,t),{actualError:t})})),d(e,l[closedPromise_$1].promise,(e=>{g(o?void 0:()=>readableStreamCancel(t,e),{actualError:e})})),function(t,e,r){"closed"===t[state_]?r():e.then(r)}(t,h[closedPromise_].promise,(()=>{n?g():g((()=>writableStreamDefaultWriterCloseWithErrorPropagation(l)))})),writableStreamCloseQueuedOrInFlight(e)||"closed"===e[state_]){const e=new TypeError;g(o?void 0:()=>readableStreamCancel(t,e),{actualError:e})}function p(){const t=u;return u.then((()=>t===u?void 0:p()))}function y(){return"writable"!==e[state_]||writableStreamCloseQueuedOrInFlight(e)?void 0:p()}function g(t,e){if(a)return;function r(){t().then((t=>m(e)),(t=>m({actualError:t})))}a=!0,void 0===t&&(t=()=>Promise.resolve());const n=y();n?n.then(r):r()}function m(t){writableStreamDefaultWriterRelease(l),readableStreamReaderGenericRelease(h),s&&f&&s.removeEventListener("abort",f),t?c.reject(t.actualError):c.resolve(void 0)}return function t(){a||l[readyPromise_].promise.then((()=>{readableStreamDefaultReaderRead(h).then((({value:e,done:r})=>{r||(u=writableStreamDefaultWriterWrite(l,e).catch((()=>{})),t())}),(t=>{u=Promise.resolve()}))}))}(),c.promise}class ReadableStreamDefaultController{constructor(){throw new TypeError}get desiredSize(){return readableStreamDefaultControllerGetDesiredSize(this)}close(){if(!isReadableStreamDefaultController(this))throw new TypeError;if(!readableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("Cannot close, the stream is already closing or not readable");readableStreamDefaultControllerClose(this)}enqueue(t){if(!isReadableStreamDefaultController(this))throw new TypeError;if(!readableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("Cannot enqueue, the stream is closing or not readable");readableStreamDefaultControllerEnqueue(this,t)}error(t){if(!isReadableStreamDefaultController(this))throw new TypeError;readableStreamDefaultControllerError(this,t)}[cancelSteps_](t){resetQueue(this);const e=this[cancelAlgorithm_](t);return readableStreamDefaultControllerClearAlgorithms(this),e}[pullSteps_](t){const e=this[controlledReadableStream_];if(this[queue_].length>0){const r=dequeueValue(this);return this[closeRequested_]&&0===this[queue_].length?(readableStreamDefaultControllerClearAlgorithms(this),readableStreamClose(e)):readableStreamDefaultControllerCallPullIfNeeded(this),Promise.resolve(readableStreamCreateReadResult(r,!1,t))}const r=readableStreamAddReadRequest(e,t);return readableStreamDefaultControllerCallPullIfNeeded(this),r}}function setUpReadableStreamDefaultControllerFromUnderlyingSource(t,e,r,n){const i=Object.create(ReadableStreamDefaultController.prototype),o=createAlgorithmFromUnderlyingMethod(e,"pull",[i]),s=createAlgorithmFromUnderlyingMethod(e,"cancel",[]);setUpReadableStreamDefaultController(t,i,(()=>invokeOrNoop(e,"start",[i])),o,s,r,n)}class ReadableStreamBYOBRequest{constructor(){throw new TypeError}get view(){if(!isReadableStreamBYOBRequest(this))throw new TypeError;return this[view_]}respond(t){if(!isReadableStreamBYOBRequest(this))throw new TypeError;if(void 0===this[associatedReadableByteStreamController_])throw new TypeError;return readableByteStreamControllerRespond(this[associatedReadableByteStreamController_],t)}respondWithNewView(t){if(!isReadableStreamBYOBRequest(this))throw new TypeError;if(void 0===this[associatedReadableByteStreamController_])throw new TypeError;if(!ArrayBuffer.isView(t))throw new TypeError("view parameter must be a TypedArray");return readableByteStreamControllerRespondWithNewView(this[associatedReadableByteStreamController_],t)}}class ReadableByteStreamController{constructor(){throw new TypeError}get byobRequest(){if(!isReadableByteStreamController(this))throw new TypeError;if(void 0===this[byobRequest_]&&this[pendingPullIntos_].length>0){const t=this[pendingPullIntos_][0],e=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),r=Object.create(ReadableStreamBYOBRequest.prototype);setUpReadableStreamBYOBRequest(r,this,e),this[byobRequest_]=r}return this[byobRequest_]}get desiredSize(){if(!isReadableByteStreamController(this))throw new TypeError;return readableByteStreamControllerGetDesiredSize(this)}close(){if(!isReadableByteStreamController(this))throw new TypeError;if(this[closeRequested_])throw new TypeError("Stream is already closing");if("readable"!==this[controlledReadableByteStream_][state_])throw new TypeError("Stream is closed or errored");readableByteStreamControllerClose(this)}enqueue(t){if(!isReadableByteStreamController(this))throw new TypeError;if(this[closeRequested_])throw new TypeError("Stream is already closing");if("readable"!==this[controlledReadableByteStream_][state_])throw new TypeError("Stream is closed or errored");if(!ArrayBuffer.isView(t))throw new TypeError("chunk must be a valid ArrayBufferView");return readableByteStreamControllerEnqueue(this,t)}error(t){if(!isReadableByteStreamController(this))throw new TypeError;readableByteStreamControllerError(this,t)}[cancelSteps_](t){this[pendingPullIntos_].length>0&&(this[pendingPullIntos_][0].bytesFilled=0),resetQueue(this);const e=this[cancelAlgorithm_](t);return readableByteStreamControllerClearAlgorithms(this),e}[pullSteps_](t){const e=this[controlledReadableByteStream_];if(this[queueTotalSize_]>0){const e=this[queue_].shift();this[queueTotalSize_]-=e.byteLength,readableByteStreamControllerHandleQueueDrain(this);const r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Promise.resolve(readableStreamCreateReadResult(r,!1,t))}const r=this[autoAllocateChunkSize_];if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(i){return Promise.reject(i)}const e={buffer:t,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this[pendingPullIntos_].push(e)}const n=readableStreamAddReadRequest(e,t);return readableByteStreamControllerCallPullIfNeeded(this),n}}function setUpReadableByteStreamControllerFromUnderlyingSource(t,e,r){const n=Object.create(ReadableByteStreamController.prototype),i=createAlgorithmFromUnderlyingMethod(e,"pull",[n]),o=createAlgorithmFromUnderlyingMethod(e,"cancel",[]);let s=e.autoAllocateChunkSize;if(void 0!==s&&(s=Number(s),!isInteger(s)||s<=0))throw new RangeError("autoAllocateChunkSize must be a positive, finite integer");setUpReadableByteStreamController(t,n,(()=>invokeOrNoop(e,"start",[n])),i,o,r,s)}class SDReadableStreamBYOBReader{constructor(t){if(!isReadableStream(t))throw new TypeError;if(!isReadableByteStreamController(t[readableStreamController_]))throw new TypeError;if(isReadableStreamLocked(t))throw new TypeError("The stream is locked.");readableStreamReaderGenericInitialize(this,t),this[readIntoRequests_]=[]}get closed(){return isReadableStreamBYOBReader(this)?this[closedPromise_].promise:Promise.reject(new TypeError)}cancel(t){if(!isReadableStreamBYOBReader(this))return Promise.reject(new TypeError);const e=this[ownerReadableStream_];return void 0===e?Promise.reject(new TypeError("Reader is not associated with a stream")):readableStreamCancel(e,t)}read(t){return isReadableStreamBYOBReader(this)?void 0===this[ownerReadableStream_]?Promise.reject(new TypeError("Reader is not associated with a stream")):ArrayBuffer.isView(t)?0===t.byteLength?Promise.reject(new TypeError("supplied buffer view must be > 0 bytes")):readableStreamBYOBReaderRead(this,t,!0):Promise.reject(new TypeError("view argument must be a valid ArrayBufferView")):Promise.reject(new TypeError)}releaseLock(){if(!isReadableStreamBYOBReader(this))throw new TypeError;if(void 0===this[ownerReadableStream_])throw new TypeError("Reader is not associated with a stream");if(this[readIntoRequests_].length>0)throw new TypeError;readableStreamReaderGenericRelease(this)}}class SDReadableStream{constructor(t={},e={}){initializeReadableStream(this);const r=e.size,n=e.highWaterMark,i=t.type;if(void 0===i){const e=makeSizeAlgorithmFromSizeFunction(r);setUpReadableStreamDefaultControllerFromUnderlyingSource(this,t,validateAndNormalizeHighWaterMark(void 0===n?1:n),e)}else{if("bytes"!==String(i))throw new RangeError("The underlying source's `type` field must be undefined or 'bytes'");if(void 0!==r)throw new RangeError("bytes streams cannot have a strategy with a `size` field");setUpReadableByteStreamControllerFromUnderlyingSource(this,t,validateAndNormalizeHighWaterMark(void 0===n?0:n))}}get locked(){return isReadableStreamLocked(this)}getReader(t){if(!isReadableStream(this))throw new TypeError;void 0===t&&(t={});const{mode:e}=t;if(void 0===e)return new ReadableStreamDefaultReader(this);if("byob"===String(e))return new SDReadableStreamBYOBReader(this);throw RangeError("mode option must be undefined or `byob`")}cancel(t){return isReadableStream(this)?isReadableStreamLocked(this)?Promise.reject(new TypeError("Cannot cancel a locked stream")):readableStreamCancel(this,t):Promise.reject(new TypeError)}tee(){return readableStreamTee(this,!1)}pipeThrough(t,e={}){const{readable:r,writable:n}=t;if(!isReadableStream(this))throw new TypeError;if(!isWritableStream(n))throw new TypeError("writable must be a WritableStream");if(!isReadableStream(r))throw new TypeError("readable must be a ReadableStream");if(void 0!==e.signal&&!isAbortSignal(e.signal))throw new TypeError("options.signal must be an AbortSignal instance");if(isReadableStreamLocked(this))throw new TypeError("Cannot pipeThrough on a locked stream");if(isWritableStreamLocked(n))throw new TypeError("Cannot pipeThrough to a locked stream");return pipeTo(this,n,e).catch((()=>{})),r}pipeTo(t,e={}){return isReadableStream(this)?isWritableStream(t)?void 0===e.signal||isAbortSignal(e.signal)?isReadableStreamLocked(this)?Promise.reject(new TypeError("Cannot pipe from a locked stream")):isWritableStreamLocked(t)?Promise.reject(new TypeError("Cannot pipe to a locked stream")):pipeTo(this,t,e):Promise.reject(new TypeError("options.signal must be an AbortSignal instance")):Promise.reject(new TypeError("destination must be a WritableStream")):Promise.reject(new TypeError)}}function createReadableStream(t,e,r,n,i){void 0===n&&(n=1),void 0===i&&(i=()=>1);const o=Object.create(SDReadableStream.prototype);return initializeReadableStream(o),setUpReadableStreamDefaultController(o,Object.create(ReadableStreamDefaultController.prototype),t,e,r,n,i),o}function readableStreamTee(t,e){if(!isReadableStream(t))throw new TypeError;const r=new ReadableStreamDefaultReader(t);let n,i,o,s,a,u=!1,c=!1,h=!1;const l=new Promise((t=>a=t)),f=()=>readableStreamDefaultReaderRead(r).then((({value:t,done:r})=>{if(r&&!u&&(c||readableStreamDefaultControllerClose(o[readableStreamController_]),h||readableStreamDefaultControllerClose(s[readableStreamController_]),u=!0),u)return;const n=t;let i=t;c||readableStreamDefaultControllerEnqueue(o[readableStreamController_],n),h||(e&&(i=cloneValue(i)),readableStreamDefaultControllerEnqueue(s[readableStreamController_],i))})),d=()=>{};return o=createReadableStream(d,f,(e=>{if(c=!0,n=e,h){const e=readableStreamCancel(t,[n,i]);a(e)}return l})),s=createReadableStream(d,f,(e=>{if(h=!0,i=e,c){const e=readableStreamCancel(t,[n,i]);a(e)}return l})),r[closedPromise_].promise.catch((t=>{u||(readableStreamDefaultControllerError(o[readableStreamController_],t),readableStreamDefaultControllerError(s[readableStreamController_],t),u=!0)})),[o,s]}class WritableStreamDefaultController{constructor(){throw new TypeError}error(t){if(!isWritableStreamDefaultController(this))throw new TypeError;"writable"===this[controlledWritableStream_][state_]&&writableStreamDefaultControllerError(this,t)}[abortSteps_](t){const e=this[abortAlgorithm_](t);return writableStreamDefaultControllerClearAlgorithms(this),e}[errorSteps_](){resetQueue(this)}}function setUpWritableStreamDefaultControllerFromUnderlyingSink(t,e,r,n){const i=Object.create(WritableStreamDefaultController.prototype),o=createAlgorithmFromUnderlyingMethod(e,"write",[i]),s=createAlgorithmFromUnderlyingMethod(e,"close",[]),a=createAlgorithmFromUnderlyingMethod(e,"abort",[]);setUpWritableStreamDefaultController(t,i,(function(){return invokeOrNoop(e,"start",[i])}),o,s,a,r,n)}class WritableStream{constructor(t={},e={}){initializeWritableStream(this);const r=e.size,n=e.highWaterMark;if(void 0!==t.type)throw new RangeError("The type of an underlying sink must be undefined");const i=makeSizeAlgorithmFromSizeFunction(r);setUpWritableStreamDefaultControllerFromUnderlyingSink(this,t,validateAndNormalizeHighWaterMark(void 0===n?1:n),i)}get locked(){if(!isWritableStream(this))throw new TypeError;return isWritableStreamLocked(this)}abort(t){return isWritableStream(this)?isWritableStreamLocked(this)?Promise.reject(new TypeError("Cannot abort a locked stream")):writableStreamAbort(this,t):Promise.reject(new TypeError)}getWriter(){if(!isWritableStream(this))throw new TypeError;return new WritableStreamDefaultWriter(this)}}function createWritableStream(t,e,r,n,i,o){void 0===i&&(i=1),void 0===o&&(o=()=>1);const s=Object.create(WritableStream.prototype);return initializeWritableStream(s),setUpWritableStreamDefaultController(s,Object.create(WritableStreamDefaultController.prototype),t,e,r,n,i,o),s}const backpressure_$1=Symbol("backpressure_"),backpressureChangePromise_=Symbol("backpressureChangePromise_"),readable_=Symbol("readable_"),transformStreamController_=Symbol("transformStreamController_"),writable_=Symbol("writable_"),controlledTransformStream_=Symbol("controlledTransformStream_"),flushAlgorithm_=Symbol("flushAlgorithm_"),transformAlgorithm_=Symbol("transformAlgorithm_");function isTransformStream(t){return"object"==typeof t&&null!==t&&transformStreamController_ in t}function initializeTransformStream(t,e,r,n,i,o){const s=function(){return e};t[writable_]=createWritableStream(s,(function(e){return transformStreamDefaultSinkWriteAlgorithm(t,e)}),(function(){return transformStreamDefaultSinkCloseAlgorithm(t)}),(function(e){return transformStreamDefaultSinkAbortAlgorithm(t,e)}),r,n),t[readable_]=createReadableStream(s,(function(){return transformStreamDefaultSourcePullAlgorithm(t)}),(function(e){return transformStreamErrorWritableAndUnblockWrite(t,e),Promise.resolve(void 0)}),i,o),t[backpressure_$1]=void 0,t[backpressureChangePromise_]=void 0,transformStreamSetBackpressure(t,!0),t[transformStreamController_]=void 0}function transformStreamError(t,e){readableStreamDefaultControllerError(t[readable_][readableStreamController_],e),transformStreamErrorWritableAndUnblockWrite(t,e)}function transformStreamErrorWritableAndUnblockWrite(t,e){transformStreamDefaultControllerClearAlgorithms(t[transformStreamController_]),writableStreamDefaultControllerErrorIfNeeded(t[writable_][writableStreamController_],e),t[backpressure_$1]&&transformStreamSetBackpressure(t,!1)}function transformStreamSetBackpressure(t,e){void 0!==t[backpressure_$1]&&t[backpressureChangePromise_].resolve(void 0),t[backpressureChangePromise_]=createControlledPromise(),t[backpressure_$1]=e}function isTransformStreamDefaultController(t){return"object"==typeof t&&null!==t&&controlledTransformStream_ in t}function setUpTransformStreamDefaultController(t,e,r,n){e[controlledTransformStream_]=t,t[transformStreamController_]=e,e[transformAlgorithm_]=r,e[flushAlgorithm_]=n}function transformStreamDefaultControllerClearAlgorithms(t){t[transformAlgorithm_]=void 0,t[flushAlgorithm_]=void 0}function transformStreamDefaultControllerEnqueue(t,e){const r=t[controlledTransformStream_],n=r[readable_][readableStreamController_];if(!readableStreamDefaultControllerCanCloseOrEnqueue(n))throw new TypeError;try{readableStreamDefaultControllerEnqueue(n,e)}catch(i){throw transformStreamErrorWritableAndUnblockWrite(r,i),r[readable_][storedError_]}readableStreamDefaultControllerHasBackpressure(n)!==r[backpressure_$1]&&transformStreamSetBackpressure(r,!0)}function transformStreamDefaultControllerError(t,e){transformStreamError(t[controlledTransformStream_],e)}function transformStreamDefaultControllerPerformTransform(t,e){return t[transformAlgorithm_](e).catch((e=>{throw transformStreamError(t[controlledTransformStream_],e),e}))}function transformStreamDefaultControllerTerminate(t){const e=t[controlledTransformStream_],r=e[readable_][readableStreamController_];readableStreamDefaultControllerCanCloseOrEnqueue(r)&&readableStreamDefaultControllerClose(r),transformStreamErrorWritableAndUnblockWrite(e,new TypeError("The transform stream has been terminated"))}function transformStreamDefaultSinkWriteAlgorithm(t,e){const r=t[transformStreamController_];return t[backpressure_$1]?t[backpressureChangePromise_].promise.then((n=>{const i=t[writable_];if("erroring"===i[state_])throw i[storedError_];return transformStreamDefaultControllerPerformTransform(r,e)})):transformStreamDefaultControllerPerformTransform(r,e)}function transformStreamDefaultSinkAbortAlgorithm(t,e){return transformStreamError(t,e),Promise.resolve(void 0)}function transformStreamDefaultSinkCloseAlgorithm(t){const e=t[readable_],r=t[transformStreamController_],n=r[flushAlgorithm_]();return transformStreamDefaultControllerClearAlgorithms(r),n.then((t=>{if("errored"===e[state_])throw e[storedError_];const r=e[readableStreamController_];readableStreamDefaultControllerCanCloseOrEnqueue(r)&&readableStreamDefaultControllerClose(r)}),(r=>{throw transformStreamError(t,r),e[storedError_]}))}function transformStreamDefaultSourcePullAlgorithm(t){return transformStreamSetBackpressure(t,!1),t[backpressureChangePromise_].promise}class TransformStreamDefaultController{constructor(){throw new TypeError}get desiredSize(){if(!isTransformStreamDefaultController(this))throw new TypeError;return readableStreamDefaultControllerGetDesiredSize(this[controlledTransformStream_][readable_][readableStreamController_])}enqueue(t){if(!isTransformStreamDefaultController(this))throw new TypeError;transformStreamDefaultControllerEnqueue(this,t)}error(t){if(!isTransformStreamDefaultController(this))throw new TypeError;transformStreamDefaultControllerError(this,t)}terminate(){if(!isTransformStreamDefaultController(this))throw new TypeError;transformStreamDefaultControllerTerminate(this)}}class TransformStream$1{constructor(t={},e={},r={}){const n=e.size,i=e.highWaterMark,o=r.size,s=r.highWaterMark;if(void 0!==t.writableType)throw new RangeError("The transformer's `writableType` field must be undefined");const a=makeSizeAlgorithmFromSizeFunction(n),u=validateAndNormalizeHighWaterMark(void 0===i?1:i);if(void 0!==t.readableType)throw new RangeError("The transformer's `readableType` field must be undefined");const c=makeSizeAlgorithmFromSizeFunction(o),h=validateAndNormalizeHighWaterMark(void 0===s?0:s),l=createControlledPromise();initializeTransformStream(this,l.promise,u,a,h,c),setUpTransformStreamDefaultControllerFromTransformer(this,t);const f=invokeOrNoop(t,"start",[this[transformStreamController_]]);l.resolve(f)}get readable(){if(!isTransformStream(this))throw new TypeError;return this[readable_]}get writable(){if(!isTransformStream(this))throw new TypeError;return this[writable_]}}function setUpTransformStreamDefaultControllerFromTransformer(t,e){const r=Object.create(TransformStreamDefaultController.prototype);let n;const i=e.transform;if(void 0!==i){if("function"!=typeof i)throw new TypeError("`transform` field of the transformer must be a function");n=t=>promiseCall(i,e,[t,r])}else n=function(t){try{transformStreamDefaultControllerEnqueue(r,t)}catch(e){return Promise.reject(e)}return Promise.resolve(void 0)};const o=createAlgorithmFromUnderlyingMethod(e,"flush",[r]);setUpTransformStreamDefaultController(t,r,n,o)}class ByteLengthQueuingStrategy{constructor(t){this.highWaterMark=t.highWaterMark}size(t){return t.byteLength}}class CountQueuingStrategy{constructor(t){this.highWaterMark=t.highWaterMark}size(){return 1}}function wrapReadableStream(t,e){let r;return new e({start(e){r=t.getReader(),r.closed.catch((t=>{e.error(t)}))},pull:t=>r.read().then((({value:e,done:r})=>{r?t.close():t.enqueue(e)}),(e=>{t.error(e)})),cancel(t){r.cancel(t)}})}function getMIMETypeFromHeadersInit(t){const e="Content-Type";if(void 0===t)return"";if(t instanceof Headers)return t.get(e)||"";if(Array.isArray(t)){const r=t.find((t=>Array.isArray(t)&&2===t.length&&t[0]===e));return r?r[1]:""}return t[e]||""}function resolveRequestInitStream(t,e,r){if(void 0===t)return Promise.resolve(t);const n=t.body;let i;if(n&&"object"==typeof n&&(e&&n instanceof e||n instanceof r)&&(i=n),!i)return Promise.resolve(t);const o=getMIMETypeFromHeadersInit(t.headers);return readAllBytesFromStream(i.getReader(),o).then((e=>(t.body=e,t)))}function createAdaptedFetch(t,e,r,n,i){return function(o,s){return resolveRequestInitStream(s,r,n).then((r=>t.call(void 0,o,r).then((t=>{if("body"in t){const r=t;let o,a;t=new Proxy(r,{get(u,c,h){let l;return"body"===c?(void 0===o&&(o=wrapReadableStream(r.body,n)),l=o):"clone"===c?(void 0===a&&(a=function(){const[r,n]=i(t.body,!0);return o=r,createResponseProxyWithStreamBody(e,i,n,s)}),l=a):l=u[c],"function"==typeof l?function(...t){return l.apply(u,t)}:l}})}else t.body=new n({pull:e=>t.arrayBuffer().then((t=>{e.enqueue(new Uint8Array(t)),e.close()}),(t=>{e.error(t)}))}),t.clone=function(){const[r,n]=i(t.body,!0);return t.body=r,createResponseProxyWithStreamBody(e,i,n,s)};return t}))))}}function readAllBytesFromStream(t,e){return new Promise(((r,n)=>{const i=[];!function o(){t.read().then((({value:t,done:s})=>{s?function(){0===i.length&&i.push(new Uint8Array(0));const t=new Blob(i,{type:e});r(t)}():t instanceof Uint8Array?(i.push(t),o()):n(new TypeError("A ReadableStream body must only yield Uint8Array values"))}),(t=>{n(t)}))}()}))}function createResponseProxyWithStreamBody(t,e,r,n){const i=new t("fake",n),o=getMIMETypeFromHeadersInit(i.headers);let s,a=!1;function u(){return void 0===s&&(s=new Promise(((e,i)=>{if(a=!0,r.locked)return i(new TypeError("The ReadableStream is locked"));readAllBytesFromStream(r.getReader(),o).then((r=>{e(new t(r,n))})).catch((t=>{i(t)}))}))),s}return new class{get type(){return i.type}get url(){return i.url}get redirected(){return i.redirected}get status(){return i.status}get ok(){return i.ok}get statusText(){return i.statusText}get headers(){return i.headers}clone(){const[i,o]=e(r,!0);return r=i,createResponseProxyWithStreamBody(t,e,o,n)}get body(){return r}get bodyUsed(){return a}arrayBuffer(){return u().then((t=>t.arrayBuffer()))}blob(){return u().then((t=>t.blob()))}formData(){return u().then((t=>t.formData()))}json(){return u().then((t=>t.json()))}text(){return u().then((t=>t.text()))}}}function createAdaptedResponse(t,e,r,n){const i=function(i,o){if(i instanceof r){if(void 0===e||!("body"in t))return createResponseProxyWithStreamBody(t,n,i,o);i=wrapReadableStream(i,e)}return new t(i,o)};return i.prototype=t.prototype,i}const decDecoder=Symbol("decDecoder"),decTransform=Symbol("decTransform");class TextDecodeTransformer{constructor(t){this.decoder_=t}transform(t,e){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new TypeError("Input data must be a BufferSource");const r=this.decoder_.decode(t,{stream:!0});0!==r.length&&e.enqueue(r)}flush(t){const e=this.decoder_.decode();0!==e.length&&t.enqueue(e)}}class TextDecoderStream{constructor(t,e){this[decDecoder]=new TextDecoder(t,e),this[decTransform]=new TransformStream(new TextDecodeTransformer(this[decDecoder]))}get encoding(){return this[decDecoder].encoding}get fatal(){return this[decDecoder].fatal}get ignoreBOM(){return this[decDecoder].ignoreBOM}get readable(){return this[decTransform].readable}get writable(){return this[decTransform].writable}}const encEncoder=Symbol("encEncoder"),encTransform=Symbol("encTransform");class TextEncodeTransformer{constructor(t){this.encoder_=t,this.partial_=void 0}transform(t,e){let r=String(t);void 0!==this.partial_&&(r=this.partial_+r,this.partial_=void 0);const n=r.length-1,i=r.charCodeAt(n);i>=55296&&i<56320&&(this.partial_=String.fromCharCode(i),r=r.substring(0,n));const o=this.encoder_.encode(r);0!==o.length&&e.enqueue(o)}flush(t){this.partial_&&(t.enqueue(this.encoder_.encode(this.partial_)),this.partial_=void 0)}}class TextEncoderStream{constructor(){this[encEncoder]=new TextEncoder,this[encTransform]=new TransformStream(new TextEncodeTransformer(this[encEncoder]))}get encoding(){return this[encEncoder].encoding}get readable(){return this[encTransform].readable}get writable(){return this[encTransform].writable}}const PRESET_DICT=32,Z_DEFLATED=8,GZIP_ID1=31,GZIP_ID2=139,inflate_mask=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],swap32=t=>(t>>>24&255|t>>>8&65280|(65280&t)<<8|(255&t)<<24)>>>0;function u8ArrayFromBufferSource(t){return t instanceof ArrayBuffer?new Uint8Array(t):ArrayBuffer.isView(t)?t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength):void 0}function adler32(t,e=1){const r=u8ArrayFromBufferSource(t);if(!r)throw new TypeError("source must be a BufferSource");return computeAdler32(r,e)}const BASE=65521,NMAX=5552;function computeAdler32(t,e=1){let r=e>>>16&65535;e&=65535;let n=t.length,i=0;for(;n>=NMAX;){n-=NMAX;let o=NMAX/16;do{r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++]}while(--o);e%=BASE,r+=BASE}if(n){for(;n>=16;)n-=16,r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++],r+=e+=t[i++];for(;n--;)r+=e+=t[i++];e%=BASE,r%=BASE}return e|r<<16}function crc32(t,e=0){const r=u8ArrayFromBufferSource(t);if(!r)throw new TypeError("source must be a BufferSource");return computeCRC32(r,e)}const endian=new Uint32Array([1]),endianCheck=new Uint8Array(endian.buffer,0,1)[0],computeCRC32=1===endianCheck?computeCRC32Little:computeCRC32Big;function computeCRC32Little(t,e=0){let r=~e,n=t.byteOffset,i=0,o=t.byteLength;const s=crcTables[0],a=crcTables[1],u=crcTables[2],c=crcTables[3];for(;o&&3&n;)r=s[255&(r^t[i++])]^r>>>8,o--,n++;const h=new Uint32Array(t.buffer,n,o>>>2);let l=0;for(;o>=32;)r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],o-=32;for(;o>=4;)r^=h[l++],r=c[255&r]^u[r>>>8&255]^a[r>>>16&255]^s[r>>>24],o-=4;if(o){i+=4*l;do{r=s[255&(r^t[i++])]^r>>>8}while(--o)}return r=~r,r}function computeCRC32Big(t,e=0){let r=~swap32(e),n=t.byteOffset,i=0,o=t.byteLength;const s=crcTables[4],a=crcTables[5],u=crcTables[6],c=crcTables[7];for(;o&&3&n;)r=s[r>>>24^t[i++]]^r<<8,o--,n++;const h=new Uint32Array(t.buffer,n,o>>>2);let l=0;for(;o>=32;)r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],o-=32;for(;o>=4;)r^=h[l++],r=s[255&r]^a[r>>>8&255]^u[r>>>16&255]^c[r>>>24],o-=4;if(o){i+=4*l;do{r=s[r>>>24^t[i++]]^r<<8}while(--o)}return r=~r,swap32(r)}function makeCRCTables(){const t=new ArrayBuffer(8192),e=[new Uint32Array(t,0,256),new Uint32Array(t,1024,256),new Uint32Array(t,2048,256),new Uint32Array(t,3072,256),new Uint32Array(t,4096,256),new Uint32Array(t,5120,256),new Uint32Array(t,6144,256),new Uint32Array(t,7168,256)];for(let r=0;r<256;r++){let t=r;for(let e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;e[0][r]=t,e[4][r]=swap32(t)}for(let r=0;r<256;r++){let t=e[0][r];for(let n=1;n<4;n++)t=e[0][255&t]^t>>>8,e[n][r]=t,e[n+4][r]=swap32(t)}return e}const crcTables=makeCRCTables(),OUTPUT_BUFSIZE=16384;class ZStream{constructor(){this.avail_in=0,this.next_in_index=0,this.next_out=new Uint8Array(OUTPUT_BUFSIZE),this.avail_out=this.next_out.byteLength,this.next_out_index=0,this.total_in=this.total_out=0,this.msg=""}append(t){this.next_in=t,this.avail_in=t.length,this.next_in_index=0}read_buf(t,e){return this.next_in.subarray(t,t+e)}read_into_buf(t,e,r){let n=this.avail_in;return n>r&&(n=r),0===n?0:(t.set(this.next_in.subarray(this.next_in_index,this.next_in_index+n),e),this.avail_in-=n,this.next_in_index+=n,this.total_in+=n,n)}flush_pending(t){var e=t.pending;e>this.avail_out&&(e=this.avail_out),0!==e&&(this.next_out.set(t.pending_buf.subarray(t.pending_out,t.pending_out+e),this.next_out_index),this.next_out_index+=e,t.pending_out+=e,this.total_out+=e,this.avail_out-=e,t.pending-=e,0===t.pending&&(t.pending_out=0))}}function InfCodes(){let t,e,r,n,i=0,o=0,s=0,a=0,u=0,c=0,h=0,l=0,f=0,d=0;function p(t,e,r,n,i,o,s,a){let u,c,h,l,f,d,p,y,g,m,b,w,v,_,E,S;p=a.next_in_index,y=a.avail_in,f=s.bitb,d=s.bitk,g=s.write,m=g<s.read?s.read-g-1:s.end-g,b=inflate_mask[t],w=inflate_mask[e];do{for(;d<20;)y--,f|=(255&a.next_in[p++])<<d,d+=8;if(u=f&b,c=r,h=n,S=3*(h+u),l=c[S],0!==l)for(;;){if(f>>=c[S+1],d-=c[S+1],0!=(16&l)){for(l&=15,v=c[S+2]+(f&inflate_mask[l]),f>>=l,d-=l;d<15;)y--,f|=(255&a.next_in[p++])<<d,d+=8;for(u=f&w,c=i,h=o,S=3*(h+u),l=c[S];;){if(f>>=c[S+1],d-=c[S+1],0!=(16&l)){for(l&=15;d<l;)y--,f|=(255&a.next_in[p++])<<d,d+=8;if(_=c[S+2]+(f&inflate_mask[l]),f>>=l,d-=l,m-=v,g>=_)E=g-_,s.window[g++]=s.window[E++],s.window[g++]=s.window[E++],v-=2;else{E=g-_;do{E+=s.end}while(E<0);if(l=s.end-E,v>l){v-=l;do{s.window[g++]=s.window[E++]}while(0!=--l);E=0}}do{s.window[g++]=s.window[E++]}while(0!=--v);break}if(0!=(64&l))return a.msg="invalid distance code",v=a.avail_in-y,v=d>>3<v?d>>3:v,y+=v,p-=v,d-=v<<3,s.bitb=f,s.bitk=d,a.avail_in=y,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=g,-3;u+=c[S+2],u+=f&inflate_mask[l],S=3*(h+u),l=c[S]}break}if(0!=(64&l))return 0!=(32&l)?(v=a.avail_in-y,v=d>>3<v?d>>3:v,y+=v,p-=v,d-=v<<3,s.bitb=f,s.bitk=d,a.avail_in=y,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=g,1):(a.msg="invalid literal/length code",v=a.avail_in-y,v=d>>3<v?d>>3:v,y+=v,p-=v,d-=v<<3,s.bitb=f,s.bitk=d,a.avail_in=y,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=g,-3);if(u+=c[S+2],u+=f&inflate_mask[l],S=3*(h+u),l=c[S],0===l){f>>=c[S+1],d-=c[S+1],s.window[g++]=c[S+2],m--;break}}else f>>=c[S+1],d-=c[S+1],s.window[g++]=c[S+2],m--}while(m>=258&&y>=10);return v=a.avail_in-y,v=d>>3<v?d>>3:v,y+=v,p-=v,d-=v<<3,s.bitb=f,s.bitk=d,a.avail_in=y,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=g,0}return{init:function(e,i,o,s,a,u){t=0,h=e,l=i,r=o,f=s,n=a,d=u},proc:function(y,g,m){let b,w,v,_,E,S,A,I=0,T=0,R=0;for(R=g.next_in_index,_=g.avail_in,I=y.bitb,T=y.bitk,E=y.write,S=E<y.read?y.read-E-1:y.end-E;;)switch(t){case 0:if(S>=258&&_>=10&&(y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,m=p(h,l,r,f,n,d,y,g),R=g.next_in_index,_=g.avail_in,I=y.bitb,T=y.bitk,E=y.write,S=E<y.read?y.read-E-1:y.end-E,0!==m)){t=1===m?7:9;break}s=h,e=r,o=f,t=1;case 1:for(b=s;T<b;){if(0===_)return y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);m=0,_--,I|=(255&g.next_in[R++])<<T,T+=8}if(w=3*(o+(I&inflate_mask[b])),I>>>=e[w+1],T-=e[w+1],v=e[w],0===v){a=e[w+2],t=6;break}if(0!=(16&v)){u=15&v,i=e[w+2],t=2;break}if(0==(64&v)){s=v,o=w/3+e[w+2];break}if(0!=(32&v)){t=7;break}return t=9,g.msg="invalid literal/length code",m=-3,y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);case 2:for(b=u;T<b;){if(0===_)return y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);m=0,_--,I|=(255&g.next_in[R++])<<T,T+=8}i+=I&inflate_mask[b],I>>=b,T-=b,s=l,e=n,o=d,t=3;case 3:for(b=s;T<b;){if(0===_)return y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);m=0,_--,I|=(255&g.next_in[R++])<<T,T+=8}if(w=3*(o+(I&inflate_mask[b])),I>>=e[w+1],T-=e[w+1],v=e[w],0!=(16&v)){u=15&v,c=e[w+2],t=4;break}if(0==(64&v)){s=v,o=w/3+e[w+2];break}return t=9,g.msg="invalid distance code",m=-3,y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);case 4:for(b=u;T<b;){if(0===_)return y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);m=0,_--,I|=(255&g.next_in[R++])<<T,T+=8}c+=I&inflate_mask[b],I>>=b,T-=b,t=5;case 5:for(A=E-c;A<0;)A+=y.end;for(;0!==i;){if(0===S&&(E===y.end&&0!==y.read&&(E=0,S=E<y.read?y.read-E-1:y.end-E),0===S&&(y.write=E,m=y.inflate_flush(g,m),E=y.write,S=E<y.read?y.read-E-1:y.end-E,E===y.end&&0!==y.read&&(E=0,S=E<y.read?y.read-E-1:y.end-E),0===S)))return y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);y.window[E++]=y.window[A++],S--,A===y.end&&(A=0),i--}t=0;break;case 6:if(0===S&&(E===y.end&&0!==y.read&&(E=0,S=E<y.read?y.read-E-1:y.end-E),0===S&&(y.write=E,m=y.inflate_flush(g,m),E=y.write,S=E<y.read?y.read-E-1:y.end-E,E===y.end&&0!==y.read&&(E=0,S=E<y.read?y.read-E-1:y.end-E),0===S)))return y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);m=0,y.window[E++]=a,S--,t=0;break;case 7:if(T>7&&(T-=8,_++,R--),y.write=E,m=y.inflate_flush(g,m),E=y.write,S=E<y.read?y.read-E-1:y.end-E,y.read!==y.write)return y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);t=8;case 8:return m=1,y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);case 9:return m=-3,y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m);default:return m=-2,y.bitb=I,y.bitk=T,g.avail_in=_,g.total_in+=R-g.next_in_index,g.next_in_index=R,y.write=E,y.inflate_flush(g,m)}}}}const fixed_bl=9,fixed_bd=5,fixed_tl=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],fixed_td=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],BMAX=15;let v;const hn=[0],c=new Int32Array(BMAX+1),r=new Int32Array(3),u=new Int32Array(BMAX),x=new Int32Array(BMAX+1);function huft_build(t,e,n,i,o,s,a,h,l,f,d){let p,y,g,m,b,w,v,_,E,S,A,I,T,R,M;S=0,b=n;do{c[t[e+S]]++,S++,b--}while(0!==b);if(c[0]===n)return a[0]=-1,h[0]=0,0;for(_=h[0],w=1;w<=BMAX&&0===c[w];w++);for(v=w,_<w&&(_=w),b=BMAX;0!==b&&0===c[b];b--);for(g=b,_>b&&(_=b),h[0]=_,R=1<<w;w<b;w++,R<<=1)if(R-=c[w],R<0)return-3;if(R-=c[b],R<0)return-3;for(c[b]+=R,x[1]=w=0,S=1,T=2;0!=--b;)x[T]=w+=c[S],T++,S++;b=0,S=0;do{w=t[e+S],0!==w&&(d[x[w]++]=b),S++}while(++b<n);for(n=x[g],x[0]=b=0,S=0,m=-1,I=-_,u[0]=0,A=0,M=0;v<=g;v++)for(p=c[v];0!=p--;){for(;v>I+_;){if(m++,I+=_,M=g-I,M=M>_?_:M,y=1<<(w=v-I),y>p+1&&(y-=p+1,T=v,w<M))for(;++w<M&&(y<<=1,!(y<=c[++T]));)y-=c[T];if(M=1<<w,f[0]+M>1400)return-3;u[m]=A=f[0],f[0]+=M,0!==m?(x[m]=b,r[0]=w,r[1]=_,w=b>>>I-_,r[2]=A-u[m-1]-w,l.set(r,3*(u[m-1]+w))):a[0]=A}for(r[1]=v-I,S>=n?r[0]=192:d[S]<i?(r[0]=d[S]<256?0:96,r[2]=d[S++]):(r[0]=s[d[S]-i]+16+64,r[2]=o[d[S++]-i]),y=1<<v-I,w=b>>>I;w<M;w+=y)l.set(r,3*(A+w));for(w=1<<v-1;0!=(b&w);w>>>=1)b^=w;for(b^=w,E=(1<<I)-1;(b&E)!==x[m];)m--,I-=_,E=(1<<I)-1}return 0!==R&&1!==g?-5:0}function initWorkArea(t){v=new Int32Array(t);for(let e=0;e<BMAX+1;e++)c[e]=0,u[e]=0,x[e]=0;for(let e=0;e<3;e++)r[e]=0}function inflate_trees_bits(t,e,r,n,i){initWorkArea(19),hn[0]=0;let o=huft_build(t,0,19,19,null,null,r,e,n,hn,v);return-3===o?i.msg="oversubscribed dynamic bit lengths tree":-5!==o&&0!==e[0]||(i.msg="incomplete dynamic bit lengths tree",o=-3),o}function inflate_trees_dynamic(t,e,r,n,i,o,s,a,u){initWorkArea(288),hn[0]=0;let c=huft_build(r,0,t,257,cplens,cplext,o,n,a,hn,v);return 0!==c||0===n[0]?(-3===c?u.msg="oversubscribed literal/length tree":(u.msg="incomplete literal/length tree",c=-3),c):(initWorkArea(288),c=huft_build(r,t,e,0,cpdist,cpdext,s,i,a,hn,v),0!==c||0===i[0]&&t>257?(-3===c?u.msg="oversubscribed distance tree":-5===c?(u.msg="incomplete distance tree",c=-3):(u.msg="empty distance tree with lengths",c=-3),c):0)}function inflate_trees_fixed(t,e,r,n){return t[0]=fixed_bl,e[0]=fixed_bd,r[0]=fixed_tl,n[0]=fixed_td,0}const border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];class InfBlocks{constructor(t){this.codes=InfCodes(),this.hufts=new Int32Array(4200),this.mode=0,this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.last=0,this.end=t,this.window=new Uint8Array(t)}reset(){this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.last=0}inflate_flush(t,e){let r,n,i;return n=t.next_out_index,i=this.read,r=(i<=this.write?this.write:this.end)-i,r>t.avail_out&&(r=t.avail_out),0!==r&&-5===e&&(e=0),t.avail_out-=r,t.total_out+=r,t.next_out.set(this.window.subarray(i,i+r),n),n+=r,i+=r,i===this.end&&(i=0,this.write===this.end&&(this.write=0),r=this.write-i,r>t.avail_out&&(r=t.avail_out),0!==r&&-5===e&&(e=0),t.avail_out-=r,t.total_out+=r,t.next_out.set(this.window.subarray(i,i+r),n),n+=r,i+=r),t.next_out_index=n,this.read=i,e}proc(t,e){let r,n,i,o,s,a,u,c,h=0,l=0,f=0;const d=new Uint8Array(320),p=[0],y=[0],g=this.codes,m=this.hufts;for(o=t.next_in_index,s=t.avail_in,n=this.bitb,i=this.bitk,a=this.write,u=a<this.read?this.read-a-1:this.end-a;;)switch(this.mode){case 0:if(this.last)return 1;for(;i<3;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}switch(r=7&n,this.last=1&r,r>>>1){case 0:n>>>=3,i-=3,r=7&i,n>>>=r,i-=r,this.mode=1;break;case 1:const u=[0],c=[0],h=[[]],l=[[]];inflate_trees_fixed(u,c,h,l),g.init(u[0],c[0],h[0],0,l[0],0),n>>>=3,i-=3,this.mode=6;break;case 2:n>>>=3,i-=3,this.mode=3;break;case 3:return n>>>=3,i-=3,this.mode=9,t.msg="invalid block type",e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e)}break;case 1:for(;i<32;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}if((~n>>>16&65535)!=(65535&n))return this.mode=9,t.msg="invalid stored block lengths",e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);h=65535&n,n=i=0,this.mode=0!==h?2:0!==this.last?7:0;break;case 2:if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);if(0===u&&(a===this.end&&0!==this.read&&(a=0,u=a<this.read?this.read-a-1:this.end-a),0===u&&(this.write=a,e=this.inflate_flush(t,e),a=this.write,u=a<this.read?this.read-a-1:this.end-a,a===this.end&&0!==this.read&&(a=0,u=a<this.read?this.read-a-1:this.end-a),0===u)))return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);if(e=0,r=h,r>s&&(r=s),r>u&&(r=u),this.window.set(t.read_buf(o,r),a),o+=r,s-=r,a+=r,u-=r,h-=r,0!==h)break;this.mode=0!==this.last?7:0;break;case 3:for(;i<14;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}if(l=r=16383&n,(31&r)>29||(r>>5&31)>29)return this.mode=9,t.msg="too many length or distance symbols",e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);for(r=258+(31&r)+(r>>5&31),c=0;c<r;c++)d[c]=0;for(n>>>=14,i-=14,f=0,this.mode=4;f<4+(l>>>10);){for(;i<3;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}d[border[f++]]=7&n,n>>>=3,i-=3}for(;f<19;)d[border[f++]]=0;if(p[0]=7,r=inflate_trees_bits(d,p,y,m,t),0!==r)return-3===(e=r)&&(this.mode=9),this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);for(f=0,this.mode=5;r=l,!(f>=258+(31&r)+(r>>5&31));){let u,h;for(r=p[0];i<r;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}if(r=m[3*(y[0]+(n&inflate_mask[r]))+1],h=m[3*(y[0]+(n&inflate_mask[r]))+2],h<16)n>>>=r,i-=r,d[f++]=h;else{for(c=18===h?7:h-14,u=18===h?11:3;i<r+c;){if(0===s)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);e=0,s--,n|=(255&t.next_in[o++])<<i,i+=8}if(n>>>=r,i-=r,u+=n&inflate_mask[c],n>>>=c,i-=c,c=f,r=l,c+u>258+(31&r)+(r>>5&31)||16===h&&c<1)return this.mode=9,t.msg="invalid bit length repeat",e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);h=16===h?d[c-1]:0;do{d[c++]=h}while(0!=--u);f=c}}y[0]=-1;const b=[9],w=[6],v=[0],_=[0];if(r=inflate_trees_dynamic(257+(31&r),1+(r>>5&31),d,b,w,v,_,m,t),0!==r)return-3===r&&(this.mode=9),e=r,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);g.init(b[0],w[0],m,v[0],m,_[0]),this.mode=6;case 6:if(this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,1!==(e=g.proc(this,t,e)))return this.inflate_flush(t,e);if(e=0,o=t.next_in_index,s=t.avail_in,n=this.bitb,i=this.bitk,a=this.write,u=a<this.read?this.read-a-1:this.end-a,0===this.last){this.mode=0;break}this.mode=7;case 7:if(this.write=a,e=this.inflate_flush(t,e),a=this.write,u=a<this.read?this.read-a-1:this.end-a,this.read!==this.write)return this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);this.mode=8;case 8:return e=1,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);case 9:return e=-3,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e);default:return e=-2,this.bitb=n,this.bitk=i,t.avail_in=s,t.total_in+=o-t.next_in_index,t.next_in_index=o,this.write=a,this.inflate_flush(t,e)}}set_dictionary(t,e,r){this.window.set(t.subarray(e,e+r),0),this.read=this.write=r}}class Inflate{constructor(t){this.isGZip=!1,this.method=0,this.gflags=0,this.name="",this.mtime=0,this.xlen=0,this.dictChecksum=0,this.fullChecksum=0,this.inflatedSize=0,this.wbits=0,this.wbits=15,this.blocks=new InfBlocks(1<<this.wbits),this.mode=t?22:0}get isComplete(){const{blocks:t}=this,e=(0===t.mode||8===t.mode)&&0===t.bitb&&0===t.bitk;return 31===this.mode&&e}get fileName(){return this.name}get modDate(){if(0!==this.mtime)return new Date(1e3*this.mtime)}get checksum(){return this.fullChecksum}get fullSize(){return this.inflatedSize}get containerFormat(){return this.isGZip?2:0===this.method?0:1}inflate(t){let e;if(!t||!t.next_in)return-2;let r=-5;for(;;)switch(this.mode){case 0:if(0===t.avail_in)return r;if(e=t.next_in[t.next_in_index],e!==GZIP_ID1){this.mode=2;break}this.mode=1,r=0,t.avail_in--,t.total_in++,t.next_in_index++;case 1:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,e=t.next_in[t.next_in_index++],e!==GZIP_ID2){this.mode=32,t.msg="invalid gzip id";break}this.isGZip=!0,this.mode=2;case 2:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,this.method=t.next_in[t.next_in_index++],(15&this.method)!==Z_DEFLATED){this.mode=32,t.msg="unknown compression method";break}if(8+(this.method>>4)>this.wbits){this.mode=32,t.msg="invalid window size";break}this.mode=3;case 3:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.isGZip){this.gflags=e,this.mode=9;break}if(((this.method<<8)+e)%31!=0){this.mode=32,t.msg="incorrect header check";break}if(0==(e&PRESET_DICT)){this.mode=22;break}this.mode=4;case 4:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,this.dictChecksum=(255&t.next_in[t.next_in_index++])<<24&4278190080,this.mode=5;case 5:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,this.dictChecksum|=(255&t.next_in[t.next_in_index++])<<16&16711680,this.mode=6;case 6:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,this.dictChecksum|=(255&t.next_in[t.next_in_index++])<<8&65280,this.mode=7;case 7:return 0===t.avail_in?r:(r=0,t.avail_in--,t.total_in++,this.dictChecksum|=255&t.next_in[t.next_in_index++],this.mode=8,2);case 8:return this.mode=32,t.msg="need dictionary",-2;case 9:case 10:case 11:case 12:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.mtime=this.mtime>>>8|e<<24,12!==this.mode){this.mode++;break}this.mode=13;case 13:case 14:case 20:case 21:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,t.next_in_index++,14===this.mode?4&this.gflags?this.mode=15:8&this.gflags?this.mode=18:16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22:this.mode++;break;case 15:case 16:if(0===t.avail_in)return r;if(r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.xlen=this.xlen>>>8|e<<24,15===this.mode)break;this.xlen=this.xlen>>>16;case 17:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,t.next_in_index++,this.xlen--,0===this.xlen&&(8&this.gflags?this.mode=18:16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22);break;case 18:case 19:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],0!==e?18===this.mode&&(this.name+=String.fromCharCode(e)):19!==this.mode&&16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22;break;case 22:if(r=this.blocks.proc(t,r),-3===r){this.mode=32;break}if(1!==r)return r;if(r=0,this.blocks.reset(),0===this.method){this.mode=31;break}this.mode=23;case 23:case 24:case 25:case 26:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.isGZip?this.fullChecksum=this.fullChecksum>>>8|e<<24:this.fullChecksum=this.fullChecksum<<8|e,this.mode++,27!==this.mode||this.isGZip||(this.mode=31);break;case 27:case 28:case 29:case 30:if(0===t.avail_in)return r;r=0,t.avail_in--,t.total_in++,e=255&t.next_in[t.next_in_index++],this.inflatedSize=this.inflatedSize>>>8|e<<24,this.mode++;break;case 31:return 1;case 32:return-3;default:return-2}}inflateSetDictionary(t){if(8!==this.mode)return-2;const e=u8ArrayFromBufferSource(t);if(!e)return-3;let r=0,n=e.byteLength;return n>=1<<this.wbits&&(n=(1<<this.wbits)-1,r=e.byteLength-n),adler32(e)!==this.dictChecksum?-3:(this.blocks.set_dictionary(e,r,n),this.mode=22,0)}}class Inflater{constructor(t){const e=null==t?void 0:t.raw;if(void 0!==e&&!0!==e&&!1!==e)throw new TypeError("options.raw must be undefined or true or false");const r=void 0!==e&&e,n=null==t?void 0:t.dictionary;if(void 0!==n){if(r)throw new RangeError("options.dictionary cannot be set when options.raw is true");if(void 0===u8ArrayFromBufferSource(n))throw new TypeError("options.dictionary must be undefined or a buffer or a buffer view");this.customDict=n}this.inflate=new Inflate(r),this.z=new ZStream}append(t){const e=u8ArrayFromBufferSource(t);if(!(e instanceof Uint8Array))throw new TypeError("data must be an ArrayBuffer or buffer view");if(0===e.length)return[];const{inflate:r,z:n}=this,i=[];let o=!1;n.append(e);do{n.next_out_index=0,n.avail_out=OUTPUT_BUFSIZE,0!==n.avail_in||o||(n.next_in_index=0,o=!0);const t=r.inflate(n);if(o&&-5===t){if(0!==n.avail_in)throw new Error("inflate error: bad input")}else if(2===t){if(!this.customDict)throw new Error("Custom dictionary required for this data");if(0!==r.inflateSetDictionary(this.customDict))throw new Error("Custom dictionary is not valid for this data")}else if(0!==t&&1!==t)throw new Error("inflate error: "+n.msg);if((o||1===t)&&n.avail_in===e.length)throw new Error("inflate error: bad input data");if(n.next_out_index){const t=new Uint8Array(n.next_out.subarray(0,n.next_out_index)),e=2===r.containerFormat;void 0===this.checksum&&(this.checksum=e?0:1),this.checksum=e?crc32(t,this.checksum):adler32(t,this.checksum),i.push(t)}}while(n.avail_in>0||0===n.avail_out);return i}finish(){const t=this.inflate.checksum,e=this.inflate.fullSize,r=this.inflate.isComplete,n=0===t?"unchecked":t===this.checksum?"match":"mismatch",i=0===e?"unchecked":e===this.z.total_out?"match":"mismatch";return{success:r&&"mismatch"!==n&&"mismatch"!==i,complete:r,checksum:n,fileSize:i,fileName:this.inflate.fileName,modDate:this.inflate.modDate}}}const D_CODES=30,BL_CODES=19,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,HEAP_SIZE=2*L_CODES+1,MAX_BL_BITS=7,_dist_code=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];class Tree{constructor(t,e){this.dyn_tree=t,this.stat_desc=e,this.max_code=0}gen_bitlen(t){var e,r,n,i,o,s,a=this.dyn_tree,u=this.stat_desc.static_tree,c=this.stat_desc.extra_bits,h=this.stat_desc.extra_base,l=this.stat_desc.max_length,f=0;for(i=0;i<=15;i++)t.bl_count[i]=0;for(a[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<HEAP_SIZE;e++)(i=a[2*a[2*(r=t.heap[e])+1]+1]+1)>l&&(i=l,f++),a[2*r+1]=i,r>this.max_code||(t.bl_count[i]++,o=0,r>=h&&(o=c[r-h]),s=a[2*r],t.opt_len+=s*(i+o),u&&(t.static_len+=s*(u[2*r+1]+o)));if(0!==f){do{for(i=l-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[l]--,f-=2}while(f>0);for(i=l;0!==i;i--)for(r=t.bl_count[i];0!==r;)(n=t.heap[--e])>this.max_code||(a[2*n+1]!=i&&(t.opt_len+=(i-a[2*n+1])*a[2*n],a[2*n+1]=i),r--)}}bi_reverse(t,e){let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}gen_codes(t,e,r){const n=new Uint16Array(16);let i=0;for(let o=1;o<=15;o++)n[o]=i=i+r[o-1]<<1;for(let o=0;o<=e;o++){const e=t[2*o+1];0!==e&&(t[2*o]=this.bi_reverse(n[e]++,e))}}build_tree(t){var e,r,n,i=this.dyn_tree,o=this.stat_desc.static_tree,s=this.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=HEAP_SIZE,e=0;e<s;e++)0!==i[2*e]?(t.heap[++t.heap_len]=a=e,t.depth[e]=0):i[2*e+1]=0;for(;t.heap_len<2;)i[2*(n=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=o[2*n+1]);for(this.max_code=a,e=Math.floor(t.heap_len/2);e>=1;e--)t.pqdownheap(i,e);n=s;do{e=t.heap[1],t.heap[1]=t.heap[t.heap_len--],t.pqdownheap(i,1),r=t.heap[1],t.heap[--t.heap_max]=e,t.heap[--t.heap_max]=r,i[2*n]=i[2*e]+i[2*r],t.depth[n]=Math.max(t.depth[e],t.depth[r])+1,i[2*e+1]=i[2*r+1]=n,t.heap[1]=n++,t.pqdownheap(i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],this.gen_bitlen(t),this.gen_codes(i,this.max_code,t.bl_count)}static d_code(t){return t<256?_dist_code[t]:_dist_code[256+(t>>>7)]}}Tree._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],Tree.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Tree.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Tree.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tree.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Tree.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Tree.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];class StaticTree{constructor(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i}}StaticTree.static_ltree=new Uint16Array([12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8]),StaticTree.static_dtree=new Uint16Array([0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5]),StaticTree.static_l_desc=new StaticTree(StaticTree.static_ltree,Tree.extra_lbits,LITERALS+1,L_CODES,15),StaticTree.static_d_desc=new StaticTree(StaticTree.static_dtree,Tree.extra_dbits,0,D_CODES,15),StaticTree.static_bl_desc=new StaticTree(null,Tree.extra_blbits,0,BL_CODES,MAX_BL_BITS);const makeConfig=(t,e,r,n,i)=>({good_length:t,max_lazy:e,nice_length:r,max_chain:n,func:i}),config_table=[makeConfig(0,0,0,0,0),makeConfig(4,4,8,4,1),makeConfig(4,5,16,8,1),makeConfig(4,6,32,32,1),makeConfig(4,4,16,16,2),makeConfig(8,16,32,32,2),makeConfig(8,16,128,128,2),makeConfig(8,32,128,256,2),makeConfig(32,128,258,1024,2),makeConfig(32,258,258,4096,2)];function smaller(t,e,r,n){const i=t[2*e],o=t[2*r];return i<o||i==o&&n[e]<=n[r]}const END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,hash_bits=15,hash_size=1<<hash_bits,hash_mask=hash_size-1,hash_shift=Math.floor((hash_bits+MIN_MATCH-1)/MIN_MATCH),lit_bufsize=16384,pending_buf_size=4*lit_bufsize,d_buf=Math.floor(lit_bufsize/2),l_buf=3*lit_bufsize,window_size=65536;class Deflate{constructor(t,e=6,r=0){if(this.status=1,this.pending_buf=new Uint8Array(pending_buf_size),this.pending=0,this.pending_out=0,this.last_flush=0,this.window=new Uint8Array(window_size),this.prev=new Uint16Array(32768),this.head=new Uint16Array(hash_size),this.ins_h=0,this.block_start=0,this.match_length=MIN_MATCH-1,this.match_available=!1,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=MIN_MATCH-1,this.dyn_ltree=new Uint16Array(2*HEAP_SIZE),this.dyn_dtree=new Uint16Array(2*(2*D_CODES+1)),this.bl_tree=new Uint16Array(2*(2*BL_CODES+1)),this.l_desc=new Tree(this.dyn_ltree,StaticTree.static_l_desc),this.d_desc=new Tree(this.dyn_dtree,StaticTree.static_d_desc),this.bl_desc=new Tree(this.bl_tree,StaticTree.static_bl_desc),this.depth=new Uint16Array(2*L_CODES+1),this.last_lit=0,this.matches=0,this.opt_len=0,this.static_len=0,this.last_eob_len=8,this.bi_buf=0,this.bi_valid=0,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(2*L_CODES+1),this.heap_len=0,this.heap_max=HEAP_SIZE,e<0||e>9||r<0||r>2)throw RangeError("level or strategy is out of range");this.strm=t,this.level=e,this.strategy=r,t.msg="",t.total_in=t.total_out=0,this.init_block();for(let n=0;n<hash_size;++n)this.head[n]=0;this.max_lazy_match=config_table[e].max_lazy,this.good_match=config_table[e].good_length,this.nice_match=config_table[e].nice_length,this.max_chain_length=config_table[e].max_chain}init_block(){for(let t=0;t<L_CODES;t++)this.dyn_ltree[2*t]=0;for(let t=0;t<D_CODES;t++)this.dyn_dtree[2*t]=0;for(let t=0;t<BL_CODES;t++)this.bl_tree[2*t]=0;this.dyn_ltree[2*END_BLOCK]=1,this.opt_len=this.static_len=0,this.last_lit=this.matches=0}pqdownheap(t,e){const r=this.heap,n=r[e];let i=e<<1;for(;i<=this.heap_len&&(i<this.heap_len&&smaller(t,r[i+1],r[i],this.depth)&&i++,!smaller(t,n,r[i],this.depth));)r[e]=r[i],e=i,i<<=1;r[e]=n}scan_tree(t,e){var r,n=-1,i=t[1],o=0,s=7,a=4;0===i&&(s=138,a=3),t[2*(e+1)+1]=65535;for(let u=0;u<=e;u++)r=i,i=t[2*(u+1)+1],++o<s&&r==i||(o<a?this.bl_tree[2*r]+=o:0!==r?(r!=n&&this.bl_tree[2*r]++,this.bl_tree[2*REP_3_6]++):o<=10?this.bl_tree[2*REPZ_3_10]++:this.bl_tree[2*REPZ_11_138]++,o=0,n=r,0===i?(s=138,a=3):r==i?(s=6,a=3):(s=7,a=4))}build_bl_tree(){let t;for(this.scan_tree(this.dyn_ltree,this.l_desc.max_code),this.scan_tree(this.dyn_dtree,this.d_desc.max_code),this.bl_desc.build_tree(this),t=BL_CODES-1;t>=3&&0===this.bl_tree[2*Tree.bl_order[t]+1];t--);return this.opt_len+=3*(t+1)+5+5+4,t}put_short(t){this.pending_buf[this.pending++]=255&t,this.pending_buf[this.pending++]=t>>>8&255}send_bits(t,e){if(this.bi_valid>16-e){this.bi_buf|=t<<this.bi_valid&65535;const r=this.pending;this.pending_buf[r]=this.bi_buf,this.pending_buf[r+1]=this.bi_buf>>>8,this.pending=r+2,this.bi_buf=t>>>16-this.bi_valid,this.bi_valid+=e-16}else this.bi_buf|=t<<this.bi_valid&65535,this.bi_valid+=e}send_code(t,e){const r=2*t;this.send_bits(65535&e[r],65535&e[r+1])}send_tree(t,e){var r,n=-1,i=t[1],o=0,s=7,a=4;0===i&&(s=138,a=3);for(let u=0;u<=e;u++)if(r=i,i=t[2*(u+1)+1],!(++o<s&&r==i)){if(o<a)do{this.send_code(r,this.bl_tree)}while(0!=--o);else 0!==r?(r!=n&&(this.send_code(r,this.bl_tree),o--),this.send_code(REP_3_6,this.bl_tree),this.send_bits(o-3,2)):o<=10?(this.send_code(REPZ_3_10,this.bl_tree),this.send_bits(o-3,3)):(this.send_code(REPZ_11_138,this.bl_tree),this.send_bits(o-11,7));o=0,n=r,0===i?(s=138,a=3):r==i?(s=6,a=3):(s=7,a=4)}}send_all_trees(t,e,r){this.send_bits(t-257,5),this.send_bits(e-1,5),this.send_bits(r-4,4);for(let n=0;n<r;n++)this.send_bits(this.bl_tree[2*Tree.bl_order[n]+1],3);this.send_tree(this.dyn_ltree,t-1),this.send_tree(this.dyn_dtree,e-1)}bi_flush(){16===this.bi_valid?(this.put_short(this.bi_buf),this.bi_buf=0,this.bi_valid=0):this.bi_valid>=8&&(this.pending_buf[this.pending++]=this.bi_buf,this.bi_buf>>>=8,this.bi_valid-=8)}_tr_align(){this.send_bits(STATIC_TREES<<1,3),this.send_code(END_BLOCK,StaticTree.static_ltree),this.bi_flush(),1+this.last_eob_len+10-this.bi_valid<9&&(this.send_bits(STATIC_TREES<<1,3),this.send_code(END_BLOCK,StaticTree.static_ltree),this.bi_flush()),this.last_eob_len=7}_tr_tally(t,e){if(this.pending_buf[d_buf+2*this.last_lit]=t>>>8&255,this.pending_buf[d_buf+2*this.last_lit+1]=255&t,this.pending_buf[l_buf+this.last_lit]=255&e,this.last_lit++,0===t?this.dyn_ltree[2*e]++:(this.matches++,t--,this.dyn_ltree[2*(Tree._length_code[e]+LITERALS+1)]++,this.dyn_dtree[2*Tree.d_code(t)]++),0==(8191&this.last_lit)&&this.level>2){let t=8*this.last_lit,e=this.strstart-this.block_start;for(let r=0;r<D_CODES;r++)t+=this.dyn_dtree[2*r]*(5+Tree.extra_dbits[r]);if(t>>>=3,this.matches<Math.floor(this.last_lit/2)&&t<Math.floor(e/2))return!0}return this.last_lit===lit_bufsize-1}compress_block(t,e){let r=0;if(0!==this.last_lit)do{let n=this.pending_buf[d_buf+2*r]<<8&65280|255&this.pending_buf[d_buf+2*r+1],i=255&this.pending_buf[l_buf+r];if(r++,0===n)this.send_code(i,t);else{let r=Tree._length_code[i];this.send_code(r+LITERALS+1,t);let o=Tree.extra_lbits[r];0!==o&&(i-=Tree.base_length[r],this.send_bits(i,o)),n--,r=Tree.d_code(n),this.send_code(r,e),o=Tree.extra_dbits[r],0!==o&&(n-=Tree.base_dist[r],this.send_bits(n,o))}}while(r<this.last_lit);this.send_code(END_BLOCK,t),this.last_eob_len=t[2*END_BLOCK+1]}bi_windup(){this.bi_valid>8?this.put_short(this.bi_buf):this.bi_valid>0&&(this.pending_buf[this.pending++]=this.bi_buf),this.bi_buf=0,this.bi_valid=0}copy_block(t,e,r){this.bi_windup(),this.last_eob_len=8,r&&(this.put_short(e),this.put_short(~e)),this.pending_buf.set(this.window.subarray(t,t+e),this.pending),this.pending+=e}_tr_stored_block(t,e,r){this.send_bits((STORED_BLOCK<<1)+(r?1:0),3),this.copy_block(t,e,!0)}_tr_flush_block(t,e,r){let n,i,o=0;this.level>0?(this.l_desc.build_tree(this),this.d_desc.build_tree(this),o=this.build_bl_tree(),n=this.opt_len+3+7>>>3,i=this.static_len+3+7>>>3,i<=n&&(n=i)):n=i=e+5,e+4<=n&&-1!==t?this._tr_stored_block(t,e,r):i==n?(this.send_bits((STATIC_TREES<<1)+(r?1:0),3),this.compress_block(StaticTree.static_ltree,StaticTree.static_dtree)):(this.send_bits((DYN_TREES<<1)+(r?1:0),3),this.send_all_trees(this.l_desc.max_code+1,this.d_desc.max_code+1,o+1),this.compress_block(this.dyn_ltree,this.dyn_dtree)),this.init_block(),r&&this.bi_windup()}flush_block_only(t){this._tr_flush_block(this.block_start>=0?this.block_start:-1,this.strstart-this.block_start,t),this.block_start=this.strstart,this.strm.flush_pending(this)}fill_window(){do{let t=window_size-this.lookahead-this.strstart;if(0===t&&0===this.strstart&&0===this.lookahead)t=32768;else if(-1===t)t--;else if(this.strstart>=65536-MIN_LOOKAHEAD){this.window.set(this.window.subarray(32768,65536),0),this.match_start-=32768,this.strstart-=32768,this.block_start-=32768;let e=hash_size,r=e;do{let t=65535&this.head[--r];this.head[r]=t>=32768?t-32768:0}while(0!=--e);e=32768,r=e;do{let t=65535&this.prev[--r];this.prev[r]=t>=32768?t-32768:0}while(0!=--e);t+=32768}if(0===this.strm.avail_in)return;const e=this.strm.read_into_buf(this.window,this.strstart+this.lookahead,t);this.lookahead+=e,this.lookahead>=MIN_MATCH&&(this.ins_h=255&this.window[this.strstart],this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+1])&hash_mask)}while(this.lookahead<MIN_LOOKAHEAD&&0!==this.strm.avail_in)}deflate_stored(t){let e=65535;for(e>pending_buf_size-5&&(e=pending_buf_size-5);;){if(this.lookahead<=1){if(this.fill_window(),0===this.lookahead&&0===t)return 0;if(0===this.lookahead)break}this.strstart+=this.lookahead,this.lookahead=0;let r=this.block_start+e;if((0===this.strstart||this.strstart>=r)&&(this.lookahead=this.strstart-r,this.strstart=r,this.flush_block_only(!1),0===this.strm.avail_out))return 0;if(this.strstart-this.block_start>=32768-MIN_LOOKAHEAD&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}return this.flush_block_only(4===t),0===this.strm.avail_out?4===t?2:0:4===t?3:1}longest_match(t){let e=this.max_chain_length,r=this.strstart,n=this.prev_length,i=this.strstart>32768-MIN_LOOKAHEAD?this.strstart-(32768-MIN_LOOKAHEAD):0,o=this.nice_match;const s=this.window,a=this.strstart+MAX_MATCH;let u=s[r+n-1],c=s[r+n];const h=s[r],l=s[r+1];this.prev_length>=this.good_match&&(e>>=2),o>this.lookahead&&(o=this.lookahead);do{let f=t,d=!0;for(;;){if(f=t,s[f+n]!==c||s[f+n-1]!==u){if((t=this.prev[32767&t])>i&&0!=--e)continue;d=!1}break}if(!d)break;if(s[f]!==h||s[f+1]!==l)continue;r+=2,f+=2;do{const t=(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3])^(s[f]<<24|s[f+1]<<16|s[f+2]<<8|s[f+3]);if(t){const e=Math.clz32(t)>>3;r+=e,f+=e;break}r+=4,f+=4}while(r<a);r>a&&(r=a);let p=MAX_MATCH-(a-r);if(r=a-MAX_MATCH,p>n){if(this.match_start=t,n=p,p>=o)break;u=s[r+n-1],c=s[r+n]}}while((t=this.prev[32767&t])>i&&0!=--e);return n<=this.lookahead?n:this.lookahead}deflate_fast(t){let e,r=0;for(;;){if(this.lookahead<MIN_LOOKAHEAD){if(this.fill_window(),this.lookahead<MIN_LOOKAHEAD&&0===t)return 0;if(0===this.lookahead)break}if(this.lookahead>=MIN_MATCH&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,r=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart),0!==r&&(this.strstart-r&65535)<=32768-MIN_LOOKAHEAD&&2!==this.strategy&&(this.match_length=this.longest_match(r)),this.match_length>=MIN_MATCH)if(e=this._tr_tally(this.strstart-this.match_start,this.match_length-MIN_MATCH),this.lookahead-=this.match_length,this.match_length<=this.max_lazy_match&&this.lookahead>=MIN_MATCH){this.match_length--;do{this.strstart++,this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,r=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart}while(0!=--this.match_length);this.strstart++}else this.strstart+=this.match_length,this.match_length=0,this.ins_h=255&this.window[this.strstart],this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+1])&hash_mask;else e=this._tr_tally(0,255&this.window[this.strstart]),this.lookahead--,this.strstart++;if(e&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}return this.flush_block_only(4===t),0===this.strm.avail_out?4===t?2:0:4===t?3:1}deflate_slow(t){let e,r,n,i=0;for(;;){if(this.lookahead<MIN_LOOKAHEAD){if(this.fill_window(),this.lookahead<MIN_LOOKAHEAD&&0===t)return 0;if(0===this.lookahead)break}if(this.lookahead>=MIN_MATCH&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,i=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart),this.prev_length=this.match_length,n=this.match_start,this.match_length=MIN_MATCH-1,0!==i&&this.prev_length<this.max_lazy_match&&(this.strstart-i&65535)<=32768-MIN_LOOKAHEAD&&(2!==this.strategy&&(this.match_length=this.longest_match(i)),this.match_length<=5&&(1===this.strategy||this.match_length===MIN_MATCH&&this.strstart-this.match_start>4096)&&(this.match_length=MIN_MATCH-1)),this.prev_length>=MIN_MATCH&&this.match_length<=this.prev_length){r=this.strstart+this.lookahead-MIN_MATCH,e=this._tr_tally(this.strstart-1-n,this.prev_length-MIN_MATCH),this.lookahead-=this.prev_length-1,this.prev_length-=2;do{++this.strstart<=r&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,i=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart)}while(0!=--this.prev_length);if(this.match_available=!1,this.match_length=MIN_MATCH-1,this.strstart++,e&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}else if(this.match_available){if(e=this._tr_tally(0,255&this.window[this.strstart-1]),e&&this.flush_block_only(!1),this.strstart++,this.lookahead--,0===this.strm.avail_out)return 0}else this.match_available=!0,this.strstart++,this.lookahead--}return this.match_available&&(e=this._tr_tally(0,255&this.window[this.strstart-1]),this.match_available=!1),this.flush_block_only(4===t),0===this.strm.avail_out?4===t?2:0:4===t?3:1}deflateSetDictionary(t){const e=t.byteLength;let r,n=e,i=0;if(!t||1!==this.status)return-2;if(n<MIN_MATCH)return 0;for(n>32768-MIN_LOOKAHEAD&&(n=32768-MIN_LOOKAHEAD,i=e-n),this.window.set(t.subarray(i,i+n),0),this.strstart=n,this.block_start=n,this.ins_h=255&this.window[0],this.ins_h=(this.ins_h<<hash_shift^255&this.window[1])&hash_mask,r=0;r<=n-MIN_MATCH;r++)this.ins_h=(this.ins_h<<hash_shift^255&this.window[r+(MIN_MATCH-1)])&hash_mask,this.prev[32767&r]=this.head[this.ins_h],this.head[this.ins_h]=r;return 0}deflate(t){if(t>4||t<0)return-2;const{strm:e}=this;if(!e.next_out||!e.next_in&&0!==e.avail_in||3===this.status&&4!=t)return-2;if(0===e.avail_out)return-5;let r=this.last_flush;if(this.last_flush=t,1===this.status&&(this.status=2),0!==this.pending){if(e.flush_pending(this),0===e.avail_out)return this.last_flush=-1,0}else if(0===e.avail_in&&t<=r&&4!==t)return-5;if(3===this.status&&0!==e.avail_in)return-5;if(0!==e.avail_in||0!==this.lookahead||0!==t&&3!==this.status){let r;switch(config_table[this.level].func){case 0:r=this.deflate_stored(t);break;case 1:r=this.deflate_fast(t);break;case 2:default:r=this.deflate_slow(t)}if(2!=r&&3!==r||(this.status=3),0===r||2===r)return 0===e.avail_out&&(this.last_flush=-1),0;if(1===r){if(1===t)this._tr_align();else if(this._tr_stored_block(0,0,!1),3===t)for(let t=0;t<hash_size;t++)this.head[t]=0;if(e.flush_pending(this),0===e.avail_out)return this.last_flush=-1,0}}return 4!==t?0:1}}class Deflater{constructor(t){var e,r;this.checksum=1,this.origSize=0,this.dictChecksum=0;const n=null!==(e=null==t?void 0:t.level)&&void 0!==e?e:6,i=null!==(r=null==t?void 0:t.format)&&void 0!==r?r:"deflate",o=null==t?void 0:t.dictionary,s=null==t?void 0:t.fileName;if("number"!=typeof n||n<1||n>9)throw new RangeError("level must be between 1 and 9, inclusive");if("gzip"!==i&&"raw"!==i&&"deflate"!==i)throw new RangeError("container must be one of `raw`, `deflate`, `gzip`");if(void 0!==s&&"string"!=typeof s)throw new TypeError("fileName must be a string");if(this.fileName=s||"",this.z=new ZStream,this.deflate=new Deflate(this.z,n,0),o){if("deflate"!==i)throw new TypeError("Can only provide a dictionary for `deflate` containers.");const t=u8ArrayFromBufferSource(o);if(!t)throw new TypeError("dictionary must be an ArrayBuffer or buffer view");this.dictChecksum=adler32(t),this.deflate.deflateSetDictionary(t)}this.format=i,"gzip"===this.format&&(this.checksum=0)}buildZlibHeader(){let t=2,e=1;0!==this.dictChecksum&&(t+=4,e=PRESET_DICT);const r=new ArrayBuffer(t),n=new DataView(r);return n.setUint16(0,30720|e),0!==this.dictChecksum&&n.setUint32(2,this.dictChecksum),new Uint8Array(r)}buildGZipHeader(){let t=0,e=[];this.fileName.length>0&&(t|=8,e=Array.from(this.fileName).map((t=>{const e=t.charCodeAt(0);return e>255?95:e})),e.push(0));const r=new ArrayBuffer(10+e.length),n=new DataView(r);n.setUint16(0,GZIP_ID1<<8|GZIP_ID2),n.setUint16(2,Z_DEFLATED<<8|t);const i=Math.floor(Date.now()/1e3);n.setUint32(4,i,!0),n.setUint16(8,255);const o=new Uint8Array(r);return e.length&&o.set(e,10),o}buildTrailer(){const t="gzip"===this.format,e=new ArrayBuffer(t?8:4),r=new DataView(e);return r.setUint32(0,this.checksum,t),t&&r.setUint32(4,this.origSize,!0),new Uint8Array(e)}append(t){const e=[],r=u8ArrayFromBufferSource(t);if(!(r instanceof Uint8Array))throw new TypeError("data must be an ArrayBuffer or buffer view");if(!r.length)return e;"gzip"!==this.format?this.checksum=adler32(r,this.checksum):this.checksum=crc32(r,this.checksum),this.origSize+=r.length;const{deflate:n,z:i}=this;i.next_in_index=0,i.next_in=r,i.avail_in=r.length,1===n.status&&("deflate"===this.format?e.push(this.buildZlibHeader()):"gzip"===this.format&&e.push(this.buildGZipHeader()));do{if(i.next_out_index=0,i.avail_out=OUTPUT_BUFSIZE,0!==n.deflate(0))throw new Error("deflating: "+i.msg);i.next_out_index&&e.push(new Uint8Array(i.next_out.subarray(0,i.next_out_index)))}while(i.avail_in>0||0===i.avail_out);return e}finish(){const t=[],{deflate:e,z:r}=this;if(1===e.status)throw new Error("Cannot call finish before at least 1 call to append");do{r.next_out_index=0,r.avail_out=OUTPUT_BUFSIZE;const n=e.deflate(4);if(1!==n&&0!==n)throw new Error("deflating: "+r.msg);OUTPUT_BUFSIZE-r.avail_out>0&&t.push(new Uint8Array(r.next_out.subarray(0,r.next_out_index)))}while(r.avail_in>0||0===r.avail_out);return"raw"!==this.format&&t.push(this.buildTrailer()),t}}const decContext=Symbol("decContext"),decTransform$1=Symbol("decTransform");class DecompressionTransformer{constructor(t){this.inflater_=t}transform(t,e){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new TypeError("Input data must be a BufferSource");const r=this.inflater_.append(t);for(const n of r)e.enqueue(n)}flush(t){const e=this.inflater_.finish();if(!e.success){if(!e.complete)throw new Error("Unexpected EOF during decompression");if("mismatch"===e.checksum)throw new Error("Data integrity check failed");if("mismatch"===e.fileSize)throw new Error("Data size check failed");throw new Error("Decompression error")}}}class DecompressionStream{constructor(t){if("deflate"!==t&&"gzip"!==t)throw new TypeError("format must be one of `deflate`, `gzip`");this[decContext]=new Inflater,this[decTransform$1]=new TransformStream(new DecompressionTransformer(this[decContext]))}get readable(){return this[decTransform$1].readable}get writable(){return this[decTransform$1].writable}}const comContext=Symbol("comContext"),comTransform=Symbol("comTransform");class CompressionTransformer{constructor(t){this.deflater_=t}transform(t,e){if(!(t instanceof ArrayBuffer||ArrayBuffer.isView(t)))throw new TypeError("Input data must be a BufferSource");const r=this.deflater_.append(t);for(const n of r)e.enqueue(n)}flush(t){const e=this.deflater_.finish();for(const r of e)t.enqueue(r)}}class CompressionStream{constructor(t){if("deflate"!==t&&"gzip"!==t)throw new TypeError("format must be one of `deflate`, `gzip`");this[comContext]=new Deflater({format:t}),this[comTransform]=new TransformStream(new CompressionTransformer(this[comContext]))}get readable(){return this[comTransform].readable}get writable(){return this[comTransform].writable}}function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:void 0}function getGlobalValue(t){const e=getGlobal();let r;return void 0!==e&&(r=e[t]),r}function getGlobalOrContextualValue(name){const global=getGlobal();let value;if(void 0!==global&&(value=global[name]),void 0===value)try{value=eval(name)}catch(e){}return value}function hasCompleteStreamsImplementation(){const t=getGlobalValue("ReadableStream"),e=getGlobalValue("WritableStream"),r=getGlobalValue("TransformStream"),n=getGlobalValue("ByteLengthQueuingStrategy"),i=getGlobalValue("CountQueuingStrategy"),o=t=>"function"==typeof t;if(!(o(t)&&o(e)&&o(r)&&o(n)&&o(i)))return!1;try{const e=new t({type:"bytes"}).getReader({mode:"byob"});if(null==e||"object"!=typeof e)return!1}catch(s){return!1}return!0}function installStardazedStreams(){const t=getGlobal();if(!t)return!1;if(hasCompleteStreamsImplementation())return!1;const e=getGlobalOrContextualValue("fetch"),r=getGlobalOrContextualValue("Response"),n=getGlobalValue("ReadableStream");if(e&&r){const i=createAdaptedFetch(e,r,n,SDReadableStream,readableStreamTee),o=createAdaptedResponse(r,n,SDReadableStream,readableStreamTee);t.fetch=i,t.Response=o}return t.ReadableStream=SDReadableStream,t.WritableStream=WritableStream,t.TransformStream=TransformStream$1,t.ByteLengthQueuingStrategy=ByteLengthQueuingStrategy,t.CountQueuingStrategy=CountQueuingStrategy,!0}function installEncodingStreams(t){const e=getGlobal();if(!e)return;const r=getGlobalValue("TextDecoderStream");(t||"function"!=typeof r)&&(e.TextDecoderStream=TextDecoderStream);const n=getGlobalValue("TextEncoderStream");(t||"function"!=typeof n)&&(e.TextEncoderStream=TextEncoderStream)}function installCompressionStreams(t){const e=getGlobal();if(!e)return;const r=getGlobalValue("CompressionStream");(t||"function"!=typeof r)&&(e.CompressionStream=CompressionStream);const n=getGlobalValue("DecompressionStream");(t||"function"!=typeof n)&&(e.DecompressionStream=DecompressionStream)}const overwritten=installStardazedStreams();installEncodingStreams(overwritten),installCompressionStreams(overwritten)}()},55670:function(t,e,r){"use strict";r(21703);const n=Math.exp;t.exports=function(t){if("number"!==typeof t)throw new Error("must provide a timespan to the moving average constructor");if(t<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let e,r,i=0,o=0,s=0,a={};function u(e,r){return 1-n(-(e-r)/t)}return a.push=function(t,n){if(r){const a=u(t,r),c=n-e,h=a*c;e=a*n+(1-a)*e,i=(1-a)*(i+c*h),o=Math.sqrt(i),s=e+a*c}else e=n;r=t},a.movingAverage=function(){return e},a.variance=function(){return i},a.deviation=function(){return o},a.forecast=function(){return s},a}},94850:function(t,e,r){r(21703),t.exports=class extends Error{constructor(t,e){super(t||"The operation was aborted"),this.type="aborted",this.code=e||"ABORT_ERR"}}},87602:function(t,e,r){const n=r(54253),i=r(94850),o=(t,e,r)=>s(t,Array.isArray(e)?e:[{signal:e,options:r}]),s=(t,e)=>{async function*r(){let r;const n=()=>{r&&r()};for(const{signal:t}of e)t.addEventListener("abort",n);while(1){let s;try{for(const{signal:t,options:r}of e)if(t.aborted){const{abortMessage:t,abortCode:e}=r;throw new i(t,e)}const n=new Promise(((t,n)=>{r=()=>{const{options:t}=e.find((({signal:t})=>t.aborted)),{abortMessage:r,abortCode:o}=t;n(new i(r,o))}}));s=await Promise.race([n,t.next()]),r=null}catch(o){for(const{signal:t}of e)t.removeEventListener("abort",n);const r=e.find((({signal:t})=>t.aborted)),i="aborted"===o.type&&r;if(i&&r.options.onAbort&&await r.options.onAbort(t),"function"===typeof t.return)try{const e=t.return();e instanceof Promise&&e.catch((t=>{null!=r.options.onReturnError&&r.options.onReturnError(t)}))}catch(o){null!=r.options.onReturnError&&r.options.onReturnError(o)}if(i&&r.options.returnOnAbort)return;throw o}if(s.done)break;yield s.value}for(const{signal:t}of e)t.removeEventListener("abort",n)}return t=n(t),e=e.map((({signal:t,options:e})=>({signal:t,options:e||{}}))),r()},a=(t,e,r)=>u(t,Array.isArray(e)?e:[{signal:e,options:r}]),u=(t,e)=>r=>t(s(r,e)),c=(t,e,r)=>h(t,Array.isArray(e)?e:[{signal:e,options:r}]),h=(t,e)=>({sink:u(t.sink,e),source:s(t.source,e)});t.exports=o,t.exports.AbortError=i,t.exports.source=o,t.exports.sink=a,t.exports.transform=a,t.exports.duplex=c},1294:function(t,e,r){"use strict";r(21703);const n=r(37384),i=r(25834),o=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");class s extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError("Expected input to be an Array, got "+typeof t);t=[...t].map((t=>t instanceof Error?t:null!==t&&"object"===typeof t?Object.assign(new Error(t.message),t):new Error(t)));let e=t.map((t=>"string"===typeof t.stack?o(i(t.stack)):String(t))).join("\n");e="\n"+n(e,4),super(e),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(const t of this._errors)yield t}}t.exports=s},74908:function(t){function e(t){const e=new globalThis.AbortController;function r(){e.abort();for(const e of t)e&&e.removeEventListener&&e.removeEventListener("abort",r)}for(const n of t)if(n&&n.addEventListener){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}t.exports=e,t.exports.anySignal=e},21249:function(t,e,r){var n=r(13374)["Buffer"];r(21703),t.exports=function(t){const e="api.js: ",i=this,o=r(88017),s=r(12633),a=r(61510),u=new(r(7474)),{attributes:c,showAttributes:h,showAttributeErrors:l,showRuleDependencies:f}=r(59940),d=r(77089),p=function(t,e,r){const n=0,i=1,s=2,a=`<span class="${o.style.CLASS_CTRLCHAR}">`,u="</span>",c=`<span class="${o.style.CLASS_NOMATCH}">`,h="</span>";let l,f="";const d=!0;while(d){if(!Array.isArray(t)||0===t.length)break;if("number"!==typeof e)throw new Error("abnfToHtml: beg must be type number");if(e>=t.length)break;l="number"!==typeof r||e+r>=t.length?t.length:e+r;let d=n;for(let r=e;r<l;r+=1){const e=t[r];if(e>=32&&e<=126)switch(d===i?(f+=u,d=n):d===s&&(f+=h,d=n),e){case 32:f+="&nbsp;";break;case 60:f+="&lt;";break;case 62:f+="&gt;";break;case 38:f+="&amp;";break;case 34:f+="&quot;";break;case 39:f+="&#039;";break;case 92:f+="&#092;";break;default:f+=String.fromCharCode(e);break}else 9===e||10===e||13===e?(d===n?(f+=a,d=i):d===s&&(f+=h+a,d=i),9===e&&(f+="TAB"),10===e&&(f+="LF"),13===e&&(f+="CR")):(d===n?(f+=c,d=s):d===i&&(f+=u+c,d=s),f+=`\\x${o.utils.charToHex(e)}`)}d===s&&(f+=h),d===i&&(f+=u);break}return f},y=function(t,e,r){let n="";for(let i=e;i<e+r;i+=1){const e=t[i];if(e>=32&&e<=126)n+=String.fromCharCode(e);else switch(e){case 9:n+="\\t";break;case 10:n+="\\n";break;case 13:n+="\\r";break;default:n+="\\unknown";break}}return n},g=function(t){let e="Annotated Input Grammar";return t.forEach((t=>{e+="\n",e+=`line no: ${t.lineNo}`,e+=` : char index: ${t.beginChar}`,e+=` : length: ${t.length}`,e+=` : abnf: ${y(i.chars,t.beginChar,t.length)}`})),e+="\n",e},m=function(t){let e="";e+=`<table class="${o.style.CLASS_GRAMMAR}">\n`;const r="Annotated Input Grammar";return e+=`<caption>${r}</caption>\n`,e+="<tr>",e+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",e+="</tr>\n",t.forEach((t=>{e+="<tr>",e+=`<td>${t.lineNo}`,e+=`</td><td>${t.beginChar}`,e+=`</td><td>${t.length}`,e+=`</td><td>${p(i.chars,t.beginChar,t.length)}`,e+="</td>",e+="</tr>\n"})),e+="</table>\n",e},b=function(t,e,r,n){const[i]=o;let s="";const a=`<span class="${i.CLASS_NOMATCH}">&raquo;</span>`;return s+=`<p><table class="${i.CLASS_GRAMMAR}">\n`,n&&"string"===typeof n&&(s+=`<caption>${n}</caption>\n`),s+="<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>\n",t.forEach((t=>{let n,i,u,c,h,l="",f="";0===e.length?(h=a,i=0):(n=e[t.line],u=n.beginChar,t.char>u&&(l=p(r,u,t.char-u)),u=t.char,c=n.beginChar+n.length,u<c&&(f=p(r,u,c-u)),h=l+a+f,i=t.char-n.beginChar,s+="<tr>",s+=`<td>${t.line}</td><td>${n.beginChar}</td><td>${i}</td><td>${h}</td>`,s+="</tr>\n",s+="<tr>",s+=`<td colspan="3"></td><td>&uarr;:&nbsp;${o.utils.stringToAsciiHtml(t.msg)}</td>`,s+="</tr>\n")})),s+="</table></p>\n",s},w=function(t,e,r){let n,i,o,s;return n="",t.forEach((t=>{i=e[t.line],n+=`${i.lineNo}: `,n+=`${i.beginChar}: `,n+=t.char-i.beginChar+": ",o=i.beginChar,s=t.char-i.beginChar,n+=y(r,o,s),n+=" >> ",o=t.char,s=i.beginChar+i.length-t.char,n+=y(r,o,s),n+="\n",n+=`${i.lineNo}: `,n+=`${i.beginChar}: `,n+=t.char-i.beginChar+": ",n+="error: ",n+=t.msg,n+="\n"})),n};let v,_=!1,E=!1,S=!1,A=!1,I=0;if(this.errors=[],n.isBuffer(t))this.chars=s.decode("BINARY",t);else if(Array.isArray(t))this.chars=t.slice();else{if("string"!==typeof t)throw new Error(`${e}input source is not a string, byte Buffer or character array`);this.chars=s.decode("STRING",t)}this.sabnf=s.encode("STRING",this.chars),this.scan=function(t,e){this.lines=a(this.chars,this.errors,t,e),_=!0},this.parse=function(t,r){if(!_)throw new Error(`${e}grammar not scanned`);u.syntax(this.chars,this.lines,this.errors,t,r),E=!0},this.translate=function(){if(!E)throw new Error(`${e}grammar not scanned and parsed`);const t=u.semantic(this.chars,this.lines,this.errors);0===this.errors.length&&(this.rules=t.rules,this.udts=t.udts,v=t.lineMap,S=!0)},this.attributes=function(){if(!S)throw new Error(`${e}grammar not scanned, parsed and translated`);return I=c(this.rules,this.udts,v,this.errors),A=!0,I},this.generate=function(t){if(this.lines=a(this.chars,this.errors,t),this.errors.length)return;if(u.syntax(this.chars,this.lines,this.errors,t),this.errors.length)return;const e=u.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=e.rules,this.udts=e.udts,v=e.lineMap,I=c(this.rules,this.udts,v,this.errors),A=!0)},this.displayRules=function(t="index"){if(!S)throw new Error(`${e}grammar not scanned, parsed and translated`);return d(this.rules,this.udts,t)},this.displayRuleDependencies=function(t="index"){if(!A)throw new Error(`${e}no attributes - must be preceeded by call to attributes()`);return f(t)},this.displayAttributes=function(t="index"){if(!A)throw new Error(`${e}no attributes - must be preceeded by call to attributes()`);return I&&l(t),h(t)},this.displayAttributeErrors=function(){if(!A)throw new Error(`${e}no attributes - must be preceeded by call to attributes()`);return l()},this.toSource=function(t){if(!A)throw new Error(`${e}can't generate parser source - must be preceeded by call to attributes()`);if(I)throw new Error(`${e}can't generate parser source - attributes have ${I} errors`);return u.generateSource(this.chars,this.lines,this.rules,this.udts,t)},this.toObject=function(){if(!A)throw new Error(`${e}can't generate parser source - must be preceeded by call to attributes()`);if(I)throw new Error(`${e}can't generate parser source - attributes have ${I} errors`);return u.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return w(this.errors,this.lines,this.chars)},this.errorsToHtml=function(t){return b(this.errors,this.lines,this.chars,t)},this.linesToAscii=function(){return g(this.lines)},this.linesToHtml=function(){return m(this.lines)}}},59940:function(t,e,r){t.exports=function(){const t=r(92578),{ruleAttributes:e,showAttributes:n,showAttributeErrors:i}=r(16406),{ruleDependencies:o,showRuleDependencies:s}=r(78835);class a{constructor(t,e){this.rules=t,this.udts=e,this.ruleCount=t.length,this.udtCount=e.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let r=0;r<this.ruleCount;r+=1)this.attrs.push(this.attrGen(this.rules[r])),this.attrsWorking.push(this.attrGen(this.rules[r])),this.ruleDeps.push(this.rdGen(t[r],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(t){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:t}}attrInit(t){t.left=!1,t.nested=!1,t.right=!1,t.empty=!1,t.finite=!1,t.cyclic=!1,t.leaf=!1,t.isOpen=!1,t.isComplete=!1}attrCopy(t,e){t.left=e.left,t.nested=e.nested,t.right=e.right,t.empty=e.empty,t.finite=e.finite,t.cyclic=e.cyclic,t.leaf=e.leaf,t.isOpen=e.isOpen,t.isComplete=e.isComplete,t.rule=e.rule}rdGen(e,r,n){const i={rule:e,recursiveType:t.ATTR_N,groupNumber:-1,refersTo:this.falseArray(r),refersToUdt:this.falseArray(n),referencedBy:this.falseArray(r)};return i}typeToString(e){switch(e){case t.ATTR_N:return" N";case t.ATTR_R:return" R";case t.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(t){const e=[];if(t>0)for(let r=0;r<t;r+=1)e.push(!1);return e}falsifyArray(t){for(let e=0;e<t.length;e+=1)t[e]=!1}indexArray(t){const e=[];if(t>0)for(let r=0;r<t;r+=1)e.push(r);return e}compRulesAlpha(t,e){return this.rules[t].lower<this.rules[e].lower?-1:this.rules[t].lower>this.rules[e].lower?1:0}compUdtsAlpha(t,e){return this.udts[t].lower<this.udts[e].lower?-1:this.udts[t].lower>this.udts[e].lower?1:0}compRulesType(t,e){return this.ruleDeps[t].recursiveType<this.ruleDeps[e].recursiveType?-1:this.ruleDeps[t].recursiveType>this.ruleDeps[e].recursiveType?1:0}compRulesGroup(e,r){if(this.ruleDeps[e].recursiveType===t.ATTR_MR&&this.ruleDeps[r].recursiveType===t.ATTR_MR){if(this.ruleDeps[e].groupNumber<this.ruleDeps[r].groupNumber)return-1;if(this.ruleDeps[e].groupNumber>this.ruleDeps[r].groupNumber)return 1}return 0}}const u=function(t=[],r=[],n=[],i=[]){const s=new a(t,r);return o(s),e(s),s.attrsErrorCount&&i.push({line:0,char:0,msg:`${s.attrsErrorCount} attribute errors`}),s.attrsErrorCount};return{attributes:u,showAttributes:n,showAttributeErrors:i,showRuleDependencies:s}}()},7474:function(t,e,r){r(21703),t.exports=function(){const t="parser: ",e=r(88017),n=e.ids,i=new(r(40454)),o=new(r(42625)),s=new(r(53466)),a=new e.parser;a.ast=new e.ast,a.callbacks=i.callbacks,a.ast.callbacks=o.callbacks;const u=function(t,e,r){if(e<0||e>=r)return-1;for(let n=0;n<t.length;n+=1)if(e>=t[n].beginChar&&e<t[n].beginChar+t[n].length)return n;return-1},c=function(t,e){let r=-1;if(e<t.length)for(let n=e;n<t.length;n+=1)if(null!==t[n]){r=t[n];break}return r},h=function(t){t.forEach((t=>{const e=[],r=[];let i=0;t.opcodes.forEach((t=>{t.type===n.ALT&&1===t.children.length||t.type===n.CAT&&1===t.children.length||t.type===n.REP&&1===t.min&&1===t.max?r.push(null):(r.push(i),e.push(t),i+=1)})),r.push(i),e.forEach((t=>{if(t.type===n.ALT||t.type===n.CAT)for(let e=0;e<t.children.length;e+=1)t.children[e]=c(r,t.children[e])})),t.opcodes=e}))};this.syntax=function(e,r,n,i,o){if(o){if("traceObject"!==o.traceObject)throw new TypeError(`${t}trace argument is not a trace object`);a.trace=o}const c={};c.errors=n,c.strict=!!i,c.lines=r,c.findLine=u,c.charsLength=e.length,c.ruleCount=0;const h=a.parse(s,"file",e,c);h.success||n.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(t,e,r){const n={};return n.errors=r,n.lines=e,n.findLine=u,n.charsLength=t.length,a.ast.translate(n),r.length?null:(h(n.rules),{rules:n.rules,udts:n.udts,lineMap:n.rulesLineMap})},this.generateSource=function(t,e,r,i,o){let s,a,u,c="",h=0,l=1/0,f=0;const d=[],p=[];let y=0,g=0,m=0,b=0,w=0,v=0,_=0,E=0,S=0,A=0,I=0,T=0,R=0,M=0,k=0;r.forEach((t=>{d.push(t.lower),h+=t.opcodes.length,t.opcodes.forEach((t=>{switch(t.type){case n.ALT:y+=1;break;case n.CAT:g+=1;break;case n.RNM:m+=1;break;case n.UDT:b+=1;break;case n.REP:w+=1;break;case n.AND:v+=1;break;case n.NOT:_+=1;break;case n.BKA:T+=1;break;case n.BKN:R+=1;break;case n.BKR:I+=1;break;case n.ABG:M+=1;break;case n.AEN:k+=1;break;case n.TLS:for(E+=1,s=0;s<t.string.length;s+=1)t.string[s]<l&&(l=t.string[s]),t.string[s]>f&&(f=t.string[s]);break;case n.TBS:for(S+=1,s=0;s<t.string.length;s+=1)t.string[s]<l&&(l=t.string[s]),t.string[s]>f&&(f=t.string[s]);break;case n.TRG:A+=1,t.min<l&&(l=t.min),t.max>f&&(f=t.max);break;default:throw new Error("generateSource: unrecognized opcode")}}))})),d.sort(),i.length>0&&(i.forEach((t=>{p.push(t.lower)})),p.sort());let C,O="module.exports";return o&&"string"===typeof o&&(O=`let ${o}`),c+="// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>\n",c+="//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>\n",c+="//\n",c+="// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)\n",c+=`${O} = function grammar(){\n`,c+="  // ```\n",c+="  // SUMMARY\n",c+=`  //      rules = ${r.length}\n`,c+=`  //       udts = ${i.length}\n`,c+=`  //    opcodes = ${h}\n`,c+="  //        ---   ABNF original opcodes\n",c+=`  //        ALT = ${y}\n`,c+=`  //        CAT = ${g}\n`,c+=`  //        REP = ${w}\n`,c+=`  //        RNM = ${m}\n`,c+=`  //        TLS = ${E}\n`,c+=`  //        TBS = ${S}\n`,c+=`  //        TRG = ${A}\n`,c+="  //        ---   SABNF superset opcodes\n",c+=`  //        UDT = ${b}\n`,c+=`  //        AND = ${v}\n`,c+=`  //        NOT = ${_}\n`,c+=`  //        BKA = ${T}\n`,c+=`  //        BKN = ${R}\n`,c+=`  //        BKR = ${I}\n`,c+=`  //        ABG = ${M}\n`,c+=`  //        AEN = ${k}\n`,c+="  // characters = [",c+=E+S+A===0?" none defined ]":`${l} - ${f}]`,b>0&&(c+=" + user defined"),c+="\n",c+="  // ```\n",c+="  /* OBJECT IDENTIFIER (for internal parser use) */\n",c+="  this.grammarObject = 'grammarObject';\n",c+="\n",c+="  /* RULES */\n",c+="  this.rules = [];\n",r.forEach(((t,e)=>{let r="  this.rules[";r+=e,r+="] = {name: '",r+=t.name,r+="', lower: '",r+=t.lower,r+="', index: ",r+=t.index,r+=", isBkr: ",r+=t.isBkr,r+="};\n",c+=r})),c+="\n",c+="  /* UDTS */\n",c+="  this.udts = [];\n",i.length>0&&i.forEach(((t,e)=>{let r="  this.udts[";r+=e,r+="] = {name: '",r+=t.name,r+="', lower: '",r+=t.lower,r+="', index: ",r+=t.index,r+=", empty: ",r+=t.empty,r+=", isBkr: ",r+=t.isBkr,r+="};\n",c+=r})),c+="\n",c+="  /* OPCODES */\n",r.forEach(((t,e)=>{e>0&&(c+="\n"),c+=`  /* ${t.name} */\n`,c+=`  this.rules[${e}].opcodes = [];\n`,t.opcodes.forEach(((t,o)=>{let s;switch(t.type){case n.ALT:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, children: [${t.children.toString()}]};// ALT\n`;break;case n.CAT:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, children: [${t.children.toString()}]};// CAT\n`;break;case n.RNM:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, index: ${t.index}};// RNM(${r[t.index].name})\n`;break;case n.BKR:t.index>=r.length?(a=i[t.index-r.length].name,u=i[t.index-r.length].lower):(a=r[t.index].name,u=r[t.index].lower),s="%i",t.bkrCase===n.BKR_MODE_CS&&(s="%s"),t.bkrMode===n.BKR_MODE_UM?s+="%u":s+="%p",a=s+a,c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, index: ${t.index}, lower: '${u}', bkrCase: ${t.bkrCase}, bkrMode: ${t.bkrMode}};// BKR(\\${a})\n`;break;case n.UDT:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, empty: ${t.empty}, index: ${t.index}};// UDT(${i[t.index].name})\n`;break;case n.REP:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, min: ${t.min}, max: ${t.max}};// REP\n`;break;case n.AND:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}};// AND\n`;break;case n.NOT:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}};// NOT\n`;break;case n.ABG:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}};// ABG(%^)\n`;break;case n.AEN:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}};// AEN(%$)\n`;break;case n.BKA:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}};// BKA\n`;break;case n.BKN:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}};// BKN\n`;break;case n.TLS:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, string: [${t.string.toString()}]};// TLS\n`;break;case n.TBS:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, string: [${t.string.toString()}]};// TBS\n`;break;case n.TRG:c+=`  this.rules[${e}].opcodes[${o}] = {type: ${t.type}, min: ${t.min}, max: ${t.max}};// TRG\n`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}}))})),c+="\n",c+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",c+="  this.toString = function toString(){\n",c+='    let str = "";\n',e.forEach((e=>{const r=e.beginChar+e.length;C="",c+='    str += "';for(let n=e.beginChar;n<r;n+=1){switch(t[n]){case 9:C=" ";break;case 10:C="\\n";break;case 13:C="\\r";break;case 34:C='\\"';break;case 92:C="\\\\";break;default:C=String.fromCharCode(t[n]);break}c+=C}c+='";\n'})),c+="    return str;\n",c+="  }\n",c+="}\n",c},this.generateObject=function(t,e,r){const n={},i=[],o=[],s=t.slice(0);return n.grammarObject="grammarObject",e.forEach((t=>{i.push(t.lower)})),i.sort(),r.length>0&&(r.forEach((t=>{o.push(t.lower)})),o.sort()),n.callbacks=[],i.forEach((t=>{n.callbacks[t]=!1})),r.length>0&&o.forEach((t=>{n.callbacks[t]=!1})),n.rules=e,n.udts=r,n.toString=function(){return s},n}}},16406:function(t,e,r){r(21703),t.exports=function(){const t=r(92578),e="rule-attributes.js";let n=null;function i(t){return!(t.left||t.nested||t.right||t.cyclic)&&t.empty}function o(t){return!!(t.left||t.nested||t.right||t.cyclic)}function s(t,e){let r=0,n=0,s=0;for(r=0;r<e;r+=1)if(t[r].nested)return!0;for(r=0;r<e;r+=1)if(t[r].right&&!t[r].leaf)for(n=r+1;n<e;n+=1)if(!i(t[n]))return!0;for(r=e-1;r>=0;r-=1)if(t[r].left&&!t[r].leaf)for(n=r-1;n>=0;n-=1)if(!i(t[n]))return!0;for(r=0;r<e;r+=1)if(!t[r].empty&&!o(t[r]))for(n=r+1;n<e;n+=1)if(o(t[n]))for(s=n+1;s<e;s+=1)if(!t[s].empty&&!o(t[s]))return!0;return!1}function a(t,e){for(let r=0;r<e;r+=1)if(!t[r].cyclic)return!1;return!0}function u(t,e){for(let r=0;r<e;r+=1){if(t[r].left)return!0;if(!t[r].empty)return!1}return!1}function c(t,e){for(let r=e-1;r>=0;r-=1){if(t[r].right)return!0;if(!t[r].empty)return!1}return!1}function h(t,e){for(let r=0;r<e;r+=1)if(!t[r].empty)return!1;return!0}function l(t,e){for(let r=0;r<e;r+=1)if(!t[r].finite)return!1;return!0}function f(t,e,r,n){let i=0;const o=e[r],f=o.children.length,d=[];for(i=0;i<f;i+=1)d.push(t.attrGen());for(i=0;i<f;i+=1)y(t,e,o.children[i],d[i]);n.left=u(d,f),n.right=c(d,f),n.nested=s(d,f),n.empty=h(d,f),n.finite=l(d,f),n.cyclic=a(d,f)}function d(t,e,r,n){let i=0;const o=e[r],s=o.children.length,a=[];for(i=0;i<s;i+=1)a.push(t.attrGen());for(i=0;i<s;i+=1)y(t,e,o.children[i],a[i]);for(n.left=!1,n.right=!1,n.nested=!1,n.empty=!1,n.finite=!1,n.cyclic=!1,i=0;i<s;i+=1)a[i].left&&(n.left=!0),a[i].nested&&(n.nested=!0),a[i].right&&(n.right=!0),a[i].empty&&(n.empty=!0),a[i].finite&&(n.finite=!0),a[i].cyclic&&(n.cyclic=!0)}function p(t,e,r,n){const i=e[r];i.index>=t.ruleCount?(n.empty=t.udts[i.index-t.ruleCount].empty,n.finite=!0):(g(t,i.index,n),n.left=!1,n.nested=!1,n.right=!1,n.cyclic=!1)}function y(e,r,n,i){e.attrInit(i);const o=r[n];switch(o.type){case t.ALT:d(e,r,n,i);break;case t.CAT:f(e,r,n,i);break;case t.REP:y(e,r,n+1,i),0===o.min&&(i.empty=!0,i.finite=!0);break;case t.RNM:g(e,r[n].index,i);break;case t.BKR:p(e,r,n,i);break;case t.AND:case t.NOT:case t.BKA:case t.BKN:y(e,r,n+1,i),i.empty=!0;break;case t.TLS:i.empty=!r[n].string.length,i.finite=!0,i.cyclic=!1;break;case t.TBS:case t.TRG:i.empty=!1,i.finite=!0,i.cyclic=!1;break;case t.UDT:i.empty=o.empty,i.finite=!0,i.cyclic=!1;break;case t.ABG:case t.AEN:i.empty=!0,i.finite=!0,i.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${o}`)}}function g(t,e,r){const n=t.attrsWorking[e];n.isComplete?t.attrCopy(r,n):n.isOpen?e===t.startRule?e===t.startRule&&(r.left=!0,r.right=!0,r.cyclic=!0,r.leaf=!0):r.finite=!0:(n.isOpen=!0,y(t,n.rule.opcodes,0,r),n.left=r.left,n.right=r.right,n.nested=r.nested,n.empty=r.empty,n.finite=r.finite,n.cyclic=r.cyclic,n.leaf=!1,n.isOpen=!1,n.isComplete=!0)}const m=t=>{n=t;let e=0,r=0;const i=n.attrGen();for(e=0;e<n.ruleCount;e+=1){for(r=0;r<n.ruleCount;r+=1)n.attrInit(n.attrsWorking[r]);n.startRule=e,g(n,e,i),n.attrCopy(n.attrs[e],n.attrsWorking[e])}n.attributesComplete=!0;let o=null;for(e=0;e<n.ruleCount;e+=1)if(o=n.attrs[e],o.left||!o.finite||o.cyclic){const t=n.attrGen(o.rule);n.attrCopy(t,o),n.attrsErrors.push(t),n.attrsErrorCount+=1}},b=t=>t?"t":"f",w=t=>t?"e":"f",v=t=>t?"t":"e",_=(e,r,i,o)=>{let s=`${e}:${r}:`;return s+=`${w(i.left)} `,s+=`${b(i.nested)} `,s+=`${b(i.right)} `,s+=`${w(i.cyclic)} `,s+=`${v(i.finite)} `,s+=`${b(i.empty)}:`,s+=`${n.typeToString(o.recursiveType)}:`,s+=o.recursiveType===t.ATTR_MR?o.groupNumber:"-",s+=`:${i.rule.name}\n`,s},E=()=>{let t="LEGEND - t=true, f=false, e=error\n";return t+="sequence:rule index:left nested right cyclic finite empty:type:group number:rule name\n",t},S=()=>{let t=null,e=null,r="";if(r+="RULE ATTRIBUTES WITH ERRORS\n",r+=E(),n.attrsErrorCount)for(let i=0;i<n.attrsErrorCount;i+=1)t=n.attrsErrors[i],e=n.ruleDeps[t.rule.index],r+=_(i,t.rule.index,t,e);else r+="<none>\n";return r},A=t=>{let e=0,r=0,i=null,o=null,s="",{ruleIndexes:a}=n;for(97===t?a=n.ruleAlphaIndexes:116===t&&(a=n.ruleTypeIndexes),e=0;e<n.ruleCount;e+=1)r=a[e],i=n.attrs[r],o=n.ruleDeps[r],s+=_(e,r,i,o);return s},I=(t="index")=>{if(!n.attributesComplete)throw new Error(`${e}:showAttributes: attributes not available`);let r="";const i="RULE ATTRIBUTES\n";return 97===t.charCodeAt(0)?(r+="alphabetical by rule name\n",r+=i,r+=E(),r+=A(97)):116===t.charCodeAt(0)?(r+="ordered by rule type\n",r+=i,r+=E(),r+=A(116)):(r+="ordered by rule index\n",r+=i,r+=E(),r+=A()),r};return{ruleAttributes:m,showAttributes:I,showAttributeErrors:S}}()},78835:function(t,e,r){t.exports=(()=>{const t=r(92578);let e=null;const n=(e,r,i,o)=>{let s=0,a=0;const u=r[i];o[i]=!0;const c=u.rule.opcodes;for(s=0;s<c.length;s+=1){const i=c[s];if(i.type===t.RNM)for(u.refersTo[i.index]=!0,o[i.index]||n(e,r,i.index,o),a=0;a<e;a+=1)r[i.index].refersTo[a]&&(u.refersTo[a]=!0);else i.type===t.UDT?u.refersToUdt[i.index]=!0:i.type===t.BKR&&(i.index<e?(u.refersTo[i.index]=!0,o[i.index]||n(e,r,i.index,o)):u.refersToUdt[e-i.index]=!0)}},i=r=>{e=r;let i=0,o=0,s=0,a=null,u=null,c=!1;e.dependenciesComplete=!1;const h=e.falseArray(e.ruleCount);for(i=0;i<e.ruleCount;i+=1)e.falsifyArray(h),n(e.ruleCount,e.ruleDeps,i,h);for(i=0;i<e.ruleCount;i+=1)for(o=0;o<e.ruleCount;o+=1)i!==o&&e.ruleDeps[o].refersTo[i]&&(e.ruleDeps[i].referencedBy[o]=!0);for(i=0;i<e.ruleCount;i+=1)e.ruleDeps[i].recursiveType=t.ATTR_N,e.ruleDeps[i].refersTo[i]&&(e.ruleDeps[i].recursiveType=t.ATTR_R);for(s=-1,i=0;i<e.ruleCount;i+=1)if(a=e.ruleDeps[i],a.recursiveType===t.ATTR_R)for(c=!0,o=0;o<e.ruleCount;o+=1)i!==o&&(u=e.ruleDeps[o],u.recursiveType===t.ATTR_R&&a.refersTo[o]&&u.refersTo[i]&&(c&&(s+=1,a.recursiveType=t.ATTR_MR,a.groupNumber=s,c=!1),u.recursiveType=t.ATTR_MR,u.groupNumber=s));e.isMutuallyRecursive=s>-1,e.ruleAlphaIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesType),e.isMutuallyRecursive&&e.ruleTypeIndexes.sort(e.compRulesGroup),e.udtCount&&e.udtAlphaIndexes.sort(e.compUdtsAlpha),e.dependenciesComplete=!0},o=(t=null)=>{let r=0,n=0,i=0,o=0;const s=e.ruleCount-1,a=e.udtCount-1,u=100;let c="",h="";const l="=> ",f="<= ";let d=!1,p=null,{ruleIndexes:y}=e,{udtIndexes:g}=e;for(97===t?(y=e.ruleAlphaIndexes,g=e.udtAlphaIndexes):116===t&&(y=e.ruleTypeIndexes,g=e.udtAlphaIndexes),r=0;r<e.ruleCount;r+=1){for(p=e.ruleDeps[y[r]],h=`${y[r]}:${e.typeToString(p.recursiveType)}:`,e.isMutuallyRecursive&&(h+=p.groupNumber>-1?p.groupNumber:"-",h+=":"),h+=" ",c+=`${h+e.rules[y[r]].name}\n`,d=!0,i=0,o=c.length,c+=h,n=0;n<e.ruleCount;n+=1)p.refersTo[y[n]]&&(d?(c+=l,d=!1,c+=e.ruleDeps[y[n]].rule.name):c+=`, ${e.ruleDeps[y[n]].rule.name}`,i+=1),c.length-o>u&&n!==s&&(c+=`\n${h}${l}`,o=c.length);if(e.udtCount)for(n=0;n<e.udtCount;n+=1)p.refersToUdt[g[n]]&&(d?(c+=l,d=!1,c+=e.udts[g[n]].name):c+=`, ${e.udts[g[n]].name}`,i+=1),c.length-o>u&&n!==a&&(c+=`\n${h}${l}`,o=c.length);for(0===i&&(c+="=> <none>\n"),!1===d&&(c+="\n"),d=!0,i=0,o=c.length,c+=h,n=0;n<e.ruleCount;n+=1)p.referencedBy[y[n]]&&(d?(c+=f,d=!1,c+=e.ruleDeps[y[n]].rule.name):c+=`, ${e.ruleDeps[y[n]].rule.name}`,i+=1),c.length-o>u&&n!==s&&(c+=`\n${h}${l}`,o=c.length);0===i&&(c+="<= <none>\n"),!1===d&&(c+="\n"),c+="\n"}return c},s=(t="index")=>{let r="RULE DEPENDENCIES(index:type:[group number:])\n";return r+="=> refers to rule names\n",r+="<= referenced by rule names\n",e.dependenciesComplete?(97===t.charCodeAt(0)?(r+="alphabetical by rule name\n",r+=o(97)):116===t.charCodeAt(0)?(r+="ordered by rule type\n",r+=o(116)):(r+="ordered by rule index\n",r+=o(null)),r):r};return{ruleDependencies:i,showRuleDependencies:s}})()},53466:function(t){t.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let t="";return t+=";\n",t+="; ABNF for JavaScript APG 2.0 SABNF\n",t+="; RFC 5234 with some restrictions and additions.\n",t+="; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation\n",t+=';  - accepts %s"string" as a case-sensitive string\n',t+=';  - accepts %i"string" as a case-insensitive string\n',t+=';  - accepts "string" as a case-insensitive string\n',t+=";\n",t+="; Some restrictions:\n",t+=";   1. Rules must begin at first character of each line.\n",t+=";      Indentations on first rule and rules thereafter are not allowed.\n",t+=";   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.\n",t+=";   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.\n",t+=";      However, a working parser cannot be generated from them.\n",t+=";\n",t+="; Super set (SABNF) additions:\n",t+=";   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.\n",t+=";      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found\n",t+=";      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found\n",t+=";      e.g. &%d13 or &rule or !(A / B)\n",t+=";   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.\n",t+=";      'name' is alpha followed by alpha/num/hyphen just like a rule name.\n",t+=";      u_name may be used as an element but no rule definition is given.\n",t+=";      e.g. rule = A / u_myUdt\n",t+=';           A = "a"\n',t+=";      would be a valid grammar.\n",t+=";   3. Case-sensitive, single-quoted strings are accepted.\n",t+=";      e.g. 'abc' would be equivalent to %d97.98.99\n",t+=';      (kept for backward compatibility, but superseded by %s"abc")  \n',t+="; New 12/26/2015\n",t+=";   4. Look-behind operators are accepted as element prefixes.\n",t+=";      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found\n",t+=";      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found\n",t+=";      e.g. &&%d13 or &&rule or !!(A / B)\n",t+=";   5. Back reference operators, i.e. \\rulename, are accepted.\n",t+=";      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts\n",t+=";      to match is a phrase previously matched by the rule 'rulename'.\n",t+=";      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.\n",t+=";      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.\n",t+=";      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.\n",t+=";      Back reference modifiers can be used to specify case and mode.\n",t+=";      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA\n",t+=";      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.\n",t+=";      Modifiers %u and %p determine universal mode and parent frame mode, respectively.\n",t+=";      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. \n",t+=";   7. String begin anchor, ABG(%^) matches the beginning of the input string location.\n",t+=";      Returns EMPTY or NOMATCH. Never consumes any characters.\n",t+=";   8. String end anchor, AEN(%$) matches the end of the input string location.\n",t+=";      Returns EMPTY or NOMATCH. Never consumes any characters.\n",t+=";\n",t+="File            = *(BlankLine / Rule / RuleError)\n",t+="BlankLine       = *(%d32/%d9) [comment] LineEnd\n",t+="Rule            = RuleLookup owsp Alternation ((owsp LineEnd)\n",t+="                / (LineEndError LineEnd))\n",t+="RuleLookup      = RuleNameTest owsp DefinedAsTest\n",t+="RuleNameTest    = RuleName/RuleNameError\n",t+="RuleName        = alphanum\n",t+="RuleNameError   = 1*(%d33-60/%d62-126)\n",t+="DefinedAsTest   = DefinedAs / DefinedAsError\n",t+="DefinedAsError  = 1*2%d33-126\n",t+="DefinedAs       = IncAlt / Defined\n",t+="Defined         = %d61\n",t+="IncAlt          = %d61.47\n",t+="RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd\n",t+="LineEndError    = 1*(%d32-126 / %d9  / LineContinue)\n",t+="Alternation     = Concatenation *(owsp AltOp Concatenation)\n",t+="Concatenation   = Repetition *(CatOp Repetition)\n",t+="Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)\n",t+="Modifier        = (Predicate [RepOp])\n",t+="                / RepOp\n",t+="Predicate       = BkaOp\n",t+="                / BknOp\n",t+="                / AndOp\n",t+="                / NotOp\n",t+="BasicElement    = UdtOp\n",t+="                / RnmOp\n",t+="                / TrgOp\n",t+="                / TbsOp\n",t+="                / TlsOp\n",t+="                / ClsOp\n",t+="                / BkrOp\n",t+="                / AbgOp\n",t+="                / AenOp\n",t+="                / ProsVal\n",t+="BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)\n",t+="Group           = GroupOpen  Alternation (GroupClose / GroupError)\n",t+="GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr\n",t+="GroupOpen       = %d40 owsp\n",t+="GroupClose      = owsp %d41\n",t+="Option          = OptionOpen Alternation (OptionClose / OptionError)\n",t+="OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr\n",t+="OptionOpen      = %d91 owsp\n",t+="OptionClose     = owsp %d93\n",t+="RnmOp           = alphanum\n",t+="BkrOp           = %d92 [bkrModifier] bkr-name\n",t+="bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])\n",t+="cs              = '%s'\n",t+="ci              = '%i'\n",t+="um              = '%u'\n",t+="pm              = '%p'\n",t+="bkr-name        = uname / ename / rname\n",t+="rname           = alphanum\n",t+="uname           = %d117.95 alphanum\n",t+="ename           = %d101.95 alphanum\n",t+="UdtOp           = udt-empty\n",t+="                / udt-non-empty\n",t+="udt-non-empty   = %d117.95 alphanum\n",t+="udt-empty       = %d101.95 alphanum\n",t+="RepOp           = (rep-min StarOp rep-max)\n",t+="                / (rep-min StarOp)\n",t+="                / (StarOp rep-max)\n",t+="                / StarOp\n",t+="                / rep-min-max\n",t+="AltOp           = %d47 owsp\n",t+="CatOp           = wsp\n",t+="StarOp          = %d42\n",t+="AndOp           = %d38\n",t+="NotOp           = %d33\n",t+="BkaOp           = %d38.38\n",t+="BknOp           = %d33.33\n",t+="AbgOp           = %d37.94\n",t+="AenOp           = %d37.36\n",t+="TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))\n",t+="TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))\n",t+="TlsOp           = TlsCase TlsOpen TlsString TlsClose\n",t+='TlsCase         = ["%i" / "%s"]\n',t+="TlsOpen         = %d34\n",t+="TlsClose        = %d34\n",t+="TlsString       = *(%d32-33/%d35-126/StringTab)\n",t+="StringTab       = %d9\n",t+="ClsOp           = ClsOpen ClsString ClsClose\n",t+="ClsOpen         = %d39\n",t+="ClsClose        = %d39\n",t+="ClsString       = *(%d32-38/%d40-126/StringTab)\n",t+="ProsVal         = ProsValOpen ProsValString ProsValClose\n",t+="ProsValOpen     = %d60\n",t+="ProsValString   = *(%d32-61/%d63-126/StringTab)\n",t+="ProsValClose    = %d62\n",t+="rep-min         = rep-num\n",t+="rep-min-max     = rep-num\n",t+="rep-max         = rep-num\n",t+="rep-num         = 1*(%d48-57)\n",t+="dString         = dnum\n",t+="xString         = xnum\n",t+="bString         = bnum\n",t+="Dec             = (%d68/%d100)\n",t+="Hex             = (%d88/%d120)\n",t+="Bin             = (%d66/%d98)\n",t+="dmin            = dnum\n",t+="dmax            = dnum\n",t+="bmin            = bnum\n",t+="bmax            = bnum\n",t+="xmin            = xnum\n",t+="xmax            = xnum\n",t+="dnum            = 1*(%d48-57)\n",t+="bnum            = 1*%d48-49\n",t+="xnum            = 1*(%d48-57 / %d65-70 / %d97-102)\n",t+=";\n",t+="; Basics\n",t+="alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)\n",t+="owsp            = *space\n",t+="wsp             = 1*space\n",t+="space           = %d32\n",t+="                / %d9\n",t+="                / comment\n",t+="                / LineContinue\n",t+="comment         = %d59 *(%d32-126 / %d9)\n",t+="LineEnd         = %d13.10\n",t+="                / %d10\n",t+="                / %d13\n",t+="LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)\n",t}}},12951:function(t,e,r){const n=r(92578),i=r(80107);function o(t,e,r,i,o){return t===n.SEM_PRE?(o.endLength=0,o.textLength=0,o.invalidCount=0):o.lines.push({lineNo:o.lines.length,beginChar:r,length:i,textLength:o.textLength,endType:o.endType,invalidChars:o.invalidCount}),n.SEM_OK}function s(t,e,r,i,o){return t===n.SEM_PRE&&(o.textLength=i),n.SEM_OK}function a(t,e,r,i,o){return t===n.SEM_PRE?(o.endLength=0,o.textLength=0,o.invalidCount=0):o.strict?(o.lines.push({lineNo:o.lines.length,beginChar:r,length:i,textLength:i,endType:"none",invalidChars:o.invalidCount}),o.errors.push({line:o.lineNo,char:r+i,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(e.push(10),o.lines.push({lineNo:o.lines.length,beginChar:r,length:i+1,textLength:i,endType:"LF",invalidChars:o.invalidCount})),n.SEM_OK}function u(t,e,r,o,s){return t===n.SEM_PRE&&s.errors.push({line:s.lineNo,char:r,msg:`invalid character found '\\x${i.charToHex(e[r])}'`}),n.SEM_OK}function c(t,e,r,i,o){return t===n.SEM_POST&&(o.lineNo+=1),n.SEM_OK}function h(t,e,r,i,o){return t===n.SEM_PRE&&(o.endType="LF",o.strict&&o.errors.push({line:o.lineNo,char:r,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),n.SEM_OK}function l(t,e,r,i,o){return t===n.SEM_PRE&&(o.endType="CR",o.strict&&o.errors.push({line:o.lineNo,char:r,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),n.SEM_OK}function f(t,e,r,i,o){return t===n.SEM_PRE&&(o.endType="CRLF"),n.SEM_OK}const d=[];d.line=o,d["line-text"]=s,d["last-line"]=a,d.invalid=u,d.end=c,d.lf=h,d.cr=l,d.crlf=f,e.callbacks=d},7690:function(t){t.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let t="";return t+="file = *line [last-line]\n",t+="line = line-text end\n",t+="line-text = *(valid/invalid)\n",t+="last-line = 1*(valid/invalid)\n",t+="valid = %d32-126 / %d9\n",t+="invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff\n",t+="end = CRLF / LF / CR\n",t+="CRLF = %d13.10\n",t+="LF = %d10\n",t+="CR = %d13\n",t}}},61510:function(t,e,r){r(21703),t.exports=function(t,e,n,i){const o="scanner.js: ",s=r(88017),a=new(r(7690)),{callbacks:u}=r(12951),c=[],h=new s.parser;if(h.ast=new s.ast,h.ast.callbacks=u,i){if("traceObject"!==i.traceObject)throw new TypeError(`${o}trace argument is not a trace object`);h.trace=i}const l=h.parse(a,"file",t);if(!0!==l.success)return void e.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});const f={lines:c,lineNo:0,errors:e,strict:!!n};return h.ast.translate(f),c}},42625:function(t,e,r){r(21703),t.exports=function(){const t=r(88017),e=t.ids,n=function(){this.names=[],this.add=function(t){let e=-1;const r=this.get(t);return-1===r&&(e={name:t,lower:t.toLowerCase(),index:this.names.length},this.names.push(e)),e},this.get=function(t){let e=-1;const r=t.toLowerCase();for(let n=0;n<this.names.length;n+=1)if(this.names[n].lower===r){e=this.names[n];break}return e}},i=function(t,e,r){let n=0;for(let i=e;i<e+r;i+=1)n=10*n+t[i]-48;return n},o=function(t,e,r){let n=0;for(let i=e;i<e+r;i+=1)n=2*n+t[i]-48;return n},s=function(t,e,r){let n=0;for(let i=e;i<e+r;i+=1){let e=t[i];if(e>=48&&e<=57)e-=48;else if(e>=65&&e<=70)e-=55;else{if(!(e>=97&&e<=102))throw new Error("hexnum out of range");e-=87}n=16*n+e}return n};function a(t,r,i,o,s){const a=e.SEM_OK;if(t===e.SEM_PRE)s.ruleNames=new n,s.udtNames=new n,s.rules=[],s.udts=[],s.rulesLineMap=[],s.opcodes=[],s.altStack=[],s.topStack=null,s.topRule=null;else if(t===e.SEM_POST){let t;s.rules.forEach((r=>{r.isBkr=!1,r.opcodes.forEach((r=>{r.type===e.RNM&&(t=s.ruleNames.get(r.index.name),-1===t?(s.errors.push({line:s.findLine(s.lines,r.index.phraseIndex,s.charsLength),char:r.index.phraseIndex,msg:`Rule name '${r.index.name}' used but not defined.`}),r.index=-1):r.index=t.index)}))})),s.udts.forEach((t=>{t.isBkr=!1})),s.rules.forEach((r=>{r.opcodes.forEach((n=>{n.type===e.BKR&&(r.hasBkr=!0,t=s.ruleNames.get(n.index.name),-1!==t?(s.rules[t.index].isBkr=!0,n.index=t.index):(t=s.udtNames.get(n.index.name),-1!==t?(s.udts[t.index].isBkr=!0,n.index=s.rules.length+t.index):(s.errors.push({line:s.findLine(s.lines,n.index.phraseIndex,s.charsLength),char:n.index.phraseIndex,msg:`Back reference name '${n.index.name}' refers to undefined rule or unamed UDT.`}),n.index=-1)))}))}))}return a}function u(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_PRE&&(o.altStack.length=0,o.topStack=null,o.rulesLineMap.push({line:o.findLine(o.lines,n,o.charsLength),char:n})),s}function c(t,r,n,i,o){const s=e.SEM_OK;if(t===e.SEM_PRE)o.ruleName="",o.definedas="";else if(t===e.SEM_POST){let t;"="===o.definedas?(t=o.ruleNames.add(o.ruleName),-1===t?(o.definedas=null,o.errors.push({line:o.findLine(o.lines,n,o.charsLength),char:n,msg:`Rule name '${o.ruleName}' previously defined.`})):(o.topRule={name:t.name,lower:t.lower,opcodes:[],index:t.index},o.rules.push(o.topRule),o.opcodes=o.topRule.opcodes)):(t=o.ruleNames.get(o.ruleName),-1===t?(o.definedas=null,o.errors.push({line:o.findLine(o.lines,n,o.charsLength),char:n,msg:`Rule name '${o.ruleName}' for incremental alternate not previously defined.`})):(o.topRule=o.rules[t.index],o.opcodes=o.topRule.opcodes))}return s}function h(t,r,n,i,o){let s=e.SEM_OK;if(t===e.SEM_PRE){const t=!0;while(t){if(null===o.definedas){s=e.SEM_SKIP;break}if(null===o.topStack){if("="===o.definedas){o.topStack={alt:{type:e.ALT,children:[]},cat:null},o.altStack.push(o.topStack),o.opcodes.push(o.topStack.alt);break}o.topStack={alt:o.opcodes[0],cat:null},o.altStack.push(o.topStack);break}o.topStack={alt:{type:e.ALT,children:[]},cat:null},o.altStack.push(o.topStack),o.opcodes.push(o.topStack.alt);break}}else t===e.SEM_POST&&(o.altStack.pop(),o.altStack.length>0?o.topStack=o.altStack[o.altStack.length-1]:o.topStack=null);return s}function l(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_PRE?(o.topStack.alt.children.push(o.opcodes.length),o.topStack.cat={type:e.CAT,children:[]},o.opcodes.push(o.topStack.cat)):t===e.SEM_POST&&(o.topStack.cat=null),s}function f(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_PRE&&o.topStack.cat.children.push(o.opcodes.length),s}function d(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&o.opcodes.push({type:e.REP,min:0,max:1,char:n}),s}function p(r,n,i,o,s){const a=e.SEM_OK;return r===e.SEM_PRE&&(s.ruleName=t.utils.charsToString(n,i,o)),a}function y(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&(o.definedas="="),s}function g(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&(o.definedas="=/"),s}function m(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_PRE?(o.min=0,o.max=1/0,o.topRep={type:e.REP,min:0,max:1/0},o.opcodes.push(o.topRep)):t===e.SEM_POST&&(o.min>o.max&&o.errors.push({line:o.findLine(o.lines,n,o.charsLength),char:n,msg:`repetition min cannot be greater than max: min: ${o.min}: max: ${o.max}`}),o.topRep.min=o.min,o.topRep.max=o.max),s}function b(t,r,n,o,s){const a=e.SEM_OK;return t===e.SEM_POST&&(s.min=i(r,n,o)),a}function w(t,r,n,o,s){const a=e.SEM_OK;return t===e.SEM_POST&&(s.max=i(r,n,o)),a}function v(t,r,n,o,s){const a=e.SEM_OK;return t===e.SEM_POST&&(s.max=i(r,n,o),s.min=s.max),a}function _(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&o.opcodes.push({type:e.AND}),s}function E(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&o.opcodes.push({type:e.NOT}),s}function S(r,n,i,o,s){const a=e.SEM_OK;return r===e.SEM_POST&&s.opcodes.push({type:e.RNM,index:{phraseIndex:i,name:t.utils.charsToString(n,i,o)}}),a}function A(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&o.opcodes.push({type:e.ABG}),s}function I(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&o.opcodes.push({type:e.AEN}),s}function T(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&o.opcodes.push({type:e.BKA}),s}function R(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&o.opcodes.push({type:e.BKN}),s}function M(r,n,i,o,s){const a=e.SEM_OK;return r===e.SEM_PRE?(s.ci=!0,s.cs=!1,s.um=!0,s.pm=!1):r===e.SEM_POST&&s.opcodes.push({type:e.BKR,bkrCase:!0===s.cs?e.BKR_MODE_CS:e.BKR_MODE_CI,bkrMode:!0===s.pm?e.BKR_MODE_PM:e.BKR_MODE_UM,index:{phraseIndex:s.bkrname.phraseIndex,name:t.utils.charsToString(n,s.bkrname.phraseIndex,s.bkrname.phraseLength)}}),a}function k(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&(o.ci=!0),s}function C(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&(o.cs=!0),s}function O(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&(o.um=!0),s}function P(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&(o.pm=!0),s}function B(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&(o.bkrname={phraseIndex:n,phraseLength:i}),s}function x(r,n,i,o,s){const a=e.SEM_OK;if(r===e.SEM_POST){const r=t.utils.charsToString(n,i,o);let a=s.udtNames.add(r);if(-1===a){if(a=s.udtNames.get(r),-1===a)throw new Error("semUdtEmpty: name look up error")}else s.udts.push({name:a.name,lower:a.lower,index:a.index,empty:!0});s.opcodes.push({type:e.UDT,empty:!0,index:a.index})}return a}function N(r,n,i,o,s){const a=e.SEM_OK;if(r===e.SEM_POST){const r=t.utils.charsToString(n,i,o);let a=s.udtNames.add(r);if(-1===a){if(a=s.udtNames.get(r),-1===a)throw new Error("semUdtNonEmpty: name look up error")}else s.udts.push({name:a.name,lower:a.lower,index:a.index,empty:!1});s.opcodes.push({type:e.UDT,empty:!1,index:a.index,syntax:null,semantic:null})}return a}function D(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_PRE&&(o.tlscase=!0),s}function L(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&i>0&&(83===r[n+1]||115===r[n+1])&&(o.tlscase=!1),s}function U(t,r,n,i,o){const s=e.SEM_OK;if(t===e.SEM_POST)if(o.tlscase){const t=r.slice(n,n+i);for(let e=0;e<t.length;e+=1)t[e]>=65&&t[e]<=90&&(t[e]+=32);o.opcodes.push({type:e.TLS,string:t})}else o.opcodes.push({type:e.TBS,string:r.slice(n,n+i)});return s}function j(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_POST&&(i<=2?o.opcodes.push({type:e.TLS,string:[]}):o.opcodes.push({type:e.TBS,string:r.slice(n+1,n+i-1)})),s}function F(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_PRE?o.tbsstr=[]:t===e.SEM_POST&&o.opcodes.push({type:e.TBS,string:o.tbsstr}),s}function K(t,r,n,i,o){const s=e.SEM_OK;return t===e.SEM_PRE?(o.min=0,o.max=0):t===e.SEM_POST&&(o.min>o.max&&o.errors.push({line:o.findLine(o.lines,n,o.charsLength),char:n,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${o.min}: max: ${o.max}`}),o.opcodes.push({type:e.TRG,min:o.min,max:o.max})),s}function $(t,r,n,o,s){const a=e.SEM_OK;return t===e.SEM_POST&&(s.min=i(r,n,o)),a}function q(t,r,n,o,s){const a=e.SEM_OK;return t===e.SEM_POST&&(s.max=i(r,n,o)),a}function H(t,r,n,i,s){const a=e.SEM_OK;return t===e.SEM_POST&&(s.min=o(r,n,i)),a}function z(t,r,n,i,s){const a=e.SEM_OK;return t===e.SEM_POST&&(s.max=o(r,n,i)),a}function V(t,r,n,i,o){const a=e.SEM_OK;return t===e.SEM_POST&&(o.min=s(r,n,i)),a}function G(t,r,n,i,o){const a=e.SEM_OK;return t===e.SEM_POST&&(o.max=s(r,n,i)),a}function W(t,r,n,o,s){const a=e.SEM_OK;return t===e.SEM_POST&&s.tbsstr.push(i(r,n,o)),a}function Y(t,r,n,i,s){const a=e.SEM_OK;return t===e.SEM_POST&&s.tbsstr.push(o(r,n,i)),a}function J(t,r,n,i,o){const a=e.SEM_OK;return t===e.SEM_POST&&o.tbsstr.push(s(r,n,i)),a}this.callbacks=[],this.callbacks.abgop=A,this.callbacks.aenop=I,this.callbacks.alternation=h,this.callbacks.andop=_,this.callbacks.bmax=z,this.callbacks.bmin=H,this.callbacks.bkaop=T,this.callbacks.bknop=R,this.callbacks.bkrop=M,this.callbacks["bkr-name"]=B,this.callbacks.bstring=Y,this.callbacks.clsop=j,this.callbacks.ci=k,this.callbacks.cs=C,this.callbacks.um=O,this.callbacks.pm=P,this.callbacks.concatenation=l,this.callbacks.defined=y,this.callbacks.dmax=q,this.callbacks.dmin=$,this.callbacks.dstring=W,this.callbacks.file=a,this.callbacks.incalt=g,this.callbacks.notop=E,this.callbacks.optionopen=d,this.callbacks["rep-max"]=w,this.callbacks["rep-min"]=b,this.callbacks["rep-min-max"]=v,this.callbacks.repetition=f,this.callbacks.repop=m,this.callbacks.rnmop=S,this.callbacks.rule=u,this.callbacks.rulelookup=c,this.callbacks.rulename=p,this.callbacks.tbsop=F,this.callbacks.tlscase=L,this.callbacks.tlsstring=U,this.callbacks.tlsop=D,this.callbacks.trgop=K,this.callbacks["udt-empty"]=x,this.callbacks["udt-non-empty"]=N,this.callbacks.xmax=G,this.callbacks.xmin=V,this.callbacks.xstring=J}},77089:function(t,e,r){r(21703),t.exports=function(){const t="show-rules.js",e=function(e=[],r=[],n="index"){const i="showRules";let o=[],s=[];const a=[],u=[],c=e,h=r,l=e.length,f=r.length;let d,p="RULE/UDT NAMES";function y(t,e){return c[t].lower<c[e].lower?-1:c[t].lower>c[e].lower?1:0}function g(t,e){return h[t].lower<h[e].lower?-1:h[t].lower>h[e].lower?1:0}if(!Array.isArray(e)||!e.length)throw new Error(`${t}:${i}: rules arg must be array with length > 0`);if(!Array.isArray(r))throw new Error(`${t}:${i}: udts arg must be array`);for(d=0;d<l;d+=1)a.push(d);if(o=a.slice(0),o.sort(y),f){for(d=0;d<f;d+=1)u.push(d);s=u.slice(0),s.sort(g)}if(97===n.charCodeAt(0)){for(p+=" - alphabetical by rule/UDT name\n",d=0;d<l;d+=1)p+=`${d}: ${o[d]}: ${c[o[d]].name}\n`;if(f)for(d=0;d<f;d+=1)p+=`${d}: ${s[d]}: ${h[s[d]].name}\n`}else{for(p+=" - ordered by rule/UDT index\n",d=0;d<l;d+=1)p+=`${d}: ${c[d].name}\n`;if(f)for(d=0;d<f;d+=1)p+=`${d}: ${h[d].name}\n`}return p};return e}()},40454:function(t,e,r){r(21703),t.exports=function(){const t="syntax-callbacks.js: ",e=r(88017),n=e.ids;let i;const o=function(e,r,i,o){switch(e.state){case n.ACTIVE:o.altStack=[],o.repCount=0;break;case n.EMPTY:o.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case n.MATCH:0===o.ruleCount&&o.errors.push({line:0,char:0,msg:"no rules defined"});break;case n.NOMATCH:throw new Error(`${t}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${t}synFile: unrecognized case.`)}},s=function(e,r,o,s){switch(e.state){case n.ACTIVE:s.altStack.length=0,i={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},s.altStack.push(i);break;case n.EMPTY:throw new Error(`${t}synRule: EMPTY: rule cannot be empty`);case n.NOMATCH:break;case n.MATCH:s.ruleCount+=1;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},a=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},u=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},c=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},h=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.strict&&o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},l=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.strict&&o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},f=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.strict&&o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},d=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.strict&&o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},p=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.strict&&o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},y=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.strict&&o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},g=function(r,i,o,s){switch(r.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(s.strict){const t=e.utils.charsToString(i,o,r.phraseLength);s.errors.push({line:s.findLine(s.lines,o,s.charsLength),char:o,msg:`Back reference operator(${t}) found - strict ABNF specified.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},m=function(r,i,o,s){switch(r.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(s.strict){const t=e.utils.charsToString(i,o,r.phraseLength);s.errors.push({line:s.findLine(s.lines,o,s.charsLength),char:o,msg:`UDT operator found(${t}) - strict ABNF specified.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},b=function(e,r,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i.tlsOpen=o;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},w=function(e,r,i,o){switch(e.state){case n.ACTIVE:o.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:!1!==o.stringTabChar&&o.errors.push({line:o.findLine(o.lines,o.stringTabChar),char:o.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},v=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.stringTabChar=i;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},_=function(e,r,o,s){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:s.errors.push({line:s.findLine(s.lines,i.tlsOpen),char:i.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),i.basicError=!0,i.tlsOpen=null;break;case n.MATCH:i.tlsOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},E=function(e,r,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i.clsOpen=o;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},S=function(e,r,i,o){switch(e.state){case n.ACTIVE:o.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:!1!==o.stringTabChar&&o.errors.push({line:o.findLine(o.lines,o.stringTabChar),char:o.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},A=function(e,r,o,s){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:s.errors.push({line:s.findLine(s.lines,i.clsOpen),char:i.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),i.clsOpen=null,i.basicError=!0;break;case n.MATCH:s.strict&&s.errors.push({line:s.findLine(s.lines,i.clsOpen),char:i.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),i.clsOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},I=function(e,r,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i.prosValOpen=o;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},T=function(e,r,i,o){switch(e.state){case n.ACTIVE:o.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:!1!==o.stringTabChar&&o.errors.push({line:o.findLine(o.lines,o.stringTabChar),char:o.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},R=function(e,r,o,s){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:s.errors.push({line:s.findLine(s.lines,i.prosValOpen),char:i.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),i.basicError=!0,i.prosValOpen=null;break;case n.MATCH:s.errors.push({line:s.findLine(s.lines,i.prosValOpen),char:i.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),i.prosValOpen=null;break;default:throw new Error(`${t}synFile: unrecognized case.`)}},M=function(e,r,o,s){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i={groupOpen:o,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},s.altStack.push(i);break;default:throw new Error(`${t}synFile: unrecognized case.`)}},k=function(e,r,o,s){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:s.errors.push({line:s.findLine(s.lines,i.groupOpen),char:i.groupOpen,msg:'Group "(...)" opened but not closed.'}),i=s.altStack.pop(),i.groupError=!0;break;case n.MATCH:i=s.altStack.pop();break;default:throw new Error(`${t}synFile: unrecognized case.`)}},C=function(e,r,o,s){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:i={groupOpen:null,groupError:!1,optionOpen:o,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},s.altStack.push(i);break;default:throw new Error(`${t}synFile: unrecognized case.`)}},O=function(e,r,o,s){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:s.errors.push({line:s.findLine(s.lines,i.optionOpen),char:i.optionOpen,msg:'Option "[...]" opened but not closed.'}),i=s.altStack.pop(),i.optionError=!0;break;case n.MATCH:i=s.altStack.pop();break;default:throw new Error(`${t}synFile: unrecognized case.`)}},P=function(e,r,o,s){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:!1===i.basicError&&s.errors.push({line:s.findLine(s.lines,o,s.charsLength),char:o,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},B=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(1===e.phraseLength&&o.strict){const t=13===r[i]?"CR":"LF";o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:`Line end '${t}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${t}synFile: unrecognized case.`)}},x=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:o.errors.push({line:o.findLine(o.lines,i,o.charsLength),char:i,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${t}synFile: unrecognized case.`)}},N=function(e,r,i,o){switch(e.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:o.repCount+=1;break;case n.MATCH:o.repCount+=1;break;default:throw new Error(`${t}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=h,this.callbacks.basicelementerr=P,this.callbacks.clsclose=A,this.callbacks.clsopen=E,this.callbacks.clsstring=S,this.callbacks.definedaserror=c,this.callbacks.file=o,this.callbacks.groupclose=k,this.callbacks.groupopen=M,this.callbacks.lineenderror=x,this.callbacks.lineend=B,this.callbacks.notop=l,this.callbacks.optionclose=O,this.callbacks.optionopen=C,this.callbacks.prosvalclose=R,this.callbacks.prosvalopen=I,this.callbacks.prosvalstring=T,this.callbacks.repetition=N,this.callbacks.rule=s,this.callbacks.ruleerror=a,this.callbacks.rulenameerror=u,this.callbacks.stringtab=v,this.callbacks.tlsclose=_,this.callbacks.tlsopen=b,this.callbacks.tlsstring=w,this.callbacks.udtop=m,this.callbacks.bkaop=f,this.callbacks.bknop=d,this.callbacks.bkrop=g,this.callbacks.abgop=p,this.callbacks.aenop=y}},12633:function(t,e,r){var n=r(13374)["Buffer"];r(21703);const i=this,o=r(79348),s="UTF8",a="UTF16",u="UTF16BE",c="UTF16LE",h="UTF32",l="UTF32BE",f="UTF32LE",d="UINT7",p="ASCII",y="BINARY",g="UINT8",m="UINT16",b="UINT16LE",w="UINT16BE",v="UINT32",_="UINT32LE",E="UINT32BE",S="ESCAPED",A="STRING",I=function(t){t.type=s;const e=t.data;t.bom=0,e.length>=3&&239===e[0]&&187===e[1]&&191===e[2]&&(t.bom=3)},T=function(t){const e=t.data;switch(t.bom=0,t.type){case a:t.type=u,e.length>=2&&(254===e[0]&&255===e[1]?t.bom=2:255===e[0]&&254===e[1]&&(t.type=c,t.bom=2));break;case u:if(t.type=u,e.length>=2)if(254===e[0]&&255===e[1])t.bom=2;else if(255===e[0]&&254===e[1])throw new TypeError(`src type: "${u}" specified but BOM is for "${c}"`);break;case c:if(t.type=c,e.length>=0){if(254===e[0]&&255===e[1])throw new TypeError(`src type: "${c}" specified but BOM is for "${u}"`);255===e[0]&&254===e[1]&&(t.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${t.type}" unrecognized`)}},R=function(t){const e=t.data;switch(t.bom=0,t.type){case h:t.type=l,e.length>=4&&(0===e[0]&&0===e[1]&&254===e[2]&&255===e[3]&&(t.bom=4),255===e[0]&&254===e[1]&&0===e[2]&&0===e[3]&&(t.type=f,t.bom=4));break;case l:if(t.type=l,e.length>=4&&(0===e[0]&&0===e[1]&&254===e[2]&&255===e[3]&&(t.bom=4),255===e[0]&&254===e[1]&&0===e[2]&&0===e[3]))throw new TypeError(`src type: ${l} specified but BOM is for ${f}"`);break;case f:if(t.type=f,e.length>=4){if(0===e[0]&&0===e[1]&&254===e[2]&&255===e[3])throw new TypeError(`src type: "${f}" specified but BOM is for "${l}"`);255===e[0]&&254===e[1]&&0===e[2]&&0===e[3]&&(t.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${t.type}" unrecognized`)}},M=function(t,e){function r(t){const e={type:"",base64:!1},r=/^(base64:)?([a-zA-Z0-9]+)$/i,n=r.exec(t);return n&&(n[2]&&(e.type=n[2].toUpperCase()),n[1]&&(e.base64=!0)),e}if("string"!==typeof t||""===t)throw new TypeError(`type: "${t}" not recognized`);const i=r(t.toUpperCase());if(i.base64){if(i.type===A)throw new TypeError(`type: "${t} "BASE64:" prefix not allowed with type ${A}`);if(n.isBuffer(e))i.data=o.base64.decode(e);else{if("string"!==typeof e)throw new TypeError(`type: "${t} unrecognized data type: typeof(data): ${typeof e}`);{const t=n.from(e,"ascii");i.data=o.base64.decode(t)}}}else i.data=e;switch(i.type){case s:I(i);break;case a:case u:case c:T(i);break;case h:case l:case f:R(i);break;case m:i.type=w;break;case v:i.type=E;break;case p:i.type=d;break;case y:i.type=g;break;case d:case g:case b:case w:case _:case E:case A:case S:break;default:throw new TypeError(`type: "${t}" not recognized`)}if(i.type===A){if("string"!==typeof i.data)throw new TypeError(`type: "${t}" but data is not a string`)}else if(!n.isBuffer(i.data))throw new TypeError(`type: "${t}" but data is not a Buffer`);return i},k=function(t,e){function r(t){let e,r;const n={crlf:!1,lf:!1,base64:!1,type:""},i=!0;while(i){if(r=t,e=t.slice(0,5),"CRLF:"===e){n.crlf=!0,r=t.slice(5);break}if(e=t.slice(0,3),"LF:"===e){n.lf=!0,r=t.slice(3);break}break}return e=r.split(":"),1===e.length?n.type=e[0]:2===e.length&&"BASE64"===e[1]&&(n.base64=!0,n.type=e[0]),n}if(!Array.isArray(e))throw new TypeError('dst chars: not array: "'+typeof e);if("string"!==typeof t)throw new TypeError('dst type: not string: "'+typeof t);const n=r(t.toUpperCase());switch(n.type){case s:case u:case c:case l:case f:case d:case g:case b:case w:case _:case E:case S:break;case A:if(n.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${A}`);break;case p:n.type=d;break;case y:n.type=g;break;case a:n.type=u;break;case h:n.type=l;break;case m:n.type=w;break;case v:n.type=E;break;default:throw new TypeError(`dst type unrecognized: "${t}" : must have form [crlf:|lf:]type[:base64]`)}return n},C=function(t,e){switch(t){case s:return o.utf8.encode(e);case u:return o.utf16be.encode(e);case c:return o.utf16le.encode(e);case l:return o.utf32be.encode(e);case f:return o.utf32le.encode(e);case d:return o.uint7.encode(e);case g:return o.uint8.encode(e);case w:return o.uint16be.encode(e);case b:return o.uint16le.encode(e);case E:return o.uint32be.encode(e);case _:return o.uint32le.encode(e);case A:return o.string.encode(e);case S:return o.escaped.encode(e);default:throw new TypeError(`encode type "${t}" not recognized`)}},O=function(t){switch(t.type){case s:return o.utf8.decode(t.data,t.bom);case c:return o.utf16le.decode(t.data,t.bom);case u:return o.utf16be.decode(t.data,t.bom);case l:return o.utf32be.decode(t.data,t.bom);case f:return o.utf32le.decode(t.data,t.bom);case d:return o.uint7.decode(t.data);case g:return o.uint8.decode(t.data);case w:return o.uint16be.decode(t.data);case b:return o.uint16le.decode(t.data);case E:return o.uint32be.decode(t.data);case _:return o.uint32le.decode(t.data);case A:return o.string.decode(t.data);case S:return o.escaped.decode(t.data);default:throw new TypeError(`decode type "${t.type}" not recognized`)}};e.decode=function(t,e){const r=M(t,e);return O(r)},e.encode=function(t,e){let r,n;const i=k(t,e);return i.crlf?(r=o.lineEnds.crlf(e),n=C(i.type,r)):i.lf?(r=o.lineEnds.lf(e),n=C(i.type,r)):n=C(i.type,e),i.base64&&(n=o.base64.encode(n)),n},e.convert=function(t,e,r){return i.encode(r,i.decode(t,e))}},79348:function(t,e,r){var n=r(13374)["Buffer"];r(21703);const i=this,o=4294967292,s=4294967293,a=4294967294,u=4294967295,c=[0,1,3,7,15,31,63,127,255,511,1023],h=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),f=[];l.forEach((t=>{f.push(t.charCodeAt(0))})),e.utf8={encode(t){const e=[];return t.forEach((t=>{if(t>=0&&t<=127)e.push(t);else if(t<=2047)e.push(192+(t>>6&c[5])),e.push(128+(t&c[6]));else if(t<55296||t>57343&&t<=65535)e.push(224+(t>>12&c[4])),e.push(128+(t>>6&c[6])),e.push(128+(t&c[6]));else{if(!(t>=65536&&t<=1114111))throw new RangeError(`utf8.encode: character out of range: char: ${t}`);{const r=t>>16&c[5];e.push(240+(r>>2)),e.push(128+((r&c[2])<<4)+(t>>12&c[4])),e.push(128+(t>>6&c[6])),e.push(128+(t&c[6]))}}})),n.from(e)},decode(t,e){function r(t,e){if(128!==(192&e))return s;const r=((t&c[5])<<6)+(e&c[6]);return r<128?o:r}function n(t,e,r){if(128!==(192&r)||128!==(192&e))return s;const n=((t&c[4])<<12)+((e&c[6])<<6)+(r&c[6]);return n<2048?o:n>=55296&&n<=57343?a:n}function i(t,e,r,n){if(128!==(192&n)||128!==(192&r)||128!==(192&e))return s;const i=(((t&c[3])<<2)+(e>>4&c[2])<<16)+((e&c[4])<<12)+((r&c[6])<<6)+(n&c[6]);return i<65536?o:i>1114111?a:i}let h,l,f,d,p,y;const g=t.length;let m=e?3:0;const b=[];while(m<g){l=t[m],h=u;const e=!0;while(e){if(l>=0&&l<=127){h=l,y=1;break}if(f=m+1,f<g&&l>=194&&l<=223){h=r(l,t[f]),y=2;break}if(d=m+2,d<g&&l>=224&&l<=239){h=n(l,t[f],t[d]),y=3;break}if(p=m+3,p<g&&l>=240&&l<=244){h=i(l,t[f],t[d],t[p]),y=4;break}break}if(h>1114111){const t=`byte[${m}]`;if(h===u)throw new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${t}`);if(h===s)throw new RangeError(`utf8.decode: illegal trailing byte found at: ${t}`);if(h===a)throw new RangeError(`utf8.decode: code point out of range found at: ${t}`);if(h===o)throw new RangeError(`utf8.decode: non-shortest form found at: ${t}`);throw new RangeError(`utf8.decode: unrecognized error found at: ${t}`)}b.push(h),m+=y}return b}},e.utf16be={encode(t){const e=[];let r,i,o;for(let n=0;n<t.length;n+=1)if(r=t[n],r>=0&&r<=55295||r>=57344&&r<=65535)e.push(r>>8&c[8]),e.push(r&c[8]);else{if(!(r>=65536&&r<=1114111))throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${n}]: ${r}`);o=r-65536,i=55296+(o>>10),o=56320+(o&c[10]),e.push(i>>8&c[8]),e.push(i&c[8]),e.push(o>>8&c[8]),e.push(o&c[8])}return n.from(e)},decode(t,e){if(t.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${t.length}`);const r=[],n=t.length;let i,o,s,a,u,c,h=e?2:0,l=0;while(h<n){const e=!0;while(e){if(s=h+1,s<n){if(u=(t[h]<<8)+t[s],u<55296||u>57343){i=u,o=2;break}if(a=h+3,a<n&&(c=(t[h+2]<<8)+t[a],u<=56319&&c>=56320&&c<=57343)){i=65536+(u-55296<<10)+(c-56320),o=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${h}]`)}r[l++]=i,h+=o}return r}},e.utf16le={encode(t){const e=[];let r,i,o;for(let n=0;n<t.length;n+=1)if(r=t[n],r>=0&&r<=55295||r>=57344&&r<=65535)e.push(r&c[8]),e.push(r>>8&c[8]);else{if(!(r>=65536&&r<=1114111))throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${n}]: ${r}`);o=r-65536,i=55296+(o>>10),o=56320+(o&c[10]),e.push(i&c[8]),e.push(i>>8&c[8]),e.push(o&c[8]),e.push(o>>8&c[8])}return n.from(e)},decode(t,e){if(t.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${t.length}`);const r=[],n=t.length;let i,o,s,a,u,c,h=e?2:0,l=0;while(h<n){const e=!0;while(e){if(s=h+1,s<n){if(u=(t[s]<<8)+t[h],u<55296||u>57343){i=u,o=2;break}if(a=h+3,a<n&&(c=(t[a]<<8)+t[h+2],u<=56319&&c>=56320&&c<=57343)){i=65536+(u-55296<<10)+(c-56320),o=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${h}]`)}r[l++]=i,h+=o}return r}},e.utf32be={encode(t){const e=n.alloc(4*t.length);let r=0;return t.forEach((t=>{if(t>=55296&&t<=57343||t>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${r/4}]: ${t}`);e[r++]=t>>24&c[8],e[r++]=t>>16&c[8],e[r++]=t>>8&c[8],e[r++]=t&c[8]})),e},decode(t,e){if(t.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${t.length}`);const r=[];let n=e?4:0;for(;n<t.length;n+=4){const e=(t[n]<<24)+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3];if(e>=55296&&e<=57343||e>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${n/4}]: ${e}`);r.push(e)}return r}},e.utf32le={encode(t){const e=n.alloc(4*t.length);let r=0;return t.forEach((t=>{if(t>=55296&&t<=57343||t>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${r/4}]: ${t}`);e[r++]=t&c[8],e[r++]=t>>8&c[8],e[r++]=t>>16&c[8],e[r++]=t>>24&c[8]})),e},decode(t,e){if(t.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${t.length}`);const r=[];let n=e?4:0;for(;n<t.length;n+=4){const e=(t[n+3]<<24)+(t[n+2]<<16)+(t[n+1]<<8)+t[n];if(e>=55296&&e<=57343||e>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${n/4}]: ${e}`);r.push(e)}return r}},e.uint7={encode(t){const e=n.alloc(t.length);for(let r=0;r<t.length;r+=1){if(t[r]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${r}]: ${t[r]}`);e[r]=t[r]}return e},decode(t){const e=[];for(let r=0;r<t.length;r+=1){if(t[r]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${r}]: ${t[r]}`);e[r]=t[r]}return e}},e.uint8={encode(t){const e=n.alloc(t.length);for(let r=0;r<t.length;r+=1){if(t[r]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${r}]: ${t[r]}`);e[r]=t[r]}return e},decode(t){const e=[];for(let r=0;r<t.length;r+=1)e[r]=t[r];return e}},e.uint16be={encode(t){const e=n.alloc(2*t.length);let r=0;return t.forEach((t=>{if(t>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${r/2}]: ${t}`);e[r++]=t>>8&c[8],e[r++]=t&c[8]})),e},decode(t){if(t.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${t.length}`);const e=[];for(let r=0;r<t.length;r+=2)e.push((t[r]<<8)+t[r+1]);return e}},e.uint16le={encode(t){const e=n.alloc(2*t.length);let r=0;return t.forEach((t=>{if(t>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${r/2}]: ${t}`);e[r++]=t&c[8],e[r++]=t>>8&c[8]})),e},decode(t){if(t.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${t.length}`);const e=[];for(let r=0;r<t.length;r+=2)e.push((t[r+1]<<8)+t[r]);return e}},e.uint32be={encode(t){const e=n.alloc(4*t.length);let r=0;return t.forEach((t=>{e[r++]=t>>24&c[8],e[r++]=t>>16&c[8],e[r++]=t>>8&c[8],e[r++]=t&c[8]})),e},decode(t){if(t.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${t.length}`);const e=[];for(let r=0;r<t.length;r+=4)e.push((t[r]<<24)+(t[r+1]<<16)+(t[r+2]<<8)+t[r+3]);return e}},e.uint32le={encode(t){const e=n.alloc(4*t.length);let r=0;return t.forEach((t=>{e[r++]=t&c[8],e[r++]=t>>8&c[8],e[r++]=t>>16&c[8],e[r++]=t>>24&c[8]})),e},decode(t){if(t.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${t.length}`);const e=[];for(let r=0;r<t.length;r+=4)e.push((t[r+3]<<24)+(t[r+2]<<16)+(t[r+1]<<8)+t[r]);return e}},e.string={encode(t){return i.utf16le.encode(t).toString("utf16le")},decode(t){return i.utf16le.decode(n.from(t,"utf16le"),0)}},e.escaped={encode(t){const e=[];for(let r=0;r<t.length;r+=1){const i=t[r];if(96===i)e.push(i),e.push(i);else if(10===i)e.push(i);else if(i>=32&&i<=126)e.push(i);else{let t="";if(i>=0&&i<=31)t+=`\`x${h[i]}`;else if(i>=127&&i<=255)t+=`\`x${h[i]}`;else if(i>=256&&i<=65535)t+=`\`u${h[i>>8&c[8]]}${h[i&c[8]]}`;else{if(!(i>=65536&&i<=4294967295))throw new Error("escape.encode(char): char > 0xffffffff not allowed");{t+="`u{";const e=i>>24&c[8];e>0&&(t+=h[e]),t+=`${h[i>>16&c[8]]+h[i>>8&c[8]]+h[i&c[8]]}}`}}const r=n.from(t);r.forEach((t=>{e.push(t)}))}}return n.from(e)},decode(t){function e(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function r(t,r,n){const i={char:null,nexti:t+2,error:!0};if(t+1<r&&e(n[t])&&e(n[t+1])){const e=String.fromCodePoint(n[t],n[t+1]);i.char=parseInt(e,16),Number.isNaN(i.char)||(i.error=!1)}return i}function n(t,r,n){const i={char:null,nexti:t+4,error:!0};if(t+3<r&&e(n[t])&&e(n[t+1])&&e(n[t+2])&&e(n[t+3])){const e=String.fromCodePoint(n[t],n[t+1],n[t+2],n[t+3]);i.char=parseInt(e,16),Number.isNaN(i.char)||(i.error=!1)}return i}function i(t,r,n){const i={char:null,nexti:t+4,error:!0};let o="";while(t<r&&e(n[t]))o+=String.fromCodePoint(n[t]),t+=1;return i.char=parseInt(o,16),125!==n[t]||Number.isNaN(i.char)||(i.error=!1),i.nexti=t+1,i}const o=[],s=t.length;let a,u,c,h=0;while(h<s){const e=!0;while(e){if(c=!0,96!==t[h]){o.push(t[h]),h+=1,c=!1;break}if(a=h+1,a>=s)break;if(96===t[a]){o.push(96),h+=2,c=!1;break}if(120===t[a]){if(u=r(a+1,s,t),u.error)break;o.push(u.char),h=u.nexti,c=!1;break}if(117===t[a]){if(123===t[a+1]){if(u=i(a+2,s,t),u.error)break;o.push(u.char),h=u.nexti,c=!1;break}if(u=n(a+1,s,t),u.error)break;o.push(u.char),h=u.nexti,c=!1;break}break}if(c)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${h}]`)}return o}};const d=13,p=10;e.lineEnds={crlf(t){const e=[];let r=0;while(r<t.length)switch(t[r]){case d:r+1<t.length&&t[r+1]===p?r+=2:r+=1,e.push(d),e.push(p);break;case p:e.push(d),e.push(p),r+=1;break;default:e.push(t[r]),r+=1;break}return e.length>0&&e[e.length-1]!==p&&(e.push(d),e.push(p)),e},lf(t){const e=[];let r=0;while(r<t.length)switch(t[r]){case d:r+1<t.length&&t[r+1]===p?r+=2:r+=1,e.push(p);break;case p:e.push(p),r+=1;break;default:e.push(t[r]),r+=1;break}return e.length>0&&e[e.length-1]!==p&&e.push(p),e}},e.base64={encode(t){if(0===t.length)return n.alloc(0);let e,r,i,o=t.length%3;o=o>0?3-o:0;let s=(t.length+o)/3;const a=n.alloc(4*s);o>0&&(s-=1),e=0,r=0;for(let n=0;n<s;n+=1)i=t[e++]<<16,i+=t[e++]<<8,i+=t[e++],a[r++]=f[i>>18&c[6]],a[r++]=f[i>>12&c[6]],a[r++]=f[i>>6&c[6]],a[r++]=f[i&c[6]];return 0===o?a:1===o?(i=t[e++]<<16,i+=t[e]<<8,a[r++]=f[i>>18&c[6]],a[r++]=f[i>>12&c[6]],a[r++]=f[i>>6&c[6]],a[r]=f[64],a):2===o?(i=t[e]<<16,a[r++]=f[i>>18&c[6]],a[r++]=f[i>>12&c[6]],a[r++]=f[64],a[r]=f[64],a):void 0},decode(t){function e(t){const e=[];let r=0;for(let n=0;n<t.length;n+=1){const i=t[n],o=!0;while(o){if(32===i||9===i||10===i||13===i)break;if(i>=65&&i<=90){e.push(i-65);break}if(i>=97&&i<=122){e.push(i-71);break}if(i>=48&&i<=57){e.push(i+4);break}if(43===i){e.push(62);break}if(47===i){e.push(63);break}if(61===i){e.push(64),r+=1;break}throw new RangeError(`base64.decode: invalid character buf[${n}]: ${i}`)}}if(e.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${e.length}`);switch(r){case 0:break;case 1:if(64!==e[e.length-1])throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(64!==e[e.length-1]||64!==e[e.length-2])throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${r}`)}return{tail:r,buf:n.from(e)}}if(0===t.length)return n.alloc(0);const r=e(t),{tail:i}=r,o=r.buf;let s,a,u,h=o.length/4;const l=n.alloc(3*h-i);i>0&&(h-=1),a=0,s=0;for(let n=0;n<h;n+=1)u=o[s++]<<18,u+=o[s++]<<12,u+=o[s++]<<6,u+=o[s++],l[a++]=u>>16&c[8],l[a++]=u>>8&c[8],l[a++]=u&c[8];return 1===i&&(u=o[s++]<<18,u+=o[s++]<<12,u+=o[s]<<6,l[a++]=u>>16&c[8],l[a]=u>>8&c[8]),2===i&&(u=o[s++]<<18,u+=o[s++]<<12,l[a]=u>>16&c[8]),l},toString(t){if(t.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${t.length}`);let e="",r=0;function n(t,n,i,o){switch(r){case 76:e+=`\r\n${t}${n}${i}${o}`,r=4;break;case 75:e+=`${t}\r\n${n}${i}${o}`,r=3;break;case 74:e+=`${t+n}\r\n${i}${o}`,r=2;break;case 73:e+=`${t+n+i}\r\n${o}`,r=1;break;default:e+=t+n+i+o,r+=4;break}}function i(t){return t>=65&&t<=90||(t>=97&&t<=122||(t>=48&&t<=57||(43===t||(47===t||61===t))))}for(let o=0;o<t.length;o+=4){for(let e=o;e<o+4;e+=1)if(!i(t[e]))throw new RangeError(`base64.toString: buf[${e}]: ${t[e]} : not valid base64 character code`);n(String.fromCharCode(t[o]),String.fromCharCode(t[o+1]),String.fromCharCode(t[o+2]),String.fromCharCode(t[o+3]))}return e}}},19320:function(t,e,r){r(21703),t.exports=function(){const t=r(92578),e=r(80107),n="ast.js: ",i=this;let o=null,s=null,a=null,u=0;const c=[],h=[],l=[],f=[];function d(t){let e="";for(let r=0;r<t;r+=1)e+=" ";return e}this.callbacks=[],this.astObject="astObject",this.init=function(t,e,r){let d;l.length=0,f.length=0,c.length=0,u=0,o=t,s=e,a=r;const p=[];for(d=0;d<o.length;d+=1)p.push(o[d].lower);for(d=0;d<s.length;d+=1)p.push(s[d].lower);for(u=o.length+s.length,d=0;d<u;d+=1)c[d]=!1,h[d]=null;for(const o in i.callbacks){const t=o.toLowerCase();if(d=p.indexOf(t),d<0)throw new Error(`${n}init: node '${o}' not a rule or udt name`);"function"===typeof i.callbacks[o]&&(c[d]=!0,h[d]=i.callbacks[o]),!0===i.callbacks[o]&&(c[d]=!0)}},this.ruleDefined=function(t){return!1!==c[t]},this.udtDefined=function(t){return!1!==c[o.length+t]},this.down=function(e,r){const n=f.length;return l.push(n),f.push({name:r,thisIndex:n,thatIndex:null,state:t.SEM_PRE,callbackIndex:e,phraseIndex:null,phraseLength:null,stack:l.length}),n},this.up=function(e,r,n,i){const o=f.length,s=l.pop();return f.push({name:r,thisIndex:o,thatIndex:s,state:t.SEM_POST,callbackIndex:e,phraseIndex:n,phraseLength:i,stack:l.length}),f[s].thatIndex=o,f[s].phraseIndex=n,f[s].phraseLength=i,o},this.translate=function(e){let r,n,i;for(let o=0;o<f.length;o+=1)i=f[o],n=h[i.callbackIndex],i.state===t.SEM_PRE?null!==n&&(r=n(t.SEM_PRE,a,i.phraseIndex,i.phraseLength,e),r===t.SEM_SKIP&&(o=i.thatIndex)):null!==n&&n(t.SEM_POST,a,i.phraseIndex,i.phraseLength,e)},this.setLength=function(t){f.length=t,l.length=t>0?f[t-1].stack:0},this.getLength=function(){return f.length},this.toXml=function(r){let n=e.charsToDec,i="decimal integer character codes";if("string"===typeof r&&r.length>=3){const t=r.slice(0,3).toLowerCase();"asc"===t?(n=e.charsToAscii,i="ASCII for printing characters, hex for non-printing"):"hex"===t?(n=e.charsToHex,i="hexadecimal integer character codes"):"uni"===t&&(n=e.charsToUnicode,i="Unicode UTF-32 integer character codes")}let o="",s=0;return o+='<?xml version="1.0" encoding="utf-8"?>\n',o+=`<root nodes="${f.length/2}" characters="${a.length}">\n`,o+=`\x3c!-- input string, ${i} --\x3e\n`,o+=d(s+2),o+=n(a),o+="\n",f.forEach((e=>{e.state===t.SEM_PRE?(s+=1,o+=d(s),o+=`<node name="${e.name}" index="${e.phraseIndex}" length="${e.phraseLength}">\n`,o+=d(s+2),o+=n(a,e.phraseIndex,e.phraseLength),o+="\n"):(o+=d(s),o+=`</node>\x3c!-- name="${e.name}" --\x3e\n`,s-=1)})),o+="</root>\n",o},this.phrases=function(){const e={};let r,n;for(r=0;r<f.length;r+=1)n=f[r],n.state===t.SEM_PRE&&(Array.isArray(e[n.name])||(e[n.name]=[]),e[n.name].push({index:n.phraseIndex,length:n.phraseLength}));return e}}},43402:function(t,e,r){r(21703),t.exports=function(){const t="circular-buffer.js: ";let e=-1,r=0;this.init=function(n){if("number"!==typeof n||n<=0)throw new Error(`${t}init: circular buffer size must an integer > 0`);r=Math.ceil(n),e=-1},this.increment=function(){return e+=1,(e+r)%r},this.maxSize=function(){return r},this.items=function(){return e+1},this.getListIndex=function(t){return-1===e||t<0||t>e||e-t>=r?-1:(t+r)%r},this.forEach=function(t){if(-1!==e)if(e<r)for(let r=0;r<=e;r+=1)t(r,r);else for(let n=e-r+1;n<=e;n+=1){const e=(n+r)%r;t(e,n)}}}},21083:function(t){t.exports=function(){return"/* This file automatically generated by jsonToless() and LESS. */\n.apg-mono {\n  font-family: monospace;\n}\n.apg-active {\n  font-weight: bold;\n  color: #000000;\n}\n.apg-match {\n  font-weight: bold;\n  color: #264BFF;\n}\n.apg-empty {\n  font-weight: bold;\n  color: #0fbd0f;\n}\n.apg-nomatch {\n  font-weight: bold;\n  color: #FF4000;\n}\n.apg-lh-match {\n  font-weight: bold;\n  color: #1A97BA;\n}\n.apg-lb-match {\n  font-weight: bold;\n  color: #5F1687;\n}\n.apg-remainder {\n  font-weight: bold;\n  color: #999999;\n}\n.apg-ctrl-char {\n  font-weight: bolder;\n  font-style: italic;\n  font-size: 0.6em;\n}\n.apg-line-end {\n  font-weight: bold;\n  color: #000000;\n}\n.apg-error {\n  font-weight: bold;\n  color: #FF4000;\n}\n.apg-phrase {\n  color: #000000;\n  background-color: #8caae6;\n}\n.apg-empty-phrase {\n  color: #0fbd0f;\n}\ntable.apg-state {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: left;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-state th,\ntable.apg-state td {\n  text-align: left;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-state th:nth-last-child(2),\ntable.apg-state td:nth-last-child(2) {\n  text-align: right;\n}\ntable.apg-state caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-stats {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-stats th,\ntable.apg-stats td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-stats caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-trace {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-trace caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-trace th,\ntable.apg-trace td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-trace th:last-child,\ntable.apg-trace th:nth-last-child(2),\ntable.apg-trace td:last-child,\ntable.apg-trace td:nth-last-child(2) {\n  text-align: left;\n}\ntable.apg-grammar {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-grammar caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-grammar th,\ntable.apg-grammar td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-grammar th:last-child,\ntable.apg-grammar td:last-child {\n  text-align: left;\n}\ntable.apg-rules {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-rules caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-rules th,\ntable.apg-rules td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-rules a {\n  color: #003399 !important;\n}\ntable.apg-rules a:hover {\n  color: #8caae6 !important;\n}\ntable.apg-attrs {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: center;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-attrs caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-attrs th,\ntable.apg-attrs td {\n  text-align: center;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-attrs th:nth-child(1),\ntable.apg-attrs th:nth-child(2),\ntable.apg-attrs th:nth-child(3) {\n  text-align: right;\n}\ntable.apg-attrs td:nth-child(1),\ntable.apg-attrs td:nth-child(2),\ntable.apg-attrs td:nth-child(3) {\n  text-align: right;\n}\ntable.apg-attrs a {\n  color: #003399 !important;\n}\ntable.apg-attrs a:hover {\n  color: #8caae6 !important;\n}\n"}},92578:function(t){t.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}},88017:function(t,e,r){t.exports={ast:r(19320),circular:r(43402),ids:r(92578),parser:r(44292),stats:r(30600),trace:r(70301),utils:r(80107),emitcss:r(21083),style:r(84382)}},44292:function(t,e,r){r(21703),t.exports=function(){const t=r(92578),e=r(80107),n="parser.js: ",i=this;let o;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let s,a,u,c,h=null,l=null,f=0,d=0,p=0,y=null,g=null,m=null,b=null,w=null,v=0,_=1/0,E=1/0;const S=function(e,r,i){const s=`${n}evaluateRule(): `;if(e>=m.length)throw new Error(`${s}rule index: ${e} out of range`);if(r>=u)throw new Error(`${s}phrase index: ${r} out of range`);const{length:a}=h;h.push({type:t.RNM,index:e}),o(a,r,i),h.pop()},A=function(e,r,i){const s=`${n}evaluateUdt(): `;if(e>=b.length)throw new Error(`${s}udt index: ${e} out of range`);if(r>=u)throw new Error(`${s}phrase index: ${r} out of range`);const{length:a}=h;h.push({type:t.UDT,empty:b[e].empty,index:e}),o(a,r,i),h.pop()},I=function(){f=0,d=0,p=0,v=0,c=[{lookAround:t.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],m=null,b=null,l=null,s=0,a=0,u=0,y=null,g=null,w=null,h=null},T=function(){const t=[],e=function(){const e={};m.forEach((t=>{t.isBkr&&(e[t.lower]=null)})),b.length>0&&b.forEach((t=>{t.isBkr&&(e[t.lower]=null)})),t.push(e)},r=function(){const e=t[t.length-1],r={};for(const t in e)r[t]=e[t];return r};this.push=function(){t.push(r())},this.pop=function(e){let r=e;if(r||(r=t.length-1),r<1||r>t.length)throw new Error(`${n}backRef.pop(): bad length: ${r}`);return t.length=r,t[t.length-1]},this.length=function(){return t.length},this.savePhrase=function(e,r,n){t[t.length-1][e]={phraseIndex:r,phraseLength:n}},this.getPhrase=function(e){return t[t.length-1][e]},e()},R=function(){const e=this;this.state=t.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=c[c.length-1],this.uFrame=new T,this.pFrame=new T,this.evaluateRule=S,this.evaluateUdt=A,this.refresh=function(){e.state=t.ACTIVE,e.phraseLength=0,e.lookAround=c[c.length-1]}},M=function(){return c[c.length-1]},k=function(){return c.length>1},C=function(){return c[c.length-1].lookAround===t.LOOKAROUND_BEHIND},O=function(){const t=`${n}initializeAst(): `,e=!0;while(e){if(void 0===i.ast){i.ast=null;break}if(null===i.ast)break;if("astObject"!==i.ast.astObject)throw new Error(`${t}ast object not recognized`);break}null!==i.ast&&i.ast.init(m,b,l)},P=function(){const t=`${n}initializeTrace(): `,e=!0;while(e){if(void 0===i.trace){i.trace=null;break}if(null===i.trace)break;if("traceObject"!==i.trace.traceObject)throw new Error(`${t}trace object not recognized`);break}null!==i.trace&&i.trace.init(m,b,l)},B=function(){const t=`${n}initializeStats(): `,e=!0;while(e){if(void 0===i.stats){i.stats=null;break}if(null===i.stats)break;if("statsObject"!==i.stats.statsObject)throw new Error(`${t}stats object not recognized`);break}null!==i.stats&&i.stats.init(m,b)},x=function(t){const e=`${n}initializeGrammar(): `;if(!t)throw new Error(`${e}grammar object undefined`);if("grammarObject"!==t.grammarObject)throw new Error(`${e}bad grammar object`);m=t.rules,b=t.udts},N=function(t){const e=`${n}initializeStartRule(): `;let r=null;if("number"===typeof t){if(t>=m.length)throw new Error(`${e}start rule index too large: max: ${m.length}: index: ${t}`);r=t}else{if("string"!==typeof t)throw new Error(`${e}type of start rule '${typeof t}' not recognized`);{const n=t.toLowerCase();for(let t=0;t<m.length;t+=1)if(n===m[t].lower){r=m[t].index;break}if(null===r)throw new Error(`${e}start rule name '${t}' not recognized`)}}return r},D=function(t,r,i){const o=`${n}initializeInputChars(): `;let c=t,h=r,f=i;if(void 0===c)throw new Error(`${o}input string is undefined`);if(null===c)throw new Error(`${o}input string is null`);if("string"===typeof c)c=e.stringToChars(c);else if(!Array.isArray(c))throw new Error(`${o}input string is not a string or array`);if(c.length>0&&"number"!==typeof c[0])throw new Error(`${o}input string not an array of integers`);if("number"!==typeof h)h=0;else if(h=Math.floor(h),h<0||h>c.length)throw new Error(`${o}input beginning index out of range: ${h}`);if("number"!==typeof f)f=c.length-h;else if(f=Math.floor(f),f<0||f>c.length-h)throw new Error(`${o}input length out of range: ${f}`);l=c,s=h,a=f,u=s+a},L=function(){const t=`${n}initializeCallbacks(): `;let e,r;for(y=[],g=[],e=0;e<m.length;e+=1)y[e]=null;for(e=0;e<b.length;e+=1)g[e]=null;const o=[];for(e=0;e<m.length;e+=1)o.push(m[e].lower);for(e=0;e<b.length;e+=1)o.push(b[e].lower);for(const n in i.callbacks){if(e=o.indexOf(n.toLowerCase()),e<0)throw new Error(`${t}syntax callback '${n}' not a rule or udt name`);if(r=i.callbacks[n],r||(r=null),"function"!==typeof r&&null!==r)throw new Error(`${t}syntax callback[${n}] must be function reference or 'false' (false/null/undefined/etc.)`);e<m.length?y[e]=r:g[e-m.length]=r}for(e=0;e<b.length;e+=1)if(null===g[e])throw new Error(`${t}all UDT callbacks must be defined. UDT callback[${b[e].lower}] not a function reference`)};this.setMaxTreeDepth=function(t){if("number"!==typeof t)throw new Error(`parser: max tree depth must be integer > 0: ${t}`);if(_=Math.floor(t),_<=0)throw new Error(`parser: max tree depth must be integer > 0: ${t}`)},this.setMaxNodeHits=function(t){if("number"!==typeof t)throw new Error(`parser: max node hits must be integer > 0: ${t}`);if(E=Math.floor(t),E<=0)throw new Error(`parser: max node hits must be integer > 0: ${t}`)};const U=function(e,r,i){let c;const f=`${n}parse(): `;x(e);const y=N(r);L(),P(),B(),O();const g=new R;switch(void 0!==i&&null!==i&&(w=i),h=[{type:t.RNM,index:y}],o(0,s,g),h=null,g.state){case t.ACTIVE:throw new Error(`${f}final state should never be 'ACTIVE'`);case t.NOMATCH:c=!1;break;case t.EMPTY:case t.MATCH:c=g.phraseLength===a;break;default:throw new Error("unrecognized state")}return{success:c,state:g.state,length:a,matched:g.phraseLength,maxMatched:v,maxTreeDepth:d,nodeHits:p,inputLength:l.length,subBegin:s,subEnd:u,subLength:a}};this.parseSubstring=function(t,e,r,n,i,o){return I(),D(r,n,i),U(t,e,o)},this.parse=function(t,e,r,n){return I(),D(r,0,r.length),U(t,e,n)};const j=function(e,r,n){const i=h[e];for(let s=0;s<i.children.length;s+=1)if(o(i.children[s],r,n),n.state!==t.NOMATCH)break},F=function(e,r,n){let s,a,u,c;const l=h[e],f=n.uFrame.length(),d=n.pFrame.length();i.ast&&(a=i.ast.getLength()),s=!0,u=r,c=0;for(let i=0;i<l.children.length;i+=1){if(o(l.children[i],u,n),n.state===t.NOMATCH){s=!1;break}u+=n.phraseLength,c+=n.phraseLength}s?(n.state=0===c?t.EMPTY:t.MATCH,n.phraseLength=c):(n.state=t.NOMATCH,n.phraseLength=0,n.uFrame.pop(f),n.pFrame.pop(d),i.ast&&i.ast.setLength(a))},K=function(e,r,n){let s,a,c,l;const f=h[e];a=r,c=0,l=0;const d=n.uFrame.length(),p=n.pFrame.length();i.ast&&(s=i.ast.getLength());const y=!0;while(y){if(a>=u)break;if(o(e+1,a,n),n.state===t.NOMATCH)break;if(n.state===t.EMPTY)break;if(l+=1,c+=n.phraseLength,a+=n.phraseLength,l===f.max)break}n.state===t.EMPTY||l>=f.min?(n.state=0===c?t.EMPTY:t.MATCH,n.phraseLength=c):(n.state=t.NOMATCH,n.phraseLength=0,n.uFrame.pop(d),n.pFrame.pop(p),i.ast&&i.ast.setLength(s))},$=function(e,r,i,o){if(r.phraseLength>i){let t=`${n}opRNM(${e.name}): callback function error: `;throw t+=`sysData.phraseLength: ${r.phraseLength}`,t+=` must be <= remaining chars: ${i}`,new Error(t)}switch(r.state){case t.ACTIVE:if(!0!==o)throw new Error(`${n}opRNM(${e.name}): callback function return error. ACTIVE state not allowed.`);break;case t.EMPTY:r.phraseLength=0;break;case t.MATCH:0===r.phraseLength&&(r.state=t.EMPTY);break;case t.NOMATCH:r.phraseLength=0;break;default:throw new Error(`${n}opRNM(${e.name}): callback function return error. Unrecognized return state: ${r.state}`)}},q=function(e,r,n){let s,a,c,f,d,p;const g=h[e],b=m[g.index],v=y[b.index],_=!k();if(_&&(a=i.ast&&i.ast.ruleDefined(g.index),a&&(s=i.ast.getLength(),i.ast.down(g.index,m[g.index].name)),f=n.uFrame.length(),d=n.pFrame.length(),n.uFrame.push(),n.pFrame.push(),p=n.pFrame,n.pFrame=new T),null===v)c=h,h=b.opcodes,o(0,r,n),h=c;else{const e=u-r;n.ruleIndex=b.index,v(n,l,r,w),$(b,n,e,!0),n.state===t.ACTIVE&&(c=h,h=b.opcodes,o(0,r,n),h=c,n.ruleIndex=b.index,v(n,l,r,w),$(b,n,e,!1))}_&&(a&&(n.state===t.NOMATCH?i.ast.setLength(s):i.ast.up(g.index,b.name,r,n.phraseLength)),n.pFrame=p,n.state===t.NOMATCH?(n.uFrame.pop(f),n.pFrame.pop(d)):b.isBkr&&(n.pFrame.savePhrase(b.lower,r,n.phraseLength),n.uFrame.savePhrase(b.lower,r,n.phraseLength)))},H=function(e,r,i){if(r.phraseLength>i){let t=`${n}opUDT(${e.name}): callback function error: `;throw t+=`sysData.phraseLength: ${r.phraseLength}`,t+=` must be <= remaining chars: ${i}`,new Error(t)}switch(r.state){case t.ACTIVE:throw new Error(`${n}opUDT(${e.name}): callback function return error. ACTIVE state not allowed.`);case t.EMPTY:if(!1===e.empty)throw new Error(`${n}opUDT(${e.name}): callback function return error. May not return EMPTY.`);r.phraseLength=0;break;case t.MATCH:if(0===r.phraseLength){if(!1===e.empty)throw new Error(`${n}opUDT(${e.name}): callback function return error. May not return EMPTY.`);r.state=t.EMPTY}break;case t.NOMATCH:r.phraseLength=0;break;default:throw new Error(`${n}opUDT(${e.name}): callback function return error. Unrecognized return state: ${r.state}`)}},z=function(e,r,n){let o,s,a,c,f,d;const p=h[e],y=b[p.index];n.UdtIndex=y.index;const v=!k();v&&(a=i.ast&&i.ast.udtDefined(p.index),a&&(s=m.length+p.index,o=i.ast.getLength(),i.ast.down(s,y.name)),c=n.uFrame.length(),f=n.pFrame.length(),n.uFrame.push(),n.pFrame.push(),d=n.pFrame,n.pFrame=new T);const _=u-r;g[p.index](n,l,r,w),H(y,n,_),v&&(a&&(n.state===t.NOMATCH?i.ast.setLength(o):i.ast.up(s,y.name,r,n.phraseLength)),n.pFrame=d,n.state===t.NOMATCH?(n.uFrame.pop(c),n.pFrame.pop(f)):y.isBkr&&(n.pFrame.savePhrase(y.lower,r,n.phraseLength),n.uFrame.savePhrase(y.lower,r,n.phraseLength)))},V=function(e,r,n){c.push({lookAround:t.LOOKAROUND_AHEAD,anchor:r,charsEnd:u,charsLength:a}),u=l.length,a=l.length-s,o(e+1,r,n);const i=c.pop();switch(u=i.charsEnd,a=i.charsLength,n.phraseLength=0,n.state){case t.EMPTY:n.state=t.EMPTY;break;case t.MATCH:n.state=t.EMPTY;break;case t.NOMATCH:n.state=t.NOMATCH;break;default:throw new Error(`opAND: invalid state ${n.state}`)}},G=function(e,r,n){c.push({lookAround:t.LOOKAROUND_AHEAD,anchor:r,charsEnd:u,charsLength:a}),u=l.length,a=l.length-s,o(e+1,r,n);const i=c.pop();switch(u=i.charsEnd,a=i.charsLength,n.phraseLength=0,n.state){case t.EMPTY:case t.MATCH:n.state=t.NOMATCH;break;case t.NOMATCH:n.state=t.EMPTY;break;default:throw new Error(`opNOT: invalid state ${n.state}`)}},W=function(e,r,n){const i=h[e];n.state=t.NOMATCH,r<u&&i.min<=l[r]&&l[r]<=i.max&&(n.state=t.MATCH,n.phraseLength=1)},Y=function(e,r,n){let i;const o=h[e],s=o.string.length;if(n.state=t.NOMATCH,r+s<=u){for(i=0;i<s;i+=1)if(l[r+i]!==o.string[i])return;n.state=t.MATCH,n.phraseLength=s}},J=function(e,r,n){let i,o;const s=h[e];n.state=t.NOMATCH;const a=s.string.length;if(0!==a){if(r+a<=u){for(i=0;i<a;i+=1)if(o=l[r+i],o>=65&&o<=90&&(o+=32),o!==s.string[i])return;n.state=t.MATCH,n.phraseLength=a}}else n.state=t.EMPTY},Z=function(e,r,n){n.state=t.NOMATCH,n.phraseLength=0,n.state=0===r?t.EMPTY:t.NOMATCH},X=function(e,r,n){n.state=t.NOMATCH,n.phraseLength=0,n.state=r===l.length?t.EMPTY:t.NOMATCH},Q=function(e,r,n){let i,o,s,a;const c=h[e];n.state=t.NOMATCH,a=c.index<m.length?m[c.index].lower:b[c.index-m.length].lower;const f=c.bkrMode===t.BKR_MODE_PM?n.pFrame.getPhrase(a):n.uFrame.getPhrase(a),d=c.bkrCase===t.BKR_MODE_CI;if(null===f)return;const p=f.phraseIndex,y=f.phraseLength;if(0!==y){if(r+y<=u){if(d){for(i=0;i<y;i+=1)if(o=l[r+i],s=l[p+i],o>=65&&o<=90&&(o+=32),s>=65&&s<=90&&(s+=32),o!==s)return;n.state=t.MATCH,n.phraseLength=y}else for(i=0;i<y;i+=1)if(o=l[r+i],s=l[p+i],o!==s)return;n.state=t.MATCH,n.phraseLength=y}}else n.state=t.EMPTY},tt=function(e,r,n){switch(c.push({lookAround:t.LOOKAROUND_BEHIND,anchor:r}),o(e+1,r,n),c.pop(),n.phraseLength=0,n.state){case t.EMPTY:n.state=t.EMPTY;break;case t.MATCH:n.state=t.EMPTY;break;case t.NOMATCH:n.state=t.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${n.state}`)}},et=function(e,r,n){switch(c.push({lookAround:t.LOOKAROUND_BEHIND,anchor:r}),o(e+1,r,n),c.pop(),n.phraseLength=0,n.state){case t.EMPTY:case t.MATCH:n.state=t.NOMATCH;break;case t.NOMATCH:n.state=t.EMPTY;break;default:throw new Error(`opBKN: invalid state ${n.state}`)}},rt=function(e,r,n){let s,a,u,c;const l=h[e],f=n.uFrame.length(),d=n.pFrame.length();i.ast&&(a=i.ast.getLength()),s=!0,u=r,c=0;for(let i=l.children.length-1;i>=0;i-=1)if(o(l.children[i],u,n),u-=n.phraseLength,c+=n.phraseLength,n.state===t.NOMATCH){s=!1;break}s?(n.state=0===c?t.EMPTY:t.MATCH,n.phraseLength=c):(n.state=t.NOMATCH,n.phraseLength=0,n.uFrame.pop(f),n.pFrame.pop(d),i.ast&&i.ast.setLength(a))},nt=function(e,r,n){let s,a,u,c;const l=h[e];a=r,u=0,c=0;const f=n.uFrame.length(),d=n.pFrame.length();i.ast&&(s=i.ast.getLength());const p=!0;while(p){if(a<=0)break;if(o(e+1,a,n),n.state===t.NOMATCH)break;if(n.state===t.EMPTY)break;if(c+=1,u+=n.phraseLength,a-=n.phraseLength,c===l.max)break}n.state===t.EMPTY||c>=l.min?(n.state=0===u?t.EMPTY:t.MATCH,n.phraseLength=u):(n.state=t.NOMATCH,n.phraseLength=0,n.uFrame.pop(f),n.pFrame.pop(d),i.ast&&i.ast.setLength(s))},it=function(e,r,n){const i=h[e];if(n.state=t.NOMATCH,n.phraseLength=0,r>0){const e=l[r-1];i.min<=e&&e<=i.max&&(n.state=t.MATCH,n.phraseLength=1)}},ot=function(e,r,n){let i;const o=h[e];n.state=t.NOMATCH;const s=o.string.length,a=r-s;if(a>=0){for(i=0;i<s;i+=1)if(l[a+i]!==o.string[i])return;n.state=t.MATCH,n.phraseLength=s}},st=function(e,r,n){let i;const o=h[e];n.state=t.NOMATCH;const s=o.string.length;if(0===s)return void(n.state=t.EMPTY);const a=r-s;if(a>=0){for(let t=0;t<s;t+=1)if(i=l[a+t],i>=65&&i<=90&&(i+=32),i!==o.string[t])return;n.state=t.MATCH,n.phraseLength=s}},at=function(e,r,n){let i,o,s,a;const u=h[e];n.state=t.NOMATCH,n.phraseLength=0,a=u.index<m.length?m[u.index].lower:b[u.index-m.length].lower;const c=u.bkrMode===t.BKR_MODE_PM?n.pFrame.getPhrase(a):n.uFrame.getPhrase(a),f=u.bkrCase===t.BKR_MODE_CI;if(null===c)return;const d=c.phraseIndex,p=c.phraseLength;if(0===p)return n.state=t.EMPTY,void(n.phraseLength=0);const y=r-p;if(y>=0){if(f){for(i=0;i<p;i+=1)if(o=l[y+i],s=l[d+i],o>=65&&o<=90&&(o+=32),s>=65&&s<=90&&(s+=32),o!==s)return;n.state=t.MATCH,n.phraseLength=p}else for(i=0;i<p;i+=1)if(o=l[y+i],s=l[d+i],o!==s)return;n.state=t.MATCH,n.phraseLength=p}};o=function(e,r,n){let o=!0;const s=h[e];if(p+=1,p>E)throw new Error(`parser: maximum number of node hits exceeded: ${E}`);if(f+=1,f>d&&(d=f,d>_))throw new Error(`parser: maximum parse tree depth exceeded: ${_}`);if(n.refresh(),null!==i.trace){const t=M();i.trace.down(s,n.state,r,n.phraseLength,t.anchor,t.lookAround)}if(C())switch(s.type){case t.ALT:j(e,r,n);break;case t.CAT:rt(e,r,n);break;case t.REP:nt(e,r,n);break;case t.RNM:q(e,r,n);break;case t.UDT:z(e,r,n);break;case t.AND:V(e,r,n);break;case t.NOT:G(e,r,n);break;case t.TRG:it(e,r,n);break;case t.TBS:ot(e,r,n);break;case t.TLS:st(e,r,n);break;case t.BKR:at(e,r,n);break;case t.BKA:tt(e,r,n);break;case t.BKN:et(e,r,n);break;case t.ABG:Z(e,r,n);break;case t.AEN:X(e,r,n);break;default:o=!1;break}else switch(s.type){case t.ALT:j(e,r,n);break;case t.CAT:F(e,r,n);break;case t.REP:K(e,r,n);break;case t.RNM:q(e,r,n);break;case t.UDT:z(e,r,n);break;case t.AND:V(e,r,n);break;case t.NOT:G(e,r,n);break;case t.TRG:W(e,r,n);break;case t.TBS:Y(e,r,n);break;case t.TLS:J(e,r,n);break;case t.BKR:Q(e,r,n);break;case t.BKA:tt(e,r,n);break;case t.BKN:et(e,r,n);break;case t.ABG:Z(e,r,n);break;case t.AEN:X(e,r,n);break;default:o=!1;break}if(!k()&&r+n.phraseLength>v&&(v=r+n.phraseLength),null!==i.stats&&i.stats.collect(s,n),null!==i.trace){const t=M();i.trace.up(s,n.state,r,n.phraseLength,t.anchor,t.lookAround)}return f-=1,o}}},30600:function(t,e,r){r(21703),t.exports=function(){const t=r(92578),e=r(80107),n=r(84382),i="stats.js: ";let o=[],s=[];const a=[];let u;const c=[],h=[];this.statsObject="statsObject";const l="stats",f=function(t,e){return t.lower<e.lower?-1:t.lower>e.lower?1:0},d=function(t,e){return t.total<e.total?1:t.total>e.total?-1:f(t,e)},p=function(t,e){return t.index<e.index?-1:t.index>e.index?1:0},y=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},g=function(){a.length=0,u=new y,a[t.ALT]=new y,a[t.CAT]=new y,a[t.REP]=new y,a[t.RNM]=new y,a[t.TRG]=new y,a[t.TBS]=new y,a[t.TLS]=new y,a[t.UDT]=new y,a[t.AND]=new y,a[t.NOT]=new y,a[t.BKR]=new y,a[t.BKA]=new y,a[t.BKN]=new y,a[t.ABG]=new y,a[t.AEN]=new y,c.length=0;for(let t=0;t<o.length;t+=1)c.push({empty:0,match:0,nomatch:0,total:0,name:o[t].name,lower:o[t].lower,index:o[t].index});if(s.length>0){h.length=0;for(let t=0;t<s.length;t+=1)h.push({empty:0,match:0,nomatch:0,total:0,name:s[t].name,lower:s[t].lower,index:s[t].index})}},m=function(e,r){switch(e.total+=1,r){case t.EMPTY:e.empty+=1;break;case t.MATCH:e.match+=1;break;case t.NOMATCH:e.nomatch+=1;break;default:throw new Error(`${i}collect(): incStat(): unrecognized state: ${r}`)}},b=function(t,e){let r="";return r+="<tr>",r+=`<td class="${n.CLASS_ACTIVE}">${t}</td>`,r+=`<td class="${n.CLASS_EMPTY}">${e.empty}</td>`,r+=`<td class="${n.CLASS_MATCH}">${e.match}</td>`,r+=`<td class="${n.CLASS_NOMATCH}">${e.nomatch}</td>`,r+=`<td class="${n.CLASS_ACTIVE}">${e.total}</td>`,r+="</tr>\n",r},w=function(){let e="";return e+=b("ALT",a[t.ALT]),e+=b("CAT",a[t.CAT]),e+=b("REP",a[t.REP]),e+=b("RNM",a[t.RNM]),e+=b("TRG",a[t.TRG]),e+=b("TBS",a[t.TBS]),e+=b("TLS",a[t.TLS]),e+=b("UDT",a[t.UDT]),e+=b("AND",a[t.AND]),e+=b("NOT",a[t.NOT]),e+=b("BKR",a[t.BKR]),e+=b("BKA",a[t.BKA]),e+=b("BKN",a[t.BKN]),e+=b("ABG",a[t.ABG]),e+=b("AEN",a[t.AEN]),e+=b("totals",u),e},v=function(){let t="";t+="<tr><th></th><th></th><th></th><th></th><th></th></tr>\n",t+="<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>\n";for(let e=0;e<o.length;e+=1)c[e].total>0&&(t+="<tr>",t+=`<td class="${n.CLASS_ACTIVE}">${c[e].name}</td>`,t+=`<td class="${n.CLASS_EMPTY}">${c[e].empty}</td>`,t+=`<td class="${n.CLASS_MATCH}">${c[e].match}</td>`,t+=`<td class="${n.CLASS_NOMATCH}">${c[e].nomatch}</td>`,t+=`<td class="${n.CLASS_ACTIVE}">${c[e].total}</td>`,t+="</tr>\n");if(s.length>0){t+="<tr><th></th><th></th><th></th><th></th><th></th></tr>\n",t+="<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>\n";for(let e=0;e<s.length;e+=1)h[e].total>0&&(t+="<tr>",t+=`<td class="${n.CLASS_ACTIVE}">${h[e].name}</td>`,t+=`<td class="${n.CLASS_EMPTY}">${h[e].empty}</td>`,t+=`<td class="${n.CLASS_MATCH}">${h[e].match}</td>`,t+=`<td class="${n.CLASS_NOMATCH}">${h[e].nomatch}</td>`,t+=`<td class="${n.CLASS_ACTIVE}">${h[e].total}</td>`,t+="</tr>\n")}return t};this.validate=function(t){let e=!1;return"string"===typeof t&&l===t&&(e=!0),e},this.init=function(t,e){o=t,s=e,g()},this.collect=function(e,r){m(u,r.state,r.phraseLength),m(a[e.type],r.state,r.phraseLength),e.type===t.RNM&&m(c[e.index],r.state,r.phraseLength),e.type===t.UDT&&m(h[e.index],r.state,r.phraseLength)},this.toHtml=function(t,e){let r="";r+=`<table class="${n.CLASS_STATS}">\n`,"string"===typeof e&&(r+=`<caption>${e}</caption>\n`),r+=`<tr><th class="${n.CLASS_ACTIVE}">ops</th>\n`,r+=`<th class="${n.CLASS_EMPTY}">EMPTY</th>\n`,r+=`<th class="${n.CLASS_MATCH}">MATCH</th>\n`,r+=`<th class="${n.CLASS_NOMATCH}">NOMATCH</th>\n`,r+=`<th class="${n.CLASS_ACTIVE}">totals</th></tr>\n`;const i=!0;while(i){if(void 0===t){r+=w();break}if(null===t){r+=w();break}if("ops"===t){r+=w();break}if("index"===t){c.sort(p),h.length>0&&h.sort(p),r+=w(),r+=v();break}if("hits"===t){c.sort(d),h.length>0&&h.sort(p),r+=w(),r+=v();break}if("alpha"===t){c.sort(f),h.length>0&&h.sort(f),r+=w(),r+=v();break}break}return r+="</table>\n",r},this.toHtmlPage=function(t,r,n){return e.htmlToPage(this.toHtml(t,r),n)}}},84382:function(t){t.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}},70301:function(t,e,r){r(21703),t.exports=function(){const t=r(80107),e=r(84382),n=new(r(43402)),i=r(92578),o="trace.js: ",s=this,a=16,u=10,c=8,h=32,l=80,f=5,d=[];let p=5e3,y=-1,g=0,m=0;const b=[];let w=null,v=null,_=null;const E=[],S=[],A=`<span class="${e.CLASS_LINEEND}">&bull;</span>`,I=`<span class="${e.CLASS_LINEEND}">&hellip;</span>`,T=`<span class="${e.CLASS_EMPTY}">&#120634;</span>`,R=function(){const t=function(t){E[i.ALT]=t,E[i.CAT]=t,E[i.REP]=t,E[i.TLS]=t,E[i.TBS]=t,E[i.TRG]=t,E[i.AND]=t,E[i.NOT]=t,E[i.BKR]=t,E[i.BKA]=t,E[i.BKN]=t,E[i.ABG]=t,E[i.AEN]=t};let e=0;for(const r in s.filter.operators)e+=1;if(0!==e){for(const e in s.filter.operators){const r=e.toUpperCase();if("<ALL>"===r)return void t(!0);if("<NONE>"===r)return void t(!1)}t(!1);for(const t in s.filter.operators){const e=t.toUpperCase();if("ALT"===e)E[i.ALT]=!0===s.filter.operators[t];else if("CAT"===e)E[i.CAT]=!0===s.filter.operators[t];else if("REP"===e)E[i.REP]=!0===s.filter.operators[t];else if("AND"===e)E[i.AND]=!0===s.filter.operators[t];else if("NOT"===e)E[i.NOT]=!0===s.filter.operators[t];else if("TLS"===e)E[i.TLS]=!0===s.filter.operators[t];else if("TBS"===e)E[i.TBS]=!0===s.filter.operators[t];else if("TRG"===e)E[i.TRG]=!0===s.filter.operators[t];else if("BKR"===e)E[i.BKR]=!0===s.filter.operators[t];else if("BKA"===e)E[i.BKA]=!0===s.filter.operators[t];else if("BKN"===e)E[i.BKN]=!0===s.filter.operators[t];else if("ABG"===e)E[i.ABG]=!0===s.filter.operators[t];else{if("AEN"!==e)throw new Error(`${o}initOpratorFilter: '${t}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`);E[i.AEN]=!0===s.filter.operators[t]}}}else t(!1)},M=function(){const t=function(t){E[i.RNM]=t,E[i.UDT]=t;const e=v.length+_.length;S.length=0;for(let r=0;r<e;r+=1)S.push(t)};let e,r;const n=[];for(r=0;r<v.length;r+=1)n.push(v[r].lower);for(r=0;r<_.length;r+=1)n.push(_[r].lower);S.length=0,e=0;for(const i in s.filter.rules)e+=1;if(0!==e){for(const e in s.filter.rules){const r=e.toLowerCase();if("<all>"===r)return void t(!0);if("<none>"===r)return void t(!1)}t(!1),E[i.RNM]=!0,E[i.UDT]=!0;for(const t in s.filter.rules){const e=t.toLowerCase();if(r=n.indexOf(e),r<0)throw new Error(`${o}initRuleFilter: '${t}' not a valid rule or udt name`);S[r]=!0===s.filter.rules[t]}}else t(!0)};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(t,e){y=-1,"number"===typeof t&&t>0?(p=Math.ceil(t),"number"===typeof e&&(y=Math.floor(e),y<0&&(y=-1))):p=0},this.getMaxRecords=function(){return p},this.getLastRecord=function(){return y},this.init=function(t,e,r){d.length=0,b.length=0,g=0,m=0,w=r,v=t,_=e,R(),M(),n.init(p)};const k=function(t){let e=!1;return e=t.type===i.RNM?!(!E[t.type]||!S[t.index]):t.type===i.UDT?!(!E[t.type]||!S[v.length+t.index]):E[t.type],e},C=function(t){return-1===y||t<=y};this.down=function(t,e,r,i,o,s){C(g)&&k(t)&&(b.push(g),d[n.increment()]={dirUp:!1,depth:m,thisLine:g,thatLine:void 0,opcode:t,state:e,phraseIndex:r,phraseLength:i,lookAnchor:o,lookAround:s},g+=1,m+=1)},this.up=function(t,e,r,i,o,s){if(C(g)&&k(t)){const a=g,u=b.pop(),c=n.getListIndex(u);-1!==c&&(d[c].thatLine=a),m-=1,d[n.increment()]={dirUp:!0,depth:m,thisLine:a,thatLine:u,opcode:t,state:e,phraseIndex:r,phraseLength:i,lookAnchor:o,lookAround:s},g+=1}};const O=function(){function e(e,r){let n,o,s;if(r)switch(e.op={id:r.type,name:t.opcodeToString(r.type)},e.opData=void 0,r.type){case i.RNM:e.opData=v[r.index].name;break;case i.UDT:e.opData=_[r.index].name;break;case i.BKR:n=r.index<v.length?v[r.index].name:_[r.index-v.length].name,o=r.bkrCase===i.BKR_MODE_CI?"%i":"%s",s=r.bkrMode===i.BKR_MODE_UM?"%u":"%p",e.opData=`\\\\${o}${s}${n}`;break;case i.TLS:e.opData=[];for(let t=0;t<r.string.length;t+=1)e.opData.push(r.string[t]);break;case i.TBS:e.opData=[];for(let t=0;t<r.string.length;t+=1)e.opData.push(r.string[t]);break;case i.TRG:e.opData=[r.min,r.max];break;case i.REP:e.opData=[r.min,r.max];break;default:throw new Error("unrecognized opcode")}else e.op={id:void 0,name:void 0},e.opData=void 0}function r(t,e,r){return t===i.MATCH?{index:e,length:r}:t===i.NOMATCH||t===i.EMPTY?{index:e,length:0}:null}let o=-1;function s(n,i,s){const a={id:o++,branch:-1,parent:n,up:!1,down:!1,depth:s,children:[]};return i?(a.down=!0,a.state={id:i.state,name:t.stateToString(i.state)},a.phrase=null,e(a,i.opcode)):(a.state={id:void 0,name:void 0},a.phrase=r(),e(a,void 0)),a}function a(n,i){i&&(n.up=!0,n.state={id:i.state,name:t.stateToString(i.state)},n.phrase=r(i.state,i.phraseIndex,i.phraseLength),n.down||e(n,i.opcode))}let u=0,c=-1,h=1;function l(t){if(c+=1,t.branch=h,c>m&&(m=c),0===t.children.length)u+=1;else for(let e=0;e<t.children.length;e+=1)e>0&&(h+=1),t.children[e].leftMost=!1,t.children[e].rightMost=!1,t.leftMost&&(t.children[e].leftMost=0===e),t.rightMost&&(t.children[e].rightMost=e===t.children.length-1),l(t.children[e]);c-=1}function f(t,e){let r;const n={};if(n.id=t.id,n.branch=t.branch,n.leftMost=t.leftMost,n.rightMost=t.rightMost,r=t.state.name?t.state.name:"ACTIVE",n.state={id:t.state.id,name:r},r=t.op.name?t.op.name:"?",n.op={id:t.op.id,name:r},"string"===typeof t.opData)n.opData=t.opData;else if(Array.isArray(t.opData)){n.opData=[];for(let e=0;e<t.opData.length;e+=1)n.opData[e]=t.opData[e]}else n.opData=void 0;t.phrase?n.phrase={index:t.phrase.index,length:t.phrase.length}:n.phrase=null,n.depth=t.depth,n.children=[];for(let i=0;i<t.children.length;i+=1){const r=i!==t.children.length-1;n.children[i]=f(t.children[i],e,r)}return n}const p=[];let y,g,b,E,S=!0;const A=s(null,null,-1);p.push(A),g=A,n.forEach((t=>{if(E=d[t],S&&(S=!1,E.depth>0)){const t=E.dirUp?E.depth+1:E.depth;for(let e=0;e<t;e+=1)b=g,g=s(g,null,e),p.push(g),b.children.push(g)}E.dirUp?(g=p.pop(),a(g,E),g=p[p.length-1]):(b=g,g=s(g,E,E.depth),p.push(g),b.children.push(g))}));while(p.length>1)g=p.pop(),a(g,null);if(0===A.children.length)throw new Error("trace.toTree(): parse tree has no nodes");if(0===p.length)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");y=A.children[0];let I=y;while(y&&!y.down&&!y.up)I=y,y=y.children[0];y=I,y.leftMost=!0,y.rightMost=!0,l(y),y.branch=0;const T={string:[]};for(let t=0;t<w.length;t+=1)T.string[t]=w[t];T.rules=[];for(let t=0;t<v.length;t+=1)T.rules[t]=v[t].name;T.udts=[];for(let t=0;t<_.length;t+=1)T.udts[t]=_[t].name;let R;return T.id={},T.id.ALT={id:i.ALT,name:"ALT"},T.id.CAT={id:i.CAT,name:"CAT"},T.id.REP={id:i.REP,name:"REP"},T.id.RNM={id:i.RNM,name:"RNM"},T.id.TLS={id:i.TLS,name:"TLS"},T.id.TBS={id:i.TBS,name:"TBS"},T.id.TRG={id:i.TRG,name:"TRG"},T.id.UDT={id:i.UDT,name:"UDT"},T.id.AND={id:i.AND,name:"AND"},T.id.NOT={id:i.NOT,name:"NOT"},T.id.BKR={id:i.BKR,name:"BKR"},T.id.BKA={id:i.BKA,name:"BKA"},T.id.BKN={id:i.BKN,name:"BKN"},T.id.ABG={id:i.ABG,name:"ABG"},T.id.AEN={id:i.AEN,name:"AEN"},T.id.ACTIVE={id:i.ACTIVE,name:"ACTIVE"},T.id.MATCH={id:i.MATCH,name:"MATCH"},T.id.EMPTY={id:i.EMPTY,name:"EMPTY"},T.id.NOMATCH={id:i.NOMATCH,name:"NOMATCH"},T.treeDepth=m,T.leafNodes=u,R=y.down?y.up?"none":"right":y.up?"left":"both",T.branchesIncomplete=R,T.tree=f(y,y.depth,!1),T};this.toTree=function(t){const e=O();return t?JSON.stringify(e):e},this.toHtmlPage=function(e,r,n){return t.htmlToPage(this.toHtml(e,r),n)};const P=function(t,r){let n;switch(t){case a:n="hexadecimal";break;case u:n="decimal";break;case c:n="ASCII";break;case h:n="UNICODE";break;default:throw new Error(`${o}htmlHeader: unrecognized mode: ${t}`)}let i="";return i+=`<p>display mode: ${n}</p>\n`,i+=`<table class="${e.CLASS_TRACE}">\n`,"string"===typeof r&&(i+=`<caption>${r}</caption>`),i},B=function(){let t="";return t+="</table>\n",t+=`<p class="${e.CLASS_MONOSPACE}">legend:<br>\n`,t+="(a)&nbsp;-&nbsp;line number<br>\n",t+="(b)&nbsp;-&nbsp;matching line number<br>\n",t+="(c)&nbsp;-&nbsp;phrase offset<br>\n",t+="(d)&nbsp;-&nbsp;phrase length<br>\n",t+="(e)&nbsp;-&nbsp;tree depth<br>\n",t+="(f)&nbsp;-&nbsp;operator state<br>\n",t+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_MATCH}">&uarr;M</span> phrase matched<br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>\n`,t+="operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>\n",t+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${l} characters of the phrase being matched<br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_MATCH}">matched characters</span><br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${e.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${T} empty string<br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${A} end of input string<br>\n`,t+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${I} input string display truncated<br>\n`,t+="</p>\n",t+=`<p class="${e.CLASS_MONOSPACE}">\n`,t+="<sup>&dagger;</sup>original ABNF operators:<br>\n",t+="ALT - alternation<br>\n",t+="CAT - concatenation<br>\n",t+="REP - repetition<br>\n",t+="RNM - rule name<br>\n",t+="TRG - terminal range<br>\n",t+="TLS - terminal literal string (case insensitive)<br>\n",t+="TBS - terminal binary string (case sensitive)<br>\n",t+="<br>\n",t+="<sup>&Dagger;</sup>super set SABNF operators:<br>\n",t+="UDT - user-defined terminal<br>\n",t+="AND - positive look ahead<br>\n",t+="NOT - negative look ahead<br>\n",t+="BKA - positive look behind<br>\n",t+="BKN - negative look behind<br>\n",t+="BKR - back reference<br>\n",t+="ABG - anchor - begin of input string<br>\n",t+="AEN - anchor - end of input string<br>\n",t+="</p>\n",t};this.indent=function(t){let e="";for(let r=0;r<t;r+=1)e+=".";return e};const x=function(t,e){let r="";if(e.type===i.TRG)if(t===a||t===h){let n=e.min.toString(16).toUpperCase();n.length%2!==0&&(n=`0${n}`),r+=t===a?"%x":"U+",r+=n,n=e.max.toString(16).toUpperCase(),n.length%2!==0&&(n=`0${n}`),r+=`&ndash;${n}`}else r=`%d${e.min.toString(10)}&ndash;${e.max.toString(10)}`;return r},N=function(t,e){let r="";if(e.type===i.REP)if(t===a){let t=e.min.toString(16).toUpperCase();t.length%2!==0&&(t=`0${t}`),r=`x${t}`,e.max<1/0?(t=e.max.toString(16).toUpperCase(),t.length%2!==0&&(t=`0${t}`)):t="inf",r+=`&ndash;${t}`}else r=e.max<1/0?`${e.min.toString(10)}&ndash;${e.max.toString(10)}`:`${e.min.toString(10)}&ndash;inf`;return r},D=function(t,e){let r="";if(e.type===i.TBS){const n=Math.min(e.string.length,2*f);if(t===a||t===h){r+=t===a?"%x":"U+";for(let t=0;t<n;t+=1){let n;t>0&&(r+="."),n=e.string[t].toString(16).toUpperCase(),n.length%2!==0&&(n=`0${n}`),r+=n}}else{r="%d";for(let t=0;t<n;t+=1)t>0&&(r+="."),r+=e.string[t].toString(10)}n<e.string.length&&(r+=I)}return r},L=function(e,r){let n="";if(r.type===i.TLS){const i=Math.min(r.string.length,f);if(e===a||e===u){let t,o,s;e===a?(n="%x",s=16):(n="%d",s=10);for(let e=0;e<i;e+=1)e>0&&(n+="."),o=r.string[e],o>=97&&o<=122?(t=o-32,n+=`${t.toString(s)}/${o.toString(s)}`.toUpperCase()):o>=65&&o<=90?(t=o,o+=32,n+=`${t.toString(s)}/${o.toString(s)}`.toUpperCase()):n+=o.toString(s).toUpperCase();i<r.string.length&&(n+=I)}else{n='"';for(let e=0;e<i;e+=1)n+=t.asciiChars[r.string[e]];i<r.string.length&&(n+=I),n+='"'}}return n},U=function(e,r,n,i,o){if(0===i)return"";let s="";const l=o?",":"";switch(e){case a:s=l+t.charsToHex(r,n,i);break;case u:if(o)return`,${t.charsToDec(r,n,i)}`;s=l+t.charsToDec(r,n,i);break;case h:s=t.charsToUnicode(r,n,i);break;case c:default:s=t.charsToAsciiHtml(r,n,i);break}return s},j=function(t,r,n,o,s,a){let u,c,h,f,d="",p=A;const y=`<span class="${e.CLASS_LOOKBEHIND}">`,g=`<span class="${e.CLASS_REMAINDER}">`,m="</span>";let b=!1;switch(n){case i.EMPTY:d+=T;case i.NOMATCH:case i.MATCH:case i.ACTIVE:u=o-s,c=a-u,h=a,f=r.length-h;break;default:throw new Error("unrecognized state")}return p=A,c>l?(c=l,p=I,f=0):c+f>l&&(p=I,f=l-c),c>0&&(d+=y,d+=U(t,r,u,c,b),d+=m,b=!0),f>0&&(d+=g,d+=U(t,r,h,f,b),d+=m),d+p},F=function(t,r,n,o,s,a){let u,c,h,f,d="",p=A;const y=`<span class="${e.CLASS_REMAINDER}">`,g="</span>";let m=!1;switch(n){case i.EMPTY:d+=T;case i.NOMATCH:case i.ACTIVE:u=o,c=0,h=o,f=r.length-h;break;case i.MATCH:u=o,c=s,h=o+c,f=r.length-h;break;default:throw new Error("unrecognized state")}return p=A,c>l?(c=l,p=I,f=0):c+f>l&&(p=I,f=l-c),c>0&&(d+=a,d+=U(t,r,u,c,m),d+=g,m=!0),f>0&&(d+=y,d+=U(t,r,h,f,m),d+=g),d+p},K=function(t,r,n,i,o){const s=`<span class="${e.CLASS_LOOKAHEAD}">`;return F(t,r,n,i,o,s)},$=function(t,r,n,i,o){const s=`<span class="${e.CLASS_MATCH}">`;return F(t,r,n,i,o,s)},q=function(r){if(null===v)return"";let o,a,u,c,h,l,f="";return f+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",f+="<th>operator</th><th>phrase</th></tr>\n",n.forEach((n=>{const p=d[n];switch(o=p.thisLine,a=void 0!==p.thatLine?p.thatLine:"--",u=!1,c=!1,h=!1,p.lookAround===i.LOOKAROUND_AHEAD&&(u=!0,h=!0,l=p.lookAnchor),p.opcode.type!==i.AND&&p.opcode.type!==i.NOT||(u=!0,h=!0,l=p.phraseIndex),p.lookAround===i.LOOKAROUND_BEHIND&&(c=!0,h=!0,l=p.lookAnchor),p.opcode.type!==i.BKA&&p.opcode.type!==i.BKN||(c=!0,h=!0,l=p.phraseIndex),f+="<tr>",f+=`<td>${o}</td><td>${a}</td>`,f+=`<td>${p.phraseIndex}</td>`,f+=`<td>${p.phraseLength}</td>`,f+=`<td>${p.depth}</td>`,f+="<td>",p.state){case i.ACTIVE:f+=`<span class="${e.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case i.MATCH:f+=`<span class="${e.CLASS_MATCH}">&uarr;M</span>`;break;case i.NOMATCH:f+=`<span class="${e.CLASS_NOMATCH}">&uarr;N</span>`;break;case i.EMPTY:f+=`<span class="${e.CLASS_EMPTY}">&uarr;E</span>`;break;default:f+=`<span class="${e.CLASS_ACTIVE}">--</span>`;break}if(f+="</td>",f+="<td>",f+=s.indent(p.depth),u?f+=`<span class="${e.CLASS_LOOKAHEAD}">`:c&&(f+=`<span class="${e.CLASS_LOOKBEHIND}">`),f+=t.opcodeToString(p.opcode.type),p.opcode.type===i.RNM&&(f+=`(${v[p.opcode.index].name}) `),p.opcode.type===i.BKR){const t=p.opcode.bkrCase===i.BKR_MODE_CI?"%i":"%s",e=p.opcode.bkrMode===i.BKR_MODE_UM?"%u":"%p";f+=`(\\${t}${e}${v[p.opcode.index].name}) `}p.opcode.type===i.UDT&&(f+=`(${_[p.opcode.index].name}) `),p.opcode.type===i.TRG&&(f+=`(${x(r,p.opcode)}) `),p.opcode.type===i.TBS&&(f+=`(${D(r,p.opcode)}) `),p.opcode.type===i.TLS&&(f+=`(${L(r,p.opcode)}) `),p.opcode.type===i.REP&&(f+=`(${N(r,p.opcode)}) `),h&&(f+="</span>"),f+="</td>",f+="<td>",f+=c?j(r,w,p.state,p.phraseIndex,p.phraseLength,l):u?K(r,w,p.state,p.phraseIndex,p.phraseLength):$(r,w,p.state,p.phraseIndex,p.phraseLength),f+="</td></tr>\n"})),f+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",f+="<th>operator</th><th>phrase</th></tr>\n",f+="</table>\n",f};this.toHtml=function(t,e){let r=c;if("string"===typeof t&&t.length>=3){const e=t.toLowerCase().slice(0,3);"hex"===e?r=a:"dec"===e?r=u:"uni"===e&&(r=h)}let n="";return n+=P(r,e),n+=q(r),n+=B(),n}}},80107:function(t,e,r){r(21703);const n=r(84382),i=r(12633),o=r(21083),s=r(92578),a="utilities.js: ",u=this,c=function(t,e,r){let n,i=e;const o=!0;while(o){if(t<=0){i=0,n=0;break}if("number"!==typeof i){i=0,n=t;break}if(i>=t){i=t,n=t;break}if("number"!==typeof r){n=t;break}if(n=i+r,n>t){n=t;break}break}return{beg:i,end:n}};function h(t){return!(t>=55296&&t<=57343)&&!(t>1114111)}e.htmlToPage=function(t,e){let r;if("string"!==typeof t)throw new Error(`${a}htmlToPage: input HTML is not a string`);r="string"!==typeof e?"htmlToPage":e;let n="";return n+="<!DOCTYPE html>\n",n+='<html lang="en">\n',n+="<head>\n",n+='<meta charset="utf-8">\n',n+=`<title>${r}</title>\n`,n+="<style>\n",n+=o(),n+="</style>\n",n+="</head>\n<body>\n",n+=`<p>${new Date}</p>\n`,n+=t,n+="</body>\n</html>\n",n},e.parserResultToHtml=function(t,e){let r,i,o=null;"string"===typeof e&&""!==e&&(o=e),r=!0===t.success?`<span class="${n.CLASS_MATCH}">true</span>`:`<span class="${n.CLASS_NOMATCH}">false</span>`,i=t.state===s.EMPTY?`<span class="${n.CLASS_EMPTY}">EMPTY</span>`:t.state===s.MATCH?`<span class="${n.CLASS_MATCH}">MATCH</span>`:t.state===s.NOMATCH?`<span class="${n.CLASS_NOMATCH}">NOMATCH</span>`:`<span class="${n.CLASS_NOMATCH}">unrecognized</span>`;let a="";return a+=`<table class="${n.CLASS_STATE}">\n`,o&&(a+=`<caption>${o}</caption>\n`),a+="<tr><th>state item</th><th>value</th><th>description</th></tr>\n",a+=`<tr><td>parser success</td><td>${r}</td>\n`,a+=`<td><span class="${n.CLASS_MATCH}">true</span> if the parse succeeded,\n`,a+=` <span class="${n.CLASS_NOMATCH}">false</span> otherwise`,a+="<br><i>NOTE: for success, entire string must be matched</i></td></tr>\n",a+=`<tr><td>parser state</td><td>${i}</td>\n`,a+=`<td><span class="${n.CLASS_EMPTY}">EMPTY</span>, `,a+=`<span class="${n.CLASS_MATCH}">MATCH</span> or \n`,a+=`<span class="${n.CLASS_NOMATCH}">NOMATCH</span></td></tr>\n`,a+=`<tr><td>string length</td><td>${t.length}</td><td>length of the input (sub)string</td></tr>\n`,a+=`<tr><td>matched length</td><td>${t.matched}</td><td>number of input string characters matched</td></tr>\n`,a+=`<tr><td>max matched</td><td>${t.maxMatched}</td><td>maximum number of input string characters matched</td></tr>\n`,a+=`<tr><td>max tree depth</td><td>${t.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>\n`,a+=`<tr><td>node hits</td><td>${t.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>\n`,a+=`<tr><td>input length</td><td>${t.inputLength}</td><td>length of full input string</td></tr>\n`,a+=`<tr><td>sub-string begin</td><td>${t.subBegin}</td><td>sub-string first character index</td></tr>\n`,a+=`<tr><td>sub-string end</td><td>${t.subEnd}</td><td>sub-string end-of-string index</td></tr>\n`,a+=`<tr><td>sub-string length</td><td>${t.subLength}</td><td>sub-string length</td></tr>\n`,a+="</table>\n",a},e.charsToString=function(t,e,r){let n,o;if("number"===typeof e){if(e>=t.length)return"";n=e<0?0:e}else n=0;if("number"===typeof r){if(r<=0)return"";o=r>t.length-n?t.length:n+r}else o=t.length;return n<o?i.encode("UTF16LE",t.slice(n,o)).toString("utf16le"):""},e.stringToChars=function(t){return i.decode("STRING",t)},e.opcodeToString=function(t){let e="unknown";switch(t){case s.ALT:e="ALT";break;case s.CAT:e="CAT";break;case s.RNM:e="RNM";break;case s.UDT:e="UDT";break;case s.AND:e="AND";break;case s.NOT:e="NOT";break;case s.REP:e="REP";break;case s.TRG:e="TRG";break;case s.TBS:e="TBS";break;case s.TLS:e="TLS";break;case s.BKR:e="BKR";break;case s.BKA:e="BKA";break;case s.BKN:e="BKN";break;case s.ABG:e="ABG";break;case s.AEN:e="AEN";break;default:throw new Error("unrecognized opcode")}return e},e.stateToString=function(t){let e="unknown";switch(t){case s.ACTIVE:e="ACTIVE";break;case s.MATCH:e="MATCH";break;case s.EMPTY:e="EMPTY";break;case s.NOMATCH:e="NOMATCH";break;default:throw new Error("unrecognized state")}return e},e.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],e.charToHex=function(t){let e=t.toString(16).toUpperCase();switch(e.length){case 1:case 3:case 7:e=`0${e}`;break;case 2:case 6:e=`00${e}`;break;case 4:break;case 5:e=`000${e}`;break;default:throw new Error("unrecognized option")}return e},e.charsToDec=function(t,e,r){let n="";if(!Array.isArray(t))throw new Error(`${a}charsToDec: input must be an array of integers`);const i=c(t.length,e,r);if(i.end>i.beg){n+=t[i.beg];for(let e=i.beg+1;e<i.end;e+=1)n+=`,${t[e]}`}return n},e.charsToHex=function(t,e,r){let n="";if(!Array.isArray(t))throw new Error(`${a}charsToHex: input must be an array of integers`);const i=c(t.length,e,r);if(i.end>i.beg){n+=`\\x${u.charToHex(t[i.beg])}`;for(let e=i.beg+1;e<i.end;e+=1)n+=`,\\x${u.charToHex(t[e])}`}return n},e.charsToHtmlEntities=function(t,e,r){let n="";if(!Array.isArray(t))throw new Error(`${a}charsToHex: input must be an array of integers`);const i=c(t.length,e,r);if(i.end>i.beg)for(let o=i.beg;o<i.end;o+=1)n+=`&#x${t[o].toString(16)};`;return n},e.charsToUnicode=function(t,e,r){let n="";if(!Array.isArray(t))throw new Error(`${a}charsToUnicode: input must be an array of integers`);const i=c(t.length,e,r);if(i.end>i.beg)for(let o=i.beg;o<i.end;o+=1)h(t[o])?n+=`&#${t[o]};`:n+=` U+${u.charToHex(t[o])}`;return n},e.charsToJsUnicode=function(t,e,r){let n="";if(!Array.isArray(t))throw new Error(`${a}charsToJsUnicode: input must be an array of integers`);const i=c(t.length,e,r);if(i.end>i.beg){n+=`\\u${u.charToHex(t[i.beg])}`;for(let e=i.beg+1;e<i.end;e+=1)n+=`,\\u${u.charToHex(t[e])}`}return n},e.charsToAscii=function(t,e,r){let n="";if(!Array.isArray(t))throw new Error(`${a}charsToAscii: input must be an array of integers`);const i=c(t.length,e,r);for(let o=i.beg;o<i.end;o+=1){const e=t[o];n+=e>=32&&e<=126?String.fromCharCode(e):`\\x${u.charToHex(e)}`}return n},e.charsToAsciiHtml=function(t,e,r){if(!Array.isArray(t))throw new Error(`${a}charsToAsciiHtml: input must be an array of integers`);let i,o="";const s=c(t.length,e,r);for(let a=s.beg;a<s.end;a+=1)i=t[a],o+=i<32||127===i?`<span class="${n.CLASS_CTRLCHAR}">${u.asciiChars[i]}</span>`:i>127?`<span class="${n.CLASS_CTRLCHAR}">U+${u.charToHex(i)}</span>`:u.asciiChars[i];return o},e.stringToAsciiHtml=function(t){const e=i.decode("STRING",t);return this.charsToAsciiHtml(e)}},18625:function(t,e,r){"use strict";const n=e;n.bignum=r(23352),n.define=r(49542).define,n.base=r(51406),n.constants=r(84194),n.decoders=r(86410),n.encoders=r(19375)},49542:function(t,e,r){"use strict";const n=r(19375),i=r(86410),o=r(81923),s=e;function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}s.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){const e=this.name;function r(t){this._initNamed(t,e)}return o(r,t),r.prototype._initNamed=function(e,r){t.call(this,e,r)},new r(this)},a.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},a.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},a.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(n[t])),this.encoders[t]},a.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},42956:function(t,e,r){"use strict";const n=r(81923),i=r(5487).b,o=r(85330).Buffer;function s(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return a.isEncoderBuffer(t)||(t=new a(t,e)),this.length+=t.length,t}),this);else if("number"===typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"===typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(s,i),e.C=s,s.isDecoderBuffer=function(t){if(t instanceof s)return!0;const e="object"===typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"===typeof t.offset&&"number"===typeof t.length&&"function"===typeof t.save&&"function"===typeof t.restore&&"function"===typeof t.isEmpty&&"function"===typeof t.readUInt8&&"function"===typeof t.skip&&"function"===typeof t.raw;return e},s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(t){const e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new s(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.R=a,a.isEncoderBuffer=function(t){if(t instanceof a)return!0;const e="object"===typeof t&&"EncoderBuffer"===t.constructor.name&&"number"===typeof t.length&&"function"===typeof t.join;return e},a.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(t,e),e+=r.length})):("number"===typeof this.value?t[e]=this.value:"string"===typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},51406:function(t,e,r){"use strict";const n=e;n.Reporter=r(5487).b,n.DecoderBuffer=r(42956).C,n.EncoderBuffer=r(42956).R,n.Node=r(92851)},92851:function(t,e,r){"use strict";r(21703);const n=r(5487).b,i=r(42956).R,o=r(42956).C,s=r(14961),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function h(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n["default"]=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=h;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const t=this._baseState,e={};l.forEach((function(r){e[r]=t[r]}));const r=new this.constructor(e.parent);return r._baseState=e,r},h.prototype._wrap=function(){const t=this._baseState;u.forEach((function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}}),this)},h.prototype._init=function(t){const e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),s.equal(e.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(t){const e=this._baseState,r=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==r.length&&(s(null===e.children),e.children=r,r.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!==typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(r){r==(0|r)&&(r|=0);const n=t[r];e[n]=r})),e})))},c.forEach((function(t){h.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),a.forEach((function(t){h.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(r),this}})),h.prototype.use=function(t){s(t);const e=this._baseState;return s(null===e.use),e.use=t,this},h.prototype.optional=function(){const t=this._baseState;return t.optional=!0,this},h.prototype.def=function(t){const e=this._baseState;return s(null===e["default"]),e["default"]=t,e.optional=!0,this},h.prototype.explicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},h.prototype.implicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},h.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},h.prototype.key=function(t){const e=this._baseState;return s(null===e.key),e.key=t,this},h.prototype.any=function(){const t=this._baseState;return t.any=!0,this},h.prototype.choice=function(t){const e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},h.prototype.contains=function(t){const e=this._baseState;return s(null===e.use),e.contains=t,this},h.prototype._decode=function(t,e){const r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));let n,i=r["default"],s=!0,a=null;if(null!==r.key&&(a=t.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(s=this._peekTag(t,n,r.any),t.isError(s))return s}else{const n=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),s=!0}catch(u){s=!1}t.restore(n)}}if(r.obj&&s&&(n=t.enterObject()),s){if(null!==r.explicit){const e=this._decodeTag(t,r.explicit);if(t.isError(e))return e;t=e}const n=t.offset;if(null===r.use&&null===r.choice){let e;r.any&&(e=t.save());const n=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(n))return n;r.any?i=t.raw(e):t=n}if(e&&e.track&&null!==r.tag&&e.track(t.path(),n,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(t,e)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new o(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(n,e)}}return r.obj&&s&&(i=t.leaveObject(n)),null===r.key||null===i&&!0!==s?null!==a&&t.exitKey(a):t.leaveKey(a,r.key,i),i},h.prototype._decodeGeneric=function(t,e,r){const n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},h.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),s(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},h.prototype._decodeChoice=function(t,e){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(o){const s=t.save(),a=r.choice[o];try{const r=a._decode(t,e);if(t.isError(r))return!1;n={type:o,value:r},i=!0}catch(u){return t.restore(s),!1}return!0}),this),i?n:t.error("Choice not matched")},h.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},h.prototype._encode=function(t,e,r){const n=this._baseState;if(null!==n["default"]&&n["default"]===t)return;const i=this._encodeValue(t,e,r);return void 0===i||this._skipDefault(i,e,r)?void 0:i},h.prototype._encodeValue=function(t,e,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new n);let o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i["default"])return;t=i["default"]}let s=null,a=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)s=this._getUse(i.contains,r)._encode(t,e),a=!0;else if(i.children)s=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");const n=e.enterKey(r._baseState.key);if("object"!==typeof t)return e.error("Child expected, but input is not object");const i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i}),this).filter((function(t){return t})),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,s=this._createEncoderBuffer(t.map((function(r){const n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)}),r))}else null!==i.use?o=this._getUse(i.use,r)._encode(t,e):(s=this._encodePrimitive(i.tag,t),a=!0);if(!i.any&&null===i.choice){const t=null!==i.implicit?i.implicit:i.tag,r=null===i.implicit?"universal":"context";null===t?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(t,a,r,s))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},h.prototype._encodeChoice=function(t,e){const r=this._baseState,n=r.choice[t.type];return n||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},h.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},h.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},h.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},5487:function(t,e,r){"use strict";r(21703);const n=r(81923);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.b=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,r){const n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},i.prototype.error=function(t){let e;const r=this._reporterState,n=t instanceof o;if(e=n?t:new o(r.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},i.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},n(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},70607:function(t,e){"use strict";function r(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r(e.tag)},84194:function(t,e,r){"use strict";const n=e;n._reverse=function(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e},n.der=r(70607)},96496:function(t,e,r){"use strict";const n=r(81923),i=r(23352),o=r(42956).C,s=r(92851),a=r(70607);function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){s.call(this,"der",t)}function h(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=a.tagClass[r>>6],i=0===(32&r);if(31===(31&r)){let n=r;r=0;while(128===(128&n)){if(n=t.readUInt8(e),t.isError(n))return n;r<<=7,r|=127&n}}else r&=31;const o=a.tag[r];return{cls:n,primitive:i,tag:r,tagStr:o}}function l(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0===(128&n))return n;const i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;const e=t.readUInt8(r);if(t.isError(e))return e;n|=e}return n}t.exports=u,u.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},n(c,s),c.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;const n=t.save(),i=h(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},c.prototype._decodeTag=function(t,e,r){const n=h(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let i=l(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');const o=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(t,e){for(;;){const r=h(t,e);if(t.isError(r))return r;const n=l(t,r.primitive,e);if(t.isError(n))return n;let i;if(i=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===r.tagStr)break}},c.prototype._decodeList=function(t,e,r,n){const i=[];while(!t.isEmpty()){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=r.decode(t,"der",n);if(t.isError(o)&&e)break;i.push(o)}return i},c.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2===1)return t.error("Decoding of string type: bmpstr length mismatch");let r="";for(let t=0;t<e.length/2;t++)r+=String.fromCharCode(e.readUInt16BE(2*t));return r}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=function(t,e,r){let n;const i=[];let o=0,s=0;while(!t.isEmpty())s=t.readUInt8(),o<<=7,o|=127&s,0===(128&s)&&(i.push(o),o=0);128&s&&i.push(o);const a=i[0]/40|0,u=i[0]%40;if(n=r?i:[a,u].concat(i.slice(1)),e){let t=e[n.join(" ")];void 0===t&&(t=e[n.join(".")]),void 0!==t&&(n=t)}return n},c.prototype._decodeTime=function(t,e){const r=t.raw().toString();let n,i,o,s,a,u;if("gentime"===e)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),u=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,s,a,u,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},c.prototype._decodeInt=function(t,e){const r=t.raw();let n=new i(r);return e&&(n=e[n.toString(10)]||n),n},c.prototype._use=function(t,e){return"function"===typeof t&&(t=t(e)),t._getDecoder("der").tree}},86410:function(t,e,r){"use strict";const n=e;n.der=r(96496),n.pem=r(96641)},96641:function(t,e,r){"use strict";r(21703);const n=r(81923),i=r(85330).Buffer,o=r(96496);function s(t){o.call(this,t),this.enc="pem"}n(s,o),t.exports=s,s.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,u=-1;for(let i=0;i<r.length;i++){const t=r[i].match(s);if(null!==t&&t[2]===n){if(-1!==a){if("END"!==t[1])break;u=i;break}if("BEGIN"!==t[1])break;a=i}}if(-1===a||-1===u)throw new Error("PEM section not found for: "+n);const c=r.slice(a+1,u).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const h=i.from(c,"base64");return o.prototype.decode.call(this,h,e)}},5408:function(t,e,r){"use strict";const n=r(81923),i=r(85330).Buffer,o=r(92851),s=r(70607);function a(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){o.call(this,"der",t)}function c(t){return t<10?"0"+t:t}function h(t,e,r,n){let i;if("seqof"===t?t="seq":"setof"===t&&(t="set"),s.tagByName.hasOwnProperty(t))i=s.tagByName[t];else{if("number"!==typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t}return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=s.tagClassByName[r||"universal"]<<6,i)}t.exports=a,a.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},n(u,o),u.prototype._encodeComposite=function(t,e,r,n){const o=h(t,e,r,this.reporter);if(n.length<128){const t=i.alloc(2);return t[0]=o,t[1]=n.length,this._createEncoderBuffer([t,n])}let s=1;for(let i=n.length;i>=256;i>>=8)s++;const a=i.alloc(2+s);a[0]=o,a[1]=128|s;for(let i=1+s,u=n.length;u>0;i--,u>>=8)a[i]=255&u;return this._createEncoderBuffer([a,n])},u.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=i.alloc(2*t.length);for(let r=0;r<t.length;r++)e.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},u.prototype._encodeObjid=function(t,e,r){if("string"===typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let i=0;i<t.length;i++){let e=t[i];for(n++;e>=128;e>>=7)n++}const o=i.alloc(n);let s=o.length-1;for(let i=t.length-1;i>=0;i--){let e=t[i];o[s--]=127&e;while((e>>=7)>0)o[s--]=128|127&e}return this._createEncoderBuffer(o)},u.prototype._encodeTime=function(t,e){let r;const n=new Date(t);return"gentime"===e?r=[c(n.getUTCFullYear()),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[c(n.getUTCFullYear()%100),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(t,e){if("string"===typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!==typeof t&&!i.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=i.from(e)}if(i.isBuffer(t)){let e=t.length;0===t.length&&e++;const r=i.alloc(e);return t.copy(r),0===t.length&&(r[0]=0),this._createEncoderBuffer(r)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let i=t;i>=256;i>>=8)r++;const n=new Array(r);for(let i=n.length-1;i>=0;i--)n[i]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(i.from(n))},u.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},u.prototype._use=function(t,e){return"function"===typeof t&&(t=t(e)),t._getEncoder("der").tree},u.prototype._skipDefault=function(t,e,r){const n=this._baseState;let i;if(null===n["default"])return!1;const o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n["default"],e,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0}},19375:function(t,e,r){"use strict";const n=e;n.der=r(5408),n.pem=r(83186)},83186:function(t,e,r){"use strict";const n=r(81923),i=r(5408);function o(t){i.call(this,t),this.enc="pem"}n(o,i),t.exports=o,o.prototype.encode=function(t,e){const r=i.prototype.encode.call(this,t),n=r.toString("base64"),o=["-----BEGIN "+e.label+"-----"];for(let i=0;i<n.length;i+=64)o.push(n.slice(i,i+64));return o.push("-----END "+e.label+"-----"),o.join("\n")}},23352:function(t,e,r){t=r.nmd(t),r(21703),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(80950).Buffer}catch(R){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function c(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8}this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,h=r;h<a;h+=n)u=c(t,h,h+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype.strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;i=0|t.words[p],o=0|e.words[d],s=i*o+l,h+=s/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,r=0!==o||s!==this.length-1?h[6-u.length]+u+r:u+r,i+=2,i>=26&&(i-=26,s--)}0!==o&&(r=o.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],d=f[t];r="";var p=this.clone();p.negative=0;while(!p.isZero()){var y=p.modn(d).toString(t);p=p.idivn(d),r=p.isZero()?y+r:h[c-y.length]+y+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)e=(0|r.words[s])-(0|n.words[s])+o,o=e>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)e=(0|r.words[s])+o,o=e>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,y=d>>>13,g=0|s[2],m=8191&g,b=g>>>13,w=0|s[3],v=8191&w,_=w>>>13,E=0|s[4],S=8191&E,A=E>>>13,I=0|s[5],T=8191&I,R=I>>>13,M=0|s[6],k=8191&M,C=M>>>13,O=0|s[7],P=8191&O,B=O>>>13,x=0|s[8],N=8191&x,D=x>>>13,L=0|s[9],U=8191&L,j=L>>>13,F=0|a[0],K=8191&F,$=F>>>13,q=0|a[1],H=8191&q,z=q>>>13,V=0|a[2],G=8191&V,W=V>>>13,Y=0|a[3],J=8191&Y,Z=Y>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(l,K),i=Math.imul(l,$),i=i+Math.imul(f,K)|0,o=Math.imul(f,$);var gt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,K),i=Math.imul(p,$),i=i+Math.imul(y,K)|0,o=Math.imul(y,$),n=n+Math.imul(l,H)|0,i=i+Math.imul(l,z)|0,i=i+Math.imul(f,H)|0,o=o+Math.imul(f,z)|0;var mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,K),i=Math.imul(m,$),i=i+Math.imul(b,K)|0,o=Math.imul(b,$),n=n+Math.imul(p,H)|0,i=i+Math.imul(p,z)|0,i=i+Math.imul(y,H)|0,o=o+Math.imul(y,z)|0,n=n+Math.imul(l,G)|0,i=i+Math.imul(l,W)|0,i=i+Math.imul(f,G)|0,o=o+Math.imul(f,W)|0;var bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(v,K),i=Math.imul(v,$),i=i+Math.imul(_,K)|0,o=Math.imul(_,$),n=n+Math.imul(m,H)|0,i=i+Math.imul(m,z)|0,i=i+Math.imul(b,H)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(y,G)|0,o=o+Math.imul(y,W)|0,n=n+Math.imul(l,J)|0,i=i+Math.imul(l,Z)|0,i=i+Math.imul(f,J)|0,o=o+Math.imul(f,Z)|0;var wt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(S,K),i=Math.imul(S,$),i=i+Math.imul(A,K)|0,o=Math.imul(A,$),n=n+Math.imul(v,H)|0,i=i+Math.imul(v,z)|0,i=i+Math.imul(_,H)|0,o=o+Math.imul(_,z)|0,n=n+Math.imul(m,G)|0,i=i+Math.imul(m,W)|0,i=i+Math.imul(b,G)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(l,Q)|0,i=i+Math.imul(l,tt)|0,i=i+Math.imul(f,Q)|0,o=o+Math.imul(f,tt)|0;var vt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(T,K),i=Math.imul(T,$),i=i+Math.imul(R,K)|0,o=Math.imul(R,$),n=n+Math.imul(S,H)|0,i=i+Math.imul(S,z)|0,i=i+Math.imul(A,H)|0,o=o+Math.imul(A,z)|0,n=n+Math.imul(v,G)|0,i=i+Math.imul(v,W)|0,i=i+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,Z)|0,i=i+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,tt)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,n=n+Math.imul(l,rt)|0,i=i+Math.imul(l,nt)|0,i=i+Math.imul(f,rt)|0,o=o+Math.imul(f,nt)|0;var _t=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,K),i=Math.imul(k,$),i=i+Math.imul(C,K)|0,o=Math.imul(C,$),n=n+Math.imul(T,H)|0,i=i+Math.imul(T,z)|0,i=i+Math.imul(R,H)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(S,G)|0,i=i+Math.imul(S,W)|0,i=i+Math.imul(A,G)|0,o=o+Math.imul(A,W)|0,n=n+Math.imul(v,J)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(m,Q)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=i+Math.imul(p,nt)|0,i=i+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0,n=n+Math.imul(l,ot)|0,i=i+Math.imul(l,st)|0,i=i+Math.imul(f,ot)|0,o=o+Math.imul(f,st)|0;var Et=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(P,K),i=Math.imul(P,$),i=i+Math.imul(B,K)|0,o=Math.imul(B,$),n=n+Math.imul(k,H)|0,i=i+Math.imul(k,z)|0,i=i+Math.imul(C,H)|0,o=o+Math.imul(C,z)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,W)|0,i=i+Math.imul(R,G)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(S,J)|0,i=i+Math.imul(S,Z)|0,i=i+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(v,tt)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=i+Math.imul(p,st)|0,i=i+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,n=n+Math.imul(l,ut)|0,i=i+Math.imul(l,ct)|0,i=i+Math.imul(f,ut)|0,o=o+Math.imul(f,ct)|0;var St=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,K),i=Math.imul(N,$),i=i+Math.imul(D,K)|0,o=Math.imul(D,$),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,z)|0,i=i+Math.imul(B,H)|0,o=o+Math.imul(B,z)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,W)|0,i=i+Math.imul(C,G)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(T,J)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(S,Q)|0,i=i+Math.imul(S,tt)|0,i=i+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(v,rt)|0,i=i+Math.imul(v,nt)|0,i=i+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=i+Math.imul(m,st)|0,i=i+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ut)|0,i=i+Math.imul(p,ct)|0,i=i+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,n=n+Math.imul(l,lt)|0,i=i+Math.imul(l,ft)|0,i=i+Math.imul(f,lt)|0,o=o+Math.imul(f,ft)|0;var At=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,K),i=Math.imul(U,$),i=i+Math.imul(j,K)|0,o=Math.imul(j,$),n=n+Math.imul(N,H)|0,i=i+Math.imul(N,z)|0,i=i+Math.imul(D,H)|0,o=o+Math.imul(D,z)|0,n=n+Math.imul(P,G)|0,i=i+Math.imul(P,W)|0,i=i+Math.imul(B,G)|0,o=o+Math.imul(B,W)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,Z)|0,i=i+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(T,Q)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,i=i+Math.imul(S,nt)|0,i=i+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(v,ot)|0,i=i+Math.imul(v,st)|0,i=i+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(m,ut)|0,i=i+Math.imul(m,ct)|0,i=i+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,lt)|0,i=i+Math.imul(p,ft)|0,i=i+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0,n=n+Math.imul(l,pt)|0,i=i+Math.imul(l,yt)|0,i=i+Math.imul(f,pt)|0,o=o+Math.imul(f,yt)|0;var It=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,H),i=Math.imul(U,z),i=i+Math.imul(j,H)|0,o=Math.imul(j,z),n=n+Math.imul(N,G)|0,i=i+Math.imul(N,W)|0,i=i+Math.imul(D,G)|0,o=o+Math.imul(D,W)|0,n=n+Math.imul(P,J)|0,i=i+Math.imul(P,Z)|0,i=i+Math.imul(B,J)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(k,Q)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(S,ot)|0,i=i+Math.imul(S,st)|0,i=i+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(v,ut)|0,i=i+Math.imul(v,ct)|0,i=i+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(m,lt)|0,i=i+Math.imul(m,ft)|0,i=i+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0,n=n+Math.imul(p,pt)|0,i=i+Math.imul(p,yt)|0,i=i+Math.imul(y,pt)|0,o=o+Math.imul(y,yt)|0;var Tt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,G),i=Math.imul(U,W),i=i+Math.imul(j,G)|0,o=Math.imul(j,W),n=n+Math.imul(N,J)|0,i=i+Math.imul(N,Z)|0,i=i+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(P,Q)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=i+Math.imul(T,st)|0,i=i+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(S,ut)|0,i=i+Math.imul(S,ct)|0,i=i+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,n=n+Math.imul(v,lt)|0,i=i+Math.imul(v,ft)|0,i=i+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0,n=n+Math.imul(m,pt)|0,i=i+Math.imul(m,yt)|0,i=i+Math.imul(b,pt)|0,o=o+Math.imul(b,yt)|0;var Rt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,J),i=Math.imul(U,Z),i=i+Math.imul(j,J)|0,o=Math.imul(j,Z),n=n+Math.imul(N,Q)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(B,rt)|0,o=o+Math.imul(B,nt)|0,n=n+Math.imul(k,ot)|0,i=i+Math.imul(k,st)|0,i=i+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,n=n+Math.imul(T,ut)|0,i=i+Math.imul(T,ct)|0,i=i+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(S,lt)|0,i=i+Math.imul(S,ft)|0,i=i+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0,n=n+Math.imul(v,pt)|0,i=i+Math.imul(v,yt)|0,i=i+Math.imul(_,pt)|0,o=o+Math.imul(_,yt)|0;var Mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,Q),i=Math.imul(U,tt),i=i+Math.imul(j,Q)|0,o=Math.imul(j,tt),n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(P,ot)|0,i=i+Math.imul(P,st)|0,i=i+Math.imul(B,ot)|0,o=o+Math.imul(B,st)|0,n=n+Math.imul(k,ut)|0,i=i+Math.imul(k,ct)|0,i=i+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(T,lt)|0,i=i+Math.imul(T,ft)|0,i=i+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0,n=n+Math.imul(S,pt)|0,i=i+Math.imul(S,yt)|0,i=i+Math.imul(A,pt)|0,o=o+Math.imul(A,yt)|0;var kt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(N,ot)|0,i=i+Math.imul(N,st)|0,i=i+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,n=n+Math.imul(P,ut)|0,i=i+Math.imul(P,ct)|0,i=i+Math.imul(B,ut)|0,o=o+Math.imul(B,ct)|0,n=n+Math.imul(k,lt)|0,i=i+Math.imul(k,ft)|0,i=i+Math.imul(C,lt)|0,o=o+Math.imul(C,ft)|0,n=n+Math.imul(T,pt)|0,i=i+Math.imul(T,yt)|0,i=i+Math.imul(R,pt)|0,o=o+Math.imul(R,yt)|0;var Ct=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,ot),i=Math.imul(U,st),i=i+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(N,ut)|0,i=i+Math.imul(N,ct)|0,i=i+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,n=n+Math.imul(P,lt)|0,i=i+Math.imul(P,ft)|0,i=i+Math.imul(B,lt)|0,o=o+Math.imul(B,ft)|0,n=n+Math.imul(k,pt)|0,i=i+Math.imul(k,yt)|0,i=i+Math.imul(C,pt)|0,o=o+Math.imul(C,yt)|0;var Ot=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ut),i=Math.imul(U,ct),i=i+Math.imul(j,ut)|0,o=Math.imul(j,ct),n=n+Math.imul(N,lt)|0,i=i+Math.imul(N,ft)|0,i=i+Math.imul(D,lt)|0,o=o+Math.imul(D,ft)|0,n=n+Math.imul(P,pt)|0,i=i+Math.imul(P,yt)|0,i=i+Math.imul(B,pt)|0,o=o+Math.imul(B,yt)|0;var Pt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=Math.imul(U,ft),i=i+Math.imul(j,lt)|0,o=Math.imul(j,ft),n=n+Math.imul(N,pt)|0,i=i+Math.imul(N,yt)|0,i=i+Math.imul(D,pt)|0,o=o+Math.imul(D,yt)|0;var Bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,pt),i=Math.imul(U,yt),i=i+Math.imul(j,pt)|0,o=Math.imul(j,yt);var xt=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,u[0]=gt,u[1]=mt,u[2]=bt,u[3]=wt,u[4]=vt,u[5]=_t,u[6]=Et,u[7]=St,u[8]=At,u[9]=It,u[10]=Tt,u[11]=Rt,u[12]=Mt,u[13]=kt,u[14]=Ct,u[15]=Ot,u[16]=Pt,u[17]=Bt,u[18]=xt,0!==c&&(u[19]=c,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=0|t.words[h],f=0|e.words[c],d=l*f,p=67108863&d;s=s+(d/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,i+=s>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function m(t,e,r){var n=new b;return n.mulp(t,e,r)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=p),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?y(this,t,e):n<63?p(this,t,e):n<1024?g(this,t,e):m(this,t,e),r},b.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},b.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},b.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=r[h+d],y=n[h+d],g=r[h+d+s],m=n[h+d+s],b=l*g-f*m;m=l*m+f*g,g=b,r[h+d]=p+g,n[h+d]=y+m,r[h+d+s]=p-g,n[h+d+s]=y-m,d!==a&&(b=u*l-c*f,f=u*f+c*l,l=b)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},b.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=d(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+a,a=o>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)o=-(0|this.words[i])+a,a=o>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,s=0|i.words[i.length-1],a=this._countBits(s);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,u&&(u.words[c]=1));for(var f=c-1;f>=0;f--){var d=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);d=Math.min(d/s|0,67108863),n._ishlnsubmul(i,d,f);while(0!==n.negative)d--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=d)}return u&&u.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++c;var h=r.clone(),l=e.clone();while(!e.isZero()){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0){e.iushrn(f);while(f-- >0)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1)}for(var p=0,y=1;0===(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,s=new o(1),a=new o(0),u=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0){e.iushrn(c);while(c-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0){r.iushrn(l);while(l-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return i=0===e.cmpn(1)?s:a,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new I(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,v),i(S,v),i(A,v),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return w[t]=e,e},I.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),s=0;while(!i.isZero()&&0===i.andln(1))s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();h=new o(2*h*h).toRed(this);while(0!==this.pow(h,c).cmp(u))h.redIAdd(u);var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;while(0!==d.cmp(a)){for(var y=d,g=0;0!==y.cmp(a);g++)y=y.redSqr();n(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=g}return f},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var s=n[0],a=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=c-1;l>=0;l--){var f=h>>l&1;s!==n[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,u++,(u===r||0===i&&0===l)&&(s=this.mul(s,n[a]),u=0,a=0)):u=0}c=26}return s},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,I),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)},61271:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),e.byteLength=h,e.toByteArray=f,e.fromByteArray=y;for(var n=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function h(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n}function l(t,e,r){return 3*(e+r)/4-r}function f(t){var e,r,n=c(t),s=n[0],a=n[1],u=new o(l(t,s,a)),h=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;return 2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[h++]=255&e),1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e),u}function d(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function p(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(d(n));return i.join("")}function y(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,u=r-i;a<u;a+=s)o.push(p(t,a,a+s>u?u:a+s));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},51742:function(t,e,r){"use strict";r(21703);for(var n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={},o=0;o<n.length;o++){var s=n.charAt(o);if(void 0!==i[s])throw new TypeError(s+" is ambiguous");i[s]=o}function a(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function u(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=a(e)^n>>5}for(e=a(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=a(e)^31&i}return e}function c(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var i=u(t);if("string"===typeof i)throw new Error(i);for(var o=t+"1",s=0;s<e.length;++s){var c=e[s];if(c>>5!==0)throw new Error("Non 5-bit word");i=a(i)^c,o+=n.charAt(c)}for(s=0;s<6;++s)i=a(i);for(i^=1,s=0;s<6;++s){var h=i>>5*(5-s)&31;o+=n.charAt(h)}return o}function h(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var o=t.lastIndexOf("1");if(-1===o)return"No separator character for "+t;if(0===o)return"Missing prefix for "+t;var s=t.slice(0,o),c=t.slice(o+1);if(c.length<6)return"Data too short";var h=u(s);if("string"===typeof h)return h;for(var l=[],f=0;f<c.length;++f){var d=c.charAt(f),p=i[d];if(void 0===p)return"Unknown character "+d;h=a(h)^p,f+6>=c.length||l.push(p)}return 1!==h?"Invalid checksum for "+t:{prefix:s,words:l}}function l(){var t=h.apply(null,arguments);if("object"===typeof t)return t}function f(t){var e=h.apply(null,arguments);if("object"===typeof e)return e;throw new Error(e)}function d(t,e,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],u=0;u<t.length;++u){i=i<<e|t[u],o+=e;while(o>=r)o-=r,a.push(i>>o&s)}if(n)o>0&&a.push(i<<r-o&s);else{if(o>=e)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function p(t){var e=d(t,8,5,!0);if(Array.isArray(e))return e}function y(t){var e=d(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function g(t){var e=d(t,5,8,!1);if(Array.isArray(e))return e}function m(t){var e=d(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}t.exports={decodeUnsafe:l,decode:f,encode:c,toWordsUnsafe:p,toWords:y,fromWordsUnsafe:g,fromWords:m}},27629:function(t,e,r){var n;r(21703),r(48675),r(3462),r(37380),r(1118),function(i){"use strict";var o,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,u=Math.floor,c="[BigNumber Error] ",h=c+"Number primitive has more than 15 significant digits: ",l=1e14,f=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,g=1e9;function m(t){var e,r,n,i=L.prototype={constructor:L,toString:null,valueOf:null},o=new L(1),I=20,T=4,R=-7,M=21,k=-1e7,C=1e7,O=!1,P=1,B=0,x={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},N="0123456789abcdefghijklmnopqrstuvwxyz",D=!0;function L(t,e){var i,o,a,c,l,p,y,g,m=this;if(!(m instanceof L))return new L(t,e);if(null==e){if(t&&!0===t._isBigNumber)return m.s=t.s,void(!t.c||t.e>C?m.c=m.e=null:t.e<k?m.c=[m.e=0]:(m.e=t.e,m.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(m.s=1/t<0?(t=-t,-1):1,t===~~t){for(c=0,l=t;l>=10;l/=10,c++);return void(c>C?m.c=m.e=null:(m.e=c,m.c=[t]))}g=String(t)}else{if(!s.test(g=String(t)))return n(m,g,p);m.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(c=g.indexOf("."))>-1&&(g=g.replace(".","")),(l=g.search(/e/i))>0?(c<0&&(c=l),c+=+g.slice(l+1),g=g.substring(0,l)):c<0&&(c=g.length)}else{if(_(e,2,N.length,"Base"),10==e&&D)return m=new L(t),K(m,I+m.e+1,T);if(g=String(t),p="number"==typeof t){if(0*t!=0)return n(m,g,p,e);if(m.s=1/t<0?(g=g.slice(1),-1):1,L.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(h+t)}else m.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(i=N.slice(0,e),c=l=0,y=g.length;l<y;l++)if(i.indexOf(o=g.charAt(l))<0){if("."==o){if(l>c){c=y;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,l=-1,c=0;continue}return n(m,String(t),p,e)}p=!1,g=r(g,e,10,m.s),(c=g.indexOf("."))>-1?g=g.replace(".",""):c=g.length}for(l=0;48===g.charCodeAt(l);l++);for(y=g.length;48===g.charCodeAt(--y););if(g=g.slice(l,++y)){if(y-=l,p&&L.DEBUG&&y>15&&(t>d||t!==u(t)))throw Error(h+m.s*t);if((c=c-l-1)>C)m.c=m.e=null;else if(c<k)m.c=[m.e=0];else{if(m.e=c,m.c=[],l=(c+1)%f,c<0&&(l+=f),l<y){for(l&&m.c.push(+g.slice(0,l)),y-=f;l<y;)m.c.push(+g.slice(l,l+=f));l=f-(g=g.slice(l)).length}else l-=y;for(;l--;g+="0");m.c.push(+g)}}else m.c=[m.e=0]}function U(t,e,r,n){var i,o,s,a,u;if(null==r?r=T:_(r,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)u=w(t.c),u=1==n||2==n&&(s<=R||s>=M)?S(u,s):A(u,s,"0");else if(t=K(new L(t),e,r),o=t.e,u=w(t.c),a=u.length,1==n||2==n&&(e<=o||o<=R)){for(;a<e;u+="0",a++);u=S(u,o)}else if(e-=s,u=A(u,o,"0"),o+1>a){if(--e>0)for(u+=".";e--;u+="0");}else if(e+=o-a,e>0)for(o+1==a&&(u+=".");e--;u+="0");return t.s<0&&i?"-"+u:u}function j(t,e){for(var r,n=1,i=new L(t[0]);n<t.length;n++){if(r=new L(t[n]),!r.s){i=r;break}e.call(i,r)&&(i=r)}return i}function F(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*f-1)>C?t.c=t.e=null:r<k?t.c=[t.e=0]:(t.e=r,t.c=e),t}function K(t,e,r,n){var i,o,s,c,h,d,y,g=t.c,m=p;if(g){t:{for(i=1,c=g[0];c>=10;c/=10,i++);if(o=e-i,o<0)o+=f,s=e,h=g[d=0],y=h/m[i-s-1]%10|0;else if(d=a((o+1)/f),d>=g.length){if(!n)break t;for(;g.length<=d;g.push(0));h=y=0,i=1,o%=f,s=o-f+1}else{for(h=c=g[d],i=1;c>=10;c/=10,i++);o%=f,s=o-f+i,y=s<0?0:h/m[i-s-1]%10|0}if(n=n||e<0||null!=g[d+1]||(s<0?h:h%m[i-s-1]),n=r<4?(y||n)&&(0==r||r==(t.s<0?3:2)):y>5||5==y&&(4==r||n||6==r&&(o>0?s>0?h/m[i-s]:0:g[d-1])%10&1||r==(t.s<0?8:7)),e<1||!g[0])return g.length=0,n?(e-=t.e+1,g[0]=m[(f-e%f)%f],t.e=-e||0):g[0]=t.e=0,t;if(0==o?(g.length=d,c=1,d--):(g.length=d+1,c=m[f-o],g[d]=s>0?u(h/m[i-s]%m[s])*c:0),n)for(;;){if(0==d){for(o=1,s=g[0];s>=10;s/=10,o++);for(s=g[0]+=c,c=1;s>=10;s/=10,c++);o!=c&&(t.e++,g[0]==l&&(g[0]=1));break}if(g[d]+=c,g[d]!=l)break;g[d--]=0,c=1}for(o=g.length;0===g[--o];g.pop());}t.e>C?t.c=t.e=null:t.e<k&&(t.c=[t.e=0])}return t}function $(t){var e,r=t.e;return null===r?t.toString():(e=w(t.c),e=r<=R||r>=M?S(e,r):A(e,r,"0"),t.s<0?"-"+e:e)}return L.clone=m,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(r=t[e],_(r,0,g,e),I=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(r=t[e],_(r,0,8,e),T=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&(r=t[e],r&&r.pop?(_(r[0],-g,0,e),_(r[1],0,g,e),R=r[0],M=r[1]):(_(r,-g,g,e),R=-(M=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if(r=t[e],r&&r.pop)_(r[0],-g,-1,e),_(r[1],1,g,e),k=r[0],C=r[1];else{if(_(r,-g,g,e),!r)throw Error(c+e+" cannot be zero: "+r);k=-(C=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if(r=t[e],r!==!!r)throw Error(c+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw O=!r,Error(c+"crypto unavailable");O=r}else O=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(r=t[e],_(r,0,9,e),P=r),t.hasOwnProperty(e="POW_PRECISION")&&(r=t[e],_(r,0,g,e),B=r),t.hasOwnProperty(e="FORMAT")){if(r=t[e],"object"!=typeof r)throw Error(c+e+" not an object: "+r);x=r}if(t.hasOwnProperty(e="ALPHABET")){if(r=t[e],"string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(c+e+" invalid: "+r);D="0123456789"==r.slice(0,10),N=r}}return{DECIMAL_PLACES:I,ROUNDING_MODE:T,EXPONENTIAL_AT:[R,M],RANGE:[k,C],CRYPTO:O,MODULO_MODE:P,POW_PRECISION:B,FORMAT:x,ALPHABET:N}},L.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!L.DEBUG)return!0;var e,r,n=t.c,i=t.e,o=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-g&&i<=g&&i===u(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break t}if(e=(i+1)%f,e<1&&(e+=f),String(n[0]).length==e){for(e=0;e<n.length;e++)if(r=n[e],r<0||r>=l||r!==u(r))break t;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(c+"Invalid BigNumber: "+t)},L.maximum=L.max=function(){return j(arguments,i.lt)},L.minimum=L.min=function(){return j(arguments,i.gt)},L.random=function(){var t=9007199254740992,e=Math.random()*t&2097151?function(){return u(Math.random()*t)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(t){var r,n,i,s,h,l=0,d=[],y=new L(o);if(null==t?t=I:_(t,0,g),s=a(t/f),O)if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(s*=2));l<s;)h=131072*r[l]+(r[l+1]>>>11),h>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),r[l]=n[0],r[l+1]=n[1]):(d.push(h%1e14),l+=2);l=s/2}else{if(!crypto.randomBytes)throw O=!1,Error(c+"crypto unavailable");for(r=crypto.randomBytes(s*=7);l<s;)h=281474976710656*(31&r[l])+1099511627776*r[l+1]+4294967296*r[l+2]+16777216*r[l+3]+(r[l+4]<<16)+(r[l+5]<<8)+r[l+6],h>=9e15?crypto.randomBytes(7).copy(r,l):(d.push(h%1e14),l+=7);l=s/7}if(!O)for(;l<s;)h=e(),h<9e15&&(d[l++]=h%1e14);for(s=d[--l],t%=f,s&&t&&(h=p[f-t],d[l]=u(s/h)*h);0===d[l];d.pop(),l--);if(l<0)d=[i=0];else{for(i=-1;0===d[0];d.splice(0,1),i-=f);for(l=1,h=d[0];h>=10;h/=10,l++);l<f&&(i-=f-l)}return y.e=i,y.c=d,y}}(),L.sum=function(){for(var t=1,e=arguments,r=new L(e[0]);t<e.length;)r=r.plus(e[t++]);return r},r=function(){var t="0123456789";function r(t,e,r,n){for(var i,o,s=[0],a=0,u=t.length;a<u;){for(o=s.length;o--;s[o]*=e);for(s[0]+=n.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,a){var u,c,h,l,f,d,p,y,g=n.indexOf("."),m=I,b=T;for(g>=0&&(l=B,B=0,n=n.replace(".",""),y=new L(i),d=y.pow(n.length-g),B=l,y.c=r(A(w(d.c),d.e,"0"),10,o,t),y.e=y.c.length),p=r(n,i,o,a?(u=N,t):(u=t,N)),h=l=p.length;0==p[--l];p.pop());if(!p[0])return u.charAt(0);if(g<0?--h:(d.c=p,d.e=h,d.s=s,d=e(d,y,m,b,o),p=d.c,f=d.r,h=d.e),c=h+m+1,g=p[c],l=o/2,f=f||c<0||null!=p[c+1],f=b<4?(null!=g||f)&&(0==b||b==(d.s<0?3:2)):g>l||g==l&&(4==b||f||6==b&&1&p[c-1]||b==(d.s<0?8:7)),c<1||!p[0])n=f?A(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(p.length=c,f)for(--o;++p[--c]>o;)p[c]=0,c||(++h,p=[1].concat(p));for(l=p.length;!p[--l];);for(g=0,n="";g<=l;n+=u.charAt(p[g++]));n=A(n,h,u.charAt(0))}return n}}(),e=function(){function t(t,e,r){var n,i,o,s,a=0,u=t.length,c=e%y,h=e/y|0;for(t=t.slice();u--;)o=t[u]%y,s=t[u]/y|0,n=h*o+s*c,i=c*o+n%y*y+a,a=(i/r|0)+(n/y|0)+h*s,t[u]=i%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,i,o,s,a){var c,h,d,p,y,g,m,w,v,_,E,S,A,I,T,R,M,k=n.s==i.s?1:-1,C=n.c,O=i.c;if(!C||!C[0]||!O||!O[0])return new L(n.s&&i.s&&(C?!O||C[0]!=O[0]:O)?C&&0==C[0]||!O?0*k:k/0:NaN);for(w=new L(k),v=w.c=[],h=n.e-i.e,k=o+h+1,a||(a=l,h=b(n.e/f)-b(i.e/f),k=k/f|0),d=0;O[d]==(C[d]||0);d++);if(O[d]>(C[d]||0)&&h--,k<0)v.push(1),p=!0;else{for(I=C.length,R=O.length,d=0,k+=2,y=u(a/(O[0]+1)),y>1&&(O=t(O,y,a),C=t(C,y,a),R=O.length,I=C.length),A=R,_=C.slice(0,R),E=_.length;E<R;_[E++]=0);M=O.slice(),M=[0].concat(M),T=O[0],O[1]>=a/2&&T++;do{if(y=0,c=e(O,_,R,E),c<0){if(S=_[0],R!=E&&(S=S*a+(_[1]||0)),y=u(S/T),y>1){y>=a&&(y=a-1),g=t(O,y,a),m=g.length,E=_.length;while(1==e(g,_,m,E))y--,r(g,R<m?M:O,m,a),m=g.length,c=1}else 0==y&&(c=y=1),g=O.slice(),m=g.length;if(m<E&&(g=[0].concat(g)),r(_,g,E,a),E=_.length,-1==c)while(e(O,_,R,E)<1)y++,r(_,R<E?M:O,E,a),E=_.length}else 0===c&&(y++,_=[0]);v[d++]=y,_[0]?_[E++]=C[A]||0:(_=[C[A]],E=1)}while((A++<I||null!=_[0])&&k--);p=null!=_[0],v[0]||v.splice(0,1)}if(a==l){for(d=1,k=v[0];k>=10;k/=10,d++);K(w,o+(w.e=d+h*f-1)+1,s,p)}else w.e=h,w.r=+p;return w}}(),n=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,s,a,u){var h,l=a?s:s.replace(i,"");if(n.test(l))o.s=isNaN(l)?null:l<0?-1:1;else{if(!a&&(l=l.replace(t,(function(t,e,r){return h="x"==(r=r.toLowerCase())?16:"b"==r?2:8,u&&u!=h?t:e})),u&&(h=u,l=l.replace(e,"$1").replace(r,"0.$1")),s!=l))return new L(l,h);if(L.DEBUG)throw Error(c+"Not a"+(u?" base "+u:"")+" number: "+s);o.s=null}o.c=o.e=null}}(),i.absoluteValue=i.abs=function(){var t=new L(this);return t.s<0&&(t.s=1),t},i.comparedTo=function(t,e){return v(this,new L(t,e))},i.decimalPlaces=i.dp=function(t,e){var r,n,i,o=this;if(null!=t)return _(t,0,g),null==e?e=T:_(e,0,8),K(new L(o),t+o.e+1,e);if(!(r=o.c))return null;if(n=((i=r.length-1)-b(this.e/f))*f,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},i.dividedBy=i.div=function(t,r){return e(this,new L(t,r),I,T)},i.dividedToIntegerBy=i.idiv=function(t,r){return e(this,new L(t,r),0,1)},i.exponentiatedBy=i.pow=function(t,e){var r,n,i,s,h,l,d,p,y,g=this;if(t=new L(t),t.c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+$(t));if(null!=e&&(e=new L(e)),l=t.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!t.c||!t.c[0])return y=new L(Math.pow(+$(g),l?2-E(t):+$(t))),e?y.mod(e):y;if(d=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new L(NaN);n=!d&&g.isInteger()&&e.isInteger(),n&&(g=g.mod(e))}else{if(t.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||l&&g.c[1]>=24e7:g.c[0]<8e13||l&&g.c[0]<=9999975e7)))return s=g.s<0&&E(t)?-0:0,g.e>-1&&(s=1/s),new L(d?1/s:s);B&&(s=a(B/f+2))}for(l?(r=new L(.5),d&&(t.s=1),p=E(t)):(i=Math.abs(+$(t)),p=i%2),y=new L(o);;){if(p){if(y=y.times(g),!y.c)break;s?y.c.length>s&&(y.c.length=s):n&&(y=y.mod(e))}if(i){if(i=u(i/2),0===i)break;p=i%2}else if(t=t.times(r),K(t,t.e+1,1),t.e>14)p=E(t);else{if(i=+$(t),0===i)break;p=i%2}g=g.times(g),s?g.c&&g.c.length>s&&(g.c.length=s):n&&(g=g.mod(e))}return n?y:(d&&(y=o.div(y)),e?y.mod(e):s?K(y,B,T,h):y)},i.integerValue=function(t){var e=new L(this);return null==t?t=T:_(t,0,8),K(e,e.e+1,t)},i.isEqualTo=i.eq=function(t,e){return 0===v(this,new L(t,e))},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(t,e){return v(this,new L(t,e))>0},i.isGreaterThanOrEqualTo=i.gte=function(t,e){return 1===(e=v(this,new L(t,e)))||0===e},i.isInteger=function(){return!!this.c&&b(this.e/f)>this.c.length-2},i.isLessThan=i.lt=function(t,e){return v(this,new L(t,e))<0},i.isLessThanOrEqualTo=i.lte=function(t,e){return-1===(e=v(this,new L(t,e)))||0===e},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&0==this.c[0]},i.minus=function(t,e){var r,n,i,o,s=this,a=s.s;if(t=new L(t,e),e=t.s,!a||!e)return new L(NaN);if(a!=e)return t.s=-e,s.plus(t);var u=s.e/f,c=t.e/f,h=s.c,d=t.c;if(!u||!c){if(!h||!d)return h?(t.s=-e,t):new L(d?s:NaN);if(!h[0]||!d[0])return d[0]?(t.s=-e,t):new L(h[0]?s:3==T?-0:0)}if(u=b(u),c=b(c),h=h.slice(),a=u-c){for((o=a<0)?(a=-a,i=h):(c=u,i=d),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(n=(o=(a=h.length)<(e=d.length))?a:e,a=e=0;e<n;e++)if(h[e]!=d[e]){o=h[e]<d[e];break}if(o&&(i=h,h=d,d=i,t.s=-t.s),e=(n=d.length)-(r=h.length),e>0)for(;e--;h[r++]=0);for(e=l-1;n>a;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=e);--h[r],h[n]+=l}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--c);return h[0]?F(t,h,c):(t.s=3==T?-1:1,t.c=[t.e=0],t)},i.modulo=i.mod=function(t,r){var n,i,o=this;return t=new L(t,r),!o.c||!t.s||t.c&&!t.c[0]?new L(NaN):!t.c||o.c&&!o.c[0]?new L(o):(9==P?(i=t.s,t.s=1,n=e(o,t,0,3),t.s=i,n.s*=i):n=e(o,t,0,P),t=o.minus(n.times(t)),t.c[0]||1!=P||(t.s=o.s),t)},i.multipliedBy=i.times=function(t,e){var r,n,i,o,s,a,u,c,h,d,p,g,m,w,v,_=this,E=_.c,S=(t=new L(t,e)).c;if(!E||!S||!E[0]||!S[0])return!_.s||!t.s||E&&!E[0]&&!S||S&&!S[0]&&!E?t.c=t.e=t.s=null:(t.s*=_.s,E&&S?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=b(_.e/f)+b(t.e/f),t.s*=_.s,u=E.length,d=S.length,u<d&&(m=E,E=S,S=m,i=u,u=d,d=i),i=u+d,m=[];i--;m.push(0));for(w=l,v=y,i=d;--i>=0;){for(r=0,p=S[i]%v,g=S[i]/v|0,s=u,o=i+s;o>i;)c=E[--s]%v,h=E[s]/v|0,a=g*c+h*p,c=p*c+a%v*v+m[o]+r,r=(c/w|0)+(a/v|0)+g*h,m[o--]=c%w;m[o]=r}return r?++n:m.splice(0,1),F(t,m,n)},i.negated=function(){var t=new L(this);return t.s=-t.s||null,t},i.plus=function(t,e){var r,n=this,i=n.s;if(t=new L(t,e),e=t.s,!i||!e)return new L(NaN);if(i!=e)return t.s=-e,n.minus(t);var o=n.e/f,s=t.e/f,a=n.c,u=t.c;if(!o||!s){if(!a||!u)return new L(i/0);if(!a[0]||!u[0])return u[0]?t:new L(a[0]?n:0*i)}if(o=b(o),s=b(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=u):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for(i=a.length,e=u.length,i-e<0&&(r=u,u=a,a=r,e=i),i=0;e;)i=(a[--e]=a[e]+u[e]+i)/l|0,a[e]=l===a[e]?0:a[e]%l;return i&&(a=[i].concat(a),++s),F(t,a,s)},i.precision=i.sd=function(t,e){var r,n,i,o=this;if(null!=t&&t!==!!t)return _(t,1,g),null==e?e=T:_(e,0,8),K(new L(o),t,e);if(!(r=o.c))return null;if(i=r.length-1,n=i*f+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return t&&o.e+1>n&&(n=o.e+1),n},i.shiftedBy=function(t){return _(t,-d,d),this.times("1e"+t)},i.squareRoot=i.sqrt=function(){var t,r,n,i,o,s=this,a=s.c,u=s.s,c=s.e,h=I+4,l=new L("0.5");if(1!==u||!a||!a[0])return new L(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(u=Math.sqrt(+$(s)),0==u||u==1/0?(r=w(a),(r.length+c)%2==0&&(r+="0"),u=Math.sqrt(+r),c=b((c+1)/2)-(c<0||c%2),u==1/0?r="5e"+c:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+c),n=new L(r)):n=new L(u+""),n.c[0])for(c=n.e,u=c+h,u<3&&(u=0);;)if(o=n,n=l.times(o.plus(e(s,o,h,1))),w(o.c).slice(0,u)===(r=w(n.c)).slice(0,u)){if(n.e<c&&--u,r=r.slice(u-3,u+1),"9999"!=r&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(K(n,n.e+I+2,1),t=!n.times(n).eq(s));break}if(!i&&(K(o,o.e+I+2,0),o.times(o).eq(s))){n=o;break}h+=4,u+=4,i=1}return K(n,n.e+I+1,T,t)},i.toExponential=function(t,e){return null!=t&&(_(t,0,g),t++),U(this,t,e,1)},i.toFixed=function(t,e){return null!=t&&(_(t,0,g),t=t+this.e+1),U(this,t,e)},i.toFormat=function(t,e,r){var n,i=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=x;else if("object"!=typeof r)throw Error(c+"Argument not an object: "+r);if(n=i.toFixed(t,e),i.c){var o,s=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,h=r.groupSeparator||"",l=s[0],f=s[1],d=i.s<0,p=d?l.slice(1):l,y=p.length;if(u&&(o=a,a=u,u=o,y-=o),a>0&&y>0){for(o=y%a||a,l=p.substr(0,o);o<y;o+=a)l+=h+p.substr(o,a);u>0&&(l+=h+p.slice(o)),d&&(l="-"+l)}n=f?l+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):l}return(r.prefix||"")+n+(r.suffix||"")},i.toFraction=function(t){var r,n,i,s,a,u,h,l,d,y,g,m,b=this,v=b.c;if(null!=t&&(h=new L(t),!h.isInteger()&&(h.c||1!==h.s)||h.lt(o)))throw Error(c+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+$(h));if(!v)return new L(b);for(r=new L(o),d=n=new L(o),i=l=new L(o),m=w(v),a=r.e=m.length-b.e-1,r.c[0]=p[(u=a%f)<0?f+u:u],t=!t||h.comparedTo(r)>0?a>0?r:d:h,u=C,C=1/0,h=new L(m),l.c[0]=0;;){if(y=e(h,r,0,1),s=n.plus(y.times(i)),1==s.comparedTo(t))break;n=i,i=s,d=l.plus(y.times(s=d)),l=s,r=h.minus(y.times(s=r)),h=s}return s=e(t.minus(n),i,0,1),l=l.plus(s.times(d)),n=n.plus(s.times(i)),l.s=d.s=b.s,a*=2,g=e(d,i,a,T).minus(b).abs().comparedTo(e(l,n,a,T).minus(b).abs())<1?[d,i]:[l,n],C=u,g},i.toNumber=function(){return+$(this)},i.toPrecision=function(t,e){return null!=t&&_(t,1,g),U(this,t,e,2)},i.toString=function(t){var e,n=this,i=n.s,o=n.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(null==t?e=o<=R||o>=M?S(w(n.c),o):A(w(n.c),o,"0"):10===t&&D?(n=K(new L(n),I+o+1,T),e=A(w(n.c),n.e,"0")):(_(t,2,N.length,"Base"),e=r(A(w(n.c),o,"0"),10,t,i,!0)),i<0&&n.c[0]&&(e="-"+e)),e},i.valueOf=i.toJSON=function(){return $(this)},i._isBigNumber=!0,null!=t&&L.set(t),L}function b(t){var e=0|t;return t>0||t===e?e:e-1}function w(t){for(var e,r,n=1,i=t.length,o=t[0]+"";n<i;){for(e=t[n++]+"",r=f-e.length;r--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function v(t,e){var r,n,i=t.c,o=e.c,s=t.s,a=e.s,u=t.e,c=e.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=i.length)<(c=o.length)?u:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function _(t,e,r,n){if(t<e||t>r||t!==u(t))throw Error(c+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function E(t){var e=t.c.length-1;return b(t.e/f)==e&&t.c[e]%2!=0}function S(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function A(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}o=m(),o["default"]=o.BigNumber=o,n=function(){return o}.call(e,r,e,t),void 0===n||(t.exports=n)}()},2396:function(t,e,r){t=r.nmd(t),r(21703),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(46601).Buffer}catch(C){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function u(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function c(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&s<i,"Invalid character"),o+=s}return o}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8}this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,h=r;h<a;h+=n)u=c(t,h,h+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){h(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(C){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,i+=2,i>=26&&(i-=26,s--),r=0!==o||s!==this.length-1?f[6-u.length]+u+r:u+r}0!==o&&(r=o.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=d[t],h=p[t];r="";var l=this.clone();l.negative=0;while(!l.isZero()){var y=l.modrn(h).toString(t);l=l.idivn(h),r=l.isZero()?y+r:f[c-y.length]+y+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(s,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var y=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function g(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;i=0|t.words[p],o=0|e.words[d],s=i*o+l,h+=s/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=y(t,o),a="le"===e?"LE":"BE";return this["_toArrayLike"+a](s,i),s},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length){t[r++]=n;while(r<t.length)t[r++]=0}},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0){t[r--]=n;while(r>=0)t[r--]=0}},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)e=(0|r.words[s])-(0|n.words[s])+o,o=e>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)e=(0|r.words[s])+o,o=e>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var b=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,y=d>>>13,g=0|s[2],m=8191&g,b=g>>>13,w=0|s[3],v=8191&w,_=w>>>13,E=0|s[4],S=8191&E,A=E>>>13,I=0|s[5],T=8191&I,R=I>>>13,M=0|s[6],k=8191&M,C=M>>>13,O=0|s[7],P=8191&O,B=O>>>13,x=0|s[8],N=8191&x,D=x>>>13,L=0|s[9],U=8191&L,j=L>>>13,F=0|a[0],K=8191&F,$=F>>>13,q=0|a[1],H=8191&q,z=q>>>13,V=0|a[2],G=8191&V,W=V>>>13,Y=0|a[3],J=8191&Y,Z=Y>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(l,K),i=Math.imul(l,$),i=i+Math.imul(f,K)|0,o=Math.imul(f,$);var gt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,K),i=Math.imul(p,$),i=i+Math.imul(y,K)|0,o=Math.imul(y,$),n=n+Math.imul(l,H)|0,i=i+Math.imul(l,z)|0,i=i+Math.imul(f,H)|0,o=o+Math.imul(f,z)|0;var mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,K),i=Math.imul(m,$),i=i+Math.imul(b,K)|0,o=Math.imul(b,$),n=n+Math.imul(p,H)|0,i=i+Math.imul(p,z)|0,i=i+Math.imul(y,H)|0,o=o+Math.imul(y,z)|0,n=n+Math.imul(l,G)|0,i=i+Math.imul(l,W)|0,i=i+Math.imul(f,G)|0,o=o+Math.imul(f,W)|0;var bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(v,K),i=Math.imul(v,$),i=i+Math.imul(_,K)|0,o=Math.imul(_,$),n=n+Math.imul(m,H)|0,i=i+Math.imul(m,z)|0,i=i+Math.imul(b,H)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(y,G)|0,o=o+Math.imul(y,W)|0,n=n+Math.imul(l,J)|0,i=i+Math.imul(l,Z)|0,i=i+Math.imul(f,J)|0,o=o+Math.imul(f,Z)|0;var wt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(S,K),i=Math.imul(S,$),i=i+Math.imul(A,K)|0,o=Math.imul(A,$),n=n+Math.imul(v,H)|0,i=i+Math.imul(v,z)|0,i=i+Math.imul(_,H)|0,o=o+Math.imul(_,z)|0,n=n+Math.imul(m,G)|0,i=i+Math.imul(m,W)|0,i=i+Math.imul(b,G)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(l,Q)|0,i=i+Math.imul(l,tt)|0,i=i+Math.imul(f,Q)|0,o=o+Math.imul(f,tt)|0;var vt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(T,K),i=Math.imul(T,$),i=i+Math.imul(R,K)|0,o=Math.imul(R,$),n=n+Math.imul(S,H)|0,i=i+Math.imul(S,z)|0,i=i+Math.imul(A,H)|0,o=o+Math.imul(A,z)|0,n=n+Math.imul(v,G)|0,i=i+Math.imul(v,W)|0,i=i+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,Z)|0,i=i+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,tt)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,n=n+Math.imul(l,rt)|0,i=i+Math.imul(l,nt)|0,i=i+Math.imul(f,rt)|0,o=o+Math.imul(f,nt)|0;var _t=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,K),i=Math.imul(k,$),i=i+Math.imul(C,K)|0,o=Math.imul(C,$),n=n+Math.imul(T,H)|0,i=i+Math.imul(T,z)|0,i=i+Math.imul(R,H)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(S,G)|0,i=i+Math.imul(S,W)|0,i=i+Math.imul(A,G)|0,o=o+Math.imul(A,W)|0,n=n+Math.imul(v,J)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(m,Q)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=i+Math.imul(p,nt)|0,i=i+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0,n=n+Math.imul(l,ot)|0,i=i+Math.imul(l,st)|0,i=i+Math.imul(f,ot)|0,o=o+Math.imul(f,st)|0;var Et=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(P,K),i=Math.imul(P,$),i=i+Math.imul(B,K)|0,o=Math.imul(B,$),n=n+Math.imul(k,H)|0,i=i+Math.imul(k,z)|0,i=i+Math.imul(C,H)|0,o=o+Math.imul(C,z)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,W)|0,i=i+Math.imul(R,G)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(S,J)|0,i=i+Math.imul(S,Z)|0,i=i+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(v,tt)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=i+Math.imul(p,st)|0,i=i+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,n=n+Math.imul(l,ut)|0,i=i+Math.imul(l,ct)|0,i=i+Math.imul(f,ut)|0,o=o+Math.imul(f,ct)|0;var St=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,K),i=Math.imul(N,$),i=i+Math.imul(D,K)|0,o=Math.imul(D,$),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,z)|0,i=i+Math.imul(B,H)|0,o=o+Math.imul(B,z)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,W)|0,i=i+Math.imul(C,G)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(T,J)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(S,Q)|0,i=i+Math.imul(S,tt)|0,i=i+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(v,rt)|0,i=i+Math.imul(v,nt)|0,i=i+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=i+Math.imul(m,st)|0,i=i+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ut)|0,i=i+Math.imul(p,ct)|0,i=i+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,n=n+Math.imul(l,lt)|0,i=i+Math.imul(l,ft)|0,i=i+Math.imul(f,lt)|0,o=o+Math.imul(f,ft)|0;var At=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,K),i=Math.imul(U,$),i=i+Math.imul(j,K)|0,o=Math.imul(j,$),n=n+Math.imul(N,H)|0,i=i+Math.imul(N,z)|0,i=i+Math.imul(D,H)|0,o=o+Math.imul(D,z)|0,n=n+Math.imul(P,G)|0,i=i+Math.imul(P,W)|0,i=i+Math.imul(B,G)|0,o=o+Math.imul(B,W)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,Z)|0,i=i+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(T,Q)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,i=i+Math.imul(S,nt)|0,i=i+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(v,ot)|0,i=i+Math.imul(v,st)|0,i=i+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(m,ut)|0,i=i+Math.imul(m,ct)|0,i=i+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,lt)|0,i=i+Math.imul(p,ft)|0,i=i+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0,n=n+Math.imul(l,pt)|0,i=i+Math.imul(l,yt)|0,i=i+Math.imul(f,pt)|0,o=o+Math.imul(f,yt)|0;var It=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,H),i=Math.imul(U,z),i=i+Math.imul(j,H)|0,o=Math.imul(j,z),n=n+Math.imul(N,G)|0,i=i+Math.imul(N,W)|0,i=i+Math.imul(D,G)|0,o=o+Math.imul(D,W)|0,n=n+Math.imul(P,J)|0,i=i+Math.imul(P,Z)|0,i=i+Math.imul(B,J)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(k,Q)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(S,ot)|0,i=i+Math.imul(S,st)|0,i=i+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(v,ut)|0,i=i+Math.imul(v,ct)|0,i=i+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(m,lt)|0,i=i+Math.imul(m,ft)|0,i=i+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0,n=n+Math.imul(p,pt)|0,i=i+Math.imul(p,yt)|0,i=i+Math.imul(y,pt)|0,o=o+Math.imul(y,yt)|0;var Tt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,G),i=Math.imul(U,W),i=i+Math.imul(j,G)|0,o=Math.imul(j,W),n=n+Math.imul(N,J)|0,i=i+Math.imul(N,Z)|0,i=i+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(P,Q)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=i+Math.imul(T,st)|0,i=i+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(S,ut)|0,i=i+Math.imul(S,ct)|0,i=i+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,n=n+Math.imul(v,lt)|0,i=i+Math.imul(v,ft)|0,i=i+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0,n=n+Math.imul(m,pt)|0,i=i+Math.imul(m,yt)|0,i=i+Math.imul(b,pt)|0,o=o+Math.imul(b,yt)|0;var Rt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,J),i=Math.imul(U,Z),i=i+Math.imul(j,J)|0,o=Math.imul(j,Z),n=n+Math.imul(N,Q)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(B,rt)|0,o=o+Math.imul(B,nt)|0,n=n+Math.imul(k,ot)|0,i=i+Math.imul(k,st)|0,i=i+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,n=n+Math.imul(T,ut)|0,i=i+Math.imul(T,ct)|0,i=i+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(S,lt)|0,i=i+Math.imul(S,ft)|0,i=i+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0,n=n+Math.imul(v,pt)|0,i=i+Math.imul(v,yt)|0,i=i+Math.imul(_,pt)|0,o=o+Math.imul(_,yt)|0;var Mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,Q),i=Math.imul(U,tt),i=i+Math.imul(j,Q)|0,o=Math.imul(j,tt),n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(P,ot)|0,i=i+Math.imul(P,st)|0,i=i+Math.imul(B,ot)|0,o=o+Math.imul(B,st)|0,n=n+Math.imul(k,ut)|0,i=i+Math.imul(k,ct)|0,i=i+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(T,lt)|0,i=i+Math.imul(T,ft)|0,i=i+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0,n=n+Math.imul(S,pt)|0,i=i+Math.imul(S,yt)|0,i=i+Math.imul(A,pt)|0,o=o+Math.imul(A,yt)|0;var kt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(N,ot)|0,i=i+Math.imul(N,st)|0,i=i+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,n=n+Math.imul(P,ut)|0,i=i+Math.imul(P,ct)|0,i=i+Math.imul(B,ut)|0,o=o+Math.imul(B,ct)|0,n=n+Math.imul(k,lt)|0,i=i+Math.imul(k,ft)|0,i=i+Math.imul(C,lt)|0,o=o+Math.imul(C,ft)|0,n=n+Math.imul(T,pt)|0,i=i+Math.imul(T,yt)|0,i=i+Math.imul(R,pt)|0,o=o+Math.imul(R,yt)|0;var Ct=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,ot),i=Math.imul(U,st),i=i+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(N,ut)|0,i=i+Math.imul(N,ct)|0,i=i+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,n=n+Math.imul(P,lt)|0,i=i+Math.imul(P,ft)|0,i=i+Math.imul(B,lt)|0,o=o+Math.imul(B,ft)|0,n=n+Math.imul(k,pt)|0,i=i+Math.imul(k,yt)|0,i=i+Math.imul(C,pt)|0,o=o+Math.imul(C,yt)|0;var Ot=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ut),i=Math.imul(U,ct),i=i+Math.imul(j,ut)|0,o=Math.imul(j,ct),n=n+Math.imul(N,lt)|0,i=i+Math.imul(N,ft)|0,i=i+Math.imul(D,lt)|0,o=o+Math.imul(D,ft)|0,n=n+Math.imul(P,pt)|0,i=i+Math.imul(P,yt)|0,i=i+Math.imul(B,pt)|0,o=o+Math.imul(B,yt)|0;var Pt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=Math.imul(U,ft),i=i+Math.imul(j,lt)|0,o=Math.imul(j,ft),n=n+Math.imul(N,pt)|0,i=i+Math.imul(N,yt)|0,i=i+Math.imul(D,pt)|0,o=o+Math.imul(D,yt)|0;var Bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,pt),i=Math.imul(U,yt),i=i+Math.imul(j,pt)|0,o=Math.imul(j,yt);var xt=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,u[0]=gt,u[1]=mt,u[2]=bt,u[3]=wt,u[4]=vt,u[5]=_t,u[6]=Et,u[7]=St,u[8]=At,u[9]=It,u[10]=Tt,u[11]=Rt,u[12]=Mt,u[13]=kt,u[14]=Ct,u[15]=Ot,u[16]=Pt,u[17]=Bt,u[18]=xt,0!==c&&(u[19]=c,r.length++),r};function w(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=0|t.words[h],f=0|e.words[c],d=l*f,p=67108863&d;s=s+(d/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,i+=s>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(t,e,r){return w(t,e,r)}function _(t,e){this.x=t,this.y=e}Math.imul||(b=m),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?b(this,t,e):n<63?m(this,t,e):n<1024?w(this,t,e):v(this,t,e),r},_.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},_.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},_.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},_.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=r[h+d],y=n[h+d],g=r[h+d+s],m=n[h+d+s],b=l*g-f*m;m=l*m+f*g,g=b,r[h+d]=p+g,n[h+d]=y+m,r[h+d+s]=p-g,n[h+d+s]=y-m,d!==a&&(b=u*l-c*f,f=u*f+c*l,l=b)}},_.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},_.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},_.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},_.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},_.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),v(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"===typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=g(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+a,a=o>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)o=-(0|this.words[i])+a,a=o>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,s=0|i.words[i.length-1],a=this._countBits(s);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,u&&(u.words[c]=1));for(var f=c-1;f>=0;f--){var d=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);d=Math.min(d/s|0,67108863),n._ishlnsubmul(i,d,f);while(0!==n.negative)d--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=d)}return u&&u._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++c;var h=r.clone(),l=e.clone();while(!e.isZero()){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0){e.iushrn(f);while(f-- >0)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1)}for(var p=0,y=1;0===(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,s=new o(1),a=new o(0),u=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0){e.iushrn(c);while(c-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0){r.iushrn(l);while(l-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return i=0===e.cmpn(1)?s:a,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var E={k256:null,p224:null,p192:null,p25519:null};function S(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function I(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function R(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},S.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},S.prototype.split=function(t,e){t.iushrn(this.n,0,e)},S.prototype.imulK=function(t){return t.imul(this.k)},i(A,S),A.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},A.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(I,S),i(T,S),i(R,S),R.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(E[t])return E[t];var e;if("k256"===t)e=new A;else if("p224"===t)e=new I;else if("p192"===t)e=new T;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new R}return E[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),s=0;while(!i.isZero()&&0===i.andln(1))s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();h=new o(2*h*h).toRed(this);while(0!==this.pow(h,c).cmp(u))h.redIAdd(u);var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;while(0!==d.cmp(a)){for(var y=d,g=0;0!==y.cmp(a);g++)y=y.redSqr();n(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=g}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var s=n[0],a=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=c-1;l>=0;l--){var f=h>>l&1;s!==n[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,u++,(u===r||0===i&&0===l)&&(s=this.mul(s,n[a]),u=0,a=0)):u=0}c=26}return s},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new k(t)},i(k,M),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)},31482:function(t,e,r){var n;function i(t){this.rand=t}if(r(48675),r(3462),r(37380),r(1118),r(21703),t.exports=function(t){return n||(n=new i(null)),n.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"===typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"===typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(89214);if("function"!==typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return o.randomBytes(t)}}catch(s){}},88970:function(t,e,r){var n=r(6779).Buffer;function i(t){n.isBuffer(t)||(t=n.from(t));for(var e=t.length/4|0,r=new Array(e),i=0;i<e;i++)r[i]=t.readUInt32BE(4*i);return r}function o(t){for(var e=0;e<t.length;t++)t[e]=0}function s(t,e,r,n,i){for(var o,s,a,u,c=r[0],h=r[1],l=r[2],f=r[3],d=t[0]^e[0],p=t[1]^e[1],y=t[2]^e[2],g=t[3]^e[3],m=4,b=1;b<i;b++)o=c[d>>>24]^h[p>>>16&255]^l[y>>>8&255]^f[255&g]^e[m++],s=c[p>>>24]^h[y>>>16&255]^l[g>>>8&255]^f[255&d]^e[m++],a=c[y>>>24]^h[g>>>16&255]^l[d>>>8&255]^f[255&p]^e[m++],u=c[g>>>24]^h[d>>>16&255]^l[p>>>8&255]^f[255&y]^e[m++],d=o,p=s,y=a,g=u;return o=(n[d>>>24]<<24|n[p>>>16&255]<<16|n[y>>>8&255]<<8|n[255&g])^e[m++],s=(n[p>>>24]<<24|n[y>>>16&255]<<16|n[g>>>8&255]<<8|n[255&d])^e[m++],a=(n[y>>>24]<<24|n[g>>>16&255]<<16|n[d>>>8&255]<<8|n[255&p])^e[m++],u=(n[g>>>24]<<24|n[d>>>16&255]<<16|n[p>>>8&255]<<8|n[255&y])^e[m++],o>>>=0,s>>>=0,a>>>=0,u>>>=0,[o,s,a,u]}var a=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,u=0;u<256;++u){var c=a^a<<1^a<<2^a<<3^a<<4;c=c>>>8^255&c^99,r[s]=c,n[c]=s;var h=t[s],l=t[h],f=t[l],d=257*t[c]^16843008*c;i[0][s]=d<<24|d>>>8,i[1][s]=d<<16|d>>>16,i[2][s]=d<<8|d>>>24,i[3][s]=d,d=16843009*f^65537*l^257*h^16843008*s,o[0][c]=d<<24|d>>>8,o[1][c]=d<<16|d>>>16,o[2][c]=d<<8|d>>>24,o[3][c]=d,0===s?s=a=1:(s=h^t[t[t[f^h]]],a^=t[t[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function c(t){this._key=i(t),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=4*(r+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var s=i[o-1];o%e===0?(s=s<<8|s>>>24,s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s],s^=a[o/e|0]<<24):e>6&&o%e===4&&(s=u.SBOX[s>>>24]<<24|u.SBOX[s>>>16&255]<<16|u.SBOX[s>>>8&255]<<8|u.SBOX[255&s]),i[o]=i[o-e]^s}for(var c=[],h=0;h<n;h++){var l=n-h,f=i[l-(h%4?0:4)];c[h]=h<4||l<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(t){return t=i(t),s(t,this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},c.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=n.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},c.prototype.decryptBlock=function(t){t=i(t);var e=t[1];t[1]=t[3],t[3]=e;var r=s(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},c.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=c},89043:function(t,e,r){r(21703);var n=r(88970),i=r(6779).Buffer,o=r(11414),s=r(81923),a=r(92789),u=r(96662),c=r(40306);function h(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}function l(t,e,r){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var n=new a(r),o=e.length,s=o%16;n.update(e),s&&(s=16-s,n.update(i.alloc(s,0))),n.update(i.alloc(8,0));var u=8*o,h=i.alloc(8);h.writeUIntBE(u,0,8),n.update(h),t._finID=n.state;var l=i.from(t._finID);return c(l),l}function f(t,e,r,s){o.call(this);var u=i.alloc(4,0);this._cipher=new n.AES(e);var c=this._cipher.encryptBlock(u);this._ghash=new a(c),r=l(this,r,c),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}s(f,o),f.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},f.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&h(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},f.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},f.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},f.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=f},24699:function(t,e,r){var n=r(74213),i=r(91595),o=r(44946);function s(){return Object.keys(o)}e.createCipher=e.Cipher=n.createCipher,e.createCipheriv=e.Cipheriv=n.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=s},91595:function(t,e,r){r(21703);var n=r(89043),i=r(6779).Buffer,o=r(65612),s=r(25248),a=r(11414),u=r(88970),c=r(13692),h=r(81923);function l(t,e,r){a.call(this),this._cache=new f,this._last=void 0,this._cipher=new u.AES(e),this._prev=i.from(r),this._mode=t,this._autopadding=!0}function f(){this.cache=i.allocUnsafe(0)}function d(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var r=-1;while(++r<e)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}function p(t,e,r){var a=o[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"===typeof r&&(r=i.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);if("string"===typeof e&&(e=i.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===a.type?new s(a.module,e,r,!0):"auth"===a.type?new n(a.module,e,r,!0):new l(a.module,e,r)}function y(t,e){var r=o[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=c(e,!1,r.key,r.iv);return p(t,n.key,n.iv)}h(l,a),l.prototype._update=function(t){var e,r;this._cache.add(t);var n=[];while(e=this._cache.get(this._autopadding))r=this._mode.decrypt(this,e),n.push(r);return i.concat(n)},l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return d(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=i.concat([this.cache,t])},f.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},f.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=y,e.createDecipheriv=p},74213:function(t,e,r){r(21703);var n=r(65612),i=r(89043),o=r(6779).Buffer,s=r(25248),a=r(11414),u=r(88970),c=r(13692),h=r(81923);function l(t,e,r){a.call(this),this._cache=new d,this._cipher=new u.AES(e),this._prev=o.from(r),this._mode=t,this._autopadding=!0}h(l,a),l.prototype._update=function(t){var e,r;this._cache.add(t);var n=[];while(e=this._cache.get())r=this._mode.encrypt(this,e),n.push(r);return o.concat(n)};var f=o.alloc(16,16);function d(){this.cache=o.allocUnsafe(0)}function p(t,e,r){var a=n[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"===typeof e&&(e=o.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if("string"===typeof r&&(r=o.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===a.type?new s(a.module,e,r):"auth"===a.type?new i(a.module,e,r):new l(a.module,e,r)}function y(t,e){var r=n[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=c(e,!1,r.key,r.iv);return p(t,i.key,i.iv)}l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(f))throw this._cipher.scrub(),new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},d.prototype.add=function(t){this.cache=o.concat([this.cache,t])},d.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},d.prototype.flush=function(){var t=16-this.cache.length,e=o.allocUnsafe(t),r=-1;while(++r<t)e.writeUInt8(t,r);return o.concat([this.cache,e])},e.createCipheriv=p,e.createCipher=y},92789:function(t,e,r){var n=r(6779).Buffer,i=n.alloc(16,0);function o(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function s(t){var e=n.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}a.prototype.ghash=function(t){var e=-1;while(++e<t.length)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){var t,e,r,n=o(this.h),i=[0,0,0,0],a=-1;while(++a<128){for(e=0!==(this.state[~~(a/8)]&1<<7-a%8),e&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!==(1&n[3]),t=3;t>0;t--)n[t]=n[t]>>>1|(1&n[t-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=s(i)},a.prototype.update=function(t){var e;this.cache=n.concat([this.cache,t]);while(this.cache.length>=16)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(s([0,t,0,e])),this.state},t.exports=a},40306:function(t){function e(t){var e,r=t.length;while(r--){if(e=t.readUInt8(r),255!==e){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}t.exports=e},66151:function(t,e,r){var n=r(96662);e.encrypt=function(t,e){var r=n(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},e.decrypt=function(t,e){var r=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return n(i,r)}},36557:function(t,e,r){var n=r(6779).Buffer,i=r(96662);function o(t,e,r){var o=e.length,s=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=n.concat([t._prev,r?e:s]),s}e.encrypt=function(t,e,r){var i,s=n.allocUnsafe(0);while(e.length){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=n.allocUnsafe(0)),!(t._cache.length<=e.length)){s=n.concat([s,o(t,e,r)]);break}i=t._cache.length,s=n.concat([s,o(t,e.slice(0,i),r)]),e=e.slice(i)}return s}},12610:function(t,e,r){var n=r(6779).Buffer;function i(t,e,r){var n,i,s,a=-1,u=8,c=0;while(++a<u)n=t._cipher.encryptBlock(t._prev),i=e&1<<7-a?128:0,s=n[0]^i,c+=(128&s)>>a%8,t._prev=o(t._prev,r?i:s);return c}function o(t,e){var r=t.length,i=-1,o=n.allocUnsafe(t.length);t=n.concat([t,n.from([e])]);while(++i<r)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,r){var o=e.length,s=n.allocUnsafe(o),a=-1;while(++a<o)s[a]=i(t,e[a],r);return s}},92887:function(t,e,r){var n=r(6779).Buffer;function i(t,e,r){var i=t._cipher.encryptBlock(t._prev),o=i[0]^e;return t._prev=n.concat([t._prev.slice(1),n.from([r?e:o])]),o}e.encrypt=function(t,e,r){var o=e.length,s=n.allocUnsafe(o),a=-1;while(++a<o)s[a]=i(t,e[a],r);return s}},71102:function(t,e,r){var n=r(96662),i=r(6779).Buffer,o=r(40306);function s(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}var a=16;e.encrypt=function(t,e){var r=Math.ceil(e.length/a),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(r*a)]);for(var u=0;u<r;u++){var c=s(t),h=o+u*a;t._cache.writeUInt32BE(c[0],h+0),t._cache.writeUInt32BE(c[1],h+4),t._cache.writeUInt32BE(c[2],h+8),t._cache.writeUInt32BE(c[3],h+12)}var l=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,l)}},47926:function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},65612:function(t,e,r){var n={ECB:r(47926),CBC:r(66151),CFB:r(36557),CFB8:r(92887),CFB1:r(12610),OFB:r(96610),CTR:r(71102),GCM:r(71102)},i=r(44946);for(var o in i)i[o].module=n[i[o].mode];t.exports=i},96610:function(t,e,r){var n=r(13374)["Buffer"],i=r(96662);function o(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(t,e){while(t._cache.length<e.length)t._cache=n.concat([t._cache,o(t)]);var r=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),i(e,r)}},25248:function(t,e,r){var n=r(88970),i=r(6779).Buffer,o=r(11414),s=r(81923);function a(t,e,r,s){o.call(this),this._cipher=new n.AES(e),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._mode=t}s(a,o),a.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},67902:function(t,e,r){r(21703);var n=r(3723),i=r(24699),o=r(65612),s=r(91266),a=r(13692);function u(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");r=8*s[t].key,n=s[t].iv}var i=a(e,!1,r,n);return h(t,i.key,i.iv)}function c(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");r=8*s[t].key,n=s[t].iv}var i=a(e,!1,r,n);return l(t,i.key,i.iv)}function h(t,e,r){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,r);if(s[t])return new n({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function l(t,e,r){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,r);if(s[t])return new n({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}function f(){return Object.keys(s).concat(i.getCiphers())}e.createCipher=e.Cipher=u,e.createCipheriv=e.Cipheriv=h,e.createDecipher=e.Decipher=c,e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=f},3723:function(t,e,r){var n=r(11414),i=r(38899),o=r(81923),s=r(6779).Buffer,a={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(t){n.call(this);var e,r=t.mode.toLowerCase(),i=a[r];e=t.decrypt?"decrypt":"encrypt";var o=t.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=s.concat([o,o.slice(0,8)]));var u=t.iv;s.isBuffer(u)||(u=s.from(u)),this._des=i.create({key:o,iv:u,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=u,o(u,n),u.prototype._update=function(t){return s.from(this._des.update(t))},u.prototype._final=function(){return s.from(this._des.final())}},91266:function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},28593:function(t,e,r){var n=r(13374)["Buffer"],i=r(2396),o=r(67602);function s(t){var e=a(t),r=e.toRed(i.mont(t.modulus)).redPow(new i(t.publicExponent)).fromRed();return{blinder:r,unblinder:e.invm(t.modulus)}}function a(t){var e,r=t.modulus.byteLength();do{e=new i(o(r))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function u(t,e){var r=s(e),o=e.modulus.byteLength(),a=new i(t).mul(r.blinder).umod(e.modulus),u=a.toRed(i.mont(e.prime1)),c=a.toRed(i.mont(e.prime2)),h=e.coefficient,l=e.prime1,f=e.prime2,d=u.redPow(e.exponent1).fromRed(),p=c.redPow(e.exponent2).fromRed(),y=d.isub(p).imul(h).umod(l).imul(f);return p.iadd(y).imul(r.unblinder).umod(e.modulus).toArrayLike(n,"be",o)}u.getr=a,t.exports=u},12481:function(t,e,r){t.exports=r(75207)},68130:function(t,e,r){r(21703);var n=r(29882).Buffer,i=r(65443),o=r(98141),s=r(81923),a=r(36528),u=r(72170),c=r(75207);function h(t){o.Writable.call(this);var e=c[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function l(t){o.Writable.call(this);var e=c[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new h(t)}function d(t){return new l(t)}Object.keys(c).forEach((function(t){c[t].id=n.from(c[t].id,"hex"),c[t.toLowerCase()]=c[t]})),s(h,o.Writable),h.prototype._write=function(t,e,r){this._hash.update(t),r()},h.prototype.update=function(t,e){return"string"===typeof t&&(t=n.from(t,e)),this._hash.update(t),this},h.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),n=a(r,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},s(l,o.Writable),l.prototype._write=function(t,e,r){this._hash.update(t),r()},l.prototype.update=function(t,e){return"string"===typeof t&&(t=n.from(t,e)),this._hash.update(t),this},l.prototype.verify=function(t,e,r){"string"===typeof e&&(e=n.from(e,r)),this.end();var i=this._hash.digest();return u(e,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:d,createSign:f,createVerify:d}},36528:function(t,e,r){r(21703);var n=r(29882).Buffer,i=r(54868),o=r(28593),s=r(32127).ec,a=r(2396),u=r(2616),c=r(1308);function h(t,e,r,i,s){var a=u(e);if(a.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return l(t,a)}if("dsa"===a.type){if("dsa"!==i)throw new Error("wrong private key type");return f(t,a,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");t=n.concat([s,t]);var c=a.modulus.byteLength(),h=[0,1];while(t.length+h.length+1<c)h.push(255);h.push(0);var d=-1;while(++d<t.length)h.push(t[d]);var p=o(h,a);return p}function l(t,e){var r=c[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var i=new s(r),o=i.keyFromPrivate(e.privateKey),a=o.sign(t);return n.from(a.toDER())}function f(t,e,r){var n,i=e.params.priv_key,o=e.params.p,s=e.params.q,u=e.params.g,c=new a(0),h=y(t,s).mod(s),l=!1,f=p(i,s,t,r);while(!1===l)n=m(s,f,r),c=b(u,n,o,s),l=n.invm(s).imul(h.add(i.mul(c))).mod(s),0===l.cmpn(0)&&(l=!1,c=new a(0));return d(c,l)}function d(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var r=t.length+e.length+4,i=[48,r,2,t.length];return i=i.concat(t,[2,e.length],e),n.from(i)}function p(t,e,r,o){if(t=n.from(t.toArray()),t.length<e.byteLength()){var s=n.alloc(e.byteLength()-t.length);t=n.concat([s,t])}var a=r.length,u=g(r,e),c=n.alloc(a);c.fill(1);var h=n.alloc(a);return h=i(o,h).update(c).update(n.from([0])).update(t).update(u).digest(),c=i(o,h).update(c).digest(),h=i(o,h).update(c).update(n.from([1])).update(t).update(u).digest(),c=i(o,h).update(c).digest(),{k:h,v:c}}function y(t,e){var r=new a(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function g(t,e){t=y(t,e),t=t.mod(e);var r=n.from(t.toArray());if(r.length<e.byteLength()){var i=n.alloc(e.byteLength()-r.length);r=n.concat([i,r])}return r}function m(t,e,r){var o,s;do{o=n.alloc(0);while(8*o.length<t.bitLength())e.v=i(r,e.k).update(e.v).digest(),o=n.concat([o,e.v]);s=y(o,t),e.k=i(r,e.k).update(e.v).update(n.from([0])).digest(),e.v=i(r,e.k).update(e.v).digest()}while(-1!==s.cmp(t));return s}function b(t,e,r,n){return t.toRed(a.mont(r)).redPow(e).fromRed().mod(n)}t.exports=h,t.exports.getKey=p,t.exports.makeKey=m},72170:function(t,e,r){r(21703);var n=r(29882).Buffer,i=r(2396),o=r(32127).ec,s=r(2616),a=r(1308);function u(t,e,r,o,a){var u=s(r);if("ec"===u.type){if("ecdsa"!==o&&"ecdsa/rsa"!==o)throw new Error("wrong public key type");return c(t,e,u)}if("dsa"===u.type){if("dsa"!==o)throw new Error("wrong public key type");return h(t,e,u)}if("rsa"!==o&&"ecdsa/rsa"!==o)throw new Error("wrong public key type");e=n.concat([a,e]);var l=u.modulus.byteLength(),f=[1],d=0;while(e.length+f.length+2<l)f.push(255),d++;f.push(0);var p=-1;while(++p<e.length)f.push(e[p]);f=n.from(f);var y=i.mont(u.modulus);t=new i(t).toRed(y),t=t.redPow(new i(u.publicExponent)),t=n.from(t.fromRed().toArray());var g=d<8?1:0;l=Math.min(t.length,f.length),t.length!==f.length&&(g=1),p=-1;while(++p<l)g|=t[p]^f[p];return 0===g}function c(t,e,r){var n=a[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new o(n),s=r.data.subjectPrivateKey.data;return i.verify(e,t,s)}function h(t,e,r){var n=r.data.p,o=r.data.q,a=r.data.g,u=r.data.pub_key,c=s.signature.decode(t,"der"),h=c.s,f=c.r;l(h,o),l(f,o);var d=i.mont(n),p=h.invm(o),y=a.toRed(d).redPow(new i(e).mul(p).mod(o)).fromRed().mul(u.toRed(d).redPow(f.mul(p).mod(o)).fromRed()).mod(n).mod(o);return 0===y.cmp(f)}function l(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=u},29882:function(t,e,r){r(21703);
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(15361),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},96662:function(t,e,r){var n=r(13374)["Buffer"];t.exports=function(t,e){for(var r=Math.min(t.length,e.length),i=new n(r),o=0;o<r;++o)i[o]=t[o]^e[o];return i}},15361:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);var i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;var a=2147483647;function u(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(r){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);var i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|E(t,e),n=c(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){for(var e=t.length<0?0:0|v(t.length),r=c(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(X(t,Uint8Array)){var e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){var e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||Q(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(t).length;default:if(i)return n?-1:G(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Q(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){l=!1;break}if(l)return o}return-1}function R(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(Q(a))return s;t[r+s]=a}return s}function M(t,e,r,n){return Z(G(e,t.length-r),t,r,n)}function k(t,e,r,n){return Z(W(e),t,r,n)}function C(t,e,r,n){return Z(J(e),t,r,n)}function O(t,e,r,n){return Z(Y(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);var n=[],i=e;while(i<r){var o,s,a,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=r)switch(l){case 1:c<128&&(h=c);break;case 2:o=t[i+1],128===(192&o)&&(u=(31&c)<<6|63&o,u>127&&(h=u));break;case 3:o=t[i+1],s=t[i+2],128===(192&o)&&128===(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s,u>2047&&(u<55296||u>57343)&&(h=u));break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a,u>65535&&u<1114112&&(h=u))}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(X(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=h.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(X(o,Uint8Array))i+o.length>n.length?h.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else{if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(X(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=r-e,a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function N(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);var r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=tt[t[o]];return i}function j(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(t,e,r,n,i){return e=+e,r>>>=0,i||$(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function H(t,e,r,n,i){return e=+e,r>>>=0,i||$(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);var n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);var n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);var n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);var n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;K(this,t,e,r,i,0)}var o=1,s=0;this[e]=255&t;while(++s<r&&(o*=256))this[e+s]=t/o&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;K(this,t,e,r,i,0)}var o=r-1,s=1;this[e+o]=255&t;while(--o>=0&&(s*=256))this[e+o]=t/s&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);K(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;this[e]=255&t;while(++o<r&&(s*=256))t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);K(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;this[e+o]=255&t;while(--o>=0&&(s*=256))t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeFloatLE=function(t,e,r){return q(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return q(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return H(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return H(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=h.isBuffer(t)?t:h.from(t,n),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var z=/[^+/0-9A-Za-z-_]/g;function V(t){if(t=t.split("=")[0],t=t.trim().replace(z,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function G(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function Y(t,e){for(var r,n,i,o=[],s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function J(t){return i.toByteArray(V(t))}function Z(t,e,r,n){for(var i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Q(t){return t!==t}var tt=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()},65417:function(t){"use strict";t.exports=function t(e){return null===e||"object"!==typeof e||null!=e.toJSON?JSON.stringify(e):Array.isArray(e)?"["+e.reduce(((e,r,n)=>{const i=0===n?"":",",o=void 0===r||"symbol"===typeof r?null:r;return e+i+t(o)}),"")+"]":"{"+Object.keys(e).sort().reduce(((r,n,i)=>{if(void 0===e[n]||"symbol"===typeof e[n])return r;const o=0===r.length?"":",";return r+o+t(n)+":"+t(e[n])}),"")+"}"}},11414:function(t,e,r){r(21703);var n=r(6779).Buffer,i=r(79367).Transform,o=r(25605).s,s=r(81923);function a(t){i.call(this),this.hashMode="string"===typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}s(a,i),a.prototype.update=function(t,e,r){"string"===typeof t&&(t=n.from(t,e));var i=this._update(t);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}},a.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)},a.prototype._finalOrDigest=function(t){var e=this.__final()||n.alloc(0);return t&&(e=this._toString(e,t,!0)),e},a.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n},t.exports=a},67151:function(t){"use strict";function e(t,{className:e,symbolName:r}){const n=Symbol.for(r),i={[e]:class extends t{constructor(...t){super(...t),Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return i[`is${e}`]=t=>!(!t||!t[n]),i}function r(t,{className:e,symbolName:r,withoutNew:n}){const i=Symbol.for(r),o={[e]:function(...e){if(n&&!(this instanceof o))return new o(...e);const r=t.call(this,...e)||this;return r&&!r[i]&&Object.defineProperty(r,i,{value:!0}),r}}[e];return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,Object.defineProperty(o.prototype,Symbol.toStringTag,{get(){return e}}),o[`is${e}`]=t=>!(!t||!t[i]),o}t.exports=e,t.exports.proto=r},25834:function(t,e,r){"use strict";r(26699);const n=r(5696),i=/\s+at.*(?:\(|\s)(.*)\)?/,o=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,s="undefined"===typeof n.homedir?"":n.homedir();t.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split("\n").filter((t=>{const e=t.match(i);if(null===e||!e[1])return!0;const r=e[1];return!r.includes(".app/Contents/Resources/electron.asar")&&!r.includes(".app/Contents/Resources/default_app.asar")&&!o.test(r)})).filter((t=>""!==t.trim())).map((t=>e.pretty?t.replace(i,((t,e)=>t.replace(e,e.replace(s,"~")))):t)).join("\n"))},49907:function(t,e,r){var n=r(13374)["Buffer"],i=r(32127),o=r(23339);t.exports=function(t){return new a(t)};var s={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=s[t],this.curveType||(this.curveType={name:t}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function u(t,e,r){Array.isArray(t)||(t=t.toArray());var i=new n(t);if(r&&i.length<r){var o=new n(r-i.length);o.fill(0),i=n.concat([o,i])}return e?i.toString(e):i}s.p224=s.secp224r1,s.p256=s.secp256r1=s.prime256v1,s.p192=s.secp192r1=s.prime192v1,s.p384=s.secp384r1,s.p521=s.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,e,r){e=e||"utf8",n.isBuffer(t)||(t=new n(t,e));var i=this.curve.keyFromPublic(t).getPublic(),o=i.mul(this.keys.getPrivate()).getX();return u(o,r,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(r[r.length-1]%2?r[0]=7:r[0]=6),u(r,t)},a.prototype.getPrivateKey=function(t){return u(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,e){return e=e||"utf8",n.isBuffer(t)||(t=new n(t,e)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,e){e=e||"utf8",n.isBuffer(t)||(t=new n(t,e));var r=new o(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}},23339:function(t,e,r){t=r.nmd(t),r(21703),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(8623).Buffer}catch(R){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function c(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8}this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,h=r;h<a;h+=n)u=c(t,h,h+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype.strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;i=0|t.words[p],o=0|e.words[d],s=i*o+l,h+=s/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,r=0!==o||s!==this.length-1?h[6-u.length]+u+r:u+r,i+=2,i>=26&&(i-=26,s--)}0!==o&&(r=o.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],d=f[t];r="";var p=this.clone();p.negative=0;while(!p.isZero()){var y=p.modn(d).toString(t);p=p.idivn(d),r=p.isZero()?y+r:h[c-y.length]+y+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)e=(0|r.words[s])-(0|n.words[s])+o,o=e>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)e=(0|r.words[s])+o,o=e>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,y=d>>>13,g=0|s[2],m=8191&g,b=g>>>13,w=0|s[3],v=8191&w,_=w>>>13,E=0|s[4],S=8191&E,A=E>>>13,I=0|s[5],T=8191&I,R=I>>>13,M=0|s[6],k=8191&M,C=M>>>13,O=0|s[7],P=8191&O,B=O>>>13,x=0|s[8],N=8191&x,D=x>>>13,L=0|s[9],U=8191&L,j=L>>>13,F=0|a[0],K=8191&F,$=F>>>13,q=0|a[1],H=8191&q,z=q>>>13,V=0|a[2],G=8191&V,W=V>>>13,Y=0|a[3],J=8191&Y,Z=Y>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(l,K),i=Math.imul(l,$),i=i+Math.imul(f,K)|0,o=Math.imul(f,$);var gt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,K),i=Math.imul(p,$),i=i+Math.imul(y,K)|0,o=Math.imul(y,$),n=n+Math.imul(l,H)|0,i=i+Math.imul(l,z)|0,i=i+Math.imul(f,H)|0,o=o+Math.imul(f,z)|0;var mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,K),i=Math.imul(m,$),i=i+Math.imul(b,K)|0,o=Math.imul(b,$),n=n+Math.imul(p,H)|0,i=i+Math.imul(p,z)|0,i=i+Math.imul(y,H)|0,o=o+Math.imul(y,z)|0,n=n+Math.imul(l,G)|0,i=i+Math.imul(l,W)|0,i=i+Math.imul(f,G)|0,o=o+Math.imul(f,W)|0;var bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(v,K),i=Math.imul(v,$),i=i+Math.imul(_,K)|0,o=Math.imul(_,$),n=n+Math.imul(m,H)|0,i=i+Math.imul(m,z)|0,i=i+Math.imul(b,H)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(y,G)|0,o=o+Math.imul(y,W)|0,n=n+Math.imul(l,J)|0,i=i+Math.imul(l,Z)|0,i=i+Math.imul(f,J)|0,o=o+Math.imul(f,Z)|0;var wt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(S,K),i=Math.imul(S,$),i=i+Math.imul(A,K)|0,o=Math.imul(A,$),n=n+Math.imul(v,H)|0,i=i+Math.imul(v,z)|0,i=i+Math.imul(_,H)|0,o=o+Math.imul(_,z)|0,n=n+Math.imul(m,G)|0,i=i+Math.imul(m,W)|0,i=i+Math.imul(b,G)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(l,Q)|0,i=i+Math.imul(l,tt)|0,i=i+Math.imul(f,Q)|0,o=o+Math.imul(f,tt)|0;var vt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(T,K),i=Math.imul(T,$),i=i+Math.imul(R,K)|0,o=Math.imul(R,$),n=n+Math.imul(S,H)|0,i=i+Math.imul(S,z)|0,i=i+Math.imul(A,H)|0,o=o+Math.imul(A,z)|0,n=n+Math.imul(v,G)|0,i=i+Math.imul(v,W)|0,i=i+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,Z)|0,i=i+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,tt)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,n=n+Math.imul(l,rt)|0,i=i+Math.imul(l,nt)|0,i=i+Math.imul(f,rt)|0,o=o+Math.imul(f,nt)|0;var _t=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,K),i=Math.imul(k,$),i=i+Math.imul(C,K)|0,o=Math.imul(C,$),n=n+Math.imul(T,H)|0,i=i+Math.imul(T,z)|0,i=i+Math.imul(R,H)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(S,G)|0,i=i+Math.imul(S,W)|0,i=i+Math.imul(A,G)|0,o=o+Math.imul(A,W)|0,n=n+Math.imul(v,J)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(m,Q)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=i+Math.imul(p,nt)|0,i=i+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0,n=n+Math.imul(l,ot)|0,i=i+Math.imul(l,st)|0,i=i+Math.imul(f,ot)|0,o=o+Math.imul(f,st)|0;var Et=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(P,K),i=Math.imul(P,$),i=i+Math.imul(B,K)|0,o=Math.imul(B,$),n=n+Math.imul(k,H)|0,i=i+Math.imul(k,z)|0,i=i+Math.imul(C,H)|0,o=o+Math.imul(C,z)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,W)|0,i=i+Math.imul(R,G)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(S,J)|0,i=i+Math.imul(S,Z)|0,i=i+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(v,tt)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=i+Math.imul(p,st)|0,i=i+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,n=n+Math.imul(l,ut)|0,i=i+Math.imul(l,ct)|0,i=i+Math.imul(f,ut)|0,o=o+Math.imul(f,ct)|0;var St=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,K),i=Math.imul(N,$),i=i+Math.imul(D,K)|0,o=Math.imul(D,$),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,z)|0,i=i+Math.imul(B,H)|0,o=o+Math.imul(B,z)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,W)|0,i=i+Math.imul(C,G)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(T,J)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(S,Q)|0,i=i+Math.imul(S,tt)|0,i=i+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(v,rt)|0,i=i+Math.imul(v,nt)|0,i=i+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=i+Math.imul(m,st)|0,i=i+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ut)|0,i=i+Math.imul(p,ct)|0,i=i+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,n=n+Math.imul(l,lt)|0,i=i+Math.imul(l,ft)|0,i=i+Math.imul(f,lt)|0,o=o+Math.imul(f,ft)|0;var At=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,K),i=Math.imul(U,$),i=i+Math.imul(j,K)|0,o=Math.imul(j,$),n=n+Math.imul(N,H)|0,i=i+Math.imul(N,z)|0,i=i+Math.imul(D,H)|0,o=o+Math.imul(D,z)|0,n=n+Math.imul(P,G)|0,i=i+Math.imul(P,W)|0,i=i+Math.imul(B,G)|0,o=o+Math.imul(B,W)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,Z)|0,i=i+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(T,Q)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,i=i+Math.imul(S,nt)|0,i=i+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(v,ot)|0,i=i+Math.imul(v,st)|0,i=i+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(m,ut)|0,i=i+Math.imul(m,ct)|0,i=i+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,lt)|0,i=i+Math.imul(p,ft)|0,i=i+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0,n=n+Math.imul(l,pt)|0,i=i+Math.imul(l,yt)|0,i=i+Math.imul(f,pt)|0,o=o+Math.imul(f,yt)|0;var It=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,H),i=Math.imul(U,z),i=i+Math.imul(j,H)|0,o=Math.imul(j,z),n=n+Math.imul(N,G)|0,i=i+Math.imul(N,W)|0,i=i+Math.imul(D,G)|0,o=o+Math.imul(D,W)|0,n=n+Math.imul(P,J)|0,i=i+Math.imul(P,Z)|0,i=i+Math.imul(B,J)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(k,Q)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(S,ot)|0,i=i+Math.imul(S,st)|0,i=i+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(v,ut)|0,i=i+Math.imul(v,ct)|0,i=i+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(m,lt)|0,i=i+Math.imul(m,ft)|0,i=i+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0,n=n+Math.imul(p,pt)|0,i=i+Math.imul(p,yt)|0,i=i+Math.imul(y,pt)|0,o=o+Math.imul(y,yt)|0;var Tt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,G),i=Math.imul(U,W),i=i+Math.imul(j,G)|0,o=Math.imul(j,W),n=n+Math.imul(N,J)|0,i=i+Math.imul(N,Z)|0,i=i+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(P,Q)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=i+Math.imul(T,st)|0,i=i+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(S,ut)|0,i=i+Math.imul(S,ct)|0,i=i+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,n=n+Math.imul(v,lt)|0,i=i+Math.imul(v,ft)|0,i=i+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0,n=n+Math.imul(m,pt)|0,i=i+Math.imul(m,yt)|0,i=i+Math.imul(b,pt)|0,o=o+Math.imul(b,yt)|0;var Rt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,J),i=Math.imul(U,Z),i=i+Math.imul(j,J)|0,o=Math.imul(j,Z),n=n+Math.imul(N,Q)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(B,rt)|0,o=o+Math.imul(B,nt)|0,n=n+Math.imul(k,ot)|0,i=i+Math.imul(k,st)|0,i=i+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,n=n+Math.imul(T,ut)|0,i=i+Math.imul(T,ct)|0,i=i+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(S,lt)|0,i=i+Math.imul(S,ft)|0,i=i+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0,n=n+Math.imul(v,pt)|0,i=i+Math.imul(v,yt)|0,i=i+Math.imul(_,pt)|0,o=o+Math.imul(_,yt)|0;var Mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,Q),i=Math.imul(U,tt),i=i+Math.imul(j,Q)|0,o=Math.imul(j,tt),n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(P,ot)|0,i=i+Math.imul(P,st)|0,i=i+Math.imul(B,ot)|0,o=o+Math.imul(B,st)|0,n=n+Math.imul(k,ut)|0,i=i+Math.imul(k,ct)|0,i=i+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(T,lt)|0,i=i+Math.imul(T,ft)|0,i=i+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0,n=n+Math.imul(S,pt)|0,i=i+Math.imul(S,yt)|0,i=i+Math.imul(A,pt)|0,o=o+Math.imul(A,yt)|0;var kt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(N,ot)|0,i=i+Math.imul(N,st)|0,i=i+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,n=n+Math.imul(P,ut)|0,i=i+Math.imul(P,ct)|0,i=i+Math.imul(B,ut)|0,o=o+Math.imul(B,ct)|0,n=n+Math.imul(k,lt)|0,i=i+Math.imul(k,ft)|0,i=i+Math.imul(C,lt)|0,o=o+Math.imul(C,ft)|0,n=n+Math.imul(T,pt)|0,i=i+Math.imul(T,yt)|0,i=i+Math.imul(R,pt)|0,o=o+Math.imul(R,yt)|0;var Ct=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,ot),i=Math.imul(U,st),i=i+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(N,ut)|0,i=i+Math.imul(N,ct)|0,i=i+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,n=n+Math.imul(P,lt)|0,i=i+Math.imul(P,ft)|0,i=i+Math.imul(B,lt)|0,o=o+Math.imul(B,ft)|0,n=n+Math.imul(k,pt)|0,i=i+Math.imul(k,yt)|0,i=i+Math.imul(C,pt)|0,o=o+Math.imul(C,yt)|0;var Ot=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ut),i=Math.imul(U,ct),i=i+Math.imul(j,ut)|0,o=Math.imul(j,ct),n=n+Math.imul(N,lt)|0,i=i+Math.imul(N,ft)|0,i=i+Math.imul(D,lt)|0,o=o+Math.imul(D,ft)|0,n=n+Math.imul(P,pt)|0,i=i+Math.imul(P,yt)|0,i=i+Math.imul(B,pt)|0,o=o+Math.imul(B,yt)|0;var Pt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=Math.imul(U,ft),i=i+Math.imul(j,lt)|0,o=Math.imul(j,ft),n=n+Math.imul(N,pt)|0,i=i+Math.imul(N,yt)|0,i=i+Math.imul(D,pt)|0,o=o+Math.imul(D,yt)|0;var Bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,pt),i=Math.imul(U,yt),i=i+Math.imul(j,pt)|0,o=Math.imul(j,yt);var xt=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,u[0]=gt,u[1]=mt,u[2]=bt,u[3]=wt,u[4]=vt,u[5]=_t,u[6]=Et,u[7]=St,u[8]=At,u[9]=It,u[10]=Tt,u[11]=Rt,u[12]=Mt,u[13]=kt,u[14]=Ct,u[15]=Ot,u[16]=Pt,u[17]=Bt,u[18]=xt,0!==c&&(u[19]=c,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=0|t.words[h],f=0|e.words[c],d=l*f,p=67108863&d;s=s+(d/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,i+=s>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function m(t,e,r){var n=new b;return n.mulp(t,e,r)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=p),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?y(this,t,e):n<63?p(this,t,e):n<1024?g(this,t,e):m(this,t,e),r},b.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},b.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},b.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=r[h+d],y=n[h+d],g=r[h+d+s],m=n[h+d+s],b=l*g-f*m;m=l*m+f*g,g=b,r[h+d]=p+g,n[h+d]=y+m,r[h+d+s]=p-g,n[h+d+s]=y-m,d!==a&&(b=u*l-c*f,f=u*f+c*l,l=b)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},b.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=d(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+a,a=o>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)o=-(0|this.words[i])+a,a=o>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,s=0|i.words[i.length-1],a=this._countBits(s);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,u&&(u.words[c]=1));for(var f=c-1;f>=0;f--){var d=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);d=Math.min(d/s|0,67108863),n._ishlnsubmul(i,d,f);while(0!==n.negative)d--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=d)}return u&&u.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++c;var h=r.clone(),l=e.clone();while(!e.isZero()){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0){e.iushrn(f);while(f-- >0)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1)}for(var p=0,y=1;0===(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,s=new o(1),a=new o(0),u=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0){e.iushrn(c);while(c-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0){r.iushrn(l);while(l-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return i=0===e.cmpn(1)?s:a,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new I(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,v),i(S,v),i(A,v),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return w[t]=e,e},I.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),s=0;while(!i.isZero()&&0===i.andln(1))s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();h=new o(2*h*h).toRed(this);while(0!==this.pow(h,c).cmp(u))h.redIAdd(u);var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;while(0!==d.cmp(a)){for(var y=d,g=0;0!==y.cmp(a);g++)y=y.redSqr();n(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=g}return f},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var s=n[0],a=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=c-1;l>=0;l--){var f=h>>l&1;s!==n[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,u++,(u===r||0===i&&0===l)&&(s=this.mul(s,n[a]),u=0,a=0)):u=0}c=26}return s},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,I),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)},65443:function(t,e,r){"use strict";var n=r(81923),i=r(74993),o=r(3128),s=r(61720),a=r(11414);function u(t){a.call(this,"digest"),this._hash=t}n(u,a),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return t=t.toLowerCase(),"md5"===t?new i:"rmd160"===t||"ripemd160"===t?new o:new u(s(t))}},56515:function(t,e,r){var n=r(74993);t.exports=function(t){return(new n).update(t).digest()}},54868:function(t,e,r){"use strict";var n=r(81923),i=r(95797),o=r(11414),s=r(6779).Buffer,a=r(56515),u=r(3128),c=r(61720),h=s.alloc(128);function l(t,e){o.call(this,"digest"),"string"===typeof e&&(e=s.from(e));var r="sha512"===t||"sha384"===t?128:64;if(this._alg=t,this._key=e,e.length>r){var n="rmd160"===t?new u:c(t);e=n.update(e).digest()}else e.length<r&&(e=s.concat([e,h],r));for(var i=this._ipad=s.allocUnsafe(r),a=this._opad=s.allocUnsafe(r),l=0;l<r;l++)i[l]=54^e[l],a[l]=92^e[l];this._hash="rmd160"===t?new u:c(t),this._hash.update(i)}n(l,o),l.prototype._update=function(t){this._hash.update(t)},l.prototype._final=function(){var t=this._hash.digest(),e="rmd160"===this._alg?new u:c(this._alg);return e.update(this._opad).update(t).digest()},t.exports=function(t,e){return t=t.toLowerCase(),"rmd160"===t||"ripemd160"===t?new l("rmd160",e):"md5"===t?new i(a,e):new l(t,e)}},95797:function(t,e,r){"use strict";var n=r(81923),i=r(6779).Buffer,o=r(11414),s=i.alloc(128),a=64;function u(t,e){o.call(this,"digest"),"string"===typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=i.concat([e,s],a));for(var r=this._ipad=i.allocUnsafe(a),n=this._opad=i.allocUnsafe(a),u=0;u<a;u++)r[u]=54^e[u],n[u]=92^e[u];this._hash=[r]}n(u,o),u.prototype._update=function(t){this._hash.push(t)},u.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=u},76037:function(t,e,r){r(82801),r(21703),r(48675),r(3462),r(37380),r(1118);var n="undefined"!==typeof self?self:this,i=function(){function t(){this.fetch=!1,this.DOMException=n.DOMException}return t.prototype=n,new t}();(function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!==typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function f(t){var e=new FileReader,r=l(e);return e.readAsArrayBuffer(t),r}function d(t){var e=new FileReader,r=l(e);return e.readAsText(t),r}function p(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&n(t)?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=s(t),e=a(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},c.prototype["delete"]=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=a(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}function w(t,e){e=e||{};var r=e.body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=b(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function _(t){var e=new c,r=t.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},g.call(w.prototype),g.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var S=[301,302,303,307,308];E.redirect=function(t,e){if(-1===S.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(I){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,n){return new Promise((function(i,o){var s=new w(t,n);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:_(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;i(new E(e,t))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=c,t.Request=w,t.Response=E),e.Headers=c,e.Request=w,e.Response=E,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=i;e=o.fetch,e["default"]=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e},59821:function(t,e,r){"use strict";r(21703),r(67602),r(65443),r(54868);var n=r(12481),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);var s=r(15043);s.pbkdf2,s.pbkdf2Sync;var a=r(67902);a.Cipher,a.createCipher,a.Cipheriv,a.createCipheriv,a.Decipher,a.createDecipher,a.Decipheriv,a.createDecipheriv,a.getCiphers,a.listCiphers;var u=r(58150);u.DiffieHellmanGroup,u.createDiffieHellmanGroup,u.getDiffieHellman,u.createDiffieHellman,u.DiffieHellman;var c=r(68130);c.createSign,c.Sign,c.createVerify,c.Verify,r(49907);var h=r(82963);h.publicEncrypt,h.privateEncrypt,h.publicDecrypt,h.privateDecrypt;var l=r(21911);l.randomFill,l.randomFillSync},45208:function(t,e,r){"use strict";var n=r(96027);r(21703),r(84633);var i,o=function(){function t(t,e){if("function"!==typeof t)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+t+".");this._batchLoadFn=t,this._maxBatchSize=l(e),this._batchScheduleFn=f(e),this._cacheKeyFn=d(e),this._cacheMap=p(e),this._batch=null}var e=t.prototype;return e.load=function(t){if(null===t||void 0===t)throw new TypeError("The loader.load() function must be called with a value, but got: "+String(t)+".");var e=a(this),r=this._cacheMap,n=this._cacheKeyFn(t);if(r){var i=r.get(n);if(i){var o=e.cacheHits||(e.cacheHits=[]);return new Promise((function(t){o.push((function(){t(i)}))}))}}e.keys.push(t);var s=new Promise((function(t,r){e.callbacks.push({resolve:t,reject:r})}));return r&&r.set(n,s),s},e.loadMany=function(t){if(!y(t))throw new TypeError("The loader.loadMany() function must be called with Array<key> but got: "+t+".");for(var e=[],r=0;r<t.length;r++)e.push(this.load(t[r])["catch"]((function(t){return t})));return Promise.all(e)},e.clear=function(t){var e=this._cacheMap;if(e){var r=this._cacheKeyFn(t);e["delete"](r)}return this},e.clearAll=function(){var t=this._cacheMap;return t&&t.clear(),this},e.prime=function(t,e){var r=this._cacheMap;if(r){var n,i=this._cacheKeyFn(t);if(void 0===r.get(i))e instanceof Error?(n=Promise.reject(e),n["catch"]((function(){}))):n=Promise.resolve(e),r.set(i,n)}return this},t}(),s="object"===typeof n&&"function"===typeof n.nextTick?function(t){i||(i=Promise.resolve()),i.then((function(){n.nextTick(t)}))}:"function"===typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t)};function a(t){var e=t._batch;if(null!==e&&!e.hasDispatched&&e.keys.length<t._maxBatchSize&&(!e.cacheHits||e.cacheHits.length<t._maxBatchSize))return e;var r={hasDispatched:!1,keys:[],callbacks:[]};return t._batch=r,t._batchScheduleFn((function(){u(t,r)})),r}function u(t,e){if(e.hasDispatched=!0,0!==e.keys.length){var r=t._batchLoadFn(e.keys);if(!r||"function"!==typeof r.then)return c(t,e,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(r)+"."));r.then((function(t){if(!y(t))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(t)+".");if(t.length!==e.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(e.keys)+"\n\nValues:\n"+String(t));h(e);for(var r=0;r<e.callbacks.length;r++){var n=t[r];n instanceof Error?e.callbacks[r].reject(n):e.callbacks[r].resolve(n)}}))["catch"]((function(r){c(t,e,r)}))}else h(e)}function c(t,e,r){h(e);for(var n=0;n<e.keys.length;n++)t.clear(e.keys[n]),e.callbacks[n].reject(r)}function h(t){if(t.cacheHits)for(var e=0;e<t.cacheHits.length;e++)t.cacheHits[e]()}function l(t){var e=!t||!1!==t.batch;if(!e)return 1;var r=t&&t.maxBatchSize;if(void 0===r)return 1/0;if("number"!==typeof r||r<1)throw new TypeError("maxBatchSize must be a positive number: "+r);return r}function f(t){var e=t&&t.batchScheduleFn;if(void 0===e)return s;if("function"!==typeof e)throw new TypeError("batchScheduleFn must be a function: "+e);return e}function d(t){var e=t&&t.cacheKeyFn;if(void 0===e)return function(t){return t};if("function"!==typeof e)throw new TypeError("cacheKeyFn must be a function: "+e);return e}function p(t){var e=!t||!1!==t.cache;if(!e)return null;var r=t&&t.cacheMap;if(void 0===r)return new Map;if(null!==r){var n=["get","set","delete","clear"],i=n.filter((function(t){return r&&"function"!==typeof r[t]}));if(0!==i.length)throw new TypeError("Custom cacheMap missing methods: "+i.join(", "))}return r}function y(t){return"object"===typeof t&&null!==t&&"number"===typeof t.length&&(0===t.length||t.length>0&&Object.prototype.hasOwnProperty.call(t,t.length-1))}t.exports=o},15652:function(t,e,r){var n=r(15941),i=r(96027);function o(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function s(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(i=n))})),e.splice(i,0,r)}function a(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(r){}}function u(){let t;try{t=e.storage.getItem("debug")}catch(r){}return!t&&"undefined"!==typeof i&&"env"in i&&(t={NODE_ENV:"production",BASE_URL:"/codstorage/"}.DEBUG),t}function c(){try{return localStorage}catch(t){}}e.formatArgs=s,e.save=a,e.load=u,e.useColors=o,e.storage=c(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,n.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=n.debug||n.log||(()=>{}),t.exports=r(2940)(e);const{formatters:h}=t.exports;h.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2940:function(t,e,r){var n=r(15941);function i(t){function e(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let e,r,n,s=null;function a(...t){if(!a.enabled)return;const r=a,n=Number(new Date),o=n-(e||n);r.diff=o,r.prev=e,r.curr=n,e=n,t[0]=i.coerce(t[0]),"string"!==typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";s++;const o=i.formatters[n];if("function"===typeof o){const n=t[s];e=o.call(r,n),t.splice(s,1),s--}return e})),i.formatArgs.call(r,t);const u=r.log||i.log;u.apply(r,t)}return a.namespace=t,a.useColors=i.useColors(),a.color=i.selectColor(t),a.extend=o,a.destroy=i.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(r!==i.namespaces&&(r=i.namespaces,n=i.enabled(t)),n),set:t=>{s=t}}),"function"===typeof i.init&&i.init(a),a}function o(t,e){const r=i(this.namespace+("undefined"===typeof e?":":e)+t);return r.log=this.log,r}function s(t){let e;i.save(t),i.namespaces=t,i.names=[],i.skips=[];const r=("string"===typeof t?t:"").split(/[\s,]+/),n=r.length;for(e=0;e<n;e++)r[e]&&(t=r[e].replace(/\*/g,".*?"),"-"===t[0]?i.skips.push(new RegExp("^"+t.slice(1)+"$")):i.names.push(new RegExp("^"+t+"$")))}function a(){const t=[...i.names.map(c),...i.skips.map(c).map((t=>"-"+t))].join(",");return i.enable(""),t}function u(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=i.skips.length;e<r;e++)if(i.skips[e].test(t))return!1;for(e=0,r=i.names.length;e<r;e++)if(i.names[e].test(t))return!0;return!1}function c(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}function h(t){return t instanceof Error?t.stack||t.message:t}function l(){n.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.debug=i,i.default=i,i.coerce=h,i.disable=a,i.enable=s,i.enabled=u,i.humanize=r(47901),i.destroy=l,Object.keys(t).forEach((e=>{i[e]=t[e]})),i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}r(21703),t.exports=i},10482:function(t){"use strict";function e(t,e){e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}e.prototype.peekAt=function(t){var e=t;if(e===(0|e)){var r=this.size();if(!(e>=r||e<-r))return e<0&&(e+=r),e=this._head+e&this._capacityMask,this._list[e]}},e.prototype.get=function(t){return this.peekAt(t)},e.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},e.prototype.peekFront=function(){return this.peek()},e.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()}}),e.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},e.prototype.unshift=function(t){if(void 0===t)return this.size();var e=this._list.length;return this._head=this._head-1+e&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},e.prototype.shift=function(){var t=this._head;if(t!==this._tail){var e=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),e}},e.prototype.push=function(t){if(void 0===t)return this.size();var e=this._tail;return this._list[e]=t,this._tail=e+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},e.prototype.pop=function(){var t=this._tail;if(t!==this._head){var e=this._list.length;this._tail=t-1+e&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=e>>>2&&this._shrinkArray(),r}},e.prototype.removeOne=function(t){var e=t;if(e===(0|e)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(e>=r||e<-r)){e<0&&(e+=r),e=this._head+e&this._capacityMask;var i,o=this._list[e];if(t<r/2){for(i=t;i>0;i--)this._list[e]=this._list[e=e-1+n&this._capacityMask];this._list[e]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(i=r-1-t;i>0;i--)this._list[e]=this._list[e=e+1+n&this._capacityMask];this._list[e]=void 0,this._tail=this._tail-1+n&this._capacityMask}return o}}},e.prototype.remove=function(t,e){var r,n=t,i=e;if(n===(0|n)&&this._head!==this._tail){var o=this.size(),s=this._list.length;if(!(n>=o||n<-o||e<1)){if(n<0&&(n+=o),1===e||!e)return r=new Array(1),r[0]=this.removeOne(n),r;if(0===n&&n+e>=o)return r=this.toArray(),this.clear(),r;var a;for(n+e>o&&(e=o-n),r=new Array(e),a=0;a<e;a++)r[a]=this._list[this._head+n+a&this._capacityMask];if(n=this._head+n&this._capacityMask,t+e===o){for(this._tail=this._tail-e+s&this._capacityMask,a=e;a>0;a--)this._list[n=n+1+s&this._capacityMask]=void 0;return r}if(0===t){for(this._head=this._head+e+s&this._capacityMask,a=e-1;a>0;a--)this._list[n=n+1+s&this._capacityMask]=void 0;return r}if(n<o/2){for(this._head=this._head+t+e+s&this._capacityMask,a=t;a>0;a--)this.unshift(this._list[n=n-1+s&this._capacityMask]);n=this._head-1+s&this._capacityMask;while(i>0)this._list[n=n-1+s&this._capacityMask]=void 0,i--;t<0&&(this._tail=n)}else{for(this._tail=n,n=n+e+s&this._capacityMask,a=o-(e+t);a>0;a--)this.push(this._list[n++]);n=this._tail;while(i>0)this._list[n=n+1+s&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=s>>>2&&this._shrinkArray(),r}}},e.prototype.splice=function(t,e){var r=t;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var i,o,s,a=arguments.length,u=this._list.length,c=2;if(!n||r<n/2){for(o=new Array(r),i=0;i<r;i++)o[i]=this._list[this._head+i&this._capacityMask];0===e?(s=[],r>0&&(this._head=this._head+r+u&this._capacityMask)):(s=this.remove(r,e),this._head=this._head+r+u&this._capacityMask);while(a>c)this.unshift(arguments[--a]);for(i=r;i>0;i--)this.unshift(o[i-1])}else{o=new Array(n-(r+e));var h=o.length;for(i=0;i<h;i++)o[i]=this._list[this._head+r+e+i&this._capacityMask];0===e?(s=[],r!=n&&(this._tail=this._head+r+u&this._capacityMask)):(s=this.remove(r,e),this._tail=this._tail-h+u&this._capacityMask);while(c<a)this.push(arguments[c++]);for(i=0;i<h;i++)this.push(o[i])}return s}return this.remove(r,e)}}},e.prototype.clear=function(){this._head=0,this._tail=0},e.prototype.isEmpty=function(){return this._head===this._tail},e.prototype.toArray=function(){return this._copyArray(!1)},e.prototype._fromArray=function(t){for(var e=0;e<t.length;e++)this.push(t[e])},e.prototype._copyArray=function(t){var e,r=[],n=this._list,i=n.length;if(t||this._head>this._tail){for(e=this._head;e<i;e++)r.push(n[e]);for(e=0;e<this._tail;e++)r.push(n[e])}else for(e=this._head;e<this._tail;e++)r.push(n[e]);return r},e.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},e.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.exports=e},38899:function(t,e,r){"use strict";e.utils=r(99379),e.Cipher=r(76224),e.DES=r(27853),e.CBC=r(28507),e.EDE=r(33040)},28507:function(t,e,r){"use strict";var n=r(14961),i=r(81923),o={};function s(t){n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}function a(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var r=Object.keys(o),n=0;n<r.length;n++){var s=r[n];e.prototype[s]=o[s]}return e.create=function(t){return new e(t)},e}e.instantiate=a,o._cbcInit=function(){var t=new s(this.options.iv);this._cbcState=t},o._update=function(t,e,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,s=i.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=t[e+a];o._update.call(this,s,0,r,n);for(a=0;a<this.blockSize;a++)s[a]=r[n+a]}else{o._update.call(this,t,e,r,n);for(a=0;a<this.blockSize;a++)r[n+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=t[e+a]}}},76224:function(t,e,r){"use strict";var n=r(14961);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<r;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,r=0,n=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,r=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},i.prototype._pad=function(t,e){if(0===e)return!1;while(e<t.length)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},27853:function(t,e,r){"use strict";var n=r(14961),i=r(81923),o=r(99379),s=r(76224);function a(){this.tmp=new Array(2),this.keys=null}function u(t){s.call(this,t);var e=new a;this._desState=e,this.deriveKeys(e,t.key)}i(u,s),t.exports=u,u.create=function(t){return new u(t)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(t,e){t.keys=new Array(32),n.equal(e.length,this.blockSize,"Invalid key length");var r=o.readUInt32BE(e,0),i=o.readUInt32BE(e,4);o.pc1(r,i,t.tmp,0),r=t.tmp[0],i=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var a=c[s>>>1];r=o.r28shl(r,a),i=o.r28shl(i,a),o.pc2(r,i,t.keys,s)}},u.prototype._update=function(t,e,r,n){var i=this._desState,s=o.readUInt32BE(t,e),a=o.readUInt32BE(t,e+4);o.ip(s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,a,i.tmp,0):this._decrypt(i,s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],o.writeUInt32BE(r,s,n),o.writeUInt32BE(r,a,n+4)},u.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},u.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)n.equal(t[r],e);return t.slice(0,t.length-e)},u.prototype._encrypt=function(t,e,r,n,i){for(var s=e,a=r,u=0;u<t.keys.length;u+=2){var c=t.keys[u],h=t.keys[u+1];o.expand(a,t.tmp,0),c^=t.tmp[0],h^=t.tmp[1];var l=o.substitute(c,h),f=o.permute(l),d=a;a=(s^f)>>>0,s=d}o.rip(a,s,n,i)},u.prototype._decrypt=function(t,e,r,n,i){for(var s=r,a=e,u=t.keys.length-2;u>=0;u-=2){var c=t.keys[u],h=t.keys[u+1];o.expand(s,t.tmp,0),c^=t.tmp[0],h^=t.tmp[1];var l=o.substitute(c,h),f=o.permute(l),d=s;s=(a^f)>>>0,a=d}o.rip(s,a,n,i)}},33040:function(t,e,r){"use strict";var n=r(14961),i=r(81923),o=r(76224),s=r(27853);function a(t,e){n.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[s.create({type:"encrypt",key:r}),s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:r})]}function u(t){o.call(this,t);var e=new a(this.type,this.options.key);this._edeState=e}i(u,o),t.exports=u,u.create=function(t){return new u(t)},u.prototype._update=function(t,e,r,n){var i=this._edeState;i.ciphers[0]._update(t,e,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},u.prototype._pad=s.prototype._pad,u.prototype._unpad=s.prototype._unpad},99379:function(t,e){"use strict";e.readUInt32BE=function(t,e){var r=t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e];return r>>>0},e.writeUInt32BE=function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e},e.ip=function(t,e,r,n){for(var i=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)i<<=1,i|=e>>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=t>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1}r[n+0]=i>>>0,r[n+1]=o>>>0},e.rip=function(t,e,r,n){for(var i=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)i<<=1,i|=e>>>a+s&1,i<<=1,i|=t>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=e>>>a+s&1,o<<=1,o|=t>>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.pc1=function(t,e,r,n){for(var i=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,n,i){for(var o=0,s=0,a=r.length>>>1,u=0;u<a;u++)o<<=1,o|=t>>>r[u]&1;for(u=a;u<r.length;u++)s<<=1,s|=e>>>r[u]&1;n[i+0]=o>>>0,n[i+1]=s>>>0},e.expand=function(t,e,r){var n=0,i=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[r+0]=n>>>0,e[r+1]=i>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var r=0,i=0;i<4;i++){var o=t>>>18-6*i&63,s=n[64*i+o];r<<=4,r|=s}for(i=0;i<4;i++){o=e>>>18-6*i&63,s=n[256+64*i+o];r<<=4,r|=s}return r>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,r=0;r<i.length;r++)e<<=1,e|=t>>>i[r]&1;return e>>>0},e.padSplit=function(t,e,r){var n=t.toString(2);while(n.length<e)n="0"+n;for(var i=[],o=0;o<e;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},70116:function(t,e,r){"use strict";r(21703),e.gW=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={};for(let f=0;f<n.length;f++){const t=n.charAt(f);i[t]=f}function o(t){const e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function s(t){let e=1;for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=o(e)^n>>5}e=o(e);for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);e=o(e)^31&n}return e}function a(t,e,r,n){let i=0,o=0;const s=(1<<r)-1,a=[];for(let u=0;u<t.length;++u){i=i<<e|t[u],o+=e;while(o>=r)o-=r,a.push(i>>o&s)}if(n)o>0&&a.push(i<<r-o&s);else{if(o>=e)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function u(t){return a(t,8,5,!0)}function c(t){const e=a(t,5,8,!1);if(Array.isArray(e))return e}function h(t){const e=a(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function l(t){let e;function r(t,r,i){if(i=i||90,t.length+7+r.length>i)throw new TypeError("Exceeds length limit");t=t.toLowerCase();let a=s(t);if("string"===typeof a)throw new Error(a);let u=t+"1";for(let e=0;e<r.length;++e){const t=r[e];if(t>>5!==0)throw new Error("Non 5-bit word");a=o(a)^t,u+=n.charAt(t)}for(let e=0;e<6;++e)a=o(a);a^=e;for(let e=0;e<6;++e){const t=a>>5*(5-e)&31;u+=n.charAt(t)}return u}function a(t,r){if(r=r||90,t.length<8)return t+" too short";if(t.length>r)return"Exceeds length limit";const n=t.toLowerCase(),a=t.toUpperCase();if(t!==n&&t!==a)return"Mixed-case string "+t;t=n;const u=t.lastIndexOf("1");if(-1===u)return"No separator character for "+t;if(0===u)return"Missing prefix for "+t;const c=t.slice(0,u),h=t.slice(u+1);if(h.length<6)return"Data too short";let l=s(c);if("string"===typeof l)return l;const f=[];for(let e=0;e<h.length;++e){const t=h.charAt(e),r=i[t];if(void 0===r)return"Unknown character "+t;l=o(l)^r,e+6>=h.length||f.push(r)}return l!==e?"Invalid checksum for "+t:{prefix:c,words:f}}function l(t,e){const r=a(t,e);if("object"===typeof r)return r}function f(t,e){const r=a(t,e);if("object"===typeof r)return r;throw new Error(r)}return e="bech32"===t?1:734539939,{decodeUnsafe:l,decode:f,encode:r,toWords:u,fromWordsUnsafe:c,fromWords:h}}e.gW=l("bech32"),l("bech32m")},58150:function(t,e,r){var n=r(13374)["Buffer"],i=r(72563),o=r(29799),s=r(47850);function a(t){var e=new n(o[t].prime,"hex"),r=new n(o[t].gen,"hex");return new s(e,r)}var u={binary:!0,hex:!0,base64:!0};function c(t,e,r,o){return n.isBuffer(e)||void 0===u[e]?c(t,"binary",e,r):(e=e||"binary",o=o||"binary",r=r||new n([2]),n.isBuffer(r)||(r=new n(r,o)),"number"===typeof t?new s(i(t,r),r,!0):(n.isBuffer(t)||(t=new n(t,e)),new s(t,r,!0)))}e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=a,e.createDiffieHellman=e.DiffieHellman=c},47850:function(t,e,r){var n=r(13374)["Buffer"],i=r(58178),o=r(68529),s=new o,a=new i(24),u=new i(11),c=new i(10),h=new i(3),l=new i(7),f=r(72563),d=r(67602);function p(t,e){return e=e||"utf8",n.isBuffer(t)||(t=new n(t,e)),this._pub=new i(t),this}function y(t,e){return e=e||"utf8",n.isBuffer(t)||(t=new n(t,e)),this._priv=new i(t),this}t.exports=b;var g={};function m(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in g)return g[n];var i,o=0;if(t.isEven()||!f.simpleSieve||!f.fermatTest(t)||!s.test(t))return o+=1,o+="02"===r||"05"===r?8:4,g[n]=o,o;switch(s.test(t.shrn(1))||(o+=2),r){case"02":t.mod(a).cmp(u)&&(o+=8);break;case"05":i=t.mod(c),i.cmp(h)&&i.cmp(l)&&(o+=8);break;default:o+=4}return g[n]=o,o}function b(t,e,r){this.setGenerator(e),this.__prime=new i(t),this._prime=i.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=p,this.setPrivateKey=y):this._primeCode=8}function w(t,e){var r=new n(t.toArray());return e?r.toString(e):r}Object.defineProperty(b.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!==typeof this._primeCode&&(this._primeCode=m(this.__prime,this.__gen)),this._primeCode}}),b.prototype.generateKeys=function(){return this._priv||(this._priv=new i(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},b.prototype.computeSecret=function(t){t=new i(t),t=t.toRed(this._prime);var e=t.redPow(this._priv).fromRed(),r=new n(e.toArray()),o=this.getPrime();if(r.length<o.length){var s=new n(o.length-r.length);s.fill(0),r=n.concat([s,r])}return r},b.prototype.getPublicKey=function(t){return w(this._pub,t)},b.prototype.getPrivateKey=function(t){return w(this._priv,t)},b.prototype.getPrime=function(t){return w(this.__prime,t)},b.prototype.getGenerator=function(t){return w(this._gen,t)},b.prototype.setGenerator=function(t,e){return e=e||"utf8",n.isBuffer(t)||(t=new n(t,e)),this.__gen=t,this._gen=new i(t),this}},72563:function(t,e,r){var n=r(67602);t.exports=w,w.simpleSieve=m,w.fermatTest=b;var i=r(58178),o=new i(24),s=r(68529),a=new s,u=new i(1),c=new i(2),h=new i(5),l=(new i(16),new i(8),new i(10)),f=new i(3),d=(new i(7),new i(11)),p=new i(4),y=(new i(12),null);function g(){if(null!==y)return y;var t=1048576,e=[];e[0]=2;for(var r=1,n=3;n<t;n+=2){for(var i=Math.ceil(Math.sqrt(n)),o=0;o<r&&e[o]<=i;o++)if(n%e[o]===0)break;r!==o&&e[o]<=i||(e[r++]=n)}return y=e,e}function m(t){for(var e=g(),r=0;r<e.length;r++)if(0===t.modn(e[r]))return 0===t.cmpn(e[r]);return!0}function b(t){var e=i.mont(t);return 0===c.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function w(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var r,s;e=new i(e);while(1){r=new i(n(Math.ceil(t/8)));while(r.bitLength()>t)r.ishrn(1);if(r.isEven()&&r.iadd(u),r.testn(1)||r.iadd(c),e.cmp(c)){if(!e.cmp(h))while(r.mod(l).cmp(f))r.iadd(p)}else while(r.mod(o).cmp(d))r.iadd(p);if(s=r.shrn(1),m(s)&&m(r)&&b(s)&&b(r)&&a.test(s)&&a.test(r))return r}}},58178:function(t,e,r){t=r.nmd(t),r(21703),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(7748).Buffer}catch(R){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function c(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8}this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,h=r;h<a;h+=n)u=c(t,h,h+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype.strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;i=0|t.words[p],o=0|e.words[d],s=i*o+l,h+=s/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,r=0!==o||s!==this.length-1?h[6-u.length]+u+r:u+r,i+=2,i>=26&&(i-=26,s--)}0!==o&&(r=o.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],d=f[t];r="";var p=this.clone();p.negative=0;while(!p.isZero()){var y=p.modn(d).toString(t);p=p.idivn(d),r=p.isZero()?y+r:h[c-y.length]+y+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)e=(0|r.words[s])-(0|n.words[s])+o,o=e>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)e=(0|r.words[s])+o,o=e>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,y=d>>>13,g=0|s[2],m=8191&g,b=g>>>13,w=0|s[3],v=8191&w,_=w>>>13,E=0|s[4],S=8191&E,A=E>>>13,I=0|s[5],T=8191&I,R=I>>>13,M=0|s[6],k=8191&M,C=M>>>13,O=0|s[7],P=8191&O,B=O>>>13,x=0|s[8],N=8191&x,D=x>>>13,L=0|s[9],U=8191&L,j=L>>>13,F=0|a[0],K=8191&F,$=F>>>13,q=0|a[1],H=8191&q,z=q>>>13,V=0|a[2],G=8191&V,W=V>>>13,Y=0|a[3],J=8191&Y,Z=Y>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(l,K),i=Math.imul(l,$),i=i+Math.imul(f,K)|0,o=Math.imul(f,$);var gt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,K),i=Math.imul(p,$),i=i+Math.imul(y,K)|0,o=Math.imul(y,$),n=n+Math.imul(l,H)|0,i=i+Math.imul(l,z)|0,i=i+Math.imul(f,H)|0,o=o+Math.imul(f,z)|0;var mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,K),i=Math.imul(m,$),i=i+Math.imul(b,K)|0,o=Math.imul(b,$),n=n+Math.imul(p,H)|0,i=i+Math.imul(p,z)|0,i=i+Math.imul(y,H)|0,o=o+Math.imul(y,z)|0,n=n+Math.imul(l,G)|0,i=i+Math.imul(l,W)|0,i=i+Math.imul(f,G)|0,o=o+Math.imul(f,W)|0;var bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(v,K),i=Math.imul(v,$),i=i+Math.imul(_,K)|0,o=Math.imul(_,$),n=n+Math.imul(m,H)|0,i=i+Math.imul(m,z)|0,i=i+Math.imul(b,H)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(y,G)|0,o=o+Math.imul(y,W)|0,n=n+Math.imul(l,J)|0,i=i+Math.imul(l,Z)|0,i=i+Math.imul(f,J)|0,o=o+Math.imul(f,Z)|0;var wt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(S,K),i=Math.imul(S,$),i=i+Math.imul(A,K)|0,o=Math.imul(A,$),n=n+Math.imul(v,H)|0,i=i+Math.imul(v,z)|0,i=i+Math.imul(_,H)|0,o=o+Math.imul(_,z)|0,n=n+Math.imul(m,G)|0,i=i+Math.imul(m,W)|0,i=i+Math.imul(b,G)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(l,Q)|0,i=i+Math.imul(l,tt)|0,i=i+Math.imul(f,Q)|0,o=o+Math.imul(f,tt)|0;var vt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(T,K),i=Math.imul(T,$),i=i+Math.imul(R,K)|0,o=Math.imul(R,$),n=n+Math.imul(S,H)|0,i=i+Math.imul(S,z)|0,i=i+Math.imul(A,H)|0,o=o+Math.imul(A,z)|0,n=n+Math.imul(v,G)|0,i=i+Math.imul(v,W)|0,i=i+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,Z)|0,i=i+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,tt)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,n=n+Math.imul(l,rt)|0,i=i+Math.imul(l,nt)|0,i=i+Math.imul(f,rt)|0,o=o+Math.imul(f,nt)|0;var _t=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,K),i=Math.imul(k,$),i=i+Math.imul(C,K)|0,o=Math.imul(C,$),n=n+Math.imul(T,H)|0,i=i+Math.imul(T,z)|0,i=i+Math.imul(R,H)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(S,G)|0,i=i+Math.imul(S,W)|0,i=i+Math.imul(A,G)|0,o=o+Math.imul(A,W)|0,n=n+Math.imul(v,J)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(m,Q)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=i+Math.imul(p,nt)|0,i=i+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0,n=n+Math.imul(l,ot)|0,i=i+Math.imul(l,st)|0,i=i+Math.imul(f,ot)|0,o=o+Math.imul(f,st)|0;var Et=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(P,K),i=Math.imul(P,$),i=i+Math.imul(B,K)|0,o=Math.imul(B,$),n=n+Math.imul(k,H)|0,i=i+Math.imul(k,z)|0,i=i+Math.imul(C,H)|0,o=o+Math.imul(C,z)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,W)|0,i=i+Math.imul(R,G)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(S,J)|0,i=i+Math.imul(S,Z)|0,i=i+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(v,tt)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=i+Math.imul(p,st)|0,i=i+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,n=n+Math.imul(l,ut)|0,i=i+Math.imul(l,ct)|0,i=i+Math.imul(f,ut)|0,o=o+Math.imul(f,ct)|0;var St=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,K),i=Math.imul(N,$),i=i+Math.imul(D,K)|0,o=Math.imul(D,$),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,z)|0,i=i+Math.imul(B,H)|0,o=o+Math.imul(B,z)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,W)|0,i=i+Math.imul(C,G)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(T,J)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(S,Q)|0,i=i+Math.imul(S,tt)|0,i=i+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(v,rt)|0,i=i+Math.imul(v,nt)|0,i=i+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=i+Math.imul(m,st)|0,i=i+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ut)|0,i=i+Math.imul(p,ct)|0,i=i+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,n=n+Math.imul(l,lt)|0,i=i+Math.imul(l,ft)|0,i=i+Math.imul(f,lt)|0,o=o+Math.imul(f,ft)|0;var At=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,K),i=Math.imul(U,$),i=i+Math.imul(j,K)|0,o=Math.imul(j,$),n=n+Math.imul(N,H)|0,i=i+Math.imul(N,z)|0,i=i+Math.imul(D,H)|0,o=o+Math.imul(D,z)|0,n=n+Math.imul(P,G)|0,i=i+Math.imul(P,W)|0,i=i+Math.imul(B,G)|0,o=o+Math.imul(B,W)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,Z)|0,i=i+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(T,Q)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,i=i+Math.imul(S,nt)|0,i=i+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(v,ot)|0,i=i+Math.imul(v,st)|0,i=i+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(m,ut)|0,i=i+Math.imul(m,ct)|0,i=i+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,lt)|0,i=i+Math.imul(p,ft)|0,i=i+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0,n=n+Math.imul(l,pt)|0,i=i+Math.imul(l,yt)|0,i=i+Math.imul(f,pt)|0,o=o+Math.imul(f,yt)|0;var It=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,H),i=Math.imul(U,z),i=i+Math.imul(j,H)|0,o=Math.imul(j,z),n=n+Math.imul(N,G)|0,i=i+Math.imul(N,W)|0,i=i+Math.imul(D,G)|0,o=o+Math.imul(D,W)|0,n=n+Math.imul(P,J)|0,i=i+Math.imul(P,Z)|0,i=i+Math.imul(B,J)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(k,Q)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(S,ot)|0,i=i+Math.imul(S,st)|0,i=i+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(v,ut)|0,i=i+Math.imul(v,ct)|0,i=i+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(m,lt)|0,i=i+Math.imul(m,ft)|0,i=i+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0,n=n+Math.imul(p,pt)|0,i=i+Math.imul(p,yt)|0,i=i+Math.imul(y,pt)|0,o=o+Math.imul(y,yt)|0;var Tt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,G),i=Math.imul(U,W),i=i+Math.imul(j,G)|0,o=Math.imul(j,W),n=n+Math.imul(N,J)|0,i=i+Math.imul(N,Z)|0,i=i+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(P,Q)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=i+Math.imul(T,st)|0,i=i+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(S,ut)|0,i=i+Math.imul(S,ct)|0,i=i+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,n=n+Math.imul(v,lt)|0,i=i+Math.imul(v,ft)|0,i=i+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0,n=n+Math.imul(m,pt)|0,i=i+Math.imul(m,yt)|0,i=i+Math.imul(b,pt)|0,o=o+Math.imul(b,yt)|0;var Rt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,J),i=Math.imul(U,Z),i=i+Math.imul(j,J)|0,o=Math.imul(j,Z),n=n+Math.imul(N,Q)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(B,rt)|0,o=o+Math.imul(B,nt)|0,n=n+Math.imul(k,ot)|0,i=i+Math.imul(k,st)|0,i=i+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,n=n+Math.imul(T,ut)|0,i=i+Math.imul(T,ct)|0,i=i+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(S,lt)|0,i=i+Math.imul(S,ft)|0,i=i+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0,n=n+Math.imul(v,pt)|0,i=i+Math.imul(v,yt)|0,i=i+Math.imul(_,pt)|0,o=o+Math.imul(_,yt)|0;var Mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,Q),i=Math.imul(U,tt),i=i+Math.imul(j,Q)|0,o=Math.imul(j,tt),n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(P,ot)|0,i=i+Math.imul(P,st)|0,i=i+Math.imul(B,ot)|0,o=o+Math.imul(B,st)|0,n=n+Math.imul(k,ut)|0,i=i+Math.imul(k,ct)|0,i=i+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(T,lt)|0,i=i+Math.imul(T,ft)|0,i=i+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0,n=n+Math.imul(S,pt)|0,i=i+Math.imul(S,yt)|0,i=i+Math.imul(A,pt)|0,o=o+Math.imul(A,yt)|0;var kt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(N,ot)|0,i=i+Math.imul(N,st)|0,i=i+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,n=n+Math.imul(P,ut)|0,i=i+Math.imul(P,ct)|0,i=i+Math.imul(B,ut)|0,o=o+Math.imul(B,ct)|0,n=n+Math.imul(k,lt)|0,i=i+Math.imul(k,ft)|0,i=i+Math.imul(C,lt)|0,o=o+Math.imul(C,ft)|0,n=n+Math.imul(T,pt)|0,i=i+Math.imul(T,yt)|0,i=i+Math.imul(R,pt)|0,o=o+Math.imul(R,yt)|0;var Ct=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,ot),i=Math.imul(U,st),i=i+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(N,ut)|0,i=i+Math.imul(N,ct)|0,i=i+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,n=n+Math.imul(P,lt)|0,i=i+Math.imul(P,ft)|0,i=i+Math.imul(B,lt)|0,o=o+Math.imul(B,ft)|0,n=n+Math.imul(k,pt)|0,i=i+Math.imul(k,yt)|0,i=i+Math.imul(C,pt)|0,o=o+Math.imul(C,yt)|0;var Ot=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ut),i=Math.imul(U,ct),i=i+Math.imul(j,ut)|0,o=Math.imul(j,ct),n=n+Math.imul(N,lt)|0,i=i+Math.imul(N,ft)|0,i=i+Math.imul(D,lt)|0,o=o+Math.imul(D,ft)|0,n=n+Math.imul(P,pt)|0,i=i+Math.imul(P,yt)|0,i=i+Math.imul(B,pt)|0,o=o+Math.imul(B,yt)|0;var Pt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=Math.imul(U,ft),i=i+Math.imul(j,lt)|0,o=Math.imul(j,ft),n=n+Math.imul(N,pt)|0,i=i+Math.imul(N,yt)|0,i=i+Math.imul(D,pt)|0,o=o+Math.imul(D,yt)|0;var Bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,pt),i=Math.imul(U,yt),i=i+Math.imul(j,pt)|0,o=Math.imul(j,yt);var xt=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,u[0]=gt,u[1]=mt,u[2]=bt,u[3]=wt,u[4]=vt,u[5]=_t,u[6]=Et,u[7]=St,u[8]=At,u[9]=It,u[10]=Tt,u[11]=Rt,u[12]=Mt,u[13]=kt,u[14]=Ct,u[15]=Ot,u[16]=Pt,u[17]=Bt,u[18]=xt,0!==c&&(u[19]=c,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=0|t.words[h],f=0|e.words[c],d=l*f,p=67108863&d;s=s+(d/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,i+=s>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function m(t,e,r){var n=new b;return n.mulp(t,e,r)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=p),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?y(this,t,e):n<63?p(this,t,e):n<1024?g(this,t,e):m(this,t,e),r},b.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},b.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},b.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=r[h+d],y=n[h+d],g=r[h+d+s],m=n[h+d+s],b=l*g-f*m;m=l*m+f*g,g=b,r[h+d]=p+g,n[h+d]=y+m,r[h+d+s]=p-g,n[h+d+s]=y-m,d!==a&&(b=u*l-c*f,f=u*f+c*l,l=b)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},b.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=d(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+a,a=o>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)o=-(0|this.words[i])+a,a=o>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,s=0|i.words[i.length-1],a=this._countBits(s);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,u&&(u.words[c]=1));for(var f=c-1;f>=0;f--){var d=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);d=Math.min(d/s|0,67108863),n._ishlnsubmul(i,d,f);while(0!==n.negative)d--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=d)}return u&&u.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++c;var h=r.clone(),l=e.clone();while(!e.isZero()){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0){e.iushrn(f);while(f-- >0)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1)}for(var p=0,y=1;0===(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,s=new o(1),a=new o(0),u=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0){e.iushrn(c);while(c-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0){r.iushrn(l);while(l-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return i=0===e.cmpn(1)?s:a,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new I(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,v),i(S,v),i(A,v),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return w[t]=e,e},I.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),s=0;while(!i.isZero()&&0===i.andln(1))s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();h=new o(2*h*h).toRed(this);while(0!==this.pow(h,c).cmp(u))h.redIAdd(u);var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;while(0!==d.cmp(a)){for(var y=d,g=0;0!==y.cmp(a);g++)y=y.redSqr();n(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=g}return f},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var s=n[0],a=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=c-1;l>=0;l--){var f=h>>l&1;s!==n[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,u++,(u===r||0===i&&0===l)&&(s=this.mul(s,n[a]),u=0,a=0)):u=0}c=26}return s},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,I),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)},15859:function(t,e,r){"use strict";r(21703);const n=r(15652),i=n("dns-over-http-resolver");i.error=n("dns-over-http-resolver:error");const o=r(43061),s=r(70219);class a{constructor({maxCache:t=100}={}){this._cache=new o({max:t}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"]}getServers(){return this._servers}_getShuffledServers(){const t=[].concat(this._servers);for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*e),n=t[e];t[e]=t[r],t[r]=n}return t}setServers(t){this._servers=t}resolve(t,e="A"){switch(e){case"A":return this.resolve4(t);case"AAAA":return this.resolve6(t);case"TXT":return this.resolveTxt(t);default:throw new Error(`${e} is not supported`)}}async resolve4(t){const e="A",r=this._cache.get(s.getCacheKey(t,e));if(r)return r;for(const o of this._getShuffledServers())try{const r=await s.fetch(s.buildResource({serverResolver:o,hostname:t,recordType:e})),n=await r.json(),i=n.Answer.map((t=>t.data)),a=Math.min(n.Answer.map((t=>t.TTL)));return this._cache.set(s.getCacheKey(t,e),i,{ttl:a}),i}catch(n){i.error(`${o} could not resolve ${t} record ${e}`)}throw new Error(`Could not resolve ${t} record ${e}`)}async resolve6(t){const e="AAAA",r=this._cache.get(s.getCacheKey(t,e));if(r)return r;for(const o of this._getShuffledServers())try{const r=await s.fetch(s.buildResource({serverResolver:o,hostname:t,recordType:e})),n=await r.json(),i=n.Answer.map((t=>t.data)),a=Math.min(n.Answer.map((t=>t.TTL)));return this._cache.set(s.getCacheKey(t,e),i,{ttl:a}),i}catch(n){i.error(`${o} could not resolve ${t} record ${e}`)}throw new Error(`Could not resolve ${t} record ${e}`)}async resolveTxt(t){const e="TXT",r=this._cache.get(s.getCacheKey(t,e));if(r)return r;for(const o of this._getShuffledServers())try{const r=await s.fetch(s.buildResource({serverResolver:o,hostname:t,recordType:e})),n=await r.json(),i=n.Answer.map((t=>[t.data.replace(/['"]+/g,"")])),a=Math.min(n.Answer.map((t=>t.TTL)));return this._cache.set(s.getCacheKey(t,e),i,{ttl:a}),i}catch(n){i.error(`${o} could not resolve ${t} record ${e}`)}throw new Error(`Could not resolve ${t} record ${e}`)}}a.Resolver=a,t.exports=a},70219:function(t,e,r){"use strict";const{default:n,Headers:i}=r(67966);function o({serverResolver:t,hostname:e,recordType:r}){return`${t}?name=${e}&type=${r}`}function s(t){return n(t,{headers:new i({accept:"application/dns-json"})})}function a(t,e){return`${e}_${t}`}t.exports={buildResource:o,fetch:s,getCacheKey:a}},62778:function(t,e){"use strict";e.toString=function(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t},e.toClass=function(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}},79185:function(t,e,r){"use strict";r(21703),r(92087);const n=r(15361).Buffer,i=r(96253),o=r(73574),s=r(62574),a=r(62778),u=r(38548),c=r(69526),h=0,l=32768,f=32768,d=~f,p=32768,y=~p,g=e.name={};g.encode=function(t,e,r){e||(e=n.alloc(g.encodingLength(t))),r||(r=0);const i=r,o=t.replace(/^\.|\.$/gm,"");if(o.length){const t=o.split(".");for(let n=0;n<t.length;n++){const i=e.write(t[n],r+1);e[r]=i,r+=i+1}}return e[r++]=0,g.encode.bytes=r-i,e},g.encode.bytes=0,g.decode=function(t,e){e||(e=0);const r=[];let n=e,i=0,o=0,s=!1;while(1){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");const a=t[e++];if(o+=s?0:1,0===a)break;if(0===(192&a)){if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(i+=a+1,i>254)throw new Error("Cannot decode name (name too long)");r.push(t.toString("utf-8",e,e+a)),e+=a,o+=s?0:a}else{if(192!==(192&a))throw new Error("Cannot decode name (bad label)");{if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");const r=t.readUInt16BE(e-1)-49152;if(r>=n)throw new Error("Cannot decode name (bad pointer)");e=r,n=r,o+=s?0:1,s=!0}}}return g.decode.bytes=o,0===r.length?".":r.join(".")},g.decode.bytes=0,g.encodingLength=function(t){return"."===t||".."===t?1:n.byteLength(t.replace(/^\.|\.$/gm,""))+2};const m={encode:function(t,e,r){e||(e=n.alloc(m.encodingLength(t))),r||(r=0);const i=e.write(t,r+1);return e[r]=i,m.encode.bytes=i+1,e}};m.encode.bytes=0,m.decode=function(t,e){e||(e=0);const r=t[e],n=t.toString("utf-8",e+1,e+1+r);return m.decode.bytes=r+1,n},m.decode.bytes=0,m.encodingLength=function(t){return n.byteLength(t)+1};const b={encode:function(t,e,r){e||(e=b.encodingLength(t)),r||(r=0);const n=32767&(t.flags||0),i="response"===t.type?l:h;return e.writeUInt16BE(t.id||0,r),e.writeUInt16BE(n|i,r+2),e.writeUInt16BE(t.questions.length,r+4),e.writeUInt16BE(t.answers.length,r+6),e.writeUInt16BE(t.authorities.length,r+8),e.writeUInt16BE(t.additionals.length,r+10),e}};b.encode.bytes=12,b.decode=function(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");const r=t.readUInt16BE(e+2);return{id:t.readUInt16BE(e),type:r&l?"response":"query",flags:32767&r,flag_qr:1===(r>>15&1),opcode:s.toString(r>>11&15),flag_aa:1===(r>>10&1),flag_tc:1===(r>>9&1),flag_rd:1===(r>>8&1),flag_ra:1===(r>>7&1),flag_z:1===(r>>6&1),flag_ad:1===(r>>5&1),flag_cd:1===(r>>4&1),rcode:o.toString(15&r),questions:new Array(t.readUInt16BE(e+4)),answers:new Array(t.readUInt16BE(e+6)),authorities:new Array(t.readUInt16BE(e+8)),additionals:new Array(t.readUInt16BE(e+10))}},b.decode.bytes=12,b.encodingLength=function(){return 12};const w=e.unknown={};w.encode=function(t,e,r){return e||(e=n.alloc(w.encodingLength(t))),r||(r=0),e.writeUInt16BE(t.length,r),t.copy(e,r+2),w.encode.bytes=t.length+2,e},w.encode.bytes=0,w.decode=function(t,e){e||(e=0);const r=t.readUInt16BE(e),n=t.slice(e+2,e+2+r);return w.decode.bytes=r+2,n},w.decode.bytes=0,w.encodingLength=function(t){return t.length+2};const v=e.ns={};v.encode=function(t,e,r){return e||(e=n.alloc(v.encodingLength(t))),r||(r=0),g.encode(t,e,r+2),e.writeUInt16BE(g.encode.bytes,r),v.encode.bytes=g.encode.bytes+2,e},v.encode.bytes=0,v.decode=function(t,e){e||(e=0);const r=t.readUInt16BE(e),n=g.decode(t,e+2);return v.decode.bytes=r+2,n},v.decode.bytes=0,v.encodingLength=function(t){return g.encodingLength(t)+2};const _=e.soa={};_.encode=function(t,e,r){e||(e=n.alloc(_.encodingLength(t))),r||(r=0);const i=r;return r+=2,g.encode(t.mname,e,r),r+=g.encode.bytes,g.encode(t.rname,e,r),r+=g.encode.bytes,e.writeUInt32BE(t.serial||0,r),r+=4,e.writeUInt32BE(t.refresh||0,r),r+=4,e.writeUInt32BE(t.retry||0,r),r+=4,e.writeUInt32BE(t.expire||0,r),r+=4,e.writeUInt32BE(t.minimum||0,r),r+=4,e.writeUInt16BE(r-i-2,i),_.encode.bytes=r-i,e},_.encode.bytes=0,_.decode=function(t,e){e||(e=0);const r=e,n={};return e+=2,n.mname=g.decode(t,e),e+=g.decode.bytes,n.rname=g.decode(t,e),e+=g.decode.bytes,n.serial=t.readUInt32BE(e),e+=4,n.refresh=t.readUInt32BE(e),e+=4,n.retry=t.readUInt32BE(e),e+=4,n.expire=t.readUInt32BE(e),e+=4,n.minimum=t.readUInt32BE(e),e+=4,_.decode.bytes=e-r,n},_.decode.bytes=0,_.encodingLength=function(t){return 22+g.encodingLength(t.mname)+g.encodingLength(t.rname)};const E=e.txt={};E.encode=function(t,e,r){Array.isArray(t)||(t=[t]);for(let o=0;o<t.length;o++)if("string"===typeof t[o]&&(t[o]=n.from(t[o])),!n.isBuffer(t[o]))throw new Error("Must be a Buffer");e||(e=n.alloc(E.encodingLength(t))),r||(r=0);const i=r;return r+=2,t.forEach((function(t){e[r++]=t.length,t.copy(e,r,0,t.length),r+=t.length})),e.writeUInt16BE(r-i-2,i),E.encode.bytes=r-i,e},E.encode.bytes=0,E.decode=function(t,e){e||(e=0);const r=e;let n=t.readUInt16BE(e);e+=2;let i=[];while(n>0){const r=t[e++];if(--n,n<r)throw new Error("Buffer overflow");i.push(t.slice(e,e+r)),e+=r,n-=r}return E.decode.bytes=e-r,i},E.decode.bytes=0,E.encodingLength=function(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach((function(t){e+="string"===typeof t?n.byteLength(t)+1:t.length+1})),e};const S=e["null"]={};S.encode=function(t,e,r){e||(e=n.alloc(S.encodingLength(t))),r||(r=0),"string"===typeof t&&(t=n.from(t)),t||(t=n.alloc(0));const i=r;r+=2;const o=t.length;return t.copy(e,r,0,o),r+=o,e.writeUInt16BE(r-i-2,i),S.encode.bytes=r-i,e},S.encode.bytes=0,S.decode=function(t,e){e||(e=0);const r=e,n=t.readUInt16BE(e);e+=2;const i=t.slice(e,e+n);return e+=n,S.decode.bytes=e-r,i},S.decode.bytes=0,S.encodingLength=function(t){return t?(n.isBuffer(t)?t.length:n.byteLength(t))+2:2};const A=e.hinfo={};A.encode=function(t,e,r){e||(e=n.alloc(A.encodingLength(t))),r||(r=0);const i=r;return r+=2,m.encode(t.cpu,e,r),r+=m.encode.bytes,m.encode(t.os,e,r),r+=m.encode.bytes,e.writeUInt16BE(r-i-2,i),A.encode.bytes=r-i,e},A.encode.bytes=0,A.decode=function(t,e){e||(e=0);const r=e,n={};return e+=2,n.cpu=m.decode(t,e),e+=m.decode.bytes,n.os=m.decode(t,e),e+=m.decode.bytes,A.decode.bytes=e-r,n},A.decode.bytes=0,A.encodingLength=function(t){return m.encodingLength(t.cpu)+m.encodingLength(t.os)+2};const I=e.ptr={},T=e.cname=I,R=e.dname=I;I.encode=function(t,e,r){return e||(e=n.alloc(I.encodingLength(t))),r||(r=0),g.encode(t,e,r+2),e.writeUInt16BE(g.encode.bytes,r),I.encode.bytes=g.encode.bytes+2,e},I.encode.bytes=0,I.decode=function(t,e){e||(e=0);const r=g.decode(t,e+2);return I.decode.bytes=g.decode.bytes+2,r},I.decode.bytes=0,I.encodingLength=function(t){return g.encodingLength(t)+2};const M=e.srv={};M.encode=function(t,e,r){e||(e=n.alloc(M.encodingLength(t))),r||(r=0),e.writeUInt16BE(t.priority||0,r+2),e.writeUInt16BE(t.weight||0,r+4),e.writeUInt16BE(t.port||0,r+6),g.encode(t.target,e,r+8);const i=g.encode.bytes+6;return e.writeUInt16BE(i,r),M.encode.bytes=i+2,e},M.encode.bytes=0,M.decode=function(t,e){e||(e=0);const r=t.readUInt16BE(e),n={};return n.priority=t.readUInt16BE(e+2),n.weight=t.readUInt16BE(e+4),n.port=t.readUInt16BE(e+6),n.target=g.decode(t,e+8),M.decode.bytes=r+2,n},M.decode.bytes=0,M.encodingLength=function(t){return 8+g.encodingLength(t.target)};const k=e.caa={};k.ISSUER_CRITICAL=128,k.encode=function(t,e,r){const i=k.encodingLength(t);return e||(e=n.alloc(k.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=k.ISSUER_CRITICAL),e.writeUInt16BE(i-2,r),r+=2,e.writeUInt8(t.flags||0,r),r+=1,m.encode(t.tag,e,r),r+=m.encode.bytes,e.write(t.value,r),r+=n.byteLength(t.value),k.encode.bytes=i,e},k.encode.bytes=0,k.decode=function(t,e){e||(e=0);const r=t.readUInt16BE(e);e+=2;const n=e,i={};return i.flags=t.readUInt8(e),e+=1,i.tag=m.decode(t,e),e+=m.decode.bytes,i.value=t.toString("utf-8",e,n+r),i.issuerCritical=!!(i.flags&k.ISSUER_CRITICAL),k.decode.bytes=r+2,i},k.decode.bytes=0,k.encodingLength=function(t){return m.encodingLength(t.tag)+m.encodingLength(t.value)+2};const C=e.mx={};C.encode=function(t,e,r){e||(e=n.alloc(C.encodingLength(t))),r||(r=0);const i=r;return r+=2,e.writeUInt16BE(t.preference||0,r),r+=2,g.encode(t.exchange,e,r),r+=g.encode.bytes,e.writeUInt16BE(r-i-2,i),C.encode.bytes=r-i,e},C.encode.bytes=0,C.decode=function(t,e){e||(e=0);const r=e,n={};return e+=2,n.preference=t.readUInt16BE(e),e+=2,n.exchange=g.decode(t,e),e+=g.decode.bytes,C.decode.bytes=e-r,n},C.encodingLength=function(t){return 4+g.encodingLength(t.exchange)};const O=e.a={};O.encode=function(t,e,r){return e||(e=n.alloc(O.encodingLength(t))),r||(r=0),e.writeUInt16BE(4,r),r+=2,c.v4.encode(t,e,r),O.encode.bytes=6,e},O.encode.bytes=0,O.decode=function(t,e){e||(e=0),e+=2;const r=c.v4.decode(t,e);return O.decode.bytes=6,r},O.decode.bytes=0,O.encodingLength=function(){return 6};const P=e.aaaa={};P.encode=function(t,e,r){return e||(e=n.alloc(P.encodingLength(t))),r||(r=0),e.writeUInt16BE(16,r),r+=2,c.v6.encode(t,e,r),P.encode.bytes=18,e},P.encode.bytes=0,P.decode=function(t,e){e||(e=0),e+=2;const r=c.v6.decode(t,e);return P.decode.bytes=18,r},P.decode.bytes=0,P.encodingLength=function(){return 18};const B=e.option={};B.encode=function(t,e,r){e||(e=n.alloc(B.encodingLength(t))),r||(r=0);const i=r,o=u.toCode(t.code);if(e.writeUInt16BE(o,r),r+=2,t.data)e.writeUInt16BE(t.data.length,r),r+=2,t.data.copy(e,r),r+=t.data.length;else switch(o){case 8:const i=t.sourcePrefixLength||0,o=t.family||c.familyOf(t.ip),s=c.encode(t.ip,n.alloc),a=Math.ceil(i/8);e.writeUInt16BE(a+4,r),r+=2,e.writeUInt16BE(o,r),r+=2,e.writeUInt8(i,r++),e.writeUInt8(t.scopePrefixLength||0,r++),s.copy(e,r,0,a),r+=a;break;case 11:t.timeout?(e.writeUInt16BE(2,r),r+=2,e.writeUInt16BE(t.timeout,r),r+=2):(e.writeUInt16BE(0,r),r+=2);break;case 12:const u=t.length||0;e.writeUInt16BE(u,r),r+=2,e.fill(0,r,r+u),r+=u;break;case 14:const h=2*t.tags.length;e.writeUInt16BE(h,r),r+=2;for(const n of t.tags)e.writeUInt16BE(n,r),r+=2;break;default:throw new Error(`Unknown roption code: ${t.code}`)}return B.encode.bytes=r-i,e},B.encode.bytes=0,B.decode=function(t,e){e||(e=0);const r={};r.code=t.readUInt16BE(e),r.type=u.toString(r.code),e+=2;const i=t.readUInt16BE(e);switch(e+=2,r.data=t.slice(e,e+i),r.code){case 8:r.family=t.readUInt16BE(e),e+=2,r.sourcePrefixLength=t.readUInt8(e++),r.scopePrefixLength=t.readUInt8(e++);const o=n.alloc(1===r.family?4:16);t.copy(o,0,e,e+i-4),r.ip=c.decode(o);break;case 11:i>0&&(r.timeout=t.readUInt16BE(e),e+=2);break;case 14:r.tags=[];for(let n=0;n<i;n+=2)r.tags.push(t.readUInt16BE(e)),e+=2}return B.decode.bytes=i+4,r},B.decode.bytes=0,B.encodingLength=function(t){if(t.data)return t.data.length+4;const e=u.toCode(t.code);switch(e){case 8:const e=t.sourcePrefixLength||0;return Math.ceil(e/8)+8;case 11:return"number"===typeof t.timeout?6:4;case 12:return t.length+4;case 14:return 4+2*t.tags.length}throw new Error(`Unknown roption code: ${t.code}`)};const x=e.opt={};x.encode=function(t,e,r){e||(e=n.alloc(x.encodingLength(t))),r||(r=0);const i=r,o=V(t,B);return e.writeUInt16BE(o,r),r=G(t,B,e,r+2),x.encode.bytes=r-i,e},x.encode.bytes=0,x.decode=function(t,e){e||(e=0);const r=e,n=[];let i=t.readUInt16BE(e);e+=2;let o=0;while(i>0)n[o++]=B.decode(t,e),e+=B.decode.bytes,i-=B.decode.bytes;return x.decode.bytes=e-r,n},x.decode.bytes=0,x.encodingLength=function(t){return 2+V(t||[],B)};const N=e.dnskey={};N.PROTOCOL_DNSSEC=3,N.ZONE_KEY=128,N.SECURE_ENTRYPOINT=32768,N.encode=function(t,e,r){e||(e=n.alloc(N.encodingLength(t))),r||(r=0);const i=r,o=t.key;if(!n.isBuffer(o))throw new Error("Key must be a Buffer");return r+=2,e.writeUInt16BE(t.flags,r),r+=2,e.writeUInt8(N.PROTOCOL_DNSSEC,r),r+=1,e.writeUInt8(t.algorithm,r),r+=1,o.copy(e,r,0,o.length),r+=o.length,N.encode.bytes=r-i,e.writeUInt16BE(N.encode.bytes-2,i),e},N.encode.bytes=0,N.decode=function(t,e){e||(e=0);const r=e;var n={},i=t.readUInt16BE(e);if(e+=2,n.flags=t.readUInt16BE(e),e+=2,t.readUInt8(e)!==N.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t.readUInt8(e),e+=1,n.key=t.slice(e,r+i+2),e+=n.key.length,N.decode.bytes=e-r,n},N.decode.bytes=0,N.encodingLength=function(t){return 6+n.byteLength(t.key)};const D=e.rrsig={};D.encode=function(t,e,r){e||(e=n.alloc(D.encodingLength(t))),r||(r=0);const o=r,s=t.signature;if(!n.isBuffer(s))throw new Error("Signature must be a Buffer");return r+=2,e.writeUInt16BE(i.toType(t.typeCovered),r),r+=2,e.writeUInt8(t.algorithm,r),r+=1,e.writeUInt8(t.labels,r),r+=1,e.writeUInt32BE(t.originalTTL,r),r+=4,e.writeUInt32BE(t.expiration,r),r+=4,e.writeUInt32BE(t.inception,r),r+=4,e.writeUInt16BE(t.keyTag,r),r+=2,g.encode(t.signersName,e,r),r+=g.encode.bytes,s.copy(e,r,0,s.length),r+=s.length,D.encode.bytes=r-o,e.writeUInt16BE(D.encode.bytes-2,o),e},D.encode.bytes=0,D.decode=function(t,e){e||(e=0);const r=e;var n={},o=t.readUInt16BE(e);return e+=2,n.typeCovered=i.toString(t.readUInt16BE(e)),e+=2,n.algorithm=t.readUInt8(e),e+=1,n.labels=t.readUInt8(e),e+=1,n.originalTTL=t.readUInt32BE(e),e+=4,n.expiration=t.readUInt32BE(e),e+=4,n.inception=t.readUInt32BE(e),e+=4,n.keyTag=t.readUInt16BE(e),e+=2,n.signersName=g.decode(t,e),e+=g.decode.bytes,n.signature=t.slice(e,r+o+2),e+=n.signature.length,D.decode.bytes=e-r,n},D.decode.bytes=0,D.encodingLength=function(t){return 20+g.encodingLength(t.signersName)+n.byteLength(t.signature)};const L=e.rp={};L.encode=function(t,e,r){e||(e=n.alloc(L.encodingLength(t))),r||(r=0);const i=r;return r+=2,g.encode(t.mbox||".",e,r),r+=g.encode.bytes,g.encode(t.txt||".",e,r),r+=g.encode.bytes,L.encode.bytes=r-i,e.writeUInt16BE(L.encode.bytes-2,i),e},L.encode.bytes=0,L.decode=function(t,e){e||(e=0);const r=e,n={};return e+=2,n.mbox=g.decode(t,e)||".",e+=g.decode.bytes,n.txt=g.decode(t,e)||".",e+=g.decode.bytes,L.decode.bytes=e-r,n},L.decode.bytes=0,L.encodingLength=function(t){return 2+g.encodingLength(t.mbox||".")+g.encodingLength(t.txt||".")};const U={encode:function(t,e,r){e||(e=n.alloc(U.encodingLength(t))),r||(r=0);const o=r;for(var s=[],a=0;a<t.length;a++){var u=i.toType(t[a]);void 0===s[u>>8]&&(s[u>>8]=[]),s[u>>8][u>>3&31]|=1<<7-(7&u)}for(a=0;a<s.length;a++)if(void 0!==s[a]){var c=n.from(s[a]);e.writeUInt8(a,r),r+=1,e.writeUInt8(c.length,r),r+=1,c.copy(e,r),r+=c.length}return U.encode.bytes=r-o,e}};U.encode.bytes=0,U.decode=function(t,e,r){e||(e=0);const n=e;var o=[];while(e-n<r){var s=t.readUInt8(e);e+=1;var a=t.readUInt8(e);e+=1;for(var u=0;u<a;u++)for(var c=t.readUInt8(e+u),h=0;h<8;h++)if(c&1<<7-h){var l=i.toString(s<<8|u<<3|h);o.push(l)}e+=a}return U.decode.bytes=e-n,o},U.decode.bytes=0,U.encodingLength=function(t){for(var e=[],r=0;r<t.length;r++){var n=i.toType(t[r]);e[n>>8]=Math.max(e[n>>8]||0,255&n)}var o=0;for(r=0;r<e.length;r++)void 0!==e[r]&&(o+=2+Math.ceil((e[r]+1)/8));return o};const j=e.nsec={};j.encode=function(t,e,r){e||(e=n.alloc(j.encodingLength(t))),r||(r=0);const i=r;return r+=2,g.encode(t.nextDomain,e,r),r+=g.encode.bytes,U.encode(t.rrtypes,e,r),r+=U.encode.bytes,j.encode.bytes=r-i,e.writeUInt16BE(j.encode.bytes-2,i),e},j.encode.bytes=0,j.decode=function(t,e){e||(e=0);const r=e;var n={},i=t.readUInt16BE(e);return e+=2,n.nextDomain=g.decode(t,e),e+=g.decode.bytes,n.rrtypes=U.decode(t,e,i-(e-r)),e+=U.decode.bytes,j.decode.bytes=e-r,n},j.decode.bytes=0,j.encodingLength=function(t){return 2+g.encodingLength(t.nextDomain)+U.encodingLength(t.rrtypes)};const F=e.nsec3={};F.encode=function(t,e,r){e||(e=n.alloc(F.encodingLength(t))),r||(r=0);const i=r,o=t.salt;if(!n.isBuffer(o))throw new Error("salt must be a Buffer");const s=t.nextDomain;if(!n.isBuffer(s))throw new Error("nextDomain must be a Buffer");return r+=2,e.writeUInt8(t.algorithm,r),r+=1,e.writeUInt8(t.flags,r),r+=1,e.writeUInt16BE(t.iterations,r),r+=2,e.writeUInt8(o.length,r),r+=1,o.copy(e,r,0,o.length),r+=o.length,e.writeUInt8(s.length,r),r+=1,s.copy(e,r,0,s.length),r+=s.length,U.encode(t.rrtypes,e,r),r+=U.encode.bytes,F.encode.bytes=r-i,e.writeUInt16BE(F.encode.bytes-2,i),e},F.encode.bytes=0,F.decode=function(t,e){e||(e=0);const r=e;var n={},i=t.readUInt16BE(e);e+=2,n.algorithm=t.readUInt8(e),e+=1,n.flags=t.readUInt8(e),e+=1,n.iterations=t.readUInt16BE(e),e+=2;const o=t.readUInt8(e);e+=1,n.salt=t.slice(e,e+o),e+=o;const s=t.readUInt8(e);return e+=1,n.nextDomain=t.slice(e,e+s),e+=s,n.rrtypes=U.decode(t,e,i-(e-r)),e+=U.decode.bytes,F.decode.bytes=e-r,n},F.decode.bytes=0,F.encodingLength=function(t){return 8+t.salt.length+t.nextDomain.length+U.encodingLength(t.rrtypes)};const K=e.ds={};K.encode=function(t,e,r){e||(e=n.alloc(K.encodingLength(t))),r||(r=0);const i=r,o=t.digest;if(!n.isBuffer(o))throw new Error("Digest must be a Buffer");return r+=2,e.writeUInt16BE(t.keyTag,r),r+=2,e.writeUInt8(t.algorithm,r),r+=1,e.writeUInt8(t.digestType,r),r+=1,o.copy(e,r,0,o.length),r+=o.length,K.encode.bytes=r-i,e.writeUInt16BE(K.encode.bytes-2,i),e},K.encode.bytes=0,K.decode=function(t,e){e||(e=0);const r=e;var n={},i=t.readUInt16BE(e);return e+=2,n.keyTag=t.readUInt16BE(e),e+=2,n.algorithm=t.readUInt8(e),e+=1,n.digestType=t.readUInt8(e),e+=1,n.digest=t.slice(e,r+i+2),e+=n.digest.length,K.decode.bytes=e-r,n},K.decode.bytes=0,K.encodingLength=function(t){return 6+n.byteLength(t.digest)};const $=e.sshfp={};$.getFingerprintLengthForHashType=function(t){switch(t){case 1:return 20;case 2:return 32}},$.encode=function(t,e,r){e||(e=n.alloc($.encodingLength(t))),r||(r=0);const i=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;const o=n.from(t.fingerprint.toUpperCase(),"hex");if(o.length!==$.getFingerprintLengthForHashType(t.hash))throw new Error("Invalid fingerprint length");return o.copy(e,r),r+=o.byteLength,$.encode.bytes=r-i,e.writeUInt16BE($.encode.bytes-2,i),e},$.encode.bytes=0,$.decode=function(t,e){e||(e=0);const r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;const i=$.getFingerprintLengthForHashType(n.hash);return n.fingerprint=t.slice(e,e+i).toString("hex").toUpperCase(),e+=i,$.decode.bytes=e-r,n},$.decode.bytes=0,$.encodingLength=function(t){return 4+n.from(t.fingerprint,"hex").byteLength};const q=e.record=function(t){switch(t.toUpperCase()){case"A":return O;case"PTR":return I;case"CNAME":return T;case"DNAME":return R;case"TXT":return E;case"NULL":return S;case"AAAA":return P;case"SRV":return M;case"HINFO":return A;case"CAA":return k;case"NS":return v;case"SOA":return _;case"MX":return C;case"OPT":return x;case"DNSKEY":return N;case"RRSIG":return D;case"RP":return L;case"NSEC":return j;case"NSEC3":return F;case"SSHFP":return $;case"DS":return K}return w},H=e.answer={};H.encode=function(t,e,r){e||(e=n.alloc(H.encodingLength(t))),r||(r=0);const o=r;if(g.encode(t.name,e,r),r+=g.encode.bytes,e.writeUInt16BE(i.toType(t.type),r),"OPT"===t.type.toUpperCase()){if("."!==t.name)throw new Error("OPT name must be root.");e.writeUInt16BE(t.udpPayloadSize||4096,r+2),e.writeUInt8(t.extendedRcode||0,r+4),e.writeUInt8(t.ednsVersion||0,r+5),e.writeUInt16BE(t.flags||0,r+6),r+=8,x.encode(t.options||[],e,r),r+=x.encode.bytes}else{let n=a.toClass(void 0===t.class?"IN":t.class);t.flush&&(n|=f),e.writeUInt16BE(n,r+2),e.writeUInt32BE(t.ttl||0,r+4),r+=8;const i=q(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return H.encode.bytes=r-o,e},H.encode.bytes=0,H.decode=function(t,e){e||(e=0);const r={},n=e;if(r.name=g.decode(t,e),e+=g.decode.bytes,r.type=i.toString(t.readUInt16BE(e)),"OPT"===r.type)r.udpPayloadSize=t.readUInt16BE(e+2),r.extendedRcode=t.readUInt8(e+4),r.ednsVersion=t.readUInt8(e+5),r.flags=t.readUInt16BE(e+6),r.flag_do=1===(r.flags>>15&1),r.options=x.decode(t,e+8),e+=8+x.decode.bytes;else{const n=t.readUInt16BE(e+2);r.ttl=t.readUInt32BE(e+4),r.class=a.toString(n&d),r.flush=!!(n&f);const i=q(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return H.decode.bytes=e-n,r},H.decode.bytes=0,H.encodingLength=function(t){const e=null!==t.data&&void 0!==t.data?t.data:t.options;return g.encodingLength(t.name)+8+q(t.type).encodingLength(e)};const z=e.question={};function V(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function G(t,e,r,n){for(let i=0;i<t.length;i++)e.encode(t[i],r,n),n+=e.encode.bytes;return n}function W(t,e,r,n){for(let i=0;i<t.length;i++)t[i]=e.decode(r,n),n+=e.decode.bytes;return n}z.encode=function(t,e,r){e||(e=n.alloc(z.encodingLength(t))),r||(r=0);const o=r;return g.encode(t.name,e,r),r+=g.encode.bytes,e.writeUInt16BE(i.toType(t.type),r),r+=2,e.writeUInt16BE(a.toClass(void 0===t.class?"IN":t.class),r),r+=2,z.encode.bytes=r-o,t},z.encode.bytes=0,z.decode=function(t,e){e||(e=0);const r=e,n={};n.name=g.decode(t,e),e+=g.decode.bytes,n.type=i.toString(t.readUInt16BE(e)),e+=2,n.class=a.toString(t.readUInt16BE(e)),e+=2;const o=!!(n.class&p);return o&&(n.class&=y),z.decode.bytes=e-r,n},z.decode.bytes=0,z.encodingLength=function(t){return g.encodingLength(t.name)+4},e.AUTHORITATIVE_ANSWER=1024,e.TRUNCATED_RESPONSE=512,e.RECURSION_DESIRED=256,e.RECURSION_AVAILABLE=128,e.AUTHENTIC_DATA=32,e.CHECKING_DISABLED=16,e.DNSSEC_OK=32768,e.encode=function(t,r,i){const o=!r;o&&(r=n.alloc(e.encodingLength(t))),i||(i=0);const s=i;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),b.encode(t,r,i),i+=b.encode.bytes,i=G(t.questions,z,r,i),i=G(t.answers,H,r,i),i=G(t.authorities,H,r,i),i=G(t.additionals,H,r,i),e.encode.bytes=i-s,o&&e.encode.bytes!==r.length?r.slice(0,e.encode.bytes):r},e.encode.bytes=0,e.decode=function(t,r){r||(r=0);const n=r,i=b.decode(t,r);return r+=b.decode.bytes,r=W(i.questions,z,t,r),r=W(i.answers,H,t,r),r=W(i.authorities,H,t,r),r=W(i.additionals,H,t,r),e.decode.bytes=r-n,i},e.decode.bytes=0,e.encodingLength=function(t){return b.encodingLength(t)+V(t.questions||[],z)+V(t.answers||[],H)+V(t.authorities||[],H)+V(t.additionals||[],H)},e.streamEncode=function(t){const r=e.encode(t),i=n.alloc(2);i.writeUInt16BE(r.byteLength);const o=n.concat([i,r]);return e.streamEncode.bytes=o.byteLength,o},e.streamEncode.bytes=0,e.streamDecode=function(t){const r=t.readUInt16BE(0);if(t.byteLength<r+2)return null;const n=e.decode(t.slice(2));return e.streamDecode.bytes=e.decode.bytes,n},e.streamDecode.bytes=0},62574:function(t,e){"use strict";e.toString=function(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t},e.toOpcode=function(t){switch(t.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}},38548:function(t,e){"use strict";e.toString=function(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`},e.toCode=function(t){if("number"===typeof t)return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}},73574:function(t,e){"use strict";e.toString=function(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t},e.toRcode=function(t){switch(t.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}},96253:function(t,e){"use strict";e.toString=function(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t},e.toType=function(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}},35555:function(t,e,r){"use strict";function n(t,e){Object.defineProperty(t,"super_",{value:e,writable:!0,configurable:!0}),Object.setPrototypeOf(t.prototype,e.prototype)}r(21703),r(26699);let i="undefined"!==typeof r.g?r.g.AbortError:"undefined"!==typeof window?window.AbortError:null;function o(t,e,r){Error.captureStackTrace(this,o),this.message="status="+e+" while requesting "+t+" ["+r+"]",this.uri=t,this.status=e,this.method=r}function s(t,e){Error.captureStackTrace(this,s),this.message=t,this.cause=e}function a(t){Error.captureStackTrace(this,a),this.message="Timeout (t="+t+").",this.timeout=t}function u(t){if(t.protocol){if(!["http:","https:","udp4:","udp6:"].includes(t.protocol))throw new Error(`Invalid Endpoint: unsupported protocol "${t.protocol}" for endpoint: ${JSON.stringify(t)}`)}else t.protocol="https:";if("string"!==typeof t.host)throw new Error(`Invalid Endpoint: host "${t.host}" needs to be a string: ${JSON.stringify(t)}`);if("number"!==typeof t.port&&!isNaN(t.port))throw new Error(`Invalid Endpoint: port "${t.port}" needs to be a number: ${JSON.stringify(t)}`);for(const e in t)void 0!==t[e]&&(this[e]=t[e])}i||(i=function(){Error.captureStackTrace(this,i),this.message="Request aborted."},n(i,Error),i.prototype.code="ABORT_ERR",i.prototype.name="AbortError"),n(o,Error),o.prototype.code="HTTP_STATUS",o.prototype.name="StatusError",n(s,Error),s.prototype.code="RESPONSE_ERR",s.prototype.name="ResponseError",n(a,Error),a.prototype.code="ETIMEOUT",a.prototype.name="TimeoutError";const c=r(35438),h={};for(const l in c)h[l]=new u(c[l]);t.exports={endpoints:h,AbortError:i,HTTPStatusError:o,ResponseError:s,TimeoutError:a,Endpoint:u}},15515:function(t,e,r){"use strict";r(21703);const n=r(79185),i=r(71463),o=r(35555),s=o.AbortError,a=o.ResponseError,u=o.Endpoint,c=o.endpoints,h=/^((\d{1,3}\.){3,3}\d{1,3})(:(\d{2,5}))?$/,l=/^((::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?)(:(\d{2,5}))?$/i;function f(t,e,r,n){return n&&n.aborted?Promise.reject(new s):"udp4:"===t.protocol||"udp6:"===t.protocol?i.queryDns(t,e,r,n):d(t,e,r,n)}function d(t,e,r,o){const s=t.protocol||"https:";return new Promise((function(u,c){i.request(s,t.host,t.port?parseInt(t.port,10):"https:"===s?443:80,t.path||"/dns-query",/^post$/i.test(t.method)?"POST":"GET",n.encode(Object.assign({flags:n.RECURSION_DESIRED,type:"query"},e)),r,o,(function(e,r,i){let o;if(null===e)if(0===r.length)e=new a("Empty.");else try{o=n.decode(r)}catch(s){e=new a("Invalid packet (cause="+s.message+")",s)}null!==e?c(Object.assign(e,{response:i,endpoint:t})):(o.endpoint=t,o.response=i,u(o))}))}))}function p(t,e){let r;e=Object.assign({retries:5,timeout:3e4},e);try{if(r="doh"===e.endpoints?i.endpoints({doh:!0,dns:!1}):"dns"===e.endpoints?i.endpoints({doh:!1,dns:!0}):g(e.endpoints)||i.endpoints({doh:!0,dns:!0}),!r||0===r.length)throw new Error("No endpoints defined.")}catch(n){return Promise.reject(n)}return y(r,t,e)}function y(t,e,r){const n=1===t.length?t[0]:t[Math.floor(Math.random()*t.length)%t.length];return f(n,e,r.timeout,r.signal).then((t=>(t.endpoint=n,t)),(t=>{if("AbortError"===t.name||0===r.retries)throw t;return r.retries>0&&(r.retries-=1),p(e,r)}))}function g(t){if(!t)return;if("function"!==typeof t[Symbol.iterator]||"string"===typeof t)throw new Error("Endpoints needs to be iterable.");const e=[];for(let r of t)"object"===typeof r?(r instanceof u||(r=new u(r)),e.push(r)):"string"===typeof r&&e.push(c[r]||m(r));return e}function m(t){const e=/^(([^:]+?:)\/\/)?([^/]*?)(\/.*?)?(\s\[(post|get)\])?$/i.exec(t);let r,n,i=e[2]||"https:",o=1;const s=l.exec(e[3]);if(s){const t=h.exec(e[3]);t?(r=t[1],t[4]&&(n=parseInt(t[4]))):(o=2,r=s[1],s[9]&&(n=parseInt(s[10])))}else{const t=/^([^:]*)(:(.*))?$/.exec(e[3]);r=t[1],t[3]&&(n=parseInt(t[3]))}return"udp:"===i&&(i=2===o?"udp6:":"udp4:"),new u({protocol:i,host:r,port:n,path:e[4],method:e[6]})}t.exports={query:p,endpoints:c,parseEndpoints:g,AbortError:s,ResponseError:a,TimeoutError:o.TimeoutError,HTTPStatusError:o.HTTPStatusError,Endpoint:u}},71463:function(t,e,r){"use strict";r(21703);const n=r(15361).Buffer,i=r(35555),o=i.AbortError,s=i.HTTPStatusError,a=i.TimeoutError,u="application/dns-message",c=Object.values(i.endpoints).filter((function(t){return!t.filter&&!t.logging&&t.cors}));function h(t){return t.toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(){}function f(t,e,r,i,c,f,d,p,y){const g=t+"//"+e+":"+r+i+("GET"===c?"?dns="+h(f):""),m=new XMLHttpRequest;function b(){_(new a(d));try{m.abort()}catch(t){}}function w(){200!==m.status?_(new s(g,m.status,c)):_(null,n.from(m.response))}function v(){if(m.readyState>1&&200!==m.status&&0!==m.status){_(new s(g,m.status,c));try{m.abort()}catch(t){}}}m.open(c,g,!0),m.setRequestHeader("Accept",u),"POST"===c&&m.setRequestHeader("Content-Type",u),m.responseType="arraybuffer",m.timeout=d,m.ontimeout=b,m.onreadystatechange=v,m.onerror=E,m.onload=w,"GET"===c?m.send():m.send(f),p&&p.addEventListener("abort",S);let _=function(t,e){_=l,p&&p.removeEventListener("abort",S),y(t,e,m)};function E(){_(200===m.status?new Error("Inexplicable XHR Error"):new s(g,m.status,c))}function S(){_(new o);try{m.abort()}catch(t){}}}t.exports={request:f,queryDns:function(){throw new Error('Only "doh" endpoints are supported in the browser')},endpoints:t=>{if(t.doh)return c;if(t.dns)throw new Error('Only "doh" is supported in the browser')}}},32127:function(t,e,r){"use strict";var n=e;n.version=r(18597).i8,n.utils=r(87913),n.rand=r(31482),n.curve=r(11626),n.curves=r(69474),n.ec=r(98082),n.eddsa=r(39322)},57661:function(t,e,r){"use strict";r(21703);var n=r(21646),i=r(87913),o=i.getNAF,s=i.getJSF,a=i.assert;function u(t,e){this.type=t,this.p=new n(e.p,16),this.red=e.prime?n.red(e.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=e.n&&new n(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){a(t.precomputed);var r=t._getDoubles(),n=o(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var s,u,c=[];for(s=0;s<n.length;s+=r.step){u=0;for(var h=s+r.step-1;h>=s;h--)u=(u<<1)+n[h];c.push(u)}for(var l=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=i;d>0;d--){for(s=0;s<c.length;s++)u=c[s],u===d?f=f.mixedAdd(r.points[s]):u===-d&&(f=f.mixedAdd(r.points[s].neg()));l=l.add(f)}return l.toP()},u.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=o(e,r,this._bitLength),u=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var h=0;c>=0&&0===s[c];c--)h++;if(c>=0&&h++,u=u.dblp(h),c<0)break;var l=s[c];a(0!==l),u="affine"===t.type?l>0?u.mixedAdd(i[l-1>>1]):u.mixedAdd(i[-l-1>>1].neg()):l>0?u.add(i[l-1>>1]):u.add(i[-l-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,r,n,i){var a,u,c,h=this._wnafT1,l=this._wnafT2,f=this._wnafT3,d=0;for(a=0;a<n;a++){c=e[a];var p=c._getNAFPoints(t);h[a]=p.wnd,l[a]=p.points}for(a=n-1;a>=1;a-=2){var y=a-1,g=a;if(1===h[y]&&1===h[g]){var m=[e[y],null,null,e[g]];0===e[y].y.cmp(e[g].y)?(m[1]=e[y].add(e[g]),m[2]=e[y].toJ().mixedAdd(e[g].neg())):0===e[y].y.cmp(e[g].y.redNeg())?(m[1]=e[y].toJ().mixedAdd(e[g]),m[2]=e[y].add(e[g].neg())):(m[1]=e[y].toJ().mixedAdd(e[g]),m[2]=e[y].toJ().mixedAdd(e[g].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],w=s(r[y],r[g]);for(d=Math.max(w[0].length,d),f[y]=new Array(d),f[g]=new Array(d),u=0;u<d;u++){var v=0|w[0][u],_=0|w[1][u];f[y][u]=b[3*(v+1)+(_+1)],f[g][u]=0,l[y]=m}}else f[y]=o(r[y],h[y],this._bitLength),f[g]=o(r[g],h[g],this._bitLength),d=Math.max(f[y].length,d),d=Math.max(f[g].length,d)}var E=this.jpoint(null,null,null),S=this._wnafT4;for(a=d;a>=0;a--){var A=0;while(a>=0){var I=!0;for(u=0;u<n;u++)S[u]=0|f[u][a],0!==S[u]&&(I=!1);if(!I)break;A++,a--}if(a>=0&&A++,E=E.dblp(A),a<0)break;for(u=0;u<n;u++){var T=S[u];0!==T&&(T>0?c=l[u][T-1>>1]:T<0&&(c=l[u][-T-1>>1].neg()),E="affine"===c.type?E.mixedAdd(c):E.add(c))}}for(a=0;a<n;a++)l[a]=null;return i?E:E.toP()},u.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1===2*r){6===t[0]?a(t[t.length-1]%2===0):7===t[0]&&a(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));return n}if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},c.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},c.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}},51727:function(t,e,r){"use strict";r(21703);var n=r(87913),i=r(21646),o=r(81923),s=r(57661),a=n.assert;function u(t){this.twisted=1!==(0|t.a),this.mOneA=this.twisted&&-1===(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|t.c)}function c(t,e,r,n,o){s.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,s),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},u.prototype.pointFromX=function(t,e){t=new i(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var u=a.fromRed().isOdd();return(e&&!u||!e&&u)&&(a=a.redNeg()),this.point(t,a)},u.prototype.pointFromY=function(t,e){t=new i(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=n.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},o(c,s.BasePoint),u.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},u.prototype.point=function(t,e,r,n){return new c(this,t,e,r,n)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),s=o.redSub(r),a=n.redSub(e),u=i.redMul(s),c=o.redMul(a),h=i.redMul(a),l=s.redMul(o);return this.curve.point(u,c,l,h)},c.prototype._projDbl=function(){var t,e,r,n,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){n=this.curve._mulA(a);var c=n.redAdd(u);this.zOne?(t=s.redSub(a).redSub(u).redMul(c.redSub(this.curve.two)),e=c.redMul(n.redSub(u)),r=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),o=c.redSub(i).redISub(i),t=s.redSub(a).redISub(u).redMul(o),e=c.redMul(n.redSub(u)),r=c.redMul(o))}else n=a.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),t=this.curve._mulC(s.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(a.redISub(u)),r=n.redMul(o);return this.curve.point(t,e,r)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),s=i.redSub(n),a=i.redAdd(n),u=r.redAdd(e),c=o.redMul(s),h=a.redMul(u),l=o.redMul(u),f=s.redMul(a);return this.curve.point(c,h,f,l)},c.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),u=i.redSub(a),c=i.redAdd(a),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),l=n.redMul(u).redMul(h);return this.curve.twisted?(e=n.redMul(c).redMul(s.redSub(this.curve._mulA(o))),r=u.redMul(c)):(e=n.redMul(c).redMul(s.redSub(o)),r=this.curve._mulC(u).redMul(c)),this.curve.point(l,e,r)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},c.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},11626:function(t,e,r){"use strict";var n=e;n.base=r(57661),n.short=r(78441),n.mont=r(96433),n.edwards=r(51727)},96433:function(t,e,r){"use strict";r(21703);var n=r(21646),i=r(81923),o=r(57661),s=r(87913);function a(t){o.call(this,"mont",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,r){o.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(e,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,o),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e),i=n.redSqrt();return 0===i.redSqr().cmp(n)},i(u,o.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(s.toArray(t,e),1)},a.prototype.point=function(t,e){return new u(this,t,e)},a.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z),e=t.redSqr(),r=this.x.redSub(this.z),n=r.redSqr(),i=e.redSub(n),o=e.redMul(n),s=i.redMul(n.redAdd(this.curve.a24.redMul(i)));return this.curve.point(o,s)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z),s=o.redMul(r),a=i.redMul(n),u=e.z.redMul(s.redAdd(a).redSqr()),c=e.x.redMul(s.redISub(a).redSqr());return this.curve.point(u,c)},u.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=this,o=[];0!==e.cmpn(0);e.iushrn(1))o.push(e.andln(1));for(var s=o.length-1;s>=0;s--)0===o[s]?(r=r.diffAdd(n,i),n=n.dbl()):(n=r.diffAdd(n,i),r=r.dbl());return n},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},78441:function(t,e,r){"use strict";r(21703);var n=r(87913),i=r(21646),o=r(81923),s=r(57661),a=n.assert;function u(t){s.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,r,n){s.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(t,e,r,n){s.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,s),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r,n;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);e=o[0].cmp(o[1])<0?o[0]:o[1],e=e.toRed(this.red)}if(t.lambda)r=new i(t.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))?r=s[0]:(r=s[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return n=t.basis?t.basis.map((function(t){return{a:new i(t.a,16),b:new i(t.b,16)}})):this._getEndoBasis(r),{beta:e,lambda:r,basis:n}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),r=new i(2).toRed(e).redInvm(),n=r.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(r),s=n.redAdd(o).fromRed(),a=n.redSub(o).fromRed();return[s,a]},u.prototype._getEndoBasis=function(t){var e,r,n,o,s,a,u,c,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i(1),y=new i(0),g=new i(0),m=new i(1),b=0;while(0!==f.cmpn(0)){var w=d.div(f);c=d.sub(w.mul(f)),h=g.sub(w.mul(p));var v=m.sub(w.mul(y));if(!n&&c.cmp(l)<0)e=u.neg(),r=p,n=c.neg(),o=h;else if(n&&2===++b)break;u=c,d=f,f=c,g=p,p=h,m=y,y=v}s=c.neg(),a=h;var _=n.sqr().add(o.sqr()),E=s.sqr().add(a.sqr());return E.cmp(_)>=0&&(s=e,a=r),n.negative&&(n=n.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:o},{a:s,b:a}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b),h=t.sub(s).sub(a),l=u.add(c).neg();return{k1:h,k2:l}},u.prototype.pointFromX=function(t,e){t=new i(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(e&&!o||!e&&o)&&(n=n.redNeg()),this.point(t,n)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),h=0;h<2*o;h++)n[h]=null,i[h]=null;return c},o(c,s.BasePoint),u.prototype.point=function(t,e,r){return new c(this,t,e,r)},u.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,r){"string"===typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},c.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},c.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t},o(h,s.BasePoint),u.prototype.jpoint=function(t,e,r){return new h(this,t,e,r)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),h=c.redMul(a),l=n.redMul(c),f=u.redSqr().redIAdd(h).redISub(l).redISub(l),d=u.redMul(l.redISub(f)).redISub(o.redMul(h)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},h.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),h=r.redMul(u),l=a.redSqr().redIAdd(c).redISub(h).redISub(h),f=a.redMul(h.redISub(l)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(l,f,d)},h.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(e=0;e<t;e++){var h=o.redSqr(),l=c.redSqr(),f=l.redSqr(),d=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(u)),p=o.redMul(l),y=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(y),m=d.redMul(g);m=m.redIAdd(m).redISub(f);var b=c.redMul(a);e+1<t&&(u=u.redMul(f)),o=y,a=b,c=m}return this.curve.jpoint(o,c.redMul(i),a)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=u,e=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(h).redISub(f);d=d.redIAdd(d);var p=h.redAdd(h).redIAdd(h),y=p.redSqr(),g=f.redIAdd(f);g=g.redIAdd(g),g=g.redIAdd(g),t=y.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(t,e,r)},h.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);t=u;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),e=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),d=this.x.redSub(h).redMul(this.x.redAdd(h));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f);p=p.redIAdd(p);var y=p.redAdd(p);t=d.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var g=l.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},h.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e);u=u.redIAdd(u);var c=u.redMul(s),h=a.redSqr().redISub(c.redAdd(c)),l=c.redISub(h),f=s.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var d=a.redMul(l).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(h,d,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(o);var a=s.redSqr(),u=n.redIAdd(n);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),h=e.redMul(c);h=h.redIAdd(h),h=h.redIAdd(h);var l=this.x.redMul(a).redISub(h);l=l.redIAdd(l),l=l.redIAdd(l);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,f,d)},h.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},h.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},h.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},69474:function(t,e,r){"use strict";var n,i=e,o=r(78730),s=r(11626),a=r(87913),u=a.assert;function c(t){"short"===t.type?this.curve=new s.short(t):"edwards"===t.type?this.curve=new s.edwards(t):this.curve=new s.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,u(this.g.validate(),"Invalid curve"),u(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var r=new c(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=c,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(36027)}catch(l){n=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},98082:function(t,e,r){"use strict";r(21703);var n=r(21646),i=r(72570),o=r(87913),s=r(69474),a=r(31482),u=o.assert,c=r(96964),h=r(4958);function l(t){if(!(this instanceof l))return new l(t);"string"===typeof t&&(u(Object.prototype.hasOwnProperty.call(s,t),"Unknown curve "+t),t=s[t]),t instanceof s.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=l,l.prototype.keyPair=function(t){return new c(this,t)},l.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},l.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},l.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var s=new n(e.generate(r));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},l.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},l.prototype.sign=function(t,e,r,o){"object"===typeof r&&(o=r,r=null),o||(o={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new n(t,16));for(var s=this.n.byteLength(),a=e.getPrivate().toArray("be",s),u=t.toArray("be",s),c=new i({hash:this.hash,entropy:a,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),l=this.n.sub(new n(1)),f=0;;f++){var d=o.k?o.k(f):new n(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(l)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var y=p.getX(),g=y.umod(this.n);if(0!==g.cmpn(0)){var m=d.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(m=m.umod(this.n),0!==m.cmpn(0)){var b=(p.getY().isOdd()?1:0)|(0!==y.cmp(g)?2:0);return o.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),b^=1),new h({r:g,s:m,recoveryParam:b})}}}}}},l.prototype.verify=function(t,e,r,i){t=this._truncateToN(new n(t,16)),r=this.keyFromPublic(r,i),e=new h(e,"hex");var o=e.r,s=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,u=s.invm(this.n),c=u.mul(t).umod(this.n),l=u.mul(o).umod(this.n);return this.curve._maxwellTrick?(a=this.g.jmulAdd(c,r.getPublic(),l),!a.isInfinity()&&a.eqXToP(o)):(a=this.g.mulAdd(c,r.getPublic(),l),!a.isInfinity()&&0===a.getX().umod(this.n).cmp(o))},l.prototype.recoverPubKey=function(t,e,r,i){u((3&r)===r,"The recovery param is more than two bits"),e=new h(e,i);var o=this.n,s=new n(t),a=e.r,c=e.s,l=1&r,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),l):this.curve.pointFromX(a,l);var d=e.r.invm(o),p=o.sub(s).mul(d).umod(o),y=c.mul(d).umod(o);return this.g.mulAdd(p,a,y)},l.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new h(e,n),null!==e.recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},96964:function(t,e,r){"use strict";var n=r(21646),i=r(87913),o=i.assert;function s(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=s,s.fromPublic=function(t,e,r){return e instanceof s?e:new s(t,{pub:e,pubEnc:r})},s.fromPrivate=function(t,e,r){return e instanceof s?e:new s(t,{priv:e,privEnc:r})},s.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(t,e){return"string"===typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},s.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(t,e){this.priv=new n(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?o(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||o(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},s.prototype.derive=function(t){return t.validate()||o(t.validate(),"public point not validated"),t.mul(this.priv).getX()},s.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},s.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},4958:function(t,e,r){"use strict";var n=r(21646),i=r(87913),o=i.assert;function s(t,e){if(t instanceof s)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new n(t.r,16),this.s=new n(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function u(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function c(t){var e=0,r=t.length-1;while(!t[e]&&!(128&t[e+1])&&e<r)e++;return 0===e?t:t.slice(e)}function h(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);t.push(128|r);while(--r)t.push(e>>>(r<<3)&255);t.push(e)}}t.exports=s,s.prototype._importDER=function(t,e){t=i.toArray(t,e);var r=new a;if(48!==t[r.place++])return!1;var o=u(t,r);if(!1===o)return!1;if(o+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var s=u(t,r);if(!1===s)return!1;var c=t.slice(r.place,s+r.place);if(r.place+=s,2!==t[r.place++])return!1;var h=u(t,r);if(!1===h)return!1;if(t.length!==h+r.place)return!1;var l=t.slice(r.place,h+r.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}return this.r=new n(c),this.s=new n(l),this.recoveryParam=null,!0},s.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=c(e),r=c(r);while(!r[0]&&!(128&r[1]))r=r.slice(1);var n=[2];h(n,e.length),n=n.concat(e),n.push(2),h(n,r.length);var o=n.concat(r),s=[48];return h(s,o.length),s=s.concat(o),i.encode(s,t)}},39322:function(t,e,r){"use strict";var n=r(78730),i=r(69474),o=r(87913),s=o.assert,a=o.parseBytes,u=r(64586),c=r(96717);function h(t){if(s("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof h))return new h(t);t=i[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=n.sha512}t.exports=h,h.prototype.sign=function(t,e){t=a(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),u=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},h.prototype.verify=function(t,e,r){t=a(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S()),s=e.R().add(n.pub().mul(i));return s.eq(o)},h.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},h.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},h.prototype.makeSignature=function(t){return t instanceof c?t:new c(this,t)},h.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},h.prototype.decodePoint=function(t){t=o.parseBytes(t);var e=t.length-1,r=t.slice(0,e).concat(-129&t[e]),n=0!==(128&t[e]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},h.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(t){return o.intFromLE(t)},h.prototype.isPoint=function(t){return t instanceof this.pointClass}},64586:function(t,e,r){"use strict";var n=r(87913),i=n.assert,o=n.parseBytes,s=n.cachedProperty;function a(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(a,"privBytes",(function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),s(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),t)},a.prototype.getPublic=function(t){return n.encode(this.pubBytes(),t)},t.exports=a},96717:function(t,e,r){"use strict";var n=r(21646),i=r(87913),o=i.assert,s=i.cachedProperty,a=i.parseBytes;function u(t,e){this.eddsa=t,"object"!==typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof n&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}s(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},36027:function(t){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},87913:function(t,e,r){"use strict";var n=e,i=r(21646),o=r(14961),s=r(26605);function a(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n}function u(t,e){var r=[[],[]];t=t.clone(),e=e.clone();var n,i=0,o=0;while(t.cmpn(-i)>0||e.cmpn(-o)>0){var s,a,u=t.andln(3)+i&3,c=e.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),0===(1&u)?s=0:(n=t.andln(7)+i&7,s=3!==n&&5!==n||2!==c?u:-u),r[0].push(s),0===(1&c)?a=0:(n=e.andln(7)+o&7,a=3!==n&&5!==n||2!==u?c:-c),r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r}function c(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}}function h(t){return"string"===typeof t?n.toArray(t,"hex"):t}function l(t){return new i(t,"hex","le")}n.assert=o,n.toArray=s.toArray,n.zero2=s.zero2,n.toHex=s.toHex,n.encode=s.encode,n.getNAF=a,n.getJSF=u,n.cachedProperty=c,n.parseBytes=h,n.intFromLE=l},21646:function(t,e,r){t=r.nmd(t),r(21703),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(85568).Buffer}catch(R){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function c(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8}this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,h=r;h<a;h+=n)u=c(t,h,h+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype.strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;i=0|t.words[p],o=0|e.words[d],s=i*o+l,h+=s/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,r=0!==o||s!==this.length-1?h[6-u.length]+u+r:u+r,i+=2,i>=26&&(i-=26,s--)}0!==o&&(r=o.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],d=f[t];r="";var p=this.clone();p.negative=0;while(!p.isZero()){var y=p.modn(d).toString(t);p=p.idivn(d),r=p.isZero()?y+r:h[c-y.length]+y+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)e=(0|r.words[s])-(0|n.words[s])+o,o=e>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)e=(0|r.words[s])+o,o=e>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,y=d>>>13,g=0|s[2],m=8191&g,b=g>>>13,w=0|s[3],v=8191&w,_=w>>>13,E=0|s[4],S=8191&E,A=E>>>13,I=0|s[5],T=8191&I,R=I>>>13,M=0|s[6],k=8191&M,C=M>>>13,O=0|s[7],P=8191&O,B=O>>>13,x=0|s[8],N=8191&x,D=x>>>13,L=0|s[9],U=8191&L,j=L>>>13,F=0|a[0],K=8191&F,$=F>>>13,q=0|a[1],H=8191&q,z=q>>>13,V=0|a[2],G=8191&V,W=V>>>13,Y=0|a[3],J=8191&Y,Z=Y>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(l,K),i=Math.imul(l,$),i=i+Math.imul(f,K)|0,o=Math.imul(f,$);var gt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,K),i=Math.imul(p,$),i=i+Math.imul(y,K)|0,o=Math.imul(y,$),n=n+Math.imul(l,H)|0,i=i+Math.imul(l,z)|0,i=i+Math.imul(f,H)|0,o=o+Math.imul(f,z)|0;var mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,K),i=Math.imul(m,$),i=i+Math.imul(b,K)|0,o=Math.imul(b,$),n=n+Math.imul(p,H)|0,i=i+Math.imul(p,z)|0,i=i+Math.imul(y,H)|0,o=o+Math.imul(y,z)|0,n=n+Math.imul(l,G)|0,i=i+Math.imul(l,W)|0,i=i+Math.imul(f,G)|0,o=o+Math.imul(f,W)|0;var bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(v,K),i=Math.imul(v,$),i=i+Math.imul(_,K)|0,o=Math.imul(_,$),n=n+Math.imul(m,H)|0,i=i+Math.imul(m,z)|0,i=i+Math.imul(b,H)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(y,G)|0,o=o+Math.imul(y,W)|0,n=n+Math.imul(l,J)|0,i=i+Math.imul(l,Z)|0,i=i+Math.imul(f,J)|0,o=o+Math.imul(f,Z)|0;var wt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(S,K),i=Math.imul(S,$),i=i+Math.imul(A,K)|0,o=Math.imul(A,$),n=n+Math.imul(v,H)|0,i=i+Math.imul(v,z)|0,i=i+Math.imul(_,H)|0,o=o+Math.imul(_,z)|0,n=n+Math.imul(m,G)|0,i=i+Math.imul(m,W)|0,i=i+Math.imul(b,G)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(l,Q)|0,i=i+Math.imul(l,tt)|0,i=i+Math.imul(f,Q)|0,o=o+Math.imul(f,tt)|0;var vt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(T,K),i=Math.imul(T,$),i=i+Math.imul(R,K)|0,o=Math.imul(R,$),n=n+Math.imul(S,H)|0,i=i+Math.imul(S,z)|0,i=i+Math.imul(A,H)|0,o=o+Math.imul(A,z)|0,n=n+Math.imul(v,G)|0,i=i+Math.imul(v,W)|0,i=i+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,Z)|0,i=i+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,tt)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,n=n+Math.imul(l,rt)|0,i=i+Math.imul(l,nt)|0,i=i+Math.imul(f,rt)|0,o=o+Math.imul(f,nt)|0;var _t=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,K),i=Math.imul(k,$),i=i+Math.imul(C,K)|0,o=Math.imul(C,$),n=n+Math.imul(T,H)|0,i=i+Math.imul(T,z)|0,i=i+Math.imul(R,H)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(S,G)|0,i=i+Math.imul(S,W)|0,i=i+Math.imul(A,G)|0,o=o+Math.imul(A,W)|0,n=n+Math.imul(v,J)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(m,Q)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=i+Math.imul(p,nt)|0,i=i+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0,n=n+Math.imul(l,ot)|0,i=i+Math.imul(l,st)|0,i=i+Math.imul(f,ot)|0,o=o+Math.imul(f,st)|0;var Et=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(P,K),i=Math.imul(P,$),i=i+Math.imul(B,K)|0,o=Math.imul(B,$),n=n+Math.imul(k,H)|0,i=i+Math.imul(k,z)|0,i=i+Math.imul(C,H)|0,o=o+Math.imul(C,z)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,W)|0,i=i+Math.imul(R,G)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(S,J)|0,i=i+Math.imul(S,Z)|0,i=i+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(v,tt)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=i+Math.imul(p,st)|0,i=i+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,n=n+Math.imul(l,ut)|0,i=i+Math.imul(l,ct)|0,i=i+Math.imul(f,ut)|0,o=o+Math.imul(f,ct)|0;var St=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,K),i=Math.imul(N,$),i=i+Math.imul(D,K)|0,o=Math.imul(D,$),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,z)|0,i=i+Math.imul(B,H)|0,o=o+Math.imul(B,z)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,W)|0,i=i+Math.imul(C,G)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(T,J)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(S,Q)|0,i=i+Math.imul(S,tt)|0,i=i+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(v,rt)|0,i=i+Math.imul(v,nt)|0,i=i+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=i+Math.imul(m,st)|0,i=i+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ut)|0,i=i+Math.imul(p,ct)|0,i=i+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,n=n+Math.imul(l,lt)|0,i=i+Math.imul(l,ft)|0,i=i+Math.imul(f,lt)|0,o=o+Math.imul(f,ft)|0;var At=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,K),i=Math.imul(U,$),i=i+Math.imul(j,K)|0,o=Math.imul(j,$),n=n+Math.imul(N,H)|0,i=i+Math.imul(N,z)|0,i=i+Math.imul(D,H)|0,o=o+Math.imul(D,z)|0,n=n+Math.imul(P,G)|0,i=i+Math.imul(P,W)|0,i=i+Math.imul(B,G)|0,o=o+Math.imul(B,W)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,Z)|0,i=i+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(T,Q)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,i=i+Math.imul(S,nt)|0,i=i+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(v,ot)|0,i=i+Math.imul(v,st)|0,i=i+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(m,ut)|0,i=i+Math.imul(m,ct)|0,i=i+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,lt)|0,i=i+Math.imul(p,ft)|0,i=i+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0,n=n+Math.imul(l,pt)|0,i=i+Math.imul(l,yt)|0,i=i+Math.imul(f,pt)|0,o=o+Math.imul(f,yt)|0;var It=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,H),i=Math.imul(U,z),i=i+Math.imul(j,H)|0,o=Math.imul(j,z),n=n+Math.imul(N,G)|0,i=i+Math.imul(N,W)|0,i=i+Math.imul(D,G)|0,o=o+Math.imul(D,W)|0,n=n+Math.imul(P,J)|0,i=i+Math.imul(P,Z)|0,i=i+Math.imul(B,J)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(k,Q)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(S,ot)|0,i=i+Math.imul(S,st)|0,i=i+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(v,ut)|0,i=i+Math.imul(v,ct)|0,i=i+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(m,lt)|0,i=i+Math.imul(m,ft)|0,i=i+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0,n=n+Math.imul(p,pt)|0,i=i+Math.imul(p,yt)|0,i=i+Math.imul(y,pt)|0,o=o+Math.imul(y,yt)|0;var Tt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,G),i=Math.imul(U,W),i=i+Math.imul(j,G)|0,o=Math.imul(j,W),n=n+Math.imul(N,J)|0,i=i+Math.imul(N,Z)|0,i=i+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(P,Q)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=i+Math.imul(T,st)|0,i=i+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(S,ut)|0,i=i+Math.imul(S,ct)|0,i=i+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,n=n+Math.imul(v,lt)|0,i=i+Math.imul(v,ft)|0,i=i+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0,n=n+Math.imul(m,pt)|0,i=i+Math.imul(m,yt)|0,i=i+Math.imul(b,pt)|0,o=o+Math.imul(b,yt)|0;var Rt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,J),i=Math.imul(U,Z),i=i+Math.imul(j,J)|0,o=Math.imul(j,Z),n=n+Math.imul(N,Q)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(B,rt)|0,o=o+Math.imul(B,nt)|0,n=n+Math.imul(k,ot)|0,i=i+Math.imul(k,st)|0,i=i+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,n=n+Math.imul(T,ut)|0,i=i+Math.imul(T,ct)|0,i=i+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(S,lt)|0,i=i+Math.imul(S,ft)|0,i=i+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0,n=n+Math.imul(v,pt)|0,i=i+Math.imul(v,yt)|0,i=i+Math.imul(_,pt)|0,o=o+Math.imul(_,yt)|0;var Mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,Q),i=Math.imul(U,tt),i=i+Math.imul(j,Q)|0,o=Math.imul(j,tt),n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(P,ot)|0,i=i+Math.imul(P,st)|0,i=i+Math.imul(B,ot)|0,o=o+Math.imul(B,st)|0,n=n+Math.imul(k,ut)|0,i=i+Math.imul(k,ct)|0,i=i+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(T,lt)|0,i=i+Math.imul(T,ft)|0,i=i+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0,n=n+Math.imul(S,pt)|0,i=i+Math.imul(S,yt)|0,i=i+Math.imul(A,pt)|0,o=o+Math.imul(A,yt)|0;var kt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(N,ot)|0,i=i+Math.imul(N,st)|0,i=i+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,n=n+Math.imul(P,ut)|0,i=i+Math.imul(P,ct)|0,i=i+Math.imul(B,ut)|0,o=o+Math.imul(B,ct)|0,n=n+Math.imul(k,lt)|0,i=i+Math.imul(k,ft)|0,i=i+Math.imul(C,lt)|0,o=o+Math.imul(C,ft)|0,n=n+Math.imul(T,pt)|0,i=i+Math.imul(T,yt)|0,i=i+Math.imul(R,pt)|0,o=o+Math.imul(R,yt)|0;var Ct=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,ot),i=Math.imul(U,st),i=i+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(N,ut)|0,i=i+Math.imul(N,ct)|0,i=i+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,n=n+Math.imul(P,lt)|0,i=i+Math.imul(P,ft)|0,i=i+Math.imul(B,lt)|0,o=o+Math.imul(B,ft)|0,n=n+Math.imul(k,pt)|0,i=i+Math.imul(k,yt)|0,i=i+Math.imul(C,pt)|0,o=o+Math.imul(C,yt)|0;var Ot=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ut),i=Math.imul(U,ct),i=i+Math.imul(j,ut)|0,o=Math.imul(j,ct),n=n+Math.imul(N,lt)|0,i=i+Math.imul(N,ft)|0,i=i+Math.imul(D,lt)|0,o=o+Math.imul(D,ft)|0,n=n+Math.imul(P,pt)|0,i=i+Math.imul(P,yt)|0,i=i+Math.imul(B,pt)|0,o=o+Math.imul(B,yt)|0;var Pt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=Math.imul(U,ft),i=i+Math.imul(j,lt)|0,o=Math.imul(j,ft),n=n+Math.imul(N,pt)|0,i=i+Math.imul(N,yt)|0,i=i+Math.imul(D,pt)|0,o=o+Math.imul(D,yt)|0;var Bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,pt),i=Math.imul(U,yt),i=i+Math.imul(j,pt)|0,o=Math.imul(j,yt);var xt=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,u[0]=gt,u[1]=mt,u[2]=bt,u[3]=wt,u[4]=vt,u[5]=_t,u[6]=Et,u[7]=St,u[8]=At,u[9]=It,u[10]=Tt,u[11]=Rt,u[12]=Mt,u[13]=kt,u[14]=Ct,u[15]=Ot,u[16]=Pt,u[17]=Bt,u[18]=xt,0!==c&&(u[19]=c,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=0|t.words[h],f=0|e.words[c],d=l*f,p=67108863&d;s=s+(d/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,i+=s>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function m(t,e,r){var n=new b;return n.mulp(t,e,r)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=p),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?y(this,t,e):n<63?p(this,t,e):n<1024?g(this,t,e):m(this,t,e),r},b.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},b.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},b.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=r[h+d],y=n[h+d],g=r[h+d+s],m=n[h+d+s],b=l*g-f*m;m=l*m+f*g,g=b,r[h+d]=p+g,n[h+d]=y+m,r[h+d+s]=p-g,n[h+d+s]=y-m,d!==a&&(b=u*l-c*f,f=u*f+c*l,l=b)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},b.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=d(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+a,a=o>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)o=-(0|this.words[i])+a,a=o>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,s=0|i.words[i.length-1],a=this._countBits(s);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,u&&(u.words[c]=1));for(var f=c-1;f>=0;f--){var d=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);d=Math.min(d/s|0,67108863),n._ishlnsubmul(i,d,f);while(0!==n.negative)d--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=d)}return u&&u.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++c;var h=r.clone(),l=e.clone();while(!e.isZero()){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0){e.iushrn(f);while(f-- >0)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1)}for(var p=0,y=1;0===(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,s=new o(1),a=new o(0),u=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0){e.iushrn(c);while(c-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0){r.iushrn(l);while(l-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return i=0===e.cmpn(1)?s:a,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new I(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,v),i(S,v),i(A,v),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return w[t]=e,e},I.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),s=0;while(!i.isZero()&&0===i.andln(1))s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();h=new o(2*h*h).toRed(this);while(0!==this.pow(h,c).cmp(u))h.redIAdd(u);var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;while(0!==d.cmp(a)){for(var y=d,g=0;0!==y.cmp(a);g++)y=y.redSqr();n(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=g}return f},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var s=n[0],a=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=c-1;l>=0;l--){var f=h>>l&1;s!==n[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,u++,(u===r||0===i&&0===l)&&(s=this.mul(s,n[a]),u=0,a=0)):u=0}c=26}return s},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,I),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)},19998:function(t,e,r){"use strict";function n(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function i(t,e,r){if(!t||"string"===typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof e&&(r=e,e=""),e&&(r.code=e);try{return n(t,r)}catch(i){r.message=t.message,r.stack=t.stack;const e=function(){};e.prototype=Object.create(Object.getPrototypeOf(t));const o=n(new e,r);return o}}r(21703),t.exports=i},29591:function(t,e,r){"use strict";r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.promisify=i;var n="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function i(t){if("function"!=typeof t)throw new TypeError("Argument to promisify must be a function");var e=t[n],r=i.Promise||Promise;if("function"!=typeof r)throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var n=this,i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return new r((function(r,i){o.push((function(t){if(t)return i(t);for(var n=arguments.length,o=Array(1<n?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];if(1===o.length||!e)return r(o[0]);var a={};o.forEach((function(t,r){var n=e[r];n&&(a[n]=t)})),r(a)})),t.apply(n,o)}))}}i.argumentNames="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__",i.Promise=void 0},94772:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(96169);function i(t,e,r){return new n.EventIterator((({push:r})=>(this.addEventListener(t,r,e),()=>this.removeEventListener(t,r,e))),r)}e.EventIterator=n.EventIterator,e.subscribe=i,e["default"]=n.EventIterator},96169:function(t,e,r){"use strict";var n=r(15941);Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(t){if(this.isStopped)return;const e={value:t,done:!1};if(this.pullQueue.length){const t=this.pullQueue.shift();t&&t.resolve(e)}else this.pushQueue.push(Promise.resolve(e)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():n&&n.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const t of this.pullQueue)t.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(t){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const e of this.pullQueue)e.reject(t);this.pullQueue.length=0}else{const e=Promise.reject(t);e.catch((()=>{})),this.pushQueue.push(e)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:t=>{const e=this.pushQueue.shift();return e?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),e):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((t,e)=>{this.pullQueue.push({resolve:t,reject:e})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class o{constructor(t,{highWaterMark:e=100,lowWaterMark:r=1}={}){const n=new i;n.highWaterMark=e,n.lowWaterMark=r,n.removeCallback=t({push:t=>n.push(t),stop:()=>n.stop(),fail:t=>n.fail(t),on:(t,e)=>{n.eventHandlers[t]=e}})||(()=>{}),this[Symbol.asyncIterator]=()=>n[Symbol.asyncIterator](),Object.freeze(this)}}e.EventIterator=o,e["default"]=o},6856:function(t,e,r){"use strict";r(21703);var n=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},c.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},c.prototype.emit=function(t,e,r,n,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,o),!0;case 6:return h.fn.call(h.context,e,r,n,o,s),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var f,d=h.length;for(c=0;c<d;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,r);break;case 4:h[c].fn.call(h[c].context,e,r,n);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];h[c].fn.apply(h[c].context,u)}}return!0},c.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||r&&s.context!==r||u(this,o);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||n&&!s[a].once||r&&s[a].context!==r)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},43793:function(t,e,r){"use strict";var n=r(15941);r(21703);var i,o="object"===typeof Reflect?Reflect:null,s=o&&"function"===typeof o.apply?o.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};function a(t){n&&n.warn&&n.warn(t)}i=o&&"function"===typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var u=Number.isNaN||function(t){return t!==t};function c(){c.init.call(this)}t.exports=c,t.exports.once=_,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var h=10;function l(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function f(t){return void 0===t._maxListeners?c.defaultMaxListeners:t._maxListeners}function d(t,e,r,n){var i,o,s;if(l(r),o=t._events,void 0===o?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"===typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=f(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a(u)}return t}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=p.bind(n);return i.listener=r,n.wrapFn=i,i}function g(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?v(i):b(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function b(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function w(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function v(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function _(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"===typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}S(t,e,o,{once:!0}),"error"!==e&&E(t,i,{once:!0})}))}function E(t,e,r){"function"===typeof t.on&&S(t,"error",e,r)}function S(t,e,r,n){if("function"===typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!==typeof t||t<0||u(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||u(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},c.prototype.getMaxListeners=function(){return f(this)},c.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[t];if(void 0===u)return!1;if("function"===typeof u)s(u,this,e);else{var c=u.length,h=b(u,c);for(r=0;r<c;++r)s(h[r],this,e)}return!0},c.prototype.addListener=function(t,e){return d(this,t,e,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(t,e){return d(this,t,e,!0)},c.prototype.once=function(t,e){return l(e),this.on(t,y(this,t,e)),this},c.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,y(this,t,e)),this},c.prototype.removeListener=function(t,e){var r,n,i,o,s;if(l(e),n=this._events,void 0===n)return this;if(r=n[t],void 0===r)return this;if(r===e||r.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():w(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)i=o[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],"function"===typeof e)this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},c.prototype.listeners=function(t){return g(this,t,!0)},c.prototype.rawListeners=function(t){return g(this,t,!1)},c.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},c.prototype.listenerCount=m,c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},13692:function(t,e,r){r(21703);var n=r(6779).Buffer,i=r(74993);function o(t,e,r,o){if(n.isBuffer(t)||(t=n.from(t,"binary")),e&&(n.isBuffer(e)||(e=n.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");var s=r/8,a=n.alloc(s),u=n.alloc(o||0),c=n.alloc(0);while(s>0||o>0){var h=new i;h.update(c),h.update(t),e&&h.update(e),c=h.digest();var l=0;if(s>0){var f=a.length-s;l=Math.min(s,c.length),c.copy(a,f,0,l),s-=l}if(l<c.length&&o>0){var d=u.length-o,p=Math.min(o,c.length-l);c.copy(u,d,l,l+p),o-=p}}return c.fill(0),{key:a,iv:u}}t.exports=o},12771:function(t,e,r){r(21703),t.exports=class{constructor(t){if(!(t>0)||0!==(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},22819:function(t,e,r){const n=r(12771);t.exports=class{constructor(t){this.hwm=t||16,this.head=new n(this.hwm),this.tail=this.head}push(t){if(!this.head.push(t)){const e=this.head;this.head=e.next=new n(2*this.head.buffer.length),this.head.push(t)}}shift(){const t=this.tail.shift();if(void 0===t&&this.tail.next){const t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return t}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},28154:function(t,e,r){"use strict";r(21703),t.exports=function(t,e){e||(e={}),"function"===typeof e&&(e={cmp:e});var r="boolean"===typeof e.cycles&&e.cycles,n=e.cmp&&function(t){return function(e){return function(r,n){var i={key:r,value:e[r]},o={key:n,value:e[n]};return t(i,o)}}}(e.cmp),i=[];return function t(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var o,s;if(Array.isArray(e)){for(s="[",o=0;o<e.length;o++)o&&(s+=","),s+=t(e[o])||"null";return s+"]"}if(null===e)return"null";if(-1!==i.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=i.push(e)-1,u=Object.keys(e).sort(n&&n(e));for(s="",o=0;o<u.length;o++){var c=u[o],h=t(e[c]);h&&(s&&(s+=","),s+=JSON.stringify(c)+":"+h)}return i.splice(a,1),"{"+s+"}"}}(t)}},54253:function(t,e,r){r(21703),t.exports=function(t){if(t){if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"===typeof t.next)return t}throw new Error("argument is not an iterator or iterable")}},86248:function(t){"use strict";t.exports=r;var e=Object.getPrototypeOf||function(t){return t.__proto__};function r(t){if(null===t||"object"!==typeof t)return t;if(t instanceof Object)var r={__proto__:e(t)};else r=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})),r}},41267:function(t,e,r){var n=r(15941),i=r(96027);r(92087);var o,s,a=r(45443),u=r(65095),c=r(91273),h=r(86248),l=r(9242);function f(){}function d(t,e){Object.defineProperty(t,o,{get:function(){return e}})}"function"===typeof Symbol&&"function"===typeof Symbol.for?(o=Symbol.for("graceful-fs.queue"),s=Symbol.for("graceful-fs.previous")):(o="___graceful-fs.queue",s="___graceful-fs.previous");var p,y=f;if(l.debuglog?y=l.debuglog("gfs4"):/\bgfs4\b/i.test({NODE_ENV:"production",BASE_URL:"/codstorage/"}.NODE_DEBUG||"")&&(y=function(){var t=l.format.apply(l,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),n.error(t)}),!a[o]){var g=r.g[o]||[];d(a,g),a.close=function(t){function e(e,r){return t.call(a,e,(function(t){t||w(),"function"===typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(e,s,{value:t}),e}(a.close),a.closeSync=function(t){function e(e){t.apply(a,arguments),w()}return Object.defineProperty(e,s,{value:t}),e}(a.closeSync),/\bgfs4\b/i.test({NODE_ENV:"production",BASE_URL:"/codstorage/"}.NODE_DEBUG||"")&&i.on("exit",(function(){y(a[o]),r(75130).equal(a[o].length,0)}))}function m(t){u(t),t.gracefulify=m,t.createReadStream=T,t.createWriteStream=R;var e=t.readFile;function r(t,r,n){return"function"===typeof r&&(n=r,r=null),i(t,r,n);function i(t,r,n,o){return e(t,r,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"===typeof n&&n.apply(this,arguments):b([i,[t,r,n],e,o||Date.now(),Date.now()])}))}}t.readFile=r;var n=t.writeFile;function o(t,e,r,i){return"function"===typeof r&&(i=r,r=null),o(t,e,r,i);function o(t,e,r,i,s){return n(t,e,r,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"===typeof i&&i.apply(this,arguments):b([o,[t,e,r,i],n,s||Date.now(),Date.now()])}))}}t.writeFile=o;var s=t.appendFile;function a(t,e,r,n){return"function"===typeof r&&(n=r,r=null),i(t,e,r,n);function i(t,e,r,n,o){return s(t,e,r,(function(s){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"===typeof n&&n.apply(this,arguments):b([i,[t,e,r,n],s,o||Date.now(),Date.now()])}))}}s&&(t.appendFile=a);var h=t.copyFile;function l(t,e,r,n){return"function"===typeof r&&(n=r,r=0),i(t,e,r,n);function i(t,e,r,n,o){return h(t,e,r,(function(s){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"===typeof n&&n.apply(this,arguments):b([i,[t,e,r,n],s,o||Date.now(),Date.now()])}))}}h&&(t.copyFile=l);var f=t.readdir;t.readdir=p;var d=/^v[0-5]\./;function p(t,e,r){"function"===typeof e&&(r=e,e=null);var n=d.test(i.version)?function(t,e,r,n){return f(t,o(t,e,r,n))}:function(t,e,r,n){return f(t,e,o(t,e,r,n))};return n(t,e,r);function o(t,e,r,i){return function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(s&&s.sort&&s.sort(),"function"===typeof r&&r.call(this,o,s)):b([n,[t,e,r],o,i||Date.now(),Date.now()])}}}if("v0.8"===i.version.substr(0,4)){var y=c(t);E=y.ReadStream,A=y.WriteStream}var g=t.ReadStream;g&&(E.prototype=Object.create(g.prototype),E.prototype.open=S);var w=t.WriteStream;w&&(A.prototype=Object.create(w.prototype),A.prototype.open=I),Object.defineProperty(t,"ReadStream",{get:function(){return E},set:function(t){E=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return A},set:function(t){A=t},enumerable:!0,configurable:!0});var v=E;Object.defineProperty(t,"FileReadStream",{get:function(){return v},set:function(t){v=t},enumerable:!0,configurable:!0});var _=A;function E(t,e){return this instanceof E?(g.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function S(){var t=this;k(t.path,t.flags,t.mode,(function(e,r){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=r,t.emit("open",r),t.read())}))}function A(t,e){return this instanceof A?(w.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function I(){var t=this;k(t.path,t.flags,t.mode,(function(e,r){e?(t.destroy(),t.emit("error",e)):(t.fd=r,t.emit("open",r))}))}function T(e,r){return new t.ReadStream(e,r)}function R(e,r){return new t.WriteStream(e,r)}Object.defineProperty(t,"FileWriteStream",{get:function(){return _},set:function(t){_=t},enumerable:!0,configurable:!0});var M=t.open;function k(t,e,r,n){return"function"===typeof r&&(n=r,r=null),i(t,e,r,n);function i(t,e,r,n,o){return M(t,e,r,(function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"===typeof n&&n.apply(this,arguments):b([i,[t,e,r,n],s,o||Date.now(),Date.now()])}))}}return t.open=k,t}function b(t){y("ENQUEUE",t[0].name,t[1]),a[o].push(t),v()}function w(){for(var t=Date.now(),e=0;e<a[o].length;++e)a[o][e].length>2&&(a[o][e][3]=t,a[o][e][4]=t);v()}function v(){if(clearTimeout(p),p=void 0,0!==a[o].length){var t=a[o].shift(),e=t[0],r=t[1],n=t[2],i=t[3],s=t[4];if(void 0===i)y("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){y("TIMEOUT",e.name,r);var u=r.pop();"function"===typeof u&&u.call(null,n)}else{var c=Date.now()-s,h=Math.max(s-i,1),l=Math.min(1.2*h,100);c>=l?(y("RETRY",e.name,r),e.apply(null,r.concat([i]))):a[o].push(t)}void 0===p&&(p=setTimeout(v,0))}}r.g[o]||d(r.g,a[o]),t.exports=m(h(a)),{NODE_ENV:"production",BASE_URL:"/codstorage/"}.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!a.__patched&&(t.exports=m(a),a.__patched=!0)},91273:function(t,e,r){var n=r(96027);r(92087),r(21703);var i=r(79367).Stream;function o(t){return{ReadStream:e,WriteStream:r};function e(r,o){if(!(this instanceof e))return new e(r,o);i.call(this);var s=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,o=o||{};for(var a=Object.keys(o),u=0,c=a.length;u<c;u++){var h=a[u];this[h]=o[h]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!==typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!==typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?t.open(this.path,this.flags,this.mode,(function(t,e){if(t)return s.emit("error",t),void(s.readable=!1);s.fd=e,s.emit("open",e),s._read()})):n.nextTick((function(){s._read()}))}function r(e,n){if(!(this instanceof r))return new r(e,n);i.call(this),this.path=e,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var o=Object.keys(n),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=n[u]}if(void 0!==this.start){if("number"!==typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}t.exports=o},65095:function(t,e,r){var n=r(96027),i=r(83208),o=n.cwd,s=null,a={NODE_ENV:"production",BASE_URL:"/codstorage/"}.GRACEFUL_FS_PLATFORM||n.platform;n.cwd=function(){return s||(s=o.call(n)),s};try{n.cwd()}catch(h){}if("function"===typeof n.chdir){var u=n.chdir;n.chdir=function(t){s=null,u.call(n,t)},Object.setPrototypeOf&&Object.setPrototypeOf(n.chdir,u)}function c(t){function e(t){t.lchmod=function(e,r,n){t.open(e,i.O_WRONLY|i.O_SYMLINK,r,(function(e,i){e?n&&n(e):t.fchmod(i,r,(function(e){t.close(i,(function(t){n&&n(e||t)}))}))}))},t.lchmodSync=function(e,r){var n,o=t.openSync(e,i.O_WRONLY|i.O_SYMLINK,r),s=!0;try{n=t.fchmodSync(o,r),s=!1}finally{if(s)try{t.closeSync(o)}catch(h){}else t.closeSync(o)}return n}}function r(t){i.hasOwnProperty("O_SYMLINK")&&t.futimes?(t.lutimes=function(e,r,n,o){t.open(e,i.O_SYMLINK,(function(e,i){e?o&&o(e):t.futimes(i,r,n,(function(e){t.close(i,(function(t){o&&o(e||t)}))}))}))},t.lutimesSync=function(e,r,n){var o,s=t.openSync(e,i.O_SYMLINK),a=!0;try{o=t.futimesSync(s,r,n),a=!1}finally{if(a)try{t.closeSync(s)}catch(h){}else t.closeSync(s)}return o}):t.futimes&&(t.lutimes=function(t,e,r,i){i&&n.nextTick(i)},t.lutimesSync=function(){})}function o(e){return e?function(r,n,i){return e.call(t,r,n,(function(t){d(t)&&(t=null),i&&i.apply(this,arguments)}))}:e}function s(e){return e?function(r,n){try{return e.call(t,r,n)}catch(h){if(!d(h))throw h}}:e}function u(e){return e?function(r,n,i,o){return e.call(t,r,n,i,(function(t){d(t)&&(t=null),o&&o.apply(this,arguments)}))}:e}function c(e){return e?function(r,n,i){try{return e.call(t,r,n,i)}catch(h){if(!d(h))throw h}}:e}function l(e){return e?function(r,n,i){function o(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"===typeof n&&(i=n,n=null),n?e.call(t,r,n,o):e.call(t,r,o)}:e}function f(e){return e?function(r,n){var i=n?e.call(t,r,n):e.call(t,r);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:e}function d(t){if(!t)return!0;if("ENOSYS"===t.code)return!0;var e=!n.getuid||0!==n.getuid();return!(!e||"EINVAL"!==t.code&&"EPERM"!==t.code)}i.hasOwnProperty("O_SYMLINK")&&n.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=u(t.chown),t.fchown=u(t.fchown),t.lchown=u(t.lchown),t.chmod=o(t.chmod),t.fchmod=o(t.fchmod),t.lchmod=o(t.lchmod),t.chownSync=c(t.chownSync),t.fchownSync=c(t.fchownSync),t.lchownSync=c(t.lchownSync),t.chmodSync=s(t.chmodSync),t.fchmodSync=s(t.fchmodSync),t.lchmodSync=s(t.lchmodSync),t.stat=l(t.stat),t.fstat=l(t.fstat),t.lstat=l(t.lstat),t.statSync=f(t.statSync),t.fstatSync=f(t.fstatSync),t.lstatSync=f(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(t,e,r){r&&n.nextTick(r)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(t,e,r,i){i&&n.nextTick(i)},t.lchownSync=function(){}),"win32"===a&&(t.rename="function"!==typeof t.rename?t.rename:function(e){function r(r,n,i){var o=Date.now(),s=0;e(r,n,(function a(u){if(u&&("EACCES"===u.code||"EPERM"===u.code)&&Date.now()-o<6e4)return setTimeout((function(){t.stat(n,(function(t,o){t&&"ENOENT"===t.code?e(r,n,a):i(u)}))}),s),void(s<100&&(s+=10));i&&i(u)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(r,e),r}(t.rename)),t.read="function"!==typeof t.read?t.read:function(e){function r(r,n,i,o,s,a){var u;if(a&&"function"===typeof a){var c=0;u=function(h,l,f){if(h&&"EAGAIN"===h.code&&c<10)return c++,e.call(t,r,n,i,o,s,u);a.apply(this,arguments)}}return e.call(t,r,n,i,o,s,u)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,e),r}(t.read),t.readSync="function"!==typeof t.readSync?t.readSync:function(e){return function(r,n,i,o,s){var a=0;while(1)try{return e.call(t,r,n,i,o,s)}catch(h){if("EAGAIN"===h.code&&a<10){a++;continue}throw h}}}(t.readSync)}t.exports=c},10761:function(t,e,r){"use strict";r(21703);var n=r(17662).Buffer,i=r(98141).Transform,o=r(81923);function s(t,e){if(!n.isBuffer(t)&&"string"!==typeof t)throw new TypeError(e+" must be a string or a buffer")}function a(t){i.call(this),this._block=n.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}o(a,i),a.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)},a.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)},a.prototype.update=function(t,e){if(s(t,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(t)||(t=n.from(t,e));var r=this._block,i=0;while(this._blockOffset+t.length-i>=this._blockSize){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[i++];this._update(),this._blockOffset=0}while(i<t.length)r[this._blockOffset++]=t[i++];for(var a=0,u=8*t.length;u>0;++a)this._length[a]+=u,u=this._length[a]/4294967296|0,u>0&&(this._length[a]-=4294967296*u);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},a.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=a},17662:function(t,e,r){r(21703);
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(15361),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},78730:function(t,e,r){var n=e;n.utils=r(13610),n.common=r(79291),n.sha=r(52762),n.ripemd=r(97),n.hmac=r(4133),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},79291:function(t,e,r){"use strict";var n=r(13610),i=r(14961);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var r=t.length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},4133:function(t,e,r){"use strict";var n=r(13610),i=r(14961);function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},97:function(t,e,r){"use strict";var n=r(13610),i=r(79291),o=n.rotl32,s=n.sum32,a=n.sum32_3,u=n.sum32_4,c=i.BlockHash;function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function l(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(h,c),e.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],c=this.h[3],h=this.h[4],b=r,w=n,v=i,_=c,E=h,S=0;S<80;S++){var A=s(o(u(r,l(S,n,i,c),t[p[S]+e],f(S)),g[S]),h);r=h,h=c,c=o(i,10),i=n,n=A,A=s(o(u(b,l(79-S,w,v,_),t[y[S]+e],d(S)),m[S]),E),b=E,E=_,_=o(v,10),v=w,w=A}A=a(this.h[1],i,_),this.h[1]=a(this.h[2],c,E),this.h[2]=a(this.h[3],h,b),this.h[3]=a(this.h[4],r,w),this.h[4]=a(this.h[0],n,v),this.h[0]=A},h.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},52762:function(t,e,r){"use strict";e.sha1=r(11070),e.sha224=r(37031),e.sha256=r(87875),e.sha384=r(9118),e.sha512=r(62067)},11070:function(t,e,r){"use strict";var n=r(13610),i=r(79291),o=r(75366),s=n.rotl32,a=n.sum32,u=n.sum32_5,c=o.ft_1,h=i.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,h),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],h=this.h[2],f=this.h[3],d=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),y=u(s(i,5),c(p,o,h,f),d,r[n],l[p]);d=f,f=h,h=s(o,30),o=i,i=y}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],h),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},37031:function(t,e,r){"use strict";var n=r(13610),i=r(87875);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},87875:function(t,e,r){"use strict";var n=r(13610),i=r(79291),o=r(75366),s=r(14961),a=n.sum32,u=n.sum32_4,c=n.sum32_5,h=o.ch32,l=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,y=o.g1_256,g=i.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}n.inherits(b,g),t.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=u(y(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],g=this.h[2],m=this.h[3],b=this.h[4],w=this.h[5],v=this.h[6],_=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var E=c(_,d(b),h(b,w,v),this.k[n],r[n]),S=a(f(i),l(i,o,g));_=v,v=w,w=b,b=a(m,E),m=g,g=o,o=i,i=a(E,S)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],b),this.h[5]=a(this.h[5],w),this.h[6]=a(this.h[6],v),this.h[7]=a(this.h[7],_)},b.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},9118:function(t,e,r){"use strict";var n=r(13610),i=r(62067);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},62067:function(t,e,r){"use strict";var n=r(13610),i=r(79291),o=r(14961),s=n.rotr64_hi,a=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,h=n.sum64,l=n.sum64_hi,f=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,y=n.sum64_5_hi,g=n.sum64_5_lo,m=i.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function w(){if(!(this instanceof w))return new w;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function v(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function _(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function E(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function S(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function A(t,e){var r=s(t,e,28),n=s(e,t,2),i=s(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function I(t,e){var r=a(t,e,28),n=a(e,t,2),i=a(e,t,7),o=r^n^i;return o<0&&(o+=4294967296),o}function T(t,e){var r=s(t,e,14),n=s(t,e,18),i=s(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function R(t,e){var r=a(t,e,14),n=a(t,e,18),i=a(e,t,9),o=r^n^i;return o<0&&(o+=4294967296),o}function M(t,e){var r=s(t,e,1),n=s(t,e,8),i=u(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function k(t,e){var r=a(t,e,1),n=a(t,e,8),i=c(t,e,7),o=r^n^i;return o<0&&(o+=4294967296),o}function C(t,e){var r=s(t,e,19),n=s(e,t,29),i=u(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}function O(t,e){var r=a(t,e,19),n=a(e,t,29),i=c(t,e,6),o=r^n^i;return o<0&&(o+=4294967296),o}n.inherits(w,m),t.exports=w,w.blockSize=1024,w.outSize=512,w.hmacStrength=192,w.padLength=128,w.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=C(r[n-4],r[n-3]),o=O(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],u=M(r[n-30],r[n-29]),c=k(r[n-30],r[n-29]),h=r[n-32],l=r[n-31];r[n]=d(i,o,s,a,u,c,h,l),r[n+1]=p(i,o,s,a,u,c,h,l)}},w.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],d=this.h[6],p=this.h[7],m=this.h[8],b=this.h[9],w=this.h[10],M=this.h[11],k=this.h[12],C=this.h[13],O=this.h[14],P=this.h[15];o(this.k.length===r.length);for(var B=0;B<r.length;B+=2){var x=O,N=P,D=T(m,b),L=R(m,b),U=v(m,b,w,M,k,C),j=_(m,b,w,M,k,C),F=this.k[B],K=this.k[B+1],$=r[B],q=r[B+1],H=y(x,N,D,L,U,j,F,K,$,q),z=g(x,N,D,L,U,j,F,K,$,q);x=A(n,i),N=I(n,i),D=E(n,i,s,a,u,c),L=S(n,i,s,a,u,c);var V=l(x,N,D,L),G=f(x,N,D,L);O=k,P=C,k=w,C=M,w=m,M=b,m=l(d,p,H,z),b=f(p,p,H,z),d=u,p=c,u=s,c=a,s=n,a=i,n=l(H,z,V,G),i=f(H,z,V,G)}h(this.h,0,n,i),h(this.h,2,s,a),h(this.h,4,u,c),h(this.h,6,d,p),h(this.h,8,m,b),h(this.h,10,w,M),h(this.h,12,k,C),h(this.h,14,O,P)},w.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},75366:function(t,e,r){"use strict";var n=r(13610),i=n.rotr32;function o(t,e,r,n){return 0===t?s(e,r,n):1===t||3===t?u(e,r,n):2===t?a(e,r,n):void 0}function s(t,e,r){return t&e^~t&r}function a(t,e,r){return t&e^t&r^e&r}function u(t,e,r){return t^e^r}function c(t){return i(t,2)^i(t,13)^i(t,22)}function h(t){return i(t,6)^i(t,11)^i(t,25)}function l(t){return i(t,7)^i(t,18)^t>>>3}function f(t){return i(t,17)^i(t,19)^t>>>10}e.ft_1=o,e.ch32=s,e.maj32=a,e.p32=u,e.s0_256=c,e.s1_256=h,e.g0_256=l,e.g1_256=f},13610:function(t,e,r){"use strict";var n=r(14961),i=r(81923);function o(t,e){return 55296===(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320===(64512&t.charCodeAt(e+1)))}function s(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"===typeof t)if(e){if("hex"===e)for(t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(t,i)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r}function a(t){for(var e="",r=0;r<t.length;r++)e+=h(t[r].toString(16));return e}function u(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24;return e>>>0}function c(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=u(i)),r+=l(i.toString(16))}return r}function h(t){return 1===t.length?"0"+t:t}function l(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}function f(t,e,r,i){var o=r-e;n(o%4===0);for(var s=new Array(o/4),a=0,u=e;a<s.length;a++,u+=4){var c;c="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[a]=c>>>0}return s}function d(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r}function p(t,e){return t>>>e|t<<32-e}function y(t,e){return t<<e|t>>>32-e}function g(t,e){return t+e>>>0}function m(t,e,r){return t+e+r>>>0}function b(t,e,r,n){return t+e+r+n>>>0}function w(t,e,r,n,i){return t+e+r+n+i>>>0}function v(t,e,r,n){var i=t[e],o=t[e+1],s=n+o>>>0,a=(s<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=s}function _(t,e,r,n){var i=e+n>>>0,o=(i<e?1:0)+t+r;return o>>>0}function E(t,e,r,n){var i=e+n;return i>>>0}function S(t,e,r,n,i,o,s,a){var u=0,c=e;c=c+n>>>0,u+=c<e?1:0,c=c+o>>>0,u+=c<o?1:0,c=c+a>>>0,u+=c<a?1:0;var h=t+r+i+s+u;return h>>>0}function A(t,e,r,n,i,o,s,a){var u=e+n+o+a;return u>>>0}function I(t,e,r,n,i,o,s,a,u,c){var h=0,l=e;l=l+n>>>0,h+=l<e?1:0,l=l+o>>>0,h+=l<o?1:0,l=l+a>>>0,h+=l<a?1:0,l=l+c>>>0,h+=l<c?1:0;var f=t+r+i+s+u+h;return f>>>0}function T(t,e,r,n,i,o,s,a,u,c){var h=e+n+o+a+c;return h>>>0}function R(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}function M(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}function k(t,e,r){return t>>>r}function C(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}e.inherits=i,e.toArray=s,e.toHex=a,e.htonl=u,e.toHex32=c,e.zero2=h,e.zero8=l,e.join32=f,e.split32=d,e.rotr32=p,e.rotl32=y,e.sum32=g,e.sum32_3=m,e.sum32_4=b,e.sum32_5=w,e.sum64=v,e.sum64_hi=_,e.sum64_lo=E,e.sum64_4_hi=S,e.sum64_4_lo=A,e.sum64_5_hi=I,e.sum64_5_lo=T,e.rotr64_hi=R,e.rotr64_lo=M,e.shr64_hi=k,e.shr64_lo=C},98694:function(t,e,r){r(21703),t.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),n=Object.create(null);function i(i,o){r[i]=o,e++,e>=t&&(e=0,n=r,r=Object.create(null))}return{has:function(t){return void 0!==r[t]||void 0!==n[t]},remove:function(t){void 0!==r[t]&&(r[t]=void 0),void 0!==n[t]&&(n[t]=void 0)},get:function(t){var e=r[t];return void 0!==e?e:void 0!==(e=n[t])?(i(t,e),e):void 0},set:function(t,e){void 0!==r[t]?r[t]=e:i(t,e)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},35592:function(t,e,r){var n,i=r(96027);r(21703),r(48675),r(3462),r(37380),r(1118),
/*
 * [hi-base32]{@link https://github.com/emn178/hi-base32}
 *
 * @version 0.5.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
function(){"use strict";var e="object"===typeof window?window:{},o=!e.HI_BASE32_NO_NODE_JS&&"object"===typeof i&&i.versions&&i.versions.node;o&&(e=r.g);var s=!e.HI_BASE32_NO_COMMON_JS&&t.exports,a=r.amdO,u="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),c={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},h=[0,0,0,0,0,0,0,0],l=function(t,e){e.length>10&&(e="..."+e.substr(-10));var r=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+t+" bytes: "+e+" <-");throw r.position=t,r},f=function(t){var e,r,n="",i=t.length,o=0,s=0;while(o<i)if(e=t[o++],e<=127)n+=String.fromCharCode(e);else{e>191&&e<=223?(r=31&e,s=1):e<=239?(r=15&e,s=2):e<=247?(r=7&e,s=3):l(o,n);for(var a=0;a<s;++a)e=t[o++],(e<128||e>191)&&l(o,n),r<<=6,r+=63&e;r>=55296&&r<=57343&&l(o,n),r>1114111&&l(o,n),r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+(1023&r)))}return n},d=function(t){if(""===t)return[];if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");t=t.replace(/=/g,"");for(var e,r,n,i,o,s,a,u,h=[],l=0,f=t.length,d=0,p=f>>3<<3;d<p;)e=c[t.charAt(d++)],r=c[t.charAt(d++)],n=c[t.charAt(d++)],i=c[t.charAt(d++)],o=c[t.charAt(d++)],s=c[t.charAt(d++)],a=c[t.charAt(d++)],u=c[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|o>>>1),h[l++]=255&(o<<7|s<<2|a>>>3),h[l++]=255&(a<<5|u);var y=f-p;return 2===y?(e=c[t.charAt(d++)],r=c[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2)):4===y?(e=c[t.charAt(d++)],r=c[t.charAt(d++)],n=c[t.charAt(d++)],i=c[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4)):5===y?(e=c[t.charAt(d++)],r=c[t.charAt(d++)],n=c[t.charAt(d++)],i=c[t.charAt(d++)],o=c[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|o>>>1)):7===y&&(e=c[t.charAt(d++)],r=c[t.charAt(d++)],n=c[t.charAt(d++)],i=c[t.charAt(d++)],o=c[t.charAt(d++)],s=c[t.charAt(d++)],a=c[t.charAt(d++)],h[l++]=255&(e<<3|r>>>2),h[l++]=255&(r<<6|n<<1|i>>>4),h[l++]=255&(i<<4|o>>>1),h[l++]=255&(o<<7|s<<2|a>>>3)),h},p=function(t){for(var e,r,n,i,o,s="",a=t.length,c=0,h=5*parseInt(a/5);c<h;)e=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c++),i=t.charCodeAt(c++),o=t.charCodeAt(c++),s+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[31&(n<<1|i>>>7)]+u[i>>>2&31]+u[31&(i<<3|o>>>5)]+u[31&o];var l=a-h;return 1===l?(e=t.charCodeAt(c),s+=u[e>>>3]+u[e<<2&31]+"======"):2===l?(e=t.charCodeAt(c++),r=t.charCodeAt(c),s+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[r<<4&31]+"===="):3===l?(e=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c),s+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[n<<1&31]+"==="):4===l&&(e=t.charCodeAt(c++),r=t.charCodeAt(c++),n=t.charCodeAt(c++),i=t.charCodeAt(c),s+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[31&(n<<1|i>>>7)]+u[i>>>2&31]+u[i<<3&31]+"="),s},y=function(t){var e,r,n,i,o,s,a,c=!1,l="",f=0,d=0,p=t.length;if(""===t)return l;do{for(h[0]=h[5],h[1]=h[6],h[2]=h[7],a=d;f<p&&a<5;++f)s=t.charCodeAt(f),s<128?h[a++]=s:s<2048?(h[a++]=192|s>>6,h[a++]=128|63&s):s<55296||s>=57344?(h[a++]=224|s>>12,h[a++]=128|s>>6&63,h[a++]=128|63&s):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++f)),h[a++]=240|s>>18,h[a++]=128|s>>12&63,h[a++]=128|s>>6&63,h[a++]=128|63&s);a-d,d=a-5,f===p&&++f,f>p&&a<6&&(c=!0),e=h[0],a>4?(r=h[1],n=h[2],i=h[3],o=h[4],l+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[31&(n<<1|i>>>7)]+u[i>>>2&31]+u[31&(i<<3|o>>>5)]+u[31&o]):1===a?l+=u[e>>>3]+u[e<<2&31]+"======":2===a?(r=h[1],l+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[r<<4&31]+"===="):3===a?(r=h[1],n=h[2],l+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[n<<1&31]+"==="):(r=h[1],n=h[2],i=h[3],l+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[31&(n<<1|i>>>7)]+u[i>>>2&31]+u[i<<3&31]+"=")}while(!c);return l},g=function(t){for(var e,r,n,i,o,s="",a=t.length,c=0,h=5*parseInt(a/5);c<h;)e=t[c++],r=t[c++],n=t[c++],i=t[c++],o=t[c++],s+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[31&(n<<1|i>>>7)]+u[i>>>2&31]+u[31&(i<<3|o>>>5)]+u[31&o];var l=a-h;return 1===l?(e=t[c],s+=u[e>>>3]+u[e<<2&31]+"======"):2===l?(e=t[c++],r=t[c],s+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[r<<4&31]+"===="):3===l?(e=t[c++],r=t[c++],n=t[c],s+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[n<<1&31]+"==="):4===l&&(e=t[c++],r=t[c++],n=t[c++],i=t[c],s+=u[e>>>3]+u[31&(e<<2|r>>>6)]+u[r>>>1&31]+u[31&(r<<4|n>>>4)]+u[31&(n<<1|i>>>7)]+u[i>>>2&31]+u[i<<3&31]+"="),s},m=function(t,e){var r="string"!==typeof t;return r&&t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),r?g(t):e?p(t):y(t)},b=function(t,e){if(!e)return f(d(t));if(""===t)return"";if(!/^[A-Z2-7=]+$/.test(t))throw new Error("Invalid base32 characters");var r,n,i,o,s,a,u,h,l="",p=t.indexOf("=");-1===p&&(p=t.length);for(var y=0,g=p>>3<<3;y<g;)r=c[t.charAt(y++)],n=c[t.charAt(y++)],i=c[t.charAt(y++)],o=c[t.charAt(y++)],s=c[t.charAt(y++)],a=c[t.charAt(y++)],u=c[t.charAt(y++)],h=c[t.charAt(y++)],l+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))+String.fromCharCode(255&(s<<7|a<<2|u>>>3))+String.fromCharCode(255&(u<<5|h));var m=p-g;return 2===m?(r=c[t.charAt(y++)],n=c[t.charAt(y++)],l+=String.fromCharCode(255&(r<<3|n>>>2))):4===m?(r=c[t.charAt(y++)],n=c[t.charAt(y++)],i=c[t.charAt(y++)],o=c[t.charAt(y++)],l+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))):5===m?(r=c[t.charAt(y++)],n=c[t.charAt(y++)],i=c[t.charAt(y++)],o=c[t.charAt(y++)],s=c[t.charAt(y++)],l+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))):7===m&&(r=c[t.charAt(y++)],n=c[t.charAt(y++)],i=c[t.charAt(y++)],o=c[t.charAt(y++)],s=c[t.charAt(y++)],a=c[t.charAt(y++)],u=c[t.charAt(y++)],l+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))+String.fromCharCode(255&(s<<7|a<<2|u>>>3))),l},w={encode:m,decode:b};b.asBytes=d,s?t.exports=w:(e.base32=w,a&&(n=function(){return w}.call(w,r,w,t),void 0===n||(t.exports=n)))}()},72570:function(t,e,r){"use strict";r(21703);var n=r(78730),i=r(26605),o=r(14961);function s(t){if(!(this instanceof s))return new s(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),r=i.toArray(t.nonce,t.nonceEnc||"hex"),n=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}t.exports=s,s.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},s.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(t,e,r,n){"string"!==typeof e&&(n=r,r=e,e=null),t=i.toArray(t,e),r=i.toArray(r,n),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},s.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof e&&(n=r,r=e,e=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));var o=[];while(o.length<t)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(r),this._reseed++,i.encode(s,e)}},27055:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,f=r?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?f/u:f*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+d]=255&s,d+=p,s/=256,c-=8);t[r+d-p]|=128*y}},42135:function(t){
/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */
(function(){var e;function r(t,n){var i=this instanceof r?this:e;if(i.reset(n),"string"===typeof t&&t.length>0&&i.hash(t),i!==this)return i}r.prototype.hash=function(t){var e,r,n,i,o;switch(o=t.length,this.len+=o,r=this.k1,n=0,this.rem){case 0:r^=o>n?65535&t.charCodeAt(n++):0;case 1:r^=o>n?(65535&t.charCodeAt(n++))<<8:0;case 2:r^=o>n?(65535&t.charCodeAt(n++))<<16:0;case 3:r^=o>n?(255&t.charCodeAt(n))<<24:0,r^=o>n?(65280&t.charCodeAt(n++))>>8:0}if(this.rem=o+this.rem&3,o-=this.rem,o>0){e=this.h1;while(1){if(r=11601*r+3432906752*(65535&r)&4294967295,r=r<<15|r>>>17,r=13715*r+461832192*(65535&r)&4294967295,e^=r,e=e<<13|e>>>19,e=5*e+3864292196&4294967295,n>=o)break;r=65535&t.charCodeAt(n++)^(65535&t.charCodeAt(n++))<<8^(65535&t.charCodeAt(n++))<<16,i=t.charCodeAt(n++),r^=(255&i)<<24^(65280&i)>>8}switch(r=0,this.rem){case 3:r^=(65535&t.charCodeAt(n+2))<<16;case 2:r^=(65535&t.charCodeAt(n+1))<<8;case 1:r^=65535&t.charCodeAt(n)}this.h1=e}return this.k1=r,this},r.prototype.result=function(){var t,e;return t=this.k1,e=this.h1,t>0&&(t=11601*t+3432906752*(65535&t)&4294967295,t=t<<15|t>>>17,t=13715*t+461832192*(65535&t)&4294967295,e^=t),e^=this.len,e^=e>>>16,e=51819*e+2246770688*(65535&e)&4294967295,e^=e>>>13,e=44597*e+3266445312*(65535&e)&4294967295,e^=e>>>16,e>>>0},r.prototype.reset=function(t){return this.h1="number"===typeof t?t:0,this.rem=this.k1=this.len=0,this},e=new r,t.exports=r})()},37384:function(t,e,r){"use strict";r(21703),t.exports=(t,e=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},"string"!==typeof t)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if("number"!==typeof e)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if("string"!==typeof r.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(0===e)return t;const n=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(n,r.indent.repeat(e))}},66050:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.v6=e.AddressError=e.Address6=e.Address4=void 0;var s=r(17407);Object.defineProperty(e,"Address4",{enumerable:!0,get:function(){return s.Address4}});var a=r(64009);Object.defineProperty(e,"Address6",{enumerable:!0,get:function(){return a.Address6}});var u=r(5803);Object.defineProperty(e,"AddressError",{enumerable:!0,get:function(){return u.AddressError}});var c=o(r(77345));e.v6={helpers:c}},5803:function(t,e,r){"use strict";r(21703);var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AddressError=void 0;var i=function(t){function e(e,r){var n=t.call(this,e)||this;return n.name="AddressError",null!==r&&(n.parseMessage=r),n}return n(e,t),e}(Error);e.AddressError=i},64848:function(t,e){"use strict";function r(t){return!(this.subnetMask<t.subnetMask)&&this.mask(t.subnetMask)===t.mask()}function n(t){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===t&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}}Object.defineProperty(e,"__esModule",{value:!0}),e.isCorrect=e.isInSubnet=void 0,e.isInSubnet=r,e.isCorrect=n},17407:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Address4=void 0;var s=o(r(64848)),a=o(r(4229)),u=r(5803),c=r(22237),h=r(65526),l=function(){function t(t){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=s.isCorrect(a.BITS),this.isInSubnet=s.isInSubnet,this.address=t;var e=a.RE_SUBNET_STRING.exec(t);if(e){if(this.parsedSubnet=e[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>a.BITS)throw new u.AddressError("Invalid subnet mask.");t=t.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}return t.isValid=function(e){try{return new t(e),!0}catch(r){return!1}},t.prototype.parse=function(t){var e=t.split(".");if(!t.match(a.RE_ADDRESS))throw new u.AddressError("Invalid IPv4 address.");return e},t.prototype.correctForm=function(){return this.parsedAddress.map((function(t){return parseInt(t,10)})).join(".")},t.fromHex=function(e){var r,n=e.replace(/:/g,"").padStart(8,"0"),i=[];for(r=0;r<8;r+=2){var o=n.slice(r,r+2);i.push(parseInt(o,16))}return new t(i.join("."))},t.fromInteger=function(e){return t.fromHex(e.toString(16))},t.fromArpa=function(e){var r=e.replace(/(\.in-addr\.arpa)?\.$/,""),n=r.split(".").reverse().join(".");return new t(n)},t.prototype.toHex=function(){return this.parsedAddress.map((function(t){return h.sprintf("%02x",parseInt(t,10))})).join(":")},t.prototype.toArray=function(){return this.parsedAddress.map((function(t){return parseInt(t,10)}))},t.prototype.toGroup6=function(){var t,e=[];for(t=0;t<a.GROUPS;t+=2){var r=h.sprintf("%02x%02x",parseInt(this.parsedAddress[t],10),parseInt(this.parsedAddress[t+1],10));e.push(h.sprintf("%x",parseInt(r,16)))}return e.join(":")},t.prototype.bigInteger=function(){return new c.BigInteger(this.parsedAddress.map((function(t){return h.sprintf("%02x",parseInt(t,10))})).join(""),16)},t.prototype._startAddress=function(){return new c.BigInteger(this.mask()+"0".repeat(a.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new c.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new c.BigInteger(this.mask()+"1".repeat(a.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new c.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.fromBigInteger=function(e){return t.fromInteger(parseInt(e.toString(),10))},t.prototype.mask=function(t){return void 0===t&&(t=this.subnetMask),this.getBitsBase2(0,t)},t.prototype.getBitsBase2=function(t,e){return this.binaryZeroPad().slice(t,e)},t.prototype.reverseForm=function(t){t||(t={});var e=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?e:h.sprintf("%s.in-addr.arpa.",e)},t.prototype.isMulticast=function(){return this.isInSubnet(new t("224.0.0.0/4"))},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(a.BITS,"0")},t.prototype.groupForV6=function(){var t=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,h.sprintf('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',t.slice(0,2).join("."),t.slice(2,4).join(".")))},t}();e.Address4=l},64009:function(t,e,r){"use strict";r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Address6=void 0;var a=o(r(64848)),u=o(r(4229)),c=o(r(48437)),h=o(r(77345)),l=r(17407),f=r(46098),d=r(5803),p=r(22237),y=r(65526);function g(t){if(!t)throw new Error("Assertion failed.")}function m(t){var e=/(\d+)(\d{3})/;while(e.test(t))t=t.replace(e,"$1,$2");return t}function b(t){return t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),t=t.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),t}function w(t,e){var r,n=[],i=[];for(r=0;r<t.length;r++)r<e[0]?n.push(t[r]):r>e[1]&&i.push(t[r]);return n.concat(["compact"]).concat(i)}function v(t){return y.sprintf("%04x",parseInt(t,16))}function _(t){return 255&t}var E=function(){function t(t,e){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=a.isInSubnet,this.isCorrect=a.isCorrect(c.BITS),this.groups=void 0===e?c.GROUPS:e,this.address=t;var r=c.RE_SUBNET_STRING.exec(t);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>c.BITS)throw new d.AddressError("Invalid subnet mask.");t=t.replace(c.RE_SUBNET_STRING,"")}else if(/\//.test(t))throw new d.AddressError("Invalid subnet mask.");var n=c.RE_ZONE_STRING.exec(t);n&&(this.zone=n[0],t=t.replace(c.RE_ZONE_STRING,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}return t.isValid=function(e){try{return new t(e),!0}catch(r){return!1}},t.fromBigInteger=function(e){var r,n=e.toString(16).padStart(32,"0"),i=[];for(r=0;r<c.GROUPS;r++)i.push(n.slice(4*r,4*(r+1)));return new t(i.join(":"))},t.fromURL=function(e){var r,n,i=null;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(n=c.RE_URL_WITH_PORT.exec(e),null===n)return{error:"failed to parse address with port",address:null,port:null};r=n[1],i=n[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),n=c.RE_URL.exec(e),null===n)return{error:"failed to parse address from URL",address:null,port:null};r=n[1]}else r=e;return i?(i=parseInt(i,10),(i<0||i>65536)&&(i=null)):i=null,{address:new t(r),port:i}},t.fromAddress4=function(e){var r=new l.Address4(e),n=c.BITS-(u.BITS-r.subnetMask);return new t("::ffff:"+r.correctForm()+"/"+n)},t.fromArpa=function(e){var r=e.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(63!==r.length)throw new d.AddressError("Invalid 'ip6.arpa' form.");for(var i=r.split(".").reverse(),o=n;o>0;o--){var s=4*o;i.splice(s,0,":")}return r=i.join(""),new t(r)},t.prototype.microsoftTranscription=function(){return y.sprintf("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},t.prototype.mask=function(t){return void 0===t&&(t=this.subnetMask),this.getBitsBase2(0,t)},t.prototype.possibleSubnets=function(t){void 0===t&&(t=128);var e=c.BITS-this.subnetMask,r=Math.abs(t-c.BITS),n=e-r;return n<0?"0":m(new p.BigInteger("2",10).pow(n).toString(10))},t.prototype._startAddress=function(){return new p.BigInteger(this.mask()+"0".repeat(c.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new p.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new p.BigInteger(this.mask()+"1".repeat(c.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new p.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.prototype.getScope=function(){var t=c.SCOPES[this.getBits(12,16).intValue()];return"Global unicast"===this.getType()&&"Link local"!==t&&(t="Global"),t||"Unknown"},t.prototype.getType=function(){for(var e=0,r=Object.keys(c.TYPES);e<r.length;e++){var n=r[e];if(this.isInSubnet(new t(n)))return c.TYPES[n]}return"Global unicast"},t.prototype.getBits=function(t,e){return new p.BigInteger(this.getBitsBase2(t,e),2)},t.prototype.getBitsBase2=function(t,e){return this.binaryZeroPad().slice(t,e)},t.prototype.getBitsBase16=function(t,e){var r=e-t;if(r%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,e).toString(16).padStart(r/4,"0")},t.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,c.BITS)},t.prototype.reverseForm=function(t){t||(t={});var e=Math.floor(this.subnetMask/4),r=this.canonicalForm().replace(/:/g,"").split("").slice(0,e).reverse().join(".");return e>0?t.omitSuffix?r:y.sprintf("%s.ip6.arpa.",r):t.omitSuffix?"":"ip6.arpa."},t.prototype.correctForm=function(){var t,e=[],r=0,n=[];for(t=0;t<this.parsedAddress.length;t++){var i=parseInt(this.parsedAddress[t],16);0===i&&r++,0!==i&&r>0&&(r>1&&n.push([t-r,t-1]),r=0)}r>1&&n.push([this.parsedAddress.length-r,this.parsedAddress.length-1]);var o=n.map((function(t){return t[1]-t[0]+1}));if(n.length>0){var s=o.indexOf(Math.max.apply(Math,o));e=w(this.parsedAddress,n[s])}else e=this.parsedAddress;for(t=0;t<e.length;t++)"compact"!==e[t]&&(e[t]=parseInt(e[t],16).toString(16));var a=e.join(":");return a=a.replace(/^compact$/,"::"),a=a.replace(/^compact|compact$/,":"),a=a.replace(/compact/,""),a},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(c.BITS,"0")},t.prototype.parse4in6=function(t){var e=t.split(":"),r=e.slice(-1)[0],n=r.match(u.RE_ADDRESS);if(n){this.parsedAddress4=n[0],this.address4=new l.Address4(this.parsedAddress4);for(var i=0;i<this.address4.groups;i++)if(/^0[0-9]+/.test(this.address4.parsedAddress[i]))throw new d.AddressError("IPv4 addresses can't have leading zeroes.",t.replace(u.RE_ADDRESS,this.address4.parsedAddress.map(b).join(".")));this.v4=!0,e[e.length-1]=this.address4.toGroup6(),t=e.join(":")}return t},t.prototype.parse=function(t){t=this.parse4in6(t);var e=t.match(c.RE_BAD_CHARACTERS);if(e)throw new d.AddressError(y.sprintf("Bad character%s detected in address: %s",e.length>1?"s":"",e.join("")),t.replace(c.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));var r=t.match(c.RE_BAD_ADDRESS);if(r)throw new d.AddressError(y.sprintf("Address failed regex: %s",r.join("")),t.replace(c.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));var n=[],i=t.split("::");if(2===i.length){var o=i[0].split(":"),s=i[1].split(":");1===o.length&&""===o[0]&&(o=[]),1===s.length&&""===s[0]&&(s=[]);var a=this.groups-(o.length+s.length);if(!a)throw new d.AddressError("Error parsing groups");this.elidedGroups=a,this.elisionBegin=o.length,this.elisionEnd=o.length+this.elidedGroups,n=n.concat(o);for(var u=0;u<a;u++)n.push("0");n=n.concat(s)}else{if(1!==i.length)throw new d.AddressError("Too many :: groups found");n=t.split(":"),this.elidedGroups=0}if(n=n.map((function(t){return y.sprintf("%x",parseInt(t,16))})),n.length!==this.groups)throw new d.AddressError("Incorrect number of groups found");return n},t.prototype.canonicalForm=function(){return this.parsedAddress.map(v).join(":")},t.prototype.decimal=function(){return this.parsedAddress.map((function(t){return y.sprintf("%05d",parseInt(t,16))})).join(":")},t.prototype.bigInteger=function(){return new p.BigInteger(this.parsedAddress.map(v).join(""),16)},t.prototype.to4=function(){var t=this.binaryZeroPad().split("");return l.Address4.fromHex(new p.BigInteger(t.slice(96,128).join(""),2).toString(16))},t.prototype.to4in6=function(){var e=this.to4(),r=new t(this.parsedAddress.slice(0,6).join(":"),6),n=r.correctForm(),i="";return/:$/.test(n)||(i=":"),n+i+e.address},t.prototype.inspectTeredo=function(){var t=this.getBitsBase16(0,32),e=this.getBits(80,96).xor(new p.BigInteger("ffff",16)).toString(),r=l.Address4.fromHex(this.getBitsBase16(32,64)),n=l.Address4.fromHex(this.getBits(96,128).xor(new p.BigInteger("ffffffff",16)).toString(16)),i=this.getBits(64,80),o=this.getBitsBase2(64,80),s=i.testBit(15),a=i.testBit(14),u=i.testBit(8),c=i.testBit(9),h=new p.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:y.sprintf("%s:%s",t.slice(0,4),t.slice(4,8)),server4:r.address,client4:n.address,flags:o,coneNat:s,microsoft:{reserved:a,universalLocal:c,groupIndividual:u,nonce:h},udpPort:e}},t.prototype.inspect6to4=function(){var t=this.getBitsBase16(0,16),e=l.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:y.sprintf("%s",t.slice(0,4)),gateway:e.address}},t.prototype.to6to4=function(){if(!this.is4())return null;var e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new t(e)},t.prototype.toByteArray=function(){var t=this.bigInteger().toByteArray();return 17===t.length&&0===t[0]?t.slice(1):t},t.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(_)},t.fromByteArray=function(t){return this.fromUnsignedByteArray(t.map(_))},t.fromUnsignedByteArray=function(e){for(var r=new p.BigInteger("256",10),n=new p.BigInteger("0",10),i=new p.BigInteger("1",10),o=e.length-1;o>=0;o--)n=n.add(i.multiply(new p.BigInteger(e[o].toString(10),10))),i=i.multiply(r);return t.fromBigInteger(n)},t.prototype.isCanonical=function(){return this.addressMinusSuffix===this.canonicalForm()},t.prototype.isLinkLocal=function(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)},t.prototype.isMulticast=function(){return"Multicast"===this.getType()},t.prototype.is4=function(){return this.v4},t.prototype.isTeredo=function(){return this.isInSubnet(new t("2001::/32"))},t.prototype.is6to4=function(){return this.isInSubnet(new t("2002::/16"))},t.prototype.isLoopback=function(){return"Loopback"===this.getType()},t.prototype.href=function(t){return t=void 0===t?"":y.sprintf(":%s",t),y.sprintf("http://[%s]%s/",this.correctForm(),t)},t.prototype.link=function(t){t||(t={}),void 0===t.className&&(t.className=""),void 0===t.prefix&&(t.prefix="/#address="),void 0===t.v4&&(t.v4=!1);var e=this.correctForm;return t.v4&&(e=this.to4in6),t.className?y.sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',t.prefix,e.call(this),t.className):y.sprintf('<a href="%1$s%2$s">%2$s</a>',t.prefix,e.call(this))},t.prototype.group=function(){if(0===this.elidedGroups)return h.simpleGroup(this.address).join(":");g("number"===typeof this.elidedGroups),g("number"===typeof this.elisionBegin);var t=[],e=this.address.split("::"),r=e[0],n=e[1];r.length?t.push.apply(t,h.simpleGroup(r)):t.push("");for(var i=["hover-group"],o=this.elisionBegin;o<this.elisionBegin+this.elidedGroups;o++)i.push(y.sprintf("group-%d",o));return t.push(y.sprintf('<span class="%s"></span>',i.join(" "))),n.length?t.push.apply(t,h.simpleGroup(n,this.elisionEnd)):t.push(""),this.is4()&&(g(this.address4 instanceof l.Address4),t.pop(),t.push(this.address4.groupForV6())),t.join(":")},t.prototype.regularExpressionString=function(e){void 0===e&&(e=!1);var r=[],n=new t(this.correctForm());if(0===n.elidedGroups)r.push(f.simpleRegularExpression(n.parsedAddress));else if(n.elidedGroups===c.GROUPS)r.push(f.possibleElisions(c.GROUPS));else{var i=n.address.split("::");i[0].length&&r.push(f.simpleRegularExpression(i[0].split(":"))),g("number"===typeof n.elidedGroups),r.push(f.possibleElisions(n.elidedGroups,0!==i[0].length,0!==i[1].length)),i[1].length&&r.push(f.simpleRegularExpression(i[1].split(":"))),r=[r.join(":")]}return e||(r=s(s(["(?=^|",f.ADDRESS_BOUNDARY,"|[^\\w\\:])("],r),[")(?=[^\\w\\:]|",f.ADDRESS_BOUNDARY,"|$)"])),r.join("")},t.prototype.regularExpression=function(t){return void 0===t&&(t=!1),new RegExp(this.regularExpressionString(t),"i")},t}();e.Address6=E},4229:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RE_SUBNET_STRING=e.RE_ADDRESS=e.GROUPS=e.BITS=void 0,e.BITS=32,e.GROUPS=4,e.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,e.RE_SUBNET_STRING=/\/\d{1,2}$/},48437:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RE_URL_WITH_PORT=e.RE_URL=e.RE_ZONE_STRING=e.RE_SUBNET_STRING=e.RE_BAD_ADDRESS=e.RE_BAD_CHARACTERS=e.TYPES=e.SCOPES=e.GROUPS=e.BITS=void 0,e.BITS=128,e.GROUPS=8,e.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},e.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},e.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,e.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,e.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,e.RE_ZONE_STRING=/%.*$/,e.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),e.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)},77345:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.simpleGroup=e.spanLeadingZeroes=e.spanAll=e.spanAllZeroes=void 0;var n=r(65526);function i(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}function o(t,e){void 0===e&&(e=0);var r=t.split("");return r.map((function(t,r){return n.sprintf('<span class="digit value-%s position-%d">%s</span>',t,r+e,i(t))})).join("")}function s(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function a(t){var e=t.split(":");return e.map((function(t){return s(t)})).join(":")}function u(t,e){void 0===e&&(e=0);var r=t.split(":");return r.map((function(t,r){return/group-v4/.test(t)?t:n.sprintf('<span class="hover-group group-%d">%s</span>',r+e,s(t))}))}e.spanAllZeroes=i,e.spanAll=o,e.spanLeadingZeroes=a,e.simpleGroup=u},46098:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.possibleElisions=e.simpleRegularExpression=e.ADDRESS_BOUNDARY=e.padGroup=e.groupPossibilities=void 0;var s=o(r(48437)),a=r(65526);function u(t){return a.sprintf("(%s)",t.join("|"))}function c(t){return t.length<4?a.sprintf("0{0,%d}%s",4-t.length,t):t}function h(t){var e=[];t.forEach((function(t,r){var n=parseInt(t,16);0===n&&e.push(r)}));var r=e.map((function(e){return t.map((function(t,r){if(r===e){var n=0===r||r===s.GROUPS-1?":":"";return u([c(t),n])}return c(t)})).join(":")}));return r.push(t.map(c).join(":")),u(r)}function l(t,e,r){var n=e?"":":",i=r?"":":",o=[];e||r||o.push("::"),e&&r&&o.push(""),(r&&!e||!r&&e)&&o.push(":"),o.push(a.sprintf("%s(:0{1,4}){1,%d}",n,t-1)),o.push(a.sprintf("(0{1,4}:){1,%d}%s",t-1,i)),o.push(a.sprintf("(0{1,4}:){%d}0{1,4}",t-1));for(var s=1;s<t-1;s++)for(var c=1;c<t-s;c++)o.push(a.sprintf("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",c,t-c-s-1));return u(o)}e.groupPossibilities=u,e.padGroup=c,e.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]",e.simpleRegularExpression=h,e.possibleElisions=l},65526:function(t,e,r){var n;r(21703),function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(t){return a(c(t),arguments)}function s(t,e){return o.apply(null,[t].concat(e||[]))}function a(t,e){var r,n,s,a,u,c,h,l,f,d=1,p=t.length,y="";for(n=0;n<p;n++)if("string"===typeof t[n])y+=t[n];else if("object"===typeof t[n]){if(a=t[n],a.keys)for(r=e[d],s=0;s<a.keys.length;s++){if(void 0==r)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[s],a.keys[s-1]));r=r[a.keys[s]]}else r=a.param_no?e[a.param_no]:e[d++];if(i.not_type.test(a.type)&&i.not_primitive.test(a.type)&&r instanceof Function&&(r=r()),i.numeric_arg.test(a.type)&&"number"!==typeof r&&isNaN(r))throw new TypeError(o("[sprintf] expecting number but found %T",r));switch(i.number.test(a.type)&&(l=r>=0),a.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,a.width?parseInt(a.width):0);break;case"e":r=a.precision?parseFloat(r).toExponential(a.precision):parseFloat(r).toExponential();break;case"f":r=a.precision?parseFloat(r).toFixed(a.precision):parseFloat(r);break;case"g":r=a.precision?String(Number(r.toPrecision(a.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=a.precision?r.substring(0,a.precision):r;break;case"t":r=String(!!r),r=a.precision?r.substring(0,a.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=a.precision?r.substring(0,a.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=a.precision?r.substring(0,a.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase();break}i.json.test(a.type)?y+=r:(!i.number.test(a.type)||l&&!a.sign?f="":(f=l?"+":"-",r=r.toString().replace(i.sign,"")),c=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",h=a.width-(f+r).length,u=a.width&&h>0?c.repeat(h):"",y+=a.align?f+r+u:"0"===c?f+u+r:u+f+r)}return y}var u=Object.create(null);function c(t){if(u[t])return u[t];var e,r=t,n=[],o=0;while(r){if(null!==(e=i.text.exec(r)))n.push(e[0]);else if(null!==(e=i.modulo.exec(r)))n.push("%");else{if(null===(e=i.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){o|=1;var s=[],a=e[2],c=[];if(null===(c=i.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1]);while(""!==(a=a.substring(c[0].length)))if(null!==(c=i.key_access.exec(a)))s.push(c[1]);else{if(null===(c=i.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1])}e[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}r=r.substring(e[0].length)}return u[t]=n}e.sprintf=o,e.vsprintf=s,"undefined"!==typeof window&&(window["sprintf"]=o,window["vsprintf"]=s,n=function(){return{sprintf:o,vsprintf:s}}.call(e,r,e,t),void 0===n||(t.exports=n))}()},86294:function(t){"use strict";const e="[a-fA-F\\d:]",r=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${e})|(?<=${e})(?=\\s|$))`:"",n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",o=`\n(?:\n(?:${i}:){7}(?:${i}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${i}:){6}(?:${n}|:${i}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${i}:){5}(?::${n}|(?::${i}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${i}:){4}(?:(?::${i}){0,1}:${n}|(?::${i}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${i}:){3}(?:(?::${i}){0,2}:${n}|(?::${i}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${i}:){2}(?:(?::${i}){0,3}:${n}|(?::${i}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${i}:){1}(?:(?::${i}){0,4}:${n}|(?::${i}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${i}){0,5}:${n}|(?::${i}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp(`(?:^${n}$)|(?:^${o}$)`),a=new RegExp(`^${n}$`),u=new RegExp(`^${o}$`),c=t=>t&&t.exact?s:new RegExp(`(?:${r(t)}${n}${r(t)})|(?:${r(t)}${o}${r(t)})`,"g");c.v4=t=>t&&t.exact?a:new RegExp(`${r(t)}${n}${r(t)}`,"g"),c.v6=t=>t&&t.exact?u:new RegExp(`${r(t)}${o}${r(t)}`,"g"),t.exports=c},79564:function(t,e,r){r(21703),function(e){"use strict";const r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")},i=new RegExp("^0[0-7]+$","i"),o=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",u={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${r}\\.${r}\\.${r}\\.${r}(${s})?$`,"i")};function c(t,e){if(t.indexOf("::")!==t.lastIndexOf("::"))return null;let r,n,i=0,o=-1,s=(t.match(u.zoneIndex)||[])[0];s&&(s=s.substring(1),t=t.replace(/%.+$/,""));while((o=t.indexOf(":",o+1))>=0)i++;if("::"===t.substr(0,2)&&i--,"::"===t.substr(-2,2)&&i--,i>e)return null;n=e-i,r=":";while(n--)r+="0:";return t=t.replace("::",r),":"===t[0]&&(t=t.slice(1)),":"===t[t.length-1]&&(t=t.slice(0,-1)),e=function(){const e=t.split(":"),r=[];for(let t=0;t<e.length;t++)r.push(parseInt(e[t],16));return r}(),{parts:e,zoneId:s}}function h(t,e,r,n){if(t.length!==e.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let i,o=0;while(n>0){if(i=r-n,i<0&&(i=0),t[o]>>i!==e[o]>>i)return!1;n-=r,o+=1}return!0}function l(t){if(o.test(t))return parseInt(t,16);if("0"===t[0]&&!isNaN(parseInt(t[1],10))){if(i.test(t))return parseInt(t,8);throw new Error(`ipaddr: cannot parse ${t} as octal`)}return parseInt(t,10)}function f(t,e){while(t.length<e)t=`0${t}`;return t}const d={};d.IPv4=function(){function t(t){if(4!==t.length)throw new Error("ipaddr: ipv4 octet count should be 4");let e,r;for(e=0;e<t.length;e++)if(r=t[e],!(0<=r&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=t}return t.prototype.SpecialRanges={unspecified:[[new t([0,0,0,0]),8]],broadcast:[[new t([255,255,255,255]),32]],multicast:[[new t([224,0,0,0]),4]],linkLocal:[[new t([169,254,0,0]),16]],loopback:[[new t([127,0,0,0]),8]],carrierGradeNat:[[new t([100,64,0,0]),10]],private:[[new t([10,0,0,0]),8],[new t([172,16,0,0]),12],[new t([192,168,0,0]),16]],reserved:[[new t([192,0,0,0]),24],[new t([192,0,2,0]),24],[new t([192,88,99,0]),24],[new t([198,51,100,0]),24],[new t([203,0,113,0]),24],[new t([240,0,0,0]),4]]},t.prototype.kind=function(){return"ipv4"},t.prototype.match=function(t,e){let r;if(void 0===e&&(r=t,t=r[0],e=r[1]),"ipv4"!==t.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return h(this.octets,t.octets,8,e)},t.prototype.prefixLengthFromSubnetMask=function(){let t=0,e=!1;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,o;for(n=3;n>=0;n-=1){if(i=this.octets[n],!(i in r))return null;if(o=r[i],e&&0!==o)return null;8!==o&&(e=!0),t+=o}return 32-t},t.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)},t.prototype.toByteArray=function(){return this.octets.slice(0)},t.prototype.toIPv4MappedAddress=function(){return d.IPv6.parse(`::ffff:${this.toString()}`)},t.prototype.toNormalizedString=function(){return this.toString()},t.prototype.toString=function(){return this.octets.join(".")},t}(),d.IPv4.broadcastAddressFromCIDR=function(t){try{const e=this.parseCIDR(t),r=e[0].toByteArray(),n=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[];let o=0;while(o<4)i.push(parseInt(r[o],10)|255^parseInt(n[o],10)),o++;return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},d.IPv4.isIPv4=function(t){return null!==this.parser(t)},d.IPv4.isValid=function(t){try{return new this(this.parser(t)),!0}catch(e){return!1}},d.IPv4.isValidFourPartDecimal=function(t){return!(!d.IPv4.isValid(t)||!t.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},d.IPv4.networkAddressFromCIDR=function(t){let e,r,n,i,o;try{e=this.parseCIDR(t),n=e[0].toByteArray(),o=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[],r=0;while(r<4)i.push(parseInt(n[r],10)&parseInt(o[r],10)),r++;return new this(i)}catch(s){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},d.IPv4.parse=function(t){const e=this.parser(t);if(null===e)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(e)},d.IPv4.parseCIDR=function(t){let e;if(e=t.match(/^(.+)\/(\d+)$/)){const t=parseInt(e[2]);if(t>=0&&t<=32){const r=[this.parse(e[1]),t];return Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},d.IPv4.parser=function(t){let e,r,i;if(e=t.match(n.fourOctet))return function(){const t=e.slice(1,6),n=[];for(let e=0;e<t.length;e++)r=t[e],n.push(l(r));return n}();if(e=t.match(n.longValue)){if(i=l(e[1]),i>4294967295||i<0)throw new Error("ipaddr: address outside defined range");return function(){const t=[];let e;for(e=0;e<=24;e+=8)t.push(i>>e&255);return t}().reverse()}return(e=t.match(n.twoOctet))?function(){const t=e.slice(1,4),r=[];if(i=l(t[1]),i>16777215||i<0)throw new Error("ipaddr: address outside defined range");return r.push(l(t[0])),r.push(i>>16&255),r.push(i>>8&255),r.push(255&i),r}():(e=t.match(n.threeOctet))?function(){const t=e.slice(1,5),r=[];if(i=l(t[2]),i>65535||i<0)throw new Error("ipaddr: address outside defined range");return r.push(l(t[0])),r.push(l(t[1])),r.push(i>>8&255),r.push(255&i),r}():null},d.IPv4.subnetMaskFromPrefixLength=function(t){if(t=parseInt(t),t<0||t>32)throw new Error("ipaddr: invalid IPv4 prefix length");const e=[0,0,0,0];let r=0;const n=Math.floor(t/8);while(r<n)e[r]=255,r++;return n<4&&(e[n]=Math.pow(2,t%8)-1<<8-t%8),new this(e)},d.IPv6=function(){function t(t,e){let r,n;if(16===t.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(t[r]<<8|t[r+1]);else{if(8!==t.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=t}for(r=0;r<this.parts.length;r++)if(n=this.parts[r],!(0<=n&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");e&&(this.zoneId=e)}return t.prototype.SpecialRanges={unspecified:[new t([0,0,0,0,0,0,0,0]),128],linkLocal:[new t([65152,0,0,0,0,0,0,0]),10],multicast:[new t([65280,0,0,0,0,0,0,0]),8],loopback:[new t([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new t([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new t([0,0,0,0,0,65535,0,0]),96],rfc6145:[new t([0,0,0,0,65535,0,0,0]),96],rfc6052:[new t([100,65435,0,0,0,0,0,0]),96],"6to4":[new t([8194,0,0,0,0,0,0,0]),16],teredo:[new t([8193,0,0,0,0,0,0,0]),32],reserved:[[new t([8193,3512,0,0,0,0,0,0]),32]]},t.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},t.prototype.kind=function(){return"ipv6"},t.prototype.match=function(t,e){let r;if(void 0===e&&(r=t,t=r[0],e=r[1]),"ipv6"!==t.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return h(this.parts,t.parts,16,e)},t.prototype.prefixLengthFromSubnetMask=function(){let t=0,e=!1;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let o=7;o>=0;o-=1){if(n=this.parts[o],!(n in r))return null;if(i=r[n],e&&0!==i)return null;16!==i&&(e=!0),t+=i}return 128-t},t.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)},t.prototype.toByteArray=function(){let t;const e=[],r=this.parts;for(let n=0;n<r.length;n++)t=r[n],e.push(t>>8),e.push(255&t);return e},t.prototype.toFixedLengthString=function(){const t=function(){const t=[];for(let e=0;e<this.parts.length;e++)t.push(f(this.parts[e].toString(16),4));return t}.call(this).join(":");let e="";return this.zoneId&&(e=`%${this.zoneId}`),t+e},t.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const t=this.parts.slice(-2),e=t[0],r=t[1];return new d.IPv4([e>>8,255&e,r>>8,255&r])},t.prototype.toNormalizedString=function(){const t=function(){const t=[];for(let e=0;e<this.parts.length;e++)t.push(this.parts[e].toString(16));return t}.call(this).join(":");let e="";return this.zoneId&&(e=`%${this.zoneId}`),t+e},t.prototype.toRFC5952String=function(){const t=/((^|:)(0(:|$)){2,})/g,e=this.toNormalizedString();let r,n=0,i=-1;while(r=t.exec(e))r[0].length>i&&(n=r.index,i=r[0].length);return i<0?e:`${e.substring(0,n)}::${e.substring(n+i)}`},t.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},t}(),d.IPv6.broadcastAddressFromCIDR=function(t){try{const e=this.parseCIDR(t),r=e[0].toByteArray(),n=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[];let o=0;while(o<16)i.push(parseInt(r[o],10)|255^parseInt(n[o],10)),o++;return new this(i)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}},d.IPv6.isIPv6=function(t){return null!==this.parser(t)},d.IPv6.isValid=function(t){if("string"===typeof t&&-1===t.indexOf(":"))return!1;try{const e=this.parser(t);return new this(e.parts,e.zoneId),!0}catch(e){return!1}},d.IPv6.networkAddressFromCIDR=function(t){let e,r,n,i,o;try{e=this.parseCIDR(t),n=e[0].toByteArray(),o=this.subnetMaskFromPrefixLength(e[1]).toByteArray(),i=[],r=0;while(r<16)i.push(parseInt(n[r],10)&parseInt(o[r],10)),r++;return new this(i)}catch(s){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${s})`)}},d.IPv6.parse=function(t){const e=this.parser(t);if(null===e.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(e.parts,e.zoneId)},d.IPv6.parseCIDR=function(t){let e,r,n;if((r=t.match(/^(.+)\/(\d+)$/))&&(e=parseInt(r[2]),e>=0&&e<=128))return n=[this.parse(r[1]),e],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},d.IPv6.parser=function(t){let e,r,n,i,o,s;if(n=t.match(u.deprecatedTransitional))return this.parser(`::ffff:${n[1]}`);if(u.native.test(t))return c(t,8);if((n=t.match(u.transitional))&&(s=n[6]||"",e=c(n[1].slice(0,-1)+s,6),e.parts)){for(o=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<o.length;r++)if(i=o[r],!(0<=i&&i<=255))return null;return e.parts.push(o[0]<<8|o[1]),e.parts.push(o[2]<<8|o[3]),{parts:e.parts,zoneId:e.zoneId}}return null},d.IPv6.subnetMaskFromPrefixLength=function(t){if(t=parseInt(t),t<0||t>128)throw new Error("ipaddr: invalid IPv6 prefix length");const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(t/8);while(r<n)e[r]=255,r++;return n<16&&(e[n]=Math.pow(2,t%8)-1<<8-t%8),new this(e)},d.fromByteArray=function(t){const e=t.length;if(4===e)return new d.IPv4(t);if(16===e)return new d.IPv6(t);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},d.isValid=function(t){return d.IPv6.isValid(t)||d.IPv4.isValid(t)},d.parse=function(t){if(d.IPv6.isValid(t))return d.IPv6.parse(t);if(d.IPv4.isValid(t))return d.IPv4.parse(t);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},d.parseCIDR=function(t){try{return d.IPv6.parseCIDR(t)}catch(e){try{return d.IPv4.parseCIDR(t)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},d.process=function(t){const e=this.parse(t);return"ipv6"===e.kind()&&e.isIPv4MappedAddress()?e.toIPv4Address():e},d.subnetMatch=function(t,e,r){let n,i,o,s;for(i in void 0!==r&&null!==r||(r="unicast"),e)if(Object.prototype.hasOwnProperty.call(e,i))for(o=e[i],!o[0]||o[0]instanceof Array||(o=[o]),n=0;n<o.length;n++)if(s=o[n],t.kind()===s[0].kind()&&t.match.apply(t,s))return i;return r},t.exports?t.exports=d:e.ipaddr=d}(this)},30798:function(t,e,r){"use strict";var n=r(96027);const i=r(34024),o="object"===typeof window&&"object"===typeof document&&9===document.nodeType,s=i(),a=o&&!s,u=s&&!o,c=s&&o,h="undefined"!==typeof n&&"undefined"!==typeof n.release&&"node"===n.release.name&&!s,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,f="undefined"!==typeof n&&!1,d="undefined"!==typeof navigator&&"ReactNative"===navigator.product;t.exports={isTest:f,isElectron:s,isElectronMain:u,isElectronRenderer:c,isNode:h,isBrowser:a,isWebWorker:l,isEnvWithDom:o,isReactNative:d}},34024:function(t,e,r){var n=r(96027);function i(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof n||"object"!==typeof n.versions||!n.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}t.exports=i},17676:function(t,e,r){"use strict";const n=r(86294),i=t=>n({exact:!0}).test(t);i.v4=t=>n.v4({exact:!0}).test(t),i.v6=t=>n.v6({exact:!0}).test(t),i.version=t=>i(t)?i.v4(t)?4:6:void 0,t.exports=i},97061:function(t){"use strict";function e(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}t.exports=e},11809:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const n=65536;function i(t){const e=new Uint8Array(t);let r=0;if(t>0)if(t>n)while(r<t)r+n>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+n)),r+=n);else crypto.getRandomValues(e);return e}t.exports=i},39339:function(t,e,r){"use strict";const{URLWithLegacySupport:n,format:i,URLSearchParams:o,defaultBase:s}=r(97141),a=r(47200);t.exports={URL:n,URLSearchParams:o,format:i,relative:a,defaultBase:s}},47200:function(t,e,r){"use strict";const{URLWithLegacySupport:n,format:i}=r(97141);t.exports=(t,e={},r={},o)=>{let s,a=e.protocol?e.protocol.replace(":",""):"http";a=(r[a]||o||a)+":";try{s=new n(t)}catch(c){s={}}const u=Object.assign({},e,{protocol:a||s.protocol,host:e.host||s.host});return new n(t,i(u)).toString()}},97141:function(t){"use strict";const e="undefined"!==typeof navigator&&"ReactNative"===navigator.product;function r(){return e?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const n=self.URL,i=r();class o{constructor(t="",e=i){this.super=new n(t,e),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set username(t){this.super.username=t}static createObjectURL(t){return n.createObjectURL(t)}static revokeObjectURL(t){n.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function s(t){if("string"===typeof t){const e=new n(t);return e.toString()}if(!(t instanceof n)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",o=t.host||"",s=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),u=t.hash||"",c=t.pathname||"",h=t.path||c+a;return`${i}${e||r}${o||s+n}${h}${u}`}}t.exports={URLWithLegacySupport:o,URLSearchParams:self.URLSearchParams,defaultBase:i,format:s}},97192:function(t){"use strict";const e=async t=>{const e=[];for await(const r of t)e.push(r);return e};t.exports=e},26632:function(t,e,r){"use strict";const{Buffer:n}=r(87841),i=r(4890);t.exports=async function*(t){for await(const e of t)n.isBuffer(e)?yield e:i.isBufferList(e)?yield e.slice():yield n.from(e)},t.exports.toBuffer=t.exports,t.exports.toList=async function*(t){for await(const e of t)n.isBuffer(e)?yield(new i).append(e):i.isBufferList(e)?yield e:yield(new i).append(n.from(e))}},4890:function(t,e,r){"use strict";r(21703);const{Buffer:n}=r(87841),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const o=!!t,s=this._offset(r),a=i-r;let u=a,c=o&&e||0,h=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(u<=this._bufs[s[0]].length-h)return o?this._bufs[s[0]].copy(t,e,h,h+u):this._bufs[s[0]].slice(h,h+u);o||(t=n.allocUnsafe(a));for(let n=s[0];n<this._bufs.length;n++){const e=this._bufs[n].length-h;if(!(u>e)){this._bufs[n].copy(t,c,h,h+u),c+=e;break}this._bufs[n].copy(t,c,h),c+=e,u-=e,h&&(h=0)}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"===typeof e&&(r=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=n.from([t]):"string"===typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const r=e.length-s;if(r>=t.length){const r=e.indexOf(t,s);if(-1!==r)return this._reverseOffset([o,r]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,r){return this.slice(t,t+r)[e](0,r)}:o.prototype[e]=function(r=0){return this.slice(r,r+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},87841:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},9694:function(t,e,r){r(21703);const n=r(19862),i={string:()=>"",buffer:()=>n()};t.exports=async(t,e)=>{if(e=e||{},e.type&&!i[e.type])throw new Error(`invalid type "${e.type}"`);let r,n;for await(const o of t)r||(n=e.type||("string"===typeof o?"string":"buffer"),r=i[n]()),"string"===n?r+=o:r.append(o);return r||i[e.type||"buffer"]()}},19862:function(t,e,r){"use strict";r(21703);const{Buffer:n}=r(49187),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const o=!!t,s=this._offset(r),a=i-r;let u=a,c=o&&e||0,h=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(u<=this._bufs[s[0]].length-h)return o?this._bufs[s[0]].copy(t,e,h,h+u):this._bufs[s[0]].slice(h,h+u);o||(t=n.allocUnsafe(a));for(let n=s[0];n<this._bufs.length;n++){const e=this._bufs[n].length-h;if(!(u>e)){this._bufs[n].copy(t,c,h,h+u),c+=e;break}this._bufs[n].copy(t,c,h),c+=e,u-=e,h&&(h=0)}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"===typeof e&&(r=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=n.from([t]):"string"===typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const r=e.length-s;if(r>=t.length){const r=e.indexOf(t,s);if(-1!==r)return this._reverseOffset([o,r]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,r){return this.slice(t,t+r)[e](0,r)}:o.prototype[e]=function(r=0){return this.slice(r,r+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},49187:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},29164:function(t){"use strict";const e=async t=>{for await(const e of t);};t.exports=e},13726:function(t){"use strict";const e=async function*(t,e){for await(const r of t)await e(r)&&(yield r)};t.exports=e},74461:function(t){"use strict";const e=async t=>{for await(const e of t)return e};t.exports=e},28189:function(t){"use strict";const e=async function*(t,e){for await(const r of t)await e(r),yield r};t.exports=e},737:function(t,e,r){"use strict";const n=r(66983),i=r(61783),o=r(61233);t.exports=t=>{const e=i(),r=n(t.source),s=o();let a;const u=t.sink(async function*(){yield*e;const t=await s.promise;yield*t}());u.catch((t=>{a=t}));const c={sink:t=>a?Promise.reject(a):(s.resolve(t),u),source:r};return{reader:r,writer:e,stream:c,rest:()=>e.end(),write:e.push,read:async()=>(await r.next()).value}}},20968:function(t,e,r){"use strict";r(21703);const{Buffer:n}=r(13523),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const o=!!t,s=this._offset(r),a=i-r;let u=a,c=o&&e||0,h=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(u<=this._bufs[s[0]].length-h)return o?this._bufs[s[0]].copy(t,e,h,h+u):this._bufs[s[0]].slice(h,h+u);o||(t=n.allocUnsafe(a));for(let n=s[0];n<this._bufs.length;n++){const e=this._bufs[n].length-h;if(!(u>e)){this._bufs[n].copy(t,c,h,h+u),c+=e;break}this._bufs[n].copy(t,c,h),c+=e,u-=e,h&&(h=0)}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"===typeof e&&(r=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=n.from([t]):"string"===typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const r=e.length-s;if(r>=t.length){const r=e.indexOf(t,s);if(-1!==r)return this._reverseOffset([o,r]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,r){return this.slice(t,t+r)[e](0,r)}:o.prototype[e]=function(r=0){return this.slice(r,r+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},13523:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},45394:function(t,e,r){"use strict";r(21703);const{Buffer:n}=r(13523),i=r(20968),o=r(31174),s=8,a=4194304,u=n.alloc(0),c={LENGTH:"readLength",DATA:"readData"},h={[c.LENGTH]:(t,e,r,n)=>{let o;e=e.append(t);try{o=n.lengthDecoder(e)}catch(s){if(e.length>n.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:c.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(o>n.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(n.lengthDecoder.bytes),e=new i,n.onLength&&n.onLength(o),o<=0?(n.onData&&n.onData(u),{mode:c.LENGTH,chunk:t,buffer:e,data:u}):{mode:c.DATA,chunk:t,buffer:e,state:{dataLength:o},data:void 0}},[c.DATA]:(t,e,r,n)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:c.DATA,buffer:e,state:r,chunk:void 0,data:void 0};const{dataLength:o}=r,s=e.shallowSlice(0,o),a=e.length>o?e.shallowSlice(o):void 0;return e=new i,n.onData&&n.onData(s),{mode:c.LENGTH,chunk:a,buffer:e,state:void 0,data:s}}};function l(t){t=t||{};const e={lengthDecoder:t.lengthDecoder||o,maxLengthLength:t.maxLengthLength||s,maxDataLength:t.maxDataLength||a,onLength:t.onLength,onData:t.onData},r=async function*(t){let r,n=new i,o=c.LENGTH;for await(const i of t){let t=i;while(t){const i=h[o](t,n,r,e);o=i.mode,t=i.chunk,n=i.buffer,r=i.state,i.data&&(yield i.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})};return r}l.fromReader=(t,e)=>{let r=1;const n={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{r=1}}},i=t=>{r=t};return l({...e||{},onLength:i})(n)},t.exports=l,t.exports.MAX_LENGTH_LENGTH=s,t.exports.MAX_DATA_LENGTH=a},1083:function(t,e,r){"use strict";const{Buffer:n}=r(13523),i=r(20968),o=r(14391),s=8,a=10240;function u(t){t=t||{};const e=Math.max(t.poolSize||a,t.minPoolSize||s),r=t.lengthEncoder||o,u=async function*(t){let o=n.alloc(e),a=0;for await(const u of t){r(u.length,o,a);const t=o.slice(a,a+r.bytes);a+=r.bytes,o.length-a<s&&(o=n.alloc(e),a=0),yield(new i).append(t).append(u)}};return u}u.single=(t,e)=>{e=e||{};const r=e.lengthEncoder||o;return new i([r(t.length),t.slice()])},t.exports=u,t.exports.MIN_POOL_SIZE=s,t.exports.DEFAULT_POOL_SIZE=a},92992:function(t,e,r){"use strict";e.encode=r(1083),e.decode=r(45394),e.varintEncode=r(14391),e.varintDecode=r(31174),e.int32BEEncode=r(20117),e.int32BEDecode=r(63313)},63313:function(t,e,r){"use strict";r(21703);const n=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};n.bytes=4,t.exports=n},20117:function(t,e,r){"use strict";const{Buffer:n}=r(13523),i=(t,e,r)=>(e=e||n.allocUnsafe(4),e.writeInt32BE(t,r),e);i.bytes=4,t.exports=i},31174:function(t,e,r){"use strict";const n=r(42611),{Buffer:i}=r(13523),o=t=>new Proxy({},{get:(e,r)=>"l"===r[0]?t[r]:t.get(parseInt(r))}),s=t=>{const e=n.decode(i.isBuffer(t)?t:o(t));return s.bytes=n.decode.bytes,e};t.exports=s},14391:function(t,e,r){"use strict";const n=r(42611),{Buffer:i}=r(13523),o=(t,e,r)=>{const s=n.encode(t,e,r);return o.bytes=n.encode.bytes,e||i.from(s)};t.exports=o},79927:function(t){"use strict";const e=async function*(t,e){for await(const r of t)yield e(r)};t.exports=e},10940:function(t,e,r){"use strict";const n=r(61783),i=async function*(...t){const e=n();setTimeout((async()=>{try{await Promise.all(t.map((async t=>{for await(const r of t)e.push(r)}))),e.end()}catch(r){e.end(r)}}),0),yield*e};t.exports=i},4542:function(t,e,r){var n=r(32160);t.exports=function(){var t=n(),e=n();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}},32160:function(t,e,r){"use strict";r(21703);const n=r(54253);t.exports=function(){let t,e;const r=async r=>{if(t)throw new Error("already piped");t=n(r),e&&e(t)},i={[Symbol.asyncIterator](){return this},next(){return t?t.next():new Promise((t=>{e=r=>{e=null,t(r.next())}}))}};return{sink:r,source:i}}},70564:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);const n=r(737),i=r(92992);t.exports=(t,e={})=>{const r=n(t),o=i.decode.fromReader(r.reader,e);let s=!1;const a={read:async t=>{const{value:e,done:n}=await r.reader.next(t);if(n&&e.length<t)throw new Error("Couldn't read enough bytes");if(s=n,!e)throw new Error("Value is null");return e},readLP:async()=>{const{value:t,done:e}=await o.next();if(s=e,!t)throw new Error("Value is null");return t},readPB:async t=>{const e=await a.readLP();if(!e)throw new Error("Value is null");const r=e instanceof Uint8Array?e:e.slice();return t.decode(r)},write:t=>{r.writer.push(t)},writeLP:t=>{a.write(i.encode.single(t,e))},writePB:(t,e)=>{a.writeLP(e.encode(t))},pb:t=>({read:()=>a.readPB(t),write:e=>a.writePB(e,t)}),unwrap:()=>(r.rest(),r.stream)};return a}},62100:function(t){const e=(...t)=>{let e;while(t.length)e=t.shift()(e);return e},r=t=>t&&("function"===typeof t[Symbol.asyncIterator]||"function"===typeof t[Symbol.iterator]||"function"===typeof t.next),n=t=>t&&"function"===typeof t.sink&&r(t.source),i=t=>e=>(t.sink(e),t.source),o=(...t)=>{if(n(t[0])){const e=t[0];t[0]=()=>e.source}else if(r(t[0])){const e=t[0];t[0]=()=>e}if(t.length>1&&n(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)n(t[e])&&(t[e]=i(t[e]));return e(...t)};t.exports=o,t.exports.pipe=o,t.exports.rawPipe=e,t.exports.isIterable=r,t.exports.isDuplex=n},61783:function(t,e,r){const n=r(22819);t.exports=t=>{let e;t=t||{},"function"===typeof t?(e=t,t={}):e=t.onEnd;let r,i,o,s=new n;const a=()=>{if(!s.isEmpty()){if(t.writev){let t;const e=[];while(!s.isEmpty()){if(t=s.shift(),t.error)throw t.error;e.push(t.value)}return{done:t.done,value:e}}const e=s.shift();if(e.error)throw e.error;return e}return o?{done:!0}:new Promise(((e,n)=>{i=o=>(i=null,o.error?n(o.error):t.writev&&!o.done?e({done:o.done,value:[o.value]}):e(o),r)}))},u=t=>i?i(t):(s.push(t),r),c=t=>(s=new n,i?i({error:t}):(s.push({error:t}),r)),h=t=>o?r:u({done:!1,value:t}),l=t=>o?r:(o=!0,t?c(t):u({done:!0})),f=()=>(s=new n,l(),{done:!0}),d=t=>(l(t),{done:!0});if(r={[Symbol.asyncIterator](){return this},next:a,return:f,throw:d,push:h,end:l},!e)return r;const p=r;return r={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(t){return p.throw(t),e&&(e(t),e=null),{done:!0}},return(){return p.return(),e&&(e(),e=null),{done:!0}},push:h,end(t){return p.end(t),e&&(e(t),e=null),r}},r}},66983:function(t,e,r){r(21703);const n=r(3307);t.exports=t=>{const e=async function*(){let e=yield,r=new n;for await(const i of t)if(e){r.append(i);while(r.length>=e){const t=r.shallowSlice(0,e);if(r.consume(e),e=yield t,!e){r.length&&(e=yield r,r=new n);break}}}else e=yield r.append(i),r=new n;if(e)throw Object.assign(new Error(`stream ended before ${e} bytes became available`),{code:"ERR_UNDER_READ",buffer:r})}();return e.next(),e}},3307:function(t,e,r){"use strict";r(21703);const{Buffer:n}=r(52830),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const o=!!t,s=this._offset(r),a=i-r;let u=a,c=o&&e||0,h=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(u<=this._bufs[s[0]].length-h)return o?this._bufs[s[0]].copy(t,e,h,h+u):this._bufs[s[0]].slice(h,h+u);o||(t=n.allocUnsafe(a));for(let n=s[0];n<this._bufs.length;n++){const e=this._bufs[n].length-h;if(!(u>e)){this._bufs[n].copy(t,c,h,h+u),c+=e;break}this._bufs[n].copy(t,c,h),c+=e,u-=e,h&&(h=0)}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"===typeof e&&(r=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=n.from([t]):"string"===typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const r=e.length-s;if(r>=t.length){const r=e.indexOf(t,s);if(-1!==r)return this._reverseOffset([o,r]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,r){return this.slice(t,t+r)[e](0,r)}:o.prototype[e]=function(r=0){return this.slice(r,r+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},52830:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},80640:function(t,e,r){"use strict";const n=r(97192),i=async function*(t,e){const r=await n(t);yield*r.sort(e)};t.exports=i},16855:function(t){"use strict";const e=async function*(t,e){let r=0;if(!(e<1))for await(const n of t)if(yield n,r++,r===e)return};t.exports=e},13718:function(t,e,r){"use strict";var n=r(6222),i=r(39097),o=r(42775);t.exports=function(t,e={}){const r="undefined"===typeof window?{}:window.location,s=o(t,r),a=new n(s,e.websocket),u=i(a,e);return u.remoteAddress=s,u.close=()=>new Promise(((t,e)=>{a.addEventListener("close",t),a.close()})),u.destroy=()=>{a.terminate?a.terminate():a.close()},u.socket=a,u},t.exports.connect=t.exports},39097:function(t,e,r){const n=r(41239),i=r(54202);t.exports=(t,e)=>{e=e||{},e.binaryType?t.binaryType=e.binaryType:e.binary&&(t.binaryType="arraybuffer");const r={sink:i(t,e),source:n(t,e),connected:()=>r.source.connected()};return r}},37982:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},69584:function(t,e,r){r(21703),t.exports=async t=>{if(t.readyState>=2)throw new Error("socket closed");if(1!==t.readyState)return new Promise(((e,r)=>{const n=t&&(t.removeEventListener||t.removeListener);function i(){"function"===typeof n&&(n.call(t,"open",o),n.call(t,"error",s))}function o(){i(),e()}function s(t){i(),r(t)}t.addEventListener("open",o),t.addEventListener("error",s)}))}},54202:function(t,e,r){r(21703);const n=r(69584);t.exports=(t,e)=>(e=e||{},e.closeOnEnd=!1!==e.closeOnEnd,async r=>{for await(const e of r){try{await n(t)}catch(i){if("socket closed"===i.message)break;throw i}t.send(e)}if(e.closeOnEnd&&t.readyState<=1)return new Promise(((e,r)=>{t.addEventListener("close",(t=>{if(t.wasClean||1006===t.code)e();else{const e=Object.assign(new Error("ws error"),{event:t});r(e)}})),setTimeout((()=>t.close()))}))})},41239:function(t,e,r){const{Buffer:n}=r(37982),{EventIterator:i}=r(94772);function o(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"===typeof t.byteLength}t.exports=t=>{const e=t.removeEventListener||t.removeListener,r=async function*(){const r=new i((({push:r,stop:n,fail:i})=>(t.addEventListener("message",r),t.addEventListener("error",i),t.addEventListener("close",n),()=>{e.call(t,"message",r),e.call(t,"error",i),e.call(t,"close",n)})),{highWaterMark:1/0});for await(const{data:t}of r)yield o(t)?n.from(t):t}();let s,a=1===t.readyState;return t.addEventListener("open",(()=>{a=!0,s=null})),t.addEventListener("close",(()=>{a=!1,s=null})),t.addEventListener("error",(t=>{a||(s=t)})),r.connected=()=>new Promise(((r,n)=>{if(a)return r();if(s)return n(s);const i=r=>{e.call(t,"open",o),e.call(t,"error",u),r()},o=()=>i(r),u=t=>i((()=>n(t)));t.addEventListener("open",o),t.addEventListener("error",u)})),r}},6222:function(t,e,r){t.exports="undefined"===typeof WebSocket?r(89408):WebSocket},42775:function(t,e,r){const{relative:n}=r(39339),i={http:"ws",https:"wss"},o="ws";t.exports=(t,e)=>n(t,e,i,o)},69893:function(t,e,r){var n,i=r(96027);r(21703),r(48675),r(3462),r(37380),r(1118),
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
function(){"use strict";var o="input is invalid type",s="finalize already called",a="object"===typeof window,u=a?window:{};u.JS_SHA3_NO_WINDOW&&(a=!1);var c=!a&&"object"===typeof self,h=!u.JS_SHA3_NO_NODE_JS&&"object"===typeof i&&i.versions&&i.versions.node;h?u=r.g:c&&(u=self);var l=!u.JS_SHA3_NO_COMMON_JS&&t.exports,f=r.amdO,d=!u.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,p="0123456789abcdef".split(""),y=[31,7936,2031616,520093696],g=[4,1024,262144,67108864],m=[1,256,65536,16777216],b=[6,1536,393216,100663296],w=[0,8,16,24],v=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],_=[224,256,384,512],E=[128,256],S=["hex","buffer","arrayBuffer","array","digest"],A={128:168,256:136};!u.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!d||!u.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"===typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var I=function(t,e,r){return function(n){return new q(t,e,t).update(n)[r]()}},T=function(t,e,r){return function(n,i){return new q(t,e,i).update(n)[r]()}},R=function(t,e,r){return function(e,n,i,o){return N["cshake"+t].update(e,n,i,o)[r]()}},M=function(t,e,r){return function(e,n,i,o){return N["kmac"+t].update(e,n,i,o)[r]()}},k=function(t,e,r,n){for(var i=0;i<S.length;++i){var o=S[i];t[o]=e(r,n,o)}return t},C=function(t,e){var r=I(t,e,"hex");return r.create=function(){return new q(t,e,t)},r.update=function(t){return r.create().update(t)},k(r,I,t,e)},O=function(t,e){var r=T(t,e,"hex");return r.create=function(r){return new q(t,e,r)},r.update=function(t,e){return r.create(e).update(t)},k(r,T,t,e)},P=function(t,e){var r=A[t],n=R(t,e,"hex");return n.create=function(n,i,o){return i||o?new q(t,e,n).bytepad([i,o],r):N["shake"+t].create(n)},n.update=function(t,e,r,i){return n.create(e,r,i).update(t)},k(n,R,t,e)},B=function(t,e){var r=A[t],n=M(t,e,"hex");return n.create=function(n,i,o){return new H(t,e,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(t,e,r,i){return n.create(t,r,i).update(e)},k(n,M,t,e)},x=[{name:"keccak",padding:m,bits:_,createMethod:C},{name:"sha3",padding:b,bits:_,createMethod:C},{name:"shake",padding:y,bits:E,createMethod:O},{name:"cshake",padding:g,bits:E,createMethod:P},{name:"kmac",padding:g,bits:E,createMethod:B}],N={},D=[],L=0;L<x.length;++L)for(var U=x[L],j=U.bits,F=0;F<j.length;++F){var K=U.name+"_"+j[F];if(D.push(K),N[K]=U.createMethod(j[F],U.padding),"sha3"!==U.name){var $=U.name+j[F];D.push($),N[$]=N[K]}}function q(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function H(t,e,r){q.call(this,t,e,r)}q.prototype.update=function(t){if(this.finalized)throw new Error(s);var e,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(o);if(null===t)throw new Error(o);if(d&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!d||!ArrayBuffer.isView(t)))throw new Error(o);e=!0}var n,i,a=this.blocks,u=this.byteCount,c=t.length,h=this.blockCount,l=0,f=this.s;while(l<c){if(this.reset)for(this.reset=!1,a[0]=this.block,n=1;n<h+1;++n)a[n]=0;if(e)for(n=this.start;l<c&&n<u;++l)a[n>>2]|=t[l]<<w[3&n++];else for(n=this.start;l<c&&n<u;++l)i=t.charCodeAt(l),i<128?a[n>>2]|=i<<w[3&n++]:i<2048?(a[n>>2]|=(192|i>>6)<<w[3&n++],a[n>>2]|=(128|63&i)<<w[3&n++]):i<55296||i>=57344?(a[n>>2]|=(224|i>>12)<<w[3&n++],a[n>>2]|=(128|i>>6&63)<<w[3&n++],a[n>>2]|=(128|63&i)<<w[3&n++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++l)),a[n>>2]|=(240|i>>18)<<w[3&n++],a[n>>2]|=(128|i>>12&63)<<w[3&n++],a[n>>2]|=(128|i>>6&63)<<w[3&n++],a[n>>2]|=(128|63&i)<<w[3&n++]);if(this.lastByteIndex=n,n>=u){for(this.start=n-u,this.block=a[h],n=0;n<h;++n)f[n]^=a[n];z(f),this.reset=!0}else this.start=n}return this},q.prototype.encode=function(t,e){var r=255&t,n=1,i=[r];t>>=8,r=255&t;while(r>0)i.unshift(r),t>>=8,r=255&t,++n;return e?i.push(n):i.unshift(n),this.update(i),i.length},q.prototype.encodeString=function(t){var e,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(o);if(null===t)throw new Error(o);if(d&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!d||!ArrayBuffer.isView(t)))throw new Error(o);e=!0}var n=0,i=t.length;if(e)n=i;else for(var s=0;s<t.length;++s){var a=t.charCodeAt(s);a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++s)),n+=4)}return n+=this.encode(8*n),this.update(t),n},q.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var i=e-r%e,o=[];return o.length=i,this.update(o),this},q.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];z(n)}},q.prototype.toString=q.prototype.hex=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a="";while(s<n){for(o=0;o<e&&s<n;++o,++s)t=r[o],a+=p[t>>4&15]+p[15&t]+p[t>>12&15]+p[t>>8&15]+p[t>>20&15]+p[t>>16&15]+p[t>>28&15]+p[t>>24&15];s%e===0&&(z(r),o=0)}return i&&(t=r[o],a+=p[t>>4&15]+p[15&t],i>1&&(a+=p[t>>12&15]+p[t>>8&15]),i>2&&(a+=p[t>>20&15]+p[t>>16&15])),a},q.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);var u=new Uint32Array(t);while(s<n){for(o=0;o<e&&s<n;++o,++s)u[s]=r[o];s%e===0&&z(r)}return i&&(u[o]=r[o],t=t.slice(0,a)),t},q.prototype.buffer=q.prototype.arrayBuffer,q.prototype.digest=q.prototype.array=function(){this.finalize();var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,u=[];while(a<i){for(s=0;s<r&&a<i;++s,++a)t=a<<2,e=n[s],u[t]=255&e,u[t+1]=e>>8&255,u[t+2]=e>>16&255,u[t+3]=e>>24&255;a%r===0&&z(n)}return o&&(t=a<<2,e=n[s],u[t]=255&e,o>1&&(u[t+1]=e>>8&255),o>2&&(u[t+2]=e>>16&255)),u},H.prototype=new q,H.prototype.finalize=function(){return this.encode(this.outputBits,!0),q.prototype.finalize.call(this)};var z=function(t){var e,r,n,i,o,s,a,u,c,h,l,f,d,p,y,g,m,b,w,_,E,S,A,I,T,R,M,k,C,O,P,B,x,N,D,L,U,j,F,K,$,q,H,z,V,G,W,Y,J,Z,X,Q,tt,et,rt,nt,it,ot,st,at,ut,ct,ht;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],u=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],h=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],f=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49],e=f^(s<<1|a>>>31),r=d^(a<<1|s>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=i^(u<<1|c>>>31),r=o^(c<<1|u>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=s^(h<<1|l>>>31),r=a^(l<<1|h>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=u^(f<<1|d>>>31),r=c^(d<<1|f>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=h^(i<<1|o>>>31),r=l^(o<<1|i>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,p=t[0],y=t[1],G=t[11]<<4|t[10]>>>28,W=t[10]<<4|t[11]>>>28,k=t[20]<<3|t[21]>>>29,C=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,q=t[40]<<18|t[41]>>>14,H=t[41]<<18|t[40]>>>14,N=t[2]<<1|t[3]>>>31,D=t[3]<<1|t[2]>>>31,g=t[13]<<12|t[12]>>>20,m=t[12]<<12|t[13]>>>20,Y=t[22]<<10|t[23]>>>22,J=t[23]<<10|t[22]>>>22,O=t[33]<<13|t[32]>>>19,P=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,ht=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,L=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,w=t[24]<<11|t[25]>>>21,Z=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,B=t[45]<<29|t[44]>>>3,x=t[44]<<29|t[45]>>>3,I=t[6]<<28|t[7]>>>4,T=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,j=t[26]<<25|t[27]>>>7,F=t[27]<<25|t[26]>>>7,_=t[36]<<21|t[37]>>>11,E=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,z=t[8]<<27|t[9]>>>5,V=t[9]<<27|t[8]>>>5,R=t[18]<<20|t[19]>>>12,M=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,st=t[28]<<7|t[29]>>>25,K=t[38]<<8|t[39]>>>24,$=t[39]<<8|t[38]>>>24,S=t[48]<<14|t[49]>>>18,A=t[49]<<14|t[48]>>>18,t[0]=p^~g&b,t[1]=y^~m&w,t[10]=I^~R&k,t[11]=T^~M&C,t[20]=N^~L&j,t[21]=D^~U&F,t[30]=z^~G&Y,t[31]=V^~W&J,t[40]=et^~nt&ot,t[41]=rt^~it&st,t[2]=g^~b&_,t[3]=m^~w&E,t[12]=R^~k&O,t[13]=M^~C&P,t[22]=L^~j&K,t[23]=U^~F&$,t[32]=G^~Y&Z,t[33]=W^~J&X,t[42]=nt^~ot&at,t[43]=it^~st&ut,t[4]=b^~_&S,t[5]=w^~E&A,t[14]=k^~O&B,t[15]=C^~P&x,t[24]=j^~K&q,t[25]=F^~$&H,t[34]=Y^~Z&Q,t[35]=J^~X&tt,t[44]=ot^~at&ct,t[45]=st^~ut&ht,t[6]=_^~S&p,t[7]=E^~A&y,t[16]=O^~B&I,t[17]=P^~x&T,t[26]=K^~q&N,t[27]=$^~H&D,t[36]=Z^~Q&z,t[37]=X^~tt&V,t[46]=at^~ct&et,t[47]=ut^~ht&rt,t[8]=S^~p&g,t[9]=A^~y&m,t[18]=B^~I&R,t[19]=x^~T&M,t[28]=q^~N&L,t[29]=H^~D&U,t[38]=Q^~z&G,t[39]=tt^~V&W,t[48]=ct^~et&nt,t[49]=ht^~rt&it,t[0]^=v[n],t[1]^=v[n+1]};if(l)t.exports=N;else{for(L=0;L<D.length;++L)u[D[L]]=N[D[L]];f&&(n=function(){return N}.call(e,r,e,t),void 0===n||(t.exports=n))}}()},36912:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.StoreCodecs=e.WakuStore=e.PageDirection=e.waku_store=e.RelayCodecs=e.WakuRelay=e.waku_relay=e.PushResponse=e.LightPushCodec=e.WakuLightPush=e.waku_light_push=e.WakuMessage=e.waku_message=e.Protocols=e.DefaultPubSubTopic=e.Waku=e.waku=e.utils=e.enr=e.discovery=e.getPredefinedBootstrapNodes=e.getPublicKey=e.generateSymmetricKey=e.generatePrivateKey=void 0;var s=r(66629);Object.defineProperty(e,"generatePrivateKey",{enumerable:!0,get:function(){return s.generatePrivateKey}}),Object.defineProperty(e,"generateSymmetricKey",{enumerable:!0,get:function(){return s.generateSymmetricKey}}),Object.defineProperty(e,"getPublicKey",{enumerable:!0,get:function(){return s.getPublicKey}});var a=r(26746);Object.defineProperty(e,"getPredefinedBootstrapNodes",{enumerable:!0,get:function(){return a.getPredefinedBootstrapNodes}}),e.discovery=o(r(26746)),e.enr=o(r(45150)),e.utils=o(r(54870)),e.waku=o(r(16630));var u=r(16630);Object.defineProperty(e,"Waku",{enumerable:!0,get:function(){return u.Waku}}),Object.defineProperty(e,"DefaultPubSubTopic",{enumerable:!0,get:function(){return u.DefaultPubSubTopic}}),Object.defineProperty(e,"Protocols",{enumerable:!0,get:function(){return u.Protocols}}),e.waku_message=o(r(82649));var c=r(82649);Object.defineProperty(e,"WakuMessage",{enumerable:!0,get:function(){return c.WakuMessage}}),e.waku_light_push=o(r(68511));var h=r(68511);Object.defineProperty(e,"WakuLightPush",{enumerable:!0,get:function(){return h.WakuLightPush}}),Object.defineProperty(e,"LightPushCodec",{enumerable:!0,get:function(){return h.LightPushCodec}}),Object.defineProperty(e,"PushResponse",{enumerable:!0,get:function(){return h.PushResponse}}),e.waku_relay=o(r(64808));var l=r(64808);Object.defineProperty(e,"WakuRelay",{enumerable:!0,get:function(){return l.WakuRelay}}),Object.defineProperty(e,"RelayCodecs",{enumerable:!0,get:function(){return l.RelayCodecs}}),e.waku_store=o(r(97975));var f=r(97975);Object.defineProperty(e,"PageDirection",{enumerable:!0,get:function(){return f.PageDirection}}),Object.defineProperty(e,"WakuStore",{enumerable:!0,get:function(){return f.WakuStore}}),Object.defineProperty(e,"StoreCodecs",{enumerable:!0,get:function(){return f.StoreCodecs}})},66629:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.verifySignature=e.compressPublicKey=e.keccak256=e.sign=e.getPublicKey=e.generateSymmetricKey=e.generatePrivateKey=e.sha256=e.randomBytes=e.getSubtle=void 0;const a=s(r(28339)),u=o(r(20272)),c=o(r(69893)),h=r(85489),l=o(r(82262)),f=r(28967),d={node:a.default,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0};function p(){if(d.web)return d.web.subtle;if(d.node)return d.node.webcrypto.subtle;throw new Error("The environment doesn't have Crypto Subtle API (if in the browser, be sure to use to be in a secure context, ie, https)")}function y(){return(0,e.randomBytes)(f.PrivateKeySize)}function g(){return(0,e.randomBytes)(l.KeySize)}async function m(t,e){const[r,n]=await u.sign(t,e,{recovered:!0,der:!1});return(0,h.concat)([r,[n]],r.length+1)}function b(t){return new Uint8Array(c.keccak256.arrayBuffer(t))}function w(t){64===t.length&&(t=(0,h.concat)([[4],t],65));const e=u.Point.fromHex(t);return e.toRawBytes(!0)}function v(t,e,r){try{const n=u.Signature.fromCompact(t.slice(0,64));return u.verify(n,e,r)}catch{return!1}}e.getSubtle=p,e.randomBytes=u.utils.randomBytes,e.sha256=u.utils.sha256,e.generatePrivateKey=y,e.generateSymmetricKey=g,e.getPublicKey=u.getPublicKey,e.sign=m,e.keccak256=b,e.compressPublicKey=w,e.verifySignature=v},26878:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Bootstrap=void 0;const i=n(r(15652)),o=r(19391),s=r(14777),a=r(26746),u=(0,i.default)("waku:discovery:bootstrap");class c{constructor(t){const e=t.maxPeers??c.DefaultMaxPeers;if(t.default)u("Use hosted list of peers."),this.getBootstrapPeers=()=>Promise.resolve((0,a.getPredefinedBootstrapNodes)(void 0,e));else if(void 0!==t.peers&&t.peers.length>0){const r=t.peers.map((t=>"string"===typeof t?new o.Multiaddr(t):t)),n=(0,a.getPseudoRandomSubset)(r,e);u("Use provided list of peers (reduced to maxPeers)",r.map((t=>t.toString()))),this.getBootstrapPeers=()=>Promise.resolve(n)}else if("function"===typeof t.getPeers){u("Bootstrap: Use provided getPeers function.");const r=t.getPeers;this.getBootstrapPeers=async()=>{const t=await r();return(0,a.getPseudoRandomSubset)(t,e).map((t=>new o.Multiaddr(t)))}}else if(t.enrUrl){const e=t.wantedNodeCapabilityCount;if(!e)throw"`wantedNodeCapabilityCount` must be defined when using `enrUrl`";const r=t.enrUrl;u("Use provided EIP-1459 ENR Tree URL.");const n=s.DnsNodeDiscovery.dnsOverHttp();this.getBootstrapPeers=async()=>{const t=await n.getPeers([r],e);return u(`Found ${t.length} peers`),t.map((t=>t.getFullMultiaddrs())).flat()}}else u("No bootstrap method specified, no peer will be returned"),this.getBootstrapPeers=void 0}}e.Bootstrap=c,c.DefaultMaxPeers=1},14777:function(t,e,r){"use strict";r(21703);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DnsNodeDiscovery=void 0;const i=r(15652),o=r(45150),s=r(81111),a=r(28667),u=n(r(47932)),c=(0,i.debug)("waku:discovery:dns");class h{constructor(t){this._errorTolerance=10,this._DNSTreeCache={},this.dns=t}static dnsOverHttp(t){const e=new s.DnsOverHttps(t);return new h(e)}async getPeers(t,e){const r=Math.floor(Math.random()*t.length),{publicKey:n,domain:i}=a.ENRTree.parseTree(t[r]),o={domain:i,publicKey:n,visits:{}},s=await(0,u.default)(e,this._errorTolerance,(()=>this._search(i,o)));return c("retrieved peers: ",s),s}async _search(t,e){try{const n=await this._getTXTRecord(t,e);let i,s;e.visits[t]=!0;const u=l(n);try{switch(u){case a.ENRTree.ROOT_PREFIX:return i=a.ENRTree.parseAndVerifyRoot(n,e.publicKey),await this._search(i,e);case a.ENRTree.BRANCH_PREFIX:return s=a.ENRTree.parseBranch(n),i=f(s,e),await this._search(i,e);case a.ENRTree.RECORD_PREFIX:return o.ENR.decodeTxt(n);default:return null}}catch(r){return c(`Failed to search DNS tree ${u} at subdomain ${t}: ${r}`),null}}catch(r){return c(`Failed to retrieve TXT record at subdomain ${t}: ${r}`),null}}async _getTXTRecord(t,e){if(this._DNSTreeCache[t])return this._DNSTreeCache[t];const r=t!==e.domain?`${t}.${e.domain}`:e.domain,n=await this.dns.resolveTXT(r);if(!n.length)throw new Error("Received empty result array while fetching TXT record");if(!n[0].length)throw new Error("Received empty TXT record");const i=n.join("");return this._DNSTreeCache[t]=i,i}}function l(t){return t.startsWith(a.ENRTree.ROOT_PREFIX)?a.ENRTree.ROOT_PREFIX:t.startsWith(a.ENRTree.BRANCH_PREFIX)?a.ENRTree.BRANCH_PREFIX:t.startsWith(a.ENRTree.RECORD_PREFIX)?a.ENRTree.RECORD_PREFIX:""}function f(t,e){const r={};for(const[i,o]of t.entries())e.visits[o]&&(r[i]=!0);if(Object.keys(r).length===t.length)throw new Error("Unresolvable circular path detected");let n;do{n=Math.floor(Math.random()*t.length)}while(r[n]);return t[n]}e.DnsNodeDiscovery=h},81111:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DnsOverHttps=void 0;const n=r(15515),i=r(54870),{cloudflare:o,google:s,opendns:a}=n.endpoints;class u{constructor(t=[o,s,a]){this.endpoints=t}async resolveTXT(t){const e=await(0,n.query)({questions:[{type:"TXT",name:t}]}),r=e.answers,o=r.map((t=>t.data)),s=[];return o.forEach((t=>{"string"===typeof t?s.push(t):Array.isArray(t)?t.forEach((t=>{"string"===typeof t?s.push(t):s.push((0,i.bytesToUtf8)(t))})):s.push((0,i.bytesToUtf8)(t))})),s}}e.DnsOverHttps=u},28667:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ENRTree=void 0;const s=o(r(35592)),a=r(92259),u=r(66629),c=r(45150),h=r(54870);class l{static parseAndVerifyRoot(t,e){if(!t.startsWith(this.ROOT_PREFIX))throw new Error(`ENRTree root entry must start with '${this.ROOT_PREFIX}'`);const r=l.parseRootValues(t),n=s.decode.asBytes(e),i=t.split(" sig")[0],o=(0,h.utf8ToBytes)(i),c=(0,a.fromString)(r.signature,"base64url").slice(0,64),f=(0,u.verifySignature)(c,(0,u.keccak256)(o),new Uint8Array(n));if(!f)throw new Error("Unable to verify ENRTree root signature");return r.eRoot}static parseRootValues(t){const e=t.match(/^enrtree-root:v1 e=([^ ]+) l=([^ ]+) seq=(\d+) sig=([^ ]+)$/);if(!Array.isArray(e))throw new Error("Could not parse ENRTree root entry");e.shift();const[r,n,i,o]=e;if(!r)throw new Error("Could not parse 'e' value from ENRTree root entry");if(!n)throw new Error("Could not parse 'l' value from ENRTree root entry");if(!i)throw new Error("Could not parse 'seq' value from ENRTree root entry");if(!o)throw new Error("Could not parse 'sig' value from ENRTree root entry");return{eRoot:r,lRoot:n,seq:Number(i),signature:o}}static parseTree(t){if(!t.startsWith(this.TREE_PREFIX))throw new Error(`ENRTree tree entry must start with '${this.TREE_PREFIX}'`);const e=t.match(/^enrtree:\/\/([^@]+)@(.+)$/);if(!Array.isArray(e))throw new Error("Could not parse ENRTree tree entry");e.shift();const[r,n]=e;if(!r)throw new Error("Could not parse public key from ENRTree tree entry");if(!n)throw new Error("Could not parse domain from ENRTree tree entry");return{publicKey:r,domain:n}}static parseBranch(t){if(!t.startsWith(this.BRANCH_PREFIX))throw new Error(`ENRTree branch entry must start with '${this.BRANCH_PREFIX}'`);return t.split(this.BRANCH_PREFIX)[1].split(",")}}e.ENRTree=l,l.RECORD_PREFIX=c.ENR.RECORD_PREFIX,l.TREE_PREFIX="enrtree:",l.BRANCH_PREFIX="enrtree-branch:",l.ROOT_PREFIX="enrtree-root:"},47932:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(15652),i=(0,n.debug)("waku:discovery:fetch_nodes");async function o(t,e,r){const n={relay:t.relay??0,store:t.store??0,filter:t.filter??0,lightPush:t.lightPush??0},o=n.relay+n.store+n.filter+n.lightPush,h={relay:0,store:0,filter:0,lightPush:0};let l=0;const f=[];while(!s(n,h)&&l<o+e){const t=await r();t&&a(t,f)&&(t.waku2&&c(t.waku2,n,h)&&(u(t.waku2,h),f.push(t)),i(`got new peer candidate from DNS address=${t.nodeId}@${t.ip}`)),l++}return f}function s(t,e){return e.relay>=t.relay&&e.store>=t.store&&e.filter>=t.filter&&e.lightPush>=t.lightPush}function a(t,e){if(!t.nodeId)return!1;for(const r of e)if(t.nodeId===r.nodeId)return!1;return!0}function u(t,e){t.relay&&(e.relay+=1),t.store&&(e.store+=1),t.filter&&(e.filter+=1),t.lightPush&&(e.lightPush+=1)}function c(t,e,r){if(s(e,r))throw"Internal Error: Waku2 wanted capabilities are already fulfilled";const n=h(e,r);return n.relay&&t.relay||n.store&&t.store||n.filter&&t.filter||n.lightPush&&t.lightPush}function h(t,e){return{relay:e.relay<t.relay,store:e.store<t.store,filter:e.filter<t.filter,lightPush:e.lightPush<t.lightPush}}e["default"]=o},26746:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.getPseudoRandomSubset=e.ENRTree=e.DnsOverHttps=e.dns=e.Bootstrap=e.predefined=e.getPredefinedBootstrapNodes=void 0;const s=r(49188);var a=r(53676);Object.defineProperty(e,"getPredefinedBootstrapNodes",{enumerable:!0,get:function(){return a.getPredefinedBootstrapNodes}}),e.predefined=o(r(53676));var u=r(26878);Object.defineProperty(e,"Bootstrap",{enumerable:!0,get:function(){return u.Bootstrap}}),e.dns=o(r(14777));var c=r(81111);Object.defineProperty(e,"DnsOverHttps",{enumerable:!0,get:function(){return c.DnsOverHttps}});var h=r(28667);function l(t,e){return t.length<=e?t:(0,s.shuffle)(t).slice(0,e)}Object.defineProperty(e,"ENRTree",{enumerable:!0,get:function(){return h.ENRTree}}),e.getPseudoRandomSubset=l},53676:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fleets=e.getPredefinedBootstrapNodes=e.Fleet=e.DefaultWantedNumber=void 0;const n=r(19391),i=r(26746);var o;function s(t=o.Prod,r=e.DefaultWantedNumber){if(r<=0)return[];let s;switch(t){case o.Prod:s=e.fleets.fleets["wakuv2.prod"]["waku-websocket"];break;case o.Test:s=e.fleets.fleets["wakuv2.test"]["waku-websocket"];break;default:s=e.fleets.fleets["wakuv2.prod"]["waku-websocket"]}return s=Object.values(s),s=s.map((t=>new n.Multiaddr(t))),(0,i.getPseudoRandomSubset)(s,r)}e.DefaultWantedNumber=1,function(t){t["Prod"]="prod",t["Test"]="test"}(o=e.Fleet||(e.Fleet={})),e.getPredefinedBootstrapNodes=s,e.fleets={fleets:{"wakuv2.prod":{"waku-websocket":{"node-01.ac-cn-hongkong-c.wakuv2.prod":"/dns4/node-01.ac-cn-hongkong-c.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAm4v86W3bmT1BiH6oSPzcsSr24iDQpSN5Qa992BCjjwgrD","node-01.do-ams3.wakuv2.prod":"/dns4/node-01.do-ams3.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAmL5okWopX7NqZWBUKVqW8iUxCEmd5GMHLVPwCgzYzQv3e","node-01.gc-us-central1-a.wakuv2.prod":"/dns4/node-01.gc-us-central1-a.wakuv2.prod.statusim.net/tcp/443/wss/p2p/16Uiu2HAmVkKntsECaYfefR1V2yCR79CegLATuTPE6B9TxgxBiiiA"}},"wakuv2.test":{"waku-websocket":{"node-01.ac-cn-hongkong-c.wakuv2.test":"/dns4/node-01.ac-cn-hongkong-c.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAkvWiyFsgRhuJEb9JfjYxEkoHLgnUQmr1N5mKWnYjxYRVm","node-01.do-ams3.wakuv2.test":"/dns4/node-01.do-ams3.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAmPLe7Mzm8TsYUubgCAW1aJoeFScxrLj8ppHFivPo97bUZ","node-01.gc-us-central1-a.wakuv2.test":"/dns4/node-01.gc-us-central1-a.wakuv2.test.statusim.net/tcp/443/wss/p2p/16Uiu2HAmJb2e28qLXxT5kZxVUUoJt72EMzNGXB47Rxx5hw3q4YjS"}}}}},40973:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MULTIADDR_LENGTH_SIZE=e.ERR_NO_SIGNATURE=e.ERR_INVALID_ID=e.MAX_RECORD_SIZE=void 0,e.MAX_RECORD_SIZE=300,e.ERR_INVALID_ID="Invalid record id",e.ERR_NO_SIGNATURE="No valid signature found",e.MULTIADDR_LENGTH_SIZE=2},30410:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ENR=void 0;const a=o(r(27991)),u=s(r(15652)),c=r(19391),h=s(r(75340)),l=r(92259),f=r(96523),d=r(42611),p=r(66629),y=r(54870),g=r(40973),m=r(83876),b=r(11802),w=o(r(32368)),v=r(5934),_=(0,u.default)("waku:enr");class E extends Map{constructor(t={},e=BigInt(1),r=null){super(Object.entries(t)),this.seq=e,this.signature=r}static async create(t={},e=BigInt(1),r=null){const n=new E(t,e,r);try{const t=n.publicKey;if(t){const e=(0,m.createKeypair)(n.keypairType,void 0,t);n.peerId=await(0,m.createPeerIdFromKeypair)(e)}}catch(i){_("Could not calculate peer id for ENR",i)}return n}static createV4(t,e={}){return 33!==t.length&&(t=(0,p.compressPublicKey)(t)),E.create({...e,id:(0,y.utf8ToBytes)("v4"),secp256k1:t})}static createFromPeerId(t,e={}){const r=(0,m.createKeypairFromPeerId)(t);switch(r.type){case m.KeypairType.secp256k1:return E.createV4(r.publicKey,e);default:throw new Error}}static async decodeFromValues(t){if(!Array.isArray(t))throw new Error("Decoded ENR must be an array");if(t.length%2!==0)throw new Error("Decoded ENR must have an even number of elements");const[e,r,...n]=t;if(!e||Array.isArray(e))throw new Error("Decoded ENR invalid signature: must be a byte array");if(!r||Array.isArray(r))throw new Error("Decoded ENR invalid sequence number: must be a byte array");const i={};for(let a=0;a<n.length;a+=2)try{i[(0,y.bytesToUtf8)(n[a])]=n[a+1]}catch(c){_("Failed to decode ENR key to UTF-8, skipping it",n[a],c)}const o="0x"+(r.length?(0,y.bytesToHex)(r):"00"),s=await E.create(i,BigInt(o),e),u=(0,y.hexToBytes)(a.encode([r,...n]));if(!s.verify(u,e))throw new Error("Unable to verify ENR signature");return s}static decode(t){const e=a.decode(t).map(y.hexToBytes);return E.decodeFromValues(e)}static decodeTxt(t){if(!t.startsWith(this.RECORD_PREFIX))throw new Error(`"string encoded ENR must start with '${this.RECORD_PREFIX}'`);return E.decode((0,l.fromString)(t.slice(4),"base64url"))}set(t,e){return this.signature=null,this.seq++,super.set(t,e)}get id(){const t=this.get("id");if(!t)throw new Error("id not found.");return(0,y.bytesToUtf8)(t)}get keypairType(){switch(this.id){case"v4":return m.KeypairType.secp256k1;default:throw new Error(g.ERR_INVALID_ID)}}get publicKey(){switch(this.id){case"v4":return this.get("secp256k1");default:throw new Error(g.ERR_INVALID_ID)}}get keypair(){if(this.publicKey){const t=this.publicKey;return(0,m.createKeypair)(this.keypairType,void 0,t)}}get nodeId(){switch(this.id){case"v4":return this.publicKey?w.nodeId(this.publicKey):void 0;default:throw new Error(g.ERR_INVALID_ID)}}get ip(){const t=this.get("ip");return t?h.default.toString(c.protocols.names.ip4.code,t):void 0}set ip(t){t?this.set("ip",h.default.toBytes(c.protocols.names.ip4.code,t)):this.delete("ip")}get tcp(){const t=this.get("tcp");return t?Number(h.default.toString(c.protocols.names.tcp.code,t)):void 0}set tcp(t){void 0===t?this.delete("tcp"):this.set("tcp",h.default.toBytes(c.protocols.names.tcp.code,t))}get udp(){const t=this.get("udp");return t?Number(h.default.toString(c.protocols.names.udp.code,t)):void 0}set udp(t){void 0===t?this.delete("udp"):this.set("udp",h.default.toBytes(c.protocols.names.udp.code,t))}get ip6(){const t=this.get("ip6");return t?h.default.toString(c.protocols.names.ip6.code,t):void 0}set ip6(t){t?this.set("ip6",h.default.toBytes(c.protocols.names.ip6.code,t)):this.delete("ip6")}get tcp6(){const t=this.get("tcp6");return t?Number(h.default.toString(c.protocols.names.tcp.code,t)):void 0}set tcp6(t){void 0===t?this.delete("tcp6"):this.set("tcp6",h.default.toBytes(c.protocols.names.tcp.code,t))}get udp6(){const t=this.get("udp6");return t?Number(h.default.toString(c.protocols.names.udp.code,t)):void 0}set udp6(t){void 0===t?this.delete("udp6"):this.set("udp6",h.default.toBytes(c.protocols.names.udp.code,t))}get multiaddrs(){const t=this.get("multiaddrs");if(t)return(0,b.decodeMultiaddrs)(t)}set multiaddrs(t){if(void 0===t)this.delete("multiaddrs");else{const e=(0,b.encodeMultiaddrs)(t);this.set("multiaddrs",e)}}getLocationMultiaddr(t){if("udp"===t)return this.getLocationMultiaddr("udp4")||this.getLocationMultiaddr("udp6");if("tcp"===t)return this.getLocationMultiaddr("tcp4")||this.getLocationMultiaddr("tcp6");const e=t.endsWith("6"),r=this.get(e?"ip6":"ip");if(!r)return;const n=t.startsWith("udp"),i=t.startsWith("tcp");let o,s;if(n)o="udp",s=e?this.get("udp6"):this.get("udp");else{if(!i)return;o="tcp",s=e?this.get("tcp6"):this.get("tcp")}if(!s)return;const a=c.protocols.names[e?"ip6":"ip4"],u=a.size/8,h=c.protocols.names[o],l=(0,d.encode)(h.code),f=new Uint8Array(3+u+l.length);return f[0]=a.code,f.set(r,1),f.set(l,1+u),f.set(s,1+u+l.length),new c.Multiaddr(f)}setLocationMultiaddr(t){const e=t.protoNames();if(2!==e.length&&"udp"!==e[1]&&"tcp"!==e[1])throw new Error("Invalid multiaddr");const r=t.tuples();if(!r[0][1]||!r[1][1])throw new Error("Invalid multiaddr");4===r[0][0]?(this.set("ip",r[0][1]),this.set(e[1],r[1][1])):(this.set("ip6",r[0][1]),this.set(e[1]+"6",r[1][1]))}getFullMultiaddr(t){if(this.peerId){const e=this.getLocationMultiaddr(t);if(e)return e.encapsulate(`/p2p/${this.peerId.toB58String()}`)}}getFullMultiaddrs(){if(this.peerId&&this.multiaddrs){const t=this.peerId;return this.multiaddrs.map((e=>e.encapsulate(`/p2p/${t.toB58String()}`)))}return[]}get waku2(){const t=this.get("waku2");if(t)return(0,v.decodeWaku2)(t[0])}set waku2(t){if(void 0===t)this.delete("waku2");else{const e=(0,v.encodeWaku2)(t);this.set("waku2",new Uint8Array([e]))}}verify(t,e){if(!this.get("id")||"v4"!==this.id)throw new Error(g.ERR_INVALID_ID);if(!this.publicKey)throw new Error("Failed to verify ENR: No public key");return(0,p.verifySignature)(e,(0,p.keccak256)(t),this.publicKey)}async sign(t,e){switch(this.id){case"v4":this.signature=await w.sign(e,t);break;default:throw new Error(g.ERR_INVALID_ID)}return this.signature}async encodeToValues(t){const e=Array.from(this.keys()).sort(((t,e)=>t.localeCompare(e))).map((t=>[t,this.get(t)])).map((([t,e])=>[(0,y.utf8ToBytes)(t),e])).flat();if(e.unshift(new Uint8Array([Number(this.seq)])),t)e.unshift(await this.sign((0,y.hexToBytes)(a.encode(e)),t));else{if(!this.signature)throw new Error(g.ERR_NO_SIGNATURE);e.unshift(this.signature)}return e}async encode(t){const e=(0,y.hexToBytes)(a.encode(await this.encodeToValues(t)));if(e.length>=g.MAX_RECORD_SIZE)throw new Error("ENR must be less than 300 bytes");return e}async encodeTxt(t){return E.RECORD_PREFIX+(0,f.toString)(await this.encode(t),"base64url")}}e.ENR=E,E.RECORD_PREFIX="enr:"},45150:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.v4=void 0;const a=o(r(32368));e.v4=a,s(r(40973),e),s(r(30410),e),s(r(74627),e),s(r(83876),e),s(r(5934),e)},83876:function(t,e,r){"use strict";r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createKeypairFromPeerId=e.createPeerIdFromKeypair=e.createKeypair=e.generateKeypair=e.ERR_TYPE_NOT_IMPLEMENTED=void 0;const s=r(75167),a=r(67041),u=o(r(68292)),c=r(6937),h=r(37238),{keysPBM:l,supportedKeys:f}=s.keys;async function d(t){switch(t){case h.KeypairType.secp256k1:return await c.Secp256k1Keypair.generate();default:throw new Error(e.ERR_TYPE_NOT_IMPLEMENTED)}}function p(t,r,n){switch(t){case h.KeypairType.secp256k1:return new c.Secp256k1Keypair(r,n);default:throw new Error(e.ERR_TYPE_NOT_IMPLEMENTED)}}async function y(t){switch(t.type){case h.KeypairType.secp256k1:{const e=t.hasPrivateKey()?new f.secp256k1.Secp256k1PrivateKey(t.privateKey,t.publicKey):void 0,r=new f.secp256k1.Secp256k1PublicKey(t.publicKey),n=await a.identity.digest(r.bytes);return new u.default(n.bytes,e,r)}default:throw new Error(e.ERR_TYPE_NOT_IMPLEMENTED)}}function g(t){const e=l.PublicKey.decode(t.pubKey.bytes);return p(e.Type,t.privKey?t.privKey.marshal():void 0,e.Data)}e.ERR_TYPE_NOT_IMPLEMENTED="Keypair type not implemented",i(r(37238),e),i(r(6937),e),e.generateKeypair=d,e.createKeypair=p,e.createPeerIdFromKeypair=y,e.createKeypairFromPeerId=g},6937:function(t,e,r){"use strict";r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Secp256k1Keypair=void 0;const s=o(r(20272)),a=r(66629),u=r(37238);class c{constructor(t,e){let r=e;if(r&&(r=(0,a.compressPublicKey)(r)),(this._privateKey=t)&&!this.privateKeyVerify())throw new Error("Invalid private key");if((this._publicKey=r)&&!this.publicKeyVerify())throw new Error("Invalid public key");this.type=u.KeypairType.secp256k1}static async generate(){const t=(0,a.randomBytes)(32),e=s.getPublicKey(t);return new c(t,e)}privateKeyVerify(t=this._privateKey){return!t||s.utils.isValidPrivateKey(t)}publicKeyVerify(t=this._publicKey){if(t)try{return s.Point.fromHex(t),!0}catch{return!1}return!0}get privateKey(){if(!this._privateKey)throw new Error;return this._privateKey}get publicKey(){if(!this._publicKey)throw new Error;return this._publicKey}hasPrivateKey(){return!!this._privateKey}}e.Secp256k1Keypair=c},37238:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeypairType=void 0,function(t){t[t["rsa"]=0]="rsa",t[t["ed25519"]=1]="ed25519",t[t["secp256k1"]=2]="secp256k1"}(e.KeypairType||(e.KeypairType={}))},11802:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.encodeMultiaddrs=e.decodeMultiaddrs=void 0;const n=r(19391),i=r(40973);function o(t){const e=[];let r=0;while(r<t.length){const o=new DataView(t.buffer,r,i.MULTIADDR_LENGTH_SIZE),s=o.getUint16(0);r+=i.MULTIADDR_LENGTH_SIZE;const a=t.slice(r,r+s);r+=s;const u=new n.Multiaddr(a);e.push(u)}return e}function s(t){const e=t.reduce(((t,e)=>t+i.MULTIADDR_LENGTH_SIZE+e.bytes.length),0),r=new Uint8Array(e),n=new DataView(r.buffer);let o=0;return t.forEach((t=>{if(t.getPeerId())throw new Error("`multiaddr` field MUST not contain peer id");n.setUint16(o,t.bytes.length),o+=i.MULTIADDR_LENGTH_SIZE,r.set(t.bytes,o),o+=t.bytes.length})),r}e.decodeMultiaddrs=o,e.encodeMultiaddrs=s},74627:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},32368:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.nodeId=e.sign=void 0;const s=o(r(20272)),a=r(66629),u=r(54870);async function c(t,e){return s.sign((0,a.keccak256)(e),t,{der:!1})}function h(t){const e=s.Point.fromHex(t),r=e.toRawBytes(!1);return(0,u.bytesToHex)((0,a.keccak256)(r.slice(1)))}e.sign=c,e.nodeId=h},5934:function(t,e){"use strict";function r(t){let e=0;return t.lightPush&&(e+=1),e<<=1,t.filter&&(e+=1),e<<=1,t.store&&(e+=1),e<<=1,t.relay&&(e+=1),e}function n(t){const e={relay:!1,store:!1,filter:!1,lightPush:!1};return t%2&&(e.relay=!0),t>>=1,t%2&&(e.store=!0),t>>=1,t%2&&(e.filter=!0),t>>=1,t%2&&(e.lightPush=!0),e}Object.defineProperty(e,"__esModule",{value:!0}),e.decodeWaku2=e.encodeWaku2=void 0,e.encodeWaku2=r,e.decodeWaku2=n},98719:function(t,e,r){"use strict";async function n(t){const e=[];for await(const n of t)e.push(n);if(0===e.length)return;const r=Math.round(Math.random()*(e.length-1));return e[r]}async function*i(t,e){for await(const r of t.peerStore.getPeers()){let t=!1;for(let n=0;n<e.length;n++)if(r.protocols.includes(e[n])){t=!0;break}t&&(yield r)}}r(26699),Object.defineProperty(e,"__esModule",{value:!0}),e.getPeersForProtocol=e.selectRandomPeer=void 0,e.selectRandomPeer=n,e.getPeersForProtocol=i},54870:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utf8ToBytes=e.bytesToUtf8=e.bytesToHex=e.hexToBytes=void 0;const n=r(92259),i=r(96523);function o(t){if("string"===typeof t){const e=t.replace(/^0x/i,"");return(0,n.fromString)(e,"base16")}return t}e.hexToBytes=o;const s=t=>(0,i.toString)(t,"base16");e.bytesToHex=s;const a=t=>(0,i.toString)(t,"utf8");e.bytesToUtf8=a;const u=t=>(0,n.fromString)(t,"utf8");e.utf8ToBytes=u},16630:function(t,e,r){"use strict";r(26699),r(48675),r(3462),r(37380),r(1118);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Waku=e.Protocols=e.DefaultPubSubTopic=e.DefaultRelayKeepAliveValueSecs=e.DefaultPingKeepAliveValueSecs=void 0;const i=r(43499),o=n(r(15652)),s=n(r(95499)),a=n(r(84780)),u=n(r(95631)),c=n(r(373)),h=n(r(94362)),l=n(r(64532)),f=r(19391),d=n(r(68292)),p=r(26746),y=r(48430),g=r(68511),m=r(82649),b=r(64808),w=r(50165),v=r(97975),_=c.default.prototype[Symbol.toStringTag];e.DefaultPingKeepAliveValueSecs=0,e.DefaultRelayKeepAliveValueSecs=300,e.DefaultPubSubTopic="/waku/2/default-waku/proto";const E=(0,o.default)("waku:waku");var S;(function(t){t["Relay"]="relay",t["Store"]="store",t["LightPush"]="lightpush",t["Filter"]="filter"})(S=e.Protocols||(e.Protocols={}));class A{constructor(t,r,n,i,o){this.libp2p=r,this.relay=r.pubsub,this.store=n,this.filter=o,this.lightPush=i,this.pingKeepAliveTimers={},this.relayKeepAliveTimers={};const s=t.pingKeepAlive||e.DefaultPingKeepAliveValueSecs,a=t.relayKeepAlive||e.DefaultRelayKeepAliveValueSecs;r.connectionManager.on("peer:connect",(t=>{this.startKeepAlive(t.remotePeer,s,a)})),r.connectionManager.on("peer:disconnect",(t=>{this.stopKeepAlive(t.remotePeer)})),t?.decryptionKeys?.forEach((t=>{this.addDecryptionKey(t)}))}static async create(t){const e=Object.assign({},t?.libp2p);if(e.config=Object.assign({transport:{[_]:{filter:h.default.all}}},t?.libp2p?.config),t?.pubSubTopic&&(e.config.pubsub=Object.assign({pubSubTopic:t.pubSubTopic},e.config.pubsub)),e.modules=Object.assign({},t?.libp2p?.modules),e.modules=Object.assign({transport:[c.default]},t?.libp2p?.modules),e.modules=Object.assign(e.modules,{streamMuxer:[u.default],connEncryption:[new i.Noise(t?.staticNoiseKey)],pubsub:b.WakuRelay}),t?.bootstrap){const r=new p.Bootstrap(t?.bootstrap);if(void 0!==r.getBootstrapPeers)try{const t=await r.getBootstrapPeers();e.modules=Object.assign(e.modules,{peerDiscovery:[a.default]}),e.config.peerDiscovery={[a.default.tag]:{list:t,enabled:!0}}}catch(f){E("Failed to retrieve bootstrap nodes",f)}}const r=await s.default.create(e),n=new v.WakuStore(r,{pubSubTopic:t?.pubSubTopic}),o=new g.WakuLightPush(r),l=new y.WakuFilter(r);return await r.start(),new A(t||{},r,n,o,l)}async dial(t,e){const r=e??[S.Relay],n=[];if(r.includes(S.Relay)&&b.RelayCodecs.forEach((t=>n.push(t))),r.includes(S.Store))for(const i of Object.values(v.StoreCodecs))n.push(i);return r.includes(S.LightPush)&&n.push(g.LightPushCodec),r.includes(S.Filter)&&n.push(y.FilterCodec),this.libp2p.dialProtocol(t,n)}addPeerToAddressBook(t,e){let r;r="string"===typeof t?d.default.createFromB58String(t):t;const n=e.map((t=>"string"===typeof t?(0,f.multiaddr)(t):t));this.libp2p.peerStore.addressBook.set(r,n)}async stop(){return this.libp2p.stop()}addDecryptionKey(t,e){this.relay.addDecryptionKey(t,e),this.store.addDecryptionKey(t,e),this.filter.addDecryptionKey(t,e)}deleteDecryptionKey(t){this.relay.deleteDecryptionKey(t),this.store.deleteDecryptionKey(t),this.filter.deleteDecryptionKey(t)}getLocalMultiaddrWithID(){const t=this.libp2p.multiaddrs.find((t=>t.toString().match(/127\.0\.0\.1/)));if(!t||""===t.toString())throw"Not listening on localhost";return t+"/p2p/"+this.libp2p.peerId.toB58String()}async waitForRemotePeer(t,e){t=t??[S.Relay];const r=[];if(t.includes(S.Relay)){const t=this.relay.getPeers();if(0==t.size){const t=new Promise((t=>{this.libp2p.pubsub.once("pubsub:subscription-change",(()=>{this.libp2p.pubsub.once("gossipsub:heartbeat",t)}))}));r.push(t)}}if(t.includes(S.Store)){const t=(async()=>{for await(const t of this.store.peers){E("Store peer found",t.id.toB58String());break}})();r.push(t)}if(t.includes(S.LightPush)){const t=(async()=>{for await(const t of this.lightPush.peers){E("Light Push peer found",t.id.toB58String());break}})();r.push(t)}if(t.includes(S.Filter)){const t=(async()=>{for await(const t of this.filter.peers){E("Filter peer found",t.id.toB58String());break}})();r.push(t)}e?await T(Promise.all(r),e,"Timed out waiting for a remote peer."):await Promise.all(r)}startKeepAlive(t,e,r){this.stopKeepAlive(t);const n=t.toB58String();if(0!==e){const r=new l.default(this.libp2p);this.pingKeepAliveTimers[n]=setInterval((()=>{r.ping(t).catch((t=>{E(`Ping failed (${n})`,t)}))}),1e3*e)}0!==r&&(this.relayKeepAliveTimers[n]=setInterval((()=>{m.WakuMessage.fromBytes(new Uint8Array,w.RelayPingContentTopic).then((t=>this.relay.send(t)))}),1e3*r))}stopKeepAlive(t){const e=t.toB58String();this.pingKeepAliveTimers[e]&&(clearInterval(this.pingKeepAliveTimers[e]),delete this.pingKeepAliveTimers[e]),this.relayKeepAliveTimers[e]&&(clearInterval(this.relayKeepAliveTimers[e]),delete this.relayKeepAliveTimers[e])}}e.Waku=A;const I=(t,e)=>new Promise(((r,n)=>setTimeout((()=>n(e)),t))),T=(t,e,r)=>Promise.race([t,I(e,r)])},22074:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.FilterRPC=void 0;const s=r(86425),a=r(80759),u=o(r(98775));class c{constructor(t){this.proto=t}static createRequest(t,e,r,n=!0){return new c({requestId:r||(0,a.v4)(),request:{subscribe:n,topic:t,contentFilters:e},push:void 0})}static decode(t){const e=u.FilterRPC.decode(s.Reader.create(t));return new c(e)}encode(){return u.FilterRPC.encode(this.proto).finish()}get push(){return this.proto.push}get requestId(){return this.proto.requestId}}e.FilterRPC=c},48430:function(t,e,r){"use strict";r(21703);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WakuFilter=e.FilterCodec=void 0;const i=n(r(15652)),o=n(r(92992)),s=r(62100),a=r(98719),u=r(54870),c=r(16630),h=r(82649),l=r(22074);e.FilterCodec="/vac/waku/filter/2.0.0-beta1";const f=(0,i.default)("waku:filter");class d{constructor(t){this.libp2p=t,this.subscriptions=new Map,this.decryptionKeys=new Map,this.libp2p.handle(e.FilterCodec,this.onRequest.bind(this))}async subscribe(t,e,r){const n=r?.pubsubTopic||c.DefaultPubSubTopic,i=e.map((t=>({contentTopic:t}))),a=l.FilterRPC.createRequest(n,i,void 0,!0),u=await this.getPeer(r?.peerId),h=await this.newStream(u);try{await(0,s.pipe)([a.encode()],o.default.encode(),h)}catch(d){throw f("Error subscribing to peer ",u.id.toB58String(),"for content topics",e,": ",d),d}return this.addCallback(a.requestId,t),async()=>{await this.unsubscribe(n,i,a.requestId,u),this.removeCallback(a.requestId)}}async onRequest({stream:t}){f("Receiving message push");try{await(0,s.pipe)(t.source,o.default.decode(),(async t=>{for await(const e of t){const t=l.FilterRPC.decode(e.slice());t.push?.messages?.length&&await this.pushMessages(t.requestId,t.push.messages)}}))}catch(e){f("Error decoding message",e)}}async pushMessages(t,e){const r=this.subscriptions.get(t);if(!r)return void f(`No callback registered for request ID ${t}`);const n=Array.from(this.decryptionKeys).map((([t,{method:e,contentTopics:r}])=>({key:t,method:e,contentTopics:r})));for(const i of e){const t=await h.WakuMessage.decodeProto(i,n);t?r(t):f("Not able to decode message")}}addCallback(t,e){this.subscriptions.set(t,e)}removeCallback(t){this.subscriptions.delete(t)}async unsubscribe(t,e,r,n){const i=l.FilterRPC.createRequest(t,e,r,!1),a=await this.newStream(n);try{await(0,s.pipe)([i.encode()],o.default.encode(),a.sink)}catch(u){throw f("Error unsubscribing",u),u}}async newStream(t){const r=this.libp2p.connectionManager.get(t.id);if(!r)throw new Error("Failed to get a connection to the peer");const{stream:n}=await r.newStream(e.FilterCodec);return n}async getPeer(t){let e;if(t){if(e=await this.libp2p.peerStore.get(t),!e)throw new Error(`Failed to retrieve connection details for provided peer in peer store: ${t.toB58String()}`)}else if(e=await this.randomPeer,!e)throw new Error("Failed to find known peer that registers waku filter protocol");return e}addDecryptionKey(t,e){this.decryptionKeys.set((0,u.hexToBytes)(t),e??{})}deleteDecryptionKey(t){this.decryptionKeys.delete((0,u.hexToBytes)(t))}get peers(){return(0,a.getPeersForProtocol)(this.libp2p,[e.FilterCodec])}get randomPeer(){return(0,a.selectRandomPeer)(this.peers)}}e.WakuFilter=d},68511:function(t,e,r){"use strict";var n=r(15941);r(26699);var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WakuLightPush=e.PushResponse=e.LightPushCodec=void 0;const o=i(r(9694)),s=i(r(92992)),a=r(62100),u=r(29370);Object.defineProperty(e,"PushResponse",{enumerable:!0,get:function(){return u.PushResponse}});const c=r(98719),h=r(16630),l=r(72017);e.LightPushCodec="/vac/waku/lightpush/2.0.0-beta1";class f{constructor(t,e){this.libp2p=t,this.pubSubTopic=e?.pubSubTopic?e.pubSubTopic:h.DefaultPubSubTopic}async push(t,r){let i;if(r?.peerId){if(i=await this.libp2p.peerStore.get(r.peerId),!i)throw"Peer is unknown"}else i=await this.randomPeer;if(!i)throw"No peer available";if(!i.protocols.includes(e.LightPushCodec))throw"Peer does not register waku light push protocol";const u=this.libp2p.connectionManager.get(i.id);if(!u)throw"Failed to get a connection to the peer";const{stream:c}=await u.newStream(e.LightPushCodec);try{const e=r?.pubSubTopic?r.pubSubTopic:this.pubSubTopic,i=l.PushRPC.createRequest(t,e),u=await(0,a.pipe)([i.encode()],s.default.encode(),c,s.default.decode(),o.default);try{const t=l.PushRPC.decode(u.slice()).response;return t||(n.log("No response in PushRPC"),null)}catch(h){n.log("Failed to decode push reply",h)}}catch(h){n.log("Failed to send waku light push request",h)}return null}get peers(){return(0,c.getPeersForProtocol)(this.libp2p,[e.LightPushCodec])}get randomPeer(){return(0,c.selectRandomPeer)(this.peers)}}e.WakuLightPush=f},72017:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PushRPC=void 0;const s=r(86425),a=r(80759),u=o(r(29370));class c{constructor(t){this.proto=t}static createRequest(t,e){return new c({requestId:(0,a.v4)(),request:{message:t.proto,pubSubTopic:e},response:void 0})}static decode(t){const e=u.PushRPC.decode(s.Reader.create(t));return new c(e)}encode(){return u.PushRPC.encode(this.proto).finish()}get query(){return this.proto.request}get response(){return this.proto.response}}e.PushRPC=c},41366:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.decrypt=e.encrypt=void 0;const s=o(r(20272)),a=r(85489),u=r(66629),c=r(54870);function h(t,e){let r=1,n=0,i=Promise.resolve(new Uint8Array);while(n<e){const e=new Uint8Array([r>>24,r>>16,r>>8,r]),o=(0,a.concat)([e,t],e.length+t.length),s=(0,u.sha256)(o);i=i.then((t=>s.then((e=>{const r=new Uint8Array(e);return(0,a.concat)([t,r],t.length+r.length)})))),n+=32,r+=1}return i}function l(t,e,r){return(0,u.getSubtle)().importKey("raw",e,"AES-CTR",!1,["encrypt"]).then((e=>(0,u.getSubtle)().encrypt({name:"AES-CTR",counter:t,length:128},e,r))).then((t=>new Uint8Array(t)))}function f(t,e,r){return(0,u.getSubtle)().importKey("raw",e,"AES-CTR",!1,["decrypt"]).then((e=>(0,u.getSubtle)().decrypt({name:"AES-CTR",counter:t,length:128},e,r))).then((t=>new Uint8Array(t)))}function d(t,e){const r={name:"HMAC",hash:{name:"SHA-256"}};return(0,u.getSubtle)().importKey("raw",t,r,!1,["sign"]).then((t=>(0,u.getSubtle)().sign(r,t,e))).then((t=>new Uint8Array(t)))}function p(t,e,r){const n={name:"HMAC",hash:{name:"SHA-256"}},i=(0,u.getSubtle)().importKey("raw",t,n,!1,["verify"]);return i.then((t=>(0,u.getSubtle)().verify(n,t,r,e)))}function y(t,e){if(32!==t.length)throw new Error(`Bad private key, it should be 32 bytes but it's actually ${t.length} bytes long`);if(65!==e.length)throw new Error(`Bad public key, it should be 65 bytes but it's actually ${e.length} bytes long`);if(4!==e[0])throw new Error("Bad public key, a valid public key would begin with 4");{const r=s.getSharedSecret(t,e,!0);return new Uint8Array((0,c.hexToBytes)(r).slice(1))}}async function g(t,e){const r=(0,u.randomBytes)(32),n=await y(r,t),i=await h(n,32),o=(0,u.randomBytes)(16),c=i.slice(0,16),f=await l(o,c,e),p=(0,a.concat)([o,f],o.length+f.length),g=await(0,u.sha256)(i.slice(16)),m=await d(g,p),b=s.getPublicKey(r,!1);return(0,a.concat)([b,p,m],b.length+p.length+m.length)}e.encrypt=g;const m=113;async function b(t,e){if(e.length<=m)throw new Error(`Invalid Ciphertext. Data is too small. It should ba at least ${m} bytes`);if(4!==e[0])throw new Error(`Not a valid ciphertext. It should begin with 4 but actually begin with ${e[0]}`);{const r=e.slice(0,65),n=e.length-m,i=e.slice(65,81),o=e.slice(65,81+n),s=o.slice(16),a=e.slice(81+n),c=y(t,r),l=await h(c,32),[d,g]=await(0,u.sha256)(l.slice(16)).then((t=>[l.slice(0,16),t]));if(!await p(g,o,a))throw new Error("Incorrect MAC");return f(i,d,s)}}e.decrypt=b},82649:function(t,e,r){"use strict";r(26699),r(48675),r(3462),r(37380),r(1118);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WakuMessage=e.DecryptionMethod=void 0;const a=s(r(15652)),u=s(r(19438)),c=r(86425),h=o(r(23476)),l=r(54870),f=o(r(28967)),d=0,p=(0,a.default)("waku:message");var y;(function(t){t["Asymmetric"]="asymmetric",t["Symmetric"]="symmetric"})(y=e.DecryptionMethod||(e.DecryptionMethod={}));class g{constructor(t,e,r){this.proto=t,this._signaturePublicKey=e,this._signature=r}static async fromUtf8String(t,e,r){const n=(0,l.utf8ToBytes)(t);return g.fromBytes(n,e,r)}static async fromBytes(t,e,r){const{timestamp:n,encPublicKey:i,symKey:o,sigPrivKey:s}=Object.assign({timestamp:new Date},r||{});let a,c=t,h=d;if(i&&o)throw"Pass either `encPublicKey` or `symKey`, not both.";if(i){const t=await f.clearEncode(c,s);c=await f.encryptAsymmetric(t.payload,i),a=t.sig,h=1}else if(o){const t=await f.clearEncode(c,s);c=await f.encryptSymmetric(t.payload,o),a=t.sig,h=1}return new g({payload:c,timestampDeprecated:n.valueOf()/1e3,timestamp:u.default.fromNumber(n.valueOf()).mul(1e6),version:h,contentTopic:e},a?.publicKey,a?.signature)}static async decode(t,e){const r=h.WakuMessage.decode(c.Reader.create(t));return g.decodeProto(r,e)}static async decodeProto(t,e){if(void 0===t.payload)return void p("Payload is undefined");const r=t.payload;let n,i;if(1===t.version&&t.payload){if(void 0===e)return void p("Payload is encrypted but no private keys have been provided.");const o=await Promise.all(e.map((async({key:e,method:n,contentTopics:i})=>{if(!i||t.contentTopic&&i.includes(t.contentTopic))switch(n){case y.Asymmetric:try{return await f.decryptAsymmetric(r,e)}catch(o){return void p("Failed to decrypt message using asymmetric encryption despite decryption method being specified",o)}case y.Symmetric:try{return await f.decryptSymmetric(r,e)}catch(o){return void p("Failed to decrypt message using asymmetric encryption despite decryption method being specified",o)}default:try{return await f.decryptSymmetric(r,e)}catch(o){p("Failed to decrypt message using symmetric encryption",o);try{return await f.decryptAsymmetric(r,e)}catch(o){return void p("Failed to decrypt message using asymmetric encryption",o)}}}}))),s=t=>!!t,a=o.filter(s);if(0===a.length)return void p("Failed to decrypt payload.");const u=a[0],c=await f.clearDecode(u);if(!c)return void p("Failed to decode payload.");Object.assign(t,{payload:c.payload}),n=c.sig?.publicKey,i=c.sig?.signature}return new g(t,n,i)}encode(){return h.WakuMessage.encode(this.proto).finish()}get payloadAsUtf8(){if(!this.payload)return"";try{return(0,l.bytesToUtf8)(this.payload)}catch(t){return p("Could not decode byte as UTF-8",t),""}}get payload(){if(this.proto.payload)return new Uint8Array(this.proto.payload)}get contentTopic(){return this.proto.contentTopic}get version(){return this.proto.version}get timestamp(){try{if(this.proto.timestamp){const t=this.proto.timestamp.div(1e6).toNumber();return new Date(t)}if(this.proto.timestampDeprecated)return new Date(1e3*this.proto.timestampDeprecated)}catch(t){return}}get signaturePublicKey(){return this._signaturePublicKey}get signature(){return this._signature}}e.WakuMessage=g},82262:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),Object.defineProperty(e,"__esModule",{value:!0}),e.generateIv=e.decrypt=e.encrypt=e.TagSize=e.IvSize=e.KeySize=void 0;const n=r(66629);e.KeySize=32,e.IvSize=12,e.TagSize=16;const i={name:"AES-GCM",length:128};async function o(t,e,r){return(0,n.getSubtle)().importKey("raw",e,i,!1,["encrypt"]).then((e=>(0,n.getSubtle)().encrypt({iv:t,...i},e,r))).then((t=>new Uint8Array(t)))}async function s(t,e,r){return(0,n.getSubtle)().importKey("raw",e,i,!1,["decrypt"]).then((e=>(0,n.getSubtle)().decrypt({iv:t,...i},e,r))).then((t=>new Uint8Array(t)))}function a(){return(0,n.randomBytes)(e.IvSize)}e.encrypt=o,e.decrypt=s,e.generateIv=a},28967:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.decryptSymmetric=e.encryptSymmetric=e.decryptAsymmetric=e.encryptAsymmetric=e.clearDecode=e.clearEncode=e.PrivateKeySize=void 0;const s=o(r(20272)),a=r(85489),u=r(66629),c=r(54870),h=o(r(41366)),l=o(r(82262)),f=1,d=3,p=4,y=256,g=65;async function m(t,e){let r=new Uint8Array([0]);r=T(r,t),r=(0,a.concat)([r,t]);let n=f+R(t)+t.length;e&&(n+=g);const i=n%y,o=y-i,c=(0,u.randomBytes)(o);if(!M(c,o))throw new Error("failed to generate random padding of size "+o);let h;if(r=(0,a.concat)([r,c]),e){r[0]|=p;const t=(0,u.keccak256)(r),n=await(0,u.sign)(t,e);r=(0,a.concat)([r,n]),h={signature:n,publicKey:s.getPublicKey(e,!1)}}return{payload:r,sig:h}}function b(t){const e=w(t);if(0===e)return;const r=v(t,e),n=1+e,i=t.slice(n,n+r),o=_(t);let s;if(o){const e=k(t),r=C(t,o),n=O(r,e);s={signature:e,publicKey:n}}return{payload:i,sig:s}}function w(t){const e=new DataView(t.buffer);return e.getUint8(0)&d}function v(t,e){let r=t.slice(1,1+e);e<4&&(r=(0,a.concat)([r,new Uint8Array(4-e)],4));const n=new DataView(r.buffer);return n.getInt32(0,!0)}function _(t){const e=new DataView(t.buffer);return(e.getUint8(0)&p)==p}async function E(t,e){return h.encrypt((0,c.hexToBytes)(e),t)}async function S(t,e){return h.decrypt(e,t)}async function A(t,e){const r=l.generateIv(),n=await l.encrypt(r,(0,c.hexToBytes)(e),t);return(0,a.concat)([n,r])}async function I(t,e){const r=t.length-l.IvSize,n=t.slice(0,r),i=t.slice(r);return l.decrypt(i,(0,c.hexToBytes)(e),n)}function T(t,e){const r=R(e);let n=new Uint8Array(4);const i=new DataView(n.buffer);return i.setUint32(0,e.length,!0),n=n.slice(0,r),t=(0,a.concat)([t,n]),t[0]|=r,t}function R(t){let e=1;for(let r=t.length;r>=256;r/=256)e++;return e}function M(t,e){return t.length===e&&(e<=3||-1!==t.findIndex((t=>0!==t)))}function k(t){return t.slice(t.length-g,t.length)}function C(t,e){return e?(0,u.keccak256)(t.slice(0,t.length-g)):(0,u.keccak256)(t)}function O(t,e){const r=new DataView(e.slice(64).buffer),n=r.getUint8(0),i=s.Signature.fromCompact(e.slice(0,64));return s.recoverPublicKey(t,i,n,!1)}e.PrivateKeySize=32,e.clearEncode=m,e.clearDecode=b,e.encryptAsymmetric=E,e.decryptAsymmetric=S,e.encryptSymmetric=A,e.decryptSymmetric=I},50165:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RelayMaxIHaveLength=e.RelayOpportunisticGraftPeers=e.RelayOpportunisticGraftTicks=e.RelayFanoutTTL=e.RelayPruneBackoff=e.RelayPrunePeers=e.RelayHeartbeatInterval=e.RelayHeartbeatInitialDelay=e.RelayGossipFactor=e.RelayPingContentTopic=e.RelayCodecs=e.minute=e.second=void 0,e.second=1e3,e.minute=60*e.second,e.RelayCodecs=["/vac/waku/relay/2.0.0-beta2","/vac/waku/relay/2.0.0"],e.RelayPingContentTopic="/relay-ping/1/ping/null",e.RelayGossipFactor=.25,e.RelayHeartbeatInitialDelay=100,e.RelayHeartbeatInterval=e.second,e.RelayPrunePeers=16,e.RelayPruneBackoff=e.minute,e.RelayFanoutTTL=e.minute,e.RelayOpportunisticGraftTicks=60,e.RelayOpportunisticGraftPeers=2,e.RelayMaxIHaveLength=5e3},87570:function(t,e,r){"use strict";r(26699),Object.defineProperty(e,"__esModule",{value:!0}),e.getRelayPeers=void 0;const n=r(49188),i=r(64808);function o(t,e,r,o=(()=>!0)){const s=t.topics.get(e);if(!s)return new Set;let a=[];return s.forEach((e=>{const r=t.peers.get(e);r&&i.RelayCodecs.includes(r.protocol)&&o(e)&&a.push(e)})),a=(0,n.shuffle)(a),r>0&&a.length>r&&(a=a.slice(0,r)),new Set(a)}e.getRelayPeers=o},64808:function(t,e,r){"use strict";r(21703),r(26699);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WakuRelay=e.RelayCodecs=void 0;const a=s(r(15652)),u=s(r(33444)),c=r(49188),h=r(92454),l=s(r(68292)),f=r(54870),d=r(16630),p=r(82649),y=o(r(50165)),g=r(50165);Object.defineProperty(e,"RelayCodecs",{enumerable:!0,get:function(){return g.RelayCodecs}});const m=r(87570),b=r(46279),w=(0,a.default)("waku:relay");class v extends u.default{constructor(t,e){super(t,Object.assign(e,{globalSignaturePolicy:h.SignaturePolicy.StrictNoSign})),this.heartbeat=new b.RelayHeartbeat(this),this.observers={},this.decryptionKeys=new Map;const r=y.RelayCodecs;Object.assign(this,{multicodecs:r}),this.pubSubTopic=e?.pubSubTopic||d.DefaultPubSubTopic,e?.decryptionKeys?.forEach((t=>{this.addDecryptionKey(t)}))}async start(){await super.start(),this.subscribe(this.pubSubTopic)}async send(t){const e=t.encode();await super.publish(this.pubSubTopic,e)}addDecryptionKey(t,e){this.decryptionKeys.set((0,f.hexToBytes)(t),e??{})}deleteDecryptionKey(t){this.decryptionKeys.delete((0,f.hexToBytes)(t))}addObserver(t,e=[]){0===e.length?(this.observers[""]||(this.observers[""]=new Set),this.observers[""].add(t)):e.forEach((e=>{this.observers[e]||(this.observers[e]=new Set),this.observers[e].add(t)}))}deleteObserver(t,e=[]){0===e.length?this.observers[""]&&this.observers[""].delete(t):e.forEach((e=>{this.observers[e]&&this.observers[e].delete(t)}))}getPeers(){return(0,m.getRelayPeers)(this,this.pubSubTopic,this._options.D,(t=>this.score.score(t)>=this._options.scoreThresholds.publishThreshold))}subscribe(t){this.on(t,(e=>{const r=Array.from(this.decryptionKeys).map((([t,{method:e,contentTopics:r}])=>({key:t,method:e,contentTopics:r})));w(`Message received on ${t}`),p.WakuMessage.decode(e.data,r).then((t=>{t?(this.observers[""]&&this.observers[""].forEach((e=>{e(t)})),t.contentTopic&&this.observers[t.contentTopic]&&this.observers[t.contentTopic].forEach((e=>{e(t)}))):w("Failed to decode Waku Message")})).catch((t=>{w("Failed to decode Waku Message",t)}))})),super.subscribe(t)}join(t){if(!this.started)throw new Error("WakuRelayPubSub has not started");const e=this.fanout.get(t);if(e)e.forEach((t=>{this.score.score(t)<0&&e.delete(t)})),e.size<this._options.D&&(0,m.getRelayPeers)(this,t,this._options.D-e.size,(t=>!e.has(t)&&!this.direct.has(t)&&this.score.score(t)>=0)).forEach((t=>e.add(t))),this.mesh.set(t,e),this.fanout.delete(t),this.lastpub.delete(t);else{const e=(0,m.getRelayPeers)(this,t,this._options.D,(t=>!this.direct.has(t)&&this.score.score(t)>=0));this.mesh.set(t,e)}this.mesh.get(t)?.forEach((e=>{this.log("JOIN: Add mesh link to %s in %s",e,t),this._sendGraft(e,t)}))}async _publish(t){const e=await this.getCanonicalMsgIdStr(t);t.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(t,e),this.gossipTracer.deliverMessage(e)),this.seenCache.put(e),this.messageCache.put(t,e);const r=new Set;t.topicIDs.forEach((t=>{const e=this.topics.get(t);if(!e)return;this.direct.forEach((t=>{r.add(t)}));let n=this.mesh.get(t);if(!n||!n.size){if(n=this.fanout.get(t),!n){const e=(0,m.getRelayPeers)(this,t,this._options.D,(t=>this.score.score(t)>=this._options.scoreThresholds.publishThreshold));e.size>0?(n=e,this.fanout.set(t,e)):n=new Set}this.lastpub.set(t,this._now())}n?.forEach((t=>{r.add(t)}))}));const n=(0,c.createGossipRpc)([u.default.utils.normalizeOutRpcMessage(t)]);w(`Relay message to ${r.size} peers`),r.forEach((e=>{e!==t.from&&(w("Relay message to",e),this._sendRpc(e,n))}))}_emitGossip(t,e){const r=this.messageCache.getGossipIDs(t);if(!r.length)return;(0,c.shuffle)(r),r.length>y.RelayMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length);const n=[],i=this.topics.get(t);if(!i)return;i.forEach((t=>{const r=this.peers.get(t);r&&!e.has(t)&&!this.direct.has(t)&&y.RelayCodecs.includes(r.protocol)&&this.score.score(t)>=this._options.scoreThresholds.gossipThreshold&&n.push(t)}));let o=this._options.Dlazy;const s=y.RelayGossipFactor*n.length;s>o&&(o=s),o>n.length?o=n.length:(0,c.shuffle)(n),n.slice(0,o).forEach((e=>{let n=r;r.length>y.RelayMaxIHaveLength&&(n=(0,c.shuffle)(n.slice()).slice(0,y.RelayMaxIHaveLength)),this._pushGossip(e,{topicID:t,messageIDs:n})}))}async _makePrune(t,e,r){const n=y.RelayPruneBackoff/1e3;if(!r)return{topicID:e,peers:[],backoff:n};const i=(0,m.getRelayPeers)(this,e,y.RelayPrunePeers,(e=>e!==t&&this.score.score(e)>=0)),o=await Promise.all(Array.from(i).map((async t=>{const e=l.default.createFromB58String(t);return{peerID:e.toBytes(),signedPeerRecord:await this._libp2p.peerStore.addressBook.getRawEnvelope(e)}})));return{topicID:e,peers:o,backoff:n}}}e.WakuRelay=v},46279:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.RelayHeartbeat=void 0;const s=r(12715),a=r(49188),u=o(r(50165)),c=r(87570);class h extends s.Heartbeat{constructor(t){super(t)}start(){if(this._heartbeatTimer)return;const t=this._heartbeat.bind(this),e=setTimeout((()=>{t(),this._heartbeatTimer?.runPeriodically(t,u.RelayHeartbeatInterval)}),u.RelayHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(t,e)=>{this._heartbeatTimer._intervalId=setInterval(t,e)},cancel:()=>{clearTimeout(e),clearInterval(this._heartbeatTimer?._intervalId)}}}stop(){this._heartbeatTimer&&(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){const{D:t,Dlo:e,Dhi:r,Dscore:n,Dout:i}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;const o=new Map,s=t=>{let e=o.get(t);return void 0===e&&(e=this.gossipsub.score.score(t),o.set(t,e)),e},h=new Map,l=new Map,f=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach(((o,d)=>{const p=t=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",t,d),this.gossipsub.score.prune(t,d),this.gossipsub._addBackoff(t,d),o.delete(t);const e=l.get(t);e?e.push(d):l.set(t,[d])},y=t=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",t,d),this.gossipsub.score.graft(t,d),o.add(t);const e=h.get(t);e?e.push(d):h.set(t,[d])};if(o.forEach((t=>{const e=s(t);e<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",t,e,d),p(t),f.set(t,!0))})),o.size<e){const e=this.gossipsub.backoff.get(d),r=t-o.size,n=(0,c.getRelayPeers)(this.gossipsub,d,r,(t=>!o.has(t)&&!this.gossipsub.direct.has(t)&&(!e||!e.has(t))&&s(t)>=0));n.forEach(y)}if(o.size>r){let e=Array.from(o);e.sort(((t,e)=>s(e)-s(t))),e=e.slice(0,n).concat((0,a.shuffle)(e.slice(n)));let r=0;if(e.slice(0,t).forEach((t=>{this.gossipsub.outbound.get(t)&&r++})),r<i){const n=t=>{const r=e[t];for(let n=t;n>0;n--)e[n]=e[n-1];e[0]=r};if(r>0){let i=r;for(let r=1;r<t&&i>0;r++)this.gossipsub.outbound.get(e[r])&&(n(r),i--)}let i=t-r;for(let r=t;r<e.length&&i>0;r++)this.gossipsub.outbound.get(e[r])&&(n(r),i--)}e.slice(t).forEach(p)}if(o.size>=e){let t=0;if(o.forEach((e=>{this.gossipsub.outbound.get(e)&&t++})),t<i){const e=i-t,r=this.gossipsub.backoff.get(d);(0,c.getRelayPeers)(this.gossipsub,d,e,(t=>!o.has(t)&&!this.gossipsub.direct.has(t)&&(!r||!r.has(t))&&s(t)>=0)).forEach(y)}}if(this.gossipsub.heartbeatTicks%u.RelayOpportunisticGraftTicks===0&&o.size>1){const t=Array.from(o).sort(((t,e)=>s(t)-s(e))),e=Math.floor(o.size/2),r=s(t[e]);if(r<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){const t=this.gossipsub.backoff.get(d),e=(0,c.getRelayPeers)(this.gossipsub,d,u.RelayOpportunisticGraftPeers,(e=>o.has(e)&&!this.gossipsub.direct.has(e)&&(!t||!t.has(e))&&s(e)>r));e.forEach((t=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",t,d),y(t)}))}}this.gossipsub._emitGossip(d,o)}));const d=this.gossipsub._now();this.gossipsub.lastpub.forEach(((t,e)=>{t+u.RelayFanoutTTL<d&&(this.gossipsub.fanout.delete(e),this.gossipsub.lastpub.delete(e))})),this.gossipsub.fanout.forEach(((e,r)=>{const n=this.gossipsub.topics.get(r);if(e.forEach((t=>{(!n?.has(t)||s(t)<this.gossipsub._options.scoreThresholds.publishThreshold)&&e.delete(t)})),e.size<t){const n=t-e.size,i=(0,c.getRelayPeers)(this.gossipsub,r,n,(t=>!e.has(t)&&!this.gossipsub.direct.has(t)&&s(t)>=this.gossipsub._options.scoreThresholds.publishThreshold));i.forEach((t=>{e.add(t)}))}this.gossipsub._emitGossip(r,e)})),this.gossipsub._sendGraftPrune(h,l,f),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}}e.RelayHeartbeat=h},7934:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryRPC=e.PageDirection=void 0;const a=s(r(19438)),u=r(86425),c=r(80759),h=o(r(91236)),l=o(r(73810)),f=r(97975);var d;(function(t){t["BACKWARD"]="backward",t["FORWARD"]="forward"})(d=e.PageDirection||(e.PageDirection={}));class p{constructor(t,e){switch(this.proto=t,this.storeCodec=e,e){case f.StoreCodecs.V2Beta3:this.protoCodec=h;break;case f.StoreCodecs.V2Beta4:this.protoCodec=l;break;default:throw`Internal Error: Unexpected store codec value received in constructor: ${e}`}}get query(){return this.proto.query}get response(){return this.proto.response}static createQuery(t){const e=t.storeCodec??f.StoreCodecs.V2Beta4,r=t.contentTopics.map((t=>({contentTopic:t}))),n=y(t.pageDirection);switch(e){case f.StoreCodecs.V2Beta3:return(()=>{const i={pageSize:a.default.fromNumber(t.pageSize),cursor:t.cursor,direction:n};let o,s;return t.startTime&&(o=t.startTime.valueOf()/1e3),t.endTime&&(s=t.endTime.valueOf()/1e3),new p({requestId:(0,c.v4)(),query:{pubSubTopic:t.pubSubTopic,contentFilters:r,pagingInfo:i,startTime:o,endTime:s},response:void 0},e)})();case f.StoreCodecs.V2Beta4:return(()=>{const i={pageSize:a.default.fromNumber(t.pageSize),cursor:t.cursor,direction:n};let o,s;return t.startTime&&(o=a.default.fromNumber(t.startTime.valueOf()).mul(1e6)),t.endTime&&(s=a.default.fromNumber(t.endTime.valueOf()).mul(1e6)),new p({requestId:(0,c.v4)(),query:{pubSubTopic:t.pubSubTopic,contentFilters:r,pagingInfo:i,startTime:o,endTime:s},response:void 0},e)})();default:throw`Internal Error: Unexpected store codec value received in createQuery: ${e}`}}decode(t){const e=this.protoCodec.HistoryRPC.decode(u.Reader.create(t));return new p(e,this.storeCodec)}encode(){return this.protoCodec.HistoryRPC.encode(this.proto).finish()}}function y(t){switch(t){case d.BACKWARD:return l.PagingInfo_Direction.DIRECTION_BACKWARD_UNSPECIFIED;case d.FORWARD:return l.PagingInfo_Direction.DIRECTION_FORWARD;default:return l.PagingInfo_Direction.DIRECTION_BACKWARD_UNSPECIFIED}}e.HistoryRPC=p},97975:function(t,e,r){"use strict";var n=r(15941);r(26699);var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WakuStore=e.PageDirection=e.DefaultPageSize=e.StoreCodecs=void 0;const o=i(r(15652)),s=i(r(9694)),a=i(r(92992)),u=r(62100),c=r(98719),h=r(54870),l=r(16630),f=r(82649),d=r(7934);Object.defineProperty(e,"PageDirection",{enumerable:!0,get:function(){return d.PageDirection}});const p=(0,o.default)("waku:store");var y;(function(t){t["V2Beta3"]="/vac/waku/store/2.0.0-beta3",t["V2Beta4"]="/vac/waku/store/2.0.0-beta4"})(y=e.StoreCodecs||(e.StoreCodecs={})),e.DefaultPageSize=10;class g{constructor(t,e){this.libp2p=t,this.pubSubTopic=e?.pubSubTopic?e.pubSubTopic:l.DefaultPubSubTopic,this.decryptionKeys=new Map}async queryHistory(t,r){let i,o;r?.timeFilter&&(i=r.timeFilter.startTime,o=r.timeFilter.endTime);const c=Object.assign({pubSubTopic:this.pubSubTopic,pageDirection:d.PageDirection.BACKWARD,pageSize:e.DefaultPageSize},r,{contentTopics:t,startTime:i,endTime:o});let l;if(p("Querying history with the following options",{peerId:r?.peerId?.toB58String(),...r}),c.peerId){if(l=await this.libp2p.peerStore.get(c.peerId),!l)throw`Failed to retrieve connection details for provided peer in peer store: ${c.peerId.toB58String()}`}else if(l=await this.randomPeer,!l)throw"Failed to find known peer that registers waku store protocol";let g="";for(const e of Object.values(y))l.protocols.includes(e)&&(g=e);if(p(`Use store codec ${g}`),!g)throw`Peer does not register waku store protocol: ${l.id.toB58String()}`;Object.assign(c,{storeCodec:g});const m=this.libp2p.connectionManager.get(l.id);if(!m)throw"Failed to get a connection to the peer";const b=Array.from(this.decryptionKeys).map((([t,{method:e,contentTopics:r}])=>({key:t,method:e,contentTopics:r})));c.decryptionKeys&&c.decryptionKeys.forEach((e=>{b.push({key:(0,h.hexToBytes)(e),contentTopics:t.length?t:void 0,method:void 0})}));const w=[];let v;while(1){const{stream:t}=await m.newStream(g),e=Object.assign(c,{cursor:v}),r=d.HistoryRPC.createQuery(e);p("Querying store peer",m.remoteAddr.toString());const i=await(0,u.pipe)([r.encode()],a.default.encode(),t,a.default.decode(),s.default),o=r.decode(i.slice()),h=o.response;if(!h)throw"History response misses response field";if(h.error)throw"History response contains an Error"+h.error;if(!h.messages||!h.messages.length)return n.log("No messages present in HistoryRPC response"),w;p(`${h.messages.length} messages retrieved for pubsub topic ${c.pubSubTopic}`);const l=[];await Promise.all(h.messages.map((async t=>{const e=await f.WakuMessage.decodeProto(t,b);e&&(w.push(e),l.push(e))})));let y=!1;c.callback&&(y=Boolean(c.callback(l)));const _=h.pagingInfo?.pageSize,E=r.query?.pagingInfo?.pageSize;if(y||_&&E&&_<E)return w;if(v=h.pagingInfo?.cursor,void 0===v)return n.log("No cursor returned by peer."),w}}addDecryptionKey(t,e){this.decryptionKeys.set((0,h.hexToBytes)(t),e??{})}deleteDecryptionKey(t){this.decryptionKeys.delete((0,h.hexToBytes)(t))}get peers(){const t=[];for(const e of Object.values(y))t.push(e);return(0,c.getPeersForProtocol)(this.libp2p,t)}get randomPeer(){return(0,c.selectRandomPeer)(this.peers)}}e.WakuStore=g},98775:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FilterRPC=e.MessagePush=e.FilterRequest_ContentFilter=e.FilterRequest=e.protobufPackage=void 0;const i=n(r(19438)),o=n(r(86425)),s=r(23476);function a(){return{subscribe:!1,topic:"",contentFilters:[]}}function u(){return{contentTopic:""}}function c(){return{messages:[]}}function h(){return{requestId:"",request:void 0,push:void 0}}function l(t){return null!==t&&void 0!==t}e.protobufPackage="waku.v2",e.FilterRequest={encode(t,r=o.default.Writer.create()){!0===t.subscribe&&r.uint32(8).bool(t.subscribe),""!==t.topic&&r.uint32(18).string(t.topic);for(const n of t.contentFilters)e.FilterRequest_ContentFilter.encode(n,r.uint32(26).fork()).ldelim();return r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=a();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 1:s.subscribe=n.bool();break;case 2:s.topic=n.string();break;case 3:s.contentFilters.push(e.FilterRequest_ContentFilter.decode(n,n.uint32()));break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{subscribe:!!l(t.subscribe)&&Boolean(t.subscribe),topic:l(t.topic)?String(t.topic):"",contentFilters:Array.isArray(t?.contentFilters)?t.contentFilters.map((t=>e.FilterRequest_ContentFilter.fromJSON(t))):[]}},toJSON(t){const r={};return void 0!==t.subscribe&&(r.subscribe=t.subscribe),void 0!==t.topic&&(r.topic=t.topic),t.contentFilters?r.contentFilters=t.contentFilters.map((t=>t?e.FilterRequest_ContentFilter.toJSON(t):void 0)):r.contentFilters=[],r},fromPartial(t){const r=a();return r.subscribe=t.subscribe??!1,r.topic=t.topic??"",r.contentFilters=t.contentFilters?.map((t=>e.FilterRequest_ContentFilter.fromPartial(t)))||[],r}},e.FilterRequest_ContentFilter={encode(t,e=o.default.Writer.create()){return""!==t.contentTopic&&e.uint32(10).string(t.contentTopic),e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=u();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.contentTopic=r.string();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{contentTopic:l(t.contentTopic)?String(t.contentTopic):""}},toJSON(t){const e={};return void 0!==t.contentTopic&&(e.contentTopic=t.contentTopic),e},fromPartial(t){const e=u();return e.contentTopic=t.contentTopic??"",e}},e.MessagePush={encode(t,e=o.default.Writer.create()){for(const r of t.messages)s.WakuMessage.encode(r,e.uint32(10).fork()).ldelim();return e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=c();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.messages.push(s.WakuMessage.decode(r,r.uint32()));break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{messages:Array.isArray(t?.messages)?t.messages.map((t=>s.WakuMessage.fromJSON(t))):[]}},toJSON(t){const e={};return t.messages?e.messages=t.messages.map((t=>t?s.WakuMessage.toJSON(t):void 0)):e.messages=[],e},fromPartial(t){const e=c();return e.messages=t.messages?.map((t=>s.WakuMessage.fromPartial(t)))||[],e}},e.FilterRPC={encode(t,r=o.default.Writer.create()){return""!==t.requestId&&r.uint32(10).string(t.requestId),void 0!==t.request&&e.FilterRequest.encode(t.request,r.uint32(18).fork()).ldelim(),void 0!==t.push&&e.MessagePush.encode(t.push,r.uint32(26).fork()).ldelim(),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=h();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 1:s.requestId=n.string();break;case 2:s.request=e.FilterRequest.decode(n,n.uint32());break;case 3:s.push=e.MessagePush.decode(n,n.uint32());break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{requestId:l(t.requestId)?String(t.requestId):"",request:l(t.request)?e.FilterRequest.fromJSON(t.request):void 0,push:l(t.push)?e.MessagePush.fromJSON(t.push):void 0}},toJSON(t){const r={};return void 0!==t.requestId&&(r.requestId=t.requestId),void 0!==t.request&&(r.request=t.request?e.FilterRequest.toJSON(t.request):void 0),void 0!==t.push&&(r.push=t.push?e.MessagePush.toJSON(t.push):void 0),r},fromPartial(t){const r=h();return r.requestId=t.requestId??"",r.request=void 0!==t.request&&null!==t.request?e.FilterRequest.fromPartial(t.request):void 0,r.push=void 0!==t.push&&null!==t.push?e.MessagePush.fromPartial(t.push):void 0,r}},o.default.util.Long!==i.default&&(o.default.util.Long=i.default,o.default.configure())},29370:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PushRPC=e.PushResponse=e.PushRequest=e.protobufPackage=void 0;const i=n(r(19438)),o=n(r(86425)),s=r(23476);function a(){return{pubSubTopic:"",message:void 0}}function u(){return{isSuccess:!1,info:""}}function c(){return{requestId:"",request:void 0,response:void 0}}function h(t){return null!==t&&void 0!==t}e.protobufPackage="waku.v2",e.PushRequest={encode(t,e=o.default.Writer.create()){return""!==t.pubSubTopic&&e.uint32(10).string(t.pubSubTopic),void 0!==t.message&&s.WakuMessage.encode(t.message,e.uint32(18).fork()).ldelim(),e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=a();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.pubSubTopic=r.string();break;case 2:i.message=s.WakuMessage.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{pubSubTopic:h(t.pubSubTopic)?String(t.pubSubTopic):"",message:h(t.message)?s.WakuMessage.fromJSON(t.message):void 0}},toJSON(t){const e={};return void 0!==t.pubSubTopic&&(e.pubSubTopic=t.pubSubTopic),void 0!==t.message&&(e.message=t.message?s.WakuMessage.toJSON(t.message):void 0),e},fromPartial(t){const e=a();return e.pubSubTopic=t.pubSubTopic??"",e.message=void 0!==t.message&&null!==t.message?s.WakuMessage.fromPartial(t.message):void 0,e}},e.PushResponse={encode(t,e=o.default.Writer.create()){return!0===t.isSuccess&&e.uint32(8).bool(t.isSuccess),""!==t.info&&e.uint32(18).string(t.info),e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=u();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.isSuccess=r.bool();break;case 2:i.info=r.string();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{isSuccess:!!h(t.isSuccess)&&Boolean(t.isSuccess),info:h(t.info)?String(t.info):""}},toJSON(t){const e={};return void 0!==t.isSuccess&&(e.isSuccess=t.isSuccess),void 0!==t.info&&(e.info=t.info),e},fromPartial(t){const e=u();return e.isSuccess=t.isSuccess??!1,e.info=t.info??"",e}},e.PushRPC={encode(t,r=o.default.Writer.create()){return""!==t.requestId&&r.uint32(10).string(t.requestId),void 0!==t.request&&e.PushRequest.encode(t.request,r.uint32(18).fork()).ldelim(),void 0!==t.response&&e.PushResponse.encode(t.response,r.uint32(26).fork()).ldelim(),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=c();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 1:s.requestId=n.string();break;case 2:s.request=e.PushRequest.decode(n,n.uint32());break;case 3:s.response=e.PushResponse.decode(n,n.uint32());break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{requestId:h(t.requestId)?String(t.requestId):"",request:h(t.request)?e.PushRequest.fromJSON(t.request):void 0,response:h(t.response)?e.PushResponse.fromJSON(t.response):void 0}},toJSON(t){const r={};return void 0!==t.requestId&&(r.requestId=t.requestId),void 0!==t.request&&(r.request=t.request?e.PushRequest.toJSON(t.request):void 0),void 0!==t.response&&(r.response=t.response?e.PushResponse.toJSON(t.response):void 0),r},fromPartial(t){const r=c();return r.requestId=t.requestId??"",r.request=void 0!==t.request&&null!==t.request?e.PushRequest.fromPartial(t.request):void 0,r.response=void 0!==t.response&&null!==t.response?e.PushResponse.fromPartial(t.response):void 0,r}},o.default.util.Long!==i.default&&(o.default.util.Long=i.default,o.default.configure())},23476:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WakuMessage=e.protobufPackage=void 0;const i=n(r(19438)),o=n(r(86425));function s(){return{payload:void 0,contentTopic:void 0,version:void 0,timestampDeprecated:void 0,timestamp:void 0}}e.protobufPackage="waku.v2",e.WakuMessage={encode(t,e=o.default.Writer.create()){return void 0!==t.payload&&e.uint32(10).bytes(t.payload),void 0!==t.contentTopic&&e.uint32(18).string(t.contentTopic),void 0!==t.version&&e.uint32(24).uint32(t.version),void 0!==t.timestampDeprecated&&e.uint32(33).double(t.timestampDeprecated),void 0!==t.timestamp&&e.uint32(80).sint64(t.timestamp),e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=s();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.payload=r.bytes();break;case 2:i.contentTopic=r.string();break;case 3:i.version=r.uint32();break;case 4:i.timestampDeprecated=r.double();break;case 10:i.timestamp=r.sint64();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{payload:f(t.payload)?c(t.payload):void 0,contentTopic:f(t.contentTopic)?String(t.contentTopic):void 0,version:f(t.version)?Number(t.version):void 0,timestampDeprecated:f(t.timestampDeprecated)?Number(t.timestampDeprecated):void 0,timestamp:f(t.timestamp)?i.default.fromString(t.timestamp):void 0}},toJSON(t){const e={};return void 0!==t.payload&&(e.payload=void 0!==t.payload?l(t.payload):void 0),void 0!==t.contentTopic&&(e.contentTopic=t.contentTopic),void 0!==t.version&&(e.version=Math.round(t.version)),void 0!==t.timestampDeprecated&&(e.timestampDeprecated=t.timestampDeprecated),void 0!==t.timestamp&&(e.timestamp=(t.timestamp||void 0).toString()),e},fromPartial(t){const e=s();return e.payload=t.payload??void 0,e.contentTopic=t.contentTopic??void 0,e.version=t.version??void 0,e.timestampDeprecated=t.timestampDeprecated??void 0,e.timestamp=void 0!==t.timestamp&&null!==t.timestamp?i.default.fromValue(t.timestamp):void 0,e}};var a=(()=>{if("undefined"!==typeof a)return a;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw"Unable to locate global object"})();const u=a.atob||(t=>a.Buffer.from(t,"base64").toString("binary"));function c(t){const e=u(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const h=a.btoa||(t=>a.Buffer.from(t,"binary").toString("base64"));function l(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return h(e.join(""))}function f(t){return null!==t&&void 0!==t}o.default.util.Long!==i.default&&(o.default.util.Long=i.default,o.default.configure())},91236:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryRPC=e.HistoryResponse=e.HistoryQuery=e.ContentFilter=e.PagingInfo=e.Index=e.historyResponse_ErrorToJSON=e.historyResponse_ErrorFromJSON=e.HistoryResponse_Error=e.pagingInfo_DirectionToJSON=e.pagingInfo_DirectionFromJSON=e.PagingInfo_Direction=e.protobufPackage=void 0;const i=n(r(19438)),o=n(r(86425)),s=r(23476);var a,u;function c(t){switch(t){case 0:case"DIRECTION_BACKWARD_UNSPECIFIED":return a.DIRECTION_BACKWARD_UNSPECIFIED;case 1:case"DIRECTION_FORWARD":return a.DIRECTION_FORWARD;case-1:case"UNRECOGNIZED":default:return a.UNRECOGNIZED}}function h(t){switch(t){case a.DIRECTION_BACKWARD_UNSPECIFIED:return"DIRECTION_BACKWARD_UNSPECIFIED";case a.DIRECTION_FORWARD:return"DIRECTION_FORWARD";default:return"UNKNOWN"}}function l(t){switch(t){case 0:case"ERROR_NONE_UNSPECIFIED":return u.ERROR_NONE_UNSPECIFIED;case 1:case"ERROR_INVALID_CURSOR":return u.ERROR_INVALID_CURSOR;case-1:case"UNRECOGNIZED":default:return u.UNRECOGNIZED}}function f(t){switch(t){case u.ERROR_NONE_UNSPECIFIED:return"ERROR_NONE_UNSPECIFIED";case u.ERROR_INVALID_CURSOR:return"ERROR_INVALID_CURSOR";default:return"UNKNOWN"}}function d(){return{digest:new Uint8Array,receivedTime:0,senderTime:0}}function p(){return{pageSize:i.default.UZERO,cursor:void 0,direction:0}}function y(){return{contentTopic:""}}function g(){return{pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0}}function m(){return{messages:[],pagingInfo:void 0,error:0}}function b(){return{requestId:"",query:void 0,response:void 0}}e.protobufPackage="waku.v2.store.v2beta3",function(t){t[t["DIRECTION_BACKWARD_UNSPECIFIED"]=0]="DIRECTION_BACKWARD_UNSPECIFIED",t[t["DIRECTION_FORWARD"]=1]="DIRECTION_FORWARD",t[t["UNRECOGNIZED"]=-1]="UNRECOGNIZED"}(a=e.PagingInfo_Direction||(e.PagingInfo_Direction={})),e.pagingInfo_DirectionFromJSON=c,e.pagingInfo_DirectionToJSON=h,function(t){t[t["ERROR_NONE_UNSPECIFIED"]=0]="ERROR_NONE_UNSPECIFIED",t[t["ERROR_INVALID_CURSOR"]=1]="ERROR_INVALID_CURSOR",t[t["UNRECOGNIZED"]=-1]="UNRECOGNIZED"}(u=e.HistoryResponse_Error||(e.HistoryResponse_Error={})),e.historyResponse_ErrorFromJSON=l,e.historyResponse_ErrorToJSON=f,e.Index={encode(t,e=o.default.Writer.create()){return 0!==t.digest.length&&e.uint32(10).bytes(t.digest),0!==t.receivedTime&&e.uint32(17).double(t.receivedTime),0!==t.senderTime&&e.uint32(25).double(t.senderTime),e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=d();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.digest=r.bytes();break;case 2:i.receivedTime=r.double();break;case 3:i.senderTime=r.double();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{digest:A(t.digest)?_(t.digest):new Uint8Array,receivedTime:A(t.receivedTime)?Number(t.receivedTime):0,senderTime:A(t.senderTime)?Number(t.senderTime):0}},toJSON(t){const e={};return void 0!==t.digest&&(e.digest=S(void 0!==t.digest?t.digest:new Uint8Array)),void 0!==t.receivedTime&&(e.receivedTime=t.receivedTime),void 0!==t.senderTime&&(e.senderTime=t.senderTime),e},fromPartial(t){const e=d();return e.digest=t.digest??new Uint8Array,e.receivedTime=t.receivedTime??0,e.senderTime=t.senderTime??0,e}},e.PagingInfo={encode(t,r=o.default.Writer.create()){return t.pageSize.isZero()||r.uint32(8).uint64(t.pageSize),void 0!==t.cursor&&e.Index.encode(t.cursor,r.uint32(18).fork()).ldelim(),0!==t.direction&&r.uint32(24).int32(t.direction),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=p();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 1:s.pageSize=n.uint64();break;case 2:s.cursor=e.Index.decode(n,n.uint32());break;case 3:s.direction=n.int32();break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{pageSize:A(t.pageSize)?i.default.fromString(t.pageSize):i.default.UZERO,cursor:A(t.cursor)?e.Index.fromJSON(t.cursor):void 0,direction:A(t.direction)?c(t.direction):0}},toJSON(t){const r={};return void 0!==t.pageSize&&(r.pageSize=(t.pageSize||i.default.UZERO).toString()),void 0!==t.cursor&&(r.cursor=t.cursor?e.Index.toJSON(t.cursor):void 0),void 0!==t.direction&&(r.direction=h(t.direction)),r},fromPartial(t){const r=p();return r.pageSize=void 0!==t.pageSize&&null!==t.pageSize?i.default.fromValue(t.pageSize):i.default.UZERO,r.cursor=void 0!==t.cursor&&null!==t.cursor?e.Index.fromPartial(t.cursor):void 0,r.direction=t.direction??0,r}},e.ContentFilter={encode(t,e=o.default.Writer.create()){return""!==t.contentTopic&&e.uint32(10).string(t.contentTopic),e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=y();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.contentTopic=r.string();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{contentTopic:A(t.contentTopic)?String(t.contentTopic):""}},toJSON(t){const e={};return void 0!==t.contentTopic&&(e.contentTopic=t.contentTopic),e},fromPartial(t){const e=y();return e.contentTopic=t.contentTopic??"",e}},e.HistoryQuery={encode(t,r=o.default.Writer.create()){void 0!==t.pubSubTopic&&r.uint32(18).string(t.pubSubTopic);for(const n of t.contentFilters)e.ContentFilter.encode(n,r.uint32(26).fork()).ldelim();return void 0!==t.pagingInfo&&e.PagingInfo.encode(t.pagingInfo,r.uint32(34).fork()).ldelim(),void 0!==t.startTime&&r.uint32(41).double(t.startTime),void 0!==t.endTime&&r.uint32(49).double(t.endTime),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=g();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 2:s.pubSubTopic=n.string();break;case 3:s.contentFilters.push(e.ContentFilter.decode(n,n.uint32()));break;case 4:s.pagingInfo=e.PagingInfo.decode(n,n.uint32());break;case 5:s.startTime=n.double();break;case 6:s.endTime=n.double();break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{pubSubTopic:A(t.pubSubTopic)?String(t.pubSubTopic):void 0,contentFilters:Array.isArray(t?.contentFilters)?t.contentFilters.map((t=>e.ContentFilter.fromJSON(t))):[],pagingInfo:A(t.pagingInfo)?e.PagingInfo.fromJSON(t.pagingInfo):void 0,startTime:A(t.startTime)?Number(t.startTime):void 0,endTime:A(t.endTime)?Number(t.endTime):void 0}},toJSON(t){const r={};return void 0!==t.pubSubTopic&&(r.pubSubTopic=t.pubSubTopic),t.contentFilters?r.contentFilters=t.contentFilters.map((t=>t?e.ContentFilter.toJSON(t):void 0)):r.contentFilters=[],void 0!==t.pagingInfo&&(r.pagingInfo=t.pagingInfo?e.PagingInfo.toJSON(t.pagingInfo):void 0),void 0!==t.startTime&&(r.startTime=t.startTime),void 0!==t.endTime&&(r.endTime=t.endTime),r},fromPartial(t){const r=g();return r.pubSubTopic=t.pubSubTopic??void 0,r.contentFilters=t.contentFilters?.map((t=>e.ContentFilter.fromPartial(t)))||[],r.pagingInfo=void 0!==t.pagingInfo&&null!==t.pagingInfo?e.PagingInfo.fromPartial(t.pagingInfo):void 0,r.startTime=t.startTime??void 0,r.endTime=t.endTime??void 0,r}},e.HistoryResponse={encode(t,r=o.default.Writer.create()){for(const e of t.messages)s.WakuMessage.encode(e,r.uint32(18).fork()).ldelim();return void 0!==t.pagingInfo&&e.PagingInfo.encode(t.pagingInfo,r.uint32(26).fork()).ldelim(),0!==t.error&&r.uint32(32).int32(t.error),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const a=m();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 2:a.messages.push(s.WakuMessage.decode(n,n.uint32()));break;case 3:a.pagingInfo=e.PagingInfo.decode(n,n.uint32());break;case 4:a.error=n.int32();break;default:n.skipType(7&t);break}}return a},fromJSON(t){return{messages:Array.isArray(t?.messages)?t.messages.map((t=>s.WakuMessage.fromJSON(t))):[],pagingInfo:A(t.pagingInfo)?e.PagingInfo.fromJSON(t.pagingInfo):void 0,error:A(t.error)?l(t.error):0}},toJSON(t){const r={};return t.messages?r.messages=t.messages.map((t=>t?s.WakuMessage.toJSON(t):void 0)):r.messages=[],void 0!==t.pagingInfo&&(r.pagingInfo=t.pagingInfo?e.PagingInfo.toJSON(t.pagingInfo):void 0),void 0!==t.error&&(r.error=f(t.error)),r},fromPartial(t){const r=m();return r.messages=t.messages?.map((t=>s.WakuMessage.fromPartial(t)))||[],r.pagingInfo=void 0!==t.pagingInfo&&null!==t.pagingInfo?e.PagingInfo.fromPartial(t.pagingInfo):void 0,r.error=t.error??0,r}},e.HistoryRPC={encode(t,r=o.default.Writer.create()){return""!==t.requestId&&r.uint32(10).string(t.requestId),void 0!==t.query&&e.HistoryQuery.encode(t.query,r.uint32(18).fork()).ldelim(),void 0!==t.response&&e.HistoryResponse.encode(t.response,r.uint32(26).fork()).ldelim(),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=b();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 1:s.requestId=n.string();break;case 2:s.query=e.HistoryQuery.decode(n,n.uint32());break;case 3:s.response=e.HistoryResponse.decode(n,n.uint32());break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{requestId:A(t.requestId)?String(t.requestId):"",query:A(t.query)?e.HistoryQuery.fromJSON(t.query):void 0,response:A(t.response)?e.HistoryResponse.fromJSON(t.response):void 0}},toJSON(t){const r={};return void 0!==t.requestId&&(r.requestId=t.requestId),void 0!==t.query&&(r.query=t.query?e.HistoryQuery.toJSON(t.query):void 0),void 0!==t.response&&(r.response=t.response?e.HistoryResponse.toJSON(t.response):void 0),r},fromPartial(t){const r=b();return r.requestId=t.requestId??"",r.query=void 0!==t.query&&null!==t.query?e.HistoryQuery.fromPartial(t.query):void 0,r.response=void 0!==t.response&&null!==t.response?e.HistoryResponse.fromPartial(t.response):void 0,r}};var w=(()=>{if("undefined"!==typeof w)return w;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw"Unable to locate global object"})();const v=w.atob||(t=>w.Buffer.from(t,"base64").toString("binary"));function _(t){const e=v(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const E=w.btoa||(t=>w.Buffer.from(t,"binary").toString("base64"));function S(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return E(e.join(""))}function A(t){return null!==t&&void 0!==t}o.default.util.Long!==i.default&&(o.default.util.Long=i.default,o.default.configure())},73810:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryRPC=e.HistoryResponse=e.HistoryQuery=e.ContentFilter=e.PagingInfo=e.Index=e.historyResponse_ErrorToJSON=e.historyResponse_ErrorFromJSON=e.HistoryResponse_Error=e.pagingInfo_DirectionToJSON=e.pagingInfo_DirectionFromJSON=e.PagingInfo_Direction=e.protobufPackage=void 0;const i=n(r(19438)),o=n(r(86425)),s=r(23476);var a,u;function c(t){switch(t){case 0:case"DIRECTION_BACKWARD_UNSPECIFIED":return a.DIRECTION_BACKWARD_UNSPECIFIED;case 1:case"DIRECTION_FORWARD":return a.DIRECTION_FORWARD;case-1:case"UNRECOGNIZED":default:return a.UNRECOGNIZED}}function h(t){switch(t){case a.DIRECTION_BACKWARD_UNSPECIFIED:return"DIRECTION_BACKWARD_UNSPECIFIED";case a.DIRECTION_FORWARD:return"DIRECTION_FORWARD";default:return"UNKNOWN"}}function l(t){switch(t){case 0:case"ERROR_NONE_UNSPECIFIED":return u.ERROR_NONE_UNSPECIFIED;case 1:case"ERROR_INVALID_CURSOR":return u.ERROR_INVALID_CURSOR;case-1:case"UNRECOGNIZED":default:return u.UNRECOGNIZED}}function f(t){switch(t){case u.ERROR_NONE_UNSPECIFIED:return"ERROR_NONE_UNSPECIFIED";case u.ERROR_INVALID_CURSOR:return"ERROR_INVALID_CURSOR";default:return"UNKNOWN"}}function d(){return{digest:new Uint8Array,receivedTime:i.default.ZERO,senderTime:i.default.ZERO,pubsubTopic:""}}function p(){return{pageSize:i.default.UZERO,cursor:void 0,direction:0}}function y(){return{contentTopic:""}}function g(){return{pubSubTopic:void 0,contentFilters:[],pagingInfo:void 0,startTime:void 0,endTime:void 0}}function m(){return{messages:[],pagingInfo:void 0,error:0}}function b(){return{requestId:"",query:void 0,response:void 0}}e.protobufPackage="waku.v2.store.v2beta4",function(t){t[t["DIRECTION_BACKWARD_UNSPECIFIED"]=0]="DIRECTION_BACKWARD_UNSPECIFIED",t[t["DIRECTION_FORWARD"]=1]="DIRECTION_FORWARD",t[t["UNRECOGNIZED"]=-1]="UNRECOGNIZED"}(a=e.PagingInfo_Direction||(e.PagingInfo_Direction={})),e.pagingInfo_DirectionFromJSON=c,e.pagingInfo_DirectionToJSON=h,function(t){t[t["ERROR_NONE_UNSPECIFIED"]=0]="ERROR_NONE_UNSPECIFIED",t[t["ERROR_INVALID_CURSOR"]=1]="ERROR_INVALID_CURSOR",t[t["UNRECOGNIZED"]=-1]="UNRECOGNIZED"}(u=e.HistoryResponse_Error||(e.HistoryResponse_Error={})),e.historyResponse_ErrorFromJSON=l,e.historyResponse_ErrorToJSON=f,e.Index={encode(t,e=o.default.Writer.create()){return 0!==t.digest.length&&e.uint32(10).bytes(t.digest),t.receivedTime.isZero()||e.uint32(16).sint64(t.receivedTime),t.senderTime.isZero()||e.uint32(24).sint64(t.senderTime),""!==t.pubsubTopic&&e.uint32(34).string(t.pubsubTopic),e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=d();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.digest=r.bytes();break;case 2:i.receivedTime=r.sint64();break;case 3:i.senderTime=r.sint64();break;case 4:i.pubsubTopic=r.string();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{digest:A(t.digest)?_(t.digest):new Uint8Array,receivedTime:A(t.receivedTime)?i.default.fromString(t.receivedTime):i.default.ZERO,senderTime:A(t.senderTime)?i.default.fromString(t.senderTime):i.default.ZERO,pubsubTopic:A(t.pubsubTopic)?String(t.pubsubTopic):""}},toJSON(t){const e={};return void 0!==t.digest&&(e.digest=S(void 0!==t.digest?t.digest:new Uint8Array)),void 0!==t.receivedTime&&(e.receivedTime=(t.receivedTime||i.default.ZERO).toString()),void 0!==t.senderTime&&(e.senderTime=(t.senderTime||i.default.ZERO).toString()),void 0!==t.pubsubTopic&&(e.pubsubTopic=t.pubsubTopic),e},fromPartial(t){const e=d();return e.digest=t.digest??new Uint8Array,e.receivedTime=void 0!==t.receivedTime&&null!==t.receivedTime?i.default.fromValue(t.receivedTime):i.default.ZERO,e.senderTime=void 0!==t.senderTime&&null!==t.senderTime?i.default.fromValue(t.senderTime):i.default.ZERO,e.pubsubTopic=t.pubsubTopic??"",e}},e.PagingInfo={encode(t,r=o.default.Writer.create()){return t.pageSize.isZero()||r.uint32(8).uint64(t.pageSize),void 0!==t.cursor&&e.Index.encode(t.cursor,r.uint32(18).fork()).ldelim(),0!==t.direction&&r.uint32(24).int32(t.direction),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=p();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 1:s.pageSize=n.uint64();break;case 2:s.cursor=e.Index.decode(n,n.uint32());break;case 3:s.direction=n.int32();break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{pageSize:A(t.pageSize)?i.default.fromString(t.pageSize):i.default.UZERO,cursor:A(t.cursor)?e.Index.fromJSON(t.cursor):void 0,direction:A(t.direction)?c(t.direction):0}},toJSON(t){const r={};return void 0!==t.pageSize&&(r.pageSize=(t.pageSize||i.default.UZERO).toString()),void 0!==t.cursor&&(r.cursor=t.cursor?e.Index.toJSON(t.cursor):void 0),void 0!==t.direction&&(r.direction=h(t.direction)),r},fromPartial(t){const r=p();return r.pageSize=void 0!==t.pageSize&&null!==t.pageSize?i.default.fromValue(t.pageSize):i.default.UZERO,r.cursor=void 0!==t.cursor&&null!==t.cursor?e.Index.fromPartial(t.cursor):void 0,r.direction=t.direction??0,r}},e.ContentFilter={encode(t,e=o.default.Writer.create()){return""!==t.contentTopic&&e.uint32(10).string(t.contentTopic),e},decode(t,e){const r=t instanceof o.default.Reader?t:new o.default.Reader(t);let n=void 0===e?r.len:r.pos+e;const i=y();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.contentTopic=r.string();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{contentTopic:A(t.contentTopic)?String(t.contentTopic):""}},toJSON(t){const e={};return void 0!==t.contentTopic&&(e.contentTopic=t.contentTopic),e},fromPartial(t){const e=y();return e.contentTopic=t.contentTopic??"",e}},e.HistoryQuery={encode(t,r=o.default.Writer.create()){void 0!==t.pubSubTopic&&r.uint32(18).string(t.pubSubTopic);for(const n of t.contentFilters)e.ContentFilter.encode(n,r.uint32(26).fork()).ldelim();return void 0!==t.pagingInfo&&e.PagingInfo.encode(t.pagingInfo,r.uint32(34).fork()).ldelim(),void 0!==t.startTime&&r.uint32(40).sint64(t.startTime),void 0!==t.endTime&&r.uint32(48).sint64(t.endTime),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=g();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 2:s.pubSubTopic=n.string();break;case 3:s.contentFilters.push(e.ContentFilter.decode(n,n.uint32()));break;case 4:s.pagingInfo=e.PagingInfo.decode(n,n.uint32());break;case 5:s.startTime=n.sint64();break;case 6:s.endTime=n.sint64();break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{pubSubTopic:A(t.pubSubTopic)?String(t.pubSubTopic):void 0,contentFilters:Array.isArray(t?.contentFilters)?t.contentFilters.map((t=>e.ContentFilter.fromJSON(t))):[],pagingInfo:A(t.pagingInfo)?e.PagingInfo.fromJSON(t.pagingInfo):void 0,startTime:A(t.startTime)?i.default.fromString(t.startTime):void 0,endTime:A(t.endTime)?i.default.fromString(t.endTime):void 0}},toJSON(t){const r={};return void 0!==t.pubSubTopic&&(r.pubSubTopic=t.pubSubTopic),t.contentFilters?r.contentFilters=t.contentFilters.map((t=>t?e.ContentFilter.toJSON(t):void 0)):r.contentFilters=[],void 0!==t.pagingInfo&&(r.pagingInfo=t.pagingInfo?e.PagingInfo.toJSON(t.pagingInfo):void 0),void 0!==t.startTime&&(r.startTime=(t.startTime||void 0).toString()),void 0!==t.endTime&&(r.endTime=(t.endTime||void 0).toString()),r},fromPartial(t){const r=g();return r.pubSubTopic=t.pubSubTopic??void 0,r.contentFilters=t.contentFilters?.map((t=>e.ContentFilter.fromPartial(t)))||[],r.pagingInfo=void 0!==t.pagingInfo&&null!==t.pagingInfo?e.PagingInfo.fromPartial(t.pagingInfo):void 0,r.startTime=void 0!==t.startTime&&null!==t.startTime?i.default.fromValue(t.startTime):void 0,r.endTime=void 0!==t.endTime&&null!==t.endTime?i.default.fromValue(t.endTime):void 0,r}},e.HistoryResponse={encode(t,r=o.default.Writer.create()){for(const e of t.messages)s.WakuMessage.encode(e,r.uint32(18).fork()).ldelim();return void 0!==t.pagingInfo&&e.PagingInfo.encode(t.pagingInfo,r.uint32(26).fork()).ldelim(),0!==t.error&&r.uint32(32).int32(t.error),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const a=m();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 2:a.messages.push(s.WakuMessage.decode(n,n.uint32()));break;case 3:a.pagingInfo=e.PagingInfo.decode(n,n.uint32());break;case 4:a.error=n.int32();break;default:n.skipType(7&t);break}}return a},fromJSON(t){return{messages:Array.isArray(t?.messages)?t.messages.map((t=>s.WakuMessage.fromJSON(t))):[],pagingInfo:A(t.pagingInfo)?e.PagingInfo.fromJSON(t.pagingInfo):void 0,error:A(t.error)?l(t.error):0}},toJSON(t){const r={};return t.messages?r.messages=t.messages.map((t=>t?s.WakuMessage.toJSON(t):void 0)):r.messages=[],void 0!==t.pagingInfo&&(r.pagingInfo=t.pagingInfo?e.PagingInfo.toJSON(t.pagingInfo):void 0),void 0!==t.error&&(r.error=f(t.error)),r},fromPartial(t){const r=m();return r.messages=t.messages?.map((t=>s.WakuMessage.fromPartial(t)))||[],r.pagingInfo=void 0!==t.pagingInfo&&null!==t.pagingInfo?e.PagingInfo.fromPartial(t.pagingInfo):void 0,r.error=t.error??0,r}},e.HistoryRPC={encode(t,r=o.default.Writer.create()){return""!==t.requestId&&r.uint32(10).string(t.requestId),void 0!==t.query&&e.HistoryQuery.encode(t.query,r.uint32(18).fork()).ldelim(),void 0!==t.response&&e.HistoryResponse.encode(t.response,r.uint32(26).fork()).ldelim(),r},decode(t,r){const n=t instanceof o.default.Reader?t:new o.default.Reader(t);let i=void 0===r?n.len:n.pos+r;const s=b();while(n.pos<i){const t=n.uint32();switch(t>>>3){case 1:s.requestId=n.string();break;case 2:s.query=e.HistoryQuery.decode(n,n.uint32());break;case 3:s.response=e.HistoryResponse.decode(n,n.uint32());break;default:n.skipType(7&t);break}}return s},fromJSON(t){return{requestId:A(t.requestId)?String(t.requestId):"",query:A(t.query)?e.HistoryQuery.fromJSON(t.query):void 0,response:A(t.response)?e.HistoryResponse.fromJSON(t.response):void 0}},toJSON(t){const r={};return void 0!==t.requestId&&(r.requestId=t.requestId),void 0!==t.query&&(r.query=t.query?e.HistoryQuery.toJSON(t.query):void 0),void 0!==t.response&&(r.response=t.response?e.HistoryResponse.toJSON(t.response):void 0),r},fromPartial(t){const r=b();return r.requestId=t.requestId??"",r.query=void 0!==t.query&&null!==t.query?e.HistoryQuery.fromPartial(t.query):void 0,r.response=void 0!==t.response&&null!==t.response?e.HistoryResponse.fromPartial(t.response):void 0,r}};var w=(()=>{if("undefined"!==typeof w)return w;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw"Unable to locate global object"})();const v=w.atob||(t=>w.Buffer.from(t,"base64").toString("binary"));function _(t){const e=v(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const E=w.btoa||(t=>w.Buffer.from(t,"binary").toString("base64"));function S(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return E(e.join(""))}function A(t){return null!==t&&void 0!==t}o.default.util.Long!==i.default&&(o.default.util.Long=i.default,o.default.configure())},22237:function(t,e,r){r(48675),r(3462),r(37380),r(1118),function(){var e,r=0xdeadbeefcafe,n=15715070==(16777215&r);function i(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function o(){return new i(null)}function s(t,e,r,n,i,o){while(--o>=0){var s=e*this[t++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i}function a(t,e,r,n,i,o){var s=32767&e,a=e>>15;while(--o>=0){var u=32767&this[t],c=this[t++]>>15,h=a*u+c*s;u=s*u+((32767&h)<<15)+r[n]+(1073741823&i),i=(u>>>30)+(h>>>15)+a*c+(i>>>30),r[n++]=1073741823&u}return i}function u(t,e,r,n,i,o){var s=16383&e,a=e>>14;while(--o>=0){var u=16383&this[t],c=this[t++]>>14,h=a*u+c*s;u=s*u+((16383&h)<<14)+r[n]+i,i=(u>>28)+(h>>14)+a*c,r[n++]=268435455&u}return i}var c="undefined"!==typeof navigator;c&&n&&"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=a,e=30):c&&n&&"Netscape"!=navigator.appName?(i.prototype.am=s,e=26):(i.prototype.am=u,e=28),i.prototype.DB=e,i.prototype.DM=(1<<e)-1,i.prototype.DV=1<<e;var h=52;i.prototype.FV=Math.pow(2,h),i.prototype.F1=h-e,i.prototype.F2=2*e-h;var l,f,d="0123456789abcdefghijklmnopqrstuvwxyz",p=new Array;for(l="0".charCodeAt(0),f=0;f<=9;++f)p[l++]=f;for(l="a".charCodeAt(0),f=10;f<36;++f)p[l++]=f;for(l="A".charCodeAt(0),f=10;f<36;++f)p[l++]=f;function y(t){return d.charAt(t)}function g(t,e){var r=p[t.charCodeAt(e)];return null==r?-1:r}function m(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function b(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function w(t){var e=o();return e.fromInt(t),e}function v(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;var n=t.length,o=!1,s=0;while(--n>=0){var a=8==r?255&t[n]:g(t,n);a<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&i.ZERO.subTo(this,this)}function _(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t)--this.t}function E(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0){a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=y(r));while(s>=0)a<e?(r=(this[s]&(1<<a)-1)<<e-a,r|=this[--s]>>(a+=this.DB-e)):(r=this[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=y(r))}return i?o:"0"}function S(){var t=o();return i.ZERO.subTo(this,t),t}function A(){return this.s<0?this.negate():this}function I(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;while(--r>=0)if(0!=(e=this[r]-t[r]))return e;return 0}function T(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function R(){return this.t<=0?0:this.DB*(this.t-1)+T(this[this.t-1]^this.s&this.DM)}function M(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function k(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function C(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function O(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&o)<<i,e[s-r]=this[s]>>n;n>0&&(e[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}}function P(t,e){var r=0,n=0,i=Math.min(t.t,this.t);while(r<i)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n-=t.s;while(r<this.t)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()}function B(t,e){var r=this.abs(),n=t.abs(),o=r.t;e.t=o+n.t;while(--o>=0)e[o]=0;for(o=0;o<n.t;++o)e[o+r.t]=r.am(0,n[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&i.ZERO.subTo(e,e)}function x(t){var e=this.abs(),r=t.t=2*e.t;while(--r>=0)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function N(t,e,r){var n=t.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var a=o(),u=this.s,c=t.s,h=this.DB-T(n[n.t-1]);h>0?(n.lShiftTo(h,a),s.lShiftTo(h,r)):(n.copyTo(a),s.copyTo(r));var l=a.t,f=a[l-1];if(0!=f){var d=f*(1<<this.F1)+(l>1?a[l-2]>>this.F2:0),p=this.FV/d,y=(1<<this.F1)/d,g=1<<this.F2,m=r.t,b=m-l,w=null==e?o():e;a.dlShiftTo(b,w),r.compareTo(w)>=0&&(r[r.t++]=1,r.subTo(w,r)),i.ONE.dlShiftTo(l,w),w.subTo(a,a);while(a.t<l)a[a.t++]=0;while(--b>=0){var v=r[--m]==f?this.DM:Math.floor(r[m]*p+(r[m-1]+g)*y);if((r[m]+=a.am(0,v,r,b,0,l))<v){a.dlShiftTo(b,w),r.subTo(w,r);while(r[m]<--v)r.subTo(w,r)}}null!=e&&(r.drShiftTo(l,e),u!=c&&i.ZERO.subTo(e,e)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),u<0&&i.ZERO.subTo(r,r)}}}function D(t){var e=o();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(i.ZERO)>0&&t.subTo(e,e),e}function L(t){this.m=t}function U(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function j(t){return t}function F(t){t.divRemTo(this.m,null,t)}function K(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function $(t,e){t.squareTo(e),this.reduce(e)}function q(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function H(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function z(t){var e=o();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(i.ZERO)>0&&this.m.subTo(e,e),e}function V(t){var e=o();return t.copyTo(e),this.reduce(e),e}function G(t){while(t.t<=this.mt2)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;r=e+this.m.t,t[r]+=this.m.am(0,n,t,e,0,this.m.t);while(t[r]>=t.DV)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function W(t,e){t.squareTo(e),this.reduce(e)}function Y(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function J(){return 0==(this.t>0?1&this[0]:this.s)}function Z(t,e){if(t>4294967295||t<1)return i.ONE;var r=o(),n=o(),s=e.convert(this),a=T(t)-1;s.copyTo(r);while(--a>=0)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,s,r);else{var u=r;r=n,n=u}return e.revert(r)}function X(t,e){var r;return r=t<256||e.isEven()?new L(e):new H(e),this.exp(t,r)}function Q(){var t=o();return this.copyTo(t),t}function tt(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function et(){return 0==this.t?this.s:this[0]<<24>>24}function rt(){return 0==this.t?this.s:this[0]<<16>>16}function nt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function it(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function ot(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=w(r),i=o(),s=o(),a="";this.divRemTo(n,i,s);while(i.signum()>0)a=(r+s.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(t)+a}function st(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),o=!1,s=0,a=0,u=0;u<t.length;++u){var c=g(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(a=e*a+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),o&&i.ZERO.subTo(this,this)}function at(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else{this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),yt,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(e))this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(i.ONE.shiftLeft(t-1),this)}else{var n=new Array,o=7&t;n.length=1+(t>>3),e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}}function ut(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0){n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);while(t>=0)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r)}return e}function ct(t){return 0==this.compareTo(t)}function ht(t){return this.compareTo(t)<0?this:t}function lt(t){return this.compareTo(t)>0?this:t}function ft(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function dt(t,e){return t&e}function pt(t){var e=o();return this.bitwiseTo(t,dt,e),e}function yt(t,e){return t|e}function gt(t){var e=o();return this.bitwiseTo(t,yt,e),e}function mt(t,e){return t^e}function bt(t){var e=o();return this.bitwiseTo(t,mt,e),e}function wt(t,e){return t&~e}function vt(t){var e=o();return this.bitwiseTo(t,wt,e),e}function _t(){for(var t=o(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function Et(t){var e=o();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function St(t){var e=o();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function At(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function It(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+At(this[t]);return this.s<0?this.t*this.DB:-1}function Tt(t){var e=0;while(0!=t)t&=t-1,++e;return e}function Rt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Tt(this[r]^e);return t}function Mt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function kt(t,e){var r=i.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Ct(t){return this.changeBit(t,yt)}function Ot(t){return this.changeBit(t,wt)}function Pt(t){return this.changeBit(t,mt)}function Bt(t,e){var r=0,n=0,i=Math.min(t.t,this.t);while(r<i)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n+=t.s;while(r<this.t)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()}function xt(t){var e=o();return this.addTo(t,e),e}function Nt(t){var e=o();return this.subTo(t,e),e}function Dt(t){var e=o();return this.multiplyTo(t,e),e}function Lt(){var t=o();return this.squareTo(t),t}function Ut(t){var e=o();return this.divRemTo(t,e,null),e}function jt(t){var e=o();return this.divRemTo(t,null,e),e}function Ft(t){var e=o(),r=o();return this.divRemTo(t,e,r),new Array(e,r)}function Kt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function $t(t,e){if(0!=t){while(this.t<=e)this[this.t++]=0;this[e]+=t;while(this[e]>=this.DV)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function qt(){}function Ht(t){return t}function zt(t,e,r){t.multiplyTo(e,r)}function Vt(t,e){t.squareTo(e)}function Gt(t){return this.exp(t,new qt)}function Wt(t,e,r){var n,i=Math.min(this.t+t.t,e);r.s=0,r.t=i;while(i>0)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()}function Yt(t,e,r){--e;var n=r.t=this.t+t.t-e;r.s=0;while(--n>=0)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Jt(t){this.r2=o(),this.q3=o(),i.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Zt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=o();return t.copyTo(e),this.reduce(e),e}function Xt(t){return t}function Qt(t){t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function te(t,e){t.squareTo(e),this.reduce(e)}function ee(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function re(t,e){var r,n,i=t.bitLength(),s=w(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new L(e):e.isEven()?new Jt(e):new H(e);var a=new Array,u=3,c=r-1,h=(1<<r)-1;if(a[1]=n.convert(this),r>1){var l=o();n.sqrTo(a[1],l);while(u<=h)a[u]=o(),n.mulTo(l,a[u-2],a[u]),u+=2}var f,d,p=t.t-1,y=!0,g=o();i=T(t[p])-1;while(p>=0){i>=c?f=t[p]>>i-c&h:(f=(t[p]&(1<<i+1)-1)<<c-i,p>0&&(f|=t[p-1]>>this.DB+i-c)),u=r;while(0==(1&f))f>>=1,--u;if((i-=u)<0&&(i+=this.DB,--p),y)a[f].copyTo(s),y=!1;else{while(u>1)n.sqrTo(s,g),n.sqrTo(g,s),u-=2;u>0?n.sqrTo(s,g):(d=s,s=g,g=d),n.mulTo(g,a[f],s)}while(p>=0&&0==(t[p]&1<<i))n.sqrTo(s,g),d=s,s=g,g=d,--i<0&&(i=this.DB-1,--p)}return n.revert(s)}function ne(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));while(e.signum()>0)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function ie(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r}function oe(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return i.ZERO;var r=t.clone(),n=this.clone(),o=w(1),s=w(0),a=w(0),u=w(1);while(0!=r.signum()){while(r.isEven())r.rShiftTo(1,r),e?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);while(n.isEven())n.rShiftTo(1,n),e?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),e&&o.subTo(a,o),s.subTo(u,s)):(n.subTo(r,n),e&&a.subTo(o,a),u.subTo(s,u))}return 0!=n.compareTo(i.ONE)?i.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}L.prototype.convert=U,L.prototype.revert=j,L.prototype.reduce=F,L.prototype.mulTo=K,L.prototype.sqrTo=$,H.prototype.convert=z,H.prototype.revert=V,H.prototype.reduce=G,H.prototype.mulTo=Y,H.prototype.sqrTo=W,i.prototype.copyTo=m,i.prototype.fromInt=b,i.prototype.fromString=v,i.prototype.clamp=_,i.prototype.dlShiftTo=M,i.prototype.drShiftTo=k,i.prototype.lShiftTo=C,i.prototype.rShiftTo=O,i.prototype.subTo=P,i.prototype.multiplyTo=B,i.prototype.squareTo=x,i.prototype.divRemTo=N,i.prototype.invDigit=q,i.prototype.isEven=J,i.prototype.exp=Z,i.prototype.toString=E,i.prototype.negate=S,i.prototype.abs=A,i.prototype.compareTo=I,i.prototype.bitLength=R,i.prototype.mod=D,i.prototype.modPowInt=X,i.ZERO=w(0),i.ONE=w(1),qt.prototype.convert=Ht,qt.prototype.revert=Ht,qt.prototype.mulTo=zt,qt.prototype.sqrTo=Vt,Jt.prototype.convert=Zt,Jt.prototype.revert=Xt,Jt.prototype.reduce=Qt,Jt.prototype.mulTo=ee,Jt.prototype.sqrTo=te;var se,ae,ue,ce=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],he=(1<<26)/ce[ce.length-1];function le(t){var e,r=this.abs();if(1==r.t&&r[0]<=ce[ce.length-1]){for(e=0;e<ce.length;++e)if(r[0]==ce[e])return!0;return!1}if(r.isEven())return!1;e=1;while(e<ce.length){var n=ce[e],i=e+1;while(i<ce.length&&n<he)n*=ce[i++];n=r.modInt(n);while(e<i)if(n%ce[e++]==0)return!1}return r.millerRabin(t)}function fe(t){var e=this.subtract(i.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);t=t+1>>1,t>ce.length&&(t=ce.length);for(var s=o(),a=0;a<t;++a){s.fromInt(ce[Math.floor(Math.random()*ce.length)]);var u=s.modPow(n,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(e)){var c=1;while(c++<r&&0!=u.compareTo(e))if(u=u.modPowInt(2,this),0==u.compareTo(i.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}function de(t){ae[ue++]^=255&t,ae[ue++]^=t>>8&255,ae[ue++]^=t>>16&255,ae[ue++]^=t>>24&255,ue>=Ie&&(ue-=Ie)}function pe(){de((new Date).getTime())}if(i.prototype.chunkSize=nt,i.prototype.toRadix=ot,i.prototype.fromRadix=st,i.prototype.fromNumber=at,i.prototype.bitwiseTo=ft,i.prototype.changeBit=kt,i.prototype.addTo=Bt,i.prototype.dMultiply=Kt,i.prototype.dAddOffset=$t,i.prototype.multiplyLowerTo=Wt,i.prototype.multiplyUpperTo=Yt,i.prototype.modInt=ie,i.prototype.millerRabin=fe,i.prototype.clone=Q,i.prototype.intValue=tt,i.prototype.byteValue=et,i.prototype.shortValue=rt,i.prototype.signum=it,i.prototype.toByteArray=ut,i.prototype.equals=ct,i.prototype.min=ht,i.prototype.max=lt,i.prototype.and=pt,i.prototype.or=gt,i.prototype.xor=bt,i.prototype.andNot=vt,i.prototype.not=_t,i.prototype.shiftLeft=Et,i.prototype.shiftRight=St,i.prototype.getLowestSetBit=It,i.prototype.bitCount=Rt,i.prototype.testBit=Mt,i.prototype.setBit=Ct,i.prototype.clearBit=Ot,i.prototype.flipBit=Pt,i.prototype.add=xt,i.prototype.subtract=Nt,i.prototype.multiply=Dt,i.prototype.divide=Ut,i.prototype.remainder=jt,i.prototype.divideAndRemainder=Ft,i.prototype.modPow=re,i.prototype.modInverse=oe,i.prototype.pow=Gt,i.prototype.gcd=ne,i.prototype.isProbablePrime=le,i.prototype.square=Lt,i.prototype.Barrett=Jt,null==ae){var ye;if(ae=new Array,ue=0,"undefined"!==typeof window&&window.crypto)if(window.crypto.getRandomValues){var ge=new Uint8Array(32);for(window.crypto.getRandomValues(ge),ye=0;ye<32;++ye)ae[ue++]=ge[ye]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var me=window.crypto.random(32);for(ye=0;ye<me.length;++ye)ae[ue++]=255&me.charCodeAt(ye)}while(ue<Ie)ye=Math.floor(65536*Math.random()),ae[ue++]=ye>>>8,ae[ue++]=255&ye;ue=0,pe()}function be(){if(null==se){for(pe(),se=Ae(),se.init(ae),ue=0;ue<ae.length;++ue)ae[ue]=0;ue=0}return se.next()}function we(t){var e;for(e=0;e<t.length;++e)t[e]=be()}function ve(){}function _e(){this.i=0,this.j=0,this.S=new Array}function Ee(t){var e,r,n;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[r],this.S[r]=n;this.i=0,this.j=0}function Se(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function Ae(){return new _e}ve.prototype.nextBytes=we,_e.prototype.init=Ee,_e.prototype.next=Se;var Ie=256;t.exports={default:i,BigInteger:i,SecureRandom:ve}}.call(this)},84780:function(t,e,r){"use strict";r(21703);const n=r(68292),{Multiaddr:i}=r(19391),o=r(49605),{EventEmitter:s}=r(43793),a=r(15652),u=Object.assign(a("libp2p:bootstrap"),{error:a("libp2p:bootstrap:error")});class c extends s{constructor(t={list:[]}){if(!t.list||!t.list.length)throw new Error("Bootstrap requires a list of peer addresses");super(),this._list=t.list,this._interval=t.interval||1e4,this._timer=null}start(){this._timer||(this._timer=setInterval((()=>this._discoverBootstrapPeers()),this._interval),u("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){this._timer&&this._list.forEach((t=>{if(!o.P2P.matches(t))return u.error("Invalid multiaddr");const e=new i(t),r=e.getPeerId();if(!r)return void u.error("Invalid bootstrap multiaddr without peer id");const s=n.createFromB58String(r);try{this.emit("peer",{id:s,multiaddrs:[e]})}catch(a){u.error("Invalid bootstrap peer id",a)}}))}stop(){this._timer&&clearInterval(this._timer),this._timer=null}}e=t.exports=c,e.tag="bootstrap"},14878:function(t,e,r){"use strict";r(21703);const n=r(19998),i={16:"aes-128-ctr",32:"aes-256-ctr"};t.exports=function(t){const e=i[t.length];if(!e){const e=Object.entries(i).map((([t,e])=>`${t} (${e})`)).join(" / ");throw n(new Error(`Invalid key length ${t.length} bytes. Must be ${e}`),"ERR_INVALID_KEY_LENGTH")}return e}},15514:function(t,e,r){"use strict";r(90022);const n=r(15736),{toString:i}=r(96523),{fromString:o}=r(92259);t.exports={createCipheriv:(t,e,r)=>{const s=n.cipher.createCipher("AES-CTR",i(e,"ascii"));return s.start({iv:i(r,"ascii")}),{update:t=>(s.update(n.util.createBuffer(i(t,"ascii"))),o(s.output.getBytes(),"ascii"))}},createDecipheriv:(t,e,r)=>{const s=n.cipher.createDecipher("AES-CTR",i(e,"ascii"));return s.start({iv:i(r,"ascii")}),{update:t=>(s.update(n.util.createBuffer(i(t,"ascii"))),o(s.output.getBytes(),"ascii"))}}}},14875:function(t,e,r){"use strict";const n=r(15514),i=r(14878);e.create=async function(t,e){const r=i(t),o=n.createCipheriv(r,t,e),s=n.createDecipheriv(r,t,e),a={async encrypt(t){return o.update(t)},async decrypt(t){return s.update(t)}};return a}},43088:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const{concat:n}=r(85489),{fromString:i}=r(92259),o=r(68316);function s({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:s="SHA-256",saltLength:a=16,iterations:u=32767}={}){const c=o.get();async function h(o,h){const l=c.getRandomValues(new Uint8Array(a)),f=c.getRandomValues(new Uint8Array(e)),d={name:t,iv:f},p={name:"PBKDF2",salt:l,iterations:u,hash:{name:s}},y=await c.subtle.importKey("raw",i(h),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await c.subtle.deriveKey(p,y,{name:t,length:r},!0,["encrypt"]),m=await c.subtle.encrypt(d,g,o);return n([l,d.iv,new Uint8Array(m)])}async function l(n,o){const h=n.slice(0,a),l=n.slice(a,a+e),f=n.slice(a+e),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:u,hash:{name:s}},y=await c.subtle.importKey("raw",i(o),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await c.subtle.deriveKey(p,y,{name:t,length:r},!0,["decrypt"]),m=await c.subtle.decrypt(d,g,f);return new Uint8Array(m)}return r*=8,{encrypt:h,decrypt:l}}t.exports={create:s}},66253:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const n=r(68316),i=r(43190),o={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},s=async(t,e)=>{const r=await n.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};e.create=async function(t,e){const r=o[t],a=await n.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(t){return s(a,t)},length:i[t]}}},43190:function(t){"use strict";t.exports={SHA1:20,SHA256:32,SHA512:64}},75167:function(t,e,r){"use strict";const n=r(66253),i=r(14875),o=r(91950);e.aes=i,e.hmac=n,e.keys=o,e.randomBytes=r(69340),e.pbkdf2=r(49945)},24659:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const n=r(19998),i=r(68316),{base64urlToBuffer:o}=r(54828),s=r(17638),{toString:a}=r(96523),{concat:u}=r(85489),{equals:c}=r(74141),h={"P-256":256,"P-384":384,"P-521":521};e.generateEphmeralKeyPair=async function(t){s(Object.keys(h),t);const e=await i.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(r,n)=>{let o;o=n?await i.get().subtle.importKey("jwk",p(t,n),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):e.privateKey;const s=[await i.get().subtle.importKey("jwk",d(t,r),{name:"ECDH",namedCurve:t},!1,[]),o],a=await i.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:s[0]},s[1],h[t]);return new Uint8Array(a,a.byteOffset,a.byteLength)},n=await i.get().subtle.exportKey("jwk",e.publicKey);return{key:f(n),genSharedKey:r}};const l={"P-256":32,"P-384":48,"P-521":66};function f(t){const e=l[t.crv];return u([Uint8Array.from([4]),o(t.x,e),o(t.y,e)],1+2*e)}function d(t,e){const r=l[t];if(c(!e.slice(0,1),Uint8Array.from([4])))throw n(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:a(e.slice(1,r+1),"base64url"),y:a(e.slice(1+r),"base64url"),ext:!0}}const p=(t,e)=>({...d(t,e.public),d:a(e.private,"base64url")})},2210:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);const n=r(19998),{equals:i}=r(74141),{sha256:o}=r(51919),{base58btc:s}=r(78334),{identity:a}=r(67041),u=r(82230),c=r(45865),h=r(62514);class l{constructor(t){this._key=m(t,u.publicKeyLength)}async verify(t,e){return u.hashAndVerify(this._key,e,t)}marshal(){return this._key}get bytes(){return c.PublicKey.encode({Type:c.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return i(this.bytes,t.bytes)}async hash(){const{bytes:t}=await o.digest(this.bytes);return t}}class f{constructor(t,e){this._key=m(t,u.privateKeyLength),this._publicKey=m(e,u.publicKeyLength)}async sign(t){return u.hashAndSign(this._key,t)}get public(){return new l(this._publicKey)}marshal(){return this._key}get bytes(){return c.PrivateKey.encode({Type:c.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return i(this.bytes,t.bytes)}async hash(){const{bytes:t}=await o.digest(this.bytes);return t}async id(){const t=await a.digest(this.public.bytes);return s.encode(t.bytes).substring(1)}async export(t,e="libp2p-key"){if("libp2p-key"===e)return h.export(this.bytes,t);throw n(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function d(t){if(t.length>u.privateKeyLength){t=m(t,u.privateKeyLength+u.publicKeyLength);const e=t.slice(0,u.privateKeyLength),r=t.slice(u.privateKeyLength,t.length);return new f(e,r)}t=m(t,u.privateKeyLength);const e=t.slice(0,u.privateKeyLength),r=t.slice(u.publicKeyLength);return new f(e,r)}function p(t){return t=m(t,u.publicKeyLength),new l(t)}async function y(){const{privateKey:t,publicKey:e}=await u.generateKey();return new f(t,e)}async function g(t){const{privateKey:e,publicKey:r}=await u.generateKeyFromSeed(t);return new f(e,r)}function m(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw n(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}t.exports={Ed25519PublicKey:l,Ed25519PrivateKey:f,unmarshalEd25519PrivateKey:d,unmarshalEd25519PublicKey:p,generateKeyPair:y,generateKeyPairFromSeed:g}},82230:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);const n=r(19675),i=32,o=64,s=32;function a(t,r){const n=new Uint8Array(e.privateKeyLength);for(let e=0;e<s;e++)n[e]=t[e],n[s+e]=r[e];return n}e.publicKeyLength=i,e.privateKeyLength=o,e.generateKey=async function(){const t=n.utils.randomPrivateKey(),e=await n.getPublicKey(t),r=a(t,e);return{privateKey:r,publicKey:e}},e.generateKeyFromSeed=async function(t){if(t.length!==s)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,r=await n.getPublicKey(e),i=a(e,r);return{privateKey:i,publicKey:r}},e.hashAndSign=function(t,e){const r=t.slice(0,s);return n.sign(e,r)},e.hashAndVerify=function(t,e,r){return n.verify(e,r,t)}},12712:function(t,e,r){"use strict";const n=r(24659);t.exports=async t=>n.generateEphmeralKeyPair(t)},62514:function(t,e,r){"use strict";const{base64:n}=r(61058),i=r(43088);t.exports={export:async function(t,e){const r=i.create(),o=await r.encrypt(t,e);return n.encode(o)}}},88177:function(t,e,r){"use strict";const{base64:n}=r(61058),i=r(43088);t.exports={import:async function(t,e){const r=n.decode(t),o=i.create();return await o.decrypt(r,e)}}},91950:function(t,e,r){"use strict";r(21703);const n=r(45865);r(21041),r(1352);const i=r(15736),o=r(19998),{fromString:s}=r(92259),a=r(88177),u={rsa:r(54101),ed25519:r(2210),secp256k1:r(55494)(n,r(69340))},c={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function h(t){const e=u[t.toLowerCase()];if(!e){const e=Object.keys(u).join(" / ");throw o(new Error(`invalid or unsupported key type ${t}. Must be ${e}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}const l=async(t,e)=>h(t).generateKeyPair(e),f=async(t,e,r)=>{const n=h(t);if("ed25519"!==t.toLowerCase())throw o(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(e,r)},d=t=>{const e=n.PublicKey.decode(t),r=e.Data;switch(e.Type){case n.KeyType.RSA:return u.rsa.unmarshalRsaPublicKey(r);case n.KeyType.Ed25519:return u.ed25519.unmarshalEd25519PublicKey(r);case n.KeyType.Secp256k1:if(u.secp256k1)return u.secp256k1.unmarshalSecp256k1PublicKey(r);throw o(new Error(c.message),c.code);default:h(e.Type)}},p=(t,e)=>(e=(e||"rsa").toLowerCase(),h(e),t.bytes),y=async t=>{const e=n.PrivateKey.decode(t),r=e.Data;switch(e.Type){case n.KeyType.RSA:return u.rsa.unmarshalRsaPrivateKey(r);case n.KeyType.Ed25519:return u.ed25519.unmarshalEd25519PrivateKey(r);case n.KeyType.Secp256k1:if(u.secp256k1)return u.secp256k1.unmarshalSecp256k1PrivateKey(r);throw o(new Error(c.message),c.code);default:h(e.Type)}},g=(t,e)=>(e=(e||"rsa").toLowerCase(),h(e),t.bytes),m=async(t,e)=>{try{const r=await a.import(t,e);return y(r)}catch(c){}const r=i.pki.decryptRsaPrivateKey(t,e);if(null===r)throw o(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=i.asn1.toDer(i.pki.privateKeyToAsn1(r));return n=s(n.getBytes(),"ascii"),u.rsa.unmarshalRsaPrivateKey(n)};t.exports={supportedKeys:u,keysPBM:n,keyStretcher:r(44194),generateEphemeralKeyPair:r(12712),generateKeyPair:l,generateKeyPairFromSeed:f,unmarshalPublicKey:d,marshalPublicKey:p,unmarshalPrivateKey:y,marshalPrivateKey:g,import:m}},93976:function(t,e,r){"use strict";r(15070);const n=r(15736),{base64urlToBigInteger:i}=r(54828);function o(t,e){return e.map((e=>i(t[e])))}function s(t){return n.pki.setRsaPrivateKey(...o(t,["n","e","d","p","q","dp","dq","qi"]))}function a(t){return n.pki.setRsaPublicKey(...o(t,["n","e"]))}t.exports={jwk2pub:a,jwk2priv:s}},44194:function(t,e,r){"use strict";r(21703);const n=r(19998),{concat:i}=r(85489),{fromString:o}=r(92259),s=r(66253),a={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};t.exports=async(t,e,r)=>{const u=a[t];if(!u){const e=Object.keys(a).join(" / ");throw n(new Error(`unknown cipher type '${t}'. Must be ${e}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw n(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");const c=u.keySize,h=u.ivSize,l=20,f=o("key expansion"),d=2*(h+c+l),p=await s.create(e,r);let y=await p.digest(f);const g=[];let m=0;while(m<d){const t=await p.digest(i([y,f]));let e=t.length;m+e>d&&(e=d-m),g.push(t),m+=e,y=await p.digest(y)}const b=d/2,w=i(g),v=w.slice(0,b),_=w.slice(b,d),E=t=>({iv:t.slice(0,h),cipherKey:t.slice(h,h+c),macKey:t.slice(h+c)});return{k1:E(v),k2:E(_)}}},45865:function(t,e,r){"use strict";var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-crypto-keys"]||(n.roots["libp2p-crypto-keys"]={});a.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}(),a.PublicKey=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.Type=0,t.prototype.Data=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),e.uint32(8).int32(t.Type),e.uint32(18).bytes(t.Data),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.PublicKey;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.Type=t.int32();break;case 2:n.Data=t.bytes();break;default:t.skipType(7&o);break}}if(!n.hasOwnProperty("Type"))throw s.ProtocolError("missing required 'Type'",{instance:n});if(!n.hasOwnProperty("Data"))throw s.ProtocolError("missing required 'Data'",{instance:n});return n},t.fromObject=function(t){if(t instanceof a.PublicKey)return t;var e=new a.PublicKey;switch(t.Type){case"RSA":case 0:e.Type=0;break;case"Ed25519":case 1:e.Type=1;break;case"Secp256k1":case 2:e.Type=2;break}return null!=t.Data&&("string"===typeof t.Data?s.base64.decode(t.Data,e.Data=s.newBuffer(s.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.Type=e.enums===String?"RSA":0,e.bytes===String?r.Data="":(r.Data=[],e.bytes!==Array&&(r.Data=s.newBuffer(r.Data)))),null!=t.Type&&t.hasOwnProperty("Type")&&(r.Type=e.enums===String?a.KeyType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(r.Data=e.bytes===String?s.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),a.PrivateKey=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.Type=0,t.prototype.Data=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),e.uint32(8).int32(t.Type),e.uint32(18).bytes(t.Data),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.PrivateKey;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.Type=t.int32();break;case 2:n.Data=t.bytes();break;default:t.skipType(7&o);break}}if(!n.hasOwnProperty("Type"))throw s.ProtocolError("missing required 'Type'",{instance:n});if(!n.hasOwnProperty("Data"))throw s.ProtocolError("missing required 'Data'",{instance:n});return n},t.fromObject=function(t){if(t instanceof a.PrivateKey)return t;var e=new a.PrivateKey;switch(t.Type){case"RSA":case 0:e.Type=0;break;case"Ed25519":case 1:e.Type=1;break;case"Secp256k1":case 2:e.Type=2;break}return null!=t.Data&&("string"===typeof t.Data?s.base64.decode(t.Data,e.Data=s.newBuffer(s.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.Type=e.enums===String?"RSA":0,e.bytes===String?r.Data="":(r.Data=[],e.bytes!==Array&&(r.Data=s.newBuffer(r.Data)))),null!=t.Type&&t.hasOwnProperty("Type")&&(r.Type=e.enums===String?a.KeyType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(r.Data=e.bytes===String?s.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},6247:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const n=r(68316),i=r(69340),{toString:o}=r(96523),{fromString:s}=r(92259);function a(t){return Promise.all([n.get().subtle.exportKey("jwk",t.privateKey),n.get().subtle.exportKey("jwk",t.publicKey)])}function u(t){return n.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}e.utils=r(68123),e.generateKey=async function(t){const e=await n.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await a(e);return{privateKey:r[0],publicKey:r[1]}},e.unmarshalPrivateKey=async function(t){const e=await n.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),r=[e,await u(t)],i=await a({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}},e.getRandomValues=i,e.hashAndSign=async function(t,e){const r=await n.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await n.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)},e.hashAndVerify=async function(t,e,r){const i=await n.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return n.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};const{jwk2pub:c,jwk2priv:h}=r(93976);function l(t,e,r,n){const i=e?c(t):h(t),a=o(Uint8Array.from(r),"ascii"),u=n(a,i);return s(u,"ascii")}e.encrypt=function(t,e){return l(t,!0,e,((t,e)=>e.encrypt(t)))},e.decrypt=function(t,e){return l(t,!1,e,((t,e)=>e.decrypt(t)))}},54101:function(t,e,r){"use strict";r(21703);const{sha256:n}=r(51919),i=r(19998),{equals:o}=r(74141),{toString:s}=r(96523);r(12328);const a=r(15736),u=r(6247),c=r(45865),h=r(62514);class l{constructor(t){this._key=t}async verify(t,e){return u.hashAndVerify(this._key,e,t)}marshal(){return u.utils.jwkToPkix(this._key)}get bytes(){return c.PublicKey.encode({Type:c.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(t){return u.encrypt(this._key,t)}equals(t){return o(this.bytes,t.bytes)}async hash(){const{bytes:t}=await n.digest(this.bytes);return t}}class f{constructor(t,e){this._key=t,this._publicKey=e}genSecret(){return u.getRandomValues(16)}async sign(t){return u.hashAndSign(this._key,t)}get public(){if(!this._publicKey)throw i(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new l(this._publicKey)}decrypt(t){return u.decrypt(this._key,t)}marshal(){return u.utils.jwkToPkcs1(this._key)}get bytes(){return c.PrivateKey.encode({Type:c.KeyType.RSA,Data:this.marshal()}).finish()}equals(t){return o(this.bytes,t.bytes)}async hash(){const{bytes:t}=await n.digest(this.bytes);return t}async id(){const t=await this.public.hash();return s(t,"base58btc")}async export(t,e="pkcs-8"){if("pkcs-8"===e){const e=new a.util.ByteBuffer(this.marshal()),r=a.asn1.fromDer(e),n=a.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return a.pki.encryptRsaPrivateKey(n,t,i)}if("libp2p-key"===e)return h.export(this.bytes,t);throw i(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}async function d(t){const e=u.utils.pkcs1ToJwk(t),r=await u.unmarshalPrivateKey(e);return new f(r.privateKey,r.publicKey)}function p(t){const e=u.utils.pkixToJwk(t);return new l(e)}async function y(t){const e=await u.unmarshalPrivateKey(t);return new f(e.privateKey,e.publicKey)}async function g(t){const e=await u.generateKey(t);return new f(e.privateKey,e.publicKey)}t.exports={RsaPublicKey:l,RsaPrivateKey:f,unmarshalRsaPublicKey:p,unmarshalRsaPrivateKey:d,generateKeyPair:g,fromJwk:y}},68123:function(t,e,r){"use strict";r(21041),r(15070);const n=r(15736),{bigIntegerToUintBase64url:i,base64urlToBigInteger:o}=r(54828),{fromString:s}=r(92259),{toString:a}=r(96523);e.pkcs1ToJwk=function(t){const e=n.asn1.fromDer(a(t,"ascii")),r=n.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:i(r.n),e:i(r.e),d:i(r.d),p:i(r.p),q:i(r.q),dp:i(r.dP),dq:i(r.dQ),qi:i(r.qInv),alg:"RS256",kid:"2011-04-29"}},e.jwkToPkcs1=function(t){const e=n.pki.privateKeyToAsn1({n:o(t.n),e:o(t.e),d:o(t.d),p:o(t.p),q:o(t.q),dP:o(t.dp),dQ:o(t.dq),qInv:o(t.qi)});return s(n.asn1.toDer(e).getBytes(),"ascii")},e.pkixToJwk=function(t){const e=n.asn1.fromDer(a(t,"ascii")),r=n.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:i(r.n),e:i(r.e),alg:"RS256",kid:"2011-04-29"}},e.jwkToPkix=function(t){const e=n.pki.publicKeyToAsn1({n:o(t.n),e:o(t.e)});return s(n.asn1.toDer(e).getBytes(),"ascii")}},55494:function(t,e,r){"use strict";r(21703);const{sha256:n}=r(51919),i=r(19998),{equals:o}=r(74141),{toString:s}=r(96523),a=r(62514);t.exports=(t,e,u)=>{u=u||r(62991)();class c{constructor(t){u.validatePublicKey(t),this._key=t}verify(t,e){return u.hashAndVerify(this._key,e,t)}marshal(){return u.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(t){return o(this.bytes,t.bytes)}async hash(){const{bytes:t}=await n.digest(this.bytes);return t}}class h{constructor(t,e){this._key=t,this._publicKey=e||u.computePublicKey(t),u.validatePrivateKey(this._key),u.validatePublicKey(this._publicKey)}sign(t){return u.hashAndSign(this._key,t)}get public(){return new c(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(t){return o(this.bytes,t.bytes)}async hash(){const{bytes:t}=await n.digest(this.bytes);return t}async id(){const t=await this.public.hash();return s(t,"base58btc")}async export(t,e="libp2p-key"){if("libp2p-key"===e)return a.export(this.bytes,t);throw i(new Error(`export format '${e}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function l(t){return new h(t)}function f(t){return new c(t)}async function d(){const t=await u.generateKey();return new h(t)}return{Secp256k1PublicKey:c,Secp256k1PrivateKey:h,unmarshalSecp256k1PrivateKey:l,unmarshalSecp256k1PublicKey:f,generateKeyPair:d}}},62991:function(t,e,r){"use strict";const n=r(19998),i=r(20272),{sha256:o}=r(51919);t.exports=()=>{const t=32;function e(){return i.utils.randomPrivateKey()}async function r(t,e){const{digest:r}=await o.digest(e);try{return await i.sign(r,t)}catch(s){throw n(s,"ERR_INVALID_INPUT")}}async function s(t,e,r){try{const{digest:n}=await o.digest(r);return i.verify(e,n,t)}catch(s){throw n(s,"ERR_INVALID_INPUT")}}function a(t){const e=i.Point.fromHex(t).toRawBytes(!0);return e}function u(t){const e=i.Point.fromHex(t).toRawBytes(!1);return e}function c(t){try{i.getPublicKey(t,!0)}catch(e){throw n(e,"ERR_INVALID_PRIVATE_KEY")}}function h(t){try{i.Point.fromHex(t)}catch(e){throw n(e,"ERR_INVALID_PUBLIC_KEY")}}function l(t){try{return i.getPublicKey(t,!0)}catch(e){throw n(e,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:s,compressPublicKey:a,decompressPublicKey:u,validatePrivateKey:c,validatePublicKey:h,computePublicKey:l}}},17638:function(t,e,r){"use strict";r(26699),r(21703);const n=r(19998);t.exports=function(t,e){if(!t.includes(e)){const r=t.join(" / ");throw n(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}},49945:function(t,e,r){"use strict";r(21703);const n=r(42515),i=r(64292),o=r(19998),s={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function a(t,e,r,a,u){const c=s[u];if(!c){const t=Object.keys(s).join(" / ");throw o(new Error(`Hash '${u}' is unknown or not supported. Must be ${t}`),"ERR_UNSUPPORTED_HASH_TYPE")}const h=n(t,e,r,a,c);return i.encode64(h)}t.exports=a},69340:function(t,e,r){"use strict";r(21703);const n=r(11809),i=r(19998);t.exports=function(t){if(isNaN(t)||t<=0)throw i(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return n(t)}},54828:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703),r(64292),r(35970);const n=r(15736),{fromString:i}=r(92259),{toString:o}=r(96523),{concat:s}=r(85489);e.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=s([new Uint8Array(e-r.length),r])}return o(r,"base64url")},e.base64urlToBigInteger=t=>{const r=e.base64urlToBuffer(t);return new n.jsbn.BigInteger(o(r,"base16"),16)},e.base64urlToBuffer=(t,e)=>{let r=i(t,"base64urlpad");if(null!=e){if(r.length>e)throw new Error("byte array longer than desired length");r=s([new Uint8Array(e-r.length),r])}return r}},68316:function(t,e,r){"use strict";r(21703),e.get=(t=globalThis)=>{const e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}},13756:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ACCEPT_FROM_WHITELIST_DURATION_MS=e.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=e.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=e.ERR_TOPIC_VALIDATOR_IGNORE=e.ERR_TOPIC_VALIDATOR_REJECT=e.TimeCacheDuration=e.GossipsubSeenTTL=e.GossipsubIWantFollowupTime=e.GossipsubMaxIHaveMessages=e.GossipsubMaxIHaveLength=e.GossipsubGraftFloodThreshold=e.GossipsubOpportunisticGraftPeers=e.GossipsubOpportunisticGraftTicks=e.GossipsubDirectConnectInitialDelay=e.GossipsubDirectConnectTicks=e.GossipsubConnectionTimeout=e.GossipsubMaxPendingConnections=e.GossipsubConnectors=e.GossipsubPruneBackoffTicks=e.GossipsubPruneBackoff=e.GossipsubPrunePeers=e.GossipsubFanoutTTL=e.GossipsubHeartbeatInterval=e.GossipsubHeartbeatInitialDelay=e.GossipsubGossipRetransmission=e.GossipsubGossipFactor=e.GossipsubDlazy=e.GossipsubHistoryGossip=e.GossipsubHistoryLength=e.GossipsubDout=e.GossipsubDscore=e.GossipsubDhi=e.GossipsubDlo=e.GossipsubD=e.GossipsubIDv11=e.GossipsubIDv10=e.FloodsubID=e.minute=e.second=void 0,e.second=1e3,e.minute=60*e.second,e.FloodsubID="/floodsub/1.0.0",e.GossipsubIDv10="/meshsub/1.0.0",e.GossipsubIDv11="/meshsub/1.1.0",e.GossipsubD=6,e.GossipsubDlo=4,e.GossipsubDhi=12,e.GossipsubDscore=4,e.GossipsubDout=2,e.GossipsubHistoryLength=5,e.GossipsubHistoryGossip=3,e.GossipsubDlazy=6,e.GossipsubGossipFactor=.25,e.GossipsubGossipRetransmission=3,e.GossipsubHeartbeatInitialDelay=100,e.GossipsubHeartbeatInterval=e.second,e.GossipsubFanoutTTL=e.minute,e.GossipsubPrunePeers=16,e.GossipsubPruneBackoff=e.minute,e.GossipsubPruneBackoffTicks=15,e.GossipsubConnectors=8,e.GossipsubMaxPendingConnections=128,e.GossipsubConnectionTimeout=30*e.second,e.GossipsubDirectConnectTicks=300,e.GossipsubDirectConnectInitialDelay=e.second,e.GossipsubOpportunisticGraftTicks=60,e.GossipsubOpportunisticGraftPeers=2,e.GossipsubGraftFloodThreshold=10*e.second,e.GossipsubMaxIHaveLength=5e3,e.GossipsubMaxIHaveMessages=10,e.GossipsubIWantFollowupTime=3*e.second,e.GossipsubSeenTTL=30*e.second,e.TimeCacheDuration=12e4,e.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT",e.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE",e.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=0,e.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=128,e.ACCEPT_FROM_WHITELIST_DURATION_MS=1e3},72986:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGossipPeers=void 0;const n=r(49188);function i(t,e,r,i=(()=>!0)){const o=t.topics.get(e);if(!o)return new Set;let s=[];return o.forEach((e=>{const r=t.peers.get(e);r&&n.hasGossipProtocol(r.protocol)&&i(e)&&s.push(e)})),s=n.shuffle(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}e.getGossipPeers=i},12715:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Heartbeat=void 0;const s=o(r(13756)),a=r(72986),u=r(49188);class c{constructor(t){this.gossipsub=t}start(){if(this._heartbeatTimer)return;const t=this._heartbeat.bind(this),e=setTimeout((()=>{t(),this._heartbeatTimer.runPeriodically(t,this.gossipsub._options.heartbeatInterval)}),s.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(t,e)=>{this._heartbeatTimer._intervalId=setInterval(t,e)},cancel:()=>{clearTimeout(e),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){this._heartbeatTimer&&(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){const{D:t,Dlo:e,Dhi:r,Dscore:n,Dout:i,fanoutTTL:o}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;const c=new Map,h=t=>{let e=c.get(t);return void 0===e&&(e=this.gossipsub.score.score(t),c.set(t,e)),e},l=new Map,f=new Map,d=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach(((o,c)=>{const p=t=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",t,c),this.gossipsub.score.prune(t,c),this.gossipsub._addBackoff(t,c),o.delete(t);const e=f.get(t);e?e.push(c):f.set(t,[c])},y=t=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",t,c),this.gossipsub.score.graft(t,c),o.add(t);const e=l.get(t);e?e.push(c):l.set(t,[c])};if(o.forEach((t=>{const e=h(t);e<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",t,e,c),p(t),d.set(t,!0))})),o.size<e){const e=this.gossipsub.backoff.get(c),r=t-o.size,n=a.getGossipPeers(this.gossipsub,c,r,(t=>!o.has(t)&&!this.gossipsub.direct.has(t)&&(!e||!e.has(t))&&h(t)>=0));n.forEach(y)}if(o.size>r){let e=Array.from(o);e.sort(((t,e)=>h(e)-h(t))),e=e.slice(0,n).concat(u.shuffle(e.slice(n)));let r=0;if(e.slice(0,t).forEach((t=>{this.gossipsub.outbound.get(t)&&r++})),r<i){const n=t=>{const r=e[t];for(let n=t;n>0;n--)e[n]=e[n-1];e[0]=r};if(r>0){let i=r;for(let r=1;r<t&&i>0;r++)this.gossipsub.outbound.get(e[r])&&(n(r),i--)}let i=t-r;for(let r=t;r<e.length&&i>0;r++)this.gossipsub.outbound.get(e[r])&&(n(r),i--)}e.slice(t).forEach(p)}if(o.size>=e){let t=0;if(o.forEach((e=>{this.gossipsub.outbound.get(e)&&t++})),t<i){const e=i-t,r=this.gossipsub.backoff.get(c);a.getGossipPeers(this.gossipsub,c,e,(t=>!o.has(t)&&!this.gossipsub.direct.has(t)&&(!r||!r.has(t))&&h(t)>=0)).forEach(y)}}if(this.gossipsub.heartbeatTicks%s.GossipsubOpportunisticGraftTicks===0&&o.size>1){const t=Array.from(o).sort(((t,e)=>h(t)-h(e))),e=Math.floor(o.size/2),r=h(t[e]);if(r<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){const t=this.gossipsub.backoff.get(c),e=a.getGossipPeers(this.gossipsub,c,s.GossipsubOpportunisticGraftPeers,(e=>o.has(e)&&!this.gossipsub.direct.has(e)&&(!t||!t.has(e))&&h(e)>r));e.forEach((t=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",t,c),y(t)}))}}this.gossipsub._emitGossip(c,o)}));const p=this.gossipsub._now();this.gossipsub.lastpub.forEach(((t,e)=>{t+o<p&&(this.gossipsub.fanout.delete(e),this.gossipsub.lastpub.delete(e))})),this.gossipsub.fanout.forEach(((e,r)=>{const n=this.gossipsub.topics.get(r);if(e.forEach((t=>{(!n.has(t)||h(t)<this.gossipsub._options.scoreThresholds.publishThreshold)&&e.delete(t)})),e.size<t){const n=t-e.size,i=a.getGossipPeers(this.gossipsub,r,n,(t=>!e.has(t)&&!this.gossipsub.direct.has(t)&&h(t)>=this.gossipsub._options.scoreThresholds.publishThreshold));i.forEach((t=>{e.add(t)}))}this.gossipsub._emitGossip(r,e)})),this.gossipsub._sendGraftPrune(l,f,d),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}}e.Heartbeat=c},33444:function(t,e,r){"use strict";r(21703);var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const a=o(r(89889)),u=r(90729),c=r(32469),h=o(r(13756)),l=r(12715),f=r(72986),d=r(49188),p=r(19006),y=r(303),g=r(96715),m=r(68292),b=r(81442),w=r(13756);class v extends a.default{constructor(t,e={}){var r;const n=[h.GossipsubIDv11,h.GossipsubIDv10],i=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:h.GossipsubD,Dlo:h.GossipsubDlo,Dhi:h.GossipsubDhi,Dscore:h.GossipsubDscore,Dout:h.GossipsubDout,Dlazy:h.GossipsubDlazy,heartbeatInterval:h.GossipsubHeartbeatInterval,fanoutTTL:h.GossipsubFanoutTTL,mcacheLength:h.GossipsubHistoryLength,mcacheGossip:h.GossipsubHistoryGossip,seenTTL:h.GossipsubSeenTTL},e),{scoreParams:p.createPeerScoreParams(e.scoreParams),scoreThresholds:p.createPeerScoreThresholds(e.scoreThresholds)});i.fallbackToFloodsub&&n.push(h.FloodsubID),super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:n,libp2p:t},i)),this._options=i,this.direct=new Set(i.directPeers.map((t=>t.id.toB58String()))),this.acceptFromWhitelist=new Map,i.directPeers.forEach((e=>{t.peerStore.addressBook.add(e.id,e.addrs)})),this.seenCache=new g.SimpleTimeCache({validityMs:i.seenTTL}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=e.messageCache||new u.MessageCache(i.mcacheGossip,i.mcacheLength),this.getFastMsgIdStr=null!==(r=e.fastMsgIdFn)&&void 0!==r?r:void 0,this.fastMsgIdCache=e.fastMsgIdFn?new g.SimpleTimeCache({validityMs:i.seenTTL}):void 0,this.heartbeat=new l.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new y.IWantTracer,this._libp2p=t,this.score=new p.PeerScore(this._options.scoreParams,t.connectionManager)}_decodeRpc(t){return c.RPC.decode(t)}_encodeRpc(t){return c.RPC.encode(t).finish()}_addPeer(t,e){const r=super._addPeer(t,e);this.score.addPeer(t.toB58String());let n=!1;for(const i of this._libp2p.connectionManager.getAll(t))if("outbound"===i.stat.direction&&Array.from(i.registry.values()).some((t=>e===t.protocol))){n=!0;break}return this.outbound.set(r.id.toB58String(),n),r}_removePeer(t){const e=super._removePeer(t),r=t.toB58String();for(const n of this.mesh.values())n.delete(r);for(const n of this.fanout.values())n.delete(r);return this.gossip.delete(r),this.control.delete(r),this.outbound.delete(r),this.score.removePeer(r),this.acceptFromWhitelist.delete(r),e}_processRpc(t,e,r){const n=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return s(this,void 0,void 0,(function*(){return!!(yield n._processRpc.call(this,t,e,r))&&(r.control&&(yield this._processRpcControlMessage(t,r.control)),!0)}))}_processRpcControlMessage(t,e){return s(this,void 0,void 0,(function*(){if(!e)return;const r=e.ihave?this._handleIHave(t,e.ihave):[],n=e.iwant?this._handleIWant(t,e.iwant):[],i=e.graft?yield this._handleGraft(t,e.graft):[];if(e.prune&&this._handlePrune(t,e.prune),!r.length&&!n.length&&!i.length)return;const o=d.createGossipRpc(n,{iwant:r,prune:i});this._sendRpc(t,o)}))}_processRpcMessage(t){const e=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return s(this,void 0,void 0,(function*(){let r;if(this.getFastMsgIdStr&&this.fastMsgIdCache){const e=yield this.getFastMsgIdStr(t);if(r=this.fastMsgIdCache.get(e),void 0!==r)return void this.score.duplicateMessage(t,r);r=d.messageIdToString(yield this.getMsgId(t)),this.fastMsgIdCache.put(e,r)}else if(r=d.messageIdToString(yield this.getMsgId(t)),this.seenCache.has(r))return void this.score.duplicateMessage(t,r);this.seenCache.put(r),yield this.score.validateMessage(r),yield e._processRpcMessage.call(this,t)}))}_acceptFrom(t){if(this.direct.has(t))return!0;const e=Date.now(),r=this.acceptFromWhitelist.get(t);if(r&&r.messagesAccepted<w.ACCEPT_FROM_WHITELIST_MAX_MESSAGES&&r.acceptUntil>=e)return r.messagesAccepted+=1,!0;const n=this.score.score(t);return n>=w.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE?this.acceptFromWhitelist.set(t,{messagesAccepted:0,acceptUntil:e+w.ACCEPT_FROM_WHITELIST_DURATION_MS}):this.acceptFromWhitelist.delete(t),n>=this._options.scoreThresholds.graylistThreshold}validate(t){const e=Object.create(null,{validate:{get:()=>super.validate}});return s(this,void 0,void 0,(function*(){try{yield e.validate.call(this,t)}catch(r){const e=yield this.getCanonicalMsgIdStr(t);throw this.score.rejectMessage(t,e,r.code),this.gossipTracer.rejectMessage(e,r.code),r}}))}_handleIHave(t,e){if(!e.length)return[];const r=this.score.score(t);if(r<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",t,r),[];const n=(this.peerhave.get(t)||0)+1;if(this.peerhave.set(t,n),n>h.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",t,n),[];const i=this.iasked.get(t)||0;if(i>=h.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",t,i),[];const o=new Map;if(e.forEach((({topicID:t,messageIDs:e})=>{t&&e&&this.mesh.has(t)&&e.forEach((t=>{const e=d.messageIdToString(t);this.seenCache.has(e)||o.set(e,t)}))})),!o.size)return[];let s=o.size;s+i>h.GossipsubMaxIHaveLength&&(s=h.GossipsubMaxIHaveLength-i),this.log("IHAVE: Asking for %d out of %d messages from %s",s,o.size,t);let a=Array.from(o.values());return d.shuffle(a),a=a.slice(0,s),this.iasked.set(t,i+s),this.gossipTracer.addPromise(t,a),[{messageIDs:a}]}_handleIWant(t,e){if(!e.length)return[];const r=this.score.score(t);if(r<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",t,r),[];const n=new Map;return e.forEach((({messageIDs:e})=>{e&&e.forEach((e=>{const r=d.messageIdToString(e),[i,o]=this.messageCache.getForPeer(r,t);i&&(o>h.GossipsubGossipRetransmission?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",t,e):n.set(r,i))}))})),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,t),Array.from(n.values()).map(a.utils.normalizeOutRpcMessage)):[]}_handleGraft(t,e){return s(this,void 0,void 0,(function*(){const r=[],n=this.score.score(t),i=this._now();let o=this._options.doPX;return e.forEach((({topicID:e})=>{var s;if(!e)return;const a=this.mesh.get(e);if(!a)return void(o=!1);if(a.has(t))return;if(this.direct.has(t))return this.log("GRAFT: ignoring request from direct peer %s",t),r.push(e),void(o=!1);const u=null===(s=this.backoff.get(e))||void 0===s?void 0:s.get(t);if("number"===typeof u&&i<u){this.log("GRAFT: ignoring backed off peer %s",t),this.score.addPenalty(t,1),o=!1;const n=u+h.GossipsubGraftFloodThreshold-h.GossipsubPruneBackoff;return i<n&&this.score.addPenalty(t,1),this._addBackoff(t,e),void r.push(e)}return n<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",t,n,e),r.push(e),o=!1,void this._addBackoff(t,e)):a.size>=this._options.Dhi&&!this.outbound.get(t)?(r.push(e),void this._addBackoff(t,e)):(this.log("GRAFT: Add mesh link from %s in %s",t,e),this.score.graft(t,e),void a.add(t))})),r.length?Promise.all(r.map((e=>this._makePrune(t,e,o)))):[]}))}_handlePrune(t,e){const r=this.score.score(t);e.forEach((({topicID:e,backoff:n,peers:i})=>{if(!e)return;const o=this.mesh.get(e);if(o&&(this.log("PRUNE: Remove mesh link to %s in %s",t,e),this.score.prune(t,e),o.delete(t),"number"===typeof n&&n>0?this._doAddBackoff(t,e,1e3*n):this._addBackoff(t,e),i&&i.length)){if(r<this._options.scoreThresholds.acceptPXThreshold)return void this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",t,r,e);this._pxConnect(i)}}))}_addBackoff(t,e){this._doAddBackoff(t,e,h.GossipsubPruneBackoff)}_doAddBackoff(t,e,r){let n=this.backoff.get(e);n||(n=new Map,this.backoff.set(e,n));const i=this._now()+r,o=n.get(t)||0;o<i&&n.set(t,i)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((t,e)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",e,t),this.score.addPenalty(e,t)}))}_clearBackoff(){if(this.heartbeatTicks%h.GossipsubPruneBackoffTicks!==0)return;const t=this._now();this.backoff.forEach(((e,r)=>{e.forEach(((r,n)=>{r<t&&e.delete(n)})),0===e.size&&this.backoff.delete(r)}))}_directConnect(){if(this.heartbeatTicks%h.GossipsubDirectConnectTicks!==0)return;const t=[];this.direct.forEach((e=>{const r=this.peers.get(e);r&&r.isWritable||t.push(e)})),t.length&&t.forEach((t=>{this._connect(t)}))}_pxConnect(t){return s(this,void 0,void 0,(function*(){t.length>h.GossipsubPrunePeers&&(d.shuffle(t),t=t.slice(0,h.GossipsubPrunePeers));const e=[];yield Promise.all(t.map((t=>s(this,void 0,void 0,(function*(){if(!t.peerID)return;const r=m.createFromBytes(t.peerID),n=r.toB58String();if(!this.peers.has(n))if(t.signedPeerRecord)try{const r=yield b.openAndCertify(t.signedPeerRecord,"libp2p-peer-record"),i=r.peerId.toB58String();if(n!==i)return void this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",i,n);if(!this._libp2p.peerStore.addressBook.consumePeerRecord(r))return void this.log("bogus peer record obtained through px: could not add peer record to address book");e.push(n)}catch(i){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else e.push(n)}))))),e.length&&e.forEach((t=>this._connect(t)))}))}start(){const t=Object.create(null,{start:{get:()=>super.start}});return s(this,void 0,void 0,(function*(){yield t.start.call(this),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout((()=>{this.direct.forEach((t=>{this._connect(t)}))}),h.GossipsubDirectConnectInitialDelay)}))}stop(){const t=Object.create(null,{stop:{get:()=>super.stop}});return s(this,void 0,void 0,(function*(){yield t.stop.call(this),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),clearTimeout(this._directPeerInitial)}))}_connect(t){this.log("Initiating connection with %s",t),this._libp2p.dialProtocol(m.createFromB58String(t),this.multicodecs)}subscribe(t){super.subscribe(t),this.join(t)}unsubscribe(t){super.unsubscribe(t),this.leave(t)}join(t){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",t);const e=this.fanout.get(t);if(e)e.forEach((t=>{this.score.score(t)<0&&e.delete(t)})),e.size<this._options.D&&f.getGossipPeers(this,t,this._options.D-e.size,(t=>!e.has(t)&&!this.direct.has(t)&&this.score.score(t)>=0)).forEach((t=>e.add(t))),this.mesh.set(t,e),this.fanout.delete(t),this.lastpub.delete(t);else{const e=f.getGossipPeers(this,t,this._options.D,(t=>!this.direct.has(t)&&this.score.score(t)>=0));this.mesh.set(t,e)}this.mesh.get(t).forEach((e=>{this.log("JOIN: Add mesh link to %s in %s",e,t),this._sendGraft(e,t)}))}leave(t){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",t);const e=this.mesh.get(t);e&&(e.forEach((e=>{this.log("LEAVE: Remove mesh link to %s in %s",e,t),this._sendPrune(e,t)})),this.mesh.delete(t))}getCanonicalMsgIdStr(t){var e,r;return s(this,void 0,void 0,(function*(){return this.fastMsgIdCache&&this.getFastMsgIdStr&&null!==(r=null!==(e=this.getCachedMsgIdStr(t))&&void 0!==e?e:this.fastMsgIdCache.get(this.getFastMsgIdStr(t)))&&void 0!==r?r:d.messageIdToString(yield this.getMsgId(t))}))}getCachedMsgIdStr(t){}_publish(t){return s(this,void 0,void 0,(function*(){const e=yield this.getCanonicalMsgIdStr(t);t.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(t,e),this.gossipTracer.deliverMessage(e)),this.seenCache.put(e),this.messageCache.put(t,e);const r=new Set;t.topicIDs.forEach((e=>{const n=this.topics.get(e);if(n)if(this._options.floodPublish&&t.from===this.peerId.toB58String())n.forEach((t=>{(this.direct.has(t)||this.score.score(t)>=this._options.scoreThresholds.publishThreshold)&&r.add(t)}));else{this.direct.forEach((t=>{r.add(t)})),n.forEach((t=>{const e=this.score.score(t),n=this.peers.get(t);n&&n.protocol===h.FloodsubID&&e>=this._options.scoreThresholds.publishThreshold&&r.add(t)}));let t=this.mesh.get(e);if(!t||!t.size){if(t=this.fanout.get(e),!t){const r=f.getGossipPeers(this,e,this._options.D,(t=>this.score.score(t)>=this._options.scoreThresholds.publishThreshold));r.size>0?(t=r,this.fanout.set(e,r)):t=new Set}this.lastpub.set(e,this._now())}t.forEach((t=>{r.add(t)}))}}));const n=d.createGossipRpc([a.utils.normalizeOutRpcMessage(t)]);r.forEach((e=>{e!==t.from&&this._sendRpc(e,n)}))}))}_sendGraft(t,e){const r=[{topicID:e}],n=d.createGossipRpc([],{graft:r});this._sendRpc(t,n)}_sendPrune(t,e){return s(this,void 0,void 0,(function*(){const r=[yield this._makePrune(t,e,this._options.doPX)],n=d.createGossipRpc([],{prune:r});this._sendRpc(t,n)}))}_sendRpc(t,e){const r=this.peers.get(t);if(!r||!r.isWritable)return;const n=this.control.get(t);n&&(this._piggybackControl(t,e,n),this.control.delete(t));const i=this.gossip.get(t);i&&(this._piggybackGossip(t,e,i),this.gossip.delete(t)),r.write(c.RPC.encode(e).finish())}_piggybackControl(t,e,r){const n=(r.graft||[]).filter((({topicID:e})=>(e&&this.mesh.get(e)||new Set).has(t))),i=(r.prune||[]).filter((({topicID:e})=>!(e&&this.mesh.get(e)||new Set).has(t)));(n.length||i.length)&&(e.control?(e.control.graft=e.control.graft&&e.control.graft.concat(n),e.control.prune=e.control.prune&&e.control.prune.concat(i)):e.control={ihave:[],iwant:[],graft:n,prune:i})}_piggybackGossip(t,e,r){e.control||(e.control={ihave:[],iwant:[],graft:[],prune:[]}),e.control.ihave=r}_sendGraftPrune(t,e,r){return s(this,void 0,void 0,(function*(){const n=this._options.doPX;for(const[i,o]of t){const t=o.map((t=>({topicID:t})));let s=[];const a=e.get(i);a&&(s=yield Promise.all(a.map((t=>this._makePrune(i,t,n&&!r.get(i))))),e.delete(i));const u=d.createGossipRpc([],{graft:t,prune:s});this._sendRpc(i,u)}for(const[t,i]of e){const e=yield Promise.all(i.map((e=>this._makePrune(t,e,n&&!r.get(t))))),o=d.createGossipRpc([],{prune:e});this._sendRpc(t,o)}}))}_emitGossip(t,e){const r=this.messageCache.getGossipIDs(t);if(!r.length)return;d.shuffle(r),r.length>h.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length);const n=[],i=this.topics.get(t);if(!i)return;i.forEach((t=>{const r=this.peers.get(t);r&&!e.has(t)&&!this.direct.has(t)&&d.hasGossipProtocol(r.protocol)&&this.score.score(t)>=this._options.scoreThresholds.gossipThreshold&&n.push(t)}));let o=this._options.Dlazy;const s=h.GossipsubGossipFactor*n.length;s>o&&(o=s),o>n.length?o=n.length:d.shuffle(n),n.slice(0,o).forEach((e=>{let n=r;r.length>h.GossipsubMaxIHaveLength&&(n=d.shuffle(n.slice()).slice(0,h.GossipsubMaxIHaveLength)),this._pushGossip(e,{topicID:t,messageIDs:n})}))}_flush(){for(const[t,e]of this.gossip.entries()){this.gossip.delete(t);const r=d.createGossipRpc([],{ihave:e});this._sendRpc(t,r)}for(const[t,e]of this.control.entries()){this.control.delete(t);const r=d.createGossipRpc([],{graft:e.graft,prune:e.prune});this._sendRpc(t,r)}}_pushGossip(t,e){this.log("Add gossip to %s",t);const r=this.gossip.get(t)||[];this.gossip.set(t,r.concat(e))}_now(){return Date.now()}_makePrune(t,e,r){return s(this,void 0,void 0,(function*(){if(this.peers.get(t).protocol===h.GossipsubIDv10)return{topicID:e,peers:[]};const n=h.GossipsubPruneBackoff/1e3;if(!r)return{topicID:e,peers:[],backoff:n};const i=f.getGossipPeers(this,e,h.GossipsubPrunePeers,(e=>e!==t&&this.score.score(e)>=0)),o=yield Promise.all(Array.from(i).map((t=>s(this,void 0,void 0,(function*(){const e=m.createFromB58String(t);return{peerID:e.toBytes(),signedPeerRecord:yield this._libp2p.peerStore.addressBook.getRawEnvelope(e)}})))));return{topicID:e,peers:o,backoff:n}}))}}v.multicodec=h.GossipsubIDv11,t.exports=v},90729:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageCache=void 0;const i=r(49188);class o{constructor(t,e){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let r=0;r<e;r++)this.history[r]=[];this.gossip=t}put(t,e){return n(this,void 0,void 0,(function*(){this.msgs.set(e,t);const r=i.messageIdFromString(e);this.history[0].push({msgId:r,topics:t.topicIDs})}))}get(t){return this.msgs.get(i.messageIdToString(t))}getForPeer(t,e){const r=this.msgs.get(t);if(!r)return[void 0,0];let n=this.peertx.get(t);n||(n=new Map,this.peertx.set(t,n));const i=(n.get(e)||0)+1;return n.set(e,i),[r,i]}getGossipIDs(t){const e=[];for(let r=0;r<this.gossip;r++)this.history[r].forEach((r=>{for(const n of r.topics)if(n===t){e.push(r.msgId);break}}));return e}shift(){const t=this.history[this.history.length-1];t.forEach((t=>{const e=i.messageIdToString(t.msgId);this.msgs.delete(e),this.peertx.delete(e)})),this.history.pop(),this.history.unshift([])}}e.MessageCache=o},32469:function(t,e,r){var n,i,o;r(21703),function(s,a){i=[r(86425)],n=a,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o)}(0,(function(t){"use strict";var e=t.Reader,r=t.Writer,n=t.util,i=t.roots["default"]||(t.roots["default"]={});return i.RPC=function(){function o(t){if(this.subscriptions=[],this.msgs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.subscriptions=n.emptyArray,o.prototype.msgs=n.emptyArray,o.prototype.control=null,Object.defineProperty(o.prototype,"_control",{get:n.oneOfGetter(s=["control"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){if(e||(e=r.create()),null!=t.subscriptions&&t.subscriptions.length)for(var n=0;n<t.subscriptions.length;++n)i.RPC.SubOpts.encode(t.subscriptions[n],e.uint32(10).fork()).ldelim();if(null!=t.msgs&&t.msgs.length)for(n=0;n<t.msgs.length;++n)i.RPC.Message.encode(t.msgs[n],e.uint32(18).fork()).ldelim();return null!=t.control&&Object.hasOwnProperty.call(t,"control")&&i.RPC.ControlMessage.encode(t.control,e.uint32(26).fork()).ldelim(),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.subscriptions&&o.subscriptions.length||(o.subscriptions=[]),o.subscriptions.push(i.RPC.SubOpts.decode(t,t.uint32()));break;case 2:o.msgs&&o.msgs.length||(o.msgs=[]),o.msgs.push(i.RPC.Message.decode(t,t.uint32()));break;case 3:o.control=i.RPC.ControlMessage.decode(t,t.uint32());break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC)return t;var e=new i.RPC;if(t.subscriptions){if(!Array.isArray(t.subscriptions))throw TypeError(".RPC.subscriptions: array expected");e.subscriptions=[];for(var r=0;r<t.subscriptions.length;++r){if("object"!==typeof t.subscriptions[r])throw TypeError(".RPC.subscriptions: object expected");e.subscriptions[r]=i.RPC.SubOpts.fromObject(t.subscriptions[r])}}if(t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".RPC.msgs: array expected");e.msgs=[];for(r=0;r<t.msgs.length;++r){if("object"!==typeof t.msgs[r])throw TypeError(".RPC.msgs: object expected");e.msgs[r]=i.RPC.Message.fromObject(t.msgs[r])}}if(null!=t.control){if("object"!==typeof t.control)throw TypeError(".RPC.control: object expected");e.control=i.RPC.ControlMessage.fromObject(t.control)}return e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.subscriptions=[],r.msgs=[]),t.subscriptions&&t.subscriptions.length){r.subscriptions=[];for(var n=0;n<t.subscriptions.length;++n)r.subscriptions[n]=i.RPC.SubOpts.toObject(t.subscriptions[n],e)}if(t.msgs&&t.msgs.length){r.msgs=[];for(n=0;n<t.msgs.length;++n)r.msgs[n]=i.RPC.Message.toObject(t.msgs[n],e)}return null!=t.control&&t.hasOwnProperty("control")&&(r.control=i.RPC.ControlMessage.toObject(t.control,e),e.oneofs&&(r._control="control")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o.SubOpts=function(){function o(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.subscribe=null,o.prototype.topicID=null,Object.defineProperty(o.prototype,"_subscribe",{get:n.oneOfGetter(s=["subscribe"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_topicID",{get:n.oneOfGetter(s=["topicID"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){return e||(e=r.create()),null!=t.subscribe&&Object.hasOwnProperty.call(t,"subscribe")&&e.uint32(8).bool(t.subscribe),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(18).string(t.topicID),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC.SubOpts;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.subscribe=t.bool();break;case 2:o.topicID=t.string();break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC.SubOpts)return t;var e=new i.RPC.SubOpts;return null!=t.subscribe&&(e.subscribe=Boolean(t.subscribe)),null!=t.topicID&&(e.topicID=String(t.topicID)),e},o.toObject=function(t,e){e||(e={});var r={};return null!=t.subscribe&&t.hasOwnProperty("subscribe")&&(r.subscribe=t.subscribe,e.oneofs&&(r._subscribe="subscribe")),null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.Message=function(){function o(t){if(this.topicIDs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.from=null,o.prototype.data=null,o.prototype.seqno=null,o.prototype.topicIDs=n.emptyArray,o.prototype.signature=null,o.prototype.key=null,Object.defineProperty(o.prototype,"_from",{get:n.oneOfGetter(s=["from"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_data",{get:n.oneOfGetter(s=["data"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_seqno",{get:n.oneOfGetter(s=["seqno"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_signature",{get:n.oneOfGetter(s=["signature"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_key",{get:n.oneOfGetter(s=["key"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){if(e||(e=r.create()),null!=t.from&&Object.hasOwnProperty.call(t,"from")&&e.uint32(10).bytes(t.from),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),null!=t.seqno&&Object.hasOwnProperty.call(t,"seqno")&&e.uint32(26).bytes(t.seqno),null!=t.topicIDs&&t.topicIDs.length)for(var n=0;n<t.topicIDs.length;++n)e.uint32(34).string(t.topicIDs[n]);return null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(50).bytes(t.key),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC.Message;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.from=t.bytes();break;case 2:o.data=t.bytes();break;case 3:o.seqno=t.bytes();break;case 4:o.topicIDs&&o.topicIDs.length||(o.topicIDs=[]),o.topicIDs.push(t.string());break;case 5:o.signature=t.bytes();break;case 6:o.key=t.bytes();break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC.Message)return t;var e=new i.RPC.Message;if(null!=t.from&&("string"===typeof t.from?n.base64.decode(t.from,e.from=n.newBuffer(n.base64.length(t.from)),0):t.from.length&&(e.from=t.from)),null!=t.data&&("string"===typeof t.data?n.base64.decode(t.data,e.data=n.newBuffer(n.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),null!=t.seqno&&("string"===typeof t.seqno?n.base64.decode(t.seqno,e.seqno=n.newBuffer(n.base64.length(t.seqno)),0):t.seqno.length&&(e.seqno=t.seqno)),t.topicIDs){if(!Array.isArray(t.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");e.topicIDs=[];for(var r=0;r<t.topicIDs.length;++r)e.topicIDs[r]=String(t.topicIDs[r])}return null!=t.signature&&("string"===typeof t.signature?n.base64.decode(t.signature,e.signature=n.newBuffer(n.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),null!=t.key&&("string"===typeof t.key?n.base64.decode(t.key,e.key=n.newBuffer(n.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.topicIDs=[]),null!=t.from&&t.hasOwnProperty("from")&&(r.from=e.bytes===String?n.base64.encode(t.from,0,t.from.length):e.bytes===Array?Array.prototype.slice.call(t.from):t.from,e.oneofs&&(r._from="from")),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?n.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data,e.oneofs&&(r._data="data")),null!=t.seqno&&t.hasOwnProperty("seqno")&&(r.seqno=e.bytes===String?n.base64.encode(t.seqno,0,t.seqno.length):e.bytes===Array?Array.prototype.slice.call(t.seqno):t.seqno,e.oneofs&&(r._seqno="seqno")),t.topicIDs&&t.topicIDs.length){r.topicIDs=[];for(var i=0;i<t.topicIDs.length;++i)r.topicIDs[i]=t.topicIDs[i]}return null!=t.signature&&t.hasOwnProperty("signature")&&(r.signature=e.bytes===String?n.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature,e.oneofs&&(r._signature="signature")),null!=t.key&&t.hasOwnProperty("key")&&(r.key=e.bytes===String?n.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key,e.oneofs&&(r._key="key")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlMessage=function(){function o(t){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return o.prototype.ihave=n.emptyArray,o.prototype.iwant=n.emptyArray,o.prototype.graft=n.emptyArray,o.prototype.prune=n.emptyArray,o.encode=function(t,e){if(e||(e=r.create()),null!=t.ihave&&t.ihave.length)for(var n=0;n<t.ihave.length;++n)i.RPC.ControlIHave.encode(t.ihave[n],e.uint32(10).fork()).ldelim();if(null!=t.iwant&&t.iwant.length)for(n=0;n<t.iwant.length;++n)i.RPC.ControlIWant.encode(t.iwant[n],e.uint32(18).fork()).ldelim();if(null!=t.graft&&t.graft.length)for(n=0;n<t.graft.length;++n)i.RPC.ControlGraft.encode(t.graft[n],e.uint32(26).fork()).ldelim();if(null!=t.prune&&t.prune.length)for(n=0;n<t.prune.length;++n)i.RPC.ControlPrune.encode(t.prune[n],e.uint32(34).fork()).ldelim();return e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlMessage;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.ihave&&o.ihave.length||(o.ihave=[]),o.ihave.push(i.RPC.ControlIHave.decode(t,t.uint32()));break;case 2:o.iwant&&o.iwant.length||(o.iwant=[]),o.iwant.push(i.RPC.ControlIWant.decode(t,t.uint32()));break;case 3:o.graft&&o.graft.length||(o.graft=[]),o.graft.push(i.RPC.ControlGraft.decode(t,t.uint32()));break;case 4:o.prune&&o.prune.length||(o.prune=[]),o.prune.push(i.RPC.ControlPrune.decode(t,t.uint32()));break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlMessage)return t;var e=new i.RPC.ControlMessage;if(t.ihave){if(!Array.isArray(t.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");e.ihave=[];for(var r=0;r<t.ihave.length;++r){if("object"!==typeof t.ihave[r])throw TypeError(".RPC.ControlMessage.ihave: object expected");e.ihave[r]=i.RPC.ControlIHave.fromObject(t.ihave[r])}}if(t.iwant){if(!Array.isArray(t.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");e.iwant=[];for(r=0;r<t.iwant.length;++r){if("object"!==typeof t.iwant[r])throw TypeError(".RPC.ControlMessage.iwant: object expected");e.iwant[r]=i.RPC.ControlIWant.fromObject(t.iwant[r])}}if(t.graft){if(!Array.isArray(t.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");e.graft=[];for(r=0;r<t.graft.length;++r){if("object"!==typeof t.graft[r])throw TypeError(".RPC.ControlMessage.graft: object expected");e.graft[r]=i.RPC.ControlGraft.fromObject(t.graft[r])}}if(t.prune){if(!Array.isArray(t.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");e.prune=[];for(r=0;r<t.prune.length;++r){if("object"!==typeof t.prune[r])throw TypeError(".RPC.ControlMessage.prune: object expected");e.prune[r]=i.RPC.ControlPrune.fromObject(t.prune[r])}}return e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.ihave=[],r.iwant=[],r.graft=[],r.prune=[]),t.ihave&&t.ihave.length){r.ihave=[];for(var n=0;n<t.ihave.length;++n)r.ihave[n]=i.RPC.ControlIHave.toObject(t.ihave[n],e)}if(t.iwant&&t.iwant.length){r.iwant=[];for(n=0;n<t.iwant.length;++n)r.iwant[n]=i.RPC.ControlIWant.toObject(t.iwant[n],e)}if(t.graft&&t.graft.length){r.graft=[];for(n=0;n<t.graft.length;++n)r.graft[n]=i.RPC.ControlGraft.toObject(t.graft[n],e)}if(t.prune&&t.prune.length){r.prune=[];for(n=0;n<t.prune.length;++n)r.prune[n]=i.RPC.ControlPrune.toObject(t.prune[n],e)}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlIHave=function(){function o(t){if(this.messageIDs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.topicID=null,o.prototype.messageIDs=n.emptyArray,Object.defineProperty(o.prototype,"_topicID",{get:n.oneOfGetter(s=["topicID"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){if(e||(e=r.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),null!=t.messageIDs&&t.messageIDs.length)for(var n=0;n<t.messageIDs.length;++n)e.uint32(18).bytes(t.messageIDs[n]);return e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlIHave;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.topicID=t.string();break;case 2:o.messageIDs&&o.messageIDs.length||(o.messageIDs=[]),o.messageIDs.push(t.bytes());break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlIHave)return t;var e=new i.RPC.ControlIHave;if(null!=t.topicID&&(e.topicID=String(t.topicID)),t.messageIDs){if(!Array.isArray(t.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");e.messageIDs=[];for(var r=0;r<t.messageIDs.length;++r)"string"===typeof t.messageIDs[r]?n.base64.decode(t.messageIDs[r],e.messageIDs[r]=n.newBuffer(n.base64.length(t.messageIDs[r])),0):t.messageIDs[r].length&&(e.messageIDs[r]=t.messageIDs[r])}return e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.messageIDs=[]),null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),t.messageIDs&&t.messageIDs.length){r.messageIDs=[];for(var i=0;i<t.messageIDs.length;++i)r.messageIDs[i]=e.bytes===String?n.base64.encode(t.messageIDs[i],0,t.messageIDs[i].length):e.bytes===Array?Array.prototype.slice.call(t.messageIDs[i]):t.messageIDs[i]}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlIWant=function(){function o(t){if(this.messageIDs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return o.prototype.messageIDs=n.emptyArray,o.encode=function(t,e){if(e||(e=r.create()),null!=t.messageIDs&&t.messageIDs.length)for(var n=0;n<t.messageIDs.length;++n)e.uint32(10).bytes(t.messageIDs[n]);return e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlIWant;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.messageIDs&&o.messageIDs.length||(o.messageIDs=[]),o.messageIDs.push(t.bytes());break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlIWant)return t;var e=new i.RPC.ControlIWant;if(t.messageIDs){if(!Array.isArray(t.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");e.messageIDs=[];for(var r=0;r<t.messageIDs.length;++r)"string"===typeof t.messageIDs[r]?n.base64.decode(t.messageIDs[r],e.messageIDs[r]=n.newBuffer(n.base64.length(t.messageIDs[r])),0):t.messageIDs[r].length&&(e.messageIDs[r]=t.messageIDs[r])}return e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.messageIDs=[]),t.messageIDs&&t.messageIDs.length){r.messageIDs=[];for(var i=0;i<t.messageIDs.length;++i)r.messageIDs[i]=e.bytes===String?n.base64.encode(t.messageIDs[i],0,t.messageIDs[i].length):e.bytes===Array?Array.prototype.slice.call(t.messageIDs[i]):t.messageIDs[i]}return r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlGraft=function(){function o(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.topicID=null,Object.defineProperty(o.prototype,"_topicID",{get:n.oneOfGetter(s=["topicID"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){return e||(e=r.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlGraft;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.topicID=t.string();break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlGraft)return t;var e=new i.RPC.ControlGraft;return null!=t.topicID&&(e.topicID=String(t.topicID)),e},o.toObject=function(t,e){e||(e={});var r={};return null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.ControlPrune=function(){function o(t){if(this.peers=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.topicID=null,o.prototype.peers=n.emptyArray,o.prototype.backoff=null,Object.defineProperty(o.prototype,"_topicID",{get:n.oneOfGetter(s=["topicID"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_backoff",{get:n.oneOfGetter(s=["backoff"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){if(e||(e=r.create()),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(10).string(t.topicID),null!=t.peers&&t.peers.length)for(var n=0;n<t.peers.length;++n)i.RPC.PeerInfo.encode(t.peers[n],e.uint32(18).fork()).ldelim();return null!=t.backoff&&Object.hasOwnProperty.call(t,"backoff")&&e.uint32(24).uint64(t.backoff),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC.ControlPrune;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.topicID=t.string();break;case 2:o.peers&&o.peers.length||(o.peers=[]),o.peers.push(i.RPC.PeerInfo.decode(t,t.uint32()));break;case 3:o.backoff=t.uint64();break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC.ControlPrune)return t;var e=new i.RPC.ControlPrune;if(null!=t.topicID&&(e.topicID=String(t.topicID)),t.peers){if(!Array.isArray(t.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");e.peers=[];for(var r=0;r<t.peers.length;++r){if("object"!==typeof t.peers[r])throw TypeError(".RPC.ControlPrune.peers: object expected");e.peers[r]=i.RPC.PeerInfo.fromObject(t.peers[r])}}return null!=t.backoff&&(n.Long?(e.backoff=n.Long.fromValue(t.backoff)).unsigned=!0:"string"===typeof t.backoff?e.backoff=parseInt(t.backoff,10):"number"===typeof t.backoff?e.backoff=t.backoff:"object"===typeof t.backoff&&(e.backoff=new n.LongBits(t.backoff.low>>>0,t.backoff.high>>>0).toNumber(!0))),e},o.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.peers=[]),null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),t.peers&&t.peers.length){r.peers=[];for(var o=0;o<t.peers.length;++o)r.peers[o]=i.RPC.PeerInfo.toObject(t.peers[o],e)}return null!=t.backoff&&t.hasOwnProperty("backoff")&&("number"===typeof t.backoff?r.backoff=e.longs===String?String(t.backoff):t.backoff:r.backoff=e.longs===String?n.Long.prototype.toString.call(t.backoff):e.longs===Number?new n.LongBits(t.backoff.low>>>0,t.backoff.high>>>0).toNumber(!0):t.backoff,e.oneofs&&(r._backoff="backoff")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o.PeerInfo=function(){function o(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var s;return o.prototype.peerID=null,o.prototype.signedPeerRecord=null,Object.defineProperty(o.prototype,"_peerID",{get:n.oneOfGetter(s=["peerID"]),set:n.oneOfSetter(s)}),Object.defineProperty(o.prototype,"_signedPeerRecord",{get:n.oneOfGetter(s=["signedPeerRecord"]),set:n.oneOfSetter(s)}),o.encode=function(t,e){return e||(e=r.create()),null!=t.peerID&&Object.hasOwnProperty.call(t,"peerID")&&e.uint32(10).bytes(t.peerID),null!=t.signedPeerRecord&&Object.hasOwnProperty.call(t,"signedPeerRecord")&&e.uint32(18).bytes(t.signedPeerRecord),e},o.decode=function(t,r){t instanceof e||(t=e.create(t));var n=void 0===r?t.len:t.pos+r,o=new i.RPC.PeerInfo;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:o.peerID=t.bytes();break;case 2:o.signedPeerRecord=t.bytes();break;default:t.skipType(7&s);break}}return o},o.fromObject=function(t){if(t instanceof i.RPC.PeerInfo)return t;var e=new i.RPC.PeerInfo;return null!=t.peerID&&("string"===typeof t.peerID?n.base64.decode(t.peerID,e.peerID=n.newBuffer(n.base64.length(t.peerID)),0):t.peerID.length&&(e.peerID=t.peerID)),null!=t.signedPeerRecord&&("string"===typeof t.signedPeerRecord?n.base64.decode(t.signedPeerRecord,e.signedPeerRecord=n.newBuffer(n.base64.length(t.signedPeerRecord)),0):t.signedPeerRecord.length&&(e.signedPeerRecord=t.signedPeerRecord)),e},o.toObject=function(t,e){e||(e={});var r={};return null!=t.peerID&&t.hasOwnProperty("peerID")&&(r.peerID=e.bytes===String?n.base64.encode(t.peerID,0,t.peerID.length):e.bytes===Array?Array.prototype.slice.call(t.peerID):t.peerID,e.oneofs&&(r._peerID="peerID")),null!=t.signedPeerRecord&&t.hasOwnProperty("signedPeerRecord")&&(r.signedPeerRecord=e.bytes===String?n.base64.encode(t.signedPeerRecord,0,t.signedPeerRecord.length):e.bytes===Array?Array.prototype.slice.call(t.signedPeerRecord):t.signedPeerRecord,e.oneofs&&(r._signedPeerRecord="signedPeerRecord")),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),o}(),i}))},64310:function(t,e){"use strict";function r(t,e,r,n){let i=0;Object.entries(e.topics).forEach((([t,e])=>{const n=r.topics[t];if(!n)return;let o=0;if(e.inMesh){let t=e.meshTime/n.timeInMeshQuantum;t>n.timeInMeshCap&&(t=n.timeInMeshCap),o+=t*n.timeInMeshWeight}const s=e.firstMessageDeliveries;if(o+=s*n.firstMessageDeliveriesWeight,e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<n.meshMessageDeliveriesThreshold){const t=n.meshMessageDeliveriesThreshold-e.meshMessageDeliveries,r=t*t;o+=r*n.meshMessageDeliveriesWeight}const a=e.meshFailurePenalty;o+=a*n.meshFailurePenaltyWeight;const u=e.invalidMessageDeliveries*e.invalidMessageDeliveries;o+=u*n.invalidMessageDeliveriesWeight,i+=o*n.topicWeight})),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);const o=r.appSpecificScore(t);i+=o*r.appSpecificWeight,e.ips.forEach((t=>{if(r.IPColocationFactorWhitelist.has(t))return;const e=n.get(t),o=e?e.size:0;if(o>r.IPColocationFactorThreshold){const t=o-r.IPColocationFactorThreshold,e=t*t;i+=e*r.IPColocationFactorWeight}}));const s=e.behaviourPenalty*e.behaviourPenalty;return i+=s*r.behaviourPenaltyWeight,i}Object.defineProperty(e,"__esModule",{value:!0}),e.computeScore=void 0,e.computeScore=r},72216:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERR_INVALID_PEER_SCORE_THRESHOLDS=e.ERR_INVALID_PEER_SCORE_PARAMS=void 0,e.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS",e.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"},19006:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(69156),e),i(r(28628),e),i(r(98560),e)},87632:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDeliveries=e.DeliveryRecordStatus=void 0;const i=r(13756),o=n(r(10482));var s;(function(t){t[t["unknown"]=0]="unknown",t[t["valid"]=1]="valid",t[t["invalid"]=2]="invalid",t[t["ignored"]=3]="ignored"})(s=e.DeliveryRecordStatus||(e.DeliveryRecordStatus={}));class a{constructor(){this.records=new Map,this.queue=new o.default}ensureRecord(t){let e=this.records.get(t);if(e)return e;e={status:s.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(t,e);const r={msgId:t,expire:Date.now()+i.TimeCacheDuration};return this.queue.push(r),e}gc(){const t=Date.now();let e=this.queue.peekFront();while(e&&e.expire<t)this.records.delete(e.msgId),this.queue.shift(),e=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}e.MessageDeliveries=a},69156:function(t,e,r){"use strict";r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopicScoreParams=e.validatePeerScoreParams=e.createTopicScoreParams=e.createPeerScoreParams=e.defaultTopicScoreParams=e.defaultPeerScoreParams=void 0;const n=r(72216),i=r(19998);function o(t={}){return Object.assign(Object.assign(Object.assign({},e.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce(((t,[e,r])=>(t[e]=s(r),t)),{}):{}})}function s(t={}){return Object.assign(Object.assign({},e.defaultTopicScoreParams),t)}function a(t){for(const[r,o]of Object.entries(t.topics))try{u(o)}catch(e){throw i(new Error(`invalid score parameters for topic ${r}: ${e.message}`),n.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw i(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(null===t.appSpecificScore||void 0===t.appSpecificScore)throw i(new Error("missing application specific score function"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw i(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.IPColocationFactorWeight&&t.IPColocationFactorThreshold<1)throw i(new Error("invalid IPColocationFactorThreshold; must be at least 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw i(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.behaviourPenaltyWeight&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw i(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw i(new Error("invalid DecayInterval; must be at least 1s"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw i(new Error("invalid DecayToZero; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS)}function u(t){if(t.topicWeight<0)throw i(new Error("invalid topic weight; must be >= 0"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0===t.timeInMeshQuantum)throw i(new Error("invalid TimeInMeshQuantum; must be non zero"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw i(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.timeInMeshWeight&&t.timeInMeshQuantum<=0)throw i(new Error("invalid TimeInMeshQuantum; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.timeInMeshWeight&&t.timeInMeshCap<=0)throw i(new Error("invalid TimeInMeshCap; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw i(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.firstMessageDeliveriesWeight&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw i(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.firstMessageDeliveriesWeight&&t.firstMessageDeliveriesCap<=0)throw i(new Error("invalid FirstMessageDeliveriesCap; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw i(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw i(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesCap<=0)throw i(new Error("invalid MeshMessageDeliveriesCap; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesThreshold<=0)throw i(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw i(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshMessageDeliveriesWeight&&t.meshMessageDeliveriesActivation<1e3)throw i(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw i(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(0!==t.meshFailurePenaltyWeight&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw i(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw i(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),n.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw i(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),n.ERR_INVALID_PEER_SCORE_PARAMS)}e.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},e.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3},e.createPeerScoreParams=o,e.createTopicScoreParams=s,e.validatePeerScoreParams=a,e.validateTopicScoreParams=u},28628:function(t,e,r){"use strict";r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.validatePeerScoreThresholds=e.createPeerScoreThresholds=e.defaultPeerScoreThresholds=void 0;const n=r(72216),i=r(19998);function o(t={}){return Object.assign(Object.assign({},e.defaultPeerScoreThresholds),t)}function s(t){if(t.gossipThreshold>0)throw i(new Error("invalid gossip threshold; it must be <= 0"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw i(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw i(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw i(new Error("invalid accept PX threshold; it must be >= 0"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw i(new Error("invalid opportunistic grafting threshold; it must be >= 0"),n.ERR_INVALID_PEER_SCORE_THRESHOLDS)}e.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20},e.createPeerScoreThresholds=o,e.validatePeerScoreThresholds=s},98560:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PeerScore=void 0;const o=r(69156),s=r(2493),a=r(64310),u=r(87632),c=r(13756),h=i(r(68292)),l=r(15652),f=r(44405),{ERR_INVALID_SIGNATURE:d,ERR_MISSING_SIGNATURE:p}=f.codes,y=l("libp2p:gossipsub:score");class g{constructor(t,e){o.validatePeerScoreParams(t),this.params=t,this._connectionManager=e,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new u.MessageDeliveries}start(){this._backgroundInterval?y("Peer score already running"):(this._backgroundInterval=setInterval((()=>this.background()),this.params.decayInterval),y("started"))}stop(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),y("stopped")):y("Peer score already stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){const t=Date.now(),e=this.params.decayToZero;this.peerStats.forEach(((r,n)=>{r.connected?(Object.entries(r.topics).forEach((([r,n])=>{const i=this.params.topics[r];i&&(n.firstMessageDeliveries*=i.firstMessageDeliveriesDecay,n.firstMessageDeliveries<e&&(n.firstMessageDeliveries=0),n.meshMessageDeliveries*=i.meshMessageDeliveriesDecay,n.meshMessageDeliveries<e&&(n.meshMessageDeliveries=0),n.meshFailurePenalty*=i.meshFailurePenaltyDecay,n.meshFailurePenalty<e&&(n.meshFailurePenalty=0),n.invalidMessageDeliveries*=i.invalidMessageDeliveriesDecay,n.invalidMessageDeliveries<e&&(n.invalidMessageDeliveries=0),n.inMesh&&(n.meshTime=t-n.graftTime,n.meshTime>i.meshMessageDeliveriesActivation&&(n.meshMessageDeliveriesActive=!0)))})),r.behaviourPenalty*=this.params.behaviourPenaltyDecay,r.behaviourPenalty<e&&(r.behaviourPenalty=0),this.scoreCache.set(n,{score:null,cacheUntil:0})):t>r.expire&&(this._removeIPs(n,r.ips),this.peerStats.delete(n))}))}score(t){const e=this.peerStats.get(t);if(!e)return 0;const r=Date.now();let n=this.scoreCache.get(t);void 0===n&&(n={score:null,cacheUntil:0},this.scoreCache.set(t,n));const{score:i,cacheUntil:o}=n;return o>r&&null!==i?i:(n.score=a.computeScore(t,e,this.params,this.peerIPs),n.cacheUntil=r+this.params.decayInterval,n.score)}addPenalty(t,e){const r=this.peerStats.get(t);r&&(r.behaviourPenalty+=e,this.scoreCache.set(t,{score:null,cacheUntil:0}))}addPeer(t){const e=s.createPeerStats({connected:!0});this.peerStats.set(t,e);const r=this._getIPs(t);this._setIPs(t,r,e.ips),e.ips=r}removePeer(t){const e=this.peerStats.get(t);if(e){if(this.score(t)>0)return this._removeIPs(t,e.ips),void this.peerStats.delete(t);this.scoreCache.delete(t),Object.entries(e.topics).forEach((([t,e])=>{e.firstMessageDeliveries=0;const r=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.inMesh&&e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<r){const t=r-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.inMesh=!1})),e.connected=!1,e.expire=Date.now()+this.params.retainScore}}graft(t,e){const r=this.peerStats.get(t);if(!r)return;const n=s.ensureTopicStats(e,r,this.params);n&&(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1,this.scoreCache.set(t,{score:null,cacheUntil:0}))}prune(t,e){const r=this.peerStats.get(t);if(!r)return;const n=s.ensureTopicStats(e,r,this.params);if(!n)return;const i=this.params.topics[e].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<i){const t=i-n.meshMessageDeliveries;n.meshFailurePenalty+=t*t}n.inMesh=!1,this.scoreCache.set(t,{score:null,cacheUntil:0})}validateMessage(t){return n(this,void 0,void 0,(function*(){this.deliveryRecords.ensureRecord(t)}))}deliverMessage(t,e){return n(this,void 0,void 0,(function*(){const r=t.receivedFrom;this._markFirstMessageDelivery(r,t);const n=this.deliveryRecords.ensureRecord(e),i=Date.now();n.status===u.DeliveryRecordStatus.unknown?(n.status=u.DeliveryRecordStatus.valid,n.validated=i,n.peers.forEach((e=>{e!==r&&this._markDuplicateMessageDelivery(e,t)}))):y("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",r,i-n.firstSeen,u.DeliveryRecordStatus[n.status])}))}rejectMessage(t,e,r){return n(this,void 0,void 0,(function*(){const n=t.receivedFrom;switch(r){case p:case d:return void this._markInvalidMessageDelivery(n,t)}const i=this.deliveryRecords.ensureRecord(e);if(i.status===u.DeliveryRecordStatus.unknown){switch(r){case c.ERR_TOPIC_VALIDATOR_IGNORE:return void(i.status=u.DeliveryRecordStatus.ignored)}i.status=u.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(n,t),i.peers.forEach((e=>{this._markInvalidMessageDelivery(e,t)}))}else y("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",n,Date.now()-i.firstSeen,u.DeliveryRecordStatus[i.status])}))}duplicateMessage(t,e){return n(this,void 0,void 0,(function*(){const r=t.receivedFrom,n=this.deliveryRecords.ensureRecord(e);if(!n.peers.has(r))switch(n.status){case u.DeliveryRecordStatus.unknown:n.peers.add(r);break;case u.DeliveryRecordStatus.valid:n.peers.add(r),this._markDuplicateMessageDelivery(r,t,n.validated);break;case u.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(r,t);break}}))}_markInvalidMessageDelivery(t,e){const r=this.peerStats.get(t);r&&(e.topicIDs.forEach((t=>{const e=s.ensureTopicStats(t,r,this.params);e&&(e.invalidMessageDeliveries+=1)})),this.scoreCache.set(t,{score:null,cacheUntil:0}))}_markFirstMessageDelivery(t,e){const r=this.peerStats.get(t);r&&(e.topicIDs.forEach((t=>{const e=s.ensureTopicStats(t,r,this.params);if(!e)return;let n=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries+=1,e.firstMessageDeliveries>n&&(e.firstMessageDeliveries=n),e.inMesh&&(n=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries+=1,e.meshMessageDeliveries>n&&(e.meshMessageDeliveries=n))})),this.scoreCache.set(t,{score:null,cacheUntil:0}))}_markDuplicateMessageDelivery(t,e,r=0){const n=this.peerStats.get(t);if(!n)return;const i=r?Date.now():0;e.topicIDs.forEach((t=>{const e=s.ensureTopicStats(t,n,this.params);if(!e)return;if(!e.inMesh)return;const o=this.params.topics[t];if(r&&i>r+o.meshMessageDeliveriesWindow)return;const a=o.meshMessageDeliveriesCap;e.meshMessageDeliveries+=1,e.meshMessageDeliveries>a&&(e.meshMessageDeliveries=a)})),this.scoreCache.set(t,{score:null,cacheUntil:0})}_getIPs(t){return this._connectionManager.getAll(h.default.createFromB58String(t)).map((t=>t.remoteAddr.toOptions().host))}_setIPs(t,e,r){t:for(const n of e){for(const t of r)if(n===t)continue t;let e=this.peerIPs.get(n);e||(e=new Set,this.peerIPs.set(n,e)),e.add(t)}t:for(const n of r){for(const t of e)if(n===t)continue t;const r=this.peerIPs.get(n);r&&(r.delete(t),r.size||this.peerIPs.delete(n))}this.scoreCache.set(t,{score:null,cacheUntil:0})}_removeIPs(t,e){e.forEach((e=>{const r=this.peerIPs.get(e);r&&(r.delete(t),r.size||this.peerIPs.delete(e))})),this.scoreCache.set(t,{score:null,cacheUntil:0})}_updateIPs(){this.peerStats.forEach(((t,e)=>{const r=this._getIPs(e);this._setIPs(e,r,t.ips),t.ips=r,this.scoreCache.set(e,{score:null,cacheUntil:0})}))}}e.PeerScore=g},2493:function(t,e){"use strict";function r(t={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce(((t,[e,r])=>(t[e]=n(r),t)),{}):{}})}function n(t={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}function i(t,e,r){let i=e.topics[t];return i||(r.topics[t]?(e.topics[t]=i=n(),i):void 0)}Object.defineProperty(e,"__esModule",{value:!0}),e.ensureTopicStats=e.createTopicStats=e.createPeerStats=void 0,e.createPeerStats=r,e.createTopicStats=n,e.ensureTopicStats=i},303:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.IWantTracer=void 0;const i=r(13756),o=r(49188),s=r(44405),{ERR_INVALID_SIGNATURE:a,ERR_MISSING_SIGNATURE:u}=s.codes;class c{constructor(){this.promises=new Map}addPromise(t,e){const r=Math.floor(Math.random()*e.length),n=e[r],s=o.messageIdToString(n);let a=this.promises.get(s);a||(a=new Map,this.promises.set(s,a)),a.has(t)||a.set(t,Date.now()+i.GossipsubIWantFollowupTime)}getBrokenPromises(){const t=Date.now(),e=new Map;return this.promises.forEach(((r,n)=>{r.forEach(((n,i)=>{n<t&&(e.set(i,(e.get(i)||0)+1),r.delete(i))})),r.size||this.promises.delete(n)})),e}deliverMessage(t){return n(this,void 0,void 0,(function*(){this.promises.delete(t)}))}rejectMessage(t,e){return n(this,void 0,void 0,(function*(){switch(e){case a:case u:return}this.promises.delete(t)}))}clear(){this.promises.clear()}}e.IWantTracer=c},30815:function(t,e){"use strict";function r(t=[],e={}){return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.createGossipRpc=void 0,e.createGossipRpc=r},84116:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasGossipProtocol=void 0;const n=r(13756);function i(t){return t===n.GossipsubIDv10||t===n.GossipsubIDv11}e.hasGossipProtocol=i},49188:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(30815),e),i(r(25595),e),i(r(84116),e),i(r(16161),e)},16161:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.messageIdFromString=e.messageIdToString=void 0;const n=r(92259),i=r(96523);function o(t){return i.toString(t,"base64")}function s(t){return n.fromString(t,"base64")}e.messageIdToString=o,e.messageIdFromString=s},25595:function(t,e){"use strict";function r(t){if(t.length<=1)return t;const e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){const n=e(),i=t[r];t[r]=t[n],t[n]=i}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.shuffle=void 0,e.shuffle=r},96715:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleTimeCache=void 0;class r{constructor(t){this.lastPruneTime=0,this.entries=new Map,this.validityMs=t.validityMs}put(t,e){this.entries.set(t,{value:e,validUntilMs:Date.now()+this.validityMs}),this.prune()}prune(){const t=Date.now();if(!(t-this.lastPruneTime<200)){this.lastPruneTime=t;for(const[e,r]of this.entries.entries()){if(!(r.validUntilMs<t))break;this.entries.delete(e)}}}has(t){return this.entries.has(t)}get(t){const e=this.entries.get(t);return e&&e.validUntilMs>=Date.now()?e.value:void 0}clear(){this.entries=new Map,this.lastPruneTime=0}}e.SimpleTimeCache=r},823:function(t,e,r){"use strict";r(21703);const n=r(68292),{Multiaddr:i}=r(19391),o=r(19998),{OPEN:s,CLOSING:a,CLOSED:u}=r(50562),c=Symbol.for("@libp2p/interface-connection/connection");class h{constructor({localAddr:t,remoteAddr:e,localPeer:r,remotePeer:n,newStream:i,close:o,getStreams:a,stat:u}){l(t,r,n,i,o,a,u),this.id=parseInt(String(1e9*Math.random())).toString(36)+Date.now(),this.localAddr=t,this.remoteAddr=e,this.localPeer=r,this.remotePeer=n,this._stat={...u,status:s},this._newStream=i,this._close=o,this._getStreams=a,this.registry=new Map,this.tags=[]}get[Symbol.toStringTag](){return"Connection"}get[c](){return!0}static isConnection(t){return Boolean(t&&t[c])}get stat(){return this._stat}get streams(){return this._getStreams()}async newStream(t){if(this.stat.status===a)throw o(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===u)throw o(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(t)||(t=[t]);const{stream:e,protocol:r}=await this._newStream(t);return this.addStream(e,{protocol:r}),{stream:e,protocol:r}}addStream(t,{protocol:e,metadata:r={}}){this.registry.set(t.id,{protocol:e,...r})}removeStream(t){this.registry.delete(t)}async close(){if(this.stat.status!==u){if(this._closing)return this._closing;this.stat.status=a,this._closing=await this._close(),this._stat.timeline.close=Date.now(),this.stat.status=u}}}function l(t,e,r,s,a,u,c){if(t&&!i.isMultiaddr(t))throw o(new Error("localAddr must be an instance of multiaddr"),"ERR_INVALID_PARAMETERS");if(!n.isPeerId(e))throw o(new Error("localPeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(!n.isPeerId(r))throw o(new Error("remotePeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if("function"!==typeof s)throw o(new Error("new stream must be a function"),"ERR_INVALID_PARAMETERS");if("function"!==typeof a)throw o(new Error("close must be a function"),"ERR_INVALID_PARAMETERS");if("function"!==typeof u)throw o(new Error("getStreams must be a function"),"ERR_INVALID_PARAMETERS");if(!c)throw o(new Error("connection metadata object must be provided"),"ERR_INVALID_PARAMETERS");if("inbound"!==c.direction&&"outbound"!==c.direction)throw o(new Error('direction must be "inbound" or "outbound"'),"ERR_INVALID_PARAMETERS");if(!c.timeline)throw o(new Error("connection timeline object must be provided in the stat object"),"ERR_INVALID_PARAMETERS");if(!c.timeline.open)throw o(new Error("connection open timestamp must be provided"),"ERR_INVALID_PARAMETERS");if(!c.timeline.upgraded)throw o(new Error("connection upgraded timestamp must be provided"),"ERR_INVALID_PARAMETERS")}t.exports=h},19982:function(t,e,r){"use strict";e.Connection=r(823)},50562:function(t){"use strict";const e={OPEN:"open",CLOSING:"closing",CLOSED:"closed"};t.exports=e},44405:function(t,e){"use strict";e.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}},89889:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);const n=r(15652),{EventEmitter:i}=r(43793),o=r(19998),{pipe:s}=r(62100),{default:a}=r(99694),u=r(23131),{codes:c}=r(44405),{RPC:h}=r(6959),l=r(10361),{SignaturePolicy:f}=r(92454),d=r(39022),{signMessage:p,verifySignature:y}=r(61462);class g extends i{constructor({debugName:t,multicodecs:e,libp2p:r,globalSignaturePolicy:i=f.StrictSign,canRelayMessage:s=!1,emitSelf:u=!1,messageProcessingConcurrency:h=10}){if("string"!==typeof t)throw new Error("a debugname `string` is required");if(!e)throw new Error("multicodecs are required");if(!r)throw new Error("libp2p is required");if(super(),this.log=Object.assign(n(t),{err:n(`${t}:error`)}),this.multicodecs=d.ensureArray(e),this._libp2p=r,this.registrar=r.registrar,this.peerId=r.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!f[i])throw o(new Error("Invalid global signature policy"),c.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=i,this.canRelayMessage=s,this.emitSelf=u,this.topicValidators=new Map,this.queue=new a({concurrency:h}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);const t=new u({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=await this.registrar.register(t),this.log("started"),this.started=!0}async stop(){this.started&&(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach((t=>t.close())),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:t,stream:e,connection:r}){const n=r.remotePeer,i=n.toB58String(),o=this._addPeer(n,t),s=o.attachInboundStream(e);this._processMessages(i,s,o)}async _onPeerConnected(t,e){const r=t.toB58String();this.log("connected",r);try{const{stream:r,protocol:n}=await e.newStream(this.multicodecs),i=this._addPeer(t,n);await i.attachOutboundStream(r)}catch(n){this.log.err(n)}this._sendSubscriptions(r,Array.from(this.subscriptions),!0)}_onPeerDisconnected(t,e){const r=t.toB58String();this.log("connection ended",r,e?e.message:""),this._removePeer(t)}_addPeer(t,e){const r=t.toB58String(),n=this.peers.get(r);if(n)return n;this.log("new peer",r);const i=new l({id:t,protocol:e});return this.peers.set(r,i),i.once("close",(()=>this._removePeer(t))),i}_removePeer(t){if(!t)return;const e=t.toB58String(),r=this.peers.get(e);if(r){r.removeAllListeners(),r.close(),this.log("delete peer",e),this.peers.delete(e);for(const t of this.topics.values())t.delete(e);return r}}async _processMessages(t,e,r){try{await s(e,(async e=>{for await(const n of e){const e=n instanceof Uint8Array?n:n.slice(),i=this._decodeRpc(e);(async()=>{try{await this._processRpc(t,r,i)}catch(e){this.log.err(e)}})()}}))}catch(n){this._onPeerDisconnected(r.id,n)}}async _processRpc(t,e,r){this.log("rpc from",t);const n=r.subscriptions,i=r.msgs;return n.length&&(n.forEach((e=>{this._processRpcSubOpt(t,e)})),this.emit("pubsub:subscription-change",e.id,n)),this._acceptFrom(t)?(i.length&&this.queue.addAll(i.map((e=>async()=>{if(this.canRelayMessage||e.topicIDs&&e.topicIDs.some((t=>this.subscriptions.has(t))))try{const r=d.normalizeInRpcMessage(e,t);await this._processRpcMessage(r)}catch(r){this.log.err(r)}else this.log("received message we didn't subscribe to. Dropping.")}))),!0):(this.log("received message from unacceptable peer %s",t),!1)}_processRpcSubOpt(t,e){const r=e.topicID;if(!r)return;let n=this.topics.get(r);n||(n=new Set,this.topics.set(r,n)),e.subscribe?n.add(t):n.delete(t)}async _processRpcMessage(t){if(this.peerId.toB58String()!==t.from||this.emitSelf){try{await this.validate(t)}catch(e){return void this.log("Message is invalid, dropping it. %O",e)}return this._emitMessage(t),this._publish(d.normalizeOutRpcMessage(t))}}_emitMessage(t){t.topicIDs.forEach((e=>{this.subscriptions.has(e)&&this.emit(e,t)}))}getMsgId(t){const e=this.globalSignaturePolicy;switch(e){case f.StrictSign:return d.msgId(t.from,t.seqno);case f.StrictNoSign:return d.noSignMsgId(t.data);default:throw o(new Error("Cannot get message id: unhandled signature policy: "+e),c.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(t){return!0}_decodeRpc(t){return h.decode(t)}_encodeRpc(t){return h.encode(t).finish()}_sendRpc(t,e){const r=this.peers.get(t);if(r&&r.isWritable)r.write(this._encodeRpc(e));else{const e=`Cannot send RPC to ${t} as there is no open stream to it available`;this.log.err(e)}}_sendSubscriptions(t,e,r){return this._sendRpc(t,{subscriptions:e.map((t=>({topicID:t,subscribe:r})))})}async validate(t){const e=this.globalSignaturePolicy;switch(e){case f.StrictNoSign:if(t.from)throw o(new Error("StrictNoSigning: from should not be present"),c.ERR_UNEXPECTED_FROM);if(t.signature)throw o(new Error("StrictNoSigning: signature should not be present"),c.ERR_UNEXPECTED_SIGNATURE);if(t.key)throw o(new Error("StrictNoSigning: key should not be present"),c.ERR_UNEXPECTED_KEY);if(t.seqno)throw o(new Error("StrictNoSigning: seqno should not be present"),c.ERR_UNEXPECTED_SEQNO);break;case f.StrictSign:if(!t.signature)throw o(new Error("StrictSigning: Signing required and no signature was present"),c.ERR_MISSING_SIGNATURE);if(!t.seqno)throw o(new Error("StrictSigning: Signing required and no seqno was present"),c.ERR_MISSING_SEQNO);if(!await y(t))throw o(new Error("StrictSigning: Invalid message signature"),c.ERR_INVALID_SIGNATURE);break;default:throw o(new Error("Cannot validate message: unhandled signature policy: "+e),c.ERR_UNHANDLED_SIGNATURE_POLICY)}for(const r of t.topicIDs){const e=this.topicValidators.get(r);e&&await e(r,t)}}_buildMessage(t){const e=this.globalSignaturePolicy;switch(e){case f.StrictSign:return t.from=this.peerId.toB58String(),t.seqno=d.randomSeqno(),p(this.peerId,t);case f.StrictNoSign:return Promise.resolve(t);default:throw o(new Error("Cannot build message: unhandled signature policy: "+e),c.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(t){if(!this.started)throw o(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!t||"string"!==typeof t)throw o(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");const e=this.topics.get(t);return e?Array.from(e):[]}async publish(t,e){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",t,e);const r=this.peerId.toB58String(),n={receivedFrom:r,data:e,topicIDs:[t]},i=await this._buildMessage(n),o=d.normalizeInRpcMessage(i);this.emitSelf&&this._emitMessage(o),await this._publish(o)}_publish(t){throw o(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(t){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(t)||(this.subscriptions.add(t),this.peers.forEach(((e,r)=>this._sendSubscriptions(r,[t],!0))))}unsubscribe(t){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(t)&&0===this.listenerCount(t)&&(this.subscriptions.delete(t),this.peers.forEach(((e,r)=>this._sendSubscriptions(r,[t],!1))))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}}g.utils=d,g.SignaturePolicy=f,t.exports=g},6959:function(t,e,r){"use strict";r(21703);var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-pubsub-rpc"]||(n.roots["libp2p-pubsub-rpc"]={});a.RPC=function(){function t(t){if(this.subscriptions=[],this.msgs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.subscriptions=s.emptyArray,t.prototype.msgs=s.emptyArray,t.encode=function(t,e){if(e||(e=o.create()),null!=t.subscriptions&&t.subscriptions.length)for(var r=0;r<t.subscriptions.length;++r)a.RPC.SubOpts.encode(t.subscriptions[r],e.uint32(10).fork()).ldelim();if(null!=t.msgs&&t.msgs.length)for(r=0;r<t.msgs.length;++r)a.RPC.Message.encode(t.msgs[r],e.uint32(18).fork()).ldelim();return e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.RPC;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.subscriptions&&n.subscriptions.length||(n.subscriptions=[]),n.subscriptions.push(a.RPC.SubOpts.decode(t,t.uint32()));break;case 2:n.msgs&&n.msgs.length||(n.msgs=[]),n.msgs.push(a.RPC.Message.decode(t,t.uint32()));break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.RPC)return t;var e=new a.RPC;if(t.subscriptions){if(!Array.isArray(t.subscriptions))throw TypeError(".RPC.subscriptions: array expected");e.subscriptions=[];for(var r=0;r<t.subscriptions.length;++r){if("object"!==typeof t.subscriptions[r])throw TypeError(".RPC.subscriptions: object expected");e.subscriptions[r]=a.RPC.SubOpts.fromObject(t.subscriptions[r])}}if(t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".RPC.msgs: array expected");e.msgs=[];for(r=0;r<t.msgs.length;++r){if("object"!==typeof t.msgs[r])throw TypeError(".RPC.msgs: object expected");e.msgs[r]=a.RPC.Message.fromObject(t.msgs[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.subscriptions=[],r.msgs=[]),t.subscriptions&&t.subscriptions.length){r.subscriptions=[];for(var n=0;n<t.subscriptions.length;++n)r.subscriptions[n]=a.RPC.SubOpts.toObject(t.subscriptions[n],e)}if(t.msgs&&t.msgs.length){r.msgs=[];for(n=0;n<t.msgs.length;++n)r.msgs[n]=a.RPC.Message.toObject(t.msgs[n],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.SubOpts=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var e;return t.prototype.subscribe=null,t.prototype.topicID=null,Object.defineProperty(t.prototype,"_subscribe",{get:s.oneOfGetter(e=["subscribe"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_topicID",{get:s.oneOfGetter(e=["topicID"]),set:s.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=o.create()),null!=t.subscribe&&Object.hasOwnProperty.call(t,"subscribe")&&e.uint32(8).bool(t.subscribe),null!=t.topicID&&Object.hasOwnProperty.call(t,"topicID")&&e.uint32(18).string(t.topicID),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.RPC.SubOpts;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.subscribe=t.bool();break;case 2:n.topicID=t.string();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.RPC.SubOpts)return t;var e=new a.RPC.SubOpts;return null!=t.subscribe&&(e.subscribe=Boolean(t.subscribe)),null!=t.topicID&&(e.topicID=String(t.topicID)),e},t.toObject=function(t,e){e||(e={});var r={};return null!=t.subscribe&&t.hasOwnProperty("subscribe")&&(r.subscribe=t.subscribe,e.oneofs&&(r._subscribe="subscribe")),null!=t.topicID&&t.hasOwnProperty("topicID")&&(r.topicID=t.topicID,e.oneofs&&(r._topicID="topicID")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.Message=function(){function t(t){if(this.topicIDs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var e;return t.prototype.from=null,t.prototype.data=null,t.prototype.seqno=null,t.prototype.topicIDs=s.emptyArray,t.prototype.signature=null,t.prototype.key=null,Object.defineProperty(t.prototype,"_from",{get:s.oneOfGetter(e=["from"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_data",{get:s.oneOfGetter(e=["data"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_seqno",{get:s.oneOfGetter(e=["seqno"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_signature",{get:s.oneOfGetter(e=["signature"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_key",{get:s.oneOfGetter(e=["key"]),set:s.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=o.create()),null!=t.from&&Object.hasOwnProperty.call(t,"from")&&e.uint32(10).bytes(t.from),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),null!=t.seqno&&Object.hasOwnProperty.call(t,"seqno")&&e.uint32(26).bytes(t.seqno),null!=t.topicIDs&&t.topicIDs.length)for(var r=0;r<t.topicIDs.length;++r)e.uint32(34).string(t.topicIDs[r]);return null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(50).bytes(t.key),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.RPC.Message;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.from=t.bytes();break;case 2:n.data=t.bytes();break;case 3:n.seqno=t.bytes();break;case 4:n.topicIDs&&n.topicIDs.length||(n.topicIDs=[]),n.topicIDs.push(t.string());break;case 5:n.signature=t.bytes();break;case 6:n.key=t.bytes();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.RPC.Message)return t;var e=new a.RPC.Message;if(null!=t.from&&("string"===typeof t.from?s.base64.decode(t.from,e.from=s.newBuffer(s.base64.length(t.from)),0):t.from.length&&(e.from=t.from)),null!=t.data&&("string"===typeof t.data?s.base64.decode(t.data,e.data=s.newBuffer(s.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),null!=t.seqno&&("string"===typeof t.seqno?s.base64.decode(t.seqno,e.seqno=s.newBuffer(s.base64.length(t.seqno)),0):t.seqno.length&&(e.seqno=t.seqno)),t.topicIDs){if(!Array.isArray(t.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");e.topicIDs=[];for(var r=0;r<t.topicIDs.length;++r)e.topicIDs[r]=String(t.topicIDs[r])}return null!=t.signature&&("string"===typeof t.signature?s.base64.decode(t.signature,e.signature=s.newBuffer(s.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),null!=t.key&&("string"===typeof t.key?s.base64.decode(t.key,e.key=s.newBuffer(s.base64.length(t.key)),0):t.key.length&&(e.key=t.key)),e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.topicIDs=[]),null!=t.from&&t.hasOwnProperty("from")&&(r.from=e.bytes===String?s.base64.encode(t.from,0,t.from.length):e.bytes===Array?Array.prototype.slice.call(t.from):t.from,e.oneofs&&(r._from="from")),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?s.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data,e.oneofs&&(r._data="data")),null!=t.seqno&&t.hasOwnProperty("seqno")&&(r.seqno=e.bytes===String?s.base64.encode(t.seqno,0,t.seqno.length):e.bytes===Array?Array.prototype.slice.call(t.seqno):t.seqno,e.oneofs&&(r._seqno="seqno")),t.topicIDs&&t.topicIDs.length){r.topicIDs=[];for(var n=0;n<t.topicIDs.length;++n)r.topicIDs[n]=t.topicIDs[n]}return null!=t.signature&&t.hasOwnProperty("signature")&&(r.signature=e.bytes===String?s.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature,e.oneofs&&(r._signature="signature")),null!=t.key&&t.hasOwnProperty("key")&&(r.key=e.bytes===String?s.base64.encode(t.key,0,t.key.length):e.bytes===Array?Array.prototype.slice.call(t.key):t.key,e.oneofs&&(r._key="key")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t}(),t.exports=a},61462:function(t,e,r){"use strict";r(21703);const n=r(68292),{RPC:i}=r(6959),{concat:o}=r(85489),{fromString:s}=r(92259),a=s("libp2p-pubsub:"),{normalizeOutRpcMessage:u}=r(39022);async function c(t,e){const r=o([a,i.Message.encode(u(e)).finish()]),n=await t.privKey.sign(r);return{...e,signature:n,key:t.pubKey.bytes}}async function h(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");const e=o([a,i.Message.encode({...t,from:n.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]),r=await l(t);return r.verify(e,t.signature)}async function l(t){if(!t.from)throw new Error("Could not get the public key from the originator id");const e=n.createFromB58String(t.from);if(t.key){const r=await n.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}t.exports={messagePublicKey:l,signMessage:c,SignPrefix:a,verifySignature:h}},10361:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p-pubsub:peer-streams"),{error:n("libp2p-pubsub:peer-streams:err")}),{EventEmitter:o}=r(43793),s=r(92992),a=r(61783),{pipe:u}=r(62100),{source:c}=r(87602);class h extends o{constructor({id:t,protocol:e}){super(),this.id=t,this.protocol=e,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new AbortController,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(t){if(!this.outboundStream){const t=this.id.toB58String();throw new Error("No writable connection to "+t)}this.outboundStream.push(t)}attachInboundStream(t){return this._rawInboundStream=t,this.inboundStream=c(u(this._rawInboundStream,s.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(t){const e=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=t,this.outboundStream=a({onEnd:t=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,t&&this.emit("close")}}),u(this.outboundStream,s.encode(),this._rawOutboundStream).catch((t=>{i.error(t)})),e||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}}t.exports=h},92454:function(t,e){"use strict";const r={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};e.SignaturePolicy=r},39022:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const n=r(69340),{toString:i}=r(96523),{fromString:o}=r(92259),s=r(68292),{sha256:a}=r(51919),u=()=>n(8),c=(t,e)=>{let r;r=t instanceof Uint8Array?s.createFromBytes(t).id:s.parse(t).id;const n=new Uint8Array(r.length+e.length);return n.set(r,0),n.set(e,r.length),n},h=t=>a.encode(t),l=(t,e)=>{let r;r=Array.isArray(e)?t=>e.indexOf(t)>-1:t=>e.has(t);for(const n of t)if(r(n))return!0;return!1},f=t=>Array.isArray(t)?t:[t],d=(t,e)=>{const r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=i(t.from,"base58btc")),e&&(r.receivedFrom=e),r},p=t=>{const e=Object.assign({},t);return"string"===typeof t.from&&(e.from=o(t.from,"base58btc")),"string"===typeof t.data&&(e.data=o(t.data)),e};t.exports={randomSeqno:u,msgId:c,noSignMsgId:h,anyMatch:l,ensureArray:f,normalizeInRpcMessage:d,normalizeOutRpcMessage:p}},32863:function(t){"use strict";const e=()=>{},r=Symbol.for("@libp2p/js-interfaces/topology");class n{constructor({min:t=0,max:r=1/0,handlers:n={}}){this.min=t,this.max=r,this._onConnect=n.onConnect||e,this._onDisconnect=n.onDisconnect||e,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[r](){return!0}static isTopology(t){return Boolean(t&&t[r])}async setRegistrar(t){this._registrar=t}disconnect(t){this._onDisconnect(t)}}t.exports=n},23131:function(t,e,r){"use strict";r(21703),r(26699);const n=r(32863),i=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),o=r(15652),s=Object.assign(o("libp2p:topology:multicodec-topology"),{error:o("libp2p:topology:multicodec-topology:error")});class a extends n{constructor({min:t,max:e,multicodecs:r,handlers:n}){if(super({min:t,max:e,handlers:n}),!r)throw new Error("one or more multicodec should be provided");if(!n)throw new Error("the handlers should be provided");if("function"!==typeof n.onConnect)throw new Error("the 'onConnect' handler must be provided");if("function"!==typeof n.onDisconnect)throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(r)?r:[r],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[i](){return!0}static isMulticodecTopology(t){return Boolean(t&&t[i])}async setRegistrar(t){this._registrar=t,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),await this._updatePeers(this._registrar.peerStore.getPeers())}async _updatePeers(t){for await(const{id:e,protocols:r}of t)if(this.multicodecs.filter((t=>r.includes(t))).length){this.peers.add(e.toB58String());const t=this._registrar.getConnection(e);t&&this._onConnect(e,t)}else this.peers.delete(e.toB58String())}async _onProtocolChange({peerId:t,protocols:e}){try{const r=this.peers.has(t.toB58String()),n=e.filter((t=>this.multicodecs.includes(t)));r&&0===n.length&&this._onDisconnect(t);for(const i of e)if(this.multicodecs.includes(i)){const e=await this._registrar.peerStore.get(t);return void await this._updatePeers([e])}}catch(r){s.error(r)}}async _onPeerConnect(t){try{const e=t.remotePeer,r=await this._registrar.peerStore.protoBook.get(e);if(!r)return;this.multicodecs.find((t=>r.includes(t)))&&(this.peers.add(e.toB58String()),this._onConnect(e,t))}catch(e){s.error(e)}}}t.exports=a},38155:function(t,e,r){"use strict";r(21703);const{Buffer:n}=r(16611),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const o=!!t,s=this._offset(r),a=i-r;let u=a,c=o&&e||0,h=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(u<=this._bufs[s[0]].length-h)return o?this._bufs[s[0]].copy(t,e,h,h+u):this._bufs[s[0]].slice(h,h+u);o||(t=n.allocUnsafe(a));for(let n=s[0];n<this._bufs.length;n++){const e=this._bufs[n].length-h;if(!(u>e)){this._bufs[n].copy(t,c,h,h+u),c+=e;break}this._bufs[n].copy(t,c,h),c+=e,u-=e,h&&(h=0)}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"===typeof e&&(r=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=n.from([t]):"string"===typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const r=e.length-s;if(r>=t.length){const r=e.indexOf(t,s);if(-1!==r)return this._reverseOffset([o,r]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,r){return this.slice(t,t+r)[e](0,r)}:o.prototype[e]=function(r=0){return this.slice(r,r+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},16611:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},35575:function(t,e,r){"use strict";const n=r(42611),i=r(38155);t.exports=t=>async function*(){const e=new o;for await(const r of t){const t=e.write(r);t.length&&(yield t)}}();class o{constructor(){this._buffer=new i,this._bufferProxy=new Proxy({},{get:(t,e)=>"l"===e[0]?this._buffer[e]:this._buffer.get(parseInt(e))}),this._headerInfo=null}write(t){if(!t||!t.length)return[];this._buffer.append(t);const e=[];while(this._buffer.length){if(!this._headerInfo)try{this._headerInfo=this._decodeHeader(this._bufferProxy)}catch(r){break}const{id:t,type:n,length:i,offset:o}=this._headerInfo,s=this._buffer.length-o;if(s<i)break;e.push({id:t,type:n,data:this._buffer.shallowSlice(o,o+i)}),this._buffer.consume(o+i),this._headerInfo=null}return e}_decodeHeader(t){const e=n.decode(t);let r=n.decode.bytes;const i=n.decode(t,r);return r+=n.decode.bytes,{id:e>>3,type:7&e,offset:r,length:i}}}},27812:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const n=r(42611),i=r(38155),o=10240;class s{constructor(){this._pool=new Uint8Array(o),this._poolOffset=0}write(t){const e=this._pool;let r=this._poolOffset;n.encode(t.id<<3|t.type,e,r),r+=n.encode.bytes,n.encode(t.data?t.data.length:0,e,r),r+=n.encode.bytes;const i=e.subarray(this._poolOffset,r);return o-r<100?(this._pool=new Uint8Array(o),this._poolOffset=0):this._poolOffset=r,t.data?[i,t.data]:i}}const a=new s;t.exports=t=>async function*(){for await(const e of t)Array.isArray(e)?yield new i(e.map((t=>a.write(t)))):yield new i(a.write(e))}()},93568:function(t,e,r){"use strict";e.encode=r(27812),e.decode=r(35575)},95631:function(t,e,r){"use strict";t.exports=r(81003)},29843:function(t,e){"use strict";const r=Object.freeze({NEW_STREAM:0,MESSAGE_RECEIVER:1,MESSAGE_INITIATOR:2,CLOSE_RECEIVER:3,CLOSE_INITIATOR:4,RESET_RECEIVER:5,RESET_INITIATOR:6});e.MessageTypes=r,e.InitiatorMessageTypes=Object.freeze({NEW_STREAM:r.NEW_STREAM,MESSAGE:r.MESSAGE_INITIATOR,CLOSE:r.CLOSE_INITIATOR,RESET:r.RESET_INITIATOR}),e.ReceiverMessageTypes=Object.freeze({MESSAGE:r.MESSAGE_RECEIVER,CLOSE:r.CLOSE_RECEIVER,RESET:r.RESET_RECEIVER}),e.MessageTypeNames=Object.freeze(Object.entries(r).reduce(((t,e)=>(t[e[1]]=e[0],t)),{}))},81003:function(t,e,r){"use strict";r(21703);const n=r(62100),i=r(61783),o=r(15652)("libp2p:mplex"),s=r(87602),a=r(93568),u=r(92739),{MessageTypes:c,MessageTypeNames:h}=r(29843),l=r(7708);class f{constructor(t){t=t||{},t="function"===typeof t?{onStream:t}:t,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._options=t,this.sink=this._createSink(),this.source=this._createSource(),this.onStream=t.onStream,this.onStreamEnd=t.onStreamEnd}get streams(){const t=[];return this._streams.initiators.forEach((e=>{t.push(e)})),this._streams.receivers.forEach((e=>{t.push(e)})),t}newStream(t){const e=this._streamId++;t=null==t?e.toString():String(t);const r=this._streams.initiators;return this._newStream({id:e,name:t,type:"initiator",registry:r})}_newReceiverStream({id:t,name:e}){const r=this._streams.receivers;return this._newStream({id:t,name:e,type:"receiver",registry:r})}_newStream({id:t,name:e,type:r,registry:n}){if(n.has(t))throw new Error(`${r} stream ${t} already exists!`);o("new %s stream %s %s",r,t,e);const i=n=>(o.enabled&&o("%s stream %s %s send",r,t,e,{...n,type:h[n.type],data:n.data&&n.data.slice()}),this.source.push(n)),s=()=>{o("%s stream %s %s ended",r,t,e),n.delete(t),this.onStreamEnd&&this.onStreamEnd(a)},a=l({id:t,name:e,send:i,type:r,onEnd:s,maxMsgSize:this._options.maxMsgSize});return n.set(t,a),a}_createSink(){return async t=>{this._options.signal&&(t=s(t,this._options.signal));try{await n(t,a.decode,u(this._options.maxMsgSize),(async t=>{for await(const e of t)for(const t of e)this._handleIncoming(t)}))}catch(e){return o("error in sink",e),this.source.end(e)}this.source.end()}}_createSource(){const t=t=>{const{initiators:e,receivers:r}=this._streams;for(const n of e.values())n.abort(t);for(const n of r.values())n.abort(t)},e=i({onEnd:t,writev:!0});return Object.assign(a.encode(e),{push:e.push,end:e.end,return:e.return})}_handleIncoming({id:t,type:e,data:r}){if(o.enabled&&o("incoming message",{id:t,type:h[e],data:r.slice()}),e===c.NEW_STREAM&&this.onStream){const e=this._newReceiverStream({id:t,name:r.toString()});return this.onStream(e)}const n=1&e?this._streams.initiators:this._streams.receivers,i=n.get(t);if(!i)return o("missing stream %s",t);switch(e){case c.MESSAGE_INITIATOR:case c.MESSAGE_RECEIVER:i.source.push(r);break;case c.CLOSE_INITIATOR:case c.CLOSE_RECEIVER:i.close();break;case c.RESET_INITIATOR:case c.RESET_RECEIVER:i.reset();break;default:o("unknown message type %s",e)}}}f.multicodec="/mplex/6.7.0",t.exports=f},92739:function(t,e,r){"use strict";r(21703);const n=1<<20;t.exports=t=>{t=t||n;const e=e=>{if(e.data&&e.data.length>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return t=>async function*(){for await(const r of t)Array.isArray(r)?r.forEach(e):e(r),yield r}()},t.exports.MAX_MSG_SIZE=n},7708:function(t,e,r){"use strict";r(21703);const n=r(87602),i=r(15652)("libp2p:mplex:stream"),o=r(61783),s=r(38155),a=r(19998),{MAX_MSG_SIZE:u}=r(92739),{InitiatorMessageTypes:c,ReceiverMessageTypes:h}=r(29843),l="ERR_MPLEX_STREAM_RESET",f="ERR_MPLEX_STREAM_ABORT";t.exports=({id:t,name:e,send:r,onEnd:d=(()=>{}),type:p="initiator",maxMsgSize:y=u})=>{const g=new AbortController,m=new AbortController,b="initiator"===p?c:h,w="initiator"===p?`i${t}`:`r${t}`;e=String(null==e?t:e);let v,_=!1,E=!1;const S=t=>{_||(_=!0,i("%s stream %s source end",p,e,t),t&&!v&&(v=t),E&&(I.timeline.close=Date.now(),d(v)))},A=t=>{E||(E=!0,i("%s stream %s sink end",p,e,t),t&&!v&&(v=t),_&&(I.timeline.close=Date.now(),d(v)))},I={close:()=>I.source.end(),abort:t=>{i("%s stream %s abort",p,e,t),I.source.end(t),g.abort(),A(t)},reset:()=>{const t=a(new Error("stream reset"),l);m.abort(),I.source.end(t),A(t)},sink:async o=>{o=n(o,[{signal:g.signal,options:{abortMessage:"stream aborted",abortCode:f}},{signal:m.signal,options:{abortMessage:"stream reset",abortCode:l}}]),"initiator"===p&&r({id:t,type:b.NEW_STREAM,data:e});try{for await(let e of o)while(e.length){if(e.length<=y){r({id:t,type:b.MESSAGE,data:e});break}e=s.isBufferList(e)?e:new s(e),r({id:t,type:b.MESSAGE,data:e.shallowSlice(0,y)}),e.consume(y)}}catch(a){return a.code===l?i("%s stream %s reset",p,e):(i("%s stream %s error",p,e,a),r({id:t,type:b.RESET})),I.source.end(a),A(a)}r({id:t,type:b.CLOSE}),A()},source:o(S),timeline:{open:Date.now(),close:null},id:w};return I}},4300:function(t,e,r){"use strict";const n=r(92554);function i(t,e){const r=n(t.multiaddr),i=n(e.multiaddr);return r&&!i?1:!r&&i||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}function o(t){return[...t].sort(i)}t.exports.publicAddressesFirst=o},22962:function(t){"use strict";function e(t,e){return t.length===e.length&&e.sort()&&t.sort().every(((t,r)=>e[r].equals(t)))}t.exports=e},85371:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:ip-port-to-multiaddr"),{error:n("libp2p:ip-port-to-multiaddr:err")}),{Multiaddr:o}=r(19391),s=r(19998),{Address4:a,Address6:u}=r(66050),c={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function h(t,e){if("string"!==typeof t)throw s(new Error(`invalid ip provided: ${t}`),c.ERR_INVALID_IP_PARAMETER);if("string"===typeof e&&(e=parseInt(e)),isNaN(e))throw s(new Error(`invalid port provided: ${e}`),c.ERR_INVALID_PORT_PARAMETER);try{return new a(t),new o(`/ip4/${t}/tcp/${e}`)}catch{}try{const r=new u(t);return r.is4()?new o(`/ip4/${r.to4().correctForm()}/tcp/${e}`):new o(`/ip6/${t}/tcp/${e}`)}catch(r){const n=`invalid ip:port for creating a multiaddr: ${t}:${e}`;throw i.error(n),s(new Error(n),c.ERR_INVALID_IP)}}t.exports=h,t.exports.Errors=c},5083:function(t,e,r){"use strict";const n=r(97061);function i(t){const{address:e}=t.nodeAddress();return n(e)}t.exports=i},92554:function(t,e,r){"use strict";const n=r(62645);function i(t){const{address:e}=t.nodeAddress();return n(e)}t.exports=i},24624:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const{source:n}=r(87602),i=r(15652),o=i("libp2p:stream:converter");function s({stream:t,remoteAddr:e,localAddr:r},i={}){const{sink:s,source:a}=t,u={async sink(t){i.signal&&(t=n(t,i.signal));try{await s(t)}catch(e){"aborted"!==e.type&&o(e)}c()},source:i.signal?n(a,i.signal):a,conn:t,localAddr:r,remoteAddr:e,timeline:{open:Date.now(),close:void 0},close(){return s(new Uint8Array(0)),c()}};function c(){return u.timeline.close||(u.timeline.close=Date.now()),Promise.resolve()}return u}t.exports=s},91818:function(t,e){"use strict";e.CODE_P2P=421,e.CODE_CIRCUIT=290,e.CODE_TCP=6,e.CODE_WS=477,e.CODE_WSS=478,e.CLOSE_TIMEOUT=2e3},94362:function(t,e,r){"use strict";r(26699);const n=r(49605),{CODE_CIRCUIT:i,CODE_P2P:o,CODE_TCP:s,CODE_WS:a,CODE_WSS:u}=r(91818);t.exports={all:t=>t.filter((t=>{if(t.protoCodes().includes(i))return!1;const e=t.decapsulateCode(o);return n.WebSockets.matches(e)||n.WebSocketsSecure.matches(e)})),dnsWss:t=>t.filter((t=>{if(t.protoCodes().includes(i))return!1;const e=t.decapsulateCode(o);return n.WebSocketsSecure.matches(e)&&n.DNS.matches(e.decapsulateCode(s).decapsulateCode(u))})),dnsWsOrWss:t=>t.filter((t=>{if(t.protoCodes().includes(i))return!1;const e=t.decapsulateCode(o);return n.WebSockets.matches(e)?n.DNS.matches(e.decapsulateCode(s).decapsulateCode(a)):n.WebSocketsSecure.matches(e)&&n.DNS.matches(e.decapsulateCode(s).decapsulateCode(u))}))}},373:function(t,e,r){"use strict";r(21703);const n=r(13718),i=r(67151),o=r(4520),{AbortError:s}=r(87602),a=r(61233),u=r(15652),c=u("libp2p:websockets");c.error=u("libp2p:websockets:error");const h=r(30798),l=r(57223),f=r(45923),d=r(94362);class p{constructor({upgrader:t,filter:e}){if(!t)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=t,this._filter=e}async dial(t,e={}){c("dialing %s",t);const r=await this._connect(t,e),n=f(r,{remoteAddr:t,signal:e.signal});c("new outbound connection %s",n.remoteAddr);const i=await this._upgrader.upgradeOutbound(n);return c("outbound connection %s upgraded",n.remoteAddr),i}async _connect(t,e={}){if(e.signal&&e.signal.aborted)throw new s;const r=t.toOptions();c("dialing %s:%s",r.host,r.port);const i=a(),u=t=>{const e=`connection error: ${t.message}`;c.error(e),i.reject(t)},h=n(o(t),Object.assign({binary:!0},e));if(h.socket.on?h.socket.on("error",u):h.socket.onerror=u,!e.signal)return await Promise.race([h.connected(),i.promise]),c("connected %s",t),h;let l;const f=new Promise(((t,r)=>{if(l=()=>{r(new s),setTimeout((()=>{h.close()}))},e.signal.aborted)return l();e.signal.addEventListener("abort",l)}));try{await Promise.race([f,i.promise,h.connected()])}finally{e.signal.removeEventListener("abort",l)}return c("connected %s",t),h}createListener(t={},e){return"function"===typeof t&&(e=t,t={}),l({handler:e,upgrader:this._upgrader},t)}filter(t){return t=Array.isArray(t)?t:[t],this._filter?this._filter(t):h.isBrowser||h.isWebWorker?d.dnsWss(t):d.all(t)}}t.exports=i(p,{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})},57223:function(t,e,r){"use strict";r(21703),t.exports=function(){throw new Error("WebSocket Servers can not be created in the browser!")}},45923:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const n=r(87602),{CLOSE_TIMEOUT:i}=r(91818),o=r(85371),s=r(5149),a=r(15652),u=a("libp2p:websockets:socket");u.error=a("libp2p:websockets:socket:error"),t.exports=(t,e={})=>{const r={async sink(r){e.signal&&(r=n(r,e.signal));try{await t.sink(async function*(){for await(const t of r)yield t instanceof Uint8Array?t:t.slice()}())}catch(i){"aborted"!==i.type&&u.error(i)}},source:e.signal?n(t.source,e.signal):t.source,conn:t,localAddr:e.localAddr||(t.localAddress&&t.localPort?o(t.localAddress,t.localPort):void 0),remoteAddr:e.remoteAddr||o(t.remoteAddress,t.remotePort),timeline:{open:Date.now()},async close(){const e=Date.now();try{await s(t.close(),i)}catch(n){const{host:i,port:o}=r.remoteAddr.toOptions();u("timeout closing stream to %s:%s after %dms, destroying it manually",i,o,Date.now()-e),t.destroy()}finally{r.timeline.close=Date.now()}}};return t.socket.once&&t.socket.once("close",(()=>{r.timeline.close||(r.timeline.close=Date.now())})),r}},55946:function(t,e,r){"use strict";const{EventEmitter:n}=r(43793),{Multiaddr:i}=r(19391),o=r(68292);class s extends n{constructor(t,{listen:e=[],announce:r=[]}={}){super(),this.peerId=t,this.listen=new Set(e.map((t=>t.toString()))),this.announce=new Set(r.map((t=>t.toString()))),this.observed=new Set}getListenAddrs(){return Array.from(this.listen).map((t=>new i(t)))}getAnnounceAddrs(){return Array.from(this.announce).map((t=>new i(t)))}getObservedAddrs(){return Array.from(this.observed).map((t=>new i(t)))}addObservedAddr(t){let e=new i(t);const r=e.getPeerId();if(r){const t=o.createFromB58String(r);t.equals(this.peerId)&&(e=e.decapsulate(new i(`/p2p/${this.peerId}`)))}const n=e.toString();this.observed.has(n)||(this.observed.add(n),this.emit("change:addresses"))}}t.exports=s},61427:function(t,e,r){"use strict";r(26699);const n=r(15652),i=Object.assign(n("libp2p:auto-relay"),{error:n("libp2p:auto-relay:err")}),{fromString:o}=r(92259),{toString:s}=r(96523),{Multiaddr:a}=r(19391),u=r(97192),{relay:c}=r(14089),{canHop:h}=r(6781),{namespaceToCid:l}=r(37472),{CIRCUIT_PROTO_CODE:f,HOP_METADATA_KEY:d,HOP_METADATA_VALUE:p,RELAY_RENDEZVOUS_NS:y}=r(90966);class g{constructor({libp2p:t,maxListeners:e=1,onError:r}){this._libp2p=t,this._peerId=t.peerId,this._peerStore=t.peerStore,this._connectionManager=t.connectionManager,this._transportManager=t.transportManager,this._addressSorter=t.dialer.addressSorter,this.maxListeners=e,this._listenRelays=new Set,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this._peerStore.on("change:protocols",this._onProtocolChange),this._connectionManager.on("peer:disconnect",this._onPeerDisconnected),this._onError=(t,e)=>{i.error(e||t),r&&r(t,e)}}async _onProtocolChange({peerId:t,protocols:e}){const r=t.toB58String(),n=e.find((t=>t===c));if(n||!this._listenRelays.has(r)){if(n&&!this._listenRelays.has(r))try{const e=this._connectionManager.get(t);if(!e)return;if(e.remoteAddr.protoCodes().includes(f))return void i(`relayed connection to ${r} will not be used to hop on`);const n=await h({connection:e});n&&(await this._peerStore.metadataBook.setValue(t,d,o(p)),await this._addListenRelay(e,r))}catch(s){this._onError(s)}}else await this._removeListenRelay(r)}_onPeerDisconnected(t){const e=t.remotePeer,r=e.toB58String();this._listenRelays.has(r)&&this._removeListenRelay(r).catch((t=>{i.error(t)}))}async _addListenRelay(t,e){try{if(this._listenRelays.size>=this.maxListeners)return;const r=await this._peerStore.addressBook.getMultiaddrsForPeer(t.remotePeer,this._addressSorter),n=await Promise.all(r.map((async t=>{try{return await this._transportManager.listen([new a(`${t.toString()}/p2p-circuit`)]),!0}catch(e){this._onError(e)}return!1})));n.includes(!0)&&this._listenRelays.add(e)}catch(r){this._onError(r),this._listenRelays.delete(e)}}async _removeListenRelay(t){this._listenRelays.delete(t)&&await this._listenOnAvailableHopRelays([t])}async _listenOnAvailableHopRelays(t=[]){if(this._listenRelays.size>=this.maxListeners)return;const e=[],r=await u(this._peerStore.getPeers());for await(const{id:i,metadata:o}of r){const r=i.toB58String();if(this._listenRelays.has(r))continue;if(t.includes(r))continue;const n=o.get(d);if(!n||s(n)!==p)continue;const a=this._connectionManager.get(i);if(a){if(await this._addListenRelay(a,r),this._listenRelays.size>=this.maxListeners)return}else e.push(i)}for(const i of e)if(await this._tryToListenOnRelay(i),this._listenRelays.size>=this.maxListeners)return;try{const t=await l(y);for await(const e of this._libp2p.contentRouting.findProviders(t)){if(!e.multiaddrs.length)continue;const t=e.id;if(await this._peerStore.addressBook.add(t,e.multiaddrs),await this._tryToListenOnRelay(t),this._listenRelays.size>=this.maxListeners)return}}catch(n){this._onError(n)}}async _tryToListenOnRelay(t){try{const e=await this._libp2p.dial(t);await this._addListenRelay(e,t.toB58String())}catch(e){this._onError(e,`could not connect and listen on known hop relay ${t.toB58String()}`)}}}t.exports=g},6781:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:circuit:hop"),{error:n("libp2p:circuit:hop:err")}),o=r(19998),s=r(68292),{validateAddrs:a}=r(97182),u=r(10343),{CircuitRelay:c}=r(14986),{pipe:h}=r(62100),{codes:l}=r(65461),{stop:f}=r(38397),d=r(14089);async function p({connection:t,request:e,streamHandler:r,circuit:n}){if(!n._options.hop.enabled)return i("HOP request received but we are not acting as a relay"),r.end({type:c.Type.STATUS,code:c.Status.HOP_CANT_SPEAK_RELAY});try{a(e,r)}catch(y){return i.error("invalid hop request via peer %s",t.remotePeer.toB58String(),y)}if(!e.dstPeer)return void i("HOP request received but we do not receive a dstPeer");const o=new s(e.dstPeer.id),u=n._connectionManager.get(o);if(!u&&!n._options.hop.active)return i("HOP request received but we are not connected to the destination peer"),r.end({type:c.Type.STATUS,code:c.Status.HOP_NO_CONN_TO_DST});if(!u)return;const l={type:c.Type.STOP,dstPeer:e.dstPeer,srcPeer:e.srcPeer};let d;try{d=await f({connection:u,request:l})}catch(y){return i.error(y)}i("hop request from %s is valid",t.remotePeer.toB58String()),r.write({type:c.Type.STATUS,code:c.Status.SUCCESS});const p=r.rest();return h(p,d,p)}async function y({connection:t,request:e}){const{stream:r}=await t.newStream([d.relay]),n=new u({stream:r});n.write(e);const s=await n.read();if(!s)throw o(new Error("HOP request had no response"),l.ERR_HOP_REQUEST_FAILED);if(s.code===c.Status.SUCCESS)return i("hop request was successful"),n.rest();throw i("hop request failed with code %d, closing stream",s.code),n.close(),o(new Error(`HOP request failed with code ${s.code}`),l.ERR_HOP_REQUEST_FAILED)}async function g({connection:t}){const{stream:e}=await t.newStream([d.relay]),r=new u({stream:e});r.write({type:c.Type.CAN_HOP});const n=await r.read();return await r.close(),!(!n||n.code!==c.Status.SUCCESS)}function m({connection:t,streamHandler:e,circuit:r}){const n=r._options.hop.enabled;i("can hop (%s) request from %s",n,t.remotePeer.toB58String()),e.end({type:c.Type.STATUS,code:n?c.Status.SUCCESS:c.Status.HOP_CANT_SPEAK_RELAY})}t.exports={handleHop:p,hop:y,canHop:g,handleCanHop:m}},38397:function(t,e,r){"use strict";const n=r(15652),i=Object.assign(n("libp2p:circuit:stop"),{error:n("libp2p:circuit:stop:err")}),{CircuitRelay:o}=r(14986),s=r(14089),a=r(10343),{validateAddrs:u}=r(97182);t.exports.handleStop=function({connection:t,request:e,streamHandler:r}){try{u(e,r)}catch(n){return i.error("invalid stop request via peer %s",t.remotePeer.toB58String(),n)}return i("stop request is valid"),r.write({type:o.Type.STATUS,code:o.Status.SUCCESS}),r.rest()},t.exports.stop=async function({connection:t,request:e}){const{stream:r}=await t.newStream([s.relay]);i("starting stop request to %s",t.remotePeer.toB58String());const n=new a({stream:r});n.write(e);const u=await n.read();return u?u.code===o.Status.SUCCESS?(i("stop request to %s was successful",t.remotePeer.toB58String()),n.rest()):(i("stop request failed with code %d",u.code),void n.close()):n.close()}},10343:function(t,e,r){"use strict";const n=r(15652),i=Object.assign(n("libp2p:circuit:stream-handler"),{error:n("libp2p:circuit:stream-handler:err")}),o=r(92992),s=r(737),{CircuitRelay:a}=r(14986);class u{constructor({stream:t,maxLength:e=4096}){this.stream=t,this.shake=s(this.stream),this.decoder=o.decode.fromReader(this.shake.reader,{maxDataLength:e})}async read(){const t=await this.decoder.next();if(t.value){const e=a.decode(t.value.slice());return i("read message type",e.type),e}i("read received no value, closing stream"),this.close()}write(t){i("write message type %s",t.type),this.shake.write(o.encode.single(a.encode(t).finish()))}rest(){return this.shake.rest(),this.shake.stream}end(t){this.write(t),this.close()}close(){i("closing the stream"),this.rest().sink([])}}t.exports=u},97182:function(t,e,r){"use strict";const{Multiaddr:n}=r(19391),{CircuitRelay:i}=r(14986);function o(t,e){t.write({type:i.Type.STATUS,code:e})}function s(t,e){try{t.dstPeer&&t.dstPeer.addrs&&t.dstPeer.addrs.forEach((t=>new n(t)))}catch(r){throw o(e,t.type===i.Type.HOP?i.Status.HOP_DST_MULTIADDR_INVALID:i.Status.STOP_DST_MULTIADDR_INVALID),r}try{t.srcPeer&&t.srcPeer.addrs&&t.srcPeer.addrs.forEach((t=>new n(t)))}catch(r){throw o(e,t.type===i.Type.HOP?i.Status.HOP_SRC_MULTIADDR_INVALID:i.Status.STOP_SRC_MULTIADDR_INVALID),r}}t.exports={validateAddrs:s}},90966:function(t){"use strict";const e=6e4;t.exports={ADVERTISE_BOOT_DELAY:15*e,ADVERTISE_TTL:30*e,CIRCUIT_PROTO_CODE:290,HOP_METADATA_KEY:"hop_relay",HOP_METADATA_VALUE:"true",RELAY_RENDEZVOUS_NS:"/libp2p/relay"}},54023:function(t,e,r){"use strict";const n=r(15652),i=Object.assign(n("libp2p:relay"),{error:n("libp2p:relay:err")}),{codes:o}=r(65461),{setDelayedInterval:s,clearDelayedInterval:a}=r(12407),u=r(61427),{namespaceToCid:c}=r(37472),{RELAY_RENDEZVOUS_NS:h}=r(90966);class l{constructor(t){this._libp2p=t,this._options={...t._config.relay},this._autoRelay=this._options.autoRelay.enabled&&new u({libp2p:t,...this._options.autoRelay}),this._advertiseService=this._advertiseService.bind(this)}start(){const t=this._options.hop.enabled;t&&this._options.advertise.enabled&&(this._timeout=s(this._advertiseService,this._options.advertise.ttl,this._options.advertise.bootDelay))}stop(){a(this._timeout)}async _advertiseService(){try{const t=await c(h);await this._libp2p.contentRouting.provide(t)}catch(t){t.code===o.ERR_NO_ROUTERS_AVAILABLE?(i.error("a content router, such as a DHT, must be provided in order to advertise the relay service",t),this.stop()):i.error(t)}}}t.exports=l},45617:function(t,e,r){"use strict";const{EventEmitter:n}=r(43793),{Multiaddr:i}=r(19391);t.exports=t=>{const e=new Map;async function r(r){const n=String(r).split("/p2p-circuit").find((t=>""!==t)),o=await t.dial(new i(n)),a=o.remoteAddr.encapsulate("/p2p-circuit");e.set(o.remotePeer.toB58String(),a),s.emit("listening")}function o(){const t=[];for(const r of e.values())t.push(r);return t}const s=Object.assign(new n,{close:()=>Promise.resolve(),listen:r,getAddrs:o});return t.connectionManager.on("peer:disconnect",(t=>{const r=e.delete(t.remotePeer.toB58String());r&&s.emit("close")})),s}},14089:function(t){"use strict";t.exports={relay:"/libp2p/circuit/relay/0.1.0"}},14986:function(t,e,r){"use strict";r(21703);var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-circuit"]||(n.roots["libp2p-circuit"]={});a.CircuitRelay=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.type=1,t.prototype.srcPeer=null,t.prototype.dstPeer=null,t.prototype.code=100,t.encode=function(t,e){return e||(e=o.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int32(t.type),null!=t.srcPeer&&Object.hasOwnProperty.call(t,"srcPeer")&&a.CircuitRelay.Peer.encode(t.srcPeer,e.uint32(18).fork()).ldelim(),null!=t.dstPeer&&Object.hasOwnProperty.call(t,"dstPeer")&&a.CircuitRelay.Peer.encode(t.dstPeer,e.uint32(26).fork()).ldelim(),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&e.uint32(32).int32(t.code),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.CircuitRelay;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.type=t.int32();break;case 2:n.srcPeer=a.CircuitRelay.Peer.decode(t,t.uint32());break;case 3:n.dstPeer=a.CircuitRelay.Peer.decode(t,t.uint32());break;case 4:n.code=t.int32();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.CircuitRelay)return t;var e=new a.CircuitRelay;switch(t.type){case"HOP":case 1:e.type=1;break;case"STOP":case 2:e.type=2;break;case"STATUS":case 3:e.type=3;break;case"CAN_HOP":case 4:e.type=4;break}if(null!=t.srcPeer){if("object"!==typeof t.srcPeer)throw TypeError(".CircuitRelay.srcPeer: object expected");e.srcPeer=a.CircuitRelay.Peer.fromObject(t.srcPeer)}if(null!=t.dstPeer){if("object"!==typeof t.dstPeer)throw TypeError(".CircuitRelay.dstPeer: object expected");e.dstPeer=a.CircuitRelay.Peer.fromObject(t.dstPeer)}switch(t.code){case"SUCCESS":case 100:e.code=100;break;case"HOP_SRC_ADDR_TOO_LONG":case 220:e.code=220;break;case"HOP_DST_ADDR_TOO_LONG":case 221:e.code=221;break;case"HOP_SRC_MULTIADDR_INVALID":case 250:e.code=250;break;case"HOP_DST_MULTIADDR_INVALID":case 251:e.code=251;break;case"HOP_NO_CONN_TO_DST":case 260:e.code=260;break;case"HOP_CANT_DIAL_DST":case 261:e.code=261;break;case"HOP_CANT_OPEN_DST_STREAM":case 262:e.code=262;break;case"HOP_CANT_SPEAK_RELAY":case 270:e.code=270;break;case"HOP_CANT_RELAY_TO_SELF":case 280:e.code=280;break;case"STOP_SRC_ADDR_TOO_LONG":case 320:e.code=320;break;case"STOP_DST_ADDR_TOO_LONG":case 321:e.code=321;break;case"STOP_SRC_MULTIADDR_INVALID":case 350:e.code=350;break;case"STOP_DST_MULTIADDR_INVALID":case 351:e.code=351;break;case"STOP_RELAY_REFUSED":case 390:e.code=390;break;case"MALFORMED_MESSAGE":case 400:e.code=400;break}return e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.type=e.enums===String?"HOP":1,r.srcPeer=null,r.dstPeer=null,r.code=e.enums===String?"SUCCESS":100),null!=t.type&&t.hasOwnProperty("type")&&(r.type=e.enums===String?a.CircuitRelay.Type[t.type]:t.type),null!=t.srcPeer&&t.hasOwnProperty("srcPeer")&&(r.srcPeer=a.CircuitRelay.Peer.toObject(t.srcPeer,e)),null!=t.dstPeer&&t.hasOwnProperty("dstPeer")&&(r.dstPeer=a.CircuitRelay.Peer.toObject(t.dstPeer,e)),null!=t.code&&t.hasOwnProperty("code")&&(r.code=e.enums===String?a.CircuitRelay.Status[t.code]:t.code),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.Status=function(){var t={},e=Object.create(t);return e[t[100]="SUCCESS"]=100,e[t[220]="HOP_SRC_ADDR_TOO_LONG"]=220,e[t[221]="HOP_DST_ADDR_TOO_LONG"]=221,e[t[250]="HOP_SRC_MULTIADDR_INVALID"]=250,e[t[251]="HOP_DST_MULTIADDR_INVALID"]=251,e[t[260]="HOP_NO_CONN_TO_DST"]=260,e[t[261]="HOP_CANT_DIAL_DST"]=261,e[t[262]="HOP_CANT_OPEN_DST_STREAM"]=262,e[t[270]="HOP_CANT_SPEAK_RELAY"]=270,e[t[280]="HOP_CANT_RELAY_TO_SELF"]=280,e[t[320]="STOP_SRC_ADDR_TOO_LONG"]=320,e[t[321]="STOP_DST_ADDR_TOO_LONG"]=321,e[t[350]="STOP_SRC_MULTIADDR_INVALID"]=350,e[t[351]="STOP_DST_MULTIADDR_INVALID"]=351,e[t[390]="STOP_RELAY_REFUSED"]=390,e[t[400]="MALFORMED_MESSAGE"]=400,e}(),t.Type=function(){var t={},e=Object.create(t);return e[t[1]="HOP"]=1,e[t[2]="STOP"]=2,e[t[3]="STATUS"]=3,e[t[4]="CAN_HOP"]=4,e}(),t.Peer=function(){function t(t){if(this.addrs=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.id=s.newBuffer([]),t.prototype.addrs=s.emptyArray,t.encode=function(t,e){if(e||(e=o.create()),e.uint32(10).bytes(t.id),null!=t.addrs&&t.addrs.length)for(var r=0;r<t.addrs.length;++r)e.uint32(18).bytes(t.addrs[r]);return e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.CircuitRelay.Peer;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.id=t.bytes();break;case 2:n.addrs&&n.addrs.length||(n.addrs=[]),n.addrs.push(t.bytes());break;default:t.skipType(7&o);break}}if(!n.hasOwnProperty("id"))throw s.ProtocolError("missing required 'id'",{instance:n});return n},t.fromObject=function(t){if(t instanceof a.CircuitRelay.Peer)return t;var e=new a.CircuitRelay.Peer;if(null!=t.id&&("string"===typeof t.id?s.base64.decode(t.id,e.id=s.newBuffer(s.base64.length(t.id)),0):t.id.length&&(e.id=t.id)),t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".CircuitRelay.Peer.addrs: array expected");e.addrs=[];for(var r=0;r<t.addrs.length;++r)"string"===typeof t.addrs[r]?s.base64.decode(t.addrs[r],e.addrs[r]=s.newBuffer(s.base64.length(t.addrs[r])),0):t.addrs[r].length&&(e.addrs[r]=t.addrs[r])}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.addrs=[]),e.defaults&&(e.bytes===String?r.id="":(r.id=[],e.bytes!==Array&&(r.id=s.newBuffer(r.id)))),null!=t.id&&t.hasOwnProperty("id")&&(r.id=e.bytes===String?s.base64.encode(t.id,0,t.id.length):e.bytes===Array?Array.prototype.slice.call(t.id):t.id),t.addrs&&t.addrs.length){r.addrs=[];for(var n=0;n<t.addrs.length;++n)r.addrs[n]=e.bytes===String?s.base64.encode(t.addrs[n],0,t.addrs[n].length):e.bytes===Array?Array.prototype.slice.call(t.addrs[n]):t.addrs[n]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t}(),t.exports=a},88611:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:circuit"),{error:n("libp2p:circuit:err")}),o=r(19998),s=r(49605),{Multiaddr:a}=r(19391),u=r(68292),{CircuitRelay:c}=r(14986),{codes:h}=r(65461),l=r(24624),{relay:f}=r(14089),d=r(45617),{handleCanHop:p,handleHop:y,hop:g}=r(6781),{handleStop:m}=r(38397),b=r(10343),w=Symbol.for("@libp2p/js-libp2p-circuit/circuit");class v{constructor({libp2p:t,upgrader:e}){this._dialer=t.dialer,this._registrar=t.registrar,this._connectionManager=t.connectionManager,this._upgrader=e,this._options=t._config.relay,this._libp2p=t,this.peerId=t.peerId,this._registrar.handle(f,this._onProtocol.bind(this))}async _onProtocol({connection:t,stream:e}){const r=new b({stream:e}),n=await r.read();if(!n)return;const o=this;let s;switch(n.type){case c.Type.CAN_HOP:i("received CAN_HOP request from %s",t.remotePeer.toB58String()),await p({circuit:o,connection:t,streamHandler:r});break;case c.Type.HOP:i("received HOP request from %s",t.remotePeer.toB58String()),s=await y({connection:t,request:n,streamHandler:r,circuit:o});break;case c.Type.STOP:i("received STOP request from %s",t.remotePeer.toB58String()),s=await m({connection:t,request:n,streamHandler:r});break;default:i("Request of type %s not supported",n.type)}if(s){const t=new a(n.dstPeer.addrs[0]),e=new a(n.srcPeer.addrs[0]),r=l({stream:s,remoteAddr:t,localAddr:e}),o=n.type===c.Type.HOP?"relay":"inbound";i("new %s connection %s",o,r.remoteAddr);const u=await this._upgrader.upgradeInbound(r);i("%s connection %s upgraded",o,r.remoteAddr),this.handler&&this.handler(u)}}async dial(t,e){const r=t.toString().split("/p2p-circuit"),n=new a(r[0]),s=new a(r[r.length-1]),f=n.getPeerId(),d=s.getPeerId();if(!f||!d){const t="Circuit relay dial failed as addresses did not have peer id";throw i.error(t),o(new Error(t),h.ERR_RELAYED_DIAL)}const p=u.createFromB58String(f),y=u.createFromB58String(d);let m=!1,b=this._connectionManager.get(p);b||(b=await this._dialer.connectToPeer(n,e),m=!0);try{const e=await g({connection:b,request:{type:c.Type.HOP,srcPeer:{id:this.peerId.toBytes(),addrs:this._libp2p.multiaddrs.map((t=>t.bytes))},dstPeer:{id:y.toBytes(),addrs:[new a(s).bytes]}}}),r=n.encapsulate(`/p2p-circuit/p2p/${this.peerId.toB58String()}`),o=l({stream:e,remoteAddr:t,localAddr:r});return i("new outbound connection %s",o.remoteAddr),this._upgrader.upgradeOutbound(o)}catch(w){throw i.error("Circuit relay dial failed",w),m&&await b.close(),w}}createListener(t,e){return"function"===typeof t&&(e=t,t={}),this.handler=e,d(this._libp2p)}filter(t){return t=Array.isArray(t)?t:[t],t.filter((t=>s.Circuit.matches(t)))}get[Symbol.toStringTag](){return"Circuit"}static isTransport(t){return Boolean(t&&t[w])}}t.exports=v},37472:function(t,e,r){"use strict";const{CID:n}=r(59329),{sha256:i}=r(51919);t.exports.namespaceToCid=async t=>{const e=(new TextEncoder).encode(t),r=await i.digest(e);return n.createV0(r)}},23083:function(t,e,r){"use strict";r(21703);const n=r(80535),{dnsaddrResolver:i}=r(51180),o=r(53192),{AGENT_VERSION:s}=r(78903),a=r(90966),{publicAddressesFirst:u}=r(4300),{FaultTolerance:c}=r(88647),h={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{minConnections:25},connectionGater:{},transportManager:{faultTolerance:c.FATAL_ALL},dialer:{maxParallelDials:o.MAX_PARALLEL_DIALS,maxDialsPerPeer:o.MAX_PER_PEER_DIALS,dialTimeout:o.DIAL_TIMEOUT,resolvers:{dnsaddr:i},addressSorter:u},host:{agentVersion:s},metrics:{enabled:!1},peerStore:{persistence:!1,threshold:5},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},config:{protocolPrefix:"ipfs",dht:{enabled:!1,kBucketSize:20},nat:{enabled:!0,ttl:7200,keepAlive:!0,gateway:null,externalIp:null,pmp:{enabled:!1}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0},relay:{enabled:!0,advertise:{bootDelay:a.ADVERTISE_BOOT_DELAY,enabled:!1,ttl:a.ADVERTISE_TTL},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},transport:{}}};t.exports.validate=t=>{const e=n(h,t);if(e.modules.transport.length<1)throw new Error("'options.modules.transport' must contain at least 1 transport");return e}},65638:function(t,e,r){"use strict";const n=r(15652),i=r(80535),o=r(3057),s=r(97192),{pipe:a}=r(62100),u=r(13726),c=r(80640),h=Object.assign(n("libp2p:connection-manager:auto-dialler"),{error:n("libp2p:connection-manager:auto-dialler:err")}),l={enabled:!0,minConnections:0,autoDialInterval:1e4};class f{constructor(t,e={}){this._options=i.call({ignoreUndefined:!0},l,e),this._libp2p=t,this._running=!1,this._autoDialTimeout=null,this._autoDial=this._autoDial.bind(this),h("options: %j",this._options)}async start(){this._options.enabled?(this._running=!0,this._autoDial().catch((t=>{h.error("could start autodial",t)})),h("started")):h("not enabled")}async stop(){this._options.enabled?(this._running=!1,this._autoDialTimeout&&this._autoDialTimeout.clear(),h("stopped")):h("not enabled")}async _autoDial(){const t=this._options.minConnections;if(this._libp2p.connections.size>=t)return void(this._autoDialTimeout=o(this._autoDial,this._options.autoDialInterval));const e=await a(this._libp2p.peerStore.getPeers(),(t=>u(t,(t=>!t.id.equals(this._libp2p.peerId)))),(t=>c(t,((t,e)=>!e.protocols||!e.protocols.length||t.protocols&&t.protocols.length?e.id.pubKey&&!t.id.pubKey?1:-1:1))),(t=>s(t)));for(let n=0;this._running&&n<e.length&&this._libp2p.connections.size<t;n++){const t=e[n];if(!this._libp2p.connectionManager.get(t.id)){h("connecting to a peerStore stored peer %s",t.id.toB58String());try{await this._libp2p.dialer.connectToPeer(t.id)}catch(r){h.error("could not connect to peerStore stored peer",r)}}}this._running&&(this._autoDialTimeout=o(this._autoDial,this._options.autoDialInterval))}}t.exports=f},19520:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:connection-manager"),{error:n("libp2p:connection-manager:err")}),o=r(19998),s=r(80535),a=r(11085),u=r(3057),{EventEmitter:c}=r(43793),h=r(58314),l=r(68292),{codes:{ERR_INVALID_PARAMETERS:f}}=r(65461),d={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:1},p="connection-manager",y="peer-connections",g="peer-values";class m extends c{constructor(t,e={}){if(super(),this._libp2p=t,this._peerId=t.peerId.toB58String(),this._options=s.call({ignoreUndefined:!0},d,e),this._options.maxConnections<this._options.minConnections)throw o(new Error("Connection Manager maxConnections must be greater than minConnections"),f);i("options: %j",this._options),this._peerValues=h({component:p,metric:g,metrics:this._libp2p.metrics}),this.connections=h({component:p,metric:y,metrics:this._libp2p.metrics}),this._started=!1,this._timer=null,this._checkMetrics=this._checkMetrics.bind(this),this._latencyMonitor=new a({latencyCheckIntervalMs:this._options.pollInterval,dataEmitIntervalMs:this._options.pollInterval}),this.setMaxListeners(1/0)}get size(){return Array.from(this.connections.values()).reduce(((t,e)=>t+e.length),0)}start(){this._libp2p.metrics&&(this._timer=this._timer||u(this._checkMetrics,this._options.pollInterval)),this._latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure),this._started=!0,i("started")}async stop(){this._timer&&this._timer.clear(),this._latencyMonitor.removeListener("data",this._onLatencyMeasure),this._latencyMonitor.stop(),this._started=!1,await this._close(),i("stopped")}async _close(){const t=[];for(const e of this.connections.values())for(const r of e)t.push(r.close());await Promise.all(t),this.connections.clear()}setPeerValue(t,e){if(e<0||e>1)throw new Error("value should be a number between 0 and 1");this._peerValues.set(t.toB58String(),e)}async _checkMetrics(){if(this._libp2p.metrics)try{const t=this._libp2p.metrics.global.movingAverages,e=t.dataReceived[this._options.movingAverageInterval].movingAverage();await this._checkMaxLimit("maxReceivedData",e);const r=t.dataSent[this._options.movingAverageInterval].movingAverage();await this._checkMaxLimit("maxSentData",r);const n=e+r;await this._checkMaxLimit("maxData",n),i("metrics update",n)}finally{this._timer=u(this._checkMetrics,this._options.pollInterval)}}async onConnect(t){if(!this._started)return void await t.close();const e=t.remotePeer,r=e.toB58String(),n=this.connections.get(r);this.emit("peer:connect",t),n?n.push(t):this.connections.set(r,[t]),await this._libp2p.peerStore.keyBook.set(e,e.pubKey),this._peerValues.has(r)||this._peerValues.set(r,this._options.defaultPeerValue),await this._checkMaxLimit("maxConnections",this.size)}onDisconnect(t){if(!this._started)return;const e=t.remotePeer.toB58String();let r=this.connections.get(e);r&&r.length>1?(r=r.filter((e=>e.id!==t.id)),this.connections.set(e,r)):r&&(this.connections.delete(e),this._peerValues.delete(t.remotePeer.toB58String()),this.emit("peer:disconnect",t),this._libp2p.metrics&&this._libp2p.metrics.onPeerDisconnected(t.remotePeer))}get(t){const e=this.getAll(t);return e.length?e[0]:null}getAll(t){if(!l.isPeerId(t))throw o(new Error("peerId must be an instance of peer-id"),f);const e=t.toB58String(),r=this.connections.get(e);return r?r.filter((t=>"open"===t.stat.status)):[]}_onLatencyMeasure(t){this._checkMaxLimit("maxEventLoopDelay",t.avgMs).catch((t=>{i.error(t)}))}async _checkMaxLimit(t,e){const r=this._options[t];i("checking limit of %s. current value: %d of %d",t,e,r),e>r&&(i("%s: limit exceeded: %s, %d",this._peerId,t,e),await this._maybeDisconnectOne())}async _maybeDisconnectOne(){if(this._options.minConnections<this.connections.size){const t=Array.from(new Map([...this._peerValues.entries()].sort(((t,e)=>t[1]-e[1]))));i("%s: sorted peer values: %j",this._peerId,t);const e=t[0];if(e){const t=e[0];i("%s: lowest value peer is %s",this._peerId,t),i("%s: closing a connection to %j",this._peerId,t);for(const e of this.connections.values())if(e[0].remotePeer.toB58String()===t){e[0].close().catch((t=>{i.error(t)})),this.onDisconnect(e[0]);break}}}}}t.exports=m},11085:function(t,e,r){"use strict";const{EventEmitter:n}=r(43793),i=r(44817),o=r(15652)("latency-monitor:LatencyMonitor");class s extends n{constructor({latencyCheckIntervalMs:t,dataEmitIntervalMs:e,asyncTestFn:r,latencyRandomPercentage:n}={}){super();const i=this;i.latencyCheckIntervalMs=t||500,i.latencyRandomPercentage=n||10,i._latecyCheckMultiply=i.latencyRandomPercentage/100*2*i.latencyCheckIntervalMs,i._latecyCheckSubtract=i._latecyCheckMultiply/2,i.dataEmitIntervalMs=null===e||0===e?void 0:e||5e3,o("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",i.latencyCheckIntervalMs,i.dataEmitIntervalMs),i.dataEmitIntervalMs?o("Expecting ~%s events per summary",i.latencyCheckIntervalMs/i.dataEmitIntervalMs):o("Not emitting summaries"),i.asyncTestFn=r}start(){globalThis.process&&globalThis.process.hrtime?(o("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=t=>{const e=this.now(t);return 1e3*e[0]+e[1]/1e6}):"undefined"!==typeof window&&window.performance&&window.performance.now?(o("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=t=>Math.round(this.now()-t)):(o("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=t=>this.now()-t),this._latencyData=this._initLatencyData(),a()&&(this._visibilityChangeEmitter=new i,this._visibilityChangeEmitter.on("visibilityChange",(t=>{t?this._startTimers():(this._emitSummary(),this._stopTimers())}))),this._visibilityChangeEmitter&&!this._visibilityChangeEmitter.isVisible()||this._startTimers()}stop(){this._stopTimers()}_startTimers(){this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"===typeof this._emitIntervalID.unref&&this._emitIntervalID.unref()))}_stopTimers(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}_emitSummary(){const t=this.getSummary();t.events>0&&this.emit("data",t)}getSummary(){const t={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),o("Summary: %O",t),t}_checkLatency(){const t=this,e=Math.random()*t._latecyCheckMultiply-t._latecyCheckSubtract,r={deltaOffset:Math.ceil(t.latencyCheckIntervalMs+e),startTime:t.now()},n=()=>{if(!this._checkLatencyID)return;const e=t.getDeltaMS(r.startTime)-r.deltaOffset;t._checkLatency(),t._latencyData.events++,t._latencyData.minMs=Math.min(t._latencyData.minMs,e),t._latencyData.maxMs=Math.max(t._latencyData.maxMs,e),t._latencyData.totalMs+=e,o("MS: %s Data: %O",e,t._latencyData)};o("localData: %O",r),this._checkLatencyID=setTimeout((()=>{t.asyncTestFn?(r.deltaOffset=0,r.startTime=t.now(),t.asyncTestFn(n)):(r.deltaOffset-=1,n())}),r.deltaOffset),"function"===typeof this._checkLatencyID.unref&&this._checkLatencyID.unref()}_initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}function a(){return"undefined"!==typeof window}t.exports=s},44817:function(t,e,r){"use strict";const{EventEmitter:n}=r(43793),i=r(15652)("latency-monitor:VisibilityChangeEmitter");class o extends n{constructor(){super(),"undefined"!==typeof document?(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener()):i('This is not a browser, no "document" found. Stopping.')}_initializeVisibilityVarNames(){let t,e;"undefined"!==typeof document.hidden?(t="hidden",e="visibilitychange"):"undefined"!==typeof document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(t="msHidden",e="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),this._hidden=t,this._visibilityChange=e}_addVisibilityChangeListener(){"undefined"===typeof document.addEventListener||"undefined"===typeof document[this._hidden]?i("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this._hidden&&void 0!==document[this._hidden])return!document[this._hidden]}_handleVisibilityChange(){const t=!document[this._hidden];i(t?"Page Visible":"Page Hidden"),this.emit("visibilityChange",t)}}t.exports=o},53192:function(t){"use strict";t.exports={DIAL_TIMEOUT:3e4,MAX_PARALLEL_DIALS:100,MAX_PER_PEER_DIALS:4,MAX_ADDRS_TO_DIAL:25,METRICS:{computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50}}},2395:function(t,e,r){"use strict";r(21703);const n=r(19998),{messages:i,codes:o}=r(65461),{storeAddresses:s,uniquePeers:a,requirePeers:u,maybeLimitSource:c}=r(74315),h=r(29164),l=r(10940),{pipe:f}=r(62100),{DHTContentRouting:d}=r(29797);class p{constructor(t){this.libp2p=t,this.routers=t._modules.contentRouting||[],this.dht=t._dht,this.dht&&t._config.dht.enabled&&this.routers.push(new d(this.dht))}async*findProviders(t,e={}){if(!this.routers.length)throw n(new Error("No content this.routers available"),o.ERR_NO_ROUTERS_AVAILABLE);yield*f(l(...this.routers.map((r=>r.findProviders(t,e)))),(t=>s(t,this.libp2p.peerStore)),(t=>a(t)),(t=>c(t,e.maxNumProviders)),(t=>u(t)))}async provide(t){if(!this.routers.length)throw n(new Error("No content routers available"),o.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((e=>e.provide(t))))}async put(t,e,r){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw n(new Error(i.NOT_STARTED_YET),o.DHT_NOT_STARTED);await h(this.dht.put(t,e,r))}async get(t,e){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw n(new Error(i.NOT_STARTED_YET),o.DHT_NOT_STARTED);for await(const r of this.dht.get(t,e))if("VALUE"===r.name)return{from:r.peerId,val:r.value};throw n(new Error(i.NOT_FOUND),o.ERR_NOT_FOUND)}async*getMany(t,e,r){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw n(new Error(i.NOT_STARTED_YET),o.DHT_NOT_STARTED);if(!e)return;let s=0;for await(const n of this.dht.get(t,r))if("VALUE"===n.name&&(yield{from:n.peerId,val:n.value},s++,s===e))break;if(0===s)throw n(new Error(i.NOT_FOUND),o.ERR_NOT_FOUND)}}t.exports=p},74315:function(t,e,r){"use strict";r(21703);const n=r(19998),i=r(13726),o=r(79927),s=r(16855);async function*a(t,e){yield*o(t,(async t=>(await e.addressBook.add(t.id,t.multiaddrs),t)))}function u(t){const e=new Set;return i(t,(t=>!e.has(t.id.toString())&&(e.add(t.id.toString()),!0)))}async function*c(t,e=1){let r=0;for await(const n of t)r++,yield n;if(r<e)throw n(new Error("not found"),"NOT_FOUND")}function h(t,e){return e?s(t,e):t}t.exports={storeAddresses:a,uniquePeers:u,requirePeers:c,maybeLimitSource:h}},29797:function(t,e,r){"use strict";const n=r(29164);class i{constructor(t){this._dht=t}async provide(t){await n(this._dht.provide(t))}async*findProviders(t,e){for await(const r of this._dht.findProviders(t,e))"PROVIDER"===r.name&&(yield*r.providers)}}t.exports={DHTContentRouting:i}},54618:function(t,e,r){"use strict";r(21703);const n=r(19998),{messages:i,codes:o}=r(65461);class s{constructor(t){this._dht=t}async findPeer(t,e={}){for await(const r of this._dht.findPeer(t,e))if("FINAL_PEER"===r.name)return r.peer;throw n(new Error(i.NOT_FOUND),o.ERR_NOT_FOUND)}async*getClosestPeers(t,e={}){for await(const r of this._dht.getClosestPeers(t,e))"PEER_RESPONSE"===r.name&&(yield*r.closer)}}t.exports={DHTPeerRouting:s}},957:function(t,e,r){"use strict";r(21703);const n=r(19998),{anySignal:i}=r(74908),o=r(1838),s=r(27633),{setMaxListeners:a}=r(43793),{codes:u}=r(65461);class c{constructor({addrs:t,dialAction:e,dialer:r}){this.addrs=t,this.dialer=r,this.dialAction=e}async run(t={}){const e=this.dialer.getTokens(this.addrs.length);if(e.length<1)throw n(new Error("No dial tokens available"),u.ERR_NO_DIAL_TOKENS);const r=new o;e.forEach((t=>r.push(t)));const c=this.addrs.map((()=>{const t=new AbortController;try{a&&a(1/0,t.signal)}catch{}return t}));let h=0;try{return await s(this.addrs.map((async(n,o)=>{const s=await r.shift();let a;try{const u=c[o].signal;a=await this.dialAction(n,{...t,signal:t.signal?i([u,t.signal]):u}),c.splice(o,1)}finally{h++,this.addrs.length-h>=e.length?r.push(s):this.dialer.releaseToken(e.splice(e.indexOf(s),1)[0])}return a})))}finally{c.map((t=>t.abort())),e.forEach((t=>this.dialer.releaseToken(t)))}}}t.exports=c},71986:function(t,e,r){"use strict";r(21703),r(26699);const n=r(15652),i=r(97192),o=r(13726),{pipe:s}=r(62100),a=Object.assign(n("libp2p:dialer"),{error:n("libp2p:dialer:err")}),u=r(19998),{Multiaddr:c}=r(19391),{TimeoutController:h}=r(22856),{AbortError:l}=r(87602),{anySignal:f}=r(74908),{setMaxListeners:d}=r(43793),p=r(957),{publicAddressesFirst:y}=r(4300),g=r(35383),m=r(58314),{codes:b}=r(65461),{DIAL_TIMEOUT:w,MAX_PARALLEL_DIALS:v,MAX_PER_PEER_DIALS:_,MAX_ADDRS_TO_DIAL:E}=r(53192),S="dialler",A="pending-dials",I="pending-dial-targets";class T{constructor({transportManager:t,peerStore:e,connectionGater:r,addressSorter:n=y,maxParallelDials:i=v,maxAddrsToDial:o=E,dialTimeout:s=w,maxDialsPerPeer:a=_,resolvers:u={},metrics:h}){this.connectionGater=r,this.transportManager=t,this.peerStore=e,this.addressSorter=n,this.maxParallelDials=i,this.maxAddrsToDial=o,this.timeout=s,this.maxDialsPerPeer=a,this.tokens=[...new Array(i)].map(((t,e)=>e)),this._pendingDials=m({component:S,metric:A,metrics:h}),this._pendingDialTargets=m({component:S,metric:I,metrics:h});for(const[l,f]of Object.entries(u))c.resolvers.set(l,f)}destroy(){for(const e of this._pendingDials.values())try{e.controller.abort()}catch(t){a.error(t)}this._pendingDials.clear();for(const e of this._pendingDialTargets.values())e.reject(new l("Dialer was destroyed"));this._pendingDialTargets.clear()}async connectToPeer(t,e={}){const{id:r}=g(t);if(await this.connectionGater.denyDialPeer(r))throw u(new Error("The dial request is blocked by gater.allowDialPeer"),b.ERR_PEER_DIAL_INTERCEPTED);const n=await this._createCancellableDialTarget(t);if(!n.addrs.length)throw u(new Error("The dial request has no valid addresses"),b.ERR_NO_VALID_ADDRESSES);const i=this._pendingDials.get(n.id)||this._createPendingDial(n,e);try{const t=await i.promise;return a("dial succeeded to %s",n.id),t}catch(o){throw i.controller.signal.aborted&&(o.code=b.ERR_TIMEOUT),a.error(o),o}finally{i.destroy()}}async _createCancellableDialTarget(t){const e=`${parseInt(String(1e9*Math.random()),10).toString()+Date.now()}`,r=new Promise(((t,r)=>{this._pendingDialTargets.set(e,{resolve:t,reject:r})}));try{const n=await Promise.race([this._createDialTarget(t),r]);return n}finally{this._pendingDialTargets.delete(e)}}async _createDialTarget(t){const{id:e,multiaddrs:r}=g(t);r&&await this.peerStore.addressBook.add(e,r);let n=await s(await this.peerStore.addressBook.getMultiaddrsForPeer(e,this.addressSorter),(t=>o(t,(async t=>!await this.connectionGater.denyDialMultiaddr(e,t)))),(t=>i(t)));c.isMultiaddr(t)&&(n=n.filter((e=>!t.equals(e))),n.unshift(t));const a=[];for(const i of n){const t=await this._resolve(i);t.forEach((t=>a.push(t)))}const h=a.filter((t=>this.transportManager.transportForMultiaddr(t)));if(h.length>this.maxAddrsToDial)throw await this.peerStore.delete(e),u(new Error("dial with more addresses than allowed"),b.ERR_TOO_MANY_ADDRESSES);return{id:e.toB58String(),addrs:h}}_createPendingDial(t,e={}){const r=(t,e)=>{if(e.signal.aborted)throw u(new Error("already aborted"),b.ERR_ALREADY_ABORTED);return this.transportManager.dial(t,e)},n=new p({addrs:t.addrs,dialAction:r,dialer:this}),i=new h(this.timeout),o=[i.signal];e.signal&&o.push(e.signal);const s=f(o);try{d&&d(1/0,s)}catch{}const a={dialRequest:n,controller:i,promise:n.run({...e,signal:s}),destroy:()=>{i.clear(),this._pendingDials.delete(t.id)}};return this._pendingDials.set(t.id,a),a}getTokens(t){const e=Math.min(t,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,e);return a("%d tokens request, returning %d, %d remaining",t,e,this.tokens.length),r}releaseToken(t){this.tokens.indexOf(t)>-1||(a("token %d released",t),this.tokens.push(t))}async _resolve(t){const e=t.protoNames().includes("dnsaddr");if(!e)return[t];const r=await this._resolveRecord(t),n=await Promise.all(r.map((t=>this._resolve(t)))),i=n.flat();return i.reduce(((t,e)=>(t.find((t=>t.equals(e)))||t.push(e),t)),[])}async _resolveRecord(t){try{t=new c(t.toString());const e=await t.resolve();return e}catch(e){return a.error(`multiaddr ${t} could not be resolved`),[]}}}t.exports=T},65461:function(t,e){"use strict";e.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required",NOT_FOUND:"Not found"},e.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_PEER_DIAL_INTERCEPTED:"ERR_PEER_DIAL_INTERCEPTED",ERR_CONNECTION_INTERCEPTED:"ERR_CONNECTION_INTERCEPTED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_NOT_FOUND:"ERR_NOT_FOUND",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID",ERR_FIND_SELF:"ERR_FIND_SELF",ERR_NO_ROUTERS_AVAILABLE:"ERR_NO_ROUTERS_AVAILABLE",ERR_CONNECTION_NOT_MULTIPLEXED:"ERR_CONNECTION_NOT_MULTIPLEXED",ERR_NO_DIAL_TOKENS:"ERR_NO_DIAL_TOKENS",ERR_KEYCHAIN_REQUIRED:"ERR_KEYCHAIN_REQUIRED",ERR_INVALID_CMS:"ERR_INVALID_CMS",ERR_MISSING_KEYS:"ERR_MISSING_KEYS",ERR_NO_KEY:"ERR_NO_KEY",ERR_INVALID_KEY_NAME:"ERR_INVALID_KEY_NAME",ERR_INVALID_KEY_TYPE:"ERR_INVALID_KEY_TYPE",ERR_KEY_ALREADY_EXISTS:"ERR_KEY_ALREADY_EXISTS",ERR_INVALID_KEY_SIZE:"ERR_INVALID_KEY_SIZE",ERR_KEY_NOT_FOUND:"ERR_KEY_NOT_FOUND",ERR_OLD_KEY_NAME_INVALID:"ERR_OLD_KEY_NAME_INVALID",ERR_NEW_KEY_NAME_INVALID:"ERR_NEW_KEY_NAME_INVALID",ERR_PASSWORD_REQUIRED:"ERR_PASSWORD_REQUIRED",ERR_PEM_REQUIRED:"ERR_PEM_REQUIRED",ERR_CANNOT_READ_KEY:"ERR_CANNOT_READ_KEY",ERR_MISSING_PRIVATE_KEY:"ERR_MISSING_PRIVATE_KEY",ERR_INVALID_OLD_PASS_TYPE:"ERR_INVALID_OLD_PASS_TYPE",ERR_INVALID_NEW_PASS_TYPE:"ERR_INVALID_NEW_PASS_TYPE",ERR_INVALID_PASS_LENGTH:"ERR_INVALID_PASS_LENGTH",ERR_NOT_IMPLEMENTED:"ERR_NOT_IMPLEMENTED",ERR_WRONG_PING_ACK:"ERR_WRONG_PING_ACK"}},65623:function(t){"use strict";t.exports={PROTOCOL:"/libp2p/fetch/0.0.1"}},29161:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:fetch"),{error:n("libp2p:fetch:err")}),o=r(19998),{codes:s}=r(65461),a=r(92992),{FetchRequest:u,FetchResponse:c}=r(43594),h=r(737),{PROTOCOL:l}=r(65623);class f{constructor(t){this._lookupFunctions=new Map,this._libp2p=t,this.handleMessage=this.handleMessage.bind(this)}async fetch(t,e){i("dialing %s to %s",this._protocol,t.toB58String?t.toB58String():t);const r=await this._libp2p.dial(t),{stream:n}=await r.newStream(f.PROTOCOL),l=h(n),d=new u({identifier:e});l.write(a.encode.single(u.encode(d).finish()));const p=c.decode((await a.decode.fromReader(l.reader).next()).value.slice());switch(p.status){case c.StatusCode.OK:return p.data;case c.StatusCode.NOT_FOUND:return null;case c.StatusCode.ERROR:{const t=(new TextDecoder).decode(p.data);throw o(new Error("Error in fetch protocol response: "+t),s.ERR_INVALID_PARAMETERS)}default:throw o(new Error("Unknown response status"),s.ERR_INVALID_MESSAGE)}}async handleMessage(t){const{stream:e}=t,r=h(e),n=u.decode((await a.decode.fromReader(r.reader).next()).value.slice());let i;const o=this._getLookupFunction(n.identifier);if(o){const t=await o(n.identifier);i=new c(t?{status:c.StatusCode.OK,data:t}:{status:c.StatusCode.NOT_FOUND})}else{const t=(new TextEncoder).encode("No lookup function registered for key: "+n.identifier);i=new c({status:c.StatusCode.ERROR,data:t})}r.write(a.encode.single(c.encode(i).finish()))}_getLookupFunction(t){for(const e of this._lookupFunctions.keys())if(t.startsWith(e))return this._lookupFunctions.get(e);return null}registerLookupFunction(t,e){if(this._lookupFunctions.has(t))throw o(new Error("Fetch protocol handler for key prefix '"+t+"' already registered"),s.ERR_KEY_ALREADY_EXISTS);this._lookupFunctions.set(t,e)}unregisterLookupFunction(t,e){if(null!=e){const r=this._lookupFunctions.get(t);if(r!==e)return}this._lookupFunctions.delete(t)}}f.PROTOCOL=l,t.exports=f},43594:function(t,e,r){"use strict";var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-fetch"]||(n.roots["libp2p-fetch"]={});a.FetchRequest=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.identifier="",t.encode=function(t,e){return e||(e=o.create()),null!=t.identifier&&Object.hasOwnProperty.call(t,"identifier")&&e.uint32(10).string(t.identifier),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.FetchRequest;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.identifier=t.string();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.FetchRequest)return t;var e=new a.FetchRequest;return null!=t.identifier&&(e.identifier=String(t.identifier)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.identifier=""),null!=t.identifier&&t.hasOwnProperty("identifier")&&(r.identifier=t.identifier),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),a.FetchResponse=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.status=0,t.prototype.data=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),null!=t.status&&Object.hasOwnProperty.call(t,"status")&&e.uint32(8).int32(t.status),null!=t.data&&Object.hasOwnProperty.call(t,"data")&&e.uint32(18).bytes(t.data),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.FetchResponse;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.status=t.int32();break;case 2:n.data=t.bytes();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.FetchResponse)return t;var e=new a.FetchResponse;switch(t.status){case"OK":case 0:e.status=0;break;case"NOT_FOUND":case 1:e.status=1;break;case"ERROR":case 2:e.status=2;break}return null!=t.data&&("string"===typeof t.data?s.base64.decode(t.data,e.data=s.newBuffer(s.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.status=e.enums===String?"OK":0,e.bytes===String?r.data="":(r.data=[],e.bytes!==Array&&(r.data=s.newBuffer(r.data)))),null!=t.status&&t.hasOwnProperty("status")&&(r.status=e.enums===String?a.FetchResponse.StatusCode[t.status]:t.status),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?s.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.StatusCode=function(){var t={},e=Object.create(t);return e[t[0]="OK"]=0,e[t[1]="NOT_FOUND"]=1,e[t[2]="ERROR"]=2,e}(),t}(),t.exports=a},35383:function(t,e,r){"use strict";r(21703);const n=r(68292),{Multiaddr:i}=r(19391),o=r(19998),{codes:s}=r(65461);function a(t){let e;if("string"===typeof t&&(t=new i(t)),i.isMultiaddr(t)){e=t;const i=t.getPeerId();if(!i)throw o(new Error(`${t} does not have a valid peer type`),s.ERR_INVALID_MULTIADDR);try{t=n.createFromB58String(i)}catch(r){throw o(new Error(`${t} is not a valid peer type`),s.ERR_INVALID_MULTIADDR)}}return{id:t,multiaddrs:e?[e]:void 0}}t.exports=a},78903:function(t,e,r){"use strict";const n=r(28362).version;t.exports.PROTOCOL_VERSION="ipfs/0.1.0",t.exports.AGENT_VERSION=`js-libp2p/${n}`,t.exports.MULTICODEC_IDENTIFY="/ipfs/id/1.0.0",t.exports.MULTICODEC_IDENTIFY_PUSH="/ipfs/id/push/1.0.0",t.exports.IDENTIFY_PROTOCOL_VERSION="0.1.0",t.exports.MULTICODEC_IDENTIFY_PROTOCOL_NAME="id",t.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push",t.exports.MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0",t.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0"},65806:function(t,e,r){"use strict";r(26699),r(21703),r(48675),r(3462),r(37380),r(1118);const n=r(15652),i=Object.assign(n("libp2p:identify"),{error:n("libp2p:identify:err")}),o=r(19998),s=r(92992),{pipe:a}=r(62100),{collect:u,take:c,consume:h}=r(56163),{fromString:l}=r(92259),f=r(68292),{Multiaddr:d}=r(19391),{toBuffer:p}=r(26632),y=r(52255),g=r(81442),m=r(86664),{MULTICODEC_IDENTIFY:b,MULTICODEC_IDENTIFY_PUSH:w,IDENTIFY_PROTOCOL_VERSION:v,MULTICODEC_IDENTIFY_PROTOCOL_NAME:_,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME:E,MULTICODEC_IDENTIFY_PROTOCOL_VERSION:S,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION:A}=r(78903),{codes:I}=r(65461);class T{static getProtocolStr(t){return{identifyProtocolStr:`/${t._config.protocolPrefix}/${_}/${S}`,identifyPushProtocolStr:`/${t._config.protocolPrefix}/${E}/${A}`}}constructor({libp2p:t}){this._libp2p=t,this.peerStore=t.peerStore,this.addressManager=t.addressManager,this.connectionManager=t.connectionManager,this.peerId=t.peerId,this.handleMessage=this.handleMessage.bind(this);const e=T.getProtocolStr(t);this.identifyProtocolStr=e.identifyProtocolStr,this.identifyPushProtocolStr=e.identifyPushProtocolStr,this._host={protocolVersion:`${t._config.protocolPrefix}/${v}`,...t._options.host},this.connectionManager.on("peer:connect",(t=>{this.identify(t).catch(i.error)})),this.peerStore.on("change:multiaddrs",(({peerId:t})=>{t.toString()===this.peerId.toString()&&this.pushToPeerStore().catch((t=>i.error(t)))})),this.peerStore.on("change:protocols",(({peerId:t})=>{t.toString()===this.peerId.toString()&&this.pushToPeerStore().catch((t=>i.error(t)))}))}async start(){await this.peerStore.metadataBook.setValue(this.peerId,"AgentVersion",l(this._host.agentVersion)),await this.peerStore.metadataBook.setValue(this.peerId,"ProtocolVersion",l(this._host.protocolVersion))}async stop(){}async push(t){const e=await this.peerStore.addressBook.getRawEnvelope(this.peerId),r=this._libp2p.multiaddrs.map((t=>t.bytes)),n=await this.peerStore.protoBook.get(this.peerId),o=t.map((async t=>{try{const{stream:i}=await t.newStream(this.identifyPushProtocolStr);await a([y.Identify.encode({listenAddrs:r,signedPeerRecord:e,protocols:n}).finish()],s.encode(),i,h)}catch(o){i.error("could not push identify update to peer",o)}}));return Promise.all(o)}async pushToPeerStore(){if(!this._libp2p.isStarted())return;const t=[];let e;for await(const r of this.peerStore.getPeers())r.protocols.includes(this.identifyPushProtocolStr)&&(e=this.connectionManager.get(r.id))&&t.push(e);await this.push(t)}async identify(t){const{stream:e}=await t.newStream(this.identifyProtocolStr),[r]=await a([],e,s.decode(),c(1),p,u);if(!r)throw o(new Error("No data could be retrieved"),I.ERR_CONNECTION_ENDED);let n;try{n=y.Identify.decode(r)}catch(A){throw o(A,I.ERR_INVALID_MESSAGE)}const{publicKey:h,listenAddrs:b,protocols:w,observedAddr:v,signedPeerRecord:_}=n,E=await f.createFromPubKey(h);if(t.remotePeer.toB58String()!==E.toB58String())throw o(new Error("identified peer does not match the expected peer"),I.ERR_INVALID_PEER);const S=T.getCleanMultiaddr(v);try{const t=await g.openAndCertify(_,m.DOMAIN);if(await this.peerStore.addressBook.consumePeerRecord(t))return await this.peerStore.protoBook.set(E,w),await this.peerStore.metadataBook.setValue(E,"AgentVersion",l(n.agentVersion)),void await this.peerStore.metadataBook.setValue(E,"ProtocolVersion",l(n.protocolVersion))}catch(A){i("received invalid envelope, discard it and fallback to listenAddrs is available",A)}try{await this.peerStore.addressBook.set(E,b.map((t=>new d(t))))}catch(A){i.error("received invalid addrs",A)}await this.peerStore.protoBook.set(E,w),await this.peerStore.metadataBook.setValue(E,"AgentVersion",l(n.agentVersion)),await this.peerStore.metadataBook.setValue(E,"ProtocolVersion",l(n.protocolVersion)),i("received observed address of %s",S)}handleMessage({connection:t,stream:e,protocol:r}){switch(r){case this.identifyProtocolStr:return this._handleIdentify({connection:t,stream:e});case this.identifyPushProtocolStr:return this._handlePush({connection:t,stream:e});default:i.error("cannot handle unknown protocol %s",r)}}async _handleIdentify({connection:t,stream:e}){try{let r=new Uint8Array(0);this.peerId.pubKey&&(r=this.peerId.pubKey.bytes);const n=await this.peerStore.addressBook.getRawEnvelope(this.peerId),i=await this.peerStore.protoBook.get(this.peerId),o=y.Identify.encode({protocolVersion:this._host.protocolVersion,agentVersion:this._host.agentVersion,publicKey:r,listenAddrs:this._libp2p.multiaddrs.map((t=>t.bytes)),signedPeerRecord:n,observedAddr:t.remoteAddr.bytes,protocols:i}).finish();await a([o],s.encode(),e,h)}catch(r){i.error("could not respond to identify request",r)}}async _handlePush({connection:t,stream:e}){let r;try{const[t]=await a([],e,s.decode(),c(1),p,u);r=y.Identify.decode(t)}catch(o){return i.error("received invalid message",o)}const n=t.remotePeer;try{const t=await g.openAndCertify(r.signedPeerRecord,m.DOMAIN);if(await this.peerStore.addressBook.consumePeerRecord(t))return void await this.peerStore.protoBook.set(n,r.protocols)}catch(o){i("received invalid envelope, discard it and fallback to listenAddrs is available",o)}try{await this.peerStore.addressBook.set(n,r.listenAddrs.map((t=>new d(t))))}catch(o){i.error("received invalid addrs",o)}try{await this.peerStore.protoBook.set(n,r.protocols)}catch(o){i.error("received invalid protocols",o)}}static getCleanMultiaddr(t){if(t&&t.length>0)try{return new d(t)}catch(e){return null}return null}}const R={IDENTIFY:b,IDENTIFY_PUSH:w};T.multicodecs=R,T.Messsage=y,t.exports=T},52255:function(t,e,r){"use strict";r(21703);var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-identify"]||(n.roots["libp2p-identify"]={});a.Identify=function(){function t(t){if(this.listenAddrs=[],this.protocols=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.protocolVersion="",t.prototype.agentVersion="",t.prototype.publicKey=s.newBuffer([]),t.prototype.listenAddrs=s.emptyArray,t.prototype.observedAddr=s.newBuffer([]),t.prototype.protocols=s.emptyArray,t.prototype.signedPeerRecord=s.newBuffer([]),t.encode=function(t,e){if(e||(e=o.create()),null!=t.publicKey&&Object.hasOwnProperty.call(t,"publicKey")&&e.uint32(10).bytes(t.publicKey),null!=t.listenAddrs&&t.listenAddrs.length)for(var r=0;r<t.listenAddrs.length;++r)e.uint32(18).bytes(t.listenAddrs[r]);if(null!=t.protocols&&t.protocols.length)for(r=0;r<t.protocols.length;++r)e.uint32(26).string(t.protocols[r]);return null!=t.observedAddr&&Object.hasOwnProperty.call(t,"observedAddr")&&e.uint32(34).bytes(t.observedAddr),null!=t.protocolVersion&&Object.hasOwnProperty.call(t,"protocolVersion")&&e.uint32(42).string(t.protocolVersion),null!=t.agentVersion&&Object.hasOwnProperty.call(t,"agentVersion")&&e.uint32(50).string(t.agentVersion),null!=t.signedPeerRecord&&Object.hasOwnProperty.call(t,"signedPeerRecord")&&e.uint32(66).bytes(t.signedPeerRecord),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.Identify;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 5:n.protocolVersion=t.string();break;case 6:n.agentVersion=t.string();break;case 1:n.publicKey=t.bytes();break;case 2:n.listenAddrs&&n.listenAddrs.length||(n.listenAddrs=[]),n.listenAddrs.push(t.bytes());break;case 4:n.observedAddr=t.bytes();break;case 3:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(t.string());break;case 8:n.signedPeerRecord=t.bytes();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.Identify)return t;var e=new a.Identify;if(null!=t.protocolVersion&&(e.protocolVersion=String(t.protocolVersion)),null!=t.agentVersion&&(e.agentVersion=String(t.agentVersion)),null!=t.publicKey&&("string"===typeof t.publicKey?s.base64.decode(t.publicKey,e.publicKey=s.newBuffer(s.base64.length(t.publicKey)),0):t.publicKey.length&&(e.publicKey=t.publicKey)),t.listenAddrs){if(!Array.isArray(t.listenAddrs))throw TypeError(".Identify.listenAddrs: array expected");e.listenAddrs=[];for(var r=0;r<t.listenAddrs.length;++r)"string"===typeof t.listenAddrs[r]?s.base64.decode(t.listenAddrs[r],e.listenAddrs[r]=s.newBuffer(s.base64.length(t.listenAddrs[r])),0):t.listenAddrs[r].length&&(e.listenAddrs[r]=t.listenAddrs[r])}if(null!=t.observedAddr&&("string"===typeof t.observedAddr?s.base64.decode(t.observedAddr,e.observedAddr=s.newBuffer(s.base64.length(t.observedAddr)),0):t.observedAddr.length&&(e.observedAddr=t.observedAddr)),t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Identify.protocols: array expected");e.protocols=[];for(r=0;r<t.protocols.length;++r)e.protocols[r]=String(t.protocols[r])}return null!=t.signedPeerRecord&&("string"===typeof t.signedPeerRecord?s.base64.decode(t.signedPeerRecord,e.signedPeerRecord=s.newBuffer(s.base64.length(t.signedPeerRecord)),0):t.signedPeerRecord.length&&(e.signedPeerRecord=t.signedPeerRecord)),e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.listenAddrs=[],r.protocols=[]),e.defaults&&(e.bytes===String?r.publicKey="":(r.publicKey=[],e.bytes!==Array&&(r.publicKey=s.newBuffer(r.publicKey))),e.bytes===String?r.observedAddr="":(r.observedAddr=[],e.bytes!==Array&&(r.observedAddr=s.newBuffer(r.observedAddr))),r.protocolVersion="",r.agentVersion="",e.bytes===String?r.signedPeerRecord="":(r.signedPeerRecord=[],e.bytes!==Array&&(r.signedPeerRecord=s.newBuffer(r.signedPeerRecord)))),null!=t.publicKey&&t.hasOwnProperty("publicKey")&&(r.publicKey=e.bytes===String?s.base64.encode(t.publicKey,0,t.publicKey.length):e.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.listenAddrs&&t.listenAddrs.length){r.listenAddrs=[];for(var n=0;n<t.listenAddrs.length;++n)r.listenAddrs[n]=e.bytes===String?s.base64.encode(t.listenAddrs[n],0,t.listenAddrs[n].length):e.bytes===Array?Array.prototype.slice.call(t.listenAddrs[n]):t.listenAddrs[n]}if(t.protocols&&t.protocols.length){r.protocols=[];for(n=0;n<t.protocols.length;++n)r.protocols[n]=t.protocols[n]}return null!=t.observedAddr&&t.hasOwnProperty("observedAddr")&&(r.observedAddr=e.bytes===String?s.base64.encode(t.observedAddr,0,t.observedAddr.length):e.bytes===Array?Array.prototype.slice.call(t.observedAddr):t.observedAddr),null!=t.protocolVersion&&t.hasOwnProperty("protocolVersion")&&(r.protocolVersion=t.protocolVersion),null!=t.agentVersion&&t.hasOwnProperty("agentVersion")&&(r.agentVersion=t.agentVersion),null!=t.signedPeerRecord&&t.hasOwnProperty("signedPeerRecord")&&(r.signedPeerRecord=e.bytes===String?s.base64.encode(t.signedPeerRecord,0,t.signedPeerRecord.length):e.bytes===Array?Array.prototype.slice.call(t.signedPeerRecord):t.signedPeerRecord),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},95499:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p"),{error:n("libp2p:err")}),{EventEmitter:o}=r(43793),s=r(19998),a=r(68292),{Multiaddr:u}=r(19391),{MemoryDatastore:c}=r(86316),h=r(81382),l=r(2395),f=r(35383),{validate:d}=r(23083),{codes:p,messages:y}=r(65461),g=r(55946),m=r(19520),b=r(65638),w=r(88611),v=r(54023),_=r(71986),E=r(12120),S=r(41469),A=r(88647),I=r(46799),T=r(45825),R=r(90924),M=r(71443),k=r(65806),C=r(29161),O=r(64532),P=r(79146),{updateSelfPeerRecord:B}=r(16914);class x extends o{static async create(t){if(t.peerId)return new x(t);const e=await a.create();return t.peerId=e,new x(t)}constructor(t){if(super(),this._options=d(t),this.peerId=this._options.peerId,this.datastore=this._options.datastore,this._options.metrics.enabled){const t=new S({...this._options.metrics});this.metrics=t}if(this.connectionGater={denyDialPeer:async()=>Promise.resolve(!1),denyDialMultiaddr:async()=>Promise.resolve(!1),denyInboundConnection:async()=>Promise.resolve(!1),denyOutboundConnection:async()=>Promise.resolve(!1),denyInboundEncryptedConnection:async()=>Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>Promise.resolve(!1),denyInboundUpgradedConnection:async()=>Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>Promise.resolve(!1),filterMultiaddrForPeer:async()=>Promise.resolve(!0),...this._options.connectionGater},this.peerStore=new T({peerId:this.peerId,datastore:this.datastore&&this._options.peerStore.persistence?this.datastore:new c,addressFilter:this.connectionGater.filterMultiaddrForPeer}),this.addresses=this._options.addresses,this.addressManager=new g(this.peerId,this._options.addresses),this.addressManager.on("change:addresses",(()=>{B(this).catch((t=>{i.error("Error updating self peer record",t)}))})),this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=new Map,this.connectionManager=new m(this,{...this._options.connectionManager}),this._autodialler=new b(this,{enabled:this._config.peerDiscovery.autoDial,minConnections:this._options.connectionManager.minConnections,autoDialInterval:this._options.connectionManager.autoDialInterval}),this._options.keychain&&this._options.keychain.datastore){i("creating keychain");const t=E.generateOptions();this.keychain=new E(this._options.keychain.datastore,{...t,...this._options.keychain}),i("keychain constructed")}if(this.upgrader=new I({connectionGater:this.connectionGater,localPeer:this.peerId,metrics:this.metrics,onConnection:t=>this.connectionManager.onConnect(t),onConnectionEnd:t=>this.connectionManager.onDisconnect(t)}),this.transportManager=new A({libp2p:this,upgrader:this.upgrader,faultTolerance:this._options.transportManager.faultTolerance}),this.natManager=new P({peerId:this.peerId,addressManager:this.addressManager,transportManager:this.transportManager,...this._options.config.nat}),this.registrar=new M({peerStore:this.peerStore,connectionManager:this.connectionManager}),this.handle=this.handle.bind(this),this.registrar.handle=this.handle,!this._modules.connEncryption||!this._modules.connEncryption.length)throw s(new Error(y.CONN_ENCRYPTION_REQUIRED),p.CONN_ENCRYPTION_REQUIRED);const e=this._modules.connEncryption;if(e.forEach((t=>{this.upgrader.cryptos.set(t.protocol,t)})),this.dialer=new _({transportManager:this.transportManager,connectionGater:this.connectionGater,peerStore:this.peerStore,metrics:this.metrics,...this._options.dialer}),this._modules.transport.forEach((t=>{const e=t.prototype[Symbol.toStringTag],r=this._config.transport[e];this.transportManager.add(e,t,r)})),this._config.relay.enabled&&(this.transportManager.add(w.prototype[Symbol.toStringTag],w),this.relay=new v(this)),this._modules.streamMuxer){const t=this._modules.streamMuxer;t.forEach((t=>{this.upgrader.muxers.set(t.multicodec,t)})),this.identifyService=new k({libp2p:this})}if(this._modules.connProtector)this.upgrader.protector=this._modules.connProtector;else if(void 0!==globalThis.process&&globalThis.process.env&&globalThis.process.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._modules.dht){const t=this._modules.dht;this._dht=t.create({libp2p:this,...this._config.dht})}if(this._modules.pubsub){const t=this._modules.pubsub;this.pubsub=R(t,this,this._config.pubsub)}this.peerRouting=new h(this),this.contentRouting=new l(this),this._onDiscoveryPeer=this._onDiscoveryPeer.bind(this),this.fetchService=new C(this),this.pingService=new O(this)}emit(t,...e){return"error"!==t||this._events.error?super.emit(t,...e):(i.error(e),!1)}async start(){i("libp2p is starting"),this.identifyService&&await this.handle(Object.values(k.getProtocolStr(this)),this.identifyService.handleMessage),this.fetchService&&await this.handle(C.PROTOCOL,this.fetchService.handleMessage),this.pingService&&await this.handle(O.getProtocolStr(this),this.pingService.handleMessage);try{await this._onStarting(),await this._onDidStart(),i("libp2p has started")}catch(t){throw this.emit("error",t),i.error("An error occurred starting libp2p",t),await this.stop(),t}}async stop(){i("libp2p is stopping");try{this._isStarted=!1,this.identifyService&&await this.identifyService.stop(),this.relay&&this.relay.stop(),this.peerRouting.stop(),await this._autodialler.stop(),await(this._dht&&this._dht.stop());for(const t of this._discovery.values())t.removeListener("peer",this._onDiscoveryPeer);await Promise.all(Array.from(this._discovery.values(),(t=>t.stop()))),this._discovery=new Map,await this.connectionManager.stop(),await Promise.all([this.pubsub&&this.pubsub.stop(),this.metrics&&this.metrics.stop()]),await this.natManager.stop(),await this.transportManager.close(),await this.unhandle(C.PROTOCOL),await this.unhandle(O.getProtocolStr(this)),this.dialer.destroy()}catch(t){t&&(i.error(t),this.emit("error",t))}i("libp2p has stopped")}async loadKeychain(){if(this.keychain)try{await this.keychain.findKeyByName("self")}catch(t){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this._isStarted}get connections(){return this.connectionManager.connections}dial(t,e){return this._dial(t,e)}async dialProtocol(t,e,r){if(!e||!e.length)throw s(new Error("no protocols were provided to open a stream"),p.ERR_INVALID_PROTOCOLS_FOR_STREAM);const n=await this._dial(t,r);return n.newStream(e)}async _dial(t,e){const{id:r,multiaddrs:n}=f(t);if(r.equals(this.peerId))throw s(new Error("Cannot dial self"),p.ERR_DIALED_SELF);let i=this.connectionManager.get(r);return i?n&&await this.peerStore.addressBook.add(r,n):i=await this.dialer.connectToPeer(t,e),i}get multiaddrs(){let t=this.addressManager.getAnnounceAddrs().map((t=>t.toString()));t.length||(t=this.transportManager.getAddrs().map((t=>t.toString()))),t=t.concat(this.addressManager.getObservedAddrs().map((t=>t.toString())));const e=this._options.addresses.announceFilter,r=new Set(t);return e(Array.from(r).map((t=>new u(t))))}async hangUp(t){const{id:e}=f(t),r=this.connectionManager.connections.get(e.toB58String());r&&await Promise.all(r.map((t=>t.close())))}fetch(t,e){return this.fetchService.fetch(t,e)}ping(t){const{id:e,multiaddrs:r}=f(t);return r?this.pingService.ping(r[0]):this.pingService.ping(e)}async handle(t,e){t=Array.isArray(t)?t:[t],t.forEach((t=>{this.upgrader.protocols.set(t,e)})),await this.peerStore.protoBook.add(this.peerId,t)}async unhandle(t){t=Array.isArray(t)?t:[t],t.forEach((t=>{this.upgrader.protocols.delete(t)})),await this.peerStore.protoBook.remove(this.peerId,t)}async _onStarting(){const t=this.addressManager.getListenAddrs();await this.transportManager.listen(t),this.natManager.start(),this._config.pubsub.enabled&&this.pubsub&&await this.pubsub.start(),this._config.dht.enabled&&(this._dht&&await this._dht.start(),this._dht.on("peer",this._onDiscoveryPeer)),this.metrics&&this.metrics.start(),this.identifyService&&await this.identifyService.start()}async _onDidStart(){this._isStarted=!0,this.peerStore.on("peer",(t=>{this.emit("peer:discovery",t),this._maybeConnect(t).catch((t=>{i.error(t)}))}));for await(const t of this.peerStore.getPeers())this.emit("peer:discovery",t.id);this.connectionManager.start(),await this._autodialler.start(),await this._setupPeerDiscovery(),this.relay&&this.relay.start(),this.peerRouting.start()}_onDiscoveryPeer(t){t.id.toB58String()!==this.peerId.toB58String()?(t.multiaddrs&&this.peerStore.addressBook.add(t.id,t.multiaddrs).catch((t=>i.error(t))),t.protocols&&this.peerStore.protoBook.set(t.id,t.protocols).catch((t=>i.error(t)))):i.error(new Error(p.ERR_DISCOVERED_SELF))}async _maybeConnect(t){if(!0===this._config.peerDiscovery.autoDial&&!this.connectionManager.get(t)){const r=this._options.connectionManager.minConnections||0;if(r>this.connectionManager.size){i("connecting to discovered peer %s",t.toB58String());try{await this.dialer.connectToPeer(t)}catch(e){i.error(`could not connect to discovered peer ${t.toB58String()} with ${e}`)}}}}async _setupPeerDiscovery(){const t=t=>{let e={enabled:!0};if(t.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[t.tag]&&(e={...e,...this._config.peerDiscovery[t.tag]}),e.enabled&&!this._discovery.has(t.tag)){let r;r="function"===typeof t?new t(Object.assign({},e,{peerId:this.peerId,libp2p:this})):t,r.on("peer",this._onDiscoveryPeer),this._discovery.set(t.tag,r)}};for(const e of this._modules.peerDiscovery||[])t(e);for(const e of this.transportManager.getTransports())e.discovery&&t(e.discovery);await Promise.all(Array.from(this._discovery.values(),(t=>t.start())))}}t.exports=x},9585:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118),r(67323),r(1352);const n=r(15736),{certificateForKey:i,findAsync:o}=r(93306),s=r(19998),{fromString:a}=r(92259),{toString:u}=r(96523),{codes:c}=r(65461),h=new WeakMap;class l{constructor(t,e){if(!t)throw s(new Error("keychain is required"),c.ERR_KEYCHAIN_REQUIRED);this.keychain=t,h.set(this,{dek:e})}async encrypt(t,e){if(!(e instanceof Uint8Array))throw s(new Error("Plain data must be a Uint8Array"),c.ERR_INVALID_PARAMETERS);const r=await this.keychain.findKeyByName(t),o=await this.keychain._getPrivateKey(t),u=h.get(this).dek,l=n.pki.decryptRsaPrivateKey(o,u),f=await i(r,l),d=n.pkcs7.createEnvelopedData();d.addRecipient(f),d.content=n.util.createBuffer(e),d.encrypt();const p=n.asn1.toDer(d.toAsn1()).getBytes();return a(p,"ascii")}async decrypt(t){if(!(t instanceof Uint8Array))throw s(new Error("CMS data is required"),c.ERR_INVALID_PARAMETERS);let e;try{const r=n.util.createBuffer(u(t,"ascii")),i=n.asn1.fromDer(r);e=n.pkcs7.messageFromAsn1(i)}catch(y){throw s(new Error("Invalid CMS: "+y.message),c.ERR_INVALID_CMS)}const r=e.recipients.filter((t=>t.issuer.find((t=>"O"===t.shortName&&"ipfs"===t.value)))).filter((t=>t.issuer.find((t=>"CN"===t.shortName)))).map((t=>({recipient:t,keyId:t.issuer.find((t=>"CN"===t.shortName)).value}))),i=await o(r,(async t=>{try{const e=await this.keychain.findKeyById(t.keyId);if(e)return!0}catch(y){return!1}return!1}));if(!i){const t=r.map((t=>t.keyId));throw s(new Error("Decryption needs one of the key(s): "+t.join(", ")),c.ERR_MISSING_KEYS,{missingKeys:t})}const l=await this.keychain.findKeyById(i.keyId);if(!l)throw s(new Error("No key available to decrypto"),c.ERR_NO_KEY);const f=await this.keychain._getPrivateKey(l.name),d=h.get(this).dek,p=n.pki.decryptRsaPrivateKey(f,d);return e.decrypt(i.recipient,p),a(e.content.getBytes(),"ascii")}}t.exports=l},12120:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:keychain"),{error:n("libp2p:keychain:err")}),o=r(74840),s=r(80535),a=r(75167),{Key:u}=r(34676),c=r(9585),h=r(19998),{codes:l}=r(65461),{toString:f}=r(96523),{fromString:d}=r(92259);r(12328);const p="/pkcs8/",y="/info/",g=new WeakMap,m={minKeyLength:14,minSaltLength:16,minIterationCount:1e3},b={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function w(t){return!!t&&("string"===typeof t&&t===o(t.trim()))}async function v(t){const e=200,r=1e3,n=Math.random()*(r-e)+e;throw await new Promise((t=>setTimeout(t,n))),t}function _(t){return new u(p+t)}function E(t){return new u(y+t)}class S{constructor(t,e){if(!t)throw new Error("store is required");if(this.store=t,this.opts=s(b,e),this.opts.pass&&this.opts.pass.length<20)throw new Error("pass must be least 20 characters");if(this.opts.dek.keyLength<m.minKeyLength)throw new Error(`dek.keyLength must be least ${m.minKeyLength} bytes`);if(this.opts.dek.salt.length<m.minSaltLength)throw new Error(`dek.saltLength must be least ${m.minSaltLength} bytes`);if(this.opts.dek.iterationCount<m.minIterationCount)throw new Error(`dek.iterationCount must be least ${m.minIterationCount}`);const r=this.opts.pass?a.pbkdf2(this.opts.pass,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";g.set(this,{dek:r})}get cms(){return new c(this,g.get(this).dek)}static generateOptions(){const t=Object.assign({},b),e=3*Math.ceil(m.minSaltLength/3);return t.dek.salt=f(a.randomBytes(e),"base64"),t}static get options(){return b}async createKey(t,e,r=2048){const n=this;if(!w(t)||"self"===t)return v(h(new Error(`Invalid key name '${t}'`),l.ERR_INVALID_KEY_NAME));if("string"!==typeof e)return v(h(new Error(`Invalid key type '${e}'`),l.ERR_INVALID_KEY_TYPE));const i=_(t),o=await n.store.has(i);if(o)return v(h(new Error(`Key '${t}' already exists`),l.ERR_KEY_ALREADY_EXISTS));switch(e.toLowerCase()){case"rsa":if(!Number.isSafeInteger(r)||r<2048)return v(h(new Error(`Invalid RSA key size ${r}`),l.ERR_INVALID_KEY_SIZE));break;default:break}let s;try{const o=await a.keys.generateKeyPair(e,r),u=await o.id(),c=g.get(this).dek,h=await o.export(c);s={name:t,id:u};const l=n.store.batch();l.put(i,d(h)),l.put(E(t),d(JSON.stringify(s))),await l.commit()}catch(u){return v(u)}return s}async listKeys(){const t=this,e={prefix:y},r=[];for await(const n of t.store.query(e))r.push(JSON.parse(f(n.value)));return r}async findKeyById(t){try{const e=await this.listKeys();return e.find((e=>e.id===t))}catch(e){return v(e)}}async findKeyByName(t){if(!w(t))return v(h(new Error(`Invalid key name '${t}'`),l.ERR_INVALID_KEY_NAME));const e=E(t);try{const t=await this.store.get(e);return JSON.parse(f(t))}catch(r){return v(h(new Error(`Key '${t}' does not exist. ${r.message}`),l.ERR_KEY_NOT_FOUND))}}async removeKey(t){const e=this;if(!w(t)||"self"===t)return v(h(new Error(`Invalid key name '${t}'`),l.ERR_INVALID_KEY_NAME));const r=_(t),n=await e.findKeyByName(t),i=e.store.batch();return i.delete(r),i.delete(E(t)),await i.commit(),n}async renameKey(t,e){const r=this;if(!w(t)||"self"===t)return v(h(new Error(`Invalid old key name '${t}'`),l.ERR_OLD_KEY_NAME_INVALID));if(!w(e)||"self"===e)return v(h(new Error(`Invalid new key name '${e}'`),l.ERR_NEW_KEY_NAME_INVALID));const n=_(t),i=_(e),o=E(t),s=E(e),a=await r.store.has(i);if(a)return v(h(new Error(`Key '${e}' already exists`),l.ERR_KEY_ALREADY_EXISTS));try{const t=await r.store.get(n),a=await r.store.get(o),u=JSON.parse(f(a));u.name=e;const c=r.store.batch();return c.put(i,t),c.put(s,d(JSON.stringify(u))),c.delete(n),c.delete(o),await c.commit(),u}catch(u){return v(u)}}async exportKey(t,e){if(!w(t))return v(h(new Error(`Invalid key name '${t}'`),l.ERR_INVALID_KEY_NAME));if(!e)return v(h(new Error("Password is required"),l.ERR_PASSWORD_REQUIRED));const r=_(t);try{const t=await this.store.get(r),n=f(t),i=g.get(this).dek,o=await a.keys.import(n,i);return o.export(e)}catch(n){return v(n)}}async importKey(t,e,r){const n=this;if(!w(t)||"self"===t)return v(h(new Error(`Invalid key name '${t}'`),l.ERR_INVALID_KEY_NAME));if(!e)return v(h(new Error("PEM encoded key is required"),l.ERR_PEM_REQUIRED));const i=_(t),o=await n.store.has(i);if(o)return v(h(new Error(`Key '${t}' already exists`),l.ERR_KEY_ALREADY_EXISTS));let s,u;try{s=await a.keys.import(e,r)}catch(p){return v(h(new Error("Cannot read the key, most likely the password is wrong"),l.ERR_CANNOT_READ_KEY))}try{u=await s.id();const t=g.get(this).dek;e=await s.export(t)}catch(p){return v(p)}const c={name:t,id:u},f=n.store.batch();return f.put(i,d(e)),f.put(E(t),d(JSON.stringify(c))),await f.commit(),c}async importPeer(t,e){const r=this;if(!w(t))return v(h(new Error(`Invalid key name '${t}'`),l.ERR_INVALID_KEY_NAME));if(!e||!e.privKey)return v(h(new Error("Peer.privKey is required"),l.ERR_MISSING_PRIVATE_KEY));const n=e.privKey,i=_(t),o=await r.store.has(i);if(o)return v(h(new Error(`Key '${t}' already exists`),l.ERR_KEY_ALREADY_EXISTS));try{const e=await n.id(),o=g.get(this).dek,s=await n.export(o),a={name:t,id:e},u=r.store.batch();return u.put(i,d(s)),u.put(E(t),d(JSON.stringify(a))),await u.commit(),a}catch(s){return v(s)}}async _getPrivateKey(t){if(!w(t))return v(h(new Error(`Invalid key name '${t}'`),l.ERR_INVALID_KEY_NAME));try{const e=_(t),r=await this.store.get(e);return f(r)}catch(e){return v(h(new Error(`Key '${t}' does not exist. ${e.message}`),l.ERR_KEY_NOT_FOUND))}}async rotateKeychainPass(t,e){if("string"!==typeof t)return v(h(new Error(`Invalid old pass type '${typeof t}'`),l.ERR_INVALID_OLD_PASS_TYPE));if("string"!==typeof e)return v(h(new Error(`Invalid new pass type '${typeof e}'`),l.ERR_INVALID_NEW_PASS_TYPE));if(e.length<20)return v(h(new Error(`Invalid pass length ${e.length}`),l.ERR_INVALID_PASS_LENGTH));i("recreating keychain");const r=g.get(this).dek;this.opts.pass=e;const n=e?a.pbkdf2(e,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";g.set(this,{dek:n});const o=await this.listKeys();for(const i of o){const t=await this.store.get(_(i.name)),e=f(t),o=await a.keys.import(e,r),s=n.toString(),u=await o.export(s),c=this.store.batch(),h={name:i.name,id:i.id};c.put(_(i.name),d(u)),c.put(E(i.name),d(JSON.stringify(h))),await c.commit()}i("keychain reconstructed")}}t.exports=S},93306:function(t,e,r){"use strict";r(18410);const n=r(15736),i=n.pki,o=(t,e)=>{const r=i.setRsaPublicKey(e.n,e.e),n=i.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);const o=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return n.setSubject(o),n.setIssuer(o),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(e),n};async function s(t,e){const r=t.map(e),n=await Promise.all(r),i=n.findIndex((t=>t));return t[i]}t.exports={certificateForKey:o,findAsync:s}},41469:function(t,e,r){"use strict";const n=r(80535),{pipe:i}=r(62100),{tap:o}=r(56163),s=r(15349),{METRICS:a}=r(53192),u=r(9963),c=["dataReceived","dataSent"],h={in:"dataReceived",out:"dataSent"};class l{constructor(t){this._options=n(a,t),this._globalStats=new u(c,this._options),this._peerStats=new Map,this._protocolStats=new Map,this._oldPeers=s(this._options.maxOldPeersRetention),this._running=!1,this._onMessage=this._onMessage.bind(this),this._systems=new Map}start(){this._running=!0}stop(){this._running=!1,this._globalStats.stop();for(const t of this._peerStats.values())t.stop();for(const t of this._protocolStats.values())t.stop()}get global(){return this._globalStats}get peers(){return Array.from(this._peerStats.keys())}getComponentMetrics(){return this._systems}updateComponentMetric({system:t="libp2p",component:e,metric:r,value:n}){this._systems.has(t)||this._systems.set(t,new Map);const i=this._systems.get(t);i.has(e)||i.set(e,new Map);const o=i.get(e);o.set(r,n)}forPeer(t){const e=t.toB58String();return this._peerStats.get(e)||this._oldPeers.get(e)}get protocols(){return Array.from(this._protocolStats.keys())}forProtocol(t){return this._protocolStats.get(t)}onPeerDisconnected(t){const e=t.toB58String(),r=this._peerStats.get(e);r&&(r.stop(),this._peerStats.delete(e),this._oldPeers.set(e,r))}_onMessage({remotePeer:t,protocol:e,direction:r,dataLength:n}){if(!this._running)return;const i=h[r];let o=this.forPeer(t);if(o||(o=new u(c,this._options),this._peerStats.set(t.toB58String(),o)),o.push(i,n),this._globalStats.push(i,n),e){let t=this.forProtocol(e);t||(t=new u(c,this._options),this._protocolStats.set(e,t)),t.push(i,n)}}updatePlaceholder(t,e){if(!this._running)return;const r=this.forPeer(t),n=e.toB58String(),i=this.forPeer(e);let o=r;i&&(o=l.mergeStats(i,o),this._oldPeers.delete(n)),this._peerStats.delete(t.toB58String()),this._peerStats.set(n,o),o.start()}trackStream({stream:t,remotePeer:e,protocol:r}){const n=this,s=t.source;t.source=o((t=>n._onMessage({remotePeer:e,protocol:r,direction:"in",dataLength:t.length})))(s);const a=t.sink;return t.sink=t=>i(t,o((t=>n._onMessage({remotePeer:e,protocol:r,direction:"out",dataLength:t.length}))),a),t}static mergeStats(t,e){return t.stop(),e.stop(),t._queue=[...t._queue,...e._queue],t}}t.exports=l},15349:function(t,e,r){"use strict";const n=r(98694);t.exports=t=>{const e=n(t);return e.delete=e.remove,e}},9963:function(t,e,r){"use strict";r(21703);const{EventEmitter:n}=r(43793),{BigNumber:i}=r(27629),o=r(55670),s=r(3057);class a extends n{constructor(t,e){super(),this._options=e,this._queue=[],this._stats={dataReceived:i(0),dataSent:i(0)},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);const r=this._options.movingAverageIntervals;for(let n=0;n<t.length;n++){const e=t[n];this._stats[e]=i(0),this._movingAverages[e]={};for(let t=0;t<r.length;t++){const n=r[t],i=this._movingAverages[e][n]=o(n);i.push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}toJSON(){const t=this.snapshot,e=this.movingAverages,r={dataReceived:t.dataReceived.toString(),dataSent:t.dataSent.toString(),movingAverages:{}},n=Object.keys(e);for(const i of n){r.movingAverages[i]={};for(const t of Object.keys(e[i]))r.movingAverages[i][t]=e[i][t].movingAverage()}return r}push(t,e){this._queue.push([t,e,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout=s(this._update,this._nextTimeout())}_nextTimeout(){const t=this._queue.length/this._options.computeThrottleMaxQueueSize,e=Math.max(this._options.computeThrottleTimeout*(1-t),0);return e}_update(){if(this._timeout=null,this._queue.length){let t;for(t of this._queue)this._applyOp(t);this._queue=[],this._updateFrequency(t[2]),this.emit("update",this._stats)}}_updateFrequency(t){const e=t-this._frequencyLastTime;Object.keys(this._stats).forEach((r=>{this._updateFrequencyFor(r,e,t)})),this._frequencyLastTime=t}_updateFrequencyFor(t,e,r){const n=this._frequencyAccumulators[t]||0;this._frequencyAccumulators[t]=0;const i=e||1,s=n/i*1e3;let a=this._movingAverages[t];a||(a=this._movingAverages[t]={});const u=this._options.movingAverageIntervals;for(let c=0;c<u.length;c++){const t=u[c];let e=a[t];e||(e=a[t]=o(t)),e.push(r,s)}}_applyOp(t){const e=t[0],r=t[1];if("number"!==typeof r)throw new Error(`invalid increment number: ${r}`);let n;n=Object.prototype.hasOwnProperty.call(this._stats,e)?this._stats[e]:this._stats[e]=i(0),this._stats[e]=n.plus(r),this._frequencyAccumulators[e]||(this._frequencyAccumulators[e]=0),this._frequencyAccumulators[e]+=r}}t.exports=a},58314:function(t){"use strict";class e extends Map{constructor(t){super();const{system:e,component:r,metric:n,metrics:i}=t;this._system=e,this._component=r,this._metric=n,this._metrics=i,this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size})}set(t,e){return super.set(t,e),this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size}),this}delete(t){const e=super.delete(t);return this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size}),e}clear(){super.clear(),this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size})}}t.exports=({system:t="libp2p",component:r,metric:n,metrics:i})=>{let o;return o=i?new e({system:t,component:r,metric:n,metrics:i}):new Map,o}},79146:function(t,e,r){"use strict";r(21703);const n=r(47956),i=r(15652),{promisify:o}=r(29591),{Multiaddr:s}=r(19391),a=Object.assign(i("libp2p:nat"),{error:i("libp2p:nat:err")}),{isBrowser:u}=r(3336),c=r(89437),h=r(62645),l=r(28362),f=r(19998),{codes:{ERR_INVALID_PARAMETERS:d}}=r(65461),p=r(5083),y=7200;function g(t=1024,e=65535){return Math.floor(Math.random()*(e-t+1)+t)}class m{constructor({peerId:t,addressManager:e,transportManager:r,...n}){if(this._peerId=t,this._addressManager=e,this._transportManager=r,this._enabled=n.enabled,this._externalIp=n.externalIp,this._options={description:n.description||`${l.name}@${l.version} ${this._peerId}`,ttl:n.ttl||y,autoUpdate:n.keepAlive||!0,gateway:n.gateway,enablePMP:Boolean(n.pmp&&n.pmp.enabled)},this._options.ttl<y)throw f(new Error(`NatManager ttl should be at least ${y} seconds`),d)}start(){!u&&this._enabled&&this._start().catch((t=>{a.error(t)}))}async _start(){const t=this._transportManager.getAddrs();for(const e of t){const{family:t,host:r,port:n,transport:i}=e.toOptions();if(!e.isThinWaistAddress()||"tcp"!==i)continue;if(p(e))continue;if(4!==t)continue;const o=this._getClient(),u=this._externalIp||await o.externalIp();if(h(u))throw new Error(`${u} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);const c=g();a(`opening uPnP connection from ${u}:${c} to ${r}:${n}`),await o.map({publicPort:c,privatePort:n,protocol:i.toUpperCase()}),this._addressManager.addObservedAddr(s.fromNodeAddress({family:4,address:u,port:c},i))}}_getClient(){if(this._client)return this._client;const t=new n(this._options),e=o(t.map.bind(t)),r=o(t.destroy.bind(t)),i=o(t.externalIp.bind(t));return this._client={map:(...t)=>c((()=>e(...t)),{onFailedAttempt:a.error,unref:!0}),destroy:(...t)=>c((()=>r(...t)),{onFailedAttempt:a.error,unref:!0}),externalIp:(...t)=>c((()=>i(...t)),{onFailedAttempt:a.error,unref:!0})},this._client}async stop(){if(!u&&this._client)try{await this._client.destroy(),this._client=null}catch(t){a.error(t)}}}t.exports=m},81382:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:peer-routing"),{error:n("libp2p:peer-routing:err")}),o=r(19998),s=r(65461),{storeAddresses:a,uniquePeers:u,requirePeers:c}=r(74315),{TimeoutController:h}=r(22856),l=r(10940),{pipe:f}=r(62100),d=r(74461),p=r(29164),y=r(13726),{setDelayedInterval:g,clearDelayedInterval:m}=r(12407),{DHTPeerRouting:b}=r(54618),{setMaxListeners:w}=r(43793);class v{constructor(t){this._peerId=t.peerId,this._peerStore=t.peerStore,this._routers=t._modules.peerRouting||[],t._dht&&t._config.dht.enabled&&this._routers.push(new b(t._dht)),this._refreshManagerOptions=t._options.peerRouting.refreshManager,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}start(){this._routers.length&&!this._timeoutId&&this._refreshManagerOptions.enabled&&(this._timeoutId=g(this._findClosestPeersTask,this._refreshManagerOptions.interval,this._refreshManagerOptions.bootDelay))}async _findClosestPeersTask(){try{await p(this.getClosestPeers(this._peerId.id,{timeout:this._refreshManagerOptions.timeout||1e4}))}catch(t){i.error(t)}}stop(){m(this._timeoutId)}async findPeer(t,e){if(!this._routers.length)throw o(new Error("No peer routers available"),s.codes.ERR_NO_ROUTERS_AVAILABLE);if(t.toB58String()===this._peerId.toB58String())throw o(new Error("Should not try to find self"),s.codes.ERR_FIND_SELF);const r=await f(l(...this._routers.map((r=>async function*(){try{yield await r.findPeer(t,e)}catch(n){i.error(n)}}()))),(t=>y(t,Boolean)),(t=>a(t,this._peerStore)),(t=>d(t)));if(r)return r;throw o(new Error(s.messages.NOT_FOUND),s.codes.ERR_NOT_FOUND)}async*getClosestPeers(t,e={timeout:3e4}){if(!this._routers.length)throw o(new Error("No peer routers available"),s.codes.ERR_NO_ROUTERS_AVAILABLE);if(e.timeout){const t=new h(e.timeout);try{w&&w(1/0,t.signal)}catch{}e.signal=t.signal}yield*f(l(...this._routers.map((r=>r.getClosestPeers(t,e)))),(t=>a(t,this._peerStore)),(t=>u(t)),(t=>c(t)))}}t.exports=v},39143:function(t,e,r){"use strict";r(21703);const n=r(15652),i=r(19998),{Multiaddr:o}=r(19391),s=r(68292),{codes:a}=r(65461),u=r(86664),c=r(81442),{pipe:h}=r(62100),l=r(97192),f=r(13726),d=r(79927),p=r(28189),y=Object.assign(n("libp2p:peer-store:address-book"),{error:n("libp2p:peer-store:address-book:err")}),g="change:multiaddrs";class m{constructor(t,e,r){this._emit=t,this._store=e,this._addressFilter=r}async consumePeerRecord(t){y("consumePeerRecord await write lock");const e=await this._store.lock.writeLock();let r,n;y("consumePeerRecord got write lock");try{let o;try{o=u.createFromProtobuf(t.payload)}catch(i){return y.error("invalid peer record received"),!1}r=o.peerId;const s=o.multiaddrs;if(!r.equals(t.peerId))return y("signing key does not match PeerId in the PeerRecord"),!1;if(!s||!s.length)return!1;if(await this._store.has(r)){const t=await this._store.load(r);if(t.peerRecordEnvelope){const e=await c.createFromProtobuf(t.peerRecordEnvelope),r=u.createFromProtobuf(e.payload);if(r.seqNumber>=o.seqNumber)return!1}}n=await this._store.patchOrCreate(r,{addresses:await b(r,s,this._addressFilter,!0),peerRecordEnvelope:t.marshal()}),y(`stored provided peer record for ${o.peerId.toB58String()}`)}finally{y("consumePeerRecord release write lock"),e()}return this._emit(g,{peerId:r,multiaddrs:n.addresses.map((({multiaddr:t})=>t))}),!0}async getRawEnvelope(t){y("getRawEnvelope await read lock");const e=await this._store.lock.readLock();y("getRawEnvelope got read lock");try{const r=await this._store.load(t);return r.peerRecordEnvelope}catch(r){if(r.code!==a.ERR_NOT_FOUND)throw r}finally{y("getRawEnvelope release read lock"),e()}}async getPeerRecord(t){const e=await this.getRawEnvelope(t);if(e)return c.createFromProtobuf(e)}async get(t){if(!s.isPeerId(t))throw y.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);y("get wait for read lock");const e=await this._store.lock.readLock();y("get got read lock");try{const r=await this._store.load(t);return r.addresses}catch(r){if(r.code!==a.ERR_NOT_FOUND)throw r}finally{y("get release read lock"),e()}return[]}async set(t,e){if(!s.isPeerId(t))throw y.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw y.error("multiaddrs must be an array of Multiaddrs"),i(new Error("multiaddrs must be an array of Multiaddrs"),a.ERR_INVALID_PARAMETERS);y("set await write lock");const r=await this._store.lock.writeLock();y("set got write lock");let n,o=!1;try{const i=await b(t,e,this._addressFilter);if(!i.length)return;try{const e=await this._store.load(t);if(o=!0,new Set([...i.map((({multiaddr:t})=>t.toString())),...e.addresses.map((({multiaddr:t})=>t.toString()))]).size===e.addresses.length&&i.length===e.addresses.length)return}catch(u){if(u.code!==a.ERR_NOT_FOUND)throw u}n=await this._store.patchOrCreate(t,{addresses:i}),y(`set multiaddrs for ${t.toB58String()}`)}finally{y("set release write lock"),r()}this._emit(g,{peerId:t,multiaddrs:n.addresses.map((t=>t.multiaddr))}),o||this._emit("peer",t)}async add(t,e){if(!s.isPeerId(t))throw y.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw y.error("multiaddrs must be an array of Multiaddrs"),i(new Error("multiaddrs must be an array of Multiaddrs"),a.ERR_INVALID_PARAMETERS);y("add await write lock");const r=await this._store.lock.writeLock();let n,o;y("add got write lock");try{const i=await b(t,e,this._addressFilter);if(!i.length)return;try{const e=await this._store.load(t);if(n=!0,new Set([...i.map((({multiaddr:t})=>t.toString())),...e.addresses.map((({multiaddr:t})=>t.toString()))]).size===e.addresses.length)return}catch(u){if(u.code!==a.ERR_NOT_FOUND)throw u}o=await this._store.mergeOrCreate(t,{addresses:i}),y(`added multiaddrs for ${t.toB58String()}`)}finally{y("set release write lock"),r()}this._emit(g,{peerId:t,multiaddrs:o.addresses.map((t=>t.multiaddr))}),n||this._emit("peer",t)}async delete(t){if(!s.isPeerId(t))throw y.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),a.ERR_INVALID_PARAMETERS);y("delete await write lock");const e=await this._store.lock.writeLock();let r;y("delete got write lock");try{r=await this._store.has(t),await this._store.patchOrCreate(t,{addresses:[]})}finally{y("delete release write lock"),e()}r&&this._emit(g,{peerId:t,multiaddrs:[]})}async getMultiaddrsForPeer(t,e=(t=>t)){const r=await this.get(t);return e(r).map((e=>{const r=e.multiaddr,n=r.getPeerId();return n&&n===t.toB58String()?r:r.encapsulate(`/p2p/${t.toB58String()}`)}))}}function b(t,e,r,n=!1){return h(e,(t=>p(t,(t=>{if(!o.isMultiaddr(t))throw y.error("multiaddr must be an instance of Multiaddr"),i(new Error("multiaddr must be an instance of Multiaddr"),a.ERR_INVALID_PARAMETERS)}))),(e=>f(e,(e=>r(t,e)))),(t=>d(t,(t=>({multiaddr:new o(t.toString()),isCertified:n})))),(t=>l(t)))}t.exports=m},45825:function(t,e,r){"use strict";const n=r(15652),{EventEmitter:i}=r(43793),o=r(39143),s=r(56501),a=r(92023),u=r(55050),c=r(32019),h=Object.assign(n("libp2p:peer-store"),{error:n("libp2p:peer-store:err")});class l extends i{constructor({peerId:t,datastore:e,addressFilter:r}){super(),this._peerId=t,this._store=new c(e),this.addressBook=new o(this.emit.bind(this),this._store,r),this.keyBook=new s(this.emit.bind(this),this._store),this.metadataBook=new a(this.emit.bind(this),this._store),this.protoBook=new u(this.emit.bind(this),this._store)}async*getPeers(){h("getPeers await read lock");const t=await this._store.lock.readLock();h("getPeers got read lock");try{for await(const t of this._store.all())t.id.toB58String()!==this._peerId.toB58String()&&(yield t)}finally{h("getPeers release read lock"),t()}}async delete(t){h("delete await write lock");const e=await this._store.lock.writeLock();h("delete got write lock");try{await this._store.delete(t)}finally{h("delete release write lock"),e()}}async get(t){h("get await read lock");const e=await this._store.lock.readLock();h("get got read lock");try{return this._store.load(t)}finally{h("get release read lock"),e()}}async has(t){h("has await read lock");const e=await this._store.lock.readLock();h("has got read lock");try{return this._store.has(t)}finally{h("has release read lock"),e()}}}t.exports=l},56501:function(t,e,r){"use strict";r(21703);const n=r(15652),i=r(19998),{codes:o}=r(65461),s=r(68292),{equals:a}=r(74141),u=Object.assign(n("libp2p:peer-store:key-book"),{error:n("libp2p:peer-store:key-book:err")}),c="change:pubkey";class h{constructor(t,e){this._emit=t,this._store=e}async set(t,e){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!e)throw u.error("publicKey must be an instance of PublicKey to store data"),i(new Error("publicKey must be an instance of PublicKey"),o.ERR_INVALID_PARAMETERS);u("set await write lock");const r=await this._store.lock.writeLock();u("set got write lock");let n=!1;try{try{const r=await this._store.load(t);if(r.pubKey&&a(r.pubKey.bytes,e.bytes))return}catch(h){if(h.code!==o.ERR_NOT_FOUND)throw h}await this._store.patchOrCreate(t,{pubKey:e}),n=!0}finally{u("set release write lock"),r()}n&&this._emit(c,{peerId:t,pubKey:e})}async get(t){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);u("get await write lock");const e=await this._store.lock.readLock();u("get got write lock");try{const r=await this._store.load(t);return r.pubKey}catch(r){if(r.code!==o.ERR_NOT_FOUND)throw r}finally{u("get release write lock"),e()}}async delete(t){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);u("delete await write lock");const e=await this._store.lock.writeLock();u("delete got write lock");try{await this._store.patchOrCreate(t,{pubKey:void 0})}finally{u("delete release write lock"),e()}this._emit(c,{peerId:t,pubKey:void 0})}}t.exports=h},92023:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118);const n=r(15652),i=r(19998),{codes:o}=r(65461),s=r(68292),{equals:a}=r(74141),u=Object.assign(n("libp2p:peer-store:metadata-book"),{error:n("libp2p:peer-store:metadata-book:err")}),c="change:metadata";class h{constructor(t,e){this._emit=t,this._store=e}async get(t){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);u("get await read lock");const e=await this._store.lock.readLock();u("get got read lock");try{const r=await this._store.load(t);return r.metadata}catch(r){if(r.code!==o.ERR_NOT_FOUND)throw r}finally{u("get release read lock"),e()}return new Map}async getValue(t,e){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);u("getValue await read lock");const r=await this._store.lock.readLock();u("getValue got read lock");try{const n=await this._store.load(t);return n.metadata.get(e)}catch(n){if(n.code!==o.ERR_NOT_FOUND)throw n}finally{u("getValue release write lock"),r()}}async set(t,e){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!e||!(e instanceof Map))throw u.error("valid metadata must be provided to store data"),i(new Error("valid metadata must be provided"),o.ERR_INVALID_PARAMETERS);u("set await write lock");const r=await this._store.lock.writeLock();u("set got write lock");try{await this._store.mergeOrCreate(t,{metadata:e})}finally{u("set release write lock"),r()}this._emit(c,{peerId:t,metadata:e})}async setValue(t,e,r){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if("string"!==typeof e||!(r instanceof Uint8Array))throw u.error("valid key and value must be provided to store data"),i(new Error("valid key and value must be provided"),o.ERR_INVALID_PARAMETERS);u("setValue await write lock");const n=await this._store.lock.writeLock();let h;u("setValue got write lock");try{try{const n=await this._store.load(t),i=n.metadata.get(e);if(null!=i&&a(r,i))return}catch(l){if(l.code!==o.ERR_NOT_FOUND)throw l}h=await this._store.mergeOrCreate(t,{metadata:new Map([[e,r]])})}finally{u("setValue release write lock"),n()}this._emit(c,{peerId:t,metadata:h.metadata})}async delete(t){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);u("delete await write lock");const e=await this._store.lock.writeLock();let r;u("delete got write lock");try{r=await this._store.has(t),r&&await this._store.patch(t,{metadata:new Map})}finally{u("delete release write lock"),e()}r&&this._emit(c,{peerId:t,metadata:new Map})}async deleteValue(t,e){if(!s.isPeerId(t))throw u.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);u("deleteValue await write lock");const r=await this._store.lock.writeLock();let n;u("deleteValue got write lock");try{const i=await this._store.load(t);n=i.metadata,n.delete(e),await this._store.patch(t,{metadata:n})}catch(a){if(a.code!==o.ERR_NOT_FOUND)throw a}finally{u("deleteValue release write lock"),r()}n&&this._emit(c,{peerId:t,metadata:n})}}t.exports=h},60285:function(t,e,r){"use strict";r(21703);var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-peer"]||(n.roots["libp2p-peer"]={});a.Peer=function(){function t(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var e;return t.prototype.addresses=s.emptyArray,t.prototype.protocols=s.emptyArray,t.prototype.metadata=s.emptyArray,t.prototype.pubKey=null,t.prototype.peerRecordEnvelope=null,Object.defineProperty(t.prototype,"_pubKey",{get:s.oneOfGetter(e=["pubKey"]),set:s.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_peerRecordEnvelope",{get:s.oneOfGetter(e=["peerRecordEnvelope"]),set:s.oneOfSetter(e)}),t.encode=function(t,e){if(e||(e=o.create()),null!=t.addresses&&t.addresses.length)for(var r=0;r<t.addresses.length;++r)a.Address.encode(t.addresses[r],e.uint32(10).fork()).ldelim();if(null!=t.protocols&&t.protocols.length)for(r=0;r<t.protocols.length;++r)e.uint32(18).string(t.protocols[r]);if(null!=t.metadata&&t.metadata.length)for(r=0;r<t.metadata.length;++r)a.Metadata.encode(t.metadata[r],e.uint32(26).fork()).ldelim();return null!=t.pubKey&&Object.hasOwnProperty.call(t,"pubKey")&&e.uint32(34).bytes(t.pubKey),null!=t.peerRecordEnvelope&&Object.hasOwnProperty.call(t,"peerRecordEnvelope")&&e.uint32(42).bytes(t.peerRecordEnvelope),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.Peer;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(a.Address.decode(t,t.uint32()));break;case 2:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(t.string());break;case 3:n.metadata&&n.metadata.length||(n.metadata=[]),n.metadata.push(a.Metadata.decode(t,t.uint32()));break;case 4:n.pubKey=t.bytes();break;case 5:n.peerRecordEnvelope=t.bytes();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.Peer)return t;var e=new a.Peer;if(t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".Peer.addresses: array expected");e.addresses=[];for(var r=0;r<t.addresses.length;++r){if("object"!==typeof t.addresses[r])throw TypeError(".Peer.addresses: object expected");e.addresses[r]=a.Address.fromObject(t.addresses[r])}}if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Peer.protocols: array expected");e.protocols=[];for(r=0;r<t.protocols.length;++r)e.protocols[r]=String(t.protocols[r])}if(t.metadata){if(!Array.isArray(t.metadata))throw TypeError(".Peer.metadata: array expected");e.metadata=[];for(r=0;r<t.metadata.length;++r){if("object"!==typeof t.metadata[r])throw TypeError(".Peer.metadata: object expected");e.metadata[r]=a.Metadata.fromObject(t.metadata[r])}}return null!=t.pubKey&&("string"===typeof t.pubKey?s.base64.decode(t.pubKey,e.pubKey=s.newBuffer(s.base64.length(t.pubKey)),0):t.pubKey.length&&(e.pubKey=t.pubKey)),null!=t.peerRecordEnvelope&&("string"===typeof t.peerRecordEnvelope?s.base64.decode(t.peerRecordEnvelope,e.peerRecordEnvelope=s.newBuffer(s.base64.length(t.peerRecordEnvelope)),0):t.peerRecordEnvelope.length&&(e.peerRecordEnvelope=t.peerRecordEnvelope)),e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.addresses=[],r.protocols=[],r.metadata=[]),t.addresses&&t.addresses.length){r.addresses=[];for(var n=0;n<t.addresses.length;++n)r.addresses[n]=a.Address.toObject(t.addresses[n],e)}if(t.protocols&&t.protocols.length){r.protocols=[];for(n=0;n<t.protocols.length;++n)r.protocols[n]=t.protocols[n]}if(t.metadata&&t.metadata.length){r.metadata=[];for(n=0;n<t.metadata.length;++n)r.metadata[n]=a.Metadata.toObject(t.metadata[n],e)}return null!=t.pubKey&&t.hasOwnProperty("pubKey")&&(r.pubKey=e.bytes===String?s.base64.encode(t.pubKey,0,t.pubKey.length):e.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey,e.oneofs&&(r._pubKey="pubKey")),null!=t.peerRecordEnvelope&&t.hasOwnProperty("peerRecordEnvelope")&&(r.peerRecordEnvelope=e.bytes===String?s.base64.encode(t.peerRecordEnvelope,0,t.peerRecordEnvelope.length):e.bytes===Array?Array.prototype.slice.call(t.peerRecordEnvelope):t.peerRecordEnvelope,e.oneofs&&(r._peerRecordEnvelope="peerRecordEnvelope")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),a.Address=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}var e;return t.prototype.multiaddr=s.newBuffer([]),t.prototype.isCertified=null,Object.defineProperty(t.prototype,"_isCertified",{get:s.oneOfGetter(e=["isCertified"]),set:s.oneOfSetter(e)}),t.encode=function(t,e){return e||(e=o.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),null!=t.isCertified&&Object.hasOwnProperty.call(t,"isCertified")&&e.uint32(16).bool(t.isCertified),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.Address;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.multiaddr=t.bytes();break;case 2:n.isCertified=t.bool();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.Address)return t;var e=new a.Address;return null!=t.multiaddr&&("string"===typeof t.multiaddr?s.base64.decode(t.multiaddr,e.multiaddr=s.newBuffer(s.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),null!=t.isCertified&&(e.isCertified=Boolean(t.isCertified)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.multiaddr="":(r.multiaddr=[],e.bytes!==Array&&(r.multiaddr=s.newBuffer(r.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(r.multiaddr=e.bytes===String?s.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),null!=t.isCertified&&t.hasOwnProperty("isCertified")&&(r.isCertified=t.isCertified,e.oneofs&&(r._isCertified="isCertified")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),a.Metadata=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.key="",t.prototype.value=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(10).string(t.key),null!=t.value&&Object.hasOwnProperty.call(t,"value")&&e.uint32(18).bytes(t.value),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.Metadata;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.key=t.string();break;case 2:n.value=t.bytes();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.Metadata)return t;var e=new a.Metadata;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&("string"===typeof t.value?s.base64.decode(t.value,e.value=s.newBuffer(s.base64.length(t.value)),0):t.value.length&&(e.value=t.value)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(r.key="",e.bytes===String?r.value="":(r.value=[],e.bytes!==Array&&(r.value=s.newBuffer(r.value)))),null!=t.key&&t.hasOwnProperty("key")&&(r.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(r.value=e.bytes===String?s.base64.encode(t.value,0,t.value.length):e.bytes===Array?Array.prototype.slice.call(t.value):t.value),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},55050:function(t,e,r){"use strict";r(21703);const n=r(15652),i=r(19998),{codes:o}=r(65461),s=r(68292),a=Object.assign(n("libp2p:peer-store:proto-book"),{error:n("libp2p:peer-store:proto-book:err")}),u="change:protocols";class c{constructor(t,e){this._emit=t,this._store=e}async get(t){a("get wait for read lock");const e=await this._store.lock.readLock();a("get got read lock");try{const r=await this._store.load(t);return r.protocols}catch(r){if(r.code!==o.ERR_NOT_FOUND)throw r}finally{a("get release read lock"),e()}return[]}async set(t,e){if(!s.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),i(new Error("protocols must be provided"),o.ERR_INVALID_PARAMETERS);a("set await write lock");const r=await this._store.lock.writeLock();let n;a("set got write lock");try{try{const r=await this._store.load(t);if(new Set([...e]).size===r.protocols.length)return}catch(c){if(c.code!==o.ERR_NOT_FOUND)throw c}n=await this._store.patchOrCreate(t,{protocols:e}),a(`stored provided protocols for ${t.toB58String()}`)}finally{a("set release write lock"),r()}this._emit(u,{peerId:t,protocols:n.protocols})}async add(t,e){if(!s.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),i(new Error("protocols must be provided"),o.ERR_INVALID_PARAMETERS);a("add await write lock");const r=await this._store.lock.writeLock();let n;a("add got write lock");try{try{const r=await this._store.load(t);if(new Set([...r.protocols,...e]).size===r.protocols.length)return}catch(c){if(c.code!==o.ERR_NOT_FOUND)throw c}n=await this._store.mergeOrCreate(t,{protocols:e}),a(`added provided protocols for ${t.toB58String()}`)}finally{a("add release write lock"),r()}this._emit(u,{peerId:t,protocols:n.protocols})}async remove(t,e){if(!s.isPeerId(t))throw a.error("peerId must be an instance of peer-id to store data"),i(new Error("peerId must be an instance of peer-id"),o.ERR_INVALID_PARAMETERS);if(!Array.isArray(e))throw a.error("protocols must be provided to store data"),i(new Error("protocols must be provided"),o.ERR_INVALID_PARAMETERS);a("remove await write lock");const r=await this._store.lock.writeLock();let n;a("remove got write lock");try{try{const r=await this._store.load(t),n=new Set(r.protocols);for(const t of e)n.delete(t);if(r.protocols.length===n.size)return;e=Array.from(n)}catch(c){if(c.code!==o.ERR_NOT_FOUND)throw c}n=await this._store.patchOrCreate(t,{protocols:e})}finally{a("remove release write lock"),r()}this._emit(u,{peerId:t,protocols:n.protocols})}async delete(t){a("delete await write lock");const e=await this._store.lock.writeLock();let r;a("delete got write lock");try{r=await this._store.has(t),await this._store.patchOrCreate(t,{protocols:[]})}catch(n){if(n.code!==o.ERR_NOT_FOUND)throw n}finally{a("delete release write lock"),e()}r&&this._emit(u,{peerId:t,protocols:[]})}}t.exports=c},32019:function(t,e,r){"use strict";r(21703);const n=r(15652),i=r(68292),o=r(19998),{codes:s}=r(65461),{Key:a}=r(34676),{base32:u}=r(12056),{keys:{unmarshalPublicKey:c,marshalPublicKey:h}}=r(75167),{Multiaddr:l}=r(19391),{Peer:f}=r(60285),d=r(461),{equals:p}=r(74141),y=Object.assign(n("libp2p:peer-store:store"),{error:n("libp2p:peer-store:store:err")}),g="/peers/";class m{constructor(t){this._datastore=t,this.lock=d("peer-store",{singleProcess:!0})}_peerIdToDatastoreKey(t){if(!i.isPeerId(t))throw y.error("peerId must be an instance of peer-id to store data"),o(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);const e=t.toString();return new a(`${g}${e}`)}async has(t){return this._datastore.has(this._peerIdToDatastoreKey(t))}async delete(t){await this._datastore.delete(this._peerIdToDatastoreKey(t))}async load(t){const e=await this._datastore.get(this._peerIdToDatastoreKey(t)),r=f.decode(e),n=r.pubKey?c(r.pubKey):t.pubKey,i=new Map;for(const o of r.metadata)i.set(o.key,o.value);return{...r,id:t,pubKey:n,addresses:r.addresses.map((({multiaddr:t,isCertified:e})=>({multiaddr:new l(t),isCertified:e||!1}))),metadata:i,peerRecordEnvelope:r.peerRecordEnvelope||void 0}}async save(t){if(null!=t.pubKey&&null!=t.id.pubKey&&!p(t.pubKey.bytes,t.id.pubKey.bytes))throw y.error("peer publicKey bytes do not match peer id publicKey bytes"),o(new Error("publicKey bytes do not match peer id publicKey bytes"),s.ERR_INVALID_PARAMETERS);const e=new Set,r=f.encode({addresses:t.addresses.filter((t=>!e.has(t.multiaddr.toString())&&(e.add(t.multiaddr.toString()),!0))).sort(((t,e)=>t.multiaddr.toString().localeCompare(e.multiaddr.toString()))).map((({multiaddr:t,isCertified:e})=>({multiaddr:t.bytes,isCertified:e}))),protocols:t.protocols.sort(),pubKey:t.pubKey?h(t.pubKey):void 0,metadata:[...t.metadata.keys()].sort().map((e=>({key:e,value:t.metadata.get(e)}))),peerRecordEnvelope:t.peerRecordEnvelope}).finish();return await this._datastore.put(this._peerIdToDatastoreKey(t.id),r),this.load(t.id)}async patch(t,e){const r=await this.load(t);return await this._patch(t,e,r)}async patchOrCreate(t,e){let r;try{r=await this.load(t)}catch(n){if(n.code!==s.ERR_NOT_FOUND)throw n;r={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._patch(t,e,r)}async _patch(t,e,r){return await this.save({...r,...e,id:t})}async merge(t,e){const r=await this.load(t);return this._merge(t,e,r)}async mergeOrCreate(t,e){let r;try{r=await this.load(t)}catch(n){if(n.code!==s.ERR_NOT_FOUND)throw n;r={id:t,addresses:[],protocols:[],metadata:new Map}}return await this._merge(t,e,r)}async _merge(t,e,r){const n=new Map;return(e.addresses||[]).forEach((t=>{n.set(t.multiaddr.toString(),t.isCertified)})),r.addresses.forEach((({multiaddr:t,isCertified:e})=>{const r=t.toString();n.set(r,Boolean(n.get(r)||e))})),await this.save({id:t,addresses:Array.from(n.entries()).map((([t,e])=>({multiaddr:new l(t),isCertified:e}))),protocols:Array.from(new Set([...r.protocols||[],...e.protocols||[]])),metadata:new Map([...r.metadata?r.metadata.entries():[],...e.metadata?e.metadata.entries():[]]),pubKey:e.pubKey||(null!=r?r.pubKey:void 0),peerRecordEnvelope:e.peerRecordEnvelope||(null!=r?r.peerRecordEnvelope:void 0)})}async*all(){for await(const t of this._datastore.queryKeys({prefix:g})){const e=t.toString().split("/")[2],r=u.decode(e);yield this.load(i.createFromBytes(r))}}}t.exports=m},45285:function(t){"use strict";t.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32,PROTOCOL_VERSION:"1.0.0",PROTOCOL_NAME:"ping"}},64532:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:ping"),{error:n("libp2p:ping:err")}),o=r(19998),{codes:s}=r(65461),a=r(75167),{pipe:u}=r(62100),{toBuffer:c}=r(26632),{collect:h,take:l}=r(56163),{equals:f}=r(74141),{PROTOCOL_NAME:d,PING_LENGTH:p,PROTOCOL_VERSION:y}=r(45285);class g{static getProtocolStr(t){return`/${t._config.protocolPrefix}/${d}/${y}`}constructor(t){this._libp2p=t}handleMessage({stream:t}){return u(t,t)}async ping(t){const e=`/${this._libp2p._config.protocolPrefix}/${d}/${y}`;i("dialing %s to %s",e,t.toB58String?t.toB58String():t);const r=await this._libp2p.dial(t),{stream:n}=await r.newStream(e),g=Date.now(),m=a.randomBytes(p),[b]=await u([m],n,(t=>l(1,t)),c,h),w=Date.now();if(!f(m,b))throw o(new Error("Received wrong ping ack"),s.ERR_WRONG_PING_ACK);return w-g}}t.exports=g},90924:function(t){"use strict";function e(t,e,r){const n=new t(e,r);function i(t,e){e&&n.on(t,e),n._subscribeAdapter(t)}function o(t,e){e?n.removeListener(t,e):n.removeAllListeners(t),0===n.listenerCount(t)&&n._unsubscribeAdapter(t)}return n._subscribeAdapter=n.subscribe,n._unsubscribeAdapter=n.unsubscribe,n.subscribe=i,n.unsubscribe=o,n}t.exports=e},13508:function(t,e,r){"use strict";var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-envelope"]||(n.roots["libp2p-envelope"]={});a.Envelope=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.publicKey=s.newBuffer([]),t.prototype.payloadType=s.newBuffer([]),t.prototype.payload=s.newBuffer([]),t.prototype.signature=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),null!=t.publicKey&&Object.hasOwnProperty.call(t,"publicKey")&&e.uint32(10).bytes(t.publicKey),null!=t.payloadType&&Object.hasOwnProperty.call(t,"payloadType")&&e.uint32(18).bytes(t.payloadType),null!=t.payload&&Object.hasOwnProperty.call(t,"payload")&&e.uint32(26).bytes(t.payload),null!=t.signature&&Object.hasOwnProperty.call(t,"signature")&&e.uint32(42).bytes(t.signature),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.Envelope;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.publicKey=t.bytes();break;case 2:n.payloadType=t.bytes();break;case 3:n.payload=t.bytes();break;case 5:n.signature=t.bytes();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.Envelope)return t;var e=new a.Envelope;return null!=t.publicKey&&("string"===typeof t.publicKey?s.base64.decode(t.publicKey,e.publicKey=s.newBuffer(s.base64.length(t.publicKey)),0):t.publicKey.length&&(e.publicKey=t.publicKey)),null!=t.payloadType&&("string"===typeof t.payloadType?s.base64.decode(t.payloadType,e.payloadType=s.newBuffer(s.base64.length(t.payloadType)),0):t.payloadType.length&&(e.payloadType=t.payloadType)),null!=t.payload&&("string"===typeof t.payload?s.base64.decode(t.payload,e.payload=s.newBuffer(s.base64.length(t.payload)),0):t.payload.length&&(e.payload=t.payload)),null!=t.signature&&("string"===typeof t.signature?s.base64.decode(t.signature,e.signature=s.newBuffer(s.base64.length(t.signature)),0):t.signature.length&&(e.signature=t.signature)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.publicKey="":(r.publicKey=[],e.bytes!==Array&&(r.publicKey=s.newBuffer(r.publicKey))),e.bytes===String?r.payloadType="":(r.payloadType=[],e.bytes!==Array&&(r.payloadType=s.newBuffer(r.payloadType))),e.bytes===String?r.payload="":(r.payload=[],e.bytes!==Array&&(r.payload=s.newBuffer(r.payload))),e.bytes===String?r.signature="":(r.signature=[],e.bytes!==Array&&(r.signature=s.newBuffer(r.signature)))),null!=t.publicKey&&t.hasOwnProperty("publicKey")&&(r.publicKey=e.bytes===String?s.base64.encode(t.publicKey,0,t.publicKey.length):e.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),null!=t.payloadType&&t.hasOwnProperty("payloadType")&&(r.payloadType=e.bytes===String?s.base64.encode(t.payloadType,0,t.payloadType.length):e.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),null!=t.payload&&t.hasOwnProperty("payload")&&(r.payload=e.bytes===String?s.base64.encode(t.payload,0,t.payload.length):e.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),null!=t.signature&&t.hasOwnProperty("signature")&&(r.signature=e.bytes===String?s.base64.encode(t.signature,0,t.signature.length):e.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},81442:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const n=r(19998),{concat:i}=r(85489),{fromString:o}=r(92259),s=r(91950),a=r(68292),u=r(42611),{equals:c}=r(74141),{codes:h}=r(65461),{Envelope:l}=r(13508);class f{constructor({peerId:t,payloadType:e,payload:r,signature:n}){this.peerId=t,this.payloadType=e,this.payload=r,this.signature=n,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;const t=s.marshalPublicKey(this.peerId.pubKey);return this._marshal=l.encode({publicKey:t,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(t){return c(this.peerId.pubKey.bytes,t.peerId.pubKey.bytes)&&c(this.payloadType,t.payloadType)&&c(this.payload,t.payload)&&c(this.signature,t.signature)}validate(t){const e=d(t,this.payloadType,this.payload);return this.peerId.pubKey.verify(e,this.signature)}}const d=(t,e,r)=>{const n=o(t),s=u.encode(n.byteLength),a=u.encode(e.length),c=u.encode(r.length);return i([new Uint8Array(s),n,new Uint8Array(a),e,new Uint8Array(c),r])};f.createFromProtobuf=async t=>{const e=l.decode(t),r=await a.createFromPubKey(e.publicKey);return new f({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})},f.seal=async(t,e)=>{const r=t.domain,n=t.codec,i=t.marshal(),o=d(r,n,i),s=await e.privKey.sign(o);return new f({peerId:e,payloadType:n,payload:i,signature:s})},f.openAndCertify=async(t,e)=>{const r=await f.createFromProtobuf(t),i=await r.validate(e);if(!i)throw n(new Error("envelope signature is not valid for the given domain"),h.ERR_SIGNATURE_NOT_VALID);return r},t.exports=f},50573:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const n="libp2p-peer-record",i=Uint8Array.from([3,1]);t.exports={ENVELOPE_DOMAIN_PEER_RECORD:n,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:i}},86664:function(t,e,r){"use strict";const{Multiaddr:n}=r(19391),i=r(68292),o=r(22962),{PeerRecord:s}=r(10660),{ENVELOPE_DOMAIN_PEER_RECORD:a,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:u}=r(50573);class c{constructor({peerId:t,multiaddrs:e=[],seqNumber:r=Date.now()}){this.domain=a,this.codec=u,this.peerId=t,this.multiaddrs=e,this.seqNumber=r,this._marshal=void 0}marshal(){return this._marshal||(this._marshal=s.encode({peerId:this.peerId.toBytes(),seq:this.seqNumber,addresses:this.multiaddrs.map((t=>({multiaddr:t.bytes})))}).finish()),this._marshal}equals(t){return t instanceof c&&(!!this.peerId.equals(t.peerId)&&(this.seqNumber===t.seqNumber&&!!o(this.multiaddrs,t.multiaddrs)))}}c.createFromProtobuf=t=>{const e=s.decode(t),r=i.createFromBytes(e.peerId),o=(e.addresses||[]).map((t=>new n(t.multiaddr))),a=Number(e.seq);return new c({peerId:r,multiaddrs:o,seqNumber:a})},c.DOMAIN=a,t.exports=c},10660:function(t,e,r){"use strict";r(21703);var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-peer-record"]||(n.roots["libp2p-peer-record"]={});a.PeerRecord=function(){function t(t){if(this.addresses=[],t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.peerId=s.newBuffer([]),t.prototype.seq=s.Long?s.Long.fromBits(0,0,!0):0,t.prototype.addresses=s.emptyArray,t.encode=function(t,e){if(e||(e=o.create()),null!=t.peerId&&Object.hasOwnProperty.call(t,"peerId")&&e.uint32(10).bytes(t.peerId),null!=t.seq&&Object.hasOwnProperty.call(t,"seq")&&e.uint32(16).uint64(t.seq),null!=t.addresses&&t.addresses.length)for(var r=0;r<t.addresses.length;++r)a.PeerRecord.AddressInfo.encode(t.addresses[r],e.uint32(26).fork()).ldelim();return e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.PeerRecord;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.peerId=t.bytes();break;case 2:n.seq=t.uint64();break;case 3:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(a.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.PeerRecord)return t;var e=new a.PeerRecord;if(null!=t.peerId&&("string"===typeof t.peerId?s.base64.decode(t.peerId,e.peerId=s.newBuffer(s.base64.length(t.peerId)),0):t.peerId.length&&(e.peerId=t.peerId)),null!=t.seq&&(s.Long?(e.seq=s.Long.fromValue(t.seq)).unsigned=!0:"string"===typeof t.seq?e.seq=parseInt(t.seq,10):"number"===typeof t.seq?e.seq=t.seq:"object"===typeof t.seq&&(e.seq=new s.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");e.addresses=[];for(var r=0;r<t.addresses.length;++r){if("object"!==typeof t.addresses[r])throw TypeError(".PeerRecord.addresses: object expected");e.addresses[r]=a.PeerRecord.AddressInfo.fromObject(t.addresses[r])}}return e},t.toObject=function(t,e){e||(e={});var r={};if((e.arrays||e.defaults)&&(r.addresses=[]),e.defaults)if(e.bytes===String?r.peerId="":(r.peerId=[],e.bytes!==Array&&(r.peerId=s.newBuffer(r.peerId))),s.Long){var n=new s.Long(0,0,!0);r.seq=e.longs===String?n.toString():e.longs===Number?n.toNumber():n}else r.seq=e.longs===String?"0":0;if(null!=t.peerId&&t.hasOwnProperty("peerId")&&(r.peerId=e.bytes===String?s.base64.encode(t.peerId,0,t.peerId.length):e.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),null!=t.seq&&t.hasOwnProperty("seq")&&("number"===typeof t.seq?r.seq=e.longs===String?String(t.seq):t.seq:r.seq=e.longs===String?s.Long.prototype.toString.call(t.seq):e.longs===Number?new s.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){r.addresses=[];for(var i=0;i<t.addresses.length;++i)r.addresses[i]=a.PeerRecord.AddressInfo.toObject(t.addresses[i],e)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t.AddressInfo=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.multiaddr=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),null!=t.multiaddr&&Object.hasOwnProperty.call(t,"multiaddr")&&e.uint32(10).bytes(t.multiaddr),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.PeerRecord.AddressInfo;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.multiaddr=t.bytes();break;default:t.skipType(7&o);break}}return n},t.fromObject=function(t){if(t instanceof a.PeerRecord.AddressInfo)return t;var e=new a.PeerRecord.AddressInfo;return null!=t.multiaddr&&("string"===typeof t.multiaddr?s.base64.decode(t.multiaddr,e.multiaddr=s.newBuffer(s.base64.length(t.multiaddr)),0):t.multiaddr.length&&(e.multiaddr=t.multiaddr)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.multiaddr="":(r.multiaddr=[],e.bytes!==Array&&(r.multiaddr=s.newBuffer(r.multiaddr)))),null!=t.multiaddr&&t.hasOwnProperty("multiaddr")&&(r.multiaddr=e.bytes===String?s.base64.encode(t.multiaddr,0,t.multiaddr.length):e.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t}(),t.exports=a},16914:function(t,e,r){"use strict";const n=r(81442),i=r(86664);async function o(t){const e=new i({peerId:t.peerId,multiaddrs:t.multiaddrs}),r=await n.seal(e,t.peerId);await t.peerStore.addressBook.consumePeerRecord(r)}t.exports.updateSelfPeerRecord=o},71443:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:registrar"),{error:n("libp2p:registrar:err")}),o=r(19998),{codes:{ERR_INVALID_PARAMETERS:s}}=r(65461),a=r(32863);class u{constructor({peerStore:t,connectionManager:e}){this.peerStore=t,this.connectionManager=e,this.topologies=new Map,this._handle=void 0,this._onDisconnect=this._onDisconnect.bind(this),this.connectionManager.on("peer:disconnect",this._onDisconnect)}get handle(){return this._handle}set handle(t){this._handle=t}getConnection(t){return this.connectionManager.get(t)}async register(t){if(!a.isTopology(t))throw i.error("topology must be an instance of interfaces/topology"),o(new Error("topology must be an instance of interfaces/topology"),s);const e=(1e9*Math.random()).toString(36)+Date.now();return this.topologies.set(e,t),await t.setRegistrar(this),e}unregister(t){return this.topologies.delete(t)}_onDisconnect(t){for(const[,e]of this.topologies)e.disconnect(t.remotePeer)}}t.exports=u},88647:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:transports"),{error:n("libp2p:transports:err")}),o=r(84824),{codes:s}=r(65461),a=r(19998),{updateSelfPeerRecord:u}=r(16914);class c{constructor({libp2p:t,upgrader:e,faultTolerance:r=h.FATAL_ALL}){this.libp2p=t,this.upgrader=e,this._transports=new Map,this._listeners=new Map,this._listenerOptions=new Map,this.faultTolerance=r}add(t,e,r={}){if(i("adding %s",t),!t)throw a(new Error(`Transport must have a valid key, was given '${t}'`),s.ERR_INVALID_KEY);if(this._transports.has(t))throw a(new Error("There is already a transport with this key"),s.ERR_DUPLICATE_TRANSPORT);const n=new e({...r,libp2p:this.libp2p,upgrader:this.upgrader});this._transports.set(t,n),this._listenerOptions.set(t,r.listenerOptions||{}),this._listeners.has(t)||this._listeners.set(t,[])}async close(){const t=[];for(const[e,r]of this._listeners){i("closing listeners for %s",e);while(r.length){const e=r.pop();e.removeAllListeners("listening"),e.removeAllListeners("close"),t.push(e.close())}}await Promise.all(t),i("all listeners closed");for(const e of this._listeners.keys())this._listeners.set(e,[])}async dial(t,e){const r=this.transportForMultiaddr(t);if(!r)throw a(new Error(`No transport available for address ${String(t)}`),s.ERR_TRANSPORT_UNAVAILABLE);try{return await r.dial(t,e)}catch(n){throw n.code||(n.code=s.ERR_TRANSPORT_DIAL_FAILED),n}}getAddrs(){let t=[];for(const e of this._listeners.values())for(const r of e)t=[...t,...r.getAddrs()];return t}getTransports(){return this._transports.values()}transportForMultiaddr(t){for(const e of this._transports.values()){const r=e.filter([t]);if(r.length)return e}return null}async listen(t){if(!t||0===t.length)return void i("no addresses were provided for listening, this node is dial only");const e=[];for(const[r,n]of this._transports.entries()){const c=n.filter(t),l=[];for(const t of c){i("creating listener for %s on %s",r,t);const e=n.createListener(this._listenerOptions.get(r));this._listeners.get(r).push(e),e.on("listening",(()=>u(this.libp2p))),e.on("close",(()=>u(this.libp2p))),l.push(e.listen(t))}if(0===l.length){e.push(r);continue}const f=await o(l),d=f.find((t=>!0===t.isFulfilled));if(!d&&this.faultTolerance!==h.NO_FATAL)throw a(new Error(`Transport (${r}) could not listen on any available address`),s.ERR_NO_VALID_ADDRESSES)}if(e.length===this._transports.size){const t=`no valid addresses were provided for transports [${e}]`;if(this.faultTolerance===h.FATAL_ALL)throw a(new Error(t),s.ERR_NO_VALID_ADDRESSES);i(`libp2p in dial mode only: ${t}`)}}async remove(t){if(i("removing %s",t),this._listeners.has(t))for(const e of this._listeners.get(t))e.removeAllListeners("listening"),e.removeAllListeners("close"),await e.close();this._transports.delete(t),this._listeners.delete(t)}async removeAll(){const t=[];for(const e of this._transports.keys())t.push(this.remove(e));await Promise.all(t)}}const h={FATAL_ALL:0,NO_FATAL:1};c.FaultTolerance=h,t.exports=c},46799:function(t,e,r){"use strict";r(21703);const n=r(15652),i=Object.assign(n("libp2p:upgrader"),{error:n("libp2p:upgrader:err")}),o=r(19998),s=r(73434),{Connection:a}=r(19982),u=r(68292),{pipe:c}=r(62100),h=r(98295),{codes:l}=r(65461);class f{constructor({localPeer:t,metrics:e,connectionGater:r,cryptos:n=new Map,muxers:i=new Map,onConnectionEnd:o=(()=>{}),onConnection:s=(()=>{})}){this.connectionGater=r,this.localPeer=t,this.metrics=e,this.cryptos=n,this.muxers=i,this.protector=null,this.protocols=new Map,this.onConnection=s,this.onConnectionEnd=o}async upgradeInbound(t){let e,r,n,s,a,u,c;if(await this.connectionGater.denyInboundConnection(t))throw o(new Error("The multiaddr connection is blocked by gater.acceptConnection"),l.ERR_CONNECTION_INTERCEPTED);if(this.metrics){({setTarget:u,proxy:c}=h());const e=(1e9*Math.random()).toString(36)+Date.now();u({toB58String:()=>e}),t=this.metrics.trackStream({stream:t,remotePeer:c})}i("Starting the inbound connection upgrade");let f=t;this.protector&&(f=await this.protector.protect(t));try{if(({conn:e,remotePeer:r,protocol:a}=await this._encryptInbound(this.localPeer,f,this.cryptos)),await this.connectionGater.denyInboundEncryptedConnection(r,e))throw o(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),l.ERR_CONNECTION_INTERCEPTED);this.muxers.size?({stream:n,Muxer:s}=await this._multiplexInbound(e,this.muxers)):n=e}catch(d){throw i.error("Failed to upgrade inbound connection",d),await t.close(d),d}if(await this.connectionGater.denyInboundUpgradedConnection(r,e))throw o(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),l.ERR_CONNECTION_INTERCEPTED);return this.metrics&&(this.metrics.updatePlaceholder(c,r),u(r)),i("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:a,direction:"inbound",maConn:t,upgradedConn:n,Muxer:s,remotePeer:r})}async upgradeOutbound(t){const e=t.remoteAddr.getPeerId();if(!e)throw o(new Error("outbound connection must have a peer id"),l.ERR_INVALID_MULTIADDR);const r=u.createFromB58String(e);if(await this.connectionGater.denyOutboundConnection(r,t))throw o(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),l.ERR_CONNECTION_INTERCEPTED);let n,s,a,c,f,d,p;if(this.metrics){({setTarget:d,proxy:p}=h());const e=(1e9*Math.random()).toString(36)+Date.now();d({toB58String:()=>e}),t=this.metrics.trackStream({stream:t,remotePeer:p})}i("Starting the outbound connection upgrade");let y=t;this.protector&&(y=await this.protector.protect(t));try{if(({conn:n,remotePeer:s,protocol:c}=await this._encryptOutbound(this.localPeer,y,r,this.cryptos)),await this.connectionGater.denyOutboundEncryptedConnection(s,n))throw o(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),l.ERR_CONNECTION_INTERCEPTED);this.muxers.size?({stream:a,Muxer:f}=await this._multiplexOutbound(n,this.muxers)):a=n}catch(g){throw i.error("Failed to upgrade outbound connection",g),await t.close(g),g}if(await this.connectionGater.denyOutboundUpgradedConnection(s,n))throw o(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),l.ERR_CONNECTION_INTERCEPTED);return this.metrics&&(this.metrics.updatePlaceholder(p,s),d(s)),i("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:c,direction:"outbound",maConn:t,upgradedConn:a,Muxer:f,remotePeer:s})}_createConnection({cryptoProtocol:t,direction:e,maConn:r,upgradedConn:n,Muxer:u,remotePeer:h}){let f,d,p;u&&(f=new u({onStream:async t=>{if(!p)return;const r=new s.Listener(t);try{const{stream:n,protocol:o}=await r.handle(Array.from(this.protocols.keys()));i("%s: incoming stream opened on %s",e,o),this.metrics&&this.metrics.trackStream({stream:n,remotePeer:h,protocol:o}),p.addStream(t,{protocol:o}),this._onStream({connection:p,stream:{...t,...n},protocol:o})}catch(n){i.error(n)}},onStreamEnd:t=>{p.removeStream(t.id)}}),d=async t=>{i("%s: starting new stream on %s",e,t);const r=f.newStream(),n=new s.Dialer(r);try{const{stream:e,protocol:i}=await n.select(t);return this.metrics&&this.metrics.trackStream({stream:e,remotePeer:h,protocol:i}),{stream:{...r,...e},protocol:i}}catch(a){throw i.error("could not create new stream",a),o(a,l.ERR_UNSUPPORTED_PROTOCOL)}},c(n,f,n).catch(i.error));const y=r.timeline;r.timeline=new Proxy(y,{set:(...t)=>(p&&"close"===t[1]&&t[2]&&!y.close&&(async()=>{try{"open"===p.stat.status&&await p.close()}catch(t){i.error(t)}finally{this.onConnectionEnd(p)}})().catch((t=>{i.error(t)})),Reflect.set(...t))}),r.timeline.upgraded=Date.now();const g=()=>{throw o(new Error("connection is not multiplexed"),l.ERR_CONNECTION_NOT_MULTIPLEXED)};return p=new a({localAddr:r.localAddr,remoteAddr:r.remoteAddr,localPeer:this.localPeer,remotePeer:h,stat:{direction:e,timeline:r.timeline,multiplexer:u&&u.multicodec,encryption:t},newStream:d||g,getStreams:()=>f?f.streams:g(),close:async()=>{await r.close(),f&&f.streams.map((t=>t.abort()))}}),this.onConnection(p),p}_onStream({connection:t,stream:e,protocol:r}){const n=this.protocols.get(r);n({connection:t,stream:e,protocol:r})}async _encryptInbound(t,e,r){const n=new s.Listener(e),a=Array.from(r.keys());i("handling inbound crypto protocol selection",a);try{const{stream:e,protocol:o}=await n.handle(a),s=r.get(o);if(i("encrypting inbound connection..."),!s)throw new Error(`no crypto module found for ${o}`);return{...await s.secureInbound(t,e),protocol:o}}catch(u){throw o(u,l.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(t,e,r,n){const a=new s.Dialer(e),u=Array.from(n.keys());i("selecting outbound crypto protocol",u);try{const{stream:e,protocol:o}=await a.select(u),s=n.get(o);if(i("encrypting outbound connection to %j",r),!s)throw new Error(`no crypto module found for ${o}`);return{...await s.secureOutbound(t,e,r),protocol:o}}catch(c){throw o(c,l.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(t,e){const r=new s.Dialer(t),n=Array.from(e.keys());i("outbound selecting muxer %s",n);try{const{stream:t,protocol:o}=await r.select(n);i("%s selected as muxer protocol",o);const s=e.get(o);return{stream:t,Muxer:s}}catch(a){throw o(a,l.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(t,e){const r=new s.Listener(t),n=Array.from(e.keys());i("inbound handling muxers %s",n);try{const{stream:t,protocol:i}=await r.handle(n),o=e.get(i);return{stream:t,Muxer:o}}catch(a){throw o(a,l.ERR_MUXER_UNAVAILABLE)}}}t.exports=f},33736:function(t,e,r){t=r.nmd(t);var n=200,i="__lodash_hash_undefined__",o=9007199254740991,s="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",h="[object Error]",l="[object Function]",f="[object GeneratorFunction]",d="[object Map]",p="[object Number]",y="[object Object]",g="[object Promise]",m="[object RegExp]",b="[object Set]",w="[object String]",v="[object Symbol]",_="[object WeakMap]",E="[object ArrayBuffer]",S="[object DataView]",A="[object Float32Array]",I="[object Float64Array]",T="[object Int8Array]",R="[object Int16Array]",M="[object Int32Array]",k="[object Uint8Array]",C="[object Uint8ClampedArray]",O="[object Uint16Array]",P="[object Uint32Array]",B=/[\\^$.*+?()[\]{}|]/g,x=/\w*$/,N=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,L={};L[s]=L[a]=L[E]=L[S]=L[u]=L[c]=L[A]=L[I]=L[T]=L[R]=L[M]=L[d]=L[p]=L[y]=L[m]=L[b]=L[w]=L[v]=L[k]=L[C]=L[O]=L[P]=!0,L[h]=L[l]=L[_]=!1;var U="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,j="object"==typeof self&&self&&self.Object===Object&&self,F=U||j||Function("return this")(),K=e&&!e.nodeType&&e,$=K&&t&&!t.nodeType&&t,q=$&&$.exports===K;function H(t,e){return t.set(e[0],e[1]),t}function z(t,e){return t.add(e),t}function V(t,e){var r=-1,n=t?t.length:0;while(++r<n)if(!1===e(t[r],r,t))break;return t}function G(t,e){var r=-1,n=e.length,i=t.length;while(++r<n)t[i+r]=e[r];return t}function W(t,e,r,n){var i=-1,o=t?t.length:0;n&&o&&(r=t[++i]);while(++i<o)r=e(r,t[i],i,t);return r}function Y(t,e){var r=-1,n=Array(t);while(++r<t)n[r]=e(r);return n}function J(t,e){return null==t?void 0:t[e]}function Z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function X(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function Q(t,e){return function(r){return t(e(r))}}function tt(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var et=Array.prototype,rt=Function.prototype,nt=Object.prototype,it=F["__core-js_shared__"],ot=function(){var t=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),st=rt.toString,at=nt.hasOwnProperty,ut=nt.toString,ct=RegExp("^"+st.call(at).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=q?F.Buffer:void 0,lt=F.Symbol,ft=F.Uint8Array,dt=Q(Object.getPrototypeOf,Object),pt=Object.create,yt=nt.propertyIsEnumerable,gt=et.splice,mt=Object.getOwnPropertySymbols,bt=ht?ht.isBuffer:void 0,wt=Q(Object.keys,Object),vt=Te(F,"DataView"),_t=Te(F,"Map"),Et=Te(F,"Promise"),St=Te(F,"Set"),At=Te(F,"WeakMap"),It=Te(Object,"create"),Tt=De(vt),Rt=De(_t),Mt=De(Et),kt=De(St),Ct=De(At),Ot=lt?lt.prototype:void 0,Pt=Ot?Ot.valueOf:void 0;function Bt(t){var e=-1,r=t?t.length:0;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function xt(){this.__data__=It?It(null):{}}function Nt(t){return this.has(t)&&delete this.__data__[t]}function Dt(t){var e=this.__data__;if(It){var r=e[t];return r===i?void 0:r}return at.call(e,t)?e[t]:void 0}function Lt(t){var e=this.__data__;return It?void 0!==e[t]:at.call(e,t)}function Ut(t,e){var r=this.__data__;return r[t]=It&&void 0===e?i:e,this}function jt(t){var e=-1,r=t?t.length:0;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function Ft(){this.__data__=[]}function Kt(t){var e=this.__data__,r=oe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():gt.call(e,r,1),!0}function $t(t){var e=this.__data__,r=oe(e,t);return r<0?void 0:e[r][1]}function qt(t){return oe(this.__data__,t)>-1}function Ht(t,e){var r=this.__data__,n=oe(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function zt(t){var e=-1,r=t?t.length:0;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function Vt(){this.__data__={hash:new Bt,map:new(_t||jt),string:new Bt}}function Gt(t){return Ie(this,t)["delete"](t)}function Wt(t){return Ie(this,t).get(t)}function Yt(t){return Ie(this,t).has(t)}function Jt(t,e){return Ie(this,t).set(t,e),this}function Zt(t){this.__data__=new jt(t)}function Xt(){this.__data__=new jt}function Qt(t){return this.__data__["delete"](t)}function te(t){return this.__data__.get(t)}function ee(t){return this.__data__.has(t)}function re(t,e){var r=this.__data__;if(r instanceof jt){var i=r.__data__;if(!_t||i.length<n-1)return i.push([t,e]),this;r=this.__data__=new zt(i)}return r.set(t,e),this}function ne(t,e){var r=Fe(t)||je(t)?Y(t.length,String):[],n=r.length,i=!!n;for(var o in t)!e&&!at.call(t,o)||i&&("length"==o||Pe(o,n))||r.push(o);return r}function ie(t,e,r){var n=t[e];at.call(t,e)&&Ue(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function oe(t,e){var r=t.length;while(r--)if(Ue(t[r][0],e))return r;return-1}function se(t,e){return t&&Ee(e,We(e),t)}function ae(t,e,r,n,i,o,a){var u;if(n&&(u=o?n(t,i,o,a):n(t)),void 0!==u)return u;if(!Ve(t))return t;var c=Fe(t);if(c){if(u=ke(t),!e)return _e(t,u)}else{var h=Me(t),d=h==l||h==f;if(qe(t))return de(t,e);if(h==y||h==s||d&&!o){if(Z(t))return o?t:{};if(u=Ce(d?{}:t),!e)return Se(t,se(u,t))}else{if(!L[h])return o?t:{};u=Oe(t,h,ae,e)}}a||(a=new Zt);var p=a.get(t);if(p)return p;if(a.set(t,u),!c)var g=r?Ae(t):We(t);return V(g||t,(function(i,o){g&&(o=i,i=t[o]),ie(u,o,ae(i,e,r,n,o,t,a))})),u}function ue(t){return Ve(t)?pt(t):{}}function ce(t,e,r){var n=e(t);return Fe(t)?n:G(n,r(t))}function he(t){return ut.call(t)}function le(t){if(!Ve(t)||xe(t))return!1;var e=He(t)||Z(t)?ct:N;return e.test(De(t))}function fe(t){if(!Ne(t))return wt(t);var e=[];for(var r in Object(t))at.call(t,r)&&"constructor"!=r&&e.push(r);return e}function de(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}function pe(t){var e=new t.constructor(t.byteLength);return new ft(e).set(new ft(t)),e}function ye(t,e){var r=e?pe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function ge(t,e,r){var n=e?r(X(t),!0):X(t);return W(n,H,new t.constructor)}function me(t){var e=new t.constructor(t.source,x.exec(t));return e.lastIndex=t.lastIndex,e}function be(t,e,r){var n=e?r(tt(t),!0):tt(t);return W(n,z,new t.constructor)}function we(t){return Pt?Object(Pt.call(t)):{}}function ve(t,e){var r=e?pe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function _e(t,e){var r=-1,n=t.length;e||(e=Array(n));while(++r<n)e[r]=t[r];return e}function Ee(t,e,r,n){r||(r={});var i=-1,o=e.length;while(++i<o){var s=e[i],a=n?n(r[s],t[s],s,r,t):void 0;ie(r,s,void 0===a?t[s]:a)}return r}function Se(t,e){return Ee(t,Re(t),e)}function Ae(t){return ce(t,We,Re)}function Ie(t,e){var r=t.__data__;return Be(e)?r["string"==typeof e?"string":"hash"]:r.map}function Te(t,e){var r=J(t,e);return le(r)?r:void 0}Bt.prototype.clear=xt,Bt.prototype["delete"]=Nt,Bt.prototype.get=Dt,Bt.prototype.has=Lt,Bt.prototype.set=Ut,jt.prototype.clear=Ft,jt.prototype["delete"]=Kt,jt.prototype.get=$t,jt.prototype.has=qt,jt.prototype.set=Ht,zt.prototype.clear=Vt,zt.prototype["delete"]=Gt,zt.prototype.get=Wt,zt.prototype.has=Yt,zt.prototype.set=Jt,Zt.prototype.clear=Xt,Zt.prototype["delete"]=Qt,Zt.prototype.get=te,Zt.prototype.has=ee,Zt.prototype.set=re;var Re=mt?Q(mt,Object):Ye,Me=he;function ke(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&at.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Ce(t){return"function"!=typeof t.constructor||Ne(t)?{}:ue(dt(t))}function Oe(t,e,r,n){var i=t.constructor;switch(e){case E:return pe(t);case u:case c:return new i(+t);case S:return ye(t,n);case A:case I:case T:case R:case M:case k:case C:case O:case P:return ve(t,n);case d:return ge(t,n,r);case p:case w:return new i(t);case m:return me(t);case b:return be(t,n,r);case v:return we(t)}}function Pe(t,e){return e=null==e?o:e,!!e&&("number"==typeof t||D.test(t))&&t>-1&&t%1==0&&t<e}function Be(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function xe(t){return!!ot&&ot in t}function Ne(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||nt;return t===r}function De(t){if(null!=t){try{return st.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Le(t){return ae(t,!0,!0)}function Ue(t,e){return t===e||t!==t&&e!==e}function je(t){return $e(t)&&at.call(t,"callee")&&(!yt.call(t,"callee")||ut.call(t)==s)}(vt&&Me(new vt(new ArrayBuffer(1)))!=S||_t&&Me(new _t)!=d||Et&&Me(Et.resolve())!=g||St&&Me(new St)!=b||At&&Me(new At)!=_)&&(Me=function(t){var e=ut.call(t),r=e==y?t.constructor:void 0,n=r?De(r):void 0;if(n)switch(n){case Tt:return S;case Rt:return d;case Mt:return g;case kt:return b;case Ct:return _}return e});var Fe=Array.isArray;function Ke(t){return null!=t&&ze(t.length)&&!He(t)}function $e(t){return Ge(t)&&Ke(t)}var qe=bt||Je;function He(t){var e=Ve(t)?ut.call(t):"";return e==l||e==f}function ze(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function Ve(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ge(t){return!!t&&"object"==typeof t}function We(t){return Ke(t)?ne(t):fe(t)}function Ye(){return[]}function Je(){return!1}t.exports=Le},19438:function(t,e,r){r(48675),r(3462),r(37380),r(1118),r(21703),t.exports=i;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(k){}function i(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function o(t){return!0===(t&&t["__isLong__"])}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=o;var s={},a={};function u(t,e){var r,n,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(n=a[t],n)?n:(r=h(t,(0|t)<0?-1:0,!0),i&&(a[t]=r),r)):(t|=0,(i=-128<=t&&t<128)&&(n=s[t],n)?n:(r=h(t,t<0?-1:0,!1),i&&(s[t]=r),r))}function c(t,e){if(isNaN(t))return e?_:v;if(e){if(t<0)return _;if(t>=m)return T}else{if(t<=-b)return R;if(t+1>=b)return I}return t<0?c(-t,e).neg():h(t%g|0,t/g|0,e)}function h(t,e,r){return new i(t,e,r)}i.fromInt=u,i.fromNumber=c,i.fromBits=h;var l=Math.pow;function f(t,e,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return v;if("number"===typeof e?(r=e,e=!1):e=!!e,r=r||10,r<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return f(t.substring(1),e,r).neg();for(var i=c(l(r,8)),o=v,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+a),r);if(a<8){var h=c(l(r,a));o=o.mul(h).add(c(u))}else o=o.mul(i),o=o.add(c(u))}return o.unsigned=e,o}function d(t,e){return"number"===typeof t?c(t,e):"string"===typeof t?f(t,e):h(t.low,t.high,"boolean"===typeof e?e:t.unsigned)}i.fromString=f,i.fromValue=d;var p=65536,y=1<<24,g=p*p,m=g*g,b=m/2,w=u(y),v=u(0);i.ZERO=v;var _=u(0,!0);i.UZERO=_;var E=u(1);i.ONE=E;var S=u(1,!0);i.UONE=S;var A=u(-1);i.NEG_ONE=A;var I=h(-1,2147483647,!1);i.MAX_VALUE=I;var T=h(-1,-1,!0);i.MAX_UNSIGNED_VALUE=T;var R=h(0,-2147483648,!1);i.MIN_VALUE=R;var M=i.prototype;M.toInt=function(){return this.unsigned?this.low>>>0:this.low},M.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},M.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(R)){var e=c(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}var i=c(l(t,6),this.unsigned),o=this,s="";while(1){var a=o.div(i),u=o.sub(a.mul(i)).toInt()>>>0,h=u.toString(t);if(o=a,o.isZero())return h+s;while(h.length<6)h="0"+h;s=""+h+s}},M.getHighBits=function(){return this.high},M.getHighBitsUnsigned=function(){return this.high>>>0},M.getLowBits=function(){return this.low},M.getLowBitsUnsigned=function(){return this.low>>>0},M.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0;e--)if(0!=(t&1<<e))break;return 0!=this.high?e+33:e+1},M.isZero=function(){return 0===this.high&&0===this.low},M.eqz=M.isZero,M.isNegative=function(){return!this.unsigned&&this.high<0},M.isPositive=function(){return this.unsigned||this.high>=0},M.isOdd=function(){return 1===(1&this.low)},M.isEven=function(){return 0===(1&this.low)},M.equals=function(t){return o(t)||(t=d(t)),(this.unsigned===t.unsigned||this.high>>>31!==1||t.high>>>31!==1)&&(this.high===t.high&&this.low===t.low)},M.eq=M.equals,M.notEquals=function(t){return!this.eq(t)},M.neq=M.notEquals,M.ne=M.notEquals,M.lessThan=function(t){return this.comp(t)<0},M.lt=M.lessThan,M.lessThanOrEqual=function(t){return this.comp(t)<=0},M.lte=M.lessThanOrEqual,M.le=M.lessThanOrEqual,M.greaterThan=function(t){return this.comp(t)>0},M.gt=M.greaterThan,M.greaterThanOrEqual=function(t){return this.comp(t)>=0},M.gte=M.greaterThanOrEqual,M.ge=M.greaterThanOrEqual,M.compare=function(t){if(o(t)||(t=d(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},M.comp=M.compare,M.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(E)},M.neg=M.negate,M.add=function(t){o(t)||(t=d(t));var e=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=65535&t.low,l=0,f=0,p=0,y=0;return y+=i+c,p+=y>>>16,y&=65535,p+=n+u,f+=p>>>16,p&=65535,f+=r+a,l+=f>>>16,f&=65535,l+=e+s,l&=65535,h(p<<16|y,l<<16|f,this.unsigned)},M.subtract=function(t){return o(t)||(t=d(t)),this.add(t.neg())},M.sub=M.subtract,M.multiply=function(t){if(this.isZero())return v;if(o(t)||(t=d(t)),n){var e=n.mul(this.low,this.high,t.low,t.high);return h(e,n.get_high(),this.unsigned)}if(t.isZero())return v;if(this.eq(R))return t.isOdd()?R:v;if(t.eq(R))return this.isOdd()?R:v;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(w)&&t.lt(w))return c(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,i=65535&this.high,s=this.low>>>16,a=65535&this.low,u=t.high>>>16,l=65535&t.high,f=t.low>>>16,p=65535&t.low,y=0,g=0,m=0,b=0;return b+=a*p,m+=b>>>16,b&=65535,m+=s*p,g+=m>>>16,m&=65535,m+=a*f,g+=m>>>16,m&=65535,g+=i*p,y+=g>>>16,g&=65535,g+=s*f,y+=g>>>16,g&=65535,g+=a*l,y+=g>>>16,g&=65535,y+=r*p+i*f+s*l+a*u,y&=65535,h(m<<16|b,y<<16|g,this.unsigned)},M.mul=M.multiply,M.divide=function(t){if(o(t)||(t=d(t)),t.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&-2147483648===this.high&&-1===t.low&&-1===t.high)return this;var e=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,t.low,t.high);return h(e,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?_:v;var r,i,s;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return _;if(t.gt(this.shru(1)))return S;s=_}else{if(this.eq(R)){if(t.eq(E)||t.eq(A))return R;if(t.eq(R))return E;var a=this.shr(1);return r=a.div(t).shl(1),r.eq(v)?t.isNegative()?E:A:(i=this.sub(t.mul(r)),s=r.add(i.div(t)),s)}if(t.eq(R))return this.unsigned?_:v;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=v}i=this;while(i.gte(t)){r=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));var u=Math.ceil(Math.log(r)/Math.LN2),f=u<=48?1:l(2,u-48),p=c(r),y=p.mul(t);while(y.isNegative()||y.gt(i))r-=f,p=c(r,this.unsigned),y=p.mul(t);p.isZero()&&(p=E),s=s.add(p),i=i.sub(y)}return s},M.div=M.divide,M.modulo=function(t){if(o(t)||(t=d(t)),n){var e=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,t.low,t.high);return h(e,n.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},M.mod=M.modulo,M.rem=M.modulo,M.not=function(){return h(~this.low,~this.high,this.unsigned)},M.and=function(t){return o(t)||(t=d(t)),h(this.low&t.low,this.high&t.high,this.unsigned)},M.or=function(t){return o(t)||(t=d(t)),h(this.low|t.low,this.high|t.high,this.unsigned)},M.xor=function(t){return o(t)||(t=d(t)),h(this.low^t.low,this.high^t.high,this.unsigned)},M.shiftLeft=function(t){return o(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?h(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):h(0,this.low<<t-32,this.unsigned)},M.shl=M.shiftLeft,M.shiftRight=function(t){return o(t)&&(t=t.toInt()),0===(t&=63)?this:t<32?h(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):h(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},M.shr=M.shiftRight,M.shiftRightUnsigned=function(t){if(o(t)&&(t=t.toInt()),t&=63,0===t)return this;var e=this.high;if(t<32){var r=this.low;return h(r>>>t|e<<32-t,e>>>t,this.unsigned)}return h(32===t?e:e>>>t-32,0,this.unsigned)},M.shru=M.shiftRightUnsigned,M.shr_u=M.shiftRightUnsigned,M.toSigned=function(){return this.unsigned?h(this.low,this.high,!1):this},M.toUnsigned=function(){return this.unsigned?this:h(this.low,this.high,!0)},M.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},M.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},M.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},i.fromBytes=function(t,e,r){return r?i.fromBytesLE(t,e):i.fromBytesBE(t,e)},i.fromBytesLE=function(t,e){return new i(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},i.fromBytesBE=function(t,e){return new i(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},29026:function(t,e,r){r(21703),function(t,r){r(e)}(0,(function(t){const e=Symbol("newer"),r=Symbol("older");class n{constructor(t,e){"number"!==typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))}_markEntryAsUsed(t){t!==this.newest&&(t[e]&&(t===this.oldest&&(this.oldest=t[e]),t[e][r]=t[r]),t[r]&&(t[r][e]=t[e]),t[e]=void 0,t[r]=this.newest,this.newest&&(this.newest[e]=t),this.newest=t)}assign(t){let n,o=this.limit||Number.MAX_VALUE;this._keymap.clear();let s=t[Symbol.iterator]();for(let a=s.next();!a.done;a=s.next()){let t=new i(a.value[0],a.value[1]);if(this._keymap.set(t.key,t),n?(n[e]=t,t[r]=n):this.oldest=t,n=t,0==o--)throw new Error("overflow")}this.newest=n,this.size=this._keymap.size}get(t){var e=this._keymap.get(t);return e?(this._markEntryAsUsed(e),e.value):void 0}set(t,n){var o=this._keymap.get(t);return o?(o.value=n,this._markEntryAsUsed(o),this):(this._keymap.set(t,o=new i(t,n)),this.newest?(this.newest[e]=o,o[r]=this.newest):this.oldest=o,this.newest=o,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var t=this.oldest;if(t)return this.oldest[e]?(this.oldest=this.oldest[e],this.oldest[r]=void 0):(this.oldest=void 0,this.newest=void 0),t[e]=t[r]=void 0,this._keymap.delete(t.key),--this.size,[t.key,t.value]}find(t){let e=this._keymap.get(t);return e?e.value:void 0}has(t){return this._keymap.has(t)}delete(t){var n=this._keymap.get(t);return n?(this._keymap.delete(n.key),n[e]&&n[r]?(n[r][e]=n[e],n[e][r]=n[r]):n[e]?(n[e][r]=void 0,this.oldest=n[e]):n[r]?(n[r][e]=void 0,this.newest=n[r]):this.oldest=this.newest=void 0,this.size--,n.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new s(this.oldest)}values(){return new a(this.oldest)}entries(){return this}[Symbol.iterator](){return new o(this.oldest)}forEach(t,r){"object"!==typeof r&&(r=this);let n=this.oldest;for(;n;)t.call(r,n.value,n.key,this),n=n[e]}toJSON(){for(var t=new Array(this.size),r=0,n=this.oldest;n;)t[r++]={key:n.key,value:n.value},n=n[e];return t}toString(){for(var t="",r=this.oldest;r;)t+=String(r.key)+":"+r.value,r=r[e],r&&(t+=" < ");return t}}function i(t,n){this.key=t,this.value=n,this[e]=void 0,this[r]=void 0}function o(t){this.entry=t}function s(t){this.entry=t}function a(t){this.entry=t}t.LRUMap=n,o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:t.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let t=this.entry;return t?(this.entry=t[e],{done:!1,value:t.value}):{done:!0,value:void 0}}}))},49605:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const{Multiaddr:n}=r(19391),i=C("dns4"),o=C("dns6"),s=C("dnsaddr"),a=k(C("dns"),s,i,o),u=k(C("ip4"),C("ip6")),c=k(M(u,C("tcp")),M(a,C("tcp"))),h=M(u,C("udp")),l=M(h,C("utp")),f=M(h,C("quic")),d=k(M(c,C("ws")),M(a,C("ws"))),p=k(M(c,C("wss")),M(a,C("wss"))),y=k(M(c,C("http")),M(u,C("http")),M(a,C("http"))),g=k(M(c,C("https")),M(u,C("https")),M(a,C("https"))),m=k(M(d,C("p2p-webrtc-star"),C("p2p")),M(p,C("p2p-webrtc-star"),C("p2p")),M(d,C("p2p-webrtc-star")),M(p,C("p2p-webrtc-star"))),b=k(M(d,C("p2p-websocket-star"),C("p2p")),M(p,C("p2p-websocket-star"),C("p2p")),M(d,C("p2p-websocket-star")),M(p,C("p2p-websocket-star"))),w=k(M(y,C("p2p-webrtc-direct"),C("p2p")),M(g,C("p2p-webrtc-direct"),C("p2p")),M(y,C("p2p-webrtc-direct")),M(g,C("p2p-webrtc-direct"))),v=k(d,p,y,g,m,w,c,l,f,a),_=k(M(v,C("p2p-stardust"),C("p2p")),M(v,C("p2p-stardust"))),E=k(M(v,C("p2p")),m,w,C("p2p")),S=k(M(E,C("p2p-circuit"),E),M(E,C("p2p-circuit")),M(C("p2p-circuit"),E),M(v,C("p2p-circuit")),M(C("p2p-circuit"),v),C("p2p-circuit")),A=()=>k(M(S,A),S),I=A(),T=k(M(I,E,I),M(E,I),M(I,E),I,E);function R(t){function e(e){if(!n.isMultiaddr(e))try{e=new n(e)}catch(i){return!1}const r=t(e.protoNames());return null!==r&&(!0===r||!1===r?r:0===r.length)}return e}function M(...t){function e(e){if(e.length<t.length)return null;let r=e;return t.some((t=>(r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r))),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:R(e),partialMatch:e}}function k(...t){function e(e){let r=null;return t.some((t=>{const n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return!!n&&(r=n,!0)})),r}const r={toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:R(e),partialMatch:e};return r}function C(t){const e=t;function r(t){let r;if("string"===typeof t||t instanceof Uint8Array)try{r=new n(t)}catch(o){return!1}else r=t;const i=r.protoNames();return 1===i.length&&i[0]===e}function i(t){return 0===t.length?null:t[0]===e?t.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:i}}t.exports={DNS:a,DNS4:i,DNS6:o,DNSADDR:s,IP:u,TCP:c,UDP:h,QUIC:f,UTP:l,HTTP:y,HTTPS:g,WebSockets:d,WebSocketsSecure:p,WebSocketStar:b,WebRTCStar:m,WebRTCDirect:w,Reliable:v,Stardust:_,Circuit:I,P2P:T,IPFS:T}},74993:function(t,e,r){"use strict";var n=r(81923),i=r(10761),o=r(6779).Buffer,s=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function c(t,e,r,n,i,o,s){return u(t+(e&r|~e&n)+i+o|0,s)+e|0}function h(t,e,r,n,i,o,s){return u(t+(e&n|r&~n)+i+o|0,s)+e|0}function l(t,e,r,n,i,o,s){return u(t+(e^r^n)+i+o|0,s)+e|0}function f(t,e,r,n,i,o,s){return u(t+(r^(e|~n))+i+o|0,s)+e|0}n(a,i),a.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=c(r,n,i,o,t[0],3614090360,7),o=c(o,r,n,i,t[1],3905402710,12),i=c(i,o,r,n,t[2],606105819,17),n=c(n,i,o,r,t[3],3250441966,22),r=c(r,n,i,o,t[4],4118548399,7),o=c(o,r,n,i,t[5],1200080426,12),i=c(i,o,r,n,t[6],2821735955,17),n=c(n,i,o,r,t[7],4249261313,22),r=c(r,n,i,o,t[8],1770035416,7),o=c(o,r,n,i,t[9],2336552879,12),i=c(i,o,r,n,t[10],4294925233,17),n=c(n,i,o,r,t[11],2304563134,22),r=c(r,n,i,o,t[12],1804603682,7),o=c(o,r,n,i,t[13],4254626195,12),i=c(i,o,r,n,t[14],2792965006,17),n=c(n,i,o,r,t[15],1236535329,22),r=h(r,n,i,o,t[1],4129170786,5),o=h(o,r,n,i,t[6],3225465664,9),i=h(i,o,r,n,t[11],643717713,14),n=h(n,i,o,r,t[0],3921069994,20),r=h(r,n,i,o,t[5],3593408605,5),o=h(o,r,n,i,t[10],38016083,9),i=h(i,o,r,n,t[15],3634488961,14),n=h(n,i,o,r,t[4],3889429448,20),r=h(r,n,i,o,t[9],568446438,5),o=h(o,r,n,i,t[14],3275163606,9),i=h(i,o,r,n,t[3],4107603335,14),n=h(n,i,o,r,t[8],1163531501,20),r=h(r,n,i,o,t[13],2850285829,5),o=h(o,r,n,i,t[2],4243563512,9),i=h(i,o,r,n,t[7],1735328473,14),n=h(n,i,o,r,t[12],2368359562,20),r=l(r,n,i,o,t[5],4294588738,4),o=l(o,r,n,i,t[8],2272392833,11),i=l(i,o,r,n,t[11],1839030562,16),n=l(n,i,o,r,t[14],4259657740,23),r=l(r,n,i,o,t[1],2763975236,4),o=l(o,r,n,i,t[4],1272893353,11),i=l(i,o,r,n,t[7],4139469664,16),n=l(n,i,o,r,t[10],3200236656,23),r=l(r,n,i,o,t[13],681279174,4),o=l(o,r,n,i,t[0],3936430074,11),i=l(i,o,r,n,t[3],3572445317,16),n=l(n,i,o,r,t[6],76029189,23),r=l(r,n,i,o,t[9],3654602809,4),o=l(o,r,n,i,t[12],3873151461,11),i=l(i,o,r,n,t[15],530742520,16),n=l(n,i,o,r,t[2],3299628645,23),r=f(r,n,i,o,t[0],4096336452,6),o=f(o,r,n,i,t[7],1126891415,10),i=f(i,o,r,n,t[14],2878612391,15),n=f(n,i,o,r,t[5],4237533241,21),r=f(r,n,i,o,t[12],1700485571,6),o=f(o,r,n,i,t[3],2399980690,10),i=f(i,o,r,n,t[10],4293915773,15),n=f(n,i,o,r,t[1],2240044497,21),r=f(r,n,i,o,t[8],1873313359,6),o=f(o,r,n,i,t[15],4264355552,10),i=f(i,o,r,n,t[6],2734768916,15),n=f(n,i,o,r,t[13],1309151649,21),r=f(r,n,i,o,t[4],4149444226,6),o=f(o,r,n,i,t[11],3174756917,10),i=f(i,o,r,n,t[2],718787259,15),n=f(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},80535:function(t,e,r){"use strict";r(26699),r(21703);const n=r(51800),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:o}=Object,s=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,u={concatArrays:!1,ignoreUndefined:!1},c=t=>{const e=[];for(const r in t)i.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)o.call(t,n)&&e.push(n)}return e};function h(t){return Array.isArray(t)?l(t):n(t)?f(t):t}function l(t){const e=t.slice(0,0);return c(t).forEach((r=>{s(e,r,h(t[r]))})),e}function f(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return c(t).forEach((r=>{s(e,r,h(t[r]))})),e}const d=(t,e,r,n)=>(r.forEach((r=>{"undefined"===typeof e[r]&&n.ignoreUndefined||(r in t&&t[r]!==Object.getPrototypeOf(t)?s(t,r,y(t[r],e[r],n)):s(t,r,h(e[r])))})),t),p=(t,e,r)=>{let n=t.slice(0,0),o=0;return[t,e].forEach((e=>{const a=[];for(let r=0;r<e.length;r++)i.call(e,r)&&(a.push(String(r)),s(n,o++,e===t?e[r]:h(e[r])));n=d(n,e,c(e).filter((t=>!a.includes(t))),r)})),n};function y(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?p(t,e,r):n(e)&&n(t)?d(t,e,c(e),r):h(e)}t.exports=function(...t){const e=y(h(u),this!==a&&this||{},u);let r={_:{}};for(const i of t)if(void 0!==i){if(!n(i))throw new TypeError("`"+i+"` is not an Option Object");r=y(r,{_:i},e)}return r._}},51800:function(t){"use strict";t.exports=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}},68529:function(t,e,r){var n=r(11863),i=r(31482);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},o.prototype.test=function(t,e,r){var i=t.bitLength(),o=n.mont(t),s=new n(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var a=t.subn(1),u=0;!a.testn(u);u++);for(var c=t.shrn(u),h=a.toRed(o),l=!0;e>0;e--){var f=this._randrange(new n(2),a);r&&r(f);var d=f.toRed(o).redPow(c);if(0!==d.cmp(s)&&0!==d.cmp(h)){for(var p=1;p<u;p++){if(d=d.redSqr(),0===d.cmp(s))return!1;if(0===d.cmp(h))break}if(p===u)return!1}}return l},o.prototype.getDivisor=function(t,e){var r=t.bitLength(),i=n.mont(t),o=new n(1).toRed(i);e||(e=Math.max(1,r/48|0));for(var s=t.subn(1),a=0;!s.testn(a);a++);for(var u=t.shrn(a),c=s.toRed(i);e>0;e--){var h=this._randrange(new n(2),s),l=t.gcd(h);if(0!==l.cmpn(1))return l;var f=h.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(c)){for(var d=1;d<a;d++){if(f=f.redSqr(),0===f.cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(c))break}if(d===a)return f=f.redSqr(),f.fromRed().subn(1).gcd(t)}}return!1}},11863:function(t,e,r){t=r.nmd(t),r(21703),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(56619).Buffer}catch(R){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function c(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8}this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,h=r;h<a;h+=n)u=c(t,h,h+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype.strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;i=0|t.words[p],o=0|e.words[d],s=i*o+l,h+=s/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,r=0!==o||s!==this.length-1?h[6-u.length]+u+r:u+r,i+=2,i>=26&&(i-=26,s--)}0!==o&&(r=o.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],d=f[t];r="";var p=this.clone();p.negative=0;while(!p.isZero()){var y=p.modn(d).toString(t);p=p.idivn(d),r=p.isZero()?y+r:h[c-y.length]+y+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)e=(0|r.words[s])-(0|n.words[s])+o,o=e>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)e=(0|r.words[s])+o,o=e>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,y=d>>>13,g=0|s[2],m=8191&g,b=g>>>13,w=0|s[3],v=8191&w,_=w>>>13,E=0|s[4],S=8191&E,A=E>>>13,I=0|s[5],T=8191&I,R=I>>>13,M=0|s[6],k=8191&M,C=M>>>13,O=0|s[7],P=8191&O,B=O>>>13,x=0|s[8],N=8191&x,D=x>>>13,L=0|s[9],U=8191&L,j=L>>>13,F=0|a[0],K=8191&F,$=F>>>13,q=0|a[1],H=8191&q,z=q>>>13,V=0|a[2],G=8191&V,W=V>>>13,Y=0|a[3],J=8191&Y,Z=Y>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(l,K),i=Math.imul(l,$),i=i+Math.imul(f,K)|0,o=Math.imul(f,$);var gt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,K),i=Math.imul(p,$),i=i+Math.imul(y,K)|0,o=Math.imul(y,$),n=n+Math.imul(l,H)|0,i=i+Math.imul(l,z)|0,i=i+Math.imul(f,H)|0,o=o+Math.imul(f,z)|0;var mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,K),i=Math.imul(m,$),i=i+Math.imul(b,K)|0,o=Math.imul(b,$),n=n+Math.imul(p,H)|0,i=i+Math.imul(p,z)|0,i=i+Math.imul(y,H)|0,o=o+Math.imul(y,z)|0,n=n+Math.imul(l,G)|0,i=i+Math.imul(l,W)|0,i=i+Math.imul(f,G)|0,o=o+Math.imul(f,W)|0;var bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(v,K),i=Math.imul(v,$),i=i+Math.imul(_,K)|0,o=Math.imul(_,$),n=n+Math.imul(m,H)|0,i=i+Math.imul(m,z)|0,i=i+Math.imul(b,H)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(y,G)|0,o=o+Math.imul(y,W)|0,n=n+Math.imul(l,J)|0,i=i+Math.imul(l,Z)|0,i=i+Math.imul(f,J)|0,o=o+Math.imul(f,Z)|0;var wt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(S,K),i=Math.imul(S,$),i=i+Math.imul(A,K)|0,o=Math.imul(A,$),n=n+Math.imul(v,H)|0,i=i+Math.imul(v,z)|0,i=i+Math.imul(_,H)|0,o=o+Math.imul(_,z)|0,n=n+Math.imul(m,G)|0,i=i+Math.imul(m,W)|0,i=i+Math.imul(b,G)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(l,Q)|0,i=i+Math.imul(l,tt)|0,i=i+Math.imul(f,Q)|0,o=o+Math.imul(f,tt)|0;var vt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(T,K),i=Math.imul(T,$),i=i+Math.imul(R,K)|0,o=Math.imul(R,$),n=n+Math.imul(S,H)|0,i=i+Math.imul(S,z)|0,i=i+Math.imul(A,H)|0,o=o+Math.imul(A,z)|0,n=n+Math.imul(v,G)|0,i=i+Math.imul(v,W)|0,i=i+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,Z)|0,i=i+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,tt)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,n=n+Math.imul(l,rt)|0,i=i+Math.imul(l,nt)|0,i=i+Math.imul(f,rt)|0,o=o+Math.imul(f,nt)|0;var _t=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,K),i=Math.imul(k,$),i=i+Math.imul(C,K)|0,o=Math.imul(C,$),n=n+Math.imul(T,H)|0,i=i+Math.imul(T,z)|0,i=i+Math.imul(R,H)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(S,G)|0,i=i+Math.imul(S,W)|0,i=i+Math.imul(A,G)|0,o=o+Math.imul(A,W)|0,n=n+Math.imul(v,J)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(m,Q)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=i+Math.imul(p,nt)|0,i=i+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0,n=n+Math.imul(l,ot)|0,i=i+Math.imul(l,st)|0,i=i+Math.imul(f,ot)|0,o=o+Math.imul(f,st)|0;var Et=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(P,K),i=Math.imul(P,$),i=i+Math.imul(B,K)|0,o=Math.imul(B,$),n=n+Math.imul(k,H)|0,i=i+Math.imul(k,z)|0,i=i+Math.imul(C,H)|0,o=o+Math.imul(C,z)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,W)|0,i=i+Math.imul(R,G)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(S,J)|0,i=i+Math.imul(S,Z)|0,i=i+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(v,tt)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=i+Math.imul(p,st)|0,i=i+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,n=n+Math.imul(l,ut)|0,i=i+Math.imul(l,ct)|0,i=i+Math.imul(f,ut)|0,o=o+Math.imul(f,ct)|0;var St=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,K),i=Math.imul(N,$),i=i+Math.imul(D,K)|0,o=Math.imul(D,$),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,z)|0,i=i+Math.imul(B,H)|0,o=o+Math.imul(B,z)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,W)|0,i=i+Math.imul(C,G)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(T,J)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(S,Q)|0,i=i+Math.imul(S,tt)|0,i=i+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(v,rt)|0,i=i+Math.imul(v,nt)|0,i=i+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=i+Math.imul(m,st)|0,i=i+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ut)|0,i=i+Math.imul(p,ct)|0,i=i+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,n=n+Math.imul(l,lt)|0,i=i+Math.imul(l,ft)|0,i=i+Math.imul(f,lt)|0,o=o+Math.imul(f,ft)|0;var At=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,K),i=Math.imul(U,$),i=i+Math.imul(j,K)|0,o=Math.imul(j,$),n=n+Math.imul(N,H)|0,i=i+Math.imul(N,z)|0,i=i+Math.imul(D,H)|0,o=o+Math.imul(D,z)|0,n=n+Math.imul(P,G)|0,i=i+Math.imul(P,W)|0,i=i+Math.imul(B,G)|0,o=o+Math.imul(B,W)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,Z)|0,i=i+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(T,Q)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,i=i+Math.imul(S,nt)|0,i=i+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(v,ot)|0,i=i+Math.imul(v,st)|0,i=i+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(m,ut)|0,i=i+Math.imul(m,ct)|0,i=i+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,lt)|0,i=i+Math.imul(p,ft)|0,i=i+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0,n=n+Math.imul(l,pt)|0,i=i+Math.imul(l,yt)|0,i=i+Math.imul(f,pt)|0,o=o+Math.imul(f,yt)|0;var It=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,H),i=Math.imul(U,z),i=i+Math.imul(j,H)|0,o=Math.imul(j,z),n=n+Math.imul(N,G)|0,i=i+Math.imul(N,W)|0,i=i+Math.imul(D,G)|0,o=o+Math.imul(D,W)|0,n=n+Math.imul(P,J)|0,i=i+Math.imul(P,Z)|0,i=i+Math.imul(B,J)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(k,Q)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(S,ot)|0,i=i+Math.imul(S,st)|0,i=i+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(v,ut)|0,i=i+Math.imul(v,ct)|0,i=i+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(m,lt)|0,i=i+Math.imul(m,ft)|0,i=i+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0,n=n+Math.imul(p,pt)|0,i=i+Math.imul(p,yt)|0,i=i+Math.imul(y,pt)|0,o=o+Math.imul(y,yt)|0;var Tt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,G),i=Math.imul(U,W),i=i+Math.imul(j,G)|0,o=Math.imul(j,W),n=n+Math.imul(N,J)|0,i=i+Math.imul(N,Z)|0,i=i+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(P,Q)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=i+Math.imul(T,st)|0,i=i+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(S,ut)|0,i=i+Math.imul(S,ct)|0,i=i+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,n=n+Math.imul(v,lt)|0,i=i+Math.imul(v,ft)|0,i=i+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0,n=n+Math.imul(m,pt)|0,i=i+Math.imul(m,yt)|0,i=i+Math.imul(b,pt)|0,o=o+Math.imul(b,yt)|0;var Rt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,J),i=Math.imul(U,Z),i=i+Math.imul(j,J)|0,o=Math.imul(j,Z),n=n+Math.imul(N,Q)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(B,rt)|0,o=o+Math.imul(B,nt)|0,n=n+Math.imul(k,ot)|0,i=i+Math.imul(k,st)|0,i=i+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,n=n+Math.imul(T,ut)|0,i=i+Math.imul(T,ct)|0,i=i+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(S,lt)|0,i=i+Math.imul(S,ft)|0,i=i+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0,n=n+Math.imul(v,pt)|0,i=i+Math.imul(v,yt)|0,i=i+Math.imul(_,pt)|0,o=o+Math.imul(_,yt)|0;var Mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,Q),i=Math.imul(U,tt),i=i+Math.imul(j,Q)|0,o=Math.imul(j,tt),n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(P,ot)|0,i=i+Math.imul(P,st)|0,i=i+Math.imul(B,ot)|0,o=o+Math.imul(B,st)|0,n=n+Math.imul(k,ut)|0,i=i+Math.imul(k,ct)|0,i=i+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(T,lt)|0,i=i+Math.imul(T,ft)|0,i=i+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0,n=n+Math.imul(S,pt)|0,i=i+Math.imul(S,yt)|0,i=i+Math.imul(A,pt)|0,o=o+Math.imul(A,yt)|0;var kt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(N,ot)|0,i=i+Math.imul(N,st)|0,i=i+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,n=n+Math.imul(P,ut)|0,i=i+Math.imul(P,ct)|0,i=i+Math.imul(B,ut)|0,o=o+Math.imul(B,ct)|0,n=n+Math.imul(k,lt)|0,i=i+Math.imul(k,ft)|0,i=i+Math.imul(C,lt)|0,o=o+Math.imul(C,ft)|0,n=n+Math.imul(T,pt)|0,i=i+Math.imul(T,yt)|0,i=i+Math.imul(R,pt)|0,o=o+Math.imul(R,yt)|0;var Ct=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,ot),i=Math.imul(U,st),i=i+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(N,ut)|0,i=i+Math.imul(N,ct)|0,i=i+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,n=n+Math.imul(P,lt)|0,i=i+Math.imul(P,ft)|0,i=i+Math.imul(B,lt)|0,o=o+Math.imul(B,ft)|0,n=n+Math.imul(k,pt)|0,i=i+Math.imul(k,yt)|0,i=i+Math.imul(C,pt)|0,o=o+Math.imul(C,yt)|0;var Ot=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ut),i=Math.imul(U,ct),i=i+Math.imul(j,ut)|0,o=Math.imul(j,ct),n=n+Math.imul(N,lt)|0,i=i+Math.imul(N,ft)|0,i=i+Math.imul(D,lt)|0,o=o+Math.imul(D,ft)|0,n=n+Math.imul(P,pt)|0,i=i+Math.imul(P,yt)|0,i=i+Math.imul(B,pt)|0,o=o+Math.imul(B,yt)|0;var Pt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=Math.imul(U,ft),i=i+Math.imul(j,lt)|0,o=Math.imul(j,ft),n=n+Math.imul(N,pt)|0,i=i+Math.imul(N,yt)|0,i=i+Math.imul(D,pt)|0,o=o+Math.imul(D,yt)|0;var Bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,pt),i=Math.imul(U,yt),i=i+Math.imul(j,pt)|0,o=Math.imul(j,yt);var xt=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,u[0]=gt,u[1]=mt,u[2]=bt,u[3]=wt,u[4]=vt,u[5]=_t,u[6]=Et,u[7]=St,u[8]=At,u[9]=It,u[10]=Tt,u[11]=Rt,u[12]=Mt,u[13]=kt,u[14]=Ct,u[15]=Ot,u[16]=Pt,u[17]=Bt,u[18]=xt,0!==c&&(u[19]=c,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=0|t.words[h],f=0|e.words[c],d=l*f,p=67108863&d;s=s+(d/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,i+=s>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function m(t,e,r){var n=new b;return n.mulp(t,e,r)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=p),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?y(this,t,e):n<63?p(this,t,e):n<1024?g(this,t,e):m(this,t,e),r},b.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},b.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},b.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=r[h+d],y=n[h+d],g=r[h+d+s],m=n[h+d+s],b=l*g-f*m;m=l*m+f*g,g=b,r[h+d]=p+g,n[h+d]=y+m,r[h+d+s]=p-g,n[h+d+s]=y-m,d!==a&&(b=u*l-c*f,f=u*f+c*l,l=b)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},b.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=d(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+a,a=o>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)o=-(0|this.words[i])+a,a=o>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,s=0|i.words[i.length-1],a=this._countBits(s);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,u&&(u.words[c]=1));for(var f=c-1;f>=0;f--){var d=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);d=Math.min(d/s|0,67108863),n._ishlnsubmul(i,d,f);while(0!==n.negative)d--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=d)}return u&&u.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++c;var h=r.clone(),l=e.clone();while(!e.isZero()){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0){e.iushrn(f);while(f-- >0)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1)}for(var p=0,y=1;0===(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,s=new o(1),a=new o(0),u=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0){e.iushrn(c);while(c-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0){r.iushrn(l);while(l-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return i=0===e.cmpn(1)?s:a,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new I(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,v),i(S,v),i(A,v),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return w[t]=e,e},I.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),s=0;while(!i.isZero()&&0===i.andln(1))s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();h=new o(2*h*h).toRed(this);while(0!==this.pow(h,c).cmp(u))h.redIAdd(u);var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;while(0!==d.cmp(a)){for(var y=d,g=0;0!==y.cmp(a);g++)y=y.redSqr();n(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=g}return f},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var s=n[0],a=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=c-1;l>=0;l--){var f=h>>l&1;s!==n[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,u++,(u===r||0===i&&0===l)&&(s=this.mul(s,n[a]),u=0,a=0)):u=0}c=26}return s},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,I),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)},14961:function(t,e,r){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}r(21703),t.exports=n,n.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},26605:function(t,e){"use strict";var r=e;function n(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!==typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r}function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}r.toArray=n,r.zero2=i,r.toHex=o,r.encode=function(t,e){return"hex"===e?o(t):t}},35746:function(t,e,r){const n=r(43793).EventEmitter,{nanoid:i}=r(42278),{WORKER_REQUEST_READ_LOCK:o,WORKER_RELEASE_READ_LOCK:s,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:u,WORKER_RELEASE_WRITE_LOCK:c,MASTER_GRANT_WRITE_LOCK:h}=r(24032),l=r(69549),f=(t,e,r,n,i)=>(o,s)=>{if(!s||!s.data||s.data.type!==r)return;const a={type:s.data.type,name:s.data.name,identifier:s.data.identifier};t.emit(e,a.name,(()=>(o.postMessage({type:i,name:a.name,identifier:a.identifier}),new Promise((t=>{const e=r=>{if(!r||!r.data)return;const i={type:r.data.type,name:r.data.name,identifier:r.data.identifier};i&&i.type===n&&i.identifier===a.identifier&&(o.removeEventListener("message",e),t())};o.addEventListener("message",e)})))))},d=(t,e,r,n)=>()=>{const o=i();return globalThis.postMessage({type:e,identifier:o,name:t}),new Promise((e=>{const i=s=>{if(!s||!s.data)return;const a={type:s.data.type,identifier:s.data.identifier};a&&a.type===r&&a.identifier===o&&(globalThis.removeEventListener("message",i),e((()=>{globalThis.postMessage({type:n,identifier:o,name:t})})))};globalThis.addEventListener("message",i)}))},p={singleProcess:!1};t.exports=t=>{t=Object.assign({},p,t);const e=!!globalThis.document||t.singleProcess;if(e){const t=new n;return l.addEventListener("message",f(t,"requestReadLock",o,s,a)),l.addEventListener("message",f(t,"requestWriteLock",u,c,h)),t}return{isWorker:!0,readLock:t=>d(t,o,a,s),writeLock:t=>d(t,u,h,c)}}},24032:function(t){t.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}},461:function(t,e,r){r(26699),r(21703);const n=r(52601),i=r(35746),{default:o}=r(99694),{timeout:s}=r(60287),a=r(69549),u={};let c;function h(t,e){let r;const n=new Promise((t=>{r=t}));return t.add((()=>s((()=>new Promise((t=>{r((()=>{t()}))})))(),e.timeout))),n}const l=(t,e)=>{if(c.isWorker)return{readLock:c.readLock(t,e),writeLock:c.writeLock(t,e)};const r=new o({concurrency:1});let n=null;return{readLock:()=>{if(n)return h(n,e);n=new o({concurrency:e.concurrency,autoStart:!1});const t=n,i=h(n,e);return r.add((()=>(t.start(),t.onIdle().then((()=>{n===t&&(n=null)}))))),i},writeLock:()=>(n=null,h(r,e))}},f={concurrency:1/0,timeout:846e5,global:r.g,singleProcess:!1};t.exports=(t,e)=>(e||(e={}),"object"===typeof t&&(e=t,t="lock"),t||(t="lock"),e=Object.assign({},f,e),c||(c=n(e)||i(e),c.isWorker||(c.on("requestReadLock",((t,e)=>{u[t]&&u[t].readLock().then((t=>e().finally((()=>t()))))})),c.on("requestWriteLock",(async(t,e)=>{u[t]&&u[t].writeLock().then((t=>e().finally((()=>t()))))})))),u[t]||(u[t]=l(t,e)),u[t]),t.exports.Worker=function(t,e){let n;e=e||r.g.Worker;try{n=new e(t)}catch(i){i.message.includes("not a constructor")&&(n=e(t))}if(!n)throw new Error("Could not create Worker from",e);return a(n),n}},52601:function(t,e,r){var n=r(96027);const i=r(43793).EventEmitter,{nanoid:o}=r(42278),{WORKER_REQUEST_READ_LOCK:s,WORKER_RELEASE_READ_LOCK:a,MASTER_GRANT_READ_LOCK:u,WORKER_REQUEST_WRITE_LOCK:c,WORKER_RELEASE_WRITE_LOCK:h,MASTER_GRANT_WRITE_LOCK:l}=r(24032);let f;const d=(t,e,r,n,i)=>(o,s)=>{s&&s.type===r&&t.emit(e,s.name,(()=>(o.send({type:i,name:s.name,identifier:s.identifier}),new Promise((t=>{const e=r=>{r&&r.type===n&&r.identifier===s.identifier&&(o.removeListener("message",e),t())};o.on("message",e)})))))},p=(t,e,r,i)=>()=>{const s=o();return n.send({type:e,identifier:s,name:t}),new Promise((e=>{const o=a=>{a&&a.type===r&&a.identifier===s&&(n.removeListener("message",o),e((()=>{n.send({type:i,identifier:s,name:t})})))};n.on("message",o)}))};t.exports=t=>{try{if(f=r(21724),!Object.keys(f).length)return}catch(e){return}if(f.isMaster||t.singleProcess){const t=new i;return f.on("message",d(t,"requestReadLock",s,a,u)),f.on("message",d(t,"requestWriteLock",c,h,l)),t}return{isWorker:!0,readLock:t=>p(t,s,u,a),writeLock:t=>p(t,c,l,h)}}},47901:function(t,e,r){r(21703);var n=1e3,i=60*n,o=60*i,s=24*o,a=7*s,u=365.25*s;function c(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),c=(e[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"weeks":case"week":case"w":return r*a;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function h(t){var e=Math.abs(t);return e>=s?Math.round(t/s)+"d":e>=o?Math.round(t/o)+"h":e>=i?Math.round(t/i)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}function l(t){var e=Math.abs(t);return e>=s?f(t,e,s,"day"):e>=o?f(t,e,o,"hour"):e>=i?f(t,e,i,"minute"):e>=n?f(t,e,n,"second"):t+" ms"}function f(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+" "+n+(i?"s":"")}t.exports=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return c(t);if("number"===r&&isFinite(t))return e.long?l(t):h(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},4520:function(t,e,r){r(26699),r(21703);const{Multiaddr:n}=r(19391),i=(t,e)=>e,o=(t,e,r,n)=>{if(n&&!1===n.assumeHttp)return`tcp://${t}:${e}`;let i="tcp",o=`:${e}`;const s=r[r.length-1];return"tcp"===s.protocol&&(i="443"===e?"https":"http",o="443"===e||"80"===e?"":o),`${i}://${t}${o}`},s={ip4:i,ip6:(t,e,r,n)=>1===n.length&&"ip6"===n[0].protocol?e:`[${e}]`,tcp:(t,e,r,n,i)=>n.some((t=>["http","https","ws","wss"].includes(t.protocol)))?`${t}:${e}`:o(t,e,n,i),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:i,dns4:i,dns6:i,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};t.exports=(t,e)=>{const r=new n(t),i=t.toString().split("/").slice(1);return r.tuples().map((t=>({protocol:i.shift(),content:t[1]?i.shift():null}))).reduce(((t,r,n,i)=>{const o=s[r.protocol];if(!o)throw new Error(`Unsupported protocol ${r.protocol}`);return o(t,r.content,n,i,e)}),"")}},93850:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const n=r(75340),i=r(70689),o=r(42611),{concat:s}=r(85489),{toString:a}=r(96523);function u(t){const e=[],r=t.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const o=r[n],s=i(o);if(0!==s.size){if(n++,n>=r.length)throw E("invalid address: "+t);if(s.path){e.push([o,_(r.slice(n).join("/"))]);break}e.push([o,r[n]])}else e.push([o])}return e}function c(t){const e=[];return t.map((t=>{const r=S(t);return e.push(r.name),t.length>1&&e.push(t[1]),null})),_(e.join("/"))}function h(t){return t.map((t=>{Array.isArray(t)||(t=[t]);const e=S(t);return t.length>1?[e.code,n.toBytes(e.code,t[1])]:[e.code]}))}function l(t){return t.map((t=>{const e=S(t);return t[1]?[e.code,n.toString(e.code,t[1])]:[e.code]}))}function f(t){return b(s(t.map((t=>{const e=S(t);let r=Uint8Array.from(o.encode(e.code));return t.length>1&&(r=s([r,t[1]])),r}))))}function d(t,e){if(t.size>0)return t.size/8;if(0===t.size)return 0;{const t=o.decode(e);return t+o.decode.bytes}}function p(t){const e=[];let r=0;while(r<t.length){const n=o.decode(t,r),s=o.decode.bytes,u=i(n),c=d(u,t.slice(r+s));if(0===c){e.push([n]),r+=s;continue}const h=t.slice(r+s,r+s+c);if(r+=c+s,r>t.length)throw E("Invalid address Uint8Array: "+a(t,"base16"));e.push([n,h])}return e}function y(t){const e=p(t),r=l(e);return c(r)}function g(t){t=_(t);const e=u(t),r=h(e);return f(r)}function m(t){return g(t)}function b(t){const e=w(t);if(e)throw e;return Uint8Array.from(t)}function w(t){try{p(t)}catch(e){return e}}function v(t){return void 0===w(t)}function _(t){return"/"+t.trim().split("/").filter((t=>t)).join("/")}function E(t){return new Error("Error parsing address: "+t)}function S(t){const e=i(t[0]);return e}t.exports={stringToStringTuples:u,stringTuplesToString:c,tuplesToStringTuples:l,stringTuplesToTuples:h,bytesToTuples:p,tuplesToBytes:f,bytesToString:y,stringToBytes:g,fromString:m,fromBytes:b,validateBytes:w,isValidBytes:v,cleanPath:_,ParseError:E,protoFromTuple:S,sizeForAddr:d}},75340:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const n=r(12196),i=r(70689),{CID:o}=r(59329),{base32:s}=r(12056),{base58btc:a}=r(78334),u=r(55226),c=r(42611),{toString:h}=r(96523),{fromString:l}=r(92259),{concat:f}=r(85489);function d(t,e){return e instanceof Uint8Array?d.toString(t,e):d.toBytes(t,e)}function p(t){if(!n.isIP(t))throw new Error("invalid ip address");return n.toBytes(t)}function y(t){const e=n.toString(t);if(!e||!n.isIP(e))throw new Error("invalid ip address");return e}function g(t){const e=new ArrayBuffer(2),r=new DataView(e);return r.setUint16(0,t),new Uint8Array(e)}function m(t){const e=new DataView(t.buffer);return e.getUint16(t.byteOffset)}function b(t){const e=l(t),r=Uint8Array.from(c.encode(e.length));return f([r,e],r.length+e.length)}function w(t){const e=c.decode(t);if(t=t.slice(c.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return h(t)}function v(t){let e;e="Q"===t[0]||"1"===t[0]?u.decode(a.decode(`z${t}`)).bytes:o.parse(t).multihash.bytes;const r=Uint8Array.from(c.encode(e.length));return f([r,e],r.length+e.length)}function _(t){const e=c.decode(t),r=t.slice(c.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return h(r,"base58btc")}function E(t){const e=t.split(":");if(2!==e.length)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(16!==e[0].length)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");const r=s.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=g(n);return f([r,i],r.length+i.length)}function S(t){const e=t.split(":");if(2!==e.length)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(56!==e[0].length)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");const r=s.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=g(n);return f([r,i],r.length+i.length)}function A(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=h(e,"base32"),i=m(r);return n+":"+i}t.exports=d,d.toString=function(t,e){const r=i(t);switch(r.code){case 4:case 41:return y(e);case 6:case 273:case 33:case 132:return m(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return w(e);case 421:return _(e);case 444:return A(e);case 445:return A(e);default:return h(e,"base16")}},d.toBytes=function(t,e){const r=i(t);switch(r.code){case 4:return p(e);case 41:return p(e);case 6:case 273:case 33:case 132:return g(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return b(e);case 421:return v(e);case 444:return E(e);case 445:return S(e);default:return l(e,"base16")}}},19391:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const n=r(93850),i=r(70689),o=r(42611),{CID:s}=r(59329),{base58btc:a}=r(78334),u=r(19998),c=Symbol.for("nodejs.util.inspect.custom"),{toString:h}=r(96523),{equals:l}=r(74141),f=new Map,d=Symbol.for("@multiformats/js-multiaddr/multiaddr");class p{constructor(t){if(null==t&&(t=""),Object.defineProperty(this,d,{value:!0}),t instanceof Uint8Array)this.bytes=n.fromBytes(t);else if("string"===typeof t){if(t.length>0&&"/"!==t.charAt(0))throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=n.fromString(t)}else{if(!p.isMultiaddr(t))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=n.fromBytes(t.bytes)}}toString(){return n.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const t={},e=this.toString().split("/");return t.family="ip4"===e[1]?4:6,t.host=e[2],t.transport=e[3],t.port=parseInt(e[4]),t}protos(){return this.protoCodes().map((t=>Object.assign({},i(t))))}protoCodes(){const t=[],e=this.bytes;let r=0;while(r<e.length){const s=o.decode(e,r),a=o.decode.bytes,u=i(s),c=n.sizeForAddr(u,e.slice(r+a));r+=c+a,t.push(s)}return t}protoNames(){return this.protos().map((t=>t.name))}tuples(){return n.bytesToTuples(this.bytes)}stringTuples(){const t=n.bytesToTuples(this.bytes);return n.tuplesToStringTuples(t)}encapsulate(t){return t=new p(t),new p(this.toString()+t.toString())}decapsulate(t){const e=t.toString(),r=this.toString(),n=r.lastIndexOf(e);if(n<0)throw new Error("Address "+this+" does not contain subaddress: "+t);return new p(r.slice(0,n))}decapsulateCode(t){const e=this.tuples();for(let r=e.length-1;r>=0;r--)if(e[r][0]===t)return new p(n.tuplesToBytes(e.slice(0,r)));return this}getPeerId(){try{const t=this.stringTuples().filter((t=>t[0]===i.names.ipfs.code)),e=t.pop();if(e&&e[1]){const t=e[1];return"Q"===t[0]||"1"===t[0]?h(a.decode(`z${t}`),"base58btc"):h(s.parse(t).multihash.bytes,"base58btc")}return null}catch(t){return null}}getPath(){let t=null;try{t=this.stringTuples().filter((t=>{const e=i(t[0]);return!!e.path}))[0][1],t||(t=null)}catch(e){t=null}return t}equals(t){return l(this.bytes,t.bytes)}async resolve(){const t=this.protos().find((t=>t.resolvable));if(!t)return[this];const e=f.get(t.name);if(!e)throw u(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const r=await e(this);return r.map((t=>new p(t)))}nodeAddress(){const t=this.protoCodes(),e=this.protoNames(),r=this.toString().split("/").slice(1);if(r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==t[0]&&41!==t[0]&&54!==t[0]&&55!==t[0])throw new Error(`no protocol with name: "'${e[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==r[2]&&"udp"!==r[2])throw new Error(`no protocol with name: "'${e[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===t[0]||55===t[0]?6:4,address:r[1],port:parseInt(r[3])}}isThinWaistAddress(t){const e=(t||this).protos();return 2===e.length&&((4===e[0].code||41===e[0].code)&&(6===e[1].code||273===e[1].code))}static fromNodeAddress(t,e){if(!t)throw new Error("requires node address object");if(!e)throw new Error("requires transport protocol");let r;switch(t.family){case 4:r="ip4";break;case 6:r="ip6";break;default:throw Error(`Invalid addr family. Got '${t.family}' instead of 4 or 6`)}return new p("/"+[r,t.address,e,t.port].join("/"))}static isName(t){return!!p.isMultiaddr(t)&&t.protos().some((t=>t.resolvable))}static isMultiaddr(t){return t instanceof p||Boolean(t&&t[d])}[c](){return"<Multiaddr "+h(this.bytes,"base16")+" - "+n.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+h(this.bytes,"base16")+" - "+n.bytesToString(this.bytes)+">"}}function y(t){return new p(t)}p.protocols=i,p.resolvers=f,t.exports={Multiaddr:p,multiaddr:y,protocols:i,resolvers:f}},12196:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const n=r(17676),{toString:i}=r(96523),o=n,s=n.v4,a=n.v6,u=function(t,e,r){let n;if(r=~~r,s(t))n=e||new Uint8Array(r+4),t.split(/\./g).map((function(t){n[r++]=255&parseInt(t,10)}));else if(a(t)){const o=t.split(":",8);let a;for(a=0;a<o.length;a++){const t=s(o[a]);let e;t&&(e=u(o[a]),o[a]=i(e.slice(0,2),"base16")),e&&++a<8&&o.splice(a,0,i(e.slice(2,4),"base16"))}if(""===o[0])while(o.length<8)o.unshift("0");else if(""===o[o.length-1])while(o.length<8)o.push("0");else if(o.length<8){for(a=0;a<o.length&&""!==o[a];a++);const t=[a,"1"];for(a=9-o.length;a>0;a--)t.push("0");o.splice.apply(o,t)}for(n=e||new Uint8Array(r+16),a=0;a<o.length;a++){const t=parseInt(o[a],16);n[r++]=t>>8&255,n[r++]=255&t}}if(!n)throw Error("Invalid ip address: "+t);return n},c=function(t,e,r){e=~~e,r=r||t.length-e;const n=[];let i;const o=new DataView(t.buffer);if(4===r){for(let i=0;i<r;i++)n.push(t[e+i]);i=n.join(".")}else if(16===r){for(let t=0;t<r;t+=2)n.push(o.getUint16(e+t).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};t.exports={isIP:o,isV4:s,isV6:a,toBytes:u,toString:c}},70689:function(t,e,r){"use strict";function n(t){if("number"===typeof t){if(n.codes[t])return n.codes[t];throw new Error("no protocol with code: "+t)}if("string"===typeof t){if(n.names[t])return n.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}r(21703);const i=-1;function o(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}n.lengthPrefixedVarSize=i,n.V=i,n.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,i,"ip6zone"],[53,i,"dns","resolvable"],[54,i,"dns4","resolvable"],[55,i,"dns6","resolvable"],[56,i,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,i,"unix",!1,"path"],[421,i,"ipfs"],[421,i,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,i,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,i,"memory"]],n.names={},n.codes={},n.table.map((t=>{const e=o.apply(null,t);return n.codes[e.code]=e,n.names[e.name]=e,null})),n.object=o,t.exports=n},58863:function(t,e,r){"use strict";const n=r(15859);t.exports=n},51180:function(t,e,r){"use strict";r(26699);const n=r(70689),{code:i}=n("dnsaddr");async function o(t){const e=r(58863),n=new e,o=t.getPeerId(),[,s]=t.stringTuples().find((([t])=>t===i))||[],a=await n.resolveTxt(`_dnsaddr.${s}`);let u=a.flat().map((t=>t.split("=")[1]));return o&&(u=u.filter((t=>t.includes(o)))),u}t.exports={dnsaddrResolver:o}},91654:function(t,e,r){"use strict";r(21703);const{encodeText:n}=r(27222);class i{constructor(t,e,r,i){this.name=t,this.code=e,this.codeBuf=n(this.code),this.alphabet=i,this.codec=r(i)}encode(t){return this.codec.encode(t)}decode(t){for(const e of t)if(this.alphabet&&this.alphabet.indexOf(e)<0)throw new Error(`invalid character '${e}' in '${t}'`);return this.codec.decode(t)}}t.exports=i},21985:function(t,e,r){"use strict";const n=r(32600),i=r(91654),{rfc4648:o}=r(33592),{decodeText:s,encodeText:a}=r(27222),u=()=>({encode:s,decode:a}),c=[["identity","\0",u,""],["base2","0",o(1),"01"],["base8","7",o(3),"01234567"],["base10","9",n,"0123456789"],["base16","f",o(4),"0123456789abcdef"],["base16upper","F",o(4),"0123456789ABCDEF"],["base32hex","v",o(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",o(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",o(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",o(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",o(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",o(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",o(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",o(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",o(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",n,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",n,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",n,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",n,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",o(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",o(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",o(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",o(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],h=c.reduce(((t,e)=>(t[e[0]]=new i(e[0],e[1],e[2],e[3]),t)),{}),l=c.reduce(((t,e)=>(t[e[1]]=h[e[0]],t)),{});t.exports={names:h,codes:l}},64869:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118),r(26699);const n=r(21985),{encodeText:i,decodeText:o,concat:s}=r(27222);function a(t,e){if(!e)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:n}=f(t);return l(r,e),s([n,e],n.length+e.length)}function u(t,e){const r=f(t),n=i(r.encode(e));return s([r.codeBuf,n],r.codeBuf.length+n.length)}function c(t){t instanceof Uint8Array&&(t=o(t));const e=t[0];["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase());const r=f(t[0]);return r.decode(t.substring(1))}function h(t){if(t instanceof Uint8Array&&(t=o(t)),"[object String]"!==Object.prototype.toString.call(t))return!1;try{const e=f(t[0]);return e.name}catch(e){return!1}}function l(t,e){const r=f(t);r.decode(o(e))}function f(t){if(Object.prototype.hasOwnProperty.call(n.names,t))return n.names[t];if(Object.prototype.hasOwnProperty.call(n.codes,t))return n.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function d(t){return t instanceof Uint8Array&&(t=o(t)),f(t[0])}e=t.exports=a,e.encode=u,e.decode=c,e.isEncoded=h,e.encoding=f,e.encodingFromData=d;const p=Object.freeze(n.names),y=Object.freeze(n.codes);e.names=p,e.codes=y},33592:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const n=(t,e,r)=>{const n={};for(let c=0;c<e.length;++c)n[e[c]]=c;let i=t.length;while("="===t[i-1])--i;const o=new Uint8Array(i*r/8|0);let s=0,a=0,u=0;for(let c=0;c<i;++c){const e=n[t[c]];if(void 0===e)throw new SyntaxError("Invalid character "+t[c]);a=a<<r|e,s+=r,s>=8&&(s-=8,o[u++]=255&a>>s)}if(s>=r||255&a<<8-s)throw new SyntaxError("Unexpected end of data");return o},i=(t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let u=0;u<t.length;++u){a=a<<8|t[u],s+=8;while(s>r)s-=r,o+=e[i&a>>s]}if(s&&(o+=e[i&a<<r-s]),n)while(o.length*r&7)o+="=";return o},o=t=>e=>({encode(r){return i(r,e,t)},decode(r){return n(r,e,t)}});t.exports={rfc4648:o}},27222:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);const n=new TextDecoder,i=t=>n.decode(t),o=new TextEncoder,s=t=>o.encode(t);function a(t,e){const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}t.exports={decodeText:i,encodeText:s,concat:a}},48447:function(t,e,r){r(21703),t.exports=o;var n=128,i=127;function o(t,e){var r,s=0,a=(e=e||0,0),u=e,c=t.length;do{if(u>=c)throw o.bytes=0,new RangeError("Could not decode varint");r=t[u++],s+=a<28?(r&i)<<a:(r&i)*Math.pow(2,a),a+=7}while(r>=n);return o.bytes=u-e,s}},85580:function(t){t.exports=o;var e=128,r=127,n=~r,i=Math.pow(2,31);function o(t,r,s){r=r||[],s=s||0;var a=s;while(t>=i)r[s++]=255&t|e,t/=128;while(t&n)r[s++]=255&t|e,t>>>=7;return r[s]=0|t,o.bytes=s-a+1,r}},62119:function(t,e,r){t.exports={encode:r(85580),decode:r(48447),encodingLength:r(46319)}},46319:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),o=Math.pow(2,35),s=Math.pow(2,42),a=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<o?5:t<s?6:t<a?7:t<u?8:t<c?9:10}},46742:function(t){"use strict";const e=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});t.exports={names:e}},21272:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const n=r(64869),i=r(62119),{names:o}=r(46742),{toString:s}=r(96523),{fromString:a}=r(92259),{concat:u}=r(85489),c={};for(const _ in o){const t=_;c[o[t]]=t}function h(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return s(t,"base16")}function l(t){return a(t,"base16")}function f(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return s(n.encode("base58btc",t)).slice(1)}function d(t){const e=t instanceof Uint8Array?s(t):t;return n.decode("z"+e)}function p(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");const e=i.decode(t);if(!b(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(i.decode.bytes);const r=i.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(i.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${s(t,"base16")}`);return{code:e,name:c[e],length:r,digest:t}}function y(t,e,r){if(!t||void 0===e)throw new Error("multihash encode requires at least two args: digest, code");const n=g(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==r&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");const o=i.encode(n),s=i.encode(r);return u([o,s,t],o.length+s.length+t.length)}function g(t){let e=t;if("string"===typeof t){if(void 0===o[t])throw new Error(`Unrecognized hash function named: ${t}`);e=o[t]}if("number"!==typeof e)throw new Error(`Hash function code should be a number. Got: ${e}`);if(void 0===c[e]&&!m(e))throw new Error(`Unrecognized function code: ${e}`);return e}function m(t){return t>0&&t<16}function b(t){return!!m(t)||!!c[t]}function w(t){p(t)}function v(t){return w(t),t.subarray(0,2)}Object.freeze(c),t.exports={names:o,codes:c,toHexString:h,fromHexString:l,toB58String:f,fromB58String:d,decode:p,encode:y,coerceCode:g,isAppCode:m,validate:w,prefix:v,isValidCode:b}},32793:function(t,e,r){"use strict";r(21703);const{Buffer:n}=r(58766),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let r=0;r<this._bufs.length;r++){const n=e+this._bufs[r].length;if(t<n||r===this._bufs.length-1)return[r,t-e];e=n}},o.prototype._reverseOffset=function(t){const e=t[0];let r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return t||n.alloc(0);if(i<=0)return t||n.alloc(0);const o=!!t,s=this._offset(r),a=i-r;let u=a,c=o&&e||0,h=s[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(u<=this._bufs[s[0]].length-h)return o?this._bufs[s[0]].copy(t,e,h,h+u):this._bufs[s[0]].slice(h,h+u);o||(t=n.allocUnsafe(a));for(let n=s[0];n<this._bufs.length;n++){const e=this._bufs[n].length-h;if(!(u>e)){this._bufs[n].copy(t,c,h,h+u),c+=e;break}this._bufs[n].copy(t,c,h),c+=e,u-=e,h&&(h=0)}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const r=this._offset(t),n=this._offset(e),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(n.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,r){if(void 0===r&&"string"===typeof e&&(r=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=n.from([t]):"string"===typeof t?t=n.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const r=e.length-s;if(r>=t.length){const r=e.indexOf(t,s);if(-1!==r)return this._reverseOffset([o,r]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,r){return this.slice(t,t+r)[e](0,r)}:o.prototype[e]=function(r=0){return this.slice(r,r+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},58766:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},81182:function(t,e){"use strict";e.PROTOCOL_ID="/multistream/1.0.0"},34442:function(t,e,r){"use strict";r(26699);const n=r(15652),i=r(32793),o=r(91039),s=r(737),{PROTOCOL_ID:a}=r(81182),u=Object.assign(n("mss:handle"),{error:n("mss:handle:error")});t.exports=async function(t,e,r){e=Array.isArray(e)?e:[e];const{writer:n,reader:c,rest:h,stream:l}=s(t);while(1){const t=(await o.read(c,r)).toString();if(u('read "%s"',t),t!==a){if(e.includes(t))return o.write(n,t),u('respond with "%s" for "%s"',t,t),h(),{stream:l,protocol:t};"ls"!==t?(o.write(n,"na"),u('respond with "na" for "%s"',t)):(o.write(n,new i(e.map((t=>o.encode(t))))),u('respond with "%s" for %s',e,t))}else u('respond with "%s" for "%s"',a,t),o.write(n,a)}}},73434:function(t,e,r){"use strict";const n=r(31307),i=r(34442),o=r(71129),{PROTOCOL_ID:s}=r(81182);e.PROTOCOL_ID=s;class a{constructor(t){this._stream=t,this._shaken=!1}async _handshake(t){if(this._shaken)return;const{stream:e}=await n(this._stream,s,void 0,t);this._stream=e,this._shaken=!0}}class u extends a{select(t,e){return n(this._stream,t,this._shaken?void 0:s,e)}async ls(t){await this._handshake(t);const e=await o(this._stream,t),{stream:r,protocols:n}=e;return this._stream=r,n}}e.Dialer=u;class c extends a{handle(t,e){return i(this._stream,t,e)}}e.Listener=c},71129:function(t,e,r){"use strict";const n=r(66983),i=r(15652),o=r(91039),s=r(737),a=r(92992),{pipe:u}=r(62100),c=Object.assign(i("mss:ls"),{error:i("mss:ls:error")});t.exports=async function(t,e){const{reader:r,writer:i,rest:h,stream:l}=s(t);c('write "ls"'),o.write(i,"ls"),h();const f=await o.read(r,e),d=n([f]),p=[];await u(d,a.decode(),(async t=>{for await(const e of t)p.push(e.shallowSlice(0,-1).toString())}));const y={stream:l,protocols:p};return y}},91039:function(t,e,r){"use strict";r(21703);const n=r(32793),i=r(92992),{pipe:o}=r(62100),s=r(19998),{fromString:a}=r(92259),u=r(74461),{source:c}=r(87602),h=a("\n");function l(t){return i.encode.single(new n([t,h]))}function f(t,e){t.push(l(e))}async function d(t,e){t.push(e.reduce(((t,e)=>t.append(l(e))),new n))}async function p(t,e){let r=1;const n={[Symbol.asyncIterator](){return this},next:()=>t.next(r)};let a=n;e&&e.signal&&(a=c(n,e.signal));const l=t=>{r=t},f=await o(a,i.decode({onLength:l}),u);if(f.get(f.length-1)!==h[0])throw s(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return f.shallowSlice(0,-1)}t.exports={encode:l,write:f,writeAll:d,read:p}},31307:function(t,e,r){"use strict";r(21703);const n=r(15652),i=r(19998),o=r(91039),s=r(737),a=Object.assign(n("mss:select"),{error:n("mss:select:error")});t.exports=async function(t,e,r,n){e=Array.isArray(e)?[...e]:[e];const{reader:u,writer:c,rest:h,stream:l}=s(t),f=e.shift();if(!f)throw new Error("At least one protocol must be specified");r?(a('select: write ["%s", "%s"]',r,f),o.writeAll(c,[r,f])):(a('select: write "%s"',f),o.write(c,f));let d=(await o.read(u,n)).toString();if(a('select: read "%s"',d),d===r&&(d=(await o.read(u,n)).toString(),a('select: read "%s"',d)),d===f)return h(),{stream:l,protocol:f};for(const i of e){a('select: write "%s"',i),o.write(c,i);const t=(await o.read(u,n)).toString();if(a('select: read "%s" for "%s"',t,i),t===i)return h(),{stream:l,protocol:i}}throw h(),i(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}},98295:function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}r(21703),t.exports=function(t){var e=void 0,r=void 0;function i(t){if(!(t instanceof Object))throw new Error('Target "'+t+'" is not an object');r=t}function o(t){Object.keys(t).forEach((function(e){var r=t[e];if("function"!==typeof r)throw new Error('Trap "'+e+": "+r+'" is not a function');if(!Reflect[e])throw new Error('Trap "'+e+": "+r+'" is not a valid trap')})),e=t}i((function(){})),t&&i(t),o(Reflect);var s=new Proxy({},{get:function(t,i){return function(){for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];return e[i].apply(null,[r].concat(n(o.slice(1))))}}});return{setTarget:i,setHandler:o,getTarget:function(){return r},getHandler:function(){return e},proxy:new Proxy(r,s)}}},67966:function(t,e,r){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?t.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:t.exports={default:r(10333)["default"],Headers:r(10333).Headers,Request:r(10333).Request,Response:r(10333).Response}},98:function(t,e,r){r(21703),function(){var t,r,n,i,o,s,a,u;u=function(t){var e,r,n,i;return e=(t&255<<24)>>>24,r=(t&255<<16)>>>16,n=(65280&t)>>>8,i=255&t,[e,r,n,i].join(".")},a=function(t){var e,n,i,o,s,a;for(e=[],i=o=0;o<=3;i=++o){if(0===t.length)break;if(i>0){if("."!==t[0])throw new Error("Invalid IP");t=t.substring(1)}a=r(t),s=a[0],n=a[1],t=t.substring(n),e.push(s)}if(0!==t.length)throw new Error("Invalid IP");switch(e.length){case 1:if(e[0]>4294967295)throw new Error("Invalid IP");return e[0]>>>0;case 2:if(e[0]>255||e[1]>16777215)throw new Error("Invalid IP");return(e[0]<<24|e[1])>>>0;case 3:if(e[0]>255||e[1]>255||e[2]>65535)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2])>>>0;case 4:if(e[0]>255||e[1]>255||e[2]>255||e[3]>255)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0;default:throw new Error("Invalid IP")}},n=function(t){return t.charCodeAt(0)},i=n("0"),s=n("a"),o=n("A"),r=function(t){var e,r,a,u,c;u=0,e=10,r="9",a=0,t.length>1&&"0"===t[a]&&("x"===t[a+1]||"X"===t[a+1]?(a+=2,e=16):"0"<=t[a+1]&&t[a+1]<="9"&&(a++,e=8,r="7")),c=a;while(a<t.length){if("0"<=t[a]&&t[a]<=r)u=u*e+(n(t[a])-i)>>>0;else{if(16!==e)break;if("a"<=t[a]&&t[a]<="f")u=u*e+(10+n(t[a])-s)>>>0;else{if(!("A"<=t[a]&&t[a]<="F"))break;u=u*e+(10+n(t[a])-o)>>>0}}if(u>4294967295)throw new Error("too large");a++}if(a===c)throw new Error("empty octet");return[u,a]},t=function(){function t(t,e){var r,n,i;if("string"!==typeof t)throw new Error("Missing `net' parameter");if(e||(i=t.split("/",2),t=i[0],e=i[1]),e||(e=32),"string"===typeof e&&e.indexOf(".")>-1){try{this.maskLong=a(e)}catch(o){throw o,new Error("Invalid mask: "+e)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!e&&0!==e)throw new Error("Invalid mask: empty");this.bitmask=parseInt(e,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(t)&this.maskLong)>>>0}catch(o){throw o,new Error("Invalid net address: "+t)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+e);this.size=Math.pow(2,32-this.bitmask),this.base=u(this.netLong),this.mask=u(this.maskLong),this.hostmask=u(~this.maskLong),this.first=this.bitmask<=30?u(this.netLong+1):this.base,this.last=this.bitmask<=30?u(this.netLong+this.size-2):u(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?u(this.netLong+this.size-1):void 0}return t.prototype.contains=function(e){return"string"===typeof e&&(e.indexOf("/")>0||4!==e.split(".").length)&&(e=new t(e)),e instanceof t?this.contains(e.base)&&this.contains(e.broadcast||e.last):(a(e)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},t.prototype.next=function(e){return null==e&&(e=1),new t(u(this.netLong+this.size*e),this.mask)},t.prototype.forEach=function(t){var e,r,n;n=a(this.first),r=a(this.last),e=0;while(n<=r)t(u(n),n,e),e++,n++},t.prototype.toString=function(){return this.base+"/"+this.bitmask},t}(),e.ip2long=a,e.long2ip=u,e.Netmask=t}.call(this)},10333:function(t,e,r){"use strict";r(21703);var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof i)return i;throw new Error("unable to locate global object")},i=n();t.exports=e=i.fetch,i.fetch&&(e["default"]=i.fetch.bind(i)),e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response},90022:function(t,e,r){r(21703);var n=r(15736);function i(t,e){var r=function(){return new n.aes.Algorithm(t,e)};n.cipher.registerAlgorithm(t,r)}r(30298),r(92009),r(64292),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var i=y({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i},n.aes.createEncryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var i=y({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i},n.aes.createDecryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){h||f();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return p(r._w,t,e,!1)},decrypt:function(t,e){return p(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var i=0;i<e.length;++i)r.putByte(e[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var o=e.length();if(16===o||24===o||32===o){o>>>=2;for(i=0;i<o;++i)r.push(e.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=d(r,t.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(t,e){return h||f(),d(t,e)},n.aes._updateBlock=p,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var o,s,a,u,c,h=!1,l=4;function f(){h=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;o=new Array(256),s=new Array(256),u=new Array(4),c=new Array(4);for(e=0;e<4;++e)u[e]=new Array(256),c[e]=new Array(256);var r,n,i,l,f,d,p,y=0,g=0;for(e=0;e<256;++e){l=g^g<<1^g<<2^g<<3^g<<4,l=l>>8^255&l^99,o[y]=l,s[l]=y,f=t[l],r=t[y],n=t[r],i=t[n],d=f<<24^l<<16^l<<8^l^f,p=(r^n^i)<<24^(y^i)<<16^(y^n^i)<<8^y^r^i;for(var m=0;m<4;++m)u[m][y]=d,c[m][l]=p,d=d<<24|d>>>8,p=p<<24|p>>>8;0===y?y=g=1:(y=r^t[t[t[r^i]]],g^=t[t[g]])}}function d(t,e){for(var r,n=t.slice(0),i=1,s=n.length,u=s+6+1,h=l*u,f=s;f<h;++f)r=n[f-1],f%s===0?(r=o[r>>>16&255]<<24^o[r>>>8&255]<<16^o[255&r]<<8^o[r>>>24]^a[i]<<24,i++):s>6&&f%s===4&&(r=o[r>>>24]<<24^o[r>>>16&255]<<16^o[r>>>8&255]<<8^o[255&r]),n[f]=n[f-s]^r;if(e){var d,p=c[0],y=c[1],g=c[2],m=c[3],b=n.slice(0);h=n.length;f=0;for(var w=h-l;f<h;f+=l,w-=l)if(0===f||f===h-l)b[f]=n[w],b[f+1]=n[w+3],b[f+2]=n[w+2],b[f+3]=n[w+1];else for(var v=0;v<l;++v)d=n[w+v],b[f+(3&-v)]=p[o[d>>>24]]^y[o[d>>>16&255]]^g[o[d>>>8&255]]^m[o[255&d]];n=b}return n}function p(t,e,r,n){var i,a,h,l,f,d,p,y,g,m,b,w,v=t.length/4-1;n?(i=c[0],a=c[1],h=c[2],l=c[3],f=s):(i=u[0],a=u[1],h=u[2],l=u[3],f=o),d=e[0]^t[0],p=e[n?3:1]^t[1],y=e[2]^t[2],g=e[n?1:3]^t[3];for(var _=3,E=1;E<v;++E)m=i[d>>>24]^a[p>>>16&255]^h[y>>>8&255]^l[255&g]^t[++_],b=i[p>>>24]^a[y>>>16&255]^h[g>>>8&255]^l[255&d]^t[++_],w=i[y>>>24]^a[g>>>16&255]^h[d>>>8&255]^l[255&p]^t[++_],g=i[g>>>24]^a[d>>>16&255]^h[p>>>8&255]^l[255&y]^t[++_],d=m,p=b,y=w;r[0]=f[d>>>24]<<24^f[p>>>16&255]<<16^f[y>>>8&255]<<8^f[255&g]^t[++_],r[n?3:1]=f[p>>>24]<<24^f[y>>>16&255]<<16^f[g>>>8&255]<<8^f[255&d]^t[++_],r[2]=f[y>>>24]<<24^f[g>>>16&255]<<16^f[d>>>8&255]<<8^f[255&p]^t[++_],r[n?1:3]=f[g>>>24]<<24^f[d>>>16&255]<<16^f[p>>>8&255]<<8^f[255&y]^t[++_]}function y(t){t=t||{};var e,r=(t.mode||"CBC").toUpperCase(),i="AES-"+r;e=t.decrypt?n.cipher.createDecipher(i,t.key):n.cipher.createCipher(i,t.key);var o=e.start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=t,o.call(e,r)},e}},21041:function(t,e,r){r(21703);var n=r(15736);r(64292),r(99002);var i=t.exports=n.asn1=n.asn1||{};function o(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(t,e,r,o,s){if(n.util.isArray(o)){for(var a=[],u=0;u<o.length;++u)void 0!==o[u]&&a.push(o[u]);o=a}var c={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(o),value:o};return s&&"bitStringContents"in s&&(c.bitStringContents=s.bitStringContents,c.original=i.copy(c)),c},i.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var o=0;o<t.length;++o)r.push(i.copy(t[o],e));return r}return"string"===typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:i.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},i.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var o=0;o<t.length;++o)if(!i.equals(t[o],e[o]))return!1;return!0}if(typeof t!==typeof e)return!1;if("string"===typeof t)return t===e;var s=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&i.equals(t.value,e.value);return r&&r.includeBitStringContents&&(s=s&&t.bitStringContents===e.bitStringContents),s},i.getBerValueLength=function(t){var e=t.getByte();if(128!==e){var r,n=128&e;return r=n?t.getInt((127&e)<<3):e,r}};var s=function(t,e){var r=t.getByte();if(e--,128!==r){var n,i=128&r;if(i){var s=127&r;o(t,e,s),n=t.getInt(s<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}};function a(t,e,r,n){var u;o(t,e,2);var c=t.getByte();e--;var h=192&c,l=31&c;u=t.length();var f,d,p=s(t,e);if(e-=u-t.length(),void 0!==p&&p>e){if(n.strict){var y=new Error("Too few bytes to read ASN.1 value.");throw y.available=t.length(),y.remaining=e,y.requested=p,y}p=e}var g=32===(32&c);if(g)if(f=[],void 0===p)for(;;){if(o(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}u=t.length(),f.push(a(t,e,r+1,n)),e-=u-t.length()}else while(p>0)u=t.length(),f.push(a(t,p,r+1,n)),e-=u-t.length(),p-=u-t.length();if(void 0===f&&h===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&(d=t.bytes(p)),void 0===f&&n.decodeBitStrings&&h===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&p>1){var m=t.read,b=e,w=0;if(l===i.Type.BITSTRING&&(o(t,e,1),w=t.getByte(),e--),0===w)try{u=t.length();var v={strict:!0,decodeBitStrings:!0},_=a(t,e,r+1,v),E=u-t.length();e-=E,l==i.Type.BITSTRING&&E++;var S=_.tagClass;E!==p||S!==i.Class.UNIVERSAL&&S!==i.Class.CONTEXT_SPECIFIC||(f=[_])}catch(I){}void 0===f&&(t.read=m,e=b)}if(void 0===f){if(void 0===p){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=e}if(l===i.Type.BMPSTRING)for(f="";p>0;p-=2)o(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(p),e-=p}var A=void 0===d?null:{bitStringContents:d};return i.create(h,l,g,f,A)}i.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"===typeof t&&(t=n.util.createBuffer(t));var r=t.length(),i=a(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=r,o.remaining=t.length(),o}return i},i.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,o=n.util.createBuffer(),s=!1;if("bitStringContents"in t&&(s=!0,t.original&&(s=i.equals(t,t.original))),s)o.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:o.putByte(0);for(var a=0;a<t.value.length;++a)void 0!==t.value[a]&&o.putBuffer(i.toDer(t.value[a]))}else if(t.type===i.Type.BMPSTRING)for(a=0;a<t.value.length;++a)o.putInt16(t.value.charCodeAt(a));else t.type===i.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0===(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128===(128&t.value.charCodeAt(1)))?o.putBytes(t.value.substr(1)):o.putBytes(t.value);if(e.putByte(r),o.length()<=127)e.putByte(127&o.length());else{var u=o.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);e.putByte(128|c.length);for(a=c.length-1;a>=0;--a)e.putByte(c.charCodeAt(a))}return e.putBuffer(o),e},i.oidToDer=function(t){var e,r,i,o,s=t.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var u=2;u<s.length;++u){e=!0,r=[],i=parseInt(s[u],10);do{o=127&i,i>>>=7,e||(o|=128),r.push(o),e=!1}while(i>0);for(var c=r.length-1;c>=0;--c)a.putByte(r[c])}return a},i.derToOid=function(t){var e;"string"===typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;var i=0;while(t.length()>0)r=t.getByte(),i<<=7,128&r?i+=127&r:(e+="."+(i+r),i=0);return e},i.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var u=t.charAt(10),c=10;"+"!==u&&"-"!==u&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),c&&(u=t.charAt(c),"+"===u||"-"===u)){var h=parseInt(t.substr(c+1,2),10),l=parseInt(t.substr(c+4,2),10),f=60*h+l;f*=6e4,"+"===u?e.setTime(+e-f):e.setTime(+e+f)}return e},i.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),u=0,c=0,h=!1;"Z"===t.charAt(t.length-1)&&(h=!0);var l=t.length-5,f=t.charAt(l);if("+"===f||"-"===f){var d=parseInt(t.substr(l+1,2),10),p=parseInt(t.substr(l+4,2),10);c=60*d+p,c*=6e4,"+"===f&&(c*=-1),h=!0}return"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),h?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,u),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(o,s,a,u)),e},i.dateToUtcTime=function(t){if("string"===typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e},i.dateToGeneralizedTime=function(t){if("string"===typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e},i.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},i.derToInteger=function(t){"string"===typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},i.validate=function(t,e,r,o){var s=!1;if(t.tagClass!==e.tagClass&&"undefined"!==typeof e.tagClass||t.type!==e.type&&"undefined"!==typeof e.type)o&&(t.tagClass!==e.tagClass&&o.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&o.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||"undefined"===typeof e.constructed){if(s=!0,e.value&&n.util.isArray(e.value))for(var a=0,u=0;s&&u<e.value.length;++u)s=e.value[u].optional||!1,t.value[a]&&(s=i.validate(t.value[a],e.value[u],r,o),s?++a:e.value[u].optional&&(s=!0)),!s&&o&&o.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(s&&r)if(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(0!==c)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else o&&o.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return s};var u=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(t,e,r){var o="";e=e||0,r=r||2,e>0&&(o+="\n");for(var s="",a=0;a<e*r;++a)s+=" ";switch(o+=s+"Tag: ",t.tagClass){case i.Class.UNIVERSAL:o+="Universal:";break;case i.Class.APPLICATION:o+="Application:";break;case i.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case i.Class.PRIVATE:o+="Private:";break}if(t.tagClass===i.Class.UNIVERSAL)switch(o+=t.type,t.type){case i.Type.NONE:o+=" (None)";break;case i.Type.BOOLEAN:o+=" (Boolean)";break;case i.Type.INTEGER:o+=" (Integer)";break;case i.Type.BITSTRING:o+=" (Bit string)";break;case i.Type.OCTETSTRING:o+=" (Octet string)";break;case i.Type.NULL:o+=" (Null)";break;case i.Type.OID:o+=" (Object Identifier)";break;case i.Type.ODESC:o+=" (Object Descriptor)";break;case i.Type.EXTERNAL:o+=" (External or Instance of)";break;case i.Type.REAL:o+=" (Real)";break;case i.Type.ENUMERATED:o+=" (Enumerated)";break;case i.Type.EMBEDDED:o+=" (Embedded PDV)";break;case i.Type.UTF8:o+=" (UTF8)";break;case i.Type.ROID:o+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:o+=" (Sequence)";break;case i.Type.SET:o+=" (Set)";break;case i.Type.PRINTABLESTRING:o+=" (Printable String)";break;case i.Type.IA5String:o+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:o+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case i.Type.BMPSTRING:o+=" (BMP String)";break}else o+=t.type;if(o+="\n",o+=s+"Constructed: "+t.constructed+"\n",t.composed){var c=0,h="";for(a=0;a<t.value.length;++a)void 0!==t.value[a]&&(c+=1,h+=i.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(h+=","));o+=s+"Sub values: "+c+h}else{if(o+=s+"Value: ",t.type===i.Type.OID){var l=i.derToOid(t.value);o+=l,n.pki&&n.pki.oids&&l in n.pki.oids&&(o+=" ("+n.pki.oids[l]+") ")}if(t.type===i.Type.INTEGER)try{o+=i.derToInteger(t.value)}catch(d){o+="0x"+n.util.bytesToHex(t.value)}else if(t.type===i.Type.BITSTRING){if(t.value.length>1?o+="0x"+n.util.bytesToHex(t.value.slice(1)):o+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);1==f?o+=" (1 unused bit shown)":f>1&&(o+=" ("+f+" unused bits shown)")}}else if(t.type===i.Type.OCTETSTRING)u.test(t.value)||(o+="("+t.value+") "),o+="0x"+n.util.bytesToHex(t.value);else if(t.type===i.Type.UTF8)try{o+=n.util.decodeUtf8(t.value)}catch(p){if("URI malformed"!==p.message)throw p;o+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===i.Type.PRINTABLESTRING||t.type===i.Type.IA5String?o+=t.value:u.test(t.value)?o+="0x"+n.util.bytesToHex(t.value):0===t.value.length?o+="[null]":o+=t.value}return o}},63220:function(t,e,r){var n=r(13374)["Buffer"];r(21703),r(48675),r(3462),r(37380),r(1118),r(52262),r(24506);var i={};t.exports=i;var o={};function s(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;while(a>0)o.push(a%n),a=a/n|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=i;for(r=o.length-1;r>=0;--r)u+=e[o[r]];return u}i.encode=function(t,e,r){if("string"!==typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var i=0,o=e.length,a=e.charAt(0),u=[0];for(i=0;i<t.length;++i){for(var c=0,h=t[i];c<u.length;++c)h+=u[c]<<8,u[c]=h%o,h=h/o|0;while(h>0)u.push(h%o),h=h/o|0}for(i=0;0===t[i]&&i<t.length-1;++i)n+=a;for(i=u.length-1;i>=0;--i)n+=e[u[i]]}else n=s(t,e);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},i.decode=function(t,e){if("string"!==typeof t)throw new TypeError('"input" must be a string.');if("string"!==typeof e)throw new TypeError('"alphabet" must be a string.');var r=o[e];if(!r){r=o[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");var s=e.length,a=e.charAt(0),u=[0];for(i=0;i<t.length;i++){var c=r[t.charCodeAt(i)];if(void 0===c)return;for(var h=0,l=c;h<u.length;++h)l+=u[h]*s,u[h]=255&l,l>>=8;while(l>0)u.push(255&l),l>>=8}for(var f=0;t[f]===a&&f<t.length-1;++f)u.push(0);return"undefined"!==typeof n?n.from(u.reverse()):new Uint8Array(u.reverse())}},30298:function(t,e,r){r(21703);var n=r(15736);r(64292),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in n.cipher.algorithms?n.cipher.algorithms[t]:null};var i=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};i.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},i.prototype.update=function(t){t&&this._input.putBuffer(t);while(!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish);this._input.compact()},i.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},92009:function(t,e,r){r(52262),r(24506),r(21703);var n=r(15736);r(64292),n.cipher=n.cipher||{};var i=t.exports=n.cipher.modes=n.cipher.modes||{};function o(t,e){if("string"===typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var o=[],s=e/4;for(i=0;i<s;++i)o.push(t.getInt32());t=o}return t}function s(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{this._j0=[0,0,0,0];while(r.length()>0)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=a(8*e.length());var o=e.length()%this.blockSize;o&&e.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];while(e.length()>0)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},i.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>4*(7-r%8)&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e},i.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],u=s/n|0,c=(n-1-s%n)*e;a[u]=1<<e-1<<c,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o},i.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);var o=n>>>1;while(o>0)this.pow(i[2*o],i[o]=[]),o>>=1;o=2;while(o<n){for(var s=1;s<o;++s){var a=i[o],u=i[s];i[o+s]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var c=i[o^n];i[o]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i}},68577:function(t,e,r){r(21703);var n=r(15736);function i(t,e){var r=function(){return new n.des.Algorithm(t,e)};n.cipher.registerAlgorithm(t,r)}r(30298),r(92009),r(64292),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var i=y({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createEncryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var i=y({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createDecryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return p(r._keys,t,e,!1)},decrypt:function(t,e){return p(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=d(e),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var o=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],h=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],l=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function d(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],h=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=t.length()>8?3:1,m=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,v=0;v<g;v++){var _=t.getInt32(),E=t.getInt32();e=252645135&(_>>>4^E),E^=e,_^=e<<4,e=65535&(E>>>-16^_),_^=e,E^=e<<-16,e=858993459&(_>>>2^E),E^=e,_^=e<<2,e=65535&(E>>>-16^_),_^=e,E^=e<<-16,e=1431655765&(_>>>1^E),E^=e,_^=e<<1,e=16711935&(E>>>8^_),_^=e,E^=e<<8,e=1431655765&(_>>>1^E),E^=e,_^=e<<1,e=_<<8|E>>>20&240,_=E<<24|E<<8&16711680|E>>>8&65280|E>>>24&240,E=e;for(var S=0;S<b.length;++S){b[S]?(_=_<<2|_>>>26,E=E<<2|E>>>26):(_=_<<1|_>>>27,E=E<<1|E>>>27),_&=-15,E&=-15;var A=r[_>>>28]|n[_>>>24&15]|i[_>>>20&15]|o[_>>>16&15]|s[_>>>12&15]|a[_>>>8&15]|u[_>>>4&15],I=c[E>>>28]|h[E>>>24&15]|l[E>>>20&15]|f[E>>>16&15]|d[E>>>12&15]|p[E>>>8&15]|y[E>>>4&15];e=65535&(I>>>16^A),m[w++]=A^e,m[w++]=I^e<<16}}return m}function p(t,e,r,n){var i,d,p=32===t.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var y=e[0],g=e[1];d=252645135&(y>>>4^g),g^=d,y^=d<<4,d=65535&(y>>>16^g),g^=d,y^=d<<16,d=858993459&(g>>>2^y),y^=d,g^=d<<2,d=16711935&(g>>>8^y),y^=d,g^=d<<8,d=1431655765&(y>>>1^g),g^=d,y^=d<<1,y=y<<1|y>>>31,g=g<<1|g>>>31;for(var m=0;m<p;m+=3){for(var b=i[m+1],w=i[m+2],v=i[m];v!=b;v+=w){var _=g^t[v],E=(g>>>4|g<<28)^t[v+1];d=y,y=g,g=d^(s[_>>>24&63]|u[_>>>16&63]|h[_>>>8&63]|f[63&_]|o[E>>>24&63]|a[E>>>16&63]|c[E>>>8&63]|l[63&E])}d=y,y=g,g=d}y=y>>>1|y<<31,g=g>>>1|g<<31,d=1431655765&(y>>>1^g),g^=d,y^=d<<1,d=16711935&(g>>>8^y),y^=d,g^=d<<8,d=858993459&(g>>>2^y),y^=d,g^=d<<2,d=65535&(y>>>16^g),g^=d,y^=d<<16,d=252645135&(y>>>4^g),g^=d,y^=d<<4,r[0]=y,r[1]=g}function y(t){t=t||{};var e,r=(t.mode||"CBC").toUpperCase(),i="DES-"+r;e=t.decrypt?n.cipher.createDecipher(i,t.key):n.cipher.createCipher(i,t.key);var o=e.start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=t,o.call(e,r)},e}},15736:function(t){t.exports={options:{usePureJavaScript:!1}}},54881:function(t,e,r){r(21703),r(52262),r(24506);var n=r(15736);r(14038),r(64292);var i=t.exports=n.hmac=n.hmac||{};i.create=function(){var t=null,e=null,r=null,i=null,o={start:function(o,s){if(null!==o)if("string"===typeof o){if(o=o.toLowerCase(),!(o in n.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');e=n.md.algorithms[o].create()}else e=o;if(null===s)s=t;else{if("string"===typeof s)s=n.util.createBuffer(s);else if(n.util.isArray(s)){var a=s;s=n.util.createBuffer();for(var u=0;u<a.length;++u)s.putByte(a[u])}var c=s.length();c>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),c=s.length();for(u=0;u<c;++u){a=s.at(u);r.putByte(54^a),i.putByte(92^a)}if(c<e.blockLength)for(a=e.blockLength-c,u=0;u<a;++u)r.putByte(54),i.putByte(92);t=s,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(i),e.update(t),e.digest()}};return o.digest=o.getMac,o}},35970:function(t,e,r){var n,i=r(15736);t.exports=i.jsbn=i.jsbn||{};var o=0xdeadbeefcafe,s=15715070==(16777215&o);function a(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function u(){return new a(null)}function c(t,e,r,n,i,o){while(--o>=0){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=67108863&s}return i}function h(t,e,r,n,i,o){var s=32767&e,a=e>>15;while(--o>=0){var u=32767&this.data[t],c=this.data[t++]>>15,h=a*u+c*s;u=s*u+((32767&h)<<15)+r.data[n]+(1073741823&i),i=(u>>>30)+(h>>>15)+a*c+(i>>>30),r.data[n++]=1073741823&u}return i}function l(t,e,r,n,i,o){var s=16383&e,a=e>>14;while(--o>=0){var u=16383&this.data[t],c=this.data[t++]>>14,h=a*u+c*s;u=s*u+((16383&h)<<14)+r.data[n]+i,i=(u>>28)+(h>>14)+a*c,r.data[n++]=268435455&u}return i}i.jsbn.BigInteger=a,"undefined"===typeof navigator?(a.prototype.am=l,n=28):s&&"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=h,n=30):s&&"Netscape"!=navigator.appName?(a.prototype.am=c,n=26):(a.prototype.am=l,n=28),a.prototype.DB=n,a.prototype.DM=(1<<n)-1,a.prototype.DV=1<<n;var f=52;a.prototype.FV=Math.pow(2,f),a.prototype.F1=f-n,a.prototype.F2=2*n-f;var d,p,y="0123456789abcdefghijklmnopqrstuvwxyz",g=new Array;for(d="0".charCodeAt(0),p=0;p<=9;++p)g[d++]=p;for(d="a".charCodeAt(0),p=10;p<36;++p)g[d++]=p;for(d="A".charCodeAt(0),p=10;p<36;++p)g[d++]=p;function m(t){return y.charAt(t)}function b(t,e){var r=g[t.charCodeAt(e)];return null==r?-1:r}function w(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function v(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function _(t){var e=u();return e.fromInt(t),e}function E(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;var n=t.length,i=!1,o=0;while(--n>=0){var s=8==r?255&t[n]:b(t,n);s<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==o?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&a.ZERO.subTo(this,this)}function S(){var t=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==t)--this.t}function A(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0){a<this.DB&&(r=this.data[s]>>a)>0&&(i=!0,o=m(r));while(s>=0)a<e?(r=(this.data[s]&(1<<a)-1)<<e-a,r|=this.data[--s]>>(a+=this.DB-e)):(r=this.data[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=m(r))}return i?o:"0"}function I(){var t=u();return a.ZERO.subTo(this,t),t}function T(){return this.s<0?this.negate():this}function R(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;while(--r>=0)if(0!=(e=this.data[r]-t.data[r]))return e;return 0}function M(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function k(){return this.t<=0?0:this.DB*(this.t-1)+M(this.data[this.t-1]^this.s&this.DM)}function C(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function O(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function P(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+s+1]=this.data[r]>>i|a,a=(this.data[r]&o)<<n;for(r=s-1;r>=0;--r)e.data[r]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function B(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}}function x(t,e){var r=0,n=0,i=Math.min(t.t,this.t);while(r<i)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n-=t.s;while(r<this.t)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function N(t,e){var r=this.abs(),n=t.abs(),i=r.t;e.t=i+n.t;while(--i>=0)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&a.ZERO.subTo(e,e)}function D(t){var e=this.abs(),r=t.t=2*e.t;while(--r>=0)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function L(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=u());var o=u(),s=this.s,c=t.s,h=this.DB-M(n.data[n.t-1]);h>0?(n.lShiftTo(h,o),i.lShiftTo(h,r)):(n.copyTo(o),i.copyTo(r));var l=o.t,f=o.data[l-1];if(0!=f){var d=f*(1<<this.F1)+(l>1?o.data[l-2]>>this.F2:0),p=this.FV/d,y=(1<<this.F1)/d,g=1<<this.F2,m=r.t,b=m-l,w=null==e?u():e;o.dlShiftTo(b,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),a.ONE.dlShiftTo(l,w),w.subTo(o,o);while(o.t<l)o.data[o.t++]=0;while(--b>=0){var v=r.data[--m]==f?this.DM:Math.floor(r.data[m]*p+(r.data[m-1]+g)*y);if((r.data[m]+=o.am(0,v,r,b,0,l))<v){o.dlShiftTo(b,w),r.subTo(w,r);while(r.data[m]<--v)r.subTo(w,r)}}null!=e&&(r.drShiftTo(l,e),s!=c&&a.ZERO.subTo(e,e)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),s<0&&a.ZERO.subTo(r,r)}}}function U(t){var e=u();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(a.ZERO)>0&&t.subTo(e,e),e}function j(t){this.m=t}function F(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function K(t){return t}function $(t){t.divRemTo(this.m,null,t)}function q(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function H(t,e){t.squareTo(e),this.reduce(e)}function z(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function V(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function G(t){var e=u();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(a.ZERO)>0&&this.m.subTo(e,e),e}function W(t){var e=u();return t.copyTo(e),this.reduce(e),e}function Y(t){while(t.t<=this.mt2)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);while(t.data[r]>=t.DV)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function J(t,e){t.squareTo(e),this.reduce(e)}function Z(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function X(){return 0==(this.t>0?1&this.data[0]:this.s)}function Q(t,e){if(t>4294967295||t<1)return a.ONE;var r=u(),n=u(),i=e.convert(this),o=M(t)-1;i.copyTo(r);while(--o>=0)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function tt(t,e){var r;return r=t<256||e.isEven()?new j(e):new V(e),this.exp(t,r)}function et(){var t=u();return this.copyTo(t),t}function rt(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function nt(){return 0==this.t?this.s:this.data[0]<<24>>24}function it(){return 0==this.t?this.s:this.data[0]<<16>>16}function ot(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function st(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function at(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=_(r),i=u(),o=u(),s="";this.divRemTo(n,i,o);while(i.signum()>0)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function ut(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,u=0;u<t.length;++u){var c=b(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(i=!0):(s=e*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&a.ZERO.subTo(this,this)}function ct(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else{this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(a.ONE.shiftLeft(t-1),mt,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(e))this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(a.ONE.shiftLeft(t-1),this)}else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function ht(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0){n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);while(t>=0)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r)}return e}function lt(t){return 0==this.compareTo(t)}function ft(t){return this.compareTo(t)<0?this:t}function dt(t){return this.compareTo(t)>0?this:t}function pt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function yt(t,e){return t&e}function gt(t){var e=u();return this.bitwiseTo(t,yt,e),e}function mt(t,e){return t|e}function bt(t){var e=u();return this.bitwiseTo(t,mt,e),e}function wt(t,e){return t^e}function vt(t){var e=u();return this.bitwiseTo(t,wt,e),e}function _t(t,e){return t&~e}function Et(t){var e=u();return this.bitwiseTo(t,_t,e),e}function St(){for(var t=u(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function At(t){var e=u();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function It(t){var e=u();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Tt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function Rt(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+Tt(this.data[t]);return this.s<0?this.t*this.DB:-1}function Mt(t){var e=0;while(0!=t)t&=t-1,++e;return e}function kt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Mt(this.data[r]^e);return t}function Ct(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)}function Ot(t,e){var r=a.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Pt(t){return this.changeBit(t,mt)}function Bt(t){return this.changeBit(t,_t)}function xt(t){return this.changeBit(t,wt)}function Nt(t,e){var r=0,n=0,i=Math.min(t.t,this.t);while(r<i)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){n+=t.s;while(r<this.t)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<t.t)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Dt(t){var e=u();return this.addTo(t,e),e}function Lt(t){var e=u();return this.subTo(t,e),e}function Ut(t){var e=u();return this.multiplyTo(t,e),e}function jt(t){var e=u();return this.divRemTo(t,e,null),e}function Ft(t){var e=u();return this.divRemTo(t,null,e),e}function Kt(t){var e=u(),r=u();return this.divRemTo(t,e,r),new Array(e,r)}function $t(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function qt(t,e){if(0!=t){while(this.t<=e)this.data[this.t++]=0;this.data[e]+=t;while(this.data[e]>=this.DV)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Ht(){}function zt(t){return t}function Vt(t,e,r){t.multiplyTo(e,r)}function Gt(t,e){t.squareTo(e)}function Wt(t){return this.exp(t,new Ht)}function Yt(t,e,r){var n,i=Math.min(this.t+t.t,e);r.s=0,r.t=i;while(i>0)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function Jt(t,e,r){--e;var n=r.t=this.t+t.t-e;r.s=0;while(--n>=0)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Zt(t){this.r2=u(),this.q3=u(),a.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Xt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=u();return t.copyTo(e),this.reduce(e),e}function Qt(t){return t}function te(t){t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function ee(t,e){t.squareTo(e),this.reduce(e)}function re(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function ne(t,e){var r,n,i=t.bitLength(),o=_(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new j(e):e.isEven()?new Zt(e):new V(e);var s=new Array,a=3,c=r-1,h=(1<<r)-1;if(s[1]=n.convert(this),r>1){var l=u();n.sqrTo(s[1],l);while(a<=h)s[a]=u(),n.mulTo(l,s[a-2],s[a]),a+=2}var f,d,p=t.t-1,y=!0,g=u();i=M(t.data[p])-1;while(p>=0){i>=c?f=t.data[p]>>i-c&h:(f=(t.data[p]&(1<<i+1)-1)<<c-i,p>0&&(f|=t.data[p-1]>>this.DB+i-c)),a=r;while(0==(1&f))f>>=1,--a;if((i-=a)<0&&(i+=this.DB,--p),y)s[f].copyTo(o),y=!1;else{while(a>1)n.sqrTo(o,g),n.sqrTo(g,o),a-=2;a>0?n.sqrTo(o,g):(d=o,o=g,g=d),n.mulTo(g,s[f],o)}while(p>=0&&0==(t.data[p]&1<<i))n.sqrTo(o,g),d=o,o=g,g=d,--i<0&&(i=this.DB-1,--p)}return n.revert(o)}function ie(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));while(e.signum()>0)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function oe(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function se(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return a.ZERO;var r=t.clone(),n=this.clone(),i=_(1),o=_(0),s=_(0),u=_(1);while(0!=r.signum()){while(r.isEven())r.rShiftTo(1,r),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);while(n.isEven())n.rShiftTo(1,n),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(u,o)):(n.subTo(r,n),e&&s.subTo(i,s),u.subTo(o,u))}return 0!=n.compareTo(a.ONE)?a.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}j.prototype.convert=F,j.prototype.revert=K,j.prototype.reduce=$,j.prototype.mulTo=q,j.prototype.sqrTo=H,V.prototype.convert=G,V.prototype.revert=W,V.prototype.reduce=Y,V.prototype.mulTo=Z,V.prototype.sqrTo=J,a.prototype.copyTo=w,a.prototype.fromInt=v,a.prototype.fromString=E,a.prototype.clamp=S,a.prototype.dlShiftTo=C,a.prototype.drShiftTo=O,a.prototype.lShiftTo=P,a.prototype.rShiftTo=B,a.prototype.subTo=x,a.prototype.multiplyTo=N,a.prototype.squareTo=D,a.prototype.divRemTo=L,a.prototype.invDigit=z,a.prototype.isEven=X,a.prototype.exp=Q,a.prototype.toString=A,a.prototype.negate=I,a.prototype.abs=T,a.prototype.compareTo=R,a.prototype.bitLength=k,a.prototype.mod=U,a.prototype.modPowInt=tt,a.ZERO=_(0),a.ONE=_(1),Ht.prototype.convert=zt,Ht.prototype.revert=zt,Ht.prototype.mulTo=Vt,Ht.prototype.sqrTo=Gt,Zt.prototype.convert=Xt,Zt.prototype.revert=Qt,Zt.prototype.reduce=te,Zt.prototype.mulTo=re,Zt.prototype.sqrTo=ee;var ae=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ue=(1<<26)/ae[ae.length-1];function ce(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=ae[ae.length-1]){for(e=0;e<ae.length;++e)if(r.data[0]==ae[e])return!0;return!1}if(r.isEven())return!1;e=1;while(e<ae.length){var n=ae[e],i=e+1;while(i<ae.length&&n<ue)n*=ae[i++];n=r.modInt(n);while(e<i)if(n%ae[e++]==0)return!1}return r.millerRabin(t)}function he(t){var e=this.subtract(a.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,i=e.shiftRight(r),o=le(),s=0;s<t;++s){do{n=new a(this.bitLength(),o)}while(n.compareTo(a.ONE)<=0||n.compareTo(e)>=0);var u=n.modPow(i,this);if(0!=u.compareTo(a.ONE)&&0!=u.compareTo(e)){var c=1;while(c++<r&&0!=u.compareTo(e))if(u=u.modPowInt(2,this),0==u.compareTo(a.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}function le(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}}}a.prototype.chunkSize=ot,a.prototype.toRadix=at,a.prototype.fromRadix=ut,a.prototype.fromNumber=ct,a.prototype.bitwiseTo=pt,a.prototype.changeBit=Ot,a.prototype.addTo=Nt,a.prototype.dMultiply=$t,a.prototype.dAddOffset=qt,a.prototype.multiplyLowerTo=Yt,a.prototype.multiplyUpperTo=Jt,a.prototype.modInt=oe,a.prototype.millerRabin=he,a.prototype.clone=et,a.prototype.intValue=rt,a.prototype.byteValue=nt,a.prototype.shortValue=it,a.prototype.signum=st,a.prototype.toByteArray=ht,a.prototype.equals=lt,a.prototype.min=ft,a.prototype.max=dt,a.prototype.and=gt,a.prototype.or=bt,a.prototype.xor=vt,a.prototype.andNot=Et,a.prototype.not=St,a.prototype.shiftLeft=At,a.prototype.shiftRight=It,a.prototype.getLowestSetBit=Rt,a.prototype.bitCount=kt,a.prototype.testBit=Ct,a.prototype.setBit=Pt,a.prototype.clearBit=Bt,a.prototype.flipBit=xt,a.prototype.add=Dt,a.prototype.subtract=Lt,a.prototype.multiply=Ut,a.prototype.divide=jt,a.prototype.remainder=Ft,a.prototype.divideAndRemainder=Kt,a.prototype.modPow=ne,a.prototype.modInverse=se,a.prototype.pow=Wt,a.prototype.gcd=ie,a.prototype.isProbablePrime=ce},14038:function(t,e,r){var n=r(15736);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},80235:function(t,e,r){var n=r(15736);r(85219),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},85219:function(t,e,r){var n=r(15736);r(64292),n.mgf=n.mgf||{};var i=t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{};i.create=function(t){var e={generate:function(e,r){for(var i=new n.util.ByteBuffer,o=Math.ceil(r/t.digestLength),s=0;s<o;s++){var a=new n.util.ByteBuffer;a.putInt32(s),t.start(),t.update(e+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}};return e}},99002:function(t,e,r){var n=r(15736);n.pki=n.pki||{};var i=t.exports=n.pki.oids=n.oids=n.oids||{};function o(t,e){i[t]=e,i[e]=t}function s(t,e){i[t]=e}o("1.2.840.113549.1.1.1","rsaEncryption"),o("1.2.840.113549.1.1.4","md5WithRSAEncryption"),o("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),o("1.2.840.113549.1.1.7","RSAES-OAEP"),o("1.2.840.113549.1.1.8","mgf1"),o("1.2.840.113549.1.1.9","pSpecified"),o("1.2.840.113549.1.1.10","RSASSA-PSS"),o("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),o("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),o("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),o("1.3.101.112","EdDSA25519"),o("1.2.840.10040.4.3","dsa-with-sha1"),o("1.3.14.3.2.7","desCBC"),o("1.3.14.3.2.26","sha1"),o("1.3.14.3.2.29","sha1WithRSASignature"),o("2.16.840.1.101.3.4.2.1","sha256"),o("2.16.840.1.101.3.4.2.2","sha384"),o("2.16.840.1.101.3.4.2.3","sha512"),o("2.16.840.1.101.3.4.2.4","sha224"),o("2.16.840.1.101.3.4.2.5","sha512-224"),o("2.16.840.1.101.3.4.2.6","sha512-256"),o("1.2.840.113549.2.2","md2"),o("1.2.840.113549.2.5","md5"),o("1.2.840.113549.1.7.1","data"),o("1.2.840.113549.1.7.2","signedData"),o("1.2.840.113549.1.7.3","envelopedData"),o("1.2.840.113549.1.7.4","signedAndEnvelopedData"),o("1.2.840.113549.1.7.5","digestedData"),o("1.2.840.113549.1.7.6","encryptedData"),o("1.2.840.113549.1.9.1","emailAddress"),o("1.2.840.113549.1.9.2","unstructuredName"),o("1.2.840.113549.1.9.3","contentType"),o("1.2.840.113549.1.9.4","messageDigest"),o("1.2.840.113549.1.9.5","signingTime"),o("1.2.840.113549.1.9.6","counterSignature"),o("1.2.840.113549.1.9.7","challengePassword"),o("1.2.840.113549.1.9.8","unstructuredAddress"),o("1.2.840.113549.1.9.14","extensionRequest"),o("1.2.840.113549.1.9.20","friendlyName"),o("1.2.840.113549.1.9.21","localKeyId"),o("1.2.840.113549.1.9.22.1","x509Certificate"),o("1.2.840.113549.1.12.10.1.1","keyBag"),o("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),o("1.2.840.113549.1.12.10.1.3","certBag"),o("1.2.840.113549.1.12.10.1.4","crlBag"),o("1.2.840.113549.1.12.10.1.5","secretBag"),o("1.2.840.113549.1.12.10.1.6","safeContentsBag"),o("1.2.840.113549.1.5.13","pkcs5PBES2"),o("1.2.840.113549.1.5.12","pkcs5PBKDF2"),o("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),o("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),o("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),o("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),o("1.2.840.113549.2.7","hmacWithSHA1"),o("1.2.840.113549.2.8","hmacWithSHA224"),o("1.2.840.113549.2.9","hmacWithSHA256"),o("1.2.840.113549.2.10","hmacWithSHA384"),o("1.2.840.113549.2.11","hmacWithSHA512"),o("1.2.840.113549.3.7","des-EDE3-CBC"),o("2.16.840.1.101.3.4.1.2","aes128-CBC"),o("2.16.840.1.101.3.4.1.22","aes192-CBC"),o("2.16.840.1.101.3.4.1.42","aes256-CBC"),o("2.5.4.3","commonName"),o("2.5.4.4","surname"),o("2.5.4.5","serialNumber"),o("2.5.4.6","countryName"),o("2.5.4.7","localityName"),o("2.5.4.8","stateOrProvinceName"),o("2.5.4.9","streetAddress"),o("2.5.4.10","organizationName"),o("2.5.4.11","organizationalUnitName"),o("2.5.4.12","title"),o("2.5.4.13","description"),o("2.5.4.15","businessCategory"),o("2.5.4.17","postalCode"),o("2.5.4.42","givenName"),o("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),o("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),o("2.16.840.1.113730.1.1","nsCertType"),o("2.16.840.1.113730.1.13","nsComment"),s("2.5.29.1","authorityKeyIdentifier"),s("2.5.29.2","keyAttributes"),s("2.5.29.3","certificatePolicies"),s("2.5.29.4","keyUsageRestriction"),s("2.5.29.5","policyMapping"),s("2.5.29.6","subtreesConstraint"),s("2.5.29.7","subjectAltName"),s("2.5.29.8","issuerAltName"),s("2.5.29.9","subjectDirectoryAttributes"),s("2.5.29.10","basicConstraints"),s("2.5.29.11","nameConstraints"),s("2.5.29.12","policyConstraints"),s("2.5.29.13","basicConstraints"),o("2.5.29.14","subjectKeyIdentifier"),o("2.5.29.15","keyUsage"),s("2.5.29.16","privateKeyUsagePeriod"),o("2.5.29.17","subjectAltName"),o("2.5.29.18","issuerAltName"),o("2.5.29.19","basicConstraints"),s("2.5.29.20","cRLNumber"),s("2.5.29.21","cRLReason"),s("2.5.29.22","expirationDate"),s("2.5.29.23","instructionCode"),s("2.5.29.24","invalidityDate"),s("2.5.29.25","cRLDistributionPoints"),s("2.5.29.26","issuingDistributionPoint"),s("2.5.29.27","deltaCRLIndicator"),s("2.5.29.28","issuingDistributionPoint"),s("2.5.29.29","certificateIssuer"),s("2.5.29.30","nameConstraints"),o("2.5.29.31","cRLDistributionPoints"),o("2.5.29.32","certificatePolicies"),s("2.5.29.33","policyMappings"),s("2.5.29.34","policyConstraints"),o("2.5.29.35","authorityKeyIdentifier"),s("2.5.29.36","policyConstraints"),o("2.5.29.37","extKeyUsage"),s("2.5.29.46","freshestCRL"),s("2.5.29.54","inhibitAnyPolicy"),o("1.3.6.1.4.1.11129.2.4.2","timestampList"),o("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),o("1.3.6.1.5.5.7.3.1","serverAuth"),o("1.3.6.1.5.5.7.3.2","clientAuth"),o("1.3.6.1.5.5.7.3.3","codeSigning"),o("1.3.6.1.5.5.7.3.4","emailProtection"),o("1.3.6.1.5.5.7.3.8","timeStamping")},1352:function(t,e,r){r(21703),r(52262),r(24506);var n=r(15736);if(r(90022),r(21041),r(68577),r(14038),r(99002),r(42515),r(37513),r(16412),r(22890),r(15070),r(64292),"undefined"===typeof i)var i=n.jsbn.BigInteger;var o=n.asn1,s=n.pki=n.pki||{};t.exports=s.pbe=n.pbe=n.pbe||{};var a=s.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},h={name:"pkcs-12PbeParams",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"iterations"}]};function l(t,e){return t.start().update(e).digest().getBytes()}function f(t){var e;if(t){if(e=s.oids[o.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return d(e)}function d(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function p(t,e,r,i){var a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==i&&a.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids[i]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),a}s.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,u,c,h=n.random.getBytesSync(r.saltSize),l=r.count,f=o.integerToDer(l);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var y,g,m;switch(r.algorithm){case"aes128":i=16,y=16,g=a["aes128-CBC"],m=n.aes.createEncryptionCipher;break;case"aes192":i=24,y=16,g=a["aes192-CBC"],m=n.aes.createEncryptionCipher;break;case"aes256":i=32,y=16,g=a["aes256-CBC"],m=n.aes.createEncryptionCipher;break;case"des":i=8,y=8,g=a["desCBC"],m=n.des.createEncryptionCipher;break;default:var b=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw b.algorithm=r.algorithm,b}var w="hmacWith"+r.prfAlgorithm.toUpperCase(),v=d(w),_=n.pkcs5.pbkdf2(e,h,l,i,v),E=n.random.getBytesSync(y),S=m(_);S.start(E),S.update(o.toDer(t)),S.finish(),c=S.output.getBytes();var A=p(h,f,i,w);u=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a["pkcs5PBES2"]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a["pkcs5PBKDF2"]).getBytes()),A]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(g).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,E)])])])}else{if("3des"!==r.algorithm){b=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw b.algorithm=r.algorithm,b}i=24;var I=new n.util.ByteBuffer(h);_=s.pbe.generatePkcs12Key(e,I,1,l,i),E=s.pbe.generatePkcs12Key(e,I,2,l,i),S=n.des.createEncryptionCipher(_);S.start(E),S.update(o.toDer(t)),S.finish(),c=S.output.getBytes(),u=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,h),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f.getBytes())])])}var T=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[u,o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,c)]);return T},s.decryptPrivateKeyInfo=function(t,e){var r=null,i={},a=[];if(!o.validate(t,u,i,a)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}var h=o.derToOid(i.encryptionOid),l=s.pbe.getCipher(h,i.encryptionParams,e),f=n.util.createBuffer(i.encryptedData);return l.update(f),l.finish()&&(r=o.fromDer(l.output)),r},s.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:o.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},s.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return o.fromDer(e.body)},s.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t));return i=s.encryptPrivateKeyInfo(i,e,r),s.encryptedPrivateKeyToPem(i)}var a,u,c,h;switch(r.algorithm){case"aes128":a="AES-128-CBC",c=16,u=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",c=24,u=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",c=32,u=n.random.getBytesSync(16),h=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",c=24,u=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",c=8,u=n.random.getBytesSync(8),h=n.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var f=n.pbe.opensslDeriveBytes(e,u.substr(0,8),c),d=h(f);d.start(u),d.update(o.toDer(s.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(u).toUpperCase()},body:d.output.getBytes()};return n.pem.encode(p)},s.decryptRsaPrivateKey=function(t,e){var r=null,i=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw a.headerType=a,a}if(i.procType&&"ENCRYPTED"===i.procType.type){var u,c;switch(i.dekInfo.algorithm){case"DES-CBC":u=8,c=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":u=24,c=n.des.createDecryptionCipher;break;case"AES-128-CBC":u=16,c=n.aes.createDecryptionCipher;break;case"AES-192-CBC":u=24,c=n.aes.createDecryptionCipher;break;case"AES-256-CBC":u=32,c=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":u=5,c=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":u=8,c=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":u=16,c=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:a=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw a.algorithm=i.dekInfo.algorithm,a}var h=n.util.hexToBytes(i.dekInfo.parameters),l=n.pbe.opensslDeriveBytes(e,h.substr(0,8),u),f=c(l);if(f.start(h),f.update(n.util.createBuffer(i.body)),!f.finish())return r;r=f.output.getBytes()}else r=i.body;return r="ENCRYPTED PRIVATE KEY"===i.type?s.decryptPrivateKeyInfo(o.fromDer(r),e):o.fromDer(r),null!==r&&(r=s.privateKeyFromAsn1(r)),r},s.pbe.generatePkcs12Key=function(t,e,r,i,o,s){var a,u;if("undefined"===typeof s||null===s){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');s=n.md.sha1.create()}var c=s.digestLength,h=s.blockLength,l=new n.util.ByteBuffer,f=new n.util.ByteBuffer;if(null!==t&&void 0!==t){for(u=0;u<t.length;u++)f.putInt16(t.charCodeAt(u));f.putInt16(0)}var d=f.length(),p=e.length(),y=new n.util.ByteBuffer;y.fillWithByte(r,h);var g=h*Math.ceil(p/h),m=new n.util.ByteBuffer;for(u=0;u<g;u++)m.putByte(e.at(u%p));var b=h*Math.ceil(d/h),w=new n.util.ByteBuffer;for(u=0;u<b;u++)w.putByte(f.at(u%d));var v=m;v.putBuffer(w);for(var _=Math.ceil(o/c),E=1;E<=_;E++){var S=new n.util.ByteBuffer;S.putBytes(y.bytes()),S.putBytes(v.bytes());for(var A=0;A<i;A++)s.start(),s.update(S.getBytes()),S=s.digest();var I=new n.util.ByteBuffer;for(u=0;u<h;u++)I.putByte(S.at(u%c));var T=Math.ceil(p/h)+Math.ceil(d/h),R=new n.util.ByteBuffer;for(a=0;a<T;a++){var M=new n.util.ByteBuffer(v.getBytes(h)),k=511;for(u=I.length()-1;u>=0;u--)k>>=8,k+=I.at(u)+M.at(u),M.setAt(u,255&k);R.putBuffer(M)}v=R,l.putBuffer(S)}return l.truncate(l.length()-o),l},s.pbe.getCipher=function(t,e,r){switch(t){case s.oids["pkcs5PBES2"]:return s.pbe.getCipherForPBES2(t,e,r);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},s.pbe.getCipherForPBES2=function(t,e,r){var i={},a=[];if(!o.validate(e,c,i,a)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}if(t=o.derToOid(i.kdfOid),t!==s.oids["pkcs5PBKDF2"]){u=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw u.oid=t,u.supportedOids=["pkcs5PBKDF2"],u}if(t=o.derToOid(i.encOid),t!==s.oids["aes128-CBC"]&&t!==s.oids["aes192-CBC"]&&t!==s.oids["aes256-CBC"]&&t!==s.oids["des-EDE3-CBC"]&&t!==s.oids["desCBC"]){u=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw u.oid=t,u.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],u}var h,l,d=i.kdfSalt,p=n.util.createBuffer(i.kdfIterationCount);switch(p=p.getInt(p.length()<<3),s.oids[t]){case"aes128-CBC":h=16,l=n.aes.createDecryptionCipher;break;case"aes192-CBC":h=24,l=n.aes.createDecryptionCipher;break;case"aes256-CBC":h=32,l=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":h=24,l=n.des.createDecryptionCipher;break;case"desCBC":h=8,l=n.des.createDecryptionCipher;break}var y=f(i.prfOid),g=n.pkcs5.pbkdf2(r,d,p,h,y),m=i.encIv,b=l(g);return b.start(m),b},s.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},a=[];if(!o.validate(e,h,i,a)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var c,l,d,p=n.util.createBuffer(i.salt),y=n.util.createBuffer(i.iterations);switch(y=y.getInt(y.length()<<3),t){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,d=n.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,d=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:u=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw u.oid=t,u}var g=f(i.prfOid),m=s.pbe.generatePkcs12Key(r,p,1,y,c,g);g.start();var b=s.pbe.generatePkcs12Key(r,p,2,y,l,g);return d(m,b)},s.pbe.opensslDeriveBytes=function(t,e,r,i){if("undefined"===typeof i||null===i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===e&&(e="");for(var o=[l(i,t+e)],s=16,a=1;s<r;++a,s+=16)o.push(l(i,o[a-1]+t+e));return o.join("").substr(0,r)}},42515:function(t,e,r){var n=r(13374)["Buffer"];r(21703);var i=r(15736);r(54881),r(14038),r(64292);var o,s=i.pkcs5=i.pkcs5||{};i.util.isNodejs&&!i.options.usePureJavaScript&&(o=r(25819)),t.exports=i.pbkdf2=s.pbkdf2=function(t,e,r,s,a,u){if("function"===typeof a&&(u=a,a=null),i.util.isNodejs&&!i.options.usePureJavaScript&&o.pbkdf2&&(null===a||"object"!==typeof a)&&(o.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!==typeof a&&(a="sha1"),t=n.from(t,"binary"),e=n.from(e,"binary"),u?4===o.pbkdf2Sync.length?o.pbkdf2(t,e,r,s,(function(t,e){if(t)return u(t);u(null,e.toString("binary"))})):o.pbkdf2(t,e,r,s,a,(function(t,e){if(t)return u(t);u(null,e.toString("binary"))})):4===o.pbkdf2Sync.length?o.pbkdf2Sync(t,e,r,s).toString("binary"):o.pbkdf2Sync(t,e,r,s,a).toString("binary");if("undefined"!==typeof a&&null!==a||(a="sha1"),"string"===typeof a){if(!(a in i.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=i.md[a].create()}var c=a.digestLength;if(s>4294967295*c){var h=new Error("Derived key is too long.");if(u)return u(h);throw h}var l=Math.ceil(s/c),f=s-(l-1)*c,d=i.hmac.create();d.start(a,t);var p,y,g,m="";if(!u){for(var b=1;b<=l;++b){d.start(null,null),d.update(e),d.update(i.util.int32ToBytes(b)),p=g=d.digest().getBytes();for(var w=2;w<=r;++w)d.start(null,null),d.update(g),y=d.digest().getBytes(),p=i.util.xorBytes(p,y,c),g=y;m+=b<l?p:p.substr(0,f)}return m}b=1;function v(){if(b>l)return u(null,m);d.start(null,null),d.update(e),d.update(i.util.int32ToBytes(b)),p=g=d.digest().getBytes(),w=2,_()}function _(){if(w<=r)return d.start(null,null),d.update(g),y=d.digest().getBytes(),p=i.util.xorBytes(p,y,c),g=y,++w,i.util.setImmediate(_);m+=b<l?p:p.substr(0,f),++b,v()}v()}},37513:function(t,e,r){r(21703);var n=r(15736);r(64292);var i=t.exports=n.pem=n.pem||{};function o(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var o=0,s=-1;for(i=0;i<e.length;++i,++o)if(o>65&&-1!==s){var a=e[s];","===a?(++s,e=e.substr(0,s)+"\r\n "+e.substr(s)):e=e.substr(0,s)+"\r\n"+a+e.substr(s+1),o=i-s-1,s=-1,++i}else" "!==e[i]&&"\t"!==e[i]&&","!==e[i]||(s=i);return e}function s(t){return t.replace(/^\s+/,"")}i.encode=function(t,e){e=e||{};var r,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},i+=o(r)),t.contentDomain&&(r={name:"Content-Domain",values:[t.contentDomain]},i+=o(r)),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),i+=o(r)),t.headers)for(var s=0;s<t.headers.length;++s)i+=o(t.headers[s]);return t.procType&&(i+="\r\n"),i+=n.util.encode64(t.body,e.maxline||64)+"\r\n",i+="-----END "+t.type+"-----\r\n",i},i.decode=function(t){var e,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;while(1){if(e=i.exec(t),!e)break;var u=e[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var c={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(c),e[2]){var h=e[2].split(a),l=0;while(e&&l<h.length){for(var f=h[l].replace(/\s+$/,""),d=l+1;d<h.length;++d){var p=h[d];if(!/\s/.test(p[0]))break;f+=p,l=d}if(e=f.match(o),e){for(var y={name:e[1],values:[]},g=e[2].split(","),m=0;m<g.length;++m)y.values.push(s(g[m]));if(c.procType)if(c.contentDomain||"Content-Domain"!==y.name)if(c.dekInfo||"DEK-Info"!==y.name)c.headers.push(y);else{if(0===y.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.contentDomain=g[0]||"";else{if("Proc-Type"!==y.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==y.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++l}if("ENCRYPTED"===c.procType&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},902:function(t,e,r){r(21703);var n=r(15736);r(64292),r(16412),r(30989);var i=t.exports=n.pkcs1=n.pkcs1||{};function o(t,e,r){r||(r=n.md.sha1.create());for(var i="",o=Math.ceil(e/r.digestLength),s=0;s<o;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}i.encode_rsa_oaep=function(t,e,r){var i,s,a,u;"string"===typeof r?(i=r,s=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,s=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),u||(u=a);var c=Math.ceil(t.n.bitLength()/8),h=c-2*a.digestLength-2;if(e.length>h){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=e.length,l.maxLength=h,l}i||(i=""),a.update(i,"raw");for(var f=a.digest(),d="",p=h-e.length,y=0;y<p;y++)d+="\0";var g=f.getBytes()+d+""+e;if(s){if(s.length!==a.digestLength){l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=s.length,l.digestLength=a.digestLength,l}}else s=n.random.getBytes(a.digestLength);var m=o(s,c-a.digestLength-1,u),b=n.util.xorBytes(g,m,g.length),w=o(b,a.digestLength,u),v=n.util.xorBytes(s,w,s.length);return"\0"+v+b},i.decode_rsa_oaep=function(t,e,r){var i,s,a;"string"===typeof r?(i=r,s=arguments[3]||void 0):r&&(i=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u){var c=new Error("RSAES-OAEP encoded message length is invalid.");throw c.length=e.length,c.expectedLength=u,c}if(void 0===s?s=n.md.sha1.create():s.start(),a||(a=s),u<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),s.update(i,"raw");for(var h=s.digest().getBytes(),l=e.charAt(0),f=e.substring(1,s.digestLength+1),d=e.substring(1+s.digestLength),p=o(d,s.digestLength,a),y=n.util.xorBytes(f,p,f.length),g=o(y,u-s.digestLength-1,a),m=n.util.xorBytes(d,g,d.length),b=m.substring(0,s.digestLength),w=(c="\0"!==l,0);w<s.digestLength;++w)c|=h.charAt(w)!==b.charAt(w);for(var v=1,_=s.digestLength,E=s.digestLength;E<m.length;E++){var S=m.charCodeAt(E),A=1&S^1,I=v?65534:0;c|=S&I,v&=A,_+=v}if(c||1!==m.charCodeAt(_))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(_+1)}},67323:function(t,e,r){r(21703);var n=r(15736);r(90022),r(21041),r(68577),r(99002),r(37513),r(42193),r(16412),r(64292),r(18410);var i=n.asn1,o=t.exports=n.pkcs7=n.pkcs7||{};function s(t){var e={},r=[];if(!i.validate(t,o.asn1.recipientInfoValidator,e,r)){var s=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw s.errors=r,s}return{version:e.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(e.issuer),serialNumber:n.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:i.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function a(t){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function u(t){for(var e=[],r=0;r<t.length;++r)e.push(s(t[r]));return e}function c(t){for(var e=[],r=0;r<t.length;++r)e.push(a(t[r]));return e}function h(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),o=0;o<t.unauthenticatedAttributes.length;++o){var s=t.unauthenticatedAttributes[o];r.values.push(f(s))}e.value.push(r)}return e}function l(t){for(var e=[],r=0;r<t.length;++r)e.push(h(t[r]));return e}function f(t){var e;if(t.type===n.pki.oids.contentType)e=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.value).getBytes());else if(t.type===n.pki.oids.messageDigest)e=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),o=new Date("2050-01-01T00:00:00Z"),s=t.value;if("string"===typeof s){var a=Date.parse(s);s=isNaN(a)?13===s.length?i.utcTimeToDate(s):i.generalizedTimeToDate(s):new Date(a)}e=s>=r&&s<o?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(s)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(s))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[e])])}function d(t){return[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.algorithm).getBytes()),t.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.content.getBytes())])]}function p(t,e,r){var o={},s=[];if(!i.validate(e,r,o,s)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var u=i.derToOid(o.contentType);if(u!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(o.encryptedContent){var c="";if(n.util.isArray(o.encryptedContent))for(var h=0;h<o.encryptedContent.length;++h){if(o.encryptedContent[h].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=o.encryptedContent[h].value}else c=o.encryptedContent;t.encryptedContent={algorithm:i.derToOid(o.encAlgorithm),parameter:n.util.createBuffer(o.encParameter.value),content:n.util.createBuffer(c)}}if(o.content){c="";if(n.util.isArray(o.content))for(h=0;h<o.content.length;++h){if(o.content[h].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=o.content[h].value}else c=o.content;t.content=n.util.createBuffer(c)}return t.version=o.version.charCodeAt(0),t.rawCapture=o,o}function y(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:e=n.aes.createDecryptionCipher(t.encryptedContent.key);break;case n.pki.oids["desCBC"]:case n.pki.oids["des-EDE3-CBC"]:e=n.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}o.messageFromPem=function(t){var e=n.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var s=i.fromDer(e.body);return o.messageFromAsn1(s)},o.messageToPem=function(t,e){var r={type:"PKCS7",body:i.toDer(t.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:e})},o.messageFromAsn1=function(t){var e={},r=[];if(!i.validate(t,o.asn1.contentInfoValidator,e,r)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw s.errors=r,s}var a,u=i.derToOid(e.contentType);switch(u){case n.pki.oids.envelopedData:a=o.createEnvelopedData();break;case n.pki.oids.encryptedData:a=o.createEncryptedData();break;case n.pki.oids.signedData:a=o.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a},o.createSignedData=function(){var t=null;return t={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(p(t,e,o.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,i=0;i<r.length;++i)t.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(n.pki.certificateToAsn1(t.certificates[r]));var o=[],s=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&s.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,e)),o.length>0&&s.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),s])},addSigner:function(e){var r=e.issuer,i=e.serialNumber;if(e.certificate){var o=e.certificate;"string"===typeof o&&(o=n.pki.certificateFromPem(o)),r=o.issuer.attributes,i=o.serialNumber}var s=e.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof s&&(s=n.pki.privateKeyFromPem(s));var a=e.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var u=e.authenticatedAttributes||[];if(u.length>0){for(var c=!1,h=!1,l=0;l<u.length;++l){var f=u[l];if(c||f.type!==n.pki.oids.contentType){if(h||f.type!==n.pki.oids.messageDigest);else if(h=!0,c)break}else if(c=!0,h)break}if(!c||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:s,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(o){var s;(o=o||{},"object"!==typeof t.content||null===t.contentInfo)&&(t.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof n.util.ByteBuffer?s=t.content.bytes():"string"===typeof t.content&&(s=n.util.encodeUtf8(t.content)),o.detached?t.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,s):t.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,s)]))));if(0!==t.signers.length){var a=e();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var e={},r=0;r<t.signers.length;++r){var o=t.signers[r],s=o.digestAlgorithm;s in e||(e[s]=n.md[n.pki.oids[s]].create()),0===o.authenticatedAttributes.length?o.md=e[s]:o.md=n.md[n.pki.oids[s]].create()}for(var s in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return e}function r(e){var r;if(t.detachedContent?r=t.detachedContent:(r=t.contentInfo.value[1],r=r.value[0]),!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=i.derToOid(t.contentInfo.value[0].value),s=i.toDer(r);for(var a in s.getByte(),i.getBerValueLength(s),s=s.getBytes(),e)e[a].start().update(s);for(var u=new Date,c=0;c<t.signers.length;++c){var h=t.signers[c];if(0===h.authenticatedAttributes.length){if(o!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{h.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),p=0;p<h.authenticatedAttributes.length;++p){var y=h.authenticatedAttributes[p];y.type===n.pki.oids.messageDigest?y.value=e[h.digestAlgorithm].digest():y.type===n.pki.oids.signingTime&&(y.value||(y.value=u)),d.value.push(f(y)),h.authenticatedAttributesAsn1.value.push(f(y))}s=i.toDer(d).getBytes(),h.md.start().update(s)}h.signature=h.key.sign(h.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=l(t.signers)}},o.createEncryptedData=function(){var t=null;return t={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){p(t,e,o.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),y(t)}},t},o.createEnvelopedData=function(){var t=null;return t={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=p(t,e,o.asn1.envelopedDataValidator);t.recipients=u(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,c(t.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,d(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}y(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var i,o,s;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,o=8,s=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=n.util.createBuffer(n.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(o));var a=s(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var u=0;u<t.recipients.length;++u){var c=t.recipients[u];if(void 0===c.encryptedContent.content)switch(c.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t}},42193:function(t,e,r){var n=r(15736);r(21041),r(64292);var i=n.asn1,o=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=o;var s={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};o.contentInfoValidator=s;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};o.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},o.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var u={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};o.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},s,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},o.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},63686:function(t,e,r){r(21703);var n=r(15736);r(64292),r(35970),r(16412),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],o=new r(null);o.fromInt(30);var s=function(t,e){return t|e};e.generateProbablePrime=function(t,e,r){"function"===typeof e&&(r=e,e={}),e=e||{};var i=e.algorithm||"PRIMEINC";"string"===typeof i&&(i={name:i}),i.options=i.options||{};var o=e.prng||n.random,s={nextBytes:function(t){for(var e=o.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===i.name)return a(t,s,i.options,r);throw new Error("Invalid prime generation algorithm: "+i.name)}}function a(t,e,r,n){return"workers"in r?h(t,e,r,n):u(t,e,r,n)}function u(t,e,r,n){var i=l(t,e),o=0,s=f(i.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var a=10;"maxBlockTime"in r&&(a=r.maxBlockTime),c(i,t,e,o,s,a,n)}function c(t,e,r,o,s,a,u){var h=+new Date;do{if(t.bitLength()>e&&(t=l(e,r)),t.isProbablePrime(s))return u(null,t);t.dAddOffset(i[o++%8],0)}while(a<0||+new Date-h<a);n.util.setImmediate((function(){c(t,e,r,o,s,a,u)}))}function h(t,e,i,o){if("undefined"===typeof Worker)return u(t,e,i,o);var s=l(t,e),a=i.workers,c=i.workLoad||100,h=30*c/8,f=i.workerScript||"forge/prime.worker.js";if(-1===a)return n.util.estimateCores((function(t,e){t&&(e=2),a=e-1,d()}));function d(){a=Math.max(1,a);for(var n=[],i=0;i<a;++i)n[i]=new Worker(f);for(i=0;i<a;++i)n[i].addEventListener("message",d);var u=!1;function d(i){if(!u){0;var a=i.data;if(a.found){for(var f=0;f<n.length;++f)n[f].terminate();return u=!0,o(null,new r(a.prime,16))}s.bitLength()>t&&(s=l(t,e));var d=s.toString(16);i.target.postMessage({hex:d,workLoad:c}),s.dAddOffset(h,0)}}}d()}function l(t,e){var n=new r(t,e),i=t-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),s,n),n.dAddOffset(31-n.mod(o).byteValue(),0),n}function f(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}}()},80649:function(t,e,r){var n=r(96027);r(48675),r(3462),r(37380),r(1118);var i=r(15736);r(64292);var o=null;!i.util.isNodejs||i.options.usePureJavaScript||n.versions["node-webkit"]||(o=r(25819));var s=t.exports=i.prng=i.prng||{};s.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),s=0;s<32;++s)n[s]=r.create();function a(t){if(e.pools[0].messageLength>=32)return c(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,(function(r,n){if(r)return t(r);e.collect(n),c(),t()}))}function u(){if(e.pools[0].messageLength>=32)return c();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),c()}function c(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r===0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var i=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(i),e.generated=0}function h(t){var e=null,r=i.util.globalScope,n=r.crypto||r.msCrypto;n&&n.getRandomValues&&(e=function(t){return n.getRandomValues(t)});var o=i.util.createBuffer();if(e)while(o.length()<t){var s=Math.max(1,Math.min(t-o.length(),65536)/4),a=new Uint32Array(Math.floor(s));try{e(a);for(var u=0;u<a.length;++u)o.putInt32(a[u])}catch(d){if(!("undefined"!==typeof QuotaExceededError&&d instanceof QuotaExceededError))throw d}}if(o.length()<t){var c,h,l,f=Math.floor(65536*Math.random());while(o.length()<t){h=16807*(65535&f),c=16807*(f>>16),h+=(32767&c)<<16,h+=c>>15,h=(2147483647&h)+(h>>31),f=4294967295&h;for(u=0;u<3;++u)l=f>>>(u<<3),l^=Math.floor(256*Math.random()),o.putByte(255&l)}}return o.getBytes(t)}return e.pools=n,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var n=e.plugin.cipher,o=e.plugin.increment,s=e.plugin.formatKey,u=e.plugin.formatSeed,c=i.util.createBuffer();function h(l){if(l)return r(l);if(c.length()>=t)return r(null,c.getBytes(t));if(e.generated>1048575&&(e.key=null),null===e.key)return i.util.nextTick((function(){a(h)}));var f=n(e.key,e.seed);e.generated+=f.length,c.putBytes(f),e.key=s(n(e.key,o(e.seed))),e.seed=u(n(e.key,e.seed)),i.util.setImmediate(h)}e.key=null,h()},e.generateSync=function(t){var r=e.plugin.cipher,n=e.plugin.increment,o=e.plugin.formatKey,s=e.plugin.formatSeed;e.key=null;var a=i.util.createBuffer();while(a.length()<t){e.generated>1048575&&(e.key=null),null===e.key&&u();var c=r(e.key,e.seed);e.generated+=c.length,a.putBytes(c),e.key=o(r(e.key,n(e.seed))),e.seed=s(r(e.key,e.seed))}return a.getBytes(t)},o?(e.seedFile=function(t,e){o.randomBytes(t,(function(t,r){if(t)return e(t);e(null,r.toString())}))},e.seedFileSync=function(t){return o.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,h(t))}catch(r){e(r)}},e.seedFileSync=h),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(t>>i&255);e.collect(n)},e.registerWorker=function(t){if(t===self)e.seedFile=function(t,e){function r(t){var n=t.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",r),e(n.forge.prng.err,n.forge.prng.bytes))}self.addEventListener("message",r),self.postMessage({forge:{prng:{needed:t}}})};else{var r=function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,(function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})}))};t.addEventListener("message",r)}},e}},75451:function(t,e,r){r(21703);var n=r(15736);r(16412),r(64292);var i=t.exports=n.pss=n.pss||{};i.create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,i=t.mgf,o=r.digestLength,s=t.salt||null;if("string"===typeof s&&(s=n.util.createBuffer(s)),"saltLength"in t)e=t.saltLength;else{if(null===s)throw new Error("Salt length not specified or specific salt not given.");e=s.length()}if(null!==s&&s.length()!==e)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||n.random,u={encode:function(t,u){var c,h,l=u-1,f=Math.ceil(l/8),d=t.digest().getBytes();if(f<o+e+2)throw new Error("Message is too long to encrypt.");h=null===s?a.getBytesSync(e):s.bytes();var p=new n.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(d),p.putBytes(h),r.start(),r.update(p.getBytes());var y=r.digest().getBytes(),g=new n.util.ByteBuffer;g.fillWithByte(0,f-e-o-2),g.putByte(1),g.putBytes(h);var m=g.getBytes(),b=f-o-1,w=i.generate(y,b),v="";for(c=0;c<b;c++)v+=String.fromCharCode(m.charCodeAt(c)^w.charCodeAt(c));var _=65280>>8*f-l&255;return v=String.fromCharCode(v.charCodeAt(0)&~_)+v.substr(1),v+y+String.fromCharCode(188)},verify:function(t,s,a){var u,c=a-1,h=Math.ceil(c/8);if(s=s.substr(-h),h<o+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==s.charCodeAt(h-1))throw new Error("Encoded message does not end in 0xBC.");var l=h-o-1,f=s.substr(0,l),d=s.substr(l,o),p=65280>>8*h-c&255;if(0!==(f.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var y=i.generate(d,l),g="";for(u=0;u<l;u++)g+=String.fromCharCode(f.charCodeAt(u)^y.charCodeAt(u));g=String.fromCharCode(g.charCodeAt(0)&~p)+g.substr(1);var m=h-o-e-2;for(u=0;u<m;u++)if(0!==g.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var b=g.substr(-e),w=new n.util.ByteBuffer;w.fillWithByte(0,8),w.putBytes(t),w.putBytes(b),r.start(),r.update(w.getBytes());var v=r.digest().getBytes();return d===v}};return u}},16412:function(t,e,r){var n=r(15736);r(90022),r(45898),r(80649),r(64292),function(){n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},i=new Array(4),o=n.util.createBuffer();function s(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return t=new Array(4),t[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return t=new Array(4),t[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var a=s(),u=null,c=n.util.globalScope,h=c.crypto||c.msCrypto;if(h&&h.getRandomValues&&(u=function(t){return h.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"===typeof window||window.document,a.collectInt(+new Date,32),"undefined"!==typeof navigator){var l="";for(var f in navigator)try{"string"==typeof navigator[f]&&(l+=navigator[f])}catch(d){}a.collect(l),l=null}e&&(e().mousemove((function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)})),e().keypress((function(t){a.collectInt(t.charCode,8)})))}if(n.random)for(var f in a)n.random[f]=a[f];else n.random=a;n.random.createInstance=s,t.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)}()},22890:function(t,e,r){r(52262),r(24506);var n=r(15736);r(64292);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],o=[1,2,3,5],s=function(t,e){return t<<e&65535|(65535&t)>>16-e},a=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"===typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,o=t,s=t.length(),a=e,u=Math.ceil(a/8),c=255>>(7&a);for(r=s;r<128;r++)o.putByte(i[o.at(r-1)+o.at(r-s)&255]);for(o.setAt(128-u,i[o.at(128-u)&c]),r=127-u;r>=0;r--)o.setAt(r,i[o.at(r+1)^o.at(r+u)]);return o};var u=function(t,e,r){var i,u,c,h,l=!1,f=null,d=null,p=null,y=[];for(t=n.rc2.expandKey(t,e),c=0;c<64;c++)y.push(t.getInt16Le());r?(i=function(t){for(c=0;c<4;c++)t[c]+=y[h]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),t[c]=s(t[c],o[c]),h++},u=function(t){for(c=0;c<4;c++)t[c]+=y[63&t[(c+3)%4]]}):(i=function(t){for(c=3;c>=0;c--)t[c]=a(t[c],o[c]),t[c]-=y[h]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),h--},u=function(t){for(c=3;c>=0;c--)t[c]-=y[63&t[(c+3)%4]]});var g=function(t){var e=[];for(c=0;c<4;c++){var n=f.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),e.push(65535&n)}h=r?0:63;for(var i=0;i<t.length;i++)for(var o=0;o<t[i][0];o++)t[i][1](e);for(c=0;c<4;c++)null!==p&&(r?p.putInt16Le(e[c]):e[c]^=p.getInt16Le()),d.putInt16Le(e[c])},m=null;return m={start:function(t,e){t&&"string"===typeof t&&(t=n.util.createBuffer(t)),l=!1,f=n.util.createBuffer(),d=e||new n.util.createBuffer,p=t,m.output=d},update:function(t){l||f.putBuffer(t);while(f.length()>=8)g([[5,i],[1,u],[6,i],[1,u],[5,i]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,f,!r);else{var n=8===f.length()?8:8-f.length();f.fillWithByte(n,n)}if(e&&(l=!0,m.update()),!r&&(e=0===f.length(),e))if(t)e=t(8,d,!r);else{var i=d.length(),o=d.at(i-1);o>i?e=!1:d.truncate(o)}return e}},m};n.rc2.startEncrypting=function(t,e,r){var i=n.rc2.createEncryptionCipher(t,128);return i.start(e,r),i},n.rc2.createEncryptionCipher=function(t,e){return u(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var i=n.rc2.createDecryptionCipher(t,128);return i.start(e,r),i},n.rc2.createDecryptionCipher=function(t,e){return u(t,e,!1)}},15070:function(t,e,r){r(21703),r(48675),r(3462),r(37380),r(1118);var n=r(15736);if(r(21041),r(35970),r(99002),r(902),r(63686),r(16412),r(64292),"undefined"===typeof i)var i=n.jsbn.BigInteger;var o=n.util.isNodejs?r(25819):null,s=n.asn1,a=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var u=n.pki,c=[6,4,2,4,2,4,6,2],h={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},l={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},f={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},d=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p={name:"DigestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},y=function(t){var e;if(!(t.algorithm in u.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=u.oids[t.algorithm];var n=s.oidToDer(e).getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);o.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,n)),o.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),s.toDer(i).getBytes()},g=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var o;e.dP||(e.dP=e.d.mod(e.p.subtract(i.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(i.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{o=new i(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(o.compareTo(e.n)>=0||!o.gcd(e.n).equals(i.ONE));t=t.multiply(o.modPow(e.e,e.n)).mod(e.n);var s=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);while(s.compareTo(a)<0)s=s.add(e.p);var u=s.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return u=u.multiply(o.modInverse(e.n)).mod(e.n),u};function m(t,e,r){var i=n.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=o-11,s}i.putByte(0),i.putByte(r);var a,u=o-3-t.length;if(0===r||1===r){a=0===r?0:255;for(var c=0;c<u;++c)i.putByte(a)}else while(u>0){var h=0,l=n.random.getBytes(u);for(c=0;c<u;++c)a=l.charCodeAt(c),0===a?++h:i.putByte(a);u=h}return i.putByte(0),i.putBytes(t),i}function b(t,e,r,i){var o=Math.ceil(e.n.bitLength()/8),s=n.util.createBuffer(t),a=s.getByte(),u=s.getByte();if(0!==a||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&"undefined"===typeof i)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=o-3-i;for(var h=0;h<c;++h)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===u){c=0;while(s.length()>1){if(255!==s.getByte()){--s.read;break}++c}}else if(2===u){c=0;while(s.length()>1){if(0===s.getByte()){--s.read;break}++c}}var l=s.getByte();if(0!==l||c!==o-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function w(t,e,r){"function"===typeof e&&(r=e,e={}),e=e||{};var o={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function s(){a(t.pBits,(function(e,n){return e?r(e):(t.p=n,null!==t.q?c(e,t.q):void a(t.qBits,c))}))}function a(t,e){n.prime.generateProbablePrime(t,o,e)}function c(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var o=t.p;t.p=t.q,t.q=o}if(0!==t.p.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.p=null,void s();if(0!==t.q.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.q=null,void a(t.qBits,c);if(t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(i.ONE))return t.p=t.q=null,void s();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,c);var h=t.e.modInverse(t.phi);t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,h,t.p,t.q,h.mod(t.p1),h.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"prng"in e&&(o.prng=e.prng),s()}function v(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function _(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function E(t){return n.util.isNodejs&&"function"===typeof o[t]}function S(t){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.crypto&&"object"===typeof a.globalScope.crypto.subtle&&"function"===typeof a.globalScope.crypto.subtle[t]}function A(t){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.msCrypto&&"object"===typeof a.globalScope.msCrypto.subtle&&"function"===typeof a.globalScope.msCrypto.subtle[t]}function I(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}u.rsa.encrypt=function(t,e,r){var o,s=r,a=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(s=2===r,o=m(t,e,r)):(o=n.util.createBuffer(),o.putBytes(t));var u=new i(o.toHex(),16),c=g(u,e,s),h=c.toString(16),l=n.util.createBuffer(),f=a-Math.ceil(h.length/2);while(f>0)l.putByte(0),--f;return l.putBytes(n.util.hexToBytes(h)),l.getBytes()},u.rsa.decrypt=function(t,e,r,o){var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=s,a}var u=new i(n.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");var c=g(u,e,r),h=c.toString(16),l=n.util.createBuffer(),f=s-Math.ceil(h.length/2);while(f>0)l.putByte(0),--f;return l.putBytes(n.util.hexToBytes(h)),!1!==o?b(l.getBytes(),e,r):l.getBytes()},u.rsa.createKeyPairGenerationState=function(t,e,r){"string"===typeof t&&(t=parseInt(t,10)),t=t||2048,r=r||{};var o,s=r.prng||n.random,a={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return o={algorithm:u,state:0,bits:t,rng:a,eInt:e||65537,e:new i(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt),o},u.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);var n,o=0,s=function(t,e){return t|e},a=+new Date,h=0;while(null===t.keys&&(e<=0||h<e)){if(0===t.state){var l=null===t.p?t.pBits:t.qBits,f=l-1;0===t.pqState?(t.num=new i(l,t.rng),t.num.testBit(f)||t.num.bitwiseTo(i.ONE.shiftLeft(f),s,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),o=0,++t.pqState):1===t.pqState?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(_(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(c[o++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(i.ONE).gcd(t.e).compareTo(i.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(i.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var d=t.e.modInverse(t.phi);t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)}}n=+new Date,h+=n-a,a=n}return null!==t.keys},u.rsa.generateKeyPair=function(t,e,r,i){if(1===arguments.length?"object"===typeof t?(r=t,t=void 0):"function"===typeof t&&(i=t,t=void 0):2===arguments.length?"number"===typeof t?"function"===typeof e?(i=e,e=void 0):"number"!==typeof e&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):3===arguments.length&&("number"===typeof e?"function"===typeof r&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(i){if(E("generateKeyPair"))return o.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(t,e,r){if(t)return i(t);i(null,{privateKey:u.privateKeyFromPem(r),publicKey:u.publicKeyFromPem(e)})}));if(S("generateKey")&&S("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:I(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(t){return a.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)})).then(void 0,(function(t){i(t)})).then((function(t){if(t){var e=u.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(t)));i(null,{privateKey:e,publicKey:u.setRsaPublicKey(e.n,e.e)})}}));if(A("generateKey")&&A("exportKey")){var c=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:I(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(t){var e=t.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=u.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(e)));i(null,{privateKey:r,publicKey:u.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){i(t)}},void(c.onerror=function(t){i(t)})}}else if(E("generateKeyPairSync")){var h=o.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:u.privateKeyFromPem(h.privateKey),publicKey:u.publicKeyFromPem(h.publicKey)}}var l=u.rsa.createKeyPairGenerationState(t,e,r);if(!i)return u.rsa.stepKeyPairGenerationState(l,0),l.keys;w(l,r,i)},u.setRsaPublicKey=u.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,i){if("string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return m(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"===typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var o=e.encode(t,r,!0);return u.rsa.encrypt(o,r,!0)},verify:function(t,e,i,o){"string"===typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===o&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){e=b(e,r,!0);var i=s.fromDer(e,{parseAllBytes:o._parseAllDigestBytes}),a={},u=[];if(!s.validate(i,p,a,u)){var c=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw c.errors=u,c}var h=s.derToOid(a.algorithmIdentifier);if(h!==n.oids.md2&&h!==n.oids.md5&&h!==n.oids.sha1&&h!==n.oids.sha224&&h!==n.oids.sha256&&h!==n.oids.sha384&&h!==n.oids.sha512&&h!==n.oids["sha512-224"]&&h!==n.oids["sha512-256"]){c=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw c.oid=h,c}if((h===n.oids.md2||h===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return e=b(e,r,!0),t===e}});var a=u.rsa.decrypt(e,r,!0,!1);return i.verify(t,a,r.n.bitLength())}};return r},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(t,e,r,i,o,s,a,c){var h={n:t,e:e,d:r,p:i,q:o,dP:s,dQ:a,qInv:c,decrypt:function(t,e,r){"string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var i=u.rsa.decrypt(t,h,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:b};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(i,h,!1)},sign:function(t,e){var r=!1;"string"===typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:y},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,h.n.bitLength());return u.rsa.encrypt(n,h,r)}};return h},u.wrapRsaPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(t).getBytes())])},u.privateKeyFromAsn1=function(t){var e,r,o,a,c,f,d,p,y={},g=[];if(s.validate(t,h,y,g)&&(t=s.fromDer(n.util.createBuffer(y.privateKey))),y={},g=[],!s.validate(t,l,y,g)){var m=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw m.errors=g,m}return e=n.util.createBuffer(y.privateKeyModulus).toHex(),r=n.util.createBuffer(y.privateKeyPublicExponent).toHex(),o=n.util.createBuffer(y.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(y.privateKeyPrime1).toHex(),c=n.util.createBuffer(y.privateKeyPrime2).toHex(),f=n.util.createBuffer(y.privateKeyExponent1).toHex(),d=n.util.createBuffer(y.privateKeyExponent2).toHex(),p=n.util.createBuffer(y.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new i(e,16),new i(r,16),new i(o,16),new i(a,16),new i(c,16),new i(f,16),new i(d,16),new i(p,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.qInv))])},u.publicKeyFromAsn1=function(t){var e={},r=[];if(s.validate(t,d,e,r)){var o=s.derToOid(e.publicKeyOid);if(o!==u.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=o,a}t=e.rsaPublicKey}if(r=[],!s.validate(t,f,e,r)){a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=r,a}var c=n.util.createBuffer(e.publicKeyModulus).toHex(),h=n.util.createBuffer(e.publicKeyExponent).toHex();return u.setRsaPublicKey(new i(c,16),new i(h,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(t)])])},u.publicKeyToRSAPublicKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,v(t.e))])}},30989:function(t,e,r){var n=r(15736);r(14038),r(64292);var i=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){s||a();var t=null,e=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var a=o.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=a[1],a[1]=a[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(o),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var a,c,h=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,l=h&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-l));for(var f=8*i.fullMessageLength[0],d=0;d<i.fullMessageLength.length-1;++d)a=8*i.fullMessageLength[d+1],c=a/4294967296>>>0,f+=c,s.putInt32(f>>>0),f=a>>>0;s.putInt32(f);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};u(p,r,s);var y=n.util.createBuffer();return y.putInt32(p.h0),y.putInt32(p.h1),y.putInt32(p.h2),y.putInt32(p.h3),y.putInt32(p.h4),y},i};var o=null,s=!1;function a(){o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),s=!0}function u(t,e,r){var n,i,o,s,a,u,c,h,l=r.length();while(l>=64){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,u=t.h4,h=0;h<16;++h)n=r.getInt32(),e[h]=n,c=a^o&(s^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;h<20;++h)n=e[h-3]^e[h-8]^e[h-14]^e[h-16],n=n<<1|n>>>31,e[h]=n,c=a^o&(s^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;h<32;++h)n=e[h-3]^e[h-8]^e[h-14]^e[h-16],n=n<<1|n>>>31,e[h]=n,c=o^s^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;h<40;++h)n=e[h-6]^e[h-16]^e[h-28]^e[h-32],n=n<<2|n>>>30,e[h]=n,c=o^s^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;h<60;++h)n=e[h-6]^e[h-16]^e[h-28]^e[h-32],n=n<<2|n>>>30,e[h]=n,c=o&s|a&(o^s),n=(i<<5|i>>>27)+c+u+2400959708+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;h<80;++h)n=e[h-6]^e[h-16]^e[h-28]^e[h-32],n=n<<2|n>>>30,e[h]=n,c=o^s^a,n=(i<<5|i>>>27)+c+u+3395469782+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,l-=64}}},45898:function(t,e,r){var n=r(15736);r(14038),r(64292);var i=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){s||u();var t=null,e=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var a=o.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(o),c(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var a,u,h=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,l=h&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-l));for(var f=8*i.fullMessageLength[0],d=0;d<i.fullMessageLength.length-1;++d)a=8*i.fullMessageLength[d+1],u=a/4294967296>>>0,f+=u,s.putInt32(f>>>0),f=a>>>0;s.putInt32(f);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};c(p,r,s);var y=n.util.createBuffer();return y.putInt32(p.h0),y.putInt32(p.h1),y.putInt32(p.h2),y.putInt32(p.h3),y.putInt32(p.h4),y.putInt32(p.h5),y.putInt32(p.h6),y.putInt32(p.h7),y},i};var o=null,s=!1,a=null;function u(){o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0}function c(t,e,r){var n,i,o,s,u,c,h,l,f,d,p,y,g,m,b,w=r.length();while(w>=64){for(h=0;h<16;++h)e[h]=r.getInt32();for(;h<64;++h)n=e[h-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[h-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[h]=n+e[h-7]+i+e[h-16]|0;for(l=t.h0,f=t.h1,d=t.h2,p=t.h3,y=t.h4,g=t.h5,m=t.h6,b=t.h7,h=0;h<64;++h)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),u=m^y&(g^m),o=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),c=l&f|d&(l^f),n=b+s+u+a[h]+e[h],i=o+c,b=m,m=g,g=y,y=p+n>>>0,p=d,d=f,f=l,l=n+i>>>0;t.h0=t.h0+l|0,t.h1=t.h1+f|0,t.h2=t.h2+d|0,t.h3=t.h3+p|0,t.h4=t.h4+y|0,t.h5=t.h5+g|0,t.h6=t.h6+m|0,t.h7=t.h7+b|0,w-=64}}},12328:function(t,e,r){r(21703);var n=r(15736);r(14038),r(64292);var i=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var o=n.sha384=n.sha512.sha384=n.sha512.sha384||{};o.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=o,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(t){if(a||h(),"undefined"===typeof t&&(t="SHA-512"),!(t in c))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=c[t],r=null,i=n.util.createBuffer(),o=new Array(80),u=0;u<80;++u)o[u]=new Array(2);var f=64;switch(t){case"SHA-384":f=48;break;case"SHA-512/256":f=32;break;case"SHA-512/224":f=28;break}var d={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:f,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var t=d.messageLengthSize/4,o=0;o<t;++o)d.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(e.length);for(o=0;o<e.length;++o)r[o]=e[o].slice(0);return d}};return d.start(),d.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var s=t.length;d.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=d.fullMessageLength.length-1;a>=0;--a)d.fullMessageLength[a]+=s[1],s[1]=s[0]+(d.fullMessageLength[a]/4294967296>>>0),d.fullMessageLength[a]=d.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return i.putBytes(t),l(r,o,i),(i.read>2048||0===i.length())&&i.compact(),d},d.digest=function(){var e=n.util.createBuffer();e.putBytes(i.bytes());var a,u,c=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize,h=c&d.blockLength-1;e.putBytes(s.substr(0,d.blockLength-h));for(var f=8*d.fullMessageLength[0],p=0;p<d.fullMessageLength.length-1;++p)a=8*d.fullMessageLength[p+1],u=a/4294967296>>>0,f+=u,e.putInt32(f>>>0),f=a>>>0;e.putInt32(f);var y=new Array(r.length);for(p=0;p<r.length;++p)y[p]=r[p].slice(0);l(y,o,e);var g,m=n.util.createBuffer();g="SHA-512"===t?y.length:"SHA-384"===t?y.length-2:y.length-4;for(p=0;p<g;++p)m.putInt32(y[p][0]),p===g-1&&"SHA-512/224"===t||m.putInt32(y[p][1]);return m},d};var s=null,a=!1,u=null,c=null;function h(){s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],c={},c["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0}function l(t,e,r){var n,i,o,s,a,c,h,l,f,d,p,y,g,m,b,w,v,_,E,S,A,I,T,R,M,k,C,O,P,B,x,N,D,L,U,j=r.length();while(j>=128){for(P=0;P<16;++P)e[P][0]=r.getInt32()>>>0,e[P][1]=r.getInt32()>>>0;for(;P<80;++P)N=e[P-2],B=N[0],x=N[1],n=((B>>>19|x<<13)^(x>>>29|B<<3)^B>>>6)>>>0,i=((B<<13|x>>>19)^(x<<3|B>>>29)^(B<<26|x>>>6))>>>0,L=e[P-15],B=L[0],x=L[1],o=((B>>>1|x<<31)^(B>>>8|x<<24)^B>>>7)>>>0,s=((B<<31|x>>>1)^(B<<24|x>>>8)^(B<<25|x>>>7))>>>0,D=e[P-7],U=e[P-16],x=i+D[1]+s+U[1],e[P][0]=n+D[0]+o+U[0]+(x/4294967296>>>0)>>>0,e[P][1]=x>>>0;for(g=t[0][0],m=t[0][1],b=t[1][0],w=t[1][1],v=t[2][0],_=t[2][1],E=t[3][0],S=t[3][1],A=t[4][0],I=t[4][1],T=t[5][0],R=t[5][1],M=t[6][0],k=t[6][1],C=t[7][0],O=t[7][1],P=0;P<80;++P)h=((A>>>14|I<<18)^(A>>>18|I<<14)^(I>>>9|A<<23))>>>0,l=((A<<18|I>>>14)^(A<<14|I>>>18)^(I<<23|A>>>9))>>>0,f=(M^A&(T^M))>>>0,d=(k^I&(R^k))>>>0,a=((g>>>28|m<<4)^(m>>>2|g<<30)^(m>>>7|g<<25))>>>0,c=((g<<4|m>>>28)^(m<<30|g>>>2)^(m<<25|g>>>7))>>>0,p=(g&b|v&(g^b))>>>0,y=(m&w|_&(m^w))>>>0,x=O+l+d+u[P][1]+e[P][1],n=C+h+f+u[P][0]+e[P][0]+(x/4294967296>>>0)>>>0,i=x>>>0,x=c+y,o=a+p+(x/4294967296>>>0)>>>0,s=x>>>0,C=M,O=k,M=T,k=R,T=A,R=I,x=S+i,A=E+n+(x/4294967296>>>0)>>>0,I=x>>>0,E=v,S=_,v=b,_=w,b=g,w=m,x=i+s,g=n+o+(x/4294967296>>>0)>>>0,m=x>>>0;x=t[0][1]+m,t[0][0]=t[0][0]+g+(x/4294967296>>>0)>>>0,t[0][1]=x>>>0,x=t[1][1]+w,t[1][0]=t[1][0]+b+(x/4294967296>>>0)>>>0,t[1][1]=x>>>0,x=t[2][1]+_,t[2][0]=t[2][0]+v+(x/4294967296>>>0)>>>0,t[2][1]=x>>>0,x=t[3][1]+S,t[3][0]=t[3][0]+E+(x/4294967296>>>0)>>>0,t[3][1]=x>>>0,x=t[4][1]+I,t[4][0]=t[4][0]+A+(x/4294967296>>>0)>>>0,t[4][1]=x>>>0,x=t[5][1]+R,t[5][0]=t[5][0]+T+(x/4294967296>>>0)>>>0,t[5][1]=x>>>0,x=t[6][1]+k,t[6][0]=t[6][0]+M+(x/4294967296>>>0)>>>0,t[6][1]=x>>>0,x=t[7][1]+O,t[7][0]=t[7][0]+C+(x/4294967296>>>0)>>>0,t[7][1]=x>>>0,j-=128}}},64292:function(t,e,r){var n=r(96027),i=r(13374)["Buffer"];r(84633),r(21703),r(48675),r(3462),r(37380),r(1118),r(52262),r(24506);var o=r(15736),s=r(63220),a=t.exports=o.util=o.util||{};function u(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function c(t){if(this.data="",this.read=0,"string"===typeof t)this.data=t;else if(a.isArrayBuffer(t)||a.isArrayBufferView(t))if("undefined"!==typeof i&&t instanceof i)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof c||"object"===typeof t&&"string"===typeof t.data&&"number"===typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}(function(){if("undefined"!==typeof n&&n.nextTick&&!n.browser)return a.nextTick=n.nextTick,void("function"===typeof setImmediate?a.setImmediate=setImmediate:a.setImmediate=a.nextTick);if("function"===typeof setImmediate)return a.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(a.nextTick=function(t){return setImmediate(t)});if(a.setImmediate=function(t){setTimeout(t,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var t="forge.setImmediate",e=[];function r(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach((function(t){t()}))}}a.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",r,!0)}if("undefined"!==typeof MutationObserver){var i=Date.now(),o=!0,s=document.createElement("div");e=[];new MutationObserver((function(){var t=e.slice();e.length=0,t.forEach((function(t){t()}))})).observe(s,{attributes:!0});var u=a.setImmediate;a.setImmediate=function(t){Date.now()-i>15?(i=Date.now(),u(t)):(e.push(t),1===e.length&&s.setAttribute("a",o=!o))}}a.nextTick=a.setImmediate})(),a.isNodejs="undefined"!==typeof n&&n.versions&&n.versions.node,a.globalScope=function(){return a.isNodejs?r.g:"undefined"===typeof self?window:self}(),a.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a.isArrayBuffer=function(t){return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer},a.isArrayBufferView=function(t){return t&&a.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},a.ByteBuffer=c,a.ByteStringBuffer=c;var h=4096;function l(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=a.isArrayBuffer(t),n=a.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}a.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>h&&(this.data.substr(0,1),this._constructedStringLength=0)},a.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},a.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},a.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},a.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);var r=this.data;while(e>0)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},a.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},a.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(a.encodeUtf8(t))},a.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},a.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},a.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},a.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},a.ByteStringBuffer.prototype.putInt=function(t,e){u(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},a.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},a.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},a.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},a.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},a.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},a.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},a.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},a.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},a.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},a.ByteStringBuffer.prototype.getInt=function(t){u(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},a.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},a.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},a.ByteStringBuffer.prototype.bytes=function(t){return"undefined"===typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},a.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},a.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},a.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},a.ByteStringBuffer.prototype.copy=function(){var t=a.createBuffer(this.data);return t.read=this.read,t},a.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},a.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},a.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},a.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},a.ByteStringBuffer.prototype.toString=function(){return a.decodeUtf8(this.bytes())},a.DataBuffer=l,a.DataBuffer.prototype.length=function(){return this.write-this.read},a.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},a.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},a.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},a.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},a.DataBuffer.prototype.putBytes=function(t,e){if(a.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(a.isArrayBuffer(t)){r=new Uint8Array(t);this.accommodate(r.byteLength);i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof a.DataBuffer||"object"===typeof t&&"number"===typeof t.read&&"number"===typeof t.write&&a.isArrayBufferView(t.data)){r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof a.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"===typeof t){var o;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.hex.decode(t,o,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.base64.decode(t,o,this.write),this;if("utf8"===e&&(t=a.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=a.binary.raw.decode(o),this;if("utf16"===e)return this.accommodate(2*t.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=a.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},a.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},a.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},a.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},a.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},a.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},a.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},a.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},a.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},a.DataBuffer.prototype.putInt=function(t,e){u(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},a.DataBuffer.prototype.putSignedInt=function(t,e){return u(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},a.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},a.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},a.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},a.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},a.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},a.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},a.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},a.DataBuffer.prototype.getInt=function(t){u(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},a.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},a.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},a.DataBuffer.prototype.bytes=function(t){return"undefined"===typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},a.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},a.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},a.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},a.DataBuffer.prototype.copy=function(){return new a.DataBuffer(this)},a.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},a.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},a.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},a.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},a.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8","binary"===t||"raw"===t)return a.binary.raw.encode(e);if("hex"===t)return a.binary.hex.encode(e);if("base64"===t)return a.binary.base64.encode(e);if("utf8"===t)return a.text.utf8.decode(e);if("utf16"===t)return a.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},a.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=a.encodeUtf8(t)),new a.ByteBuffer(t)},a.fillString=function(t,e){var r="";while(e>0)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return r},a.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n},a.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},a.bytesToHex=function(t){return a.createBuffer(t).toHex()},a.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],p="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";a.encode64=function(t,e){var r,n,i,o="",s="",a=0;while(a<t.length)r=t.charCodeAt(a++),n=t.charCodeAt(a++),i=t.charCodeAt(a++),o+=f.charAt(r>>2),o+=f.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=f.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":f.charAt(63&i)),e&&o.length>e&&(s+=o.substr(0,e)+"\r\n",o=o.substr(e));return s+=o,s},a.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var e,r,n,i,o="",s=0;while(s<t.length)e=d[t.charCodeAt(s++)-43],r=d[t.charCodeAt(s++)-43],n=d[t.charCodeAt(s++)-43],i=d[t.charCodeAt(s++)-43],o+=String.fromCharCode(e<<2|r>>4),64!==n&&(o+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(o+=String.fromCharCode((3&n)<<6|i)));return o},a.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},a.decodeUtf8=function(t){return decodeURIComponent(escape(t))},a.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:s.encode,decode:s.decode}},a.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},a.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},a.binary.hex.encode=a.bytesToHex,a.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(1&t.length&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n},a.binary.base64.encode=function(t,e){var r,n,i,o="",s="",a=0;while(a<t.byteLength)r=t[a++],n=t[a++],i=t[a++],o+=f.charAt(r>>2),o+=f.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=f.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":f.charAt(63&i)),e&&o.length>e&&(s+=o.substr(0,e)+"\r\n",o=o.substr(e));return s+=o,s},a.binary.base64.decode=function(t,e,r){var n,i,o,s,a=e;a||(a=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;var u=0,c=r;while(u<t.length)n=d[t.charCodeAt(u++)-43],i=d[t.charCodeAt(u++)-43],o=d[t.charCodeAt(u++)-43],s=d[t.charCodeAt(u++)-43],a[c++]=n<<2|i>>4,64!==o&&(a[c++]=(15&i)<<4|o>>2,64!==s&&(a[c++]=(3&o)<<6|s));return e?c-r:a.subarray(0,c)},a.binary.base58.encode=function(t,e){return a.binary.baseN.encode(t,p,e)},a.binary.base58.decode=function(t,e){return a.binary.baseN.decode(t,p,e)},a.text={utf8:{},utf16:{}},a.text.utf8.encode=function(t,e,r){t=a.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},a.text.utf8.decode=function(t){return a.decodeUtf8(String.fromCharCode.apply(null,t))},a.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n},a.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},a.deflate=function(t,e,r){if(e=a.decode64(t.deflate(a.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);32&i&&(n=6),e=e.substring(n,e.length-4)}return e},a.inflate=function(t,e,r){var n=t.inflate(a.encode64(e)).rval;return null===n?null:a.decode64(n)};var y=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=a.encode64(JSON.stringify(r)),n=t.setItem(e,r)),"undefined"!==typeof n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},g=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(a.decode64(r))),r},m=function(t,e,r,n){var i=g(t,e);null===i&&(i={}),i[r]=n,y(t,e,i)},b=function(t,e,r){var n=g(t,e);return null!==n&&(n=r in n?n[r]:null),n},w=function(t,e,r){var n=g(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),y(t,e,n)}},v=function(t,e){y(t,e,null)},_=function(t,e,r){var n,i=null;"undefined"===typeof r&&(r=["web","flash"]);var o=!1,s=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),o="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,i=t.apply(this,e),o=!0)}catch(u){s=u}if(o)break}if(!o)throw s;return i};a.setItem=function(t,e,r,n,i){_(m,arguments,i)},a.getItem=function(t,e,r,n){return _(b,arguments,n)},a.removeItem=function(t,e,r,n){_(w,arguments,n)},a.clearItems=function(t,e,r){_(v,arguments,r)},a.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},a.format=function(t){var e,r,n=/%./g,i=0,o=[],s=0;while(e=n.exec(t)){r=t.substring(s,n.lastIndex-2),r.length>0&&o.push(r),s=n.lastIndex;var a=e[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")},a.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=void 0===r?",":r,a=void 0===n?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",h=c.length>3?c.length%3:0;return u+(h?c.substr(0,h)+a:"")+c.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-c).toFixed(o).slice(2):"")},a.formatSize=function(t){return t=t>=1073741824?a.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?a.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?a.formatNumber(t/1024,0)+" KiB":a.formatNumber(t,0)+" bytes",t},a.bytesFromIP=function(t){return-1!==t.indexOf(".")?a.bytesFromIPv4(t):-1!==t.indexOf(":")?a.bytesFromIPv6(t):null},a.bytesFromIPv4=function(t){if(t=t.split("."),4!==t.length)return null;for(var e=a.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},a.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}));for(var r=2*(8-t.length+e),n=a.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var o=a.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},a.bytesToIP=function(t){return 4===t.length?a.bytesToIPv4(t):16===t.length?a.bytesToIPv6(t):null},a.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},a.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){var o=a.bytesToHex(t[i]+t[i+1]);while("0"===o[0]&&"0"!==o)o=o.substr(1);if("0"===o){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),0===c.start&&e.unshift(""),7===c.end&&e.push(""))}return e.join(":")},a.estimateCores=function(t,e){if("function"===typeof t&&(e=t,t={}),t=t||{},"cores"in a&&!t.update)return e(null,a.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return a.cores=navigator.hardwareConcurrency,e(null,a.cores);if("undefined"===typeof Worker)return a.cores=1,e(null,a.cores);if("undefined"===typeof Blob)return a.cores=2,e(null,a.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){var e=Date.now(),r=e+4;while(Date.now()<r);self.postMessage({st:e,et:r})}))}.toString(),")()"],{type:"application/javascript"}));function n(t,s,u){if(0===s){var c=Math.floor(t.reduce((function(t,e){return t+e}),0)/t.length);return a.cores=Math.max(1,c),URL.revokeObjectURL(r),e(null,a.cores)}i(u,(function(e,r){t.push(o(u,r)),n(t,s-1,u)}))}function i(t,e){for(var n=[],i=[],o=0;o<t;++o){var s=new Worker(r);s.addEventListener("message",(function(r){if(i.push(r.data),i.length===t){for(var o=0;o<t;++o)n[o].terminate();e(null,i)}})),n.push(s)}for(o=0;o<t;++o)n[o].postMessage(o)}function o(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],o=r[n]=[],s=0;s<t;++s)if(n!==s){var a=e[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return r.reduce((function(t,e){return Math.max(t,e.length)}),0)}n([],5,16)}},18410:function(t,e,r){r(21703);var n=r(15736);r(90022),r(21041),r(68577),r(14038),r(80235),r(99002),r(37513),r(75451),r(15070),r(64292);var i=n.asn1,o=t.exports=n.pki=n.pki||{},s=o.oids,a={};a["CN"]=s["commonName"],a["commonName"]="CN",a["C"]=s["countryName"],a["countryName"]="C",a["L"]=s["localityName"],a["localityName"]="L",a["ST"]=s["stateOrProvinceName"],a["stateOrProvinceName"]="ST",a["O"]=s["organizationName"],a["organizationName"]="O",a["OU"]=s["organizationalUnitName"],a["organizationalUnitName"]="OU",a["E"]=s["emailAddress"],a["emailAddress"]="E";var u=n.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},h={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},l={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},u,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[l,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function d(t,e){"string"===typeof e&&(e={shortName:e});for(var r,n=null,i=0;null===n&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}o.RDNAttributesAsArray=function(t,e){for(var r,n,o,u=[],c=0;c<t.value.length;++c){r=t.value[c];for(var h=0;h<r.value.length;++h)o={},n=r.value[h],o.type=i.derToOid(n.value[0].value),o.value=n.value[1].value,o.valueTagClass=n.value[1].type,o.type in s&&(o.name=s[o.type],o.name in a&&(o.shortName=a[o.name])),e&&(e.update(o.type),e.update(o.value)),u.push(o)}return u},o.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],u=i.derToOid(n.value[0].value),c=n.value[1].value,h=0;h<c.length;++h){var l={};if(l.type=u,l.value=c[h].value,l.valueTagClass=c[h].type,l.type in s&&(l.name=s[l.type],l.name in a&&(l.shortName=a[l.name])),l.type===s.extensionRequest){l.extensions=[];for(var f=0;f<l.value.length;++f)l.extensions.push(o.certificateExtensionFromAsn1(l.value[f]))}e.push(l)}return e};var p=function(t,e,r){var n={};if(t!==s["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:s["sha1"]},mgf:{algorithmOid:s["mgf1"],hash:{algorithmOid:s["sha1"]}},saltLength:20});var o={},a=[];if(!i.validate(e,h,o,a)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=a,u}return void 0!==o.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(o.hashOid)),void 0!==o.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(o.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(o.maskGenHashOid)),void 0!==o.saltLength&&(n.saltLength=o.saltLength.charCodeAt(0)),n},y=function(t){switch(s[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();case"RSASSA-PSS":return n.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},g=function(t){var e,r=t.certificate;switch(r.signatureOid){case s.sha1WithRSAEncryption:case s.sha1WithRSASignature:break;case s["RSASSA-PSS"]:var i,o;if(i=s[r.signatureParameters.mgf.hash.algorithmOid],void 0===i||void 0===n.md[i]){var a=new Error("Unsupported MGF hash function.");throw a.oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=i,a}if(o=s[r.signatureParameters.mgf.algorithmOid],void 0===o||void 0===n.mgf[o]){a=new Error("Unsupported MGF function.");throw a.oid=r.signatureParameters.mgf.algorithmOid,a.name=o,a}if(o=n.mgf[o].create(n.md[i].create()),i=s[r.signatureParameters.hash.algorithmOid],void 0===i||void 0===n.md[i]){a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=r.signatureParameters.hash.algorithmOid,a.name=i,a}e=n.pss.create(n.md[i].create(),o,r.signatureParameters.saltLength);break}return r.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function m(t){for(var e,r,o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),s=t.attributes,a=0;a<s.length;++a){e=s[a];var u=e.value,c=i.Type.PRINTABLESTRING;"valueTagClass"in e&&(c=e.valueTagClass,c===i.Type.UTF8&&(u=n.util.encodeUtf8(u))),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,c,!1,u)])]),o.value.push(r)}return o}function b(t){for(var e,r=0;r<t.length;++r){if(e=t[r],"undefined"===typeof e.name&&(e.type&&e.type in o.oids?e.name=o.oids[e.type]:e.shortName&&e.shortName in a&&(e.name=o.oids[a[e.shortName]])),"undefined"===typeof e.type){if(!e.name||!(e.name in o.oids)){var n=new Error("Attribute type not specified.");throw n.attribute=e,n}e.type=o.oids[e.name]}if("undefined"===typeof e.shortName&&e.name&&e.name in a&&(e.shortName=a[e.name]),e.type===s.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=i.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var u=0;u<e.extensions.length;++u)e.value.push(o.certificateExtensionToAsn1(w(e.extensions[u])))}if("undefined"===typeof e.value){n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function w(t,e){if(e=e||{},"undefined"===typeof t.name&&t.id&&t.id in o.oids&&(t.name=o.oids[t.id]),"undefined"===typeof t.id){if(!t.name||!(t.name in o.oids)){var r=new Error("Extension ID not specified.");throw r.extension=t,r}t.id=o.oids[t.name]}if("undefined"!==typeof t.value)return t;if("keyUsage"===t.name){var a=0,u=0,c=0;t.digitalSignature&&(u|=128,a=7),t.nonRepudiation&&(u|=64,a=6),t.keyEncipherment&&(u|=32,a=5),t.dataEncipherment&&(u|=16,a=4),t.keyAgreement&&(u|=8,a=3),t.keyCertSign&&(u|=4,a=2),t.cRLSign&&(u|=2,a=1),t.encipherOnly&&(u|=1,a=0),t.decipherOnly&&(c|=128,a=7);var h=String.fromCharCode(a);0!==c?h+=String.fromCharCode(u)+String.fromCharCode(c):0!==u&&(h+=String.fromCharCode(u)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,h)}else if("basicConstraints"===t.name)t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var f in t)!0===t[f]&&(f in s?l.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s[f]).getBytes())):-1!==f.indexOf(".")&&l.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(f).getBytes())))}else if("nsCertType"===t.name){a=0,u=0;t.client&&(u|=128,a=7),t.server&&(u|=64,a=6),t.email&&(u|=32,a=5),t.objsign&&(u|=16,a=4),t.reserved&&(u|=8,a=3),t.sslCA&&(u|=4,a=2),t.emailCA&&(u|=2,a=1),t.objCA&&(u|=1,a=0);h=String.fromCharCode(a);0!==u&&(h+=String.fromCharCode(u)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,h)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var d=0;d<t.altNames.length;++d){w=t.altNames[d];h=w.value;if(7===w.type&&w.ip){if(h=n.util.bytesFromIP(w.ip),null===h){r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===w.type&&(h=w.oid?i.oidToDer(i.oidToDer(w.oid)):i.oidToDer(h));t.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,w.type,!1,h))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);l=t.value.value;if(t.keyIdentifier){var y=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,y))}if(t.authorityCertIssuer){var g=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[m(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];l.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,g))}if(t.serialNumber){var b=n.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);l.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,b))}}else if("cRLDistributionPoints"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);l=t.value.value;var w,v=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),_=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(d=0;d<t.altNames.length;++d){w=t.altNames[d];h=w.value;if(7===w.type&&w.ip){if(h=n.util.bytesFromIP(w.ip),null===h){r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else 8===w.type&&(h=w.oid?i.oidToDer(i.oidToDer(w.oid)):i.oidToDer(h));_.value.push(i.create(i.Class.CONTEXT_SPECIFIC,w.type,!1,h))}v.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[_])),l.push(v)}if("undefined"===typeof t.value){r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function v(t,e){switch(t){case s["RSASSA-PSS"]:var r=[];return void 0!==e.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r);default:return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}}function _(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,o=0;o<r.length;++o){var s=r[o],a=s.value,u=i.Type.UTF8;"valueTagClass"in s&&(u=s.valueTagClass),u===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var c=!1;"valueConstructed"in s&&(c=s.valueConstructed);var h=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,u,c,a)])]);e.value.push(h)}return e}o.certificateFromPem=function(t,e,r){var s=n.pem.decode(t)[0];if("CERTIFICATE"!==s.type&&"X509 CERTIFICATE"!==s.type&&"TRUSTED CERTIFICATE"!==s.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=s.type,a}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=i.fromDer(s.body,r);return o.certificateFromAsn1(u,e)},o.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:i.toDer(o.certificateToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.publicKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var s=i.fromDer(e.body);return o.publicKeyFromAsn1(s)},o.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:i.toDer(o.publicKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:i.toDer(o.publicKeyToRSAPublicKey(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.getPublicKeyFingerprint=function(t,e){e=e||{};var r,s=e.md||n.md.sha1.create(),a=e.type||"RSAPublicKey";switch(a){case"RSAPublicKey":r=i.toDer(o.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(o.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}s.start(),s.update(r);var u=s.digest();if("hex"===e.encoding){var c=u.toHex();return e.delimiter?c.match(/.{2}/g).join(e.delimiter):c}if("binary"===e.encoding)return u.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return u},o.certificationRequestFromPem=function(t,e,r){var s=n.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==s.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=s.type,a}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=i.fromDer(s.body,r);return o.certificationRequestFromAsn1(u,e)},o.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:i.toDer(o.certificationRequestToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return d(t.issuer,e)},t.issuer.addField=function(e){b([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return d(t.subject,e)},t.subject.addField=function(e){b([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){b(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){b(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)w(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"===typeof e&&(e={name:e});for(var r,n=null,i=0;null===n&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=s[t.md.algorithm+"WithRSAEncryption"];if(!a){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=a,t.tbsCertificate=o.getTBSCertificate(t);var c=i.toDer(t.tbsCertificate);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,s=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=s.attributes,a.actualIssuer=n.attributes,a}var u=e.md;if(null===u){u=y({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||o.getTBSCertificate(e),h=i.toDer(c);u.update(h.getBytes())}return null!==u&&(r=g({certificate:t,md:u,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var o,s;r=!0;for(var a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],o.type===s.type&&o.value===s.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return o.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=s["subjectKeyIdentifier"],r=0;r<t.extensions.length;++r){var i=t.extensions[r];if(i.id===e){var o=t.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===o}}return!1},t},o.certificateFromAsn1=function(t,e){var r={},s=[];if(!i.validate(t,c,r,s)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=s,a}var u=i.derToOid(r.publicKeyOid);if(u!==o.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var h=o.createCertificate();h.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);h.serialNumber=l.toHex(),h.signatureOid=n.asn1.derToOid(r.certSignatureOid),h.signatureParameters=p(h.signatureOid,r.certSignatureParams,!0),h.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),h.siginfo.parameters=p(h.siginfo.algorithmOid,r.certinfoSignatureParams,!1),h.signature=r.certSignature;var f=[];if(void 0!==r.certValidity1UTCTime&&f.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&f.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&f.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&f.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(h.validity.notBefore=f[0],h.validity.notAfter=f[1],h.tbsCertificate=r.tbsCertificate,e){h.md=y({signatureOid:h.signatureOid,type:"certificate"});var g=i.toDer(h.tbsCertificate);h.md.update(g.getBytes())}var m=n.md.sha1.create(),w=i.toDer(r.certIssuer);m.update(w.getBytes()),h.issuer.getField=function(t){return d(h.issuer,t)},h.issuer.addField=function(t){b([t]),h.issuer.attributes.push(t)},h.issuer.attributes=o.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(h.issuer.uniqueId=r.certIssuerUniqueId),h.issuer.hash=m.digest().toHex();var v=n.md.sha1.create(),_=i.toDer(r.certSubject);return v.update(_.getBytes()),h.subject.getField=function(t){return d(h.subject,t)},h.subject.addField=function(t){b([t]),h.subject.attributes.push(t)},h.subject.attributes=o.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(h.subject.uniqueId=r.certSubjectUniqueId),h.subject.hash=v.digest().toHex(),r.certExtensions?h.extensions=o.certificateExtensionsFromAsn1(r.certExtensions):h.extensions=[],h.publicKey=o.publicKeyFromAsn1(r.subjectPublicKeyInfo),h},o.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(o.certificateExtensionFromAsn1(n.value[i]));return e},o.certificateExtensionFromAsn1=function(t){var e={};if(e.id=i.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===i.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in s)if(e.name=s[e.id],"keyUsage"===e.name){var r=i.fromDer(e.value),o=0,a=0;r.value.length>1&&(o=r.value.charCodeAt(1),a=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=128===(128&o),e.nonRepudiation=64===(64&o),e.keyEncipherment=32===(32&o),e.dataEncipherment=16===(16&o),e.keyAgreement=8===(8&o),e.keyCertSign=4===(4&o),e.cRLSign=2===(2&o),e.encipherOnly=1===(1&o),e.decipherOnly=128===(128&a)}else if("basicConstraints"===e.name){r=i.fromDer(e.value);r.value.length>0&&r.value[0].type===i.Type.BOOLEAN?e.cA=0!==r.value[0].value.charCodeAt(0):e.cA=!1;var u=null;r.value.length>0&&r.value[0].type===i.Type.INTEGER?u=r.value[0].value:r.value.length>1&&(u=r.value[1].value),null!==u&&(e.pathLenConstraint=i.derToInteger(u))}else if("extKeyUsage"===e.name){r=i.fromDer(e.value);for(var c=0;c<r.value.length;++c){var h=i.derToOid(r.value[c].value);h in s?e[s[h]]=!0:e[h]=!0}}else if("nsCertType"===e.name){r=i.fromDer(e.value),o=0;r.value.length>1&&(o=r.value.charCodeAt(1)),e.client=128===(128&o),e.server=64===(64&o),e.email=32===(32&o),e.objsign=16===(16&o),e.reserved=8===(8&o),e.sslCA=4===(4&o),e.emailCA=2===(2&o),e.objCA=1===(1&o)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){var l;e.altNames=[];r=i.fromDer(e.value);for(var f=0;f<r.value.length;++f){l=r.value[f];var d={type:l.type,value:l.value};switch(e.altNames.push(d),l.type){case 1:case 2:case 6:break;case 7:d.ip=n.util.bytesToIP(l.value);break;case 8:d.oid=i.derToOid(l.value);break;default:}}}else if("subjectKeyIdentifier"===e.name){r=i.fromDer(e.value);e.subjectKeyIdentifier=n.util.bytesToHex(r.value)}return e},o.certificationRequestFromAsn1=function(t,e){var r={},s=[];if(!i.validate(t,f,r,s)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=s,a}var u=i.derToOid(r.publicKeyOid);if(u!==o.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=o.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=n.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=p(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=p(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,e){c.md=y({signatureOid:c.signatureOid,type:"certification request"});var h=i.toDer(c.certificationRequestInfo);c.md.update(h.getBytes())}var l=n.md.sha1.create();return c.subject.getField=function(t){return d(c.subject,t)},c.subject.addField=function(t){b([t]),c.subject.attributes.push(t)},c.subject.attributes=o.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),c.subject.hash=l.digest().toHex(),c.publicKey=o.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(t){return d(c,t)},c.addAttribute=function(t){b([t]),c.attributes.push(t)},c.attributes=o.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},o.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return d(t.subject,e)},t.subject.addField=function(e){b([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return d(t,e)},t.addAttribute=function(e){b([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){b(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){b(e),t.attributes=e},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=s[t.md.algorithm+"WithRSAEncryption"];if(!a){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=a,t.certificationRequestInfo=o.getCertificationRequestInfo(t);var c=i.toDer(t.certificationRequestInfo);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){r=y({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||o.getCertificationRequestInfo(t),s=i.toDer(n);r.update(s.getBytes())}return null!==r&&(e=g({certificate:t,md:r,signature:t.signature})),e},t};var E=new Date("1950-01-01T00:00:00Z"),S=new Date("2050-01-01T00:00:00Z");function A(t){return t>=E&&t<S?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(t)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(t))}o.getTBSCertificate=function(t){var e=A(t.validity.notBefore),r=A(t.validity.notAfter),s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.siginfo.algorithmOid).getBytes()),v(t.siginfo.algorithmOid,t.siginfo.parameters)]),m(t.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,r]),m(t.subject),o.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&s.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&s.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&s.value.push(o.certificateExtensionsToAsn1(t.extensions)),s},o.getCertificationRequestInfo=function(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),m(t.subject),o.publicKeyToAsn1(t.publicKey),_(t)]);return e},o.distinguishedNameToAsn1=function(t){return m(t)},o.certificateToAsn1=function(t){var e=t.tbsCertificate||o.getTBSCertificate(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),v(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},o.certificateExtensionsToAsn1=function(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(o.certificateExtensionToAsn1(t[n]));return e},o.certificateExtensionToAsn1=function(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.id).getBytes())),t.critical&&e.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!==typeof t.value&&(r=i.toDer(r).getBytes()),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),e},o.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||o.getCertificationRequestInfo(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),v(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},o.createCaStore=function(t){var e={certs:{}};function r(t){return s(t),e.certs[t.hash]||null}function s(t){if(!t.hash){var e=n.md.sha1.create();t.attributes=o.RDNAttributesAsArray(m(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){var e=r(t.issuer);return e},e.addCertificate=function(t){if("string"===typeof t&&(t=n.pki.certificateFromPem(t)),s(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];n.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;n.util.isArray(e)||(e=[e]);for(var s=i.toDer(o.certificateToAsn1(t)).getBytes(),a=0;a<e.length;++a){var u=i.toDer(o.certificateToAsn1(e[a])).getBytes();if(s===u)return!0}return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var i=e.certs[r];if(n.util.isArray(i))for(var o=0;o<i.length;++o)t.push(i[o]);else t.push(i)}return t},e.removeCertificate=function(t){var a;if("string"===typeof t&&(t=n.pki.certificateFromPem(t)),s(t.subject),!e.hasCertificate(t))return null;var u=r(t.subject);if(!n.util.isArray(u))return a=e.certs[t.subject.hash],delete e.certs[t.subject.hash],a;for(var c=i.toDer(o.certificateToAsn1(t)).getBytes(),h=0;h<u.length;++h){var l=i.toDer(o.certificateToAsn1(u[h])).getBytes();c===l&&(a=u[h],u.splice(h,1))}return 0===u.length&&delete e.certs[t.subject.hash],a},t)for(var a=0;a<t.length;++a){var u=t[a];e.addCertificate(u)}return e},o.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},o.verifyCertificateChain=function(t,e,r){"function"===typeof r&&(r={verify:r}),r=r||{},e=e.slice(0);var i=e.slice(0),s=r.validityCheckDate;"undefined"===typeof s&&(s=new Date);var a=!0,u=null,c=0;do{var h=e.shift(),l=null,f=!1;if(s&&(s<h.validity.notBefore||s>h.validity.notAfter)&&(u={message:"Certificate is not valid yet or has expired.",error:o.certificateError.certificate_expired,notBefore:h.validity.notBefore,notAfter:h.validity.notAfter,now:s}),null===u){if(l=e[0]||t.getIssuer(h),null===l&&h.isIssuer(h)&&(f=!0,l=h),l){var d=l;n.util.isArray(d)||(d=[d]);var p=!1;while(!p&&d.length>0){l=d.shift();try{p=l.verify(h)}catch(S){}}p||(u={message:"Certificate signature is invalid.",error:o.certificateError.bad_certificate})}null!==u||l&&!f||t.hasCertificate(h)||(u={message:"Certificate is not trusted.",error:o.certificateError.unknown_ca})}if(null===u&&l&&!h.isIssuer(l)&&(u={message:"Certificate issuer is invalid.",error:o.certificateError.bad_certificate}),null===u)for(var y={keyUsage:!0,basicConstraints:!0},g=0;null===u&&g<h.extensions.length;++g){var m=h.extensions[g];m.critical&&!(m.name in y)&&(u={message:"Certificate has an unsupported critical extension.",error:o.certificateError.unsupported_certificate})}if(null===u&&(!a||0===e.length&&(!l||f))){var b=h.getExtension("basicConstraints"),w=h.getExtension("keyUsage");if(null!==w&&(w.keyCertSign&&null!==b||(u={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:o.certificateError.bad_certificate})),null!==u||null===b||b.cA||(u={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:o.certificateError.bad_certificate}),null===u&&null!==w&&"pathLenConstraint"in b){var v=c-1;v>b.pathLenConstraint&&(u={message:"Certificate basicConstraints pathLenConstraint violated.",error:o.certificateError.bad_certificate})}}var _=null===u||u.error,E=r.verify?r.verify(_,c,i):_;if(!0!==E)throw!0===_&&(u={message:"The application rejected the certificate.",error:o.certificateError.bad_certificate}),(E||0===E)&&("object"!==typeof E||n.util.isArray(E)?"string"===typeof E&&(u.error=E):(E.message&&(u.message=E.message),E.error&&(u.error=E.error))),u;u=null,a=!1,++c}while(e.length>0);return!0}},32717:function(t,e,r){var n=r(96027);r(21703),function(){var t,i,o,s,a,u,c,h,l,f,d,p,y,g,m=function(t,e){for(var r in e)b.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty;y=r(86554),p=r(63818),d=r(43793),g=r(61935).sync,i="---.EMPTY_STRING.---",c=function(t){var e,r,n,i,o;for(i=p.readdirSync(t),o=[],e=0,r=i.length;e<r;e++)n=i[e],o.push(l(y.join(t,n)));return o},l=function(t){return p.statSync(t).isDirectory()?(c(t),p.rmdirSync(t)):p.unlinkSync(t)},h=function(t){var e;return e=""===t?i:""+t,e},a=function(t){function e(t){this.message=null!=t?t:"Unknown error.",e.__super__.constructor.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}return m(e,t),e.prototype.toString=function(){return this.name+": "+this.message},e}(Error),u=function(){function t(t,e,r,n,i){this.key=t,this.oldValue=e,this.newValue=r,this.url=n,this.storageArea=null!=i?i:"localStorage"}return t}(),s=function(){function t(e,r){if(this.key=e,this.index=r,!(this instanceof t))return new t(this.key,this.index)}return t}(),f=function(){var t;return t=function(){},t.prototype=Object.create(null),new t},o=function(t){var e;function r(t,i){var o;return this._location=t,this.quota=null!=i?i:5242880,r.__super__.constructor.call(this),this instanceof r?(this._location=y.resolve(this._location),null!=e[this._location]?e[this._location]:(this.length=0,this._bytesInUse=0,this._keys=[],this._metaKeyMap=f(),this._eventUrl="pid:"+n.pid,this._init(),this._QUOTA_EXCEEDED_ERR=a,"undefined"!==typeof Proxy&&null!==Proxy?(o={set:function(t){return function(e,r,n){return null!=t[r]?t[r]=n:t.setItem(r,n)}}(this),get:function(t){return function(e,r){return null!=t[r]?t[r]:t.getItem(r)}}(this)},e[this._location]=new Proxy(this,o),e[this._location]):(e[this._location]=this,e[this._location]))):new r(this._location,this.quota)}return m(r,t),e={},r.prototype._init=function(){var t,e,r,n,i,o,a,u,c;try{if(c=p.statSync(this._location),null!=c&&!c.isDirectory())throw new Error("A file exists at the location '"+this._location+"' when trying to create/open localStorage");for(this._bytesInUse=0,this.length=0,r=p.readdirSync(this._location),o=i=0,u=r.length;i<u;o=++i)a=r[o],e=decodeURIComponent(a),this._keys.push(e),t=new s(a,o),this._metaKeyMap[e]=t,c=this._getStat(a),null!=(null!=c?c.size:void 0)&&(t.size=c.size,this._bytesInUse+=c.size);this.length=r.length}catch(h){if(n=h,"ENOENT"!==n.code)throw n;try{p.mkdirSync(this._location,{recursive:!0})}catch(h){if(n=h,"EEXIST"!==n.code)throw n}}},r.prototype.setItem=function(t,e){var r,n,i,o,c,l,f,d,p,m;if(c=this.listenerCount("storage"),d=null,c&&(d=this.getItem(t)),t=h(t),r=encodeURIComponent(t).replace(/[!'()]/g,escape).replace(/\*/g,"%2A"),o=y.join(this._location,r),p=""+e,m=p.length,l=this._metaKeyMap[t],i=!!l,f=i?l.size:0,this._bytesInUse-f+m>this.quota)throw new a;if(g(o,p,{encoding:"utf8"}),i||(l=new s(r,this._keys.push(t)-1),l.size=m,this._metaKeyMap[t]=l,this.length+=1,this._bytesInUse+=m),c)return n=new u(t,d,e,this._eventUrl),this.emit("storage",n)},r.prototype.getItem=function(t){var e,r;return t=h(t),r=this._metaKeyMap[t],r?(e=y.join(this._location,r.key),p.readFileSync(e,"utf8")):null},r.prototype._getStat=function(t){var e;t=h(t),e=y.join(this._location,encodeURIComponent(t));try{return p.statSync(e)}catch(r){return null}},r.prototype.removeItem=function(t){var e,r,n,i,o,s,a,c;if(t=h(t),s=this._metaKeyMap[t],s){for(i in n=this.listenerCount("storage"),a=null,n&&(a=this.getItem(t)),delete this._metaKeyMap[t],this.length-=1,this._bytesInUse-=s.size,r=y.join(this._location,s.key),this._keys.splice(s.index,1),c=this._metaKeyMap,c)c[i],o=this._metaKeyMap[i],o.index>s.index&&(o.index-=1);if(l(r),n)return e=new u(t,a,null,this._eventUrl),this.emit("storage",e)}},r.prototype.key=function(t){var e;return e=this._keys[t],e===i?"":e},r.prototype.clear=function(){var t;if(c(this._location),this._metaKeyMap=f(),this._keys=[],this.length=0,this._bytesInUse=0,this.listenerCount("storage"))return t=new u(null,null,null,this._eventUrl),this.emit("storage",t)},r.prototype._getBytesInUse=function(){return this._bytesInUse},r.prototype._deleteLocation=function(){return delete e[this._location],l(this._location),this._metaKeyMap={},this._keys=[],this.length=0,this._bytesInUse=0},r}(d.EventEmitter),t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.setItem=function(t,r){var n;return n=JSON.stringify(r),e.__super__.setItem.call(this,t,n)},e.prototype.getItem=function(t){return JSON.parse(e.__super__.getItem.call(this,t))},e}(o),e.LocalStorage=o,e.JSONStorage=t,e.QUOTA_EXCEEDED_ERR=a}.call(this)},31866:function(t,e,r){if("undefined"===typeof localStorage||null===localStorage){var n=r(32717).LocalStorage;r.g.localStorage=new n("./scratch")}},13374:function(t,e,r){"use strict";var n=r(15941);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(48675),r(3462),r(37380),r(1118),r(21703),r(26699);const i=r(61271),o=r(27055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=h,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;const a=2147483647;function u(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,r)}function l(t,e,r){if("string"===typeof t)return y(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(at(t,ArrayBuffer)||t&&at(t.buffer,ArrayBuffer))return b(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(at(t,SharedArrayBuffer)||t&&at(t.buffer,SharedArrayBuffer)))return b(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,r){return f(t),t<=0?c(t):void 0!==e?"string"===typeof r?c(t).fill(e,r):c(t).fill(e):c(t)}function p(t){return f(t),c(t<0?0:0|v(t))}function y(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|E(t,e);let n=c(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function g(t){const e=t.length<0?0:0|v(t.length),r=c(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function m(t){if(at(t,Uint8Array)){const e=new Uint8Array(t);return b(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function b(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function w(t){if(h.isBuffer(t)){const e=0|v(t.length),r=c(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||ut(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function v(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),h.alloc(+t)}function E(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||at(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return rt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ot(t).length;default:if(i)return n?-1:rt(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function A(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ut(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:T(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):T(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function T(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function R(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(ut(n))return s;t[r+s]=n}return s}function M(t,e,r,n){return st(rt(e,t.length-r),t,r,n)}function k(t,e,r,n){return st(nt(e),t,r,n)}function C(t,e,r,n){return st(ot(e),t,r,n)}function O(t,e,r,n){return st(it(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128===(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128===(192&r)&&128===(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return N(n)}e.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=u(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return d(t,e,r)},h.allocUnsafe=function(t){return p(t)},h.allocUnsafeSlow=function(t){return p(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),at(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(at(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)A(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)A(this,e,e+3),A(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)A(this,e,e+7),A(this,e+1,e+6),A(this,e+2,e+5),A(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):S.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(at(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e;const a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r);for(let h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return I(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return I(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return M(this,t,e,r);case"ascii":case"latin1":case"binary":return k(this,t,e,r);case"base64":return C(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function N(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=x));return r}function D(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function L(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=ct[t[o]];return i}function j(t,e,r){const n=t.slice(e,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function K(t,e,r,n,i,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function $(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function q(t,e,r,n,i){Z(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function H(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,4,34028234663852886e22,-34028234663852886e22),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,e,r,8,17976931348623157e292,-17976931348623157e292),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);let n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=ht((function(t){t>>>=0,X(t,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=1,o=0;this[e]=255&t;while(++o<r&&(i*=256))this[e+o]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;K(this,t,e,r,n,0)}let i=r-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=ht((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=ht((function(t,e=0){return q(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;this[e]=255&t;while(++i<r&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);K(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||K(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=ht((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=ht((function(t,e=0){return q(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return z(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return z(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=h.isBuffer(t)?t:h.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const G={};function W(t,e,r){G[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function J(t,e,r){X(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Q(e,t.length-(r+1))}function Z(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new G.ERR_OUT_OF_RANGE("value",i,t)}J(n,i,o)}function X(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Q(t,e,r){if(Math.floor(t)!==t)throw X(t,r),new G.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Y(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const tt=/[^+/0-9A-Za-z-_]/g;function et(t){if(t=t.split("=")[0],t=t.trim().replace(tt,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function rt(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function nt(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function it(t,e){let r,n,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ot(t){return i.toByteArray(et(t))}function st(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function at(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function ut(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ht(t){return"undefined"===typeof BigInt?lt:t}function lt(){throw new Error("BigInt not supported")}},69549:function(t){const e={},r=t=>{t.addEventListener("message",(e=>{r.dispatchEvent("message",t,e)})),t.port&&t.port.addEventListener("message",(e=>{r.dispatchEvent("message",t,e)}))};r.addEventListener=(t,r)=>{e[t]||(e[t]=[]),e[t].push(r)},r.removeEventListener=(t,r)=>{e[t]&&(e[t]=e[t].filter((t=>t===r)))},r.dispatchEvent=function(){const t=Array.prototype.slice.call(arguments),r=t.shift();e[r]&&e[r].forEach((e=>e.apply(null,t)))},t.exports=r},27633:function(t,e,r){"use strict";const n=r(33850),i=r(4974);t.exports=(t,e)=>{const r=n(t,{...e,count:1});return i.fn((async t=>{t((()=>{r.cancel()}));const[e]=await r;return e}))()},t.exports.AggregateError=n.AggregateError},4974:function(t,e,r){"use strict";r(21703);class n extends Error{constructor(t){super(t||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class i{static fn(t){return(...e)=>new i(((r,n,i)=>{e.push(i),t(...e).then(r,n)}))}constructor(t){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((e,r)=>{this._reject=r;const n=t=>{this._isCanceled&&o.shouldReject||(this._isPending=!1,e(t))},i=t=>{this._isPending=!1,r(t)},o=t=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(t)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:t=>{this._rejectOnCancel=t}}}),t(n,i,o)}))}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(t){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const t of this._cancelHandlers)t()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new n(t))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(i.prototype,Promise.prototype),t.exports=i,t.exports.CancelError=n},61233:function(t){"use strict";const e=()=>{const t={};return t.promise=new Promise(((e,r)=>{t.resolve=e,t.reject=r})),t};t.exports=e},1838:function(t,e,r){const n=r(22819),i=r(61233);t.exports=class{constructor(){this._buffer=new n,this._waitingConsumers=new n}push(t){const{promise:e,resolve:r}=i();return this._buffer.push({chunk:t,resolve:r}),this._consume(),e}_consume(){while(!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty()){const t=this._waitingConsumers.shift(),e=this._buffer.shift();t.resolve(e.chunk),e.resolve()}}shift(){const{promise:t,resolve:e}=i();return this._waitingConsumers.push({resolve:e}),this._consume(),t}isEmpty(){return this._buffer.isEmpty()}}},83454:function(t){"use strict";t.exports=(t,e)=>(e=e||(()=>{}),t.then((t=>new Promise((t=>{t(e())})).then((()=>t))),(t=>new Promise((t=>{t(e())})).then((()=>{throw t})))))},75319:function(t,e,r){"use strict";r(21703);const n=r(6384),i=t=>{if(!Number.isInteger(t)&&t!==1/0||!(t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const e=[];let r=0;const i=()=>{r--,e.length>0&&e.shift()()},o=(t,e,...o)=>{r++;const s=n(t,...o);e(s),s.then(i,i)},s=(n,i,...s)=>{r<t?o(n,i,...s):e.push(o.bind(null,n,i,...s))},a=(t,...e)=>new Promise((r=>s(t,r,...e)));return Object.defineProperties(a,{activeCount:{get:()=>r},pendingCount:{get:()=>e.length},clearQueue:{value:()=>{e.length=0}}}),a};t.exports=i,t.exports["default"]=i},99694:function(t,e,r){"use strict";r(21703),Object.defineProperty(e,"__esModule",{value:!0});const n=r(6856),i=r(13836),o=r(45261),s=()=>{},a=new i.TimeoutError;class u extends n{constructor(t){var e,r,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:o.default},t),!("number"===typeof t.intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==r?r:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=t.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||0===t.interval,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=!0===t.throwOnTimeout,this._isPaused=!1===t.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const t=Date.now();if(void 0===this._intervalId){const e=this._intervalEnd-t;if(!(e<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),e)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const e=this._queue.dequeue();return!!e&&(this.emit("active"),e(),t&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){while(this._tryToStartAnother());}get concurrency(){return this._concurrency}set concurrency(t){if(!("number"===typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,e={}){return new Promise(((r,n)=>{const o=async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===e.timeout?t():i.default(Promise.resolve(t()),void 0===e.timeout?this._timeout:e.timeout,(()=>{(void 0===e.throwOnTimeout?this._throwOnTimeout:e.throwOnTimeout)&&n(a)}));r(await o)}catch(o){n(o)}this._next()};this._queue.enqueue(o,e),this._tryToStartAnother(),this.emit("add")}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((t=>{const e=this._resolveEmpty;this._resolveEmpty=()=>{e(),t()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((t=>{const e=this._resolveIdle;this._resolveIdle=()=>{e(),t()}}))}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}}e["default"]=u},51518:function(t,e){"use strict";function r(t,e,r){let n=0,i=t.length;while(i>0){const o=i/2|0;let s=n+o;r(t[s],e)<=0?(n=++s,i-=o+1):i=o}return n}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r},45261:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(51518);class i{constructor(){this._queue=[]}enqueue(t,e){e=Object.assign({priority:0},e);const r={priority:e.priority,run:t};if(this.size&&this._queue[this.size-1].priority>=e.priority)return void this._queue.push(r);const i=n.default(this._queue,r,((t,e)=>e.priority-t.priority));this._queue.splice(i,0,r)}dequeue(){const t=this._queue.shift();return null===t||void 0===t?void 0:t.run}filter(t){return this._queue.filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return this._queue.length}}e["default"]=i},13836:function(t,e,r){"use strict";r(21703);const n=r(83454);class i extends Error{constructor(t){super(t),this.name="TimeoutError"}}const o=(t,e,r)=>new Promise(((o,s)=>{if("number"!==typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0)return void o(t);const a=setTimeout((()=>{if("function"===typeof r){try{o(r())}catch(u){s(u)}return}const n="string"===typeof r?r:`Promise timed out after ${e} milliseconds`,a=r instanceof Error?r:new i(n);"function"===typeof t.cancel&&t.cancel(),s(a)}),e);n(t.then(o,s),(()=>{clearTimeout(a)}))}));t.exports=o,t.exports["default"]=o,t.exports.TimeoutError=i},81585:function(t){"use strict";const e=async t=>{try{const e=await t;return{isFulfilled:!0,isRejected:!1,value:e}}catch(e){return{isFulfilled:!1,isRejected:!0,reason:e}}};t.exports=e,t.exports["default"]=e},89437:function(t,e,r){"use strict";r(21703),r(26699);const n=r(95711),i=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class o extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,({message:t}=t)):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const s=(t,e,r)=>{const n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},a=t=>i.includes(t),u=(t,e)=>new Promise(((r,i)=>{e={onFailedAttempt:()=>{},retries:10,...e};const u=n.operation(e);u.attempt((async n=>{try{r(await t(n))}catch(c){if(!(c instanceof Error))return void i(new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`));if(c instanceof o)u.stop(),i(c.originalError);else if(c instanceof TypeError&&!a(c.message))u.stop(),i(c);else{s(c,n,e);try{await e.onFailedAttempt(c)}catch(c){return void i(c)}u.retry(c)||i(u.mainError())}}}))}));t.exports=u,t.exports["default"]=u,t.exports.AbortError=o},84824:function(t,e,r){"use strict";const n=r(81585),i=r(75319);t.exports=async(t,e={})=>{const{concurrency:r=1/0}=e,o=i(r);return Promise.all(t.map((t=>t&&"function"===typeof t.then?n(t):n("function"===typeof t?o((()=>t())):Promise.resolve(t)))))}},33850:function(t,e,r){"use strict";r(21703);const n=r(1294),i=r(4974);class o extends Error{}const s=(t,e)=>new i(((r,i,s)=>{const{count:a,filter:u=(()=>!0)}=e;if(!Number.isFinite(a))return void i(new TypeError("Expected a finite number, got "+typeof e.count));const c=[],h=[];let l=0,f=!1;const d=new Set,p=()=>(c.length===a&&(r(c),f=!0),l-h.length<a&&(i(new n(h)),f=!0),f),y=()=>{for(const e of t)d.has(e)||"function"!==typeof e.cancel||e.cancel()};s(y);for(const e of t)l++,(async()=>{try{const t=await e;if(f)return;if(!u(t))throw new o("Value does not satisfy filter");c.push(t)}catch(t){h.push(t)}finally{d.add(e),!f&&p()&&y()}})();a>l&&(i(new RangeError(`Expected input to contain at least ${e.count} items, but contains ${l} items`)),y())}));t.exports=s,t.exports.AggregateError=n,t.exports.FilterError=o},5149:function(t,e,r){"use strict";r(21703);class n extends Error{constructor(t){super(t),this.name="TimeoutError"}}const i=(t,e,r,i)=>{let o;const s=new Promise(((s,a)=>{if("number"!==typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");e!==1/0?(i={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...i},o=i.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof r){try{s(r())}catch(u){a(u)}return}const i="string"===typeof r?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new n(i);"function"===typeof t.cancel&&t.cancel(),a(o)}),e),(async()=>{try{s(await t)}catch(e){a(e)}finally{i.customTimers.clearTimeout.call(void 0,o)}})()):s(t)}));return s.clear=()=>{clearTimeout(o),o=void 0},s};t.exports=i,t.exports["default"]=i,t.exports.TimeoutError=n},6384:function(t){"use strict";const e=(t,...e)=>new Promise((r=>{r(t(...e))}));t.exports=e,t.exports["default"]=e},15678:function(t,e,r){"use strict";var n=r(18625);e.certificate=r(89866);var i=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=i;var o=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=o;var s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}));e.PublicKey=s;var a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=u;var c=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=c;var h=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=h,e.DSAparam=n.define("DSAparam",(function(){this.int()}));var l=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=l;var f=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},89866:function(t,e,r){"use strict";var n=r(18625),i=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),a=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),u=n.define("RelativeDistinguishedName",(function(){this.setof(o)})),c=n.define("RDNSequence",(function(){this.seqof(u)})),h=n.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),l=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),f=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),d=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(h),this.key("validity").use(l),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),p=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));t.exports=p},83311:function(t,e,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=r(13692),a=r(24699),u=r(6779).Buffer;t.exports=function(t,e){var r,c=t.toString(),h=c.match(n);if(h){var l="aes"+h[1],f=u.from(h[2],"hex"),d=u.from(h[3].replace(/[\r\n]/g,""),"base64"),p=s(e,f.slice(0,8),parseInt(h[1],10)).key,y=[],g=a.createDecipheriv(l,p,f);y.push(g.update(d)),y.push(g.final()),r=u.concat(y)}else{var m=c.match(o);r=u.from(m[2].replace(/[\r\n]/g,""),"base64")}var b=c.match(i)[1];return{tag:b,data:r}}},2616:function(t,e,r){r(21703);var n=r(15678),i=r(22562),o=r(83311),s=r(24699),a=r(15043),u=r(6779).Buffer;function c(t){var e;"object"!==typeof t||u.isBuffer(t)||(e=t.passphrase,t=t.key),"string"===typeof t&&(t=u.from(t));var r,i,s=o(t,e),a=s.tag,c=s.data;switch(a){case"CERTIFICATE":i=n.certificate.decode(c,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(i||(i=n.PublicKey.decode(c,"der")),r=i.algorithm.algorithm.join("."),r){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(i.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return i.subjectPrivateKey=i.subjectPublicKey,{type:"ec",data:i};case"1.2.840.10040.4.1":return i.algorithm.params.pub_key=n.DSAparam.decode(i.subjectPublicKey.data,"der"),{type:"dsa",data:i.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":c=n.EncryptedPrivateKey.decode(c,"der"),c=h(c,e);case"PRIVATE KEY":switch(i=n.PrivateKey.decode(c,"der"),r=i.algorithm.algorithm.join("."),r){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(i.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:i.algorithm.curve,privateKey:n.ECPrivateKey.decode(i.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return i.algorithm.params.priv_key=n.DSAparam.decode(i.subjectPrivateKey,"der"),{type:"dsa",params:i.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(c,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(c,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(c,"der")};case"EC PRIVATE KEY":return c=n.ECPrivateKey.decode(c,"der"),{curve:c.parameters.value,privateKey:c.privateKey};default:throw new Error("unknown key type "+a)}}function h(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[t.algorithm.decrypt.cipher.algo.join(".")],c=t.algorithm.decrypt.cipher.iv,h=t.subjectPrivateKey,l=parseInt(o.split("-")[1],10)/8,f=a.pbkdf2Sync(e,r,n,l,"sha1"),d=s.createDecipheriv(o,f,c),p=[];return p.push(d.update(h)),p.push(d.final()),u.concat(p)}t.exports=c,c.signature=n.signature},86554:function(t,e,r){"use strict";var n=r(96027);function i(t){if("string"!==typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function o(t,e){for(var r,n="",i=0,o=-1,s=0,a=0;a<=t.length;++a){if(a<t.length)r=t.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){-1===u?(n="",i=0):(n=n.slice(0,u),i=n.length-1-n.lastIndexOf("/")),o=a,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=a,s=0;continue}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+t.slice(o+1,a):n=t.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}function s(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}r(21703);var a={resolve:function(){for(var t,e="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var a;s>=0?a=arguments[s]:(void 0===t&&(t=n.cwd()),a=t),i(a),0!==a.length&&(e=a+"/"+e,r=47===a.charCodeAt(0))}return e=o(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(t){if(i(t),0===t.length)return".";var e=47===t.charCodeAt(0),r=47===t.charCodeAt(t.length-1);return t=o(t,!e),0!==t.length||e||(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return i(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];i(r),r.length>0&&(void 0===t?t=r:t+="/"+r)}return void 0===t?".":a.normalize(t)},relative:function(t,e){if(i(t),i(e),t===e)return"";if(t=a.resolve(t),e=a.resolve(e),t===e)return"";for(var r=1;r<t.length;++r)if(47!==t.charCodeAt(r))break;for(var n=t.length,o=n-r,s=1;s<e.length;++s)if(47!==e.charCodeAt(s))break;for(var u=e.length,c=u-s,h=o<c?o:c,l=-1,f=0;f<=h;++f){if(f===h){if(c>h){if(47===e.charCodeAt(s+f))return e.slice(s+f+1);if(0===f)return e.slice(s+f)}else o>h&&(47===t.charCodeAt(r+f)?l=f:0===f&&(l=0));break}var d=t.charCodeAt(r+f),p=e.charCodeAt(s+f);if(d!==p)break;47===d&&(l=f)}var y="";for(f=r+l+1;f<=n;++f)f!==n&&47!==t.charCodeAt(f)||(0===y.length?y+="..":y+="/..");return y.length>0?y+e.slice(s+l):(s+=l,47===e.charCodeAt(s)&&++s,e.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(i(t),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,o=!0,s=t.length-1;s>=1;--s)if(e=t.charCodeAt(s),47===e){if(!o){n=s;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"//":t.slice(0,n)},basename:function(t,e){if(void 0!==e&&"string"!==typeof e)throw new TypeError('"ext" argument must be a string');i(t);var r,n=0,o=-1,s=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,u=-1;for(r=t.length-1;r>=0;--r){var c=t.charCodeAt(r);if(47===c){if(!s){n=r+1;break}}else-1===u&&(s=!1,u=r+1),a>=0&&(c===e.charCodeAt(a)?-1===--a&&(o=r):(a=-1,o=u))}return n===o?o=u:-1===o&&(o=t.length),t.slice(n,o)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!s){n=r+1;break}}else-1===o&&(s=!1,o=r+1);return-1===o?"":t.slice(n,o)},extname:function(t){i(t);for(var e=-1,r=0,n=-1,o=!0,s=0,a=t.length-1;a>=0;--a){var u=t.charCodeAt(a);if(47!==u)-1===n&&(o=!1,n=a+1),46===u?-1===e?e=a:1!==s&&(s=1):-1!==e&&(s=-1);else if(!o){r=a+1;break}}return-1===e||-1===n||0===s||1===s&&e===n-1&&e===r+1?"":t.slice(e,n)},format:function(t){if(null===t||"object"!==typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return s("/",t)},parse:function(t){i(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var r,n=t.charCodeAt(0),o=47===n;o?(e.root="/",r=1):r=0;for(var s=-1,a=0,u=-1,c=!0,h=t.length-1,l=0;h>=r;--h)if(n=t.charCodeAt(h),47!==n)-1===u&&(c=!1,u=h+1),46===n?-1===s?s=h:1!==l&&(l=1):-1!==s&&(l=-1);else if(!c){a=h+1;break}return-1===s||-1===u||0===l||1===l&&s===u-1&&s===a+1?-1!==u&&(e.base=e.name=0===a&&o?t.slice(1,u):t.slice(a,u)):(0===a&&o?(e.name=t.slice(1,s),e.base=t.slice(1,u)):(e.name=t.slice(a,s),e.base=t.slice(a,u)),e.ext=t.slice(s,u)),a>0?e.dir=t.slice(0,a-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,t.exports=a},15043:function(t,e,r){e.pbkdf2=r(10809),e.pbkdf2Sync=r(26560)},10809:function(t,e,r){r(84633),r(21703);var n,i,o=r(6779).Buffer,s=r(88369),a=r(53677),u=r(26560),c=r(56816),h=r.g.crypto&&r.g.crypto.subtle,l={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function d(t){if(r.g.process&&!r.g.process.browser)return Promise.resolve(!1);if(!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];n=n||o.alloc(8);var e=y(n,n,10,128,t).then((function(){return!0})).catch((function(){return!1}));return f[t]=e,e}function p(){return i||(i=r.g.process&&r.g.process.nextTick?r.g.process.nextTick:r.g.queueMicrotask?r.g.queueMicrotask:r.g.setImmediate?r.g.setImmediate:r.g.setTimeout,i)}function y(t,e,r,n,i){return h.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return h.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},t,n<<3)})).then((function(t){return o.from(t)}))}function g(t,e){t.then((function(t){p()((function(){e(null,t)}))}),(function(t){p()((function(){e(t)}))}))}t.exports=function(t,e,n,i,o,h){"function"===typeof o&&(h=o,o=void 0),o=o||"sha1";var f=l[o.toLowerCase()];if(f&&"function"===typeof r.g.Promise){if(s(n,i),t=c(t,a,"Password"),e=c(e,a,"Salt"),"function"!==typeof h)throw new Error("No callback provided to pbkdf2");g(d(f).then((function(r){return r?y(t,e,n,i,f):u(t,e,n,i,o)})),h)}else p()((function(){var r;try{r=u(t,e,n,i,o)}catch(s){return h(s)}h(null,r)}))}},53677:function(t,e,r){var n,i=r(96027);if(r.g.process&&r.g.process.browser)n="utf-8";else if(r.g.process&&r.g.process.version){var o=parseInt(i.version.split(".")[0].slice(1),10);n=o>=6?"utf-8":"binary"}else n="utf-8";t.exports=n},88369:function(t,e,r){r(21703);var n=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!==typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!==typeof e)throw new TypeError("Key length not a number");if(e<0||e>n||e!==e)throw new TypeError("Bad key length")}},26560:function(t,e,r){var n=r(56515),i=r(3128),o=r(61720),s=r(6779).Buffer,a=r(88369),u=r(53677),c=r(56816),h=s.alloc(128),l={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,r){var n=d(t),i="sha512"===t||"sha384"===t?128:64;e.length>i?e=n(e):e.length<i&&(e=s.concat([e,h],i));for(var o=s.allocUnsafe(i+l[t]),a=s.allocUnsafe(i+l[t]),u=0;u<i;u++)o[u]=54^e[u],a[u]=92^e[u];var c=s.allocUnsafe(i+r+4);o.copy(c,0,0,i),this.ipad1=c,this.ipad2=o,this.opad=a,this.alg=t,this.blocksize=i,this.hash=n,this.size=l[t]}function d(t){function e(e){return o(t).update(e).digest()}function r(t){return(new i).update(t).digest()}return"rmd160"===t||"ripemd160"===t?r:"md5"===t?n:e}function p(t,e,r,n,i){a(r,n),t=c(t,u,"Password"),e=c(e,u,"Salt"),i=i||"sha1";var o=new f(i,t,e.length),h=s.allocUnsafe(n),d=s.allocUnsafe(e.length+4);e.copy(d,0,0,e.length);for(var p=0,y=l[i],g=Math.ceil(n/y),m=1;m<=g;m++){d.writeUInt32BE(m,e.length);for(var b=o.run(d,o.ipad1),w=b,v=1;v<r;v++){w=o.run(w,o.ipad2);for(var _=0;_<y;_++)b[_]^=w[_]}b.copy(h,p),p+=y}return h}f.prototype.run=function(t,e){t.copy(e,this.blocksize);var r=this.hash(e);return r.copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=p},56816:function(t,e,r){r(21703);var n=r(6779).Buffer;t.exports=function(t,e,r){if(n.isBuffer(t))return t;if("string"===typeof t)return n.from(t,e);if(ArrayBuffer.isView(t))return n.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},68292:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);const{CID:n}=r(59329),i=r(12056),o=r(8362),s=r(78334),a=r(61058),{base58btc:u}=r(78334),{base32:c}=r(12056),{base16:h}=r(38850),l=r(55226),f=r(91950),d=r(67151),{PeerIdProto:p}=r(59941),{equals:y}=r(74141),{fromString:g}=r(92259),{toString:m}=r(96523),{identity:b}=r(67041),w={...i,...o,...s,...a},v=Object.keys(w).reduce(((t,e)=>t.or(w[e])),c.decoder),_=112,E=114;class S{constructor(t,e,r){if(!(t instanceof Uint8Array))throw new Error("invalid id provided");if(e&&r&&!y(e.public.bytes,r.bytes))throw new Error("inconsistent arguments");this._id=t,this._idB58String=u.encode(this.id).substring(1),this._privKey=e,this._pubKey=r}get id(){return this._id}set id(t){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(t){this._privKey=t}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{const t=l.decode(this.id);t.code===b.code&&(this._pubKey=f.unmarshalPublicKey(t.digest))}catch(t){}return this._pubKey}set pubKey(t){this._pubKey=t}marshalPubKey(){if(this.pubKey)return f.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return f.marshalPrivateKey(this.privKey)}marshal(t){return p.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:t?null:this.marshalPrivKey()}).finish()}toPrint(){let t=this.toB58String();t.startsWith("Qm")&&(t=t.slice(2));let e=6;return t.length<e&&(e=t.length),"<peer.ID "+t.substr(0,e)+">"}toJSON(){return{id:this.toB58String(),privKey:M(this.marshalPrivKey()),pubKey:M(this.marshalPubKey())}}toHexString(){return h.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){const t=n.createV1(E,l.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:t.toString(),enumerable:!1})}return this._idCIDString}equals(t){if(t instanceof Uint8Array)return y(this.id,t);if(t.id)return y(this.id,t.id);throw new Error("not valid Id")}isEqual(t){return this.equals(t)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&y(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{const t=l.decode(this.id);if(t.code===b.code)return!0}catch(t){}return!1}}const A=d(S,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});e=t.exports=A;const I=t=>t.bytes.length<=42?l.create(b.code,t.bytes).bytes:t.hash(),T=async(t,e)=>{const r=await I(e);return new A(r,t,e)};e.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";const e=await f.generateKeyPair(t.keyType,t.bits);return T(e,e.public)},e.createFromHexString=t=>new A(h.decode("f"+t)),e.createFromBytes=t=>{try{const r=n.decode(t);if(!R(r))throw new Error("Supplied PeerID CID is invalid");return e.createFromCID(r)}catch{const e=l.decode(t);if(e.code!==b.code)throw new Error("Supplied PeerID CID is invalid");return new A(t)}},e.createFromB58String=t=>e.createFromBytes(u.decode("z"+t));const R=t=>t.code===E||t.code===_;function M(t){if(t)return m(t,"base64pad")}e.createFromCID=t=>{if(t=n.asCID(t),!t||!R(t))throw new Error("Supplied PeerID CID is invalid");return new A(t.multihash.bytes)},e.createFromPubKey=async t=>{let e=t;if("string"===typeof e&&(e=g(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");const r=await f.unmarshalPublicKey(e);return T(void 0,r)},e.createFromPrivKey=async t=>{if("string"===typeof t&&(t=g(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");const e=await f.unmarshalPrivateKey(t);return T(e,e.public)},e.createFromJSON=async t=>{const e=u.decode("z"+t.id),r=t.privKey&&g(t.privKey,"base64pad"),n=t.pubKey&&g(t.pubKey,"base64pad"),i=n&&await f.unmarshalPublicKey(n);if(!r)return new A(e,void 0,i);const o=await f.unmarshalPrivateKey(r),s=await I(o.public);let a;if(i&&(a=await I(i)),i&&!y(s,a))throw new Error("Public and private key do not match");if(e&&!y(s,e))throw new Error("Id and private key do not match");return new A(e,o,i)},e.createFromProtobuf=async t=>{"string"===typeof t&&(t=g(t,"base16"));let e,r,{id:n,privKey:i,pubKey:o}=p.decode(t);if(i=!!i&&await f.unmarshalPrivateKey(i),o=!!o&&await f.unmarshalPublicKey(o),i&&(r=await I(i.public)),o&&(e=await I(o)),i){if(o&&!y(r,e))throw new Error("Public and private key do not match");return new A(r,i,i.public)}if(o)return new A(e,void 0,o);if(n)return new A(n);throw new Error("Protobuf did not contain any usable key material")},e.parse=t=>("1"!==t.charAt(0)&&"Q"!==t.charAt(0)||(t=`z${t}`),e.createFromBytes(v.decode(t))),e.isPeerId=t=>Boolean("object"===typeof t&&t._id&&t._idB58String)},59941:function(t,e,r){"use strict";var n=r(86425),i=n.Reader,o=n.Writer,s=n.util,a=n.roots["libp2p-peer-id"]||(n.roots["libp2p-peer-id"]={});a.PeerIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)null!=t[e[r]]&&(this[e[r]]=t[e[r]])}return t.prototype.id=s.newBuffer([]),t.prototype.pubKey=s.newBuffer([]),t.prototype.privKey=s.newBuffer([]),t.encode=function(t,e){return e||(e=o.create()),e.uint32(10).bytes(t.id),null!=t.pubKey&&Object.hasOwnProperty.call(t,"pubKey")&&e.uint32(18).bytes(t.pubKey),null!=t.privKey&&Object.hasOwnProperty.call(t,"privKey")&&e.uint32(26).bytes(t.privKey),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));var r=void 0===e?t.len:t.pos+e,n=new a.PeerIdProto;while(t.pos<r){var o=t.uint32();switch(o>>>3){case 1:n.id=t.bytes();break;case 2:n.pubKey=t.bytes();break;case 3:n.privKey=t.bytes();break;default:t.skipType(7&o);break}}if(!n.hasOwnProperty("id"))throw s.ProtocolError("missing required 'id'",{instance:n});return n},t.fromObject=function(t){if(t instanceof a.PeerIdProto)return t;var e=new a.PeerIdProto;return null!=t.id&&("string"===typeof t.id?s.base64.decode(t.id,e.id=s.newBuffer(s.base64.length(t.id)),0):t.id.length&&(e.id=t.id)),null!=t.pubKey&&("string"===typeof t.pubKey?s.base64.decode(t.pubKey,e.pubKey=s.newBuffer(s.base64.length(t.pubKey)),0):t.pubKey.length&&(e.pubKey=t.pubKey)),null!=t.privKey&&("string"===typeof t.privKey?s.base64.decode(t.privKey,e.privKey=s.newBuffer(s.base64.length(t.privKey)),0):t.privKey.length&&(e.privKey=t.privKey)),e},t.toObject=function(t,e){e||(e={});var r={};return e.defaults&&(e.bytes===String?r.id="":(r.id=[],e.bytes!==Array&&(r.id=s.newBuffer(r.id))),e.bytes===String?r.pubKey="":(r.pubKey=[],e.bytes!==Array&&(r.pubKey=s.newBuffer(r.pubKey))),e.bytes===String?r.privKey="":(r.privKey=[],e.bytes!==Array&&(r.privKey=s.newBuffer(r.privKey)))),null!=t.id&&t.hasOwnProperty("id")&&(r.id=e.bytes===String?s.base64.encode(t.id,0,t.id.length):e.bytes===Array?Array.prototype.slice.call(t.id):t.id),null!=t.pubKey&&t.hasOwnProperty("pubKey")&&(r.pubKey=e.bytes===String?s.base64.encode(t.pubKey,0,t.pubKey.length):e.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey),null!=t.privKey&&t.hasOwnProperty("privKey")&&(r.privKey=e.bytes===String?s.base64.encode(t.privKey,0,t.privKey.length):e.bytes===Array?Array.prototype.slice.call(t.privKey):t.privKey),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,n.util.toJSONOptions)},t}(),t.exports=a},62645:function(t,e,r){"use strict";t.exports=r(51145)["default"]},51145:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(98),o=n(r(86294)),s=n(r(17676)),a=r(79564),u=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],c=u.map((t=>new i.Netmask(t)));function h(t){for(let e of c)if(e.contains(t))return!0;return!1}function l(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}e["default"]=t=>{if(a.isValid(t)){const e=a.parse(t);if("ipv4"===e.kind())return h(e.toNormalizedString());if("ipv6"===e.kind())return l(t)}else if(s.default(t)&&o.default.v6().test(t))return l(t)}},60287:function(t,e,r){"use strict";var n;r(21703);t.exports.timeout=function(t,e){var r,i=new n;return Promise.race([t,new Promise((function(t,n){r=setTimeout((function(){n(i)}),e)}))]).then((function(t){return clearTimeout(r),t}),(function(t){throw clearTimeout(r),t}))};n=t.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"},n.prototype=Object.create(Error.prototype),n.prototype.name="TimeoutError"},86425:function(t,e,r){"use strict";t.exports=r(18554)},18554:function(t,e,r){"use strict";var n=e;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(67156),n.BufferWriter=r(18252),n.Reader=r(89799),n.BufferReader=r(48894),n.util=r(37102),n.rpc=r(37753),n.roots=r(30358),n.configure=i,i()},89799:function(t,e,r){"use strict";r(21703),r(48675),r(3462),r(37380),r(1118),t.exports=u;var n,i=r(37102),o=i.LongBits,s=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}var c="undefined"!==typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")},h=function(){return i.Buffer?function(t){return(u.create=function(t){return i.Buffer.isBuffer(t)?new n(t):c(t)})(t)}:c};function l(){var t=new o(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}u.create=h(),u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return t}}(),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,r):e===r?new this.buf.constructor(0):this._slice.call(this.buf,e,r)},u.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},u.prototype.skip=function(t){if("number"===typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(t=7&this.uint32()))this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){n=t,u.create=h(),n._configure();var e=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return l.call(this)[e](!1)},uint64:function(){return l.call(this)[e](!0)},sint64:function(){return l.call(this).zzDecode()[e](!1)},fixed64:function(){return d.call(this)[e](!0)},sfixed64:function(){return d.call(this)[e](!1)}})}},48894:function(t,e,r){"use strict";t.exports=o;var n=r(89799);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(37102);function o(t){n.call(this,t)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o._configure()},30358:function(t){"use strict";t.exports={}},37753:function(t,e,r){"use strict";var n=e;n.Service=r(90964)},90964:function(t,e,r){"use strict";r(21703),t.exports=i;var n=r(37102);function i(t,e,r){if("function"!==typeof t)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,r,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(t,a,e,r,i,o);if(a.rpcImpl)try{return a.rpcImpl(e,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(t,r){if(t)return a.emit("error",t,e),s(t);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",r,e),s(null,r)}a.end(!0)}))}catch(u){return a.emit("error",u,e),void setTimeout((function(){s(u)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},46350:function(t,e,r){"use strict";t.exports=i;var n=r(37102);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var r=t>>>0,n=(t-r)/4294967296>>>0;return e&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(t){if("number"===typeof t)return i.fromNumber(t);if(n.isString(t)){if(!n.Long)return i.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===s?o:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},37102:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),r(21703);var n=e;function i(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)void 0!==t[n[i]]&&r||(t[n[i]]=e[n[i]]);return t}function o(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}n.asPromise=r(45186),n.base64=r(28673),n.EventEmitter=r(48825),n.float=r(62913),n.inquire=r(26332),n.utf8=r(19561),n.pool=r(91168),n.LongBits=r(46350),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"===typeof t||t instanceof String},n.isObject=function(t){return t&&"object"===typeof t},n.isset=n.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"===typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"===typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=i,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},67156:function(t,e,r){"use strict";t.exports=l;var n,i=r(37102),o=i.LongBits,s=i.base64,a=i.utf8;function u(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function c(){}function h(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var f=function(){return i.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l}};function d(t,e,r){e[r]=255&t}function p(t,e,r){while(t>127)e[r++]=127&t|128,t>>>=7;e[r]=t}function y(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,r){while(t.hi)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;while(t.lo>127)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function m(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}l.create=f(),l.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(l.alloc=i.pool(l.alloc,i.Array.prototype.subarray)),l.prototype._push=function(t,e,r){return this.tail=this.tail.next=new u(t,e,r),this.len+=e,this},y.prototype=Object.create(u.prototype),y.prototype.fn=p,l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new y((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this._push(g,10,o.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var e=o.from(t);return this._push(g,e.length(),e)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(g,e.length(),e)},l.prototype.bool=function(t){return this._push(d,1,t?1:0)},l.prototype.fixed32=function(t){return this._push(m,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var e=o.from(t);return this._push(m,4,e.lo)._push(m,4,e.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var b=i.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};l.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(d,1,0);if(i.isString(t)){var r=l.alloc(e=s.length(t));s.decode(t,r,0),t=r}return this.uint32(e)._push(b,e,t)},l.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(d,1,0)},l.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new u(c,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},l.prototype.finish=function(){var t=this.head.next,e=this.constructor.alloc(this.len),r=0;while(t)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},l._configure=function(t){n=t,l.create=f(),n._configure()}},18252:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118),t.exports=o;var n=r(67156);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(37102);function o(){n.call(this)}function s(t,e,r){t.length<40?i.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},o.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(s,e,t),this},o._configure()},82963:function(t,e,r){e.publicEncrypt=r(48936),e.privateDecrypt=r(95723),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}},96884:function(t,e,r){var n=r(65443),i=r(6779).Buffer;function o(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){var r,s=i.alloc(0),a=0;while(s.length<e)r=o(a++),s=i.concat([s,n("sha1").update(t).update(r).digest()]);return s.slice(0,e)}},36670:function(t,e,r){t=r.nmd(t),r(21703),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(77108).Buffer}catch(R){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function c(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=u(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8}this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,h=r;h<a;h+=n)u=c(t,h,h+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype.strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;i=0|t.words[p],o=0|e.words[d],s=i*o+l,h+=s/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,r=0!==o||s!==this.length-1?h[6-u.length]+u+r:u+r,i+=2,i>=26&&(i-=26,s--)}0!==o&&(r=o.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],d=f[t];r="";var p=this.clone();p.negative=0;while(!p.isZero()){var y=p.modn(d).toString(t);p=p.idivn(d),r=p.isZero()?y+r:h[c-y.length]+y+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)e=(0|r.words[s])-(0|n.words[s])+o,o=e>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)e=(0|r.words[s])+o,o=e>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,y=d>>>13,g=0|s[2],m=8191&g,b=g>>>13,w=0|s[3],v=8191&w,_=w>>>13,E=0|s[4],S=8191&E,A=E>>>13,I=0|s[5],T=8191&I,R=I>>>13,M=0|s[6],k=8191&M,C=M>>>13,O=0|s[7],P=8191&O,B=O>>>13,x=0|s[8],N=8191&x,D=x>>>13,L=0|s[9],U=8191&L,j=L>>>13,F=0|a[0],K=8191&F,$=F>>>13,q=0|a[1],H=8191&q,z=q>>>13,V=0|a[2],G=8191&V,W=V>>>13,Y=0|a[3],J=8191&Y,Z=Y>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(l,K),i=Math.imul(l,$),i=i+Math.imul(f,K)|0,o=Math.imul(f,$);var gt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,K),i=Math.imul(p,$),i=i+Math.imul(y,K)|0,o=Math.imul(y,$),n=n+Math.imul(l,H)|0,i=i+Math.imul(l,z)|0,i=i+Math.imul(f,H)|0,o=o+Math.imul(f,z)|0;var mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,K),i=Math.imul(m,$),i=i+Math.imul(b,K)|0,o=Math.imul(b,$),n=n+Math.imul(p,H)|0,i=i+Math.imul(p,z)|0,i=i+Math.imul(y,H)|0,o=o+Math.imul(y,z)|0,n=n+Math.imul(l,G)|0,i=i+Math.imul(l,W)|0,i=i+Math.imul(f,G)|0,o=o+Math.imul(f,W)|0;var bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(v,K),i=Math.imul(v,$),i=i+Math.imul(_,K)|0,o=Math.imul(_,$),n=n+Math.imul(m,H)|0,i=i+Math.imul(m,z)|0,i=i+Math.imul(b,H)|0,o=o+Math.imul(b,z)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(y,G)|0,o=o+Math.imul(y,W)|0,n=n+Math.imul(l,J)|0,i=i+Math.imul(l,Z)|0,i=i+Math.imul(f,J)|0,o=o+Math.imul(f,Z)|0;var wt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(S,K),i=Math.imul(S,$),i=i+Math.imul(A,K)|0,o=Math.imul(A,$),n=n+Math.imul(v,H)|0,i=i+Math.imul(v,z)|0,i=i+Math.imul(_,H)|0,o=o+Math.imul(_,z)|0,n=n+Math.imul(m,G)|0,i=i+Math.imul(m,W)|0,i=i+Math.imul(b,G)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(p,J)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,n=n+Math.imul(l,Q)|0,i=i+Math.imul(l,tt)|0,i=i+Math.imul(f,Q)|0,o=o+Math.imul(f,tt)|0;var vt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(T,K),i=Math.imul(T,$),i=i+Math.imul(R,K)|0,o=Math.imul(R,$),n=n+Math.imul(S,H)|0,i=i+Math.imul(S,z)|0,i=i+Math.imul(A,H)|0,o=o+Math.imul(A,z)|0,n=n+Math.imul(v,G)|0,i=i+Math.imul(v,W)|0,i=i+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,Z)|0,i=i+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,Q)|0,i=i+Math.imul(p,tt)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,n=n+Math.imul(l,rt)|0,i=i+Math.imul(l,nt)|0,i=i+Math.imul(f,rt)|0,o=o+Math.imul(f,nt)|0;var _t=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,K),i=Math.imul(k,$),i=i+Math.imul(C,K)|0,o=Math.imul(C,$),n=n+Math.imul(T,H)|0,i=i+Math.imul(T,z)|0,i=i+Math.imul(R,H)|0,o=o+Math.imul(R,z)|0,n=n+Math.imul(S,G)|0,i=i+Math.imul(S,W)|0,i=i+Math.imul(A,G)|0,o=o+Math.imul(A,W)|0,n=n+Math.imul(v,J)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(m,Q)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=i+Math.imul(p,nt)|0,i=i+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0,n=n+Math.imul(l,ot)|0,i=i+Math.imul(l,st)|0,i=i+Math.imul(f,ot)|0,o=o+Math.imul(f,st)|0;var Et=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(P,K),i=Math.imul(P,$),i=i+Math.imul(B,K)|0,o=Math.imul(B,$),n=n+Math.imul(k,H)|0,i=i+Math.imul(k,z)|0,i=i+Math.imul(C,H)|0,o=o+Math.imul(C,z)|0,n=n+Math.imul(T,G)|0,i=i+Math.imul(T,W)|0,i=i+Math.imul(R,G)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(S,J)|0,i=i+Math.imul(S,Z)|0,i=i+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(v,tt)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=i+Math.imul(p,st)|0,i=i+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,n=n+Math.imul(l,ut)|0,i=i+Math.imul(l,ct)|0,i=i+Math.imul(f,ut)|0,o=o+Math.imul(f,ct)|0;var St=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,K),i=Math.imul(N,$),i=i+Math.imul(D,K)|0,o=Math.imul(D,$),n=n+Math.imul(P,H)|0,i=i+Math.imul(P,z)|0,i=i+Math.imul(B,H)|0,o=o+Math.imul(B,z)|0,n=n+Math.imul(k,G)|0,i=i+Math.imul(k,W)|0,i=i+Math.imul(C,G)|0,o=o+Math.imul(C,W)|0,n=n+Math.imul(T,J)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(S,Q)|0,i=i+Math.imul(S,tt)|0,i=i+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(v,rt)|0,i=i+Math.imul(v,nt)|0,i=i+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=i+Math.imul(m,st)|0,i=i+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ut)|0,i=i+Math.imul(p,ct)|0,i=i+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,n=n+Math.imul(l,lt)|0,i=i+Math.imul(l,ft)|0,i=i+Math.imul(f,lt)|0,o=o+Math.imul(f,ft)|0;var At=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(U,K),i=Math.imul(U,$),i=i+Math.imul(j,K)|0,o=Math.imul(j,$),n=n+Math.imul(N,H)|0,i=i+Math.imul(N,z)|0,i=i+Math.imul(D,H)|0,o=o+Math.imul(D,z)|0,n=n+Math.imul(P,G)|0,i=i+Math.imul(P,W)|0,i=i+Math.imul(B,G)|0,o=o+Math.imul(B,W)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,Z)|0,i=i+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,n=n+Math.imul(T,Q)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,i=i+Math.imul(S,nt)|0,i=i+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(v,ot)|0,i=i+Math.imul(v,st)|0,i=i+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(m,ut)|0,i=i+Math.imul(m,ct)|0,i=i+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,lt)|0,i=i+Math.imul(p,ft)|0,i=i+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0,n=n+Math.imul(l,pt)|0,i=i+Math.imul(l,yt)|0,i=i+Math.imul(f,pt)|0,o=o+Math.imul(f,yt)|0;var It=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,H),i=Math.imul(U,z),i=i+Math.imul(j,H)|0,o=Math.imul(j,z),n=n+Math.imul(N,G)|0,i=i+Math.imul(N,W)|0,i=i+Math.imul(D,G)|0,o=o+Math.imul(D,W)|0,n=n+Math.imul(P,J)|0,i=i+Math.imul(P,Z)|0,i=i+Math.imul(B,J)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(k,Q)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=i+Math.imul(T,nt)|0,i=i+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(S,ot)|0,i=i+Math.imul(S,st)|0,i=i+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(v,ut)|0,i=i+Math.imul(v,ct)|0,i=i+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(m,lt)|0,i=i+Math.imul(m,ft)|0,i=i+Math.imul(b,lt)|0,o=o+Math.imul(b,ft)|0,n=n+Math.imul(p,pt)|0,i=i+Math.imul(p,yt)|0,i=i+Math.imul(y,pt)|0,o=o+Math.imul(y,yt)|0;var Tt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(U,G),i=Math.imul(U,W),i=i+Math.imul(j,G)|0,o=Math.imul(j,W),n=n+Math.imul(N,J)|0,i=i+Math.imul(N,Z)|0,i=i+Math.imul(D,J)|0,o=o+Math.imul(D,Z)|0,n=n+Math.imul(P,Q)|0,i=i+Math.imul(P,tt)|0,i=i+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=i+Math.imul(T,st)|0,i=i+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(S,ut)|0,i=i+Math.imul(S,ct)|0,i=i+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,n=n+Math.imul(v,lt)|0,i=i+Math.imul(v,ft)|0,i=i+Math.imul(_,lt)|0,o=o+Math.imul(_,ft)|0,n=n+Math.imul(m,pt)|0,i=i+Math.imul(m,yt)|0,i=i+Math.imul(b,pt)|0,o=o+Math.imul(b,yt)|0;var Rt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,J),i=Math.imul(U,Z),i=i+Math.imul(j,J)|0,o=Math.imul(j,Z),n=n+Math.imul(N,Q)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(P,rt)|0,i=i+Math.imul(P,nt)|0,i=i+Math.imul(B,rt)|0,o=o+Math.imul(B,nt)|0,n=n+Math.imul(k,ot)|0,i=i+Math.imul(k,st)|0,i=i+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,n=n+Math.imul(T,ut)|0,i=i+Math.imul(T,ct)|0,i=i+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,n=n+Math.imul(S,lt)|0,i=i+Math.imul(S,ft)|0,i=i+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0,n=n+Math.imul(v,pt)|0,i=i+Math.imul(v,yt)|0,i=i+Math.imul(_,pt)|0,o=o+Math.imul(_,yt)|0;var Mt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,Q),i=Math.imul(U,tt),i=i+Math.imul(j,Q)|0,o=Math.imul(j,tt),n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(P,ot)|0,i=i+Math.imul(P,st)|0,i=i+Math.imul(B,ot)|0,o=o+Math.imul(B,st)|0,n=n+Math.imul(k,ut)|0,i=i+Math.imul(k,ct)|0,i=i+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(T,lt)|0,i=i+Math.imul(T,ft)|0,i=i+Math.imul(R,lt)|0,o=o+Math.imul(R,ft)|0,n=n+Math.imul(S,pt)|0,i=i+Math.imul(S,yt)|0,i=i+Math.imul(A,pt)|0,o=o+Math.imul(A,yt)|0;var kt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,rt),i=Math.imul(U,nt),i=i+Math.imul(j,rt)|0,o=Math.imul(j,nt),n=n+Math.imul(N,ot)|0,i=i+Math.imul(N,st)|0,i=i+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,n=n+Math.imul(P,ut)|0,i=i+Math.imul(P,ct)|0,i=i+Math.imul(B,ut)|0,o=o+Math.imul(B,ct)|0,n=n+Math.imul(k,lt)|0,i=i+Math.imul(k,ft)|0,i=i+Math.imul(C,lt)|0,o=o+Math.imul(C,ft)|0,n=n+Math.imul(T,pt)|0,i=i+Math.imul(T,yt)|0,i=i+Math.imul(R,pt)|0,o=o+Math.imul(R,yt)|0;var Ct=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,ot),i=Math.imul(U,st),i=i+Math.imul(j,ot)|0,o=Math.imul(j,st),n=n+Math.imul(N,ut)|0,i=i+Math.imul(N,ct)|0,i=i+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,n=n+Math.imul(P,lt)|0,i=i+Math.imul(P,ft)|0,i=i+Math.imul(B,lt)|0,o=o+Math.imul(B,ft)|0,n=n+Math.imul(k,pt)|0,i=i+Math.imul(k,yt)|0,i=i+Math.imul(C,pt)|0,o=o+Math.imul(C,yt)|0;var Ot=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(U,ut),i=Math.imul(U,ct),i=i+Math.imul(j,ut)|0,o=Math.imul(j,ct),n=n+Math.imul(N,lt)|0,i=i+Math.imul(N,ft)|0,i=i+Math.imul(D,lt)|0,o=o+Math.imul(D,ft)|0,n=n+Math.imul(P,pt)|0,i=i+Math.imul(P,yt)|0,i=i+Math.imul(B,pt)|0,o=o+Math.imul(B,yt)|0;var Pt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,lt),i=Math.imul(U,ft),i=i+Math.imul(j,lt)|0,o=Math.imul(j,ft),n=n+Math.imul(N,pt)|0,i=i+Math.imul(N,yt)|0,i=i+Math.imul(D,pt)|0,o=o+Math.imul(D,yt)|0;var Bt=(c+n|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(U,pt),i=Math.imul(U,yt),i=i+Math.imul(j,pt)|0,o=Math.imul(j,yt);var xt=(c+n|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,u[0]=gt,u[1]=mt,u[2]=bt,u[3]=wt,u[4]=vt,u[5]=_t,u[6]=Et,u[7]=St,u[8]=At,u[9]=It,u[10]=Tt,u[11]=Rt,u[12]=Mt,u[13]=kt,u[14]=Ct,u[15]=Ot,u[16]=Pt,u[17]=Bt,u[18]=xt,0!==c&&(u[19]=c,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=0|t.words[h],f=0|e.words[c],d=l*f,p=67108863&d;s=s+(d/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,i+=s>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}function m(t,e,r){var n=new b;return n.mulp(t,e,r)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=p),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?y(this,t,e):n<63?p(this,t,e):n<1024?g(this,t,e):m(this,t,e),r},b.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},b.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},b.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},b.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=r[h+d],y=n[h+d],g=r[h+d+s],m=n[h+d+s],b=l*g-f*m;m=l*m+f*g,g=b,r[h+d]=p+g,n[h+d]=y+m,r[h+d+s]=p-g,n[h+d+s]=y-m,d!==a&&(b=u*l-c*f,f=u*f+c*l,l=b)}},b.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},b.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},b.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),l=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,h,l,n,i);for(var d=0;d<n;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=d(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=r;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var o=this.words[r];return!!(o&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+a,a=o>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)o=-(0|this.words[i])+a,a=o>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,s=0|i.words[i.length-1],a=this._countBits(s);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var u,c=n.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var h=0;h<u.length;h++)u.words[h]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,u&&(u.words[c]=1));for(var f=c-1;f>=0;f--){var d=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);d=Math.min(d/s|0,67108863),n._ishlnsubmul(i,d,f);while(0!==n.negative)d--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);u&&(u.words[f]=d)}return u&&u.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++c;var h=r.clone(),l=e.clone();while(!e.isZero()){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0){e.iushrn(f);while(f-- >0)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1)}for(var p=0,y=1;0===(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,s=new o(1),a=new o(0),u=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0){e.iushrn(c);while(c-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}for(var l=0,f=1;0===(r.words[0]&f)&&l<26;++l,f<<=1);if(l>0){r.iushrn(l);while(l-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return i=0===e.cmpn(1)?s:a,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new I(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(_,v),_.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,v),i(S,v),i(A,v),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return w[t]=e,e},I.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),s=0;while(!i.isZero()&&0===i.andln(1))s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();h=new o(2*h*h).toRed(this);while(0!==this.pow(h,c).cmp(u))h.redIAdd(u);var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;while(0!==d.cmp(a)){for(var y=d,g=0;0!==y.cmp(a);g++)y=y.redSqr();n(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=g}return f},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new o(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var s=n[0],a=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var h=e.words[i],l=c-1;l>=0;l--){var f=h>>l&1;s!==n[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,u++,(u===r||0===i&&0===l)&&(s=this.mul(s,n[a]),u=0,a=0)):u=0}c=26}return s},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},i(T,I),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)},95723:function(t,e,r){r(21703);var n=r(2616),i=r(96884),o=r(98479),s=r(36670),a=r(28593),u=r(65443),c=r(74466),h=r(6779).Buffer;function l(t,e){var r=t.modulus.byteLength(),n=u("sha1").update(h.alloc(0)).digest(),s=n.length;if(0!==e[0])throw new Error("decryption error");var a=e.slice(1,s+1),c=e.slice(s+1),l=o(a,i(c,s)),f=o(c,i(l,r-s-1));if(d(n,f.slice(0,s)))throw new Error("decryption error");var p=s;while(0===f[p])p++;if(1!==f[p++])throw new Error("decryption error");return f.slice(p)}function f(t,e,r){var n=e.slice(0,2),i=2,o=0;while(0!==e[i++])if(i>=e.length){o++;break}var s=e.slice(2,i-1);if(("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++,s.length<8&&o++,o)throw new Error("decryption error");return e.slice(i)}function d(t,e){t=h.from(t),e=h.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));var i=-1;while(++i<n)r+=t[i]^e[i];return r}t.exports=function(t,e,r){var i;i=t.padding?t.padding:r?1:4;var o,u=n(t),d=u.modulus.byteLength();if(e.length>d||new s(e).cmp(u.modulus)>=0)throw new Error("decryption error");o=r?c(new s(e),u):a(e,u);var p=h.alloc(d-o.length);if(o=h.concat([p,o],d),4===i)return l(u,o);if(1===i)return f(u,o,r);if(3===i)return o;throw new Error("unknown padding")}},48936:function(t,e,r){r(21703);var n=r(2616),i=r(67602),o=r(65443),s=r(96884),a=r(98479),u=r(36670),c=r(74466),h=r(28593),l=r(6779).Buffer;function f(t,e){var r=t.modulus.byteLength(),n=e.length,c=o("sha1").update(l.alloc(0)).digest(),h=c.length,f=2*h;if(n>r-f-2)throw new Error("message too long");var d=l.alloc(r-n-f-2),p=r-h-1,y=i(h),g=a(l.concat([c,d,l.alloc(1,1),e],p),s(y,p)),m=a(y,s(g,h));return new u(l.concat([l.alloc(1),m,g],r))}function d(t,e,r){var n,i=e.length,o=t.modulus.byteLength();if(i>o-11)throw new Error("message too long");return n=r?l.alloc(o-i-3,255):p(o-i-3),new u(l.concat([l.from([0,r?1:2]),n,l.alloc(1),e],o))}function p(t){var e,r=l.allocUnsafe(t),n=0,o=i(2*t),s=0;while(n<t)s===o.length&&(o=i(2*t),s=0),e=o[s++],e&&(r[n++]=e);return r}t.exports=function(t,e,r){var i;i=t.padding?t.padding:r?1:4;var o,s=n(t);if(4===i)o=f(s,e);else if(1===i)o=d(s,e,r);else{if(3!==i)throw new Error("unknown padding");if(o=new u(e),o.cmp(s.modulus)>=0)throw new Error("data too long for modulus")}return r?h(o,s):c(o,s)}},74466:function(t,e,r){var n=r(36670),i=r(6779).Buffer;function o(t,e){return i.from(t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed().toArray())}t.exports=o},98479:function(t){t.exports=function(t,e){var r=t.length,n=-1;while(++n<r)t[n]^=e[n];return t}},67602:function(t,e,r){"use strict";var n=r(96027);r(21703);var i=65536,o=4294967295;function s(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var a=r(6779).Buffer,u=r.g.crypto||r.g.msCrypto;function c(t,e){if(t>o)throw new RangeError("requested too many random bytes");var r=a.allocUnsafe(t);if(t>0)if(t>i)for(var s=0;s<t;s+=i)u.getRandomValues(r.slice(s,s+i));else u.getRandomValues(r);return"function"===typeof e?n.nextTick((function(){e(null,r)})):r}u&&u.getRandomValues?t.exports=c:t.exports=s},21911:function(t,e,r){"use strict";var n=r(96027);function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}r(21703),r(48675),r(3462),r(37380),r(1118);var o=r(6779),s=r(67602),a=o.Buffer,u=o.kMaxLength,c=r.g.crypto||r.g.msCrypto,h=Math.pow(2,32)-1;function l(t,e){if("number"!==typeof t||t!==t)throw new TypeError("offset must be a number");if(t>h||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function f(t,e,r){if("number"!==typeof t||t!==t)throw new TypeError("size must be a number");if(t>h||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>u)throw new RangeError("buffer too small")}function d(t,e,n,i){if(!a.isBuffer(t)&&!(t instanceof r.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"===typeof e)i=e,e=0,n=t.length;else if("function"===typeof n)i=n,n=t.length-e;else if("function"!==typeof i)throw new TypeError('"cb" argument must be a function');return l(e,t.length),f(n,e,t.length),p(t,e,n,i)}function p(t,e,r,i){if(n.browser){var o=t.buffer,a=new Uint8Array(o,e,r);return c.getRandomValues(a),i?void n.nextTick((function(){i(null,t)})):t}if(!i){var u=s(r);return u.copy(t,e),t}s(r,(function(r,n){if(r)return i(r);n.copy(t,e),i(null,t)}))}function y(t,e,n){if("undefined"===typeof e&&(e=0),!a.isBuffer(t)&&!(t instanceof r.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(e,t.length),void 0===n&&(n=t.length-e),f(n,e,t.length),p(t,e,n)}c&&c.getRandomValues||!n.browser?(e.randomFill=d,e.randomFillSync=y):(e.randomFill=i,e.randomFillSync=i)},55314:function(t,e,r){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}r(21703);var i={};function o(t,e,r){function o(t,r,n){return"string"===typeof e?e:e(t,r,n)}r||(r=Error);var s=function(t){function e(e,r,n){return t.call(this,o(e,r,n))||this}return n(e,t),e}(r);s.prototype.name=r.name,s.prototype.code=t,i[t]=s}function s(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function a(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function u(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function c(t,e,r){return"number"!==typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}o("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i;if("string"===typeof e&&a(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be",u(t," argument"))i="The ".concat(t," ").concat(n," ").concat(s(e,"type"));else{var o=c(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(o," ").concat(n," ").concat(s(e,"type"))}return i+=". Received type ".concat(typeof r),i}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=i},31418:function(t,e,r){"use strict";var n=r(96027),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var o=r(50187),s=r(69621);r(81923)(h,o);for(var a=i(s.prototype),u=0;u<a.length;u++){var c=a[u];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);o.call(this,t),s.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},80214:function(t,e,r){"use strict";t.exports=i;var n=r(87825);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(81923)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},50187:function(t,e,r){"use strict";var n,i=r(96027);r(48675),r(3462),r(37380),r(1118),t.exports=k,k.ReadableState=M;r(43793).EventEmitter;var o=function(t,e){return t.listeners(e).length},s=r(13066),a=r(15361).Buffer,u=r.g.Uint8Array||function(){};function c(t){return a.from(t)}function h(t){return a.isBuffer(t)||t instanceof u}var l,f=r(94616);l=f&&f.debuglog?f.debuglog("stream"):function(){};var d,p,y,g=r(98947),m=r(47508),b=r(21938),w=b.getHighWaterMark,v=r(55314).q,_=v.ERR_INVALID_ARG_TYPE,E=v.ERR_STREAM_PUSH_AFTER_EOF,S=v.ERR_METHOD_NOT_IMPLEMENTED,A=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(81923)(k,s);var I=m.errorOrDestroy,T=["error","close","destroy","pause","resume"];function R(t,e,r){if("function"===typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function M(t,e,i){n=n||r(31418),t=t||{},"boolean"!==typeof i&&(i=e instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=w(this,t,"readableHighWaterMark",i),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(25605).s),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function k(t){if(n=n||r(31418),!(this instanceof k))return new k(t);var e=this instanceof n;this._readableState=new M(t,this,e),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function C(t,e,r,n,i){l("readableAddChunk",e);var o,s=t._readableState;if(null===e)s.reading=!1,D(t,s);else if(i||(o=P(s,e)),o)I(t,o);else if(s.objectMode||e&&e.length>0)if("string"===typeof e||s.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=c(e)),n)s.endEmitted?I(t,new A):O(t,s,e,!0);else if(s.ended)I(t,new E);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?O(t,s,e,!1):j(t,s)):O(t,s,e,!1)}else n||(s.reading=!1,j(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function O(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&L(t)),j(t,e)}function P(t,e){var r;return h(e)||"string"===typeof e||void 0===e||t.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],e)),r}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),k.prototype.destroy=m.destroy,k.prototype._undestroy=m.undestroy,k.prototype._destroy=function(t,e){e(t)},k.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof t&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=a.from(t,e),e=""),r=!0),C(this,t,e,!1,r)},k.prototype.unshift=function(t){return C(this,t,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(t){d||(d=r(25605).s);var e=new d(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head,i="";while(null!==n)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var B=1073741824;function x(t){return t>=B?t=B:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function N(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=x(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function D(t,e){if(l("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?L(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,U(t)))}}function L(t){var e=t._readableState;l("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(l("emitReadable",e.flowing),e.emittedReadable=!0,i.nextTick(U,t))}function U(t){var e=t._readableState;l("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,V(t)}function j(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(F,t,e))}function F(t,e){while(!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length)){var r=e.length;if(l("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function K(t){return function(){var e=t._readableState;l("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,V(t))}}function $(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function q(t){l("readable nexttick read 0"),t.read(0)}function H(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(z,t,e))}function z(t,e){l("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),V(t),e.flowing&&!e.reading&&t.read(0)}function V(t){var e=t._readableState;l("flow",e.flowing);while(e.flowing&&null!==t.read());}function G(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function W(t){var e=t._readableState;l("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,i.nextTick(Y,e,t))}function Y(t,e){if(l("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function J(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}k.prototype.read=function(t){l("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return l("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?W(this):L(this),null;if(t=N(t,e),0===t&&e.ended)return 0===e.length&&W(this),null;var n,i=e.needReadable;return l("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,l("length less than watermark",i)),e.ended||e.reading?(i=!1,l("reading or ended",i)):i&&(l("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=N(r,e))),n=t>0?G(t,e):null,null===n?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&W(this)),null!==n&&this.emit("data",n),n},k.prototype._read=function(t){I(this,new S("_read()"))},k.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,l("pipe count=%d opts=%j",n.pipesCount,e);var s=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr,a=s?c:b;function u(t,e){l("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,d())}function c(){l("onend"),t.end()}n.endEmitted?i.nextTick(a):r.once("end",a),t.on("unpipe",u);var h=K(r);t.on("drain",h);var f=!1;function d(){l("cleanup"),t.removeListener("close",g),t.removeListener("finish",m),t.removeListener("drain",h),t.removeListener("error",y),t.removeListener("unpipe",u),r.removeListener("end",c),r.removeListener("end",b),r.removeListener("data",p),f=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||h()}function p(e){l("ondata");var i=t.write(e);l("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==J(n.pipes,t))&&!f&&(l("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(e){l("onerror",e),b(),t.removeListener("error",y),0===o(t,"error")&&I(t,e)}function g(){t.removeListener("finish",m),b()}function m(){l("onfinish"),t.removeListener("close",g),b()}function b(){l("unpipe"),r.unpipe(t)}return r.on("data",p),R(t,"error",y),t.once("close",g),t.once("finish",m),t.emit("pipe",r),n.flowing||(l("pipe resume"),r.resume()),t},k.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=J(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},k.prototype.on=function(t,e){var r=s.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,l("on readable",n.length,n.reading),n.length?L(this):n.reading||i.nextTick(q,this))),r},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(t,e){var r=s.prototype.removeListener.call(this,t,e);return"readable"===t&&i.nextTick($,this),r},k.prototype.removeAllListeners=function(t){var e=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||i.nextTick($,this),e},k.prototype.resume=function(){var t=this._readableState;return t.flowing||(l("resume"),t.flowing=!t.readableListening,H(this,t)),t.paused=!1,this},k.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){if(l("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)){var o=e.push(i);o||(n=!0,t.pause())}})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<T.length;o++)t.on(T[o],this.emit.bind(this,T[o]));return this._read=function(e){l("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"===typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=r(9637)),p(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),k._fromList=G,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(k.from=function(t,e){return void 0===y&&(y=r(76086)),y(k,t,e)})},87825:function(t,e,r){"use strict";t.exports=h;var n=r(55314).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(31418);function c(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function h(t){if(!(this instanceof h))return new h(t);u.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",l)}function l(){var t=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new s;return t.push(null)}r(81923)(h,u),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,r){r(new i("_transform()"))},h.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},69621:function(t,e,r){"use strict";var n,i=r(96027);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){z(e,t)}}r(48675),r(3462),r(37380),r(1118),t.exports=M,M.WritableState=R;var s={deprecate:r(74633)},a=r(13066),u=r(15361).Buffer,c=r.g.Uint8Array||function(){};function h(t){return u.from(t)}function l(t){return u.isBuffer(t)||t instanceof c}var f,d=r(47508),p=r(21938),y=p.getHighWaterMark,g=r(55314).q,m=g.ERR_INVALID_ARG_TYPE,b=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_MULTIPLE_CALLBACK,v=g.ERR_STREAM_CANNOT_PIPE,_=g.ERR_STREAM_DESTROYED,E=g.ERR_STREAM_NULL_VALUES,S=g.ERR_STREAM_WRITE_AFTER_END,A=g.ERR_UNKNOWN_ENCODING,I=d.errorOrDestroy;function T(){}function R(t,e,i){n=n||r(31418),t=t||{},"boolean"!==typeof i&&(i=e instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=y(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){D(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function M(t){n=n||r(31418);var e=this instanceof n;if(!e&&!f.call(M,this))return new M(t);this._writableState=new R(t,this,e),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),a.call(this)}function k(t,e){var r=new S;I(t,r),i.nextTick(e,r)}function C(t,e,r,n){var o;return null===r?o=new E:"string"===typeof r||e.objectMode||(o=new m("chunk",["string","Buffer"],r)),!o||(I(t,o),i.nextTick(n,o),!1)}function O(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=u.from(e,r)),e}function P(t,e,r,n,i,o){if(!r){var s=O(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else B(t,e,!1,a,n,i,o);return u}function B(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function x(t,e,r,n,o){--e.pendingcb,r?(i.nextTick(o,n),i.nextTick(q,t,e),t._writableState.errorEmitted=!0,I(t,n)):(o(n),t._writableState.errorEmitted=!0,I(t,n),q(t,e))}function N(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function D(t,e){var r=t._writableState,n=r.sync,o=r.writecb;if("function"!==typeof o)throw new w;if(N(r),e)x(t,r,n,e,o);else{var s=F(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||j(t,r),n?i.nextTick(L,t,r,s,o):L(t,r,s,o)}}function L(t,e,r,n){r||U(t,e),e.pendingcb--,n(),q(t,e)}function U(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function j(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;var a=0,u=!0;while(r)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,B(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{while(r){var c=r.chunk,h=r.encoding,l=r.callback,f=e.objectMode?1:c.length;if(B(t,e,!1,f,c,h,l),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function F(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function K(t,e){t._final((function(r){e.pendingcb--,r&&I(t,r),e.prefinished=!0,t.emit("prefinish"),q(t,e)}))}function $(t,e){e.prefinished||e.finalCalled||("function"!==typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,i.nextTick(K,t,e)))}function q(t,e){var r=F(e);if(r&&($(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function H(t,e,r){e.ending=!0,q(t,e),r&&(e.finished?i.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function z(t,e,r){var n=t.entry;t.entry=null;while(n){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}r(81923)(M,a),R.prototype.getBuffer=function(){var t=this.bufferedRequest,e=[];while(t)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(R.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(t){return!!f.call(this,t)||this===M&&(t&&t._writableState instanceof R)}})):f=function(t){return t instanceof this},M.prototype.pipe=function(){I(this,new v)},M.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&l(t);return o&&!u.isBuffer(t)&&(t=h(t)),"function"===typeof e&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!==typeof r&&(r=T),n.ending?k(this,r):(o||C(this,n,t,r))&&(n.pendingcb++,i=P(this,n,o,t,e,r)),i},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||j(this,t))},M.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new A(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(t,e,r){r(new b("_write()"))},M.prototype._writev=null,M.prototype.end=function(t,e,r){var n=this._writableState;return"function"===typeof t?(r=t,t=null,e=null):"function"===typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||H(this,n,r),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),M.prototype.destroy=d.destroy,M.prototype._undestroy=d.undestroy,M.prototype._destroy=function(t,e){e(t)}},9637:function(t,e,r){"use strict";var n,i=r(96027);function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=r(83210),a=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),h=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function p(t,e){return{value:t,done:e}}function y(t){var e=t[a];if(null!==e){var r=t[d].read();null!==r&&(t[l]=null,t[a]=null,t[u]=null,e(p(r,!1)))}}function g(t){i.nextTick(y,t)}function m(t,e){return function(r,n){t.then((function(){e[h]?r(p(void 0,!0)):e[f](r,n)}),n)}}var b=Object.getPrototypeOf((function(){})),w=Object.setPrototypeOf((n={get stream(){return this[d]},next:function(){var t=this,e=this[c];if(null!==e)return Promise.reject(e);if(this[h])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(e,r){i.nextTick((function(){t[c]?r(t[c]):e(p(void 0,!0))}))}));var r,n=this[l];if(n)r=new Promise(m(n,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[f])}return this[l]=r,r}},o(n,Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var t=this;return new Promise((function(e,r){t[d].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),n),b),v=function(t){var e,r=Object.create(w,(e={},o(e,d,{value:t,writable:!0}),o(e,a,{value:null,writable:!0}),o(e,u,{value:null,writable:!0}),o(e,c,{value:null,writable:!0}),o(e,h,{value:t._readableState.endEmitted,writable:!0}),o(e,f,{value:function(t,e){var n=r[d].read();n?(r[l]=null,r[a]=null,r[u]=null,t(p(n,!1))):(r[a]=t,r[u]=e)},writable:!0}),e));return r[l]=null,s(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[u];return null!==e&&(r[l]=null,r[a]=null,r[u]=null,e(t)),void(r[c]=t)}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[u]=null,n(p(void 0,!0))),r[h]=!0})),t.on("readable",g.bind(null,r)),r};t.exports=v},98947:function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r(21703);var c=r(15361),h=c.Buffer,l=r(52361),f=l.inspect,d=f&&f.custom||"inspect";function p(t,e,r){h.prototype.copy.call(t,e,r)}t.exports=function(){function t(){s(this,t),this.head=null,this.tail=null,this.length=0}return u(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";var e=this.head,r=""+e.data;while(e=e.next)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return h.alloc(0);var e=h.allocUnsafe(t>>>0),r=this.head,n=0;while(r)p(r.data,e,n),n+=r.data.length,r=r.next;return e}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;t-=n.length;while(e=e.next){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),t-=o,0===t){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=h.allocUnsafe(t),r=this.head,n=1;r.data.copy(e),t-=r.data.length;while(r=r.next){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),t-=o,0===t){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:d,value:function(t,e){return f(this,i({},e,{depth:0,customInspect:!1}))}}]),t}()},47508:function(t,e,r){"use strict";var n=r(96027);function i(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return i||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(u,this,t)):n.nextTick(u,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?r._writableState?r._writableState.errorEmitted?n.nextTick(s,r):(r._writableState.errorEmitted=!0,n.nextTick(o,r,t)):n.nextTick(o,r,t):e?(n.nextTick(s,r),e(t)):n.nextTick(s,r)})),this)}function o(t,e){u(t,e),s(t)}function s(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(t,e){t.emit("error",e)}function c(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}t.exports={destroy:i,undestroy:a,errorOrDestroy:c}},83210:function(t,e,r){"use strict";var n=r(55314).q.ERR_STREAM_PREMATURE_CLOSE;function i(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function o(){}function s(t){return t.setHeader&&"function"===typeof t.abort}function a(t,e,r){if("function"===typeof e)return a(t,null,e);e||(e={}),r=i(r||o);var u=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,h=function(){t.writable||f()},l=t._writableState&&t._writableState.finished,f=function(){c=!1,l=!0,u||r.call(t)},d=t._readableState&&t._readableState.endEmitted,p=function(){u=!1,d=!0,c||r.call(t)},y=function(e){r.call(t,e)},g=function(){var e;return u&&!d?(t._readableState&&t._readableState.ended||(e=new n),r.call(t,e)):c&&!l?(t._writableState&&t._writableState.ended||(e=new n),r.call(t,e)):void 0},m=function(){t.req.on("finish",f)};return s(t)?(t.on("complete",f),t.on("abort",g),t.req?m():t.on("request",m)):c&&!t._writableState&&(t.on("end",h),t.on("close",h)),t.on("end",p),t.on("finish",f),!1!==e.error&&t.on("error",y),t.on("close",g),function(){t.removeListener("complete",f),t.removeListener("abort",g),t.removeListener("request",m),t.req&&t.req.removeListener("finish",f),t.removeListener("end",h),t.removeListener("close",h),t.removeListener("finish",f),t.removeListener("end",p),t.removeListener("error",y),t.removeListener("close",g)}}t.exports=a},76086:function(t,e,r){r(21703),t.exports=function(){throw new Error("Readable.from is not available in the browser")}},26708:function(t,e,r){"use strict";var n;function i(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var o=r(55314).q,s=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function u(t){if(t)throw t}function c(t){return t.setHeader&&"function"===typeof t.abort}function h(t,e,o,s){s=i(s);var u=!1;t.on("close",(function(){u=!0})),void 0===n&&(n=r(83210)),n(t,{readable:e,writable:o},(function(t){if(t)return s(t);u=!0,s()}));var h=!1;return function(e){if(!u&&!h)return h=!0,c(t)?t.abort():"function"===typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}function l(t){t()}function f(t,e){return t.pipe(e)}function d(t){return t.length?"function"!==typeof t[t.length-1]?u:t.pop():u}function p(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=d(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new s("streams");var o=e.map((function(t,r){var s=r<e.length-1,a=r>0;return h(t,s,a,(function(t){n||(n=t),t&&o.forEach(l),s||(o.forEach(l),i(n))}))}));return e.reduce(f)}t.exports=p},21938:function(t,e,r){"use strict";var n=r(55314).q.ERR_INVALID_OPT_VALUE;function i(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}function o(t,e,r,o){var s=i(e,o,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0){var a=o?r:"highWaterMark";throw new n(a,s)}return Math.floor(s)}return t.objectMode?16:16384}t.exports={getHighWaterMark:o}},13066:function(t,e,r){t.exports=r(43793).EventEmitter},98141:function(t,e,r){e=t.exports=r(50187),e.Stream=e,e.Readable=e,e.Writable=r(69621),e.Duplex=r(31418),e.Transform=r(87825),e.PassThrough=r(80214),e.finished=r(83210),e.pipeline=r(26708)},43061:function(t,e,r){"use strict";r(21703),t.exports=a;var n=r(47901),i=a.prototype,o=new Date%1e9;function s(){return(1e9*Math.random()>>>0)+o++}function a(t){t=t||{},this.id=t.id||s(),this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,r,n=this.items.length;n--;)e=this.items[n],r=new Date(e.expires)-new Date,this._lookup[e.key]=e,r>0?this.expire(e.key,r):r<=0&&this.delete(e.key)}i.has=function(t){return t in this._lookup},i.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value},i.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null},i.set=function(t,e,r){var n=this._lookup[t],i=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(t,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},i.delete=function(t){var e=this._lookup[t];return!!e&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this)},i.expire=function(t,e){var r=e||0,i=this._lookup[t];if(!i)return this;if("string"===typeof r&&(r=n(e)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this},i.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this},i.toJSON=function(){for(var t,e=new Array(this.items.length),r=e.length;r--;)t=this.items[r],e[r]={key:t.key,meta:t.meta,value:t.value,expires:t.expires,refresh:t.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:e}}},3057:function(t,e,r){"use strict";r(21703);const n=r(39723);class i{constructor(t,e,r){const i=this;this._started=n(),this._rescheduled=0,this._scheduled=e,this._args=r,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,t.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,e)}reschedule(t){t||(t=this._scheduled);const e=n();e+t-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(t)):this._triggered?this._schedule(t):(this._started=e,this._rescheduled=t)}_schedule(t){this._triggered=!1,this._started=n(),this._rescheduled=0,this._scheduled=t,this._timer=setTimeout(this._timerWrapper,t)}clear(){clearTimeout(this._timer)}}function o(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new i(arguments[0],arguments[1],t)}t.exports=o},39723:function(t){"use strict";t.exports=function(){return Date.now()}},95711:function(t,e,r){t.exports=r(67334)},67334:function(t,e,r){r(21703);var n=r(48463);e.operation=function(t){var r=e.timeouts(t);return new n(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort((function(t,e){return t-e})),n},e.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout),n},e.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],t)"function"===typeof t[i]&&n.push(i);for(var o=0;o<n.length;o++){var s=n[o],a=t[s];t[s]=function(n){var i=e.operation(r),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(t){i.retry(t)||(t&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){n.apply(t,o)}))}.bind(t,a),t[s].options=r}}},48463:function(t,e,r){var n=r(15941);function i(t,e){"boolean"===typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}r(21703),t.exports=i,i.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},i.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},i.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r),this._options.unref&&this._timer.unref(),!0},i.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},i.prototype.try=function(t){n.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},i.prototype.start=function(t){n.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},i.prototype.start=i.prototype.try,i.prototype.errors=function(){return this._errors},i.prototype.attempts=function(){return this._attempts},i.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,s=(t[o]||0)+1;t[o]=s,s>=r&&(e=i,r=s)}return e}},3128:function(t,e,r){"use strict";var n=r(15361).Buffer,i=r(81923),o=r(10761),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],l=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function y(t,e,r,n,i,o,s,a){return p(t+(e^r^n)+o+s|0,a)+i|0}function g(t,e,r,n,i,o,s,a){return p(t+(e&r|~e&n)+o+s|0,a)+i|0}function m(t,e,r,n,i,o,s,a){return p(t+((e|~r)^n)+o+s|0,a)+i|0}function b(t,e,r,n,i,o,s,a){return p(t+(e&n|r&~n)+o+s|0,a)+i|0}function w(t,e,r,n,i,o,s,a){return p(t+(e^(r|~n))+o+s|0,a)+i|0}i(d,o),d.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,d=0|this._e,v=0|this._a,_=0|this._b,E=0|this._c,S=0|this._d,A=0|this._e,I=0;I<80;I+=1){var T,R;I<16?(T=y(r,n,i,o,d,t[a[I]],l[0],c[I]),R=w(v,_,E,S,A,t[u[I]],f[0],h[I])):I<32?(T=g(r,n,i,o,d,t[a[I]],l[1],c[I]),R=b(v,_,E,S,A,t[u[I]],f[1],h[I])):I<48?(T=m(r,n,i,o,d,t[a[I]],l[2],c[I]),R=m(v,_,E,S,A,t[u[I]],f[2],h[I])):I<64?(T=b(r,n,i,o,d,t[a[I]],l[3],c[I]),R=g(v,_,E,S,A,t[u[I]],f[3],h[I])):(T=w(r,n,i,o,d,t[a[I]],l[4],c[I]),R=y(v,_,E,S,A,t[u[I]],f[4],h[I])),r=d,d=o,o=p(i,10),i=n,n=T,v=A,A=S,S=p(E,10),E=_,_=R}var M=this._b+i+S|0;this._b=this._c+o+A|0,this._c=this._d+d+v|0,this._d=this._e+r+_|0,this._e=this._a+n+E|0,this._a=M},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.alloc?n.alloc(20):new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=d},6779:function(t,e,r){r(21703);var n=r(15361),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},85330:function(t,e,r){"use strict";var n=r(96027);r(48675),r(3462),r(37380),r(1118),r(21703);var i,o=r(15361),s=o.Buffer,a={};for(i in o)o.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(a[i]=o[i]);var u=a.Buffer={};for(i in s)s.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(u[i]=s[i]);if(a.Buffer.prototype=s.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(t,e,r){if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&"undefined"===typeof t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return s(t,e,r)}),u.alloc||(u.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=s(t);return e&&0!==e.length?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!a.kStringMaxLength)try{a.kStringMaxLength=n.binding("buffer").kStringMaxLength}catch(c){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a},74840:function(t,e,r){"use strict";r(21703);var n=r(17339),i=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,s=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u=/[\. ]+$/;function c(t,e){if("string"!==typeof t)throw new Error("Input must be string");var r=t.replace(i,e).replace(o,e).replace(s,e).replace(a,e).replace(u,e);return n(r,255)}t.exports=function(t,e){var r=e&&e.replacement||"",n=c(t,r);return""===r?n:c(n,"")}},12407:function(t){"use strict";const e=new Map,r=()=>`${Date.now()}:${Math.floor(1e6*Math.random())}`;async function n(t,r,n){while(e.get(n)){try{await t()}catch(i){setTimeout((()=>{throw i}),1);break}if(!e.get(n))break;await new Promise((t=>{const i=setTimeout(t,r);e.set(n,i)}))}}function i(t,i,o){o=o||i;const s=r(),a=setTimeout((()=>{n(t,i,s)}),o);return e.set(s,a),s}function o(t){const r=e.get(t);r&&(clearTimeout(r),e.delete(t))}t.exports={setDelayedInterval:i,clearDelayedInterval:o}},37833:function(t,e,r){r(21703);var n=r(6779).Buffer;function i(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"===typeof t&&(e=e||"utf8",t=n.from(t,e));for(var r=this._block,i=this._blockSize,o=t.length,s=this._len,a=0;a<o;){for(var u=s%i,c=Math.min(o-a,i-u),h=0;h<c;h++)r[u+h]=t[a+h];s+=c,a+=c,s%i===0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},61720:function(t,e,r){r(21703);var n=t.exports=function(t){t=t.toLowerCase();var e=n[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};n.sha=r(96664),n.sha1=r(18272),n.sha224=r(52935),n.sha256=r(872),n.sha384=r(6461),n.sha512=r(82522)},96664:function(t,e,r){var n=r(81923),i=r(37833),o=r(6779).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(t){return t<<5|t>>>27}function h(t){return t<<30|t>>>2}function l(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,u=0;u<16;++u)e[u]=t.readInt32BE(4*u);for(;u<80;++u)e[u]=e[u-3]^e[u-8]^e[u-14]^e[u-16];for(var f=0;f<80;++f){var d=~~(f/20),p=c(r)+l(d,n,i,o)+a+e[f]+s[d]|0;a=o,o=i,i=h(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},18272:function(t,e,r){var n=r(81923),i=r(37833),o=r(6779).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(t){return t<<1|t>>>31}function h(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function f(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,u=0;u<16;++u)e[u]=t.readInt32BE(4*u);for(;u<80;++u)e[u]=c(e[u-3]^e[u-8]^e[u-14]^e[u-16]);for(var d=0;d<80;++d){var p=~~(d/20),y=h(r)+f(p,n,i,o)+a+e[d]+s[p]|0;a=o,o=i,i=l(n),n=r,r=y}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},52935:function(t,e,r){var n=r(81923),i=r(872),o=r(37833),s=r(6779).Buffer,a=new Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}n(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=s.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},872:function(t,e,r){var n=r(81923),i=r(37833),o=r(6779).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function u(){this.init(),this._w=a,i.call(this,64,56)}function c(t,e,r){return r^t&(e^r)}function h(t,e,r){return t&e|r&(t|e)}function l(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function d(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function p(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}n(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,u=0|this._f,y=0|this._g,g=0|this._h,m=0;m<16;++m)e[m]=t.readInt32BE(4*m);for(;m<64;++m)e[m]=p(e[m-2])+e[m-7]+d(e[m-15])+e[m-16]|0;for(var b=0;b<64;++b){var w=g+f(a)+c(a,u,y)+s[b]+e[b]|0,v=l(r)+h(r,n,i)|0;g=y,y=u,u=a,a=o+w|0,o=i,i=n,n=r,r=w+v|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0,this._f=u+this._f|0,this._g=y+this._g|0,this._h=g+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},6461:function(t,e,r){var n=r(81923),i=r(82522),o=r(37833),s=r(6779).Buffer,a=new Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}n(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=s.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},82522:function(t,e,r){var n=r(81923),i=r(37833),o=r(6779).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function u(){this.init(),this._w=a,i.call(this,128,112)}function c(t,e,r){return r^t&(e^r)}function h(t,e,r){return t&e|r&(t|e)}function l(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function y(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function m(t,e){return t>>>0<e>>>0?1:0}n(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,u=0|this._fh,b=0|this._gh,w=0|this._hh,v=0|this._al,_=0|this._bl,E=0|this._cl,S=0|this._dl,A=0|this._el,I=0|this._fl,T=0|this._gl,R=0|this._hl,M=0;M<32;M+=2)e[M]=t.readInt32BE(4*M),e[M+1]=t.readInt32BE(4*M+4);for(;M<160;M+=2){var k=e[M-30],C=e[M-30+1],O=d(k,C),P=p(C,k);k=e[M-4],C=e[M-4+1];var B=y(k,C),x=g(C,k),N=e[M-14],D=e[M-14+1],L=e[M-32],U=e[M-32+1],j=P+D|0,F=O+N+m(j,P)|0;j=j+x|0,F=F+B+m(j,x)|0,j=j+U|0,F=F+L+m(j,U)|0,e[M]=F,e[M+1]=j}for(var K=0;K<160;K+=2){F=e[K],j=e[K+1];var $=h(r,n,i),q=h(v,_,E),H=l(r,v),z=l(v,r),V=f(a,A),G=f(A,a),W=s[K],Y=s[K+1],J=c(a,u,b),Z=c(A,I,T),X=R+G|0,Q=w+V+m(X,R)|0;X=X+Z|0,Q=Q+J+m(X,Z)|0,X=X+Y|0,Q=Q+W+m(X,Y)|0,X=X+j|0,Q=Q+F+m(X,j)|0;var tt=z+q|0,et=H+$+m(tt,z)|0;w=b,R=T,b=u,T=I,u=a,I=A,A=S+X|0,a=o+Q+m(A,S)|0,o=i,S=E,i=n,E=_,n=r,_=v,v=X+tt|0,r=Q+et+m(v,X)|0}this._al=this._al+v|0,this._bl=this._bl+_|0,this._cl=this._cl+E|0,this._dl=this._dl+S|0,this._el=this._el+A|0,this._fl=this._fl+I|0,this._gl=this._gl+T|0,this._hl=this._hl+R|0,this._ah=this._ah+r+m(this._al,v)|0,this._bh=this._bh+n+m(this._bl,_)|0,this._ch=this._ch+i+m(this._cl,E)|0,this._dh=this._dh+o+m(this._dl,S)|0,this._eh=this._eh+a+m(this._el,A)|0,this._fh=this._fh+u+m(this._fl,I)|0,this._gh=this._gh+b+m(this._gl,T)|0,this._hh=this._hh+w+m(this._hl,R)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},23818:function(t,e,r){var n=r(96027);function i(){var t=Array.prototype.slice.call(arguments),e=t.shift()||[],r=t.pop();if("function"!==typeof r)throw new Error("No callback provided to asyncMap");if(!e)return r(null,[]);Array.isArray(e)||(e=[e]);var i=t.length,o=[],s=null,a=e.length,u=a*i;if(!u)return r(null,[]);function c(h){h&&!s&&(s=h);for(var l=arguments.length,f=1;f<l;f++)void 0!==arguments[f]&&(o[f-1]=(o[f-1]||[]).concat(arguments[f]));if(e.length>a){var d=e.slice(a);u+=(e.length-a)*i,a=e.length,n.nextTick((function(){d.forEach((function(e){t.forEach((function(t){t(e,c)}))}))}))}0===--u&&r.apply(null,[s].concat(o))}e.forEach((function(e){t.forEach((function(t){t(e,c)}))}))}r(21703),t.exports=i},6168:function(t){function e(){var t,e=Array.prototype.slice.call(arguments),r=null;return"object"===typeof e[0]?(r=e.shift(),t=e.shift(),"string"===typeof t&&(t=r[t])):t=e.shift(),function(n){t.apply(r,e.concat(n))}}t.exports=e},86508:function(t,e,r){t.exports=i;var n=r(6168);function i(t,e){var r=[];(function o(s,a){return s>=a?e(null,r):(Array.isArray(t[s])&&(t[s]=n.apply(null,t[s].map((function(t){return t===i.first?r[0]:t===i.last?r[r.length-1]:t})))),t[s]?void t[s]((function(t,n){if(t)return e(t,r);void 0!==n&&(r=r.concat(n)),o(s+1,a)})):o(s+1,a))})(0,t.length)}i.first={},i.last={}},99039:function(t,e,r){r(23818),r(6168),e.chain=r(86508)},79367:function(t,e,r){t.exports=o;var n=r(43793).EventEmitter,i=r(81923);function o(){n.call(this)}i(o,n),o.Readable=r(50187),o.Writable=r(69621),o.Duplex=r(31418),o.Transform=r(87825),o.PassThrough=r(80214),o.finished=r(83210),o.pipeline=r(26708),o.Stream=o,o.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"===typeof t.destroy&&t.destroy())}function c(t){if(h(),0===n.listenerCount(this,"error"))throw t}function h(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",h),r.removeListener("close",h),t.removeListener("close",h)}return r.on("error",c),t.on("error",c),r.on("end",h),r.on("close",h),t.on("close",h),t.emit("pipe",r),t}},56163:function(t,e,r){var n=r(96027);r(21703),function(t,r){r(e)}(0,(function(t){"use strict";async function*e(t,e){let r=[];for await(const n of e)r.push(n),r.length===t&&(yield r,r=[]);r.length>0&&(yield r)}function*r(t,e){let r=[];for(const n of e)r.push(n),r.length===t&&(yield r,r=[]);r.length>0&&(yield r)}function i(t,n){return void 0===n?e=>i(t,e):n[Symbol.asyncIterator]?e(t,n):r(t,n)}const o=Symbol("TIMEOUT"),s=t=>{let e;return[new Promise((r=>{e=setTimeout((()=>r(o)),t)})),()=>{clearTimeout(e)}]};async function*a(t,e,r){const n=r[Symbol.asyncIterator]();let i,a,u,c=[];const h=()=>{l(),[a,u]=s(e)},l=()=>{u&&u(),a=void 0};i=n.next();while(1){const e=await(a?Promise.race([i,a]):i);if(e===o||e.done){if(c.length&&(yield c,c=[]),l(),e!==o)break}else i=n.next(),c.push(e.value),1===c.length&&h(),c.length!==t||(yield c,c=[],l())}}function u(t,e,r){return void 0===r?r=>u(t,e,r):r[Symbol.asyncIterator]&&e!==1/0?a(t,e,r):i(t,r)}function c(t){if("function"===typeof t.next)return t;if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function h(){let t,e;const r=new Promise(((r,n)=>{e=r,t=n}));return{promise:r,reject:t,resolve:e}}function l(t,e){const r=c(e),n=[],i=[];let o=!1,s=!1;function a(){while(i.length>0&&n.length>0){const t=i.shift(),{error:e,value:r}=n.shift();e?t.reject(e):t.resolve({done:!1,value:r})}while(i.length>0&&s){const{resolve:t}=i.shift();t({done:!0,value:void 0})}}async function u(){if(!s&&!o&&!(n.length>=t)){o=!0;try{const{done:t,value:e}=await r.next();t?s=!0:n.push({value:e})}catch(e){s=!0,n.push({error:e})}a(),o=!1,u()}}async function l(){if(n.length>0){const{error:t,value:e}=n.shift();if(t)throw t;return u(),{done:!1,value:e}}if(s)return{done:!0,value:void 0};const t=h();return i.push(t),u(),t.promise}const f={next:l,[Symbol.asyncIterator]:()=>f};return f}function*f(t,e){const r=[];let n;try{for(const n of e)r.push(n),r.length<=t||(yield r.shift())}catch(i){n=i}for(const o of r)yield o;if(n)throw n}function d(t,e){return void 0===e?e=>d(t,e):0===t?e:e[Symbol.asyncIterator]?l(t,e):f(t,e)}async function p(t){const e=[];for await(const r of t)e.push(r);return e}function y(t){return t[Symbol.asyncIterator]?p(t):Array.from(t)}async function*g(t){for await(const e of t)yield*e}function*m(t){for(const e of t)yield*e}function b(...t){const e=t.find((t=>void 0!==t[Symbol.asyncIterator]));return e?g(t):m(t)}async function w(t){for await(const e of t);}function v(t){if(t[Symbol.asyncIterator])return w(t);for(const e of t);}async function*_(t,e){for await(const r of e)await t(r)&&(yield r)}function E(t,e){return void 0===e?e=>_(t,e):_(t,e)}async function*S(t){for await(const e of t)e&&"string"!==typeof e&&(e[Symbol.iterator]||e[Symbol.asyncIterator])?yield*S(e):yield e}async function*A(t,e){for await(const r of e)yield await t(r)}function I(t,e){return void 0===e?e=>A(t,e):A(t,e)}function T(t,e){return void 0===e?e=>T(t,e):E((t=>void 0!==t&&null!==t),S(I(t,e)))}function R(t,e,r){const n=c(r),i=[],o=[];let s=!1,a=!1,u=0,l=null;function f(){while(o.length>0&&i.length>0){const{resolve:t}=o.shift(),e=i.shift();t({done:!1,value:e})}while(o.length>0&&0===u&&s){const{resolve:t,reject:e}=o.shift();l?(e(l),l=null):t({done:!0,value:void 0})}}async function d(){if(s)f();else if(!a&&!(u+i.length>=t)){a=!0,u++;try{const{done:t,value:e}=await n.next();t?(s=!0,u--,f()):p(e)}catch(e){s=!0,u--,l=e,f()}a=!1,d()}}async function p(t){try{const r=await e(t);if(r&&r[Symbol.asyncIterator])for await(const t of r)i.push(t);else i.push(r)}catch(r){s=!0,l=r}u--,f(),d()}async function y(){if(0===i.length){const t=h();return o.push(t),d(),t.promise}const t=i.shift();return d(),{done:!1,value:t}}const g={next:y,[Symbol.asyncIterator]:()=>g};return g}function M(t,e,r){return void 0===e?(e,r)=>r?M(t,e,r):M(t,e):void 0===r?r=>M(t,e,r):E((t=>void 0!==t&&null!==t),S(R(t,e,r)))}async function k(t){return new Promise((e=>{t.once("readable",(()=>{e()}))}))}async function*C(t){while(1){const e=t.read();if(null===e){if(t._readableState.ended)break;await k(t)}else yield e}}function O(t){return"function"===typeof t[Symbol.asyncIterator]?t:C(t)}async function*P(...t){const e=new Set(t.map(c));while(e.size>0)for(const t of e){const r=await t.next();r.done?e.delete(t):yield r.value}}function B(t,...e){let r=t();for(const n of e)r=n(r);return r}async function*x(t,e,r){let n=null;const i=t=>({value:e(t)}),o=async function*(t){for await(const e of t){if(n)return;yield e}},s=B((()=>r),d(1),o,I(i),d(t-1)),a=c(s);while(1){const{value:t,done:e}=await a.next();if(e)break;try{const e=await t.value;n||(yield e)}catch(u){n=u}}if(n)throw n}function N(t,e,r){return void 0===e?(e,r)=>N(t,e,r):void 0===r?r=>N(t,e,r):1===t?I(e,r):x(t,e,r)}function D(t,e,r){return void 0===e?(e,r)=>r?D(t,e,r):D(t,e):void 0===r?r=>D(t,e,r):E((t=>void 0!==t&&null!==t),S(N(t,e,r)))}async function*L(...t){const e=t.map(c),r=new Set,n=new Map;let i=null,o=null,s=null;const a=t=>{i=t,o&&o(t)},u=t=>{s&&s(t)},h=()=>new Promise(((t,e)=>{if(i&&e(i),n.size>0)return t();s=t,o=e})),l=t=>{const e=Promise.resolve(t.next()).then((async({done:i,value:o})=>{i||n.set(t,o),r.delete(e)}));r.add(e),e.then(u,a)};for(const c of e)l(c);while(1){if(0===r.size&&0===n.size)return;await h();for(const[t,e]of n)n.delete(t),yield e,l(t)}}async function U(t,e,r){let n=e;for await(const i of r)n=await t(n,i);return n}function j(t,e,r){return void 0===e?(e,r)=>r?U(t,e,r):j(t,e):void 0===r?r=>j(t,e,r):U(t,e,r)}async function*F(t,e){let r=0;for await(const n of e)if(yield await n,r++,r>=t)break}function*K(t,e){let r=0;for(const n of e)if(yield n,r++,r>=t)break}function $(t,e){return void 0===e?e=>$(t,e):e[Symbol.asyncIterator]?F(t,e):K(t,e)}async function*q(t,e){for await(const r of e)await t(r),yield r}function H(t,e){return void 0===e?e=>q(t,e):q(t,e)}const z=t=>new Promise((e=>setTimeout(e,t)));function V(t,e,r){if(!Number.isFinite(t))throw new TypeError("Expected `limit` to be a finite number");if(t<=0)throw new TypeError("Expected `limit` to be greater than 0");if(!Number.isFinite(e))throw new TypeError("Expected `interval` to be a finite number");return async function*(){let n,i=0;for await(const o of r){if(i<t){"undefined"===typeof n&&(n=Date.now()),i++,yield o;continue}const r=Date.now()-n,s=e-r;s>0&&await z(s),n=Date.now(),i=1,yield o}}()}function G(t,e,r){return void 0===r?r=>V(t,e,r):V(t,e,r)}function W(t,e){let r=t[0]+e[0],n=t[1]+e[1];if(n>=1e9){const t=n%1e9;r+=(n-t)/1e9,n=t}return[r,n]}async function*Y(t,e){const r=e[Symbol.asyncIterator]();let i=[0,0];while(1){const e=n.hrtime(),{value:o,done:s}=await r.next(),a=n.hrtime(e);if(i=W(i,a),t.progress&&t.progress(a,i),s)return t.total&&t.total(i),o;yield o}}function*J(t,e){const r=e[Symbol.iterator]();let i=[0,0];while(1){const e=n.hrtime(),{value:o,done:s}=r.next(),a=n.hrtime(e);if(i=W(i,a),t.progress&&t.progress(a,i),s)return t.total&&t.total(i),o;yield o}}function Z(t={},e){return void 0===e?e=>Z(t,e):void 0!==e[Symbol.asyncIterator]?Y(t,e):J(t,e)}function X(t,e,r){const n=c(r),i=[],o=[];let s=!1,a=!1,u=0,l=null;function f(){while(o.length>0&&i.length>0){const{resolve:t}=o.shift(),e=i.shift();t({done:!1,value:e})}while(o.length>0&&0===u&&s){const{resolve:t,reject:e}=o.shift();l?(e(l),l=null):t({done:!0,value:void 0})}}async function d(){if(s)f();else if(!a&&!(u+i.length>=t)){a=!0,u++;try{const{done:t,value:e}=await n.next();t?(s=!0,u--,f()):p(e)}catch(e){s=!0,u--,l=e,f()}a=!1,d()}}async function p(t){try{const r=await e(t);i.push(r)}catch(r){s=!0,l=r}u--,f(),d()}async function y(){if(0===i.length){const t=h();return o.push(t),d(),t.promise}const t=i.shift();return d(),{done:!1,value:t}}const g={next:y,[Symbol.asyncIterator]:()=>g};return g}function Q(t,e,r){return void 0===e?(e,r)=>r?Q(t,e,r):Q(t,e):void 0===r?r=>Q(t,e,r):X(t,e,r)}async function tt(t,e){let r=null,n=null,i=null;const o=t=>{r=t,n&&n(t)},s=()=>{i&&i()},a=()=>{t.removeListener("error",o),t.removeListener("drain",s)};t.once("error",o);const u=()=>new Promise(((e,o)=>{if(r)return o(r);t.once("drain",s),i=e,n=o}));for await(const c of e)if(!1===t.write(c)&&await u(),r)break;if(a(),r)throw r}function et(t,e){return void 0===e?e=>tt(t,e):tt(t,e)}t.batch=i,t.batchWithTimeout=u,t.buffer=d,t.collect=y,t.concat=b,t.consume=v,t.filter=E,t.flatMap=T,t.flatTransform=M,t.flatten=S,t.fromStream=O,t.getIterator=c,t.map=I,t.merge=P,t.parallelFlatMap=D,t.parallelMap=N,t.parallelMerge=L,t.pipeline=B,t.reduce=j,t.take=$,t.tap=H,t.throttle=G,t.time=Z,t.transform=Q,t.writeToStream=et,Object.defineProperty(t,"__esModule",{value:!0})}))},25605:function(t,e,r){"use strict";r(21703);var n=r(54304).Buffer,i=n.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){if(!t)return"utf8";var e;while(1)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function s(t){var e=o(t);if("string"!==typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function a(t){var e;switch(this.encoding=s(t),this.encoding){case"utf16le":this.text=p,this.end=y,e=4;break;case"utf8":this.fillLast=l,e=4;break;case"base64":this.text=g,this.end=m,e=3;break;default:return this.write=b,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function u(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function c(t,e,r){var n=e.length-1;if(n<r)return 0;var i=u(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=u(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=u(e[n]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0))}function h(t,e,r){if(128!==(192&e[0]))return t.lastNeed=0,"ï¿½";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"ï¿½";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"ï¿½"}}function l(t){var e=this.lastTotal-this.lastNeed,r=h(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function f(t,e){var r=c(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ï¿½":e}function p(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function y(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function g(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function m(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function b(t){return t.toString(this.encoding)}function w(t){return t&&t.length?this.write(t):""}e.s=a,a.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},a.prototype.end=d,a.prototype.text=f,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},54304:function(t,e,r){r(21703);
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(15361),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},22856:function(t,e,r){"use strict";const{AbortController:n}=globalThis,i=r(3057);class o extends n{constructor(t){super(),this._ms=t,this._timer=i((()=>this.abort()),t),Object.setPrototypeOf(this,o.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=i((()=>this.abort()),this._ms)}}t.exports={TimeoutController:o}},17339:function(t,e,r){"use strict";var n=r(90432),i=r(1725);t.exports=n.bind(null,i)},90432:function(t,e,r){"use strict";function n(t){return t>=55296&&t<=56319}function i(t){return t>=56320&&t<=57343}r(21703),t.exports=function(t,e,r){if("string"!==typeof e)throw new Error("Input must be string");for(var o,s,a=e.length,u=0,c=0;c<a;c+=1){if(o=e.charCodeAt(c),s=e[c],n(o)&&i(e.charCodeAt(c+1))&&(c+=1,s+=e[c]),u+=t(s),u===r)return e.slice(0,c+1);if(u>r)return e.slice(0,c-s.length+1)}return e}},1725:function(t,e,r){"use strict";function n(t){return t>=55296&&t<=56319}function i(t){return t>=56320&&t<=57343}r(21703),t.exports=function(t){if("string"!==typeof t)throw new Error("Input must be string");for(var e=t.length,r=0,o=null,s=null,a=0;a<e;a++)o=t.charCodeAt(a),i(o)?null!=s&&n(s)?r+=1:r+=3:o<=127?r+=1:o>=128&&o<=2047?r+=2:o>=2048&&o<=65535&&(r+=3),s=o;return r}},74633:function(t,e,r){var n=r(15941);function i(t,e){if(o("noDeprecation"))return t;var r=!1;function i(){if(!r){if(o("throwDeprecation"))throw new Error(e);o("traceDeprecation")?n.trace(e):n.warn(e),r=!0}return t.apply(this,arguments)}return i}function o(t){try{if(!r.g.localStorage)return!1}catch(n){return!1}var e=r.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}r(21703),t.exports=i},80759:function(t,e,r){"use strict";r.r(e),r.d(e,{NIL:function(){return W},parse:function(){return v},stringify:function(){return p},v1:function(){return b},v3:function(){return j},v4:function(){return K},v5:function(){return G},validate:function(){return u},version:function(){return J}});r(21703),r(48675),r(3462),r(37380),r(1118);var n,i=new Uint8Array(16);function o(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a(t){return"string"===typeof t&&s.test(t)}for(var u=a,c=[],h=0;h<256;++h)c.push((h+256).toString(16).substr(1));function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r}var f,d,p=l,y=0,g=0;function m(t,e,r){var n=e&&r||0,i=e||new Array(16);t=t||{};var s=t.node||f,a=void 0!==t.clockseq?t.clockseq:d;if(null==s||null==a){var u=t.random||(t.rng||o)();null==s&&(s=f=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=d=16383&(u[6]<<8|u[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),h=void 0!==t.nsecs?t.nsecs:g+1,l=c-y+(h-g)/1e4;if(l<0&&void 0===t.clockseq&&(a=a+1&16383),(l<0||c>y)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=c,g=h,d=a,c+=122192928e5;var m=(1e4*(268435455&c)+h)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=255&m;var b=c/4294967296*1e4&268435455;i[n++]=b>>>8&255,i[n++]=255&b,i[n++]=b>>>24&15|16,i[n++]=b>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var w=0;w<6;++w)i[n+w]=s[w];return e||p(i)}var b=m;function w(t){if(!u(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r}var v=w;function _(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var E="6ba7b810-9dad-11d1-80b4-00c04fd430c8",S="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function A(t,e,r){function n(t,n,i,o){if("string"===typeof t&&(t=_(t)),"string"===typeof n&&(n=v(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+t.length);if(s.set(n),s.set(t,n.length),s=r(s),s[6]=15&s[6]|e,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return p(s)}try{n.name=t}catch(i){}return n.DNS=E,n.URL=S,n}function I(t){if("string"===typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return T(M(k(t),8*t.length))}function T(t){for(var e=[],r=32*t.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=t[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);e.push(s)}return e}function R(t){return 14+(t+64>>>9<<4)+1}function M(t,e){t[e>>5]|=128<<e%32,t[R(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=r,u=n,c=i,h=o;r=B(r,n,i,o,t[s],7,-680876936),o=B(o,r,n,i,t[s+1],12,-389564586),i=B(i,o,r,n,t[s+2],17,606105819),n=B(n,i,o,r,t[s+3],22,-1044525330),r=B(r,n,i,o,t[s+4],7,-176418897),o=B(o,r,n,i,t[s+5],12,1200080426),i=B(i,o,r,n,t[s+6],17,-1473231341),n=B(n,i,o,r,t[s+7],22,-45705983),r=B(r,n,i,o,t[s+8],7,1770035416),o=B(o,r,n,i,t[s+9],12,-1958414417),i=B(i,o,r,n,t[s+10],17,-42063),n=B(n,i,o,r,t[s+11],22,-1990404162),r=B(r,n,i,o,t[s+12],7,1804603682),o=B(o,r,n,i,t[s+13],12,-40341101),i=B(i,o,r,n,t[s+14],17,-1502002290),n=B(n,i,o,r,t[s+15],22,1236535329),r=x(r,n,i,o,t[s+1],5,-165796510),o=x(o,r,n,i,t[s+6],9,-1069501632),i=x(i,o,r,n,t[s+11],14,643717713),n=x(n,i,o,r,t[s],20,-373897302),r=x(r,n,i,o,t[s+5],5,-701558691),o=x(o,r,n,i,t[s+10],9,38016083),i=x(i,o,r,n,t[s+15],14,-660478335),n=x(n,i,o,r,t[s+4],20,-405537848),r=x(r,n,i,o,t[s+9],5,568446438),o=x(o,r,n,i,t[s+14],9,-1019803690),i=x(i,o,r,n,t[s+3],14,-187363961),n=x(n,i,o,r,t[s+8],20,1163531501),r=x(r,n,i,o,t[s+13],5,-1444681467),o=x(o,r,n,i,t[s+2],9,-51403784),i=x(i,o,r,n,t[s+7],14,1735328473),n=x(n,i,o,r,t[s+12],20,-1926607734),r=N(r,n,i,o,t[s+5],4,-378558),o=N(o,r,n,i,t[s+8],11,-2022574463),i=N(i,o,r,n,t[s+11],16,1839030562),n=N(n,i,o,r,t[s+14],23,-35309556),r=N(r,n,i,o,t[s+1],4,-1530992060),o=N(o,r,n,i,t[s+4],11,1272893353),i=N(i,o,r,n,t[s+7],16,-155497632),n=N(n,i,o,r,t[s+10],23,-1094730640),r=N(r,n,i,o,t[s+13],4,681279174),o=N(o,r,n,i,t[s],11,-358537222),i=N(i,o,r,n,t[s+3],16,-722521979),n=N(n,i,o,r,t[s+6],23,76029189),r=N(r,n,i,o,t[s+9],4,-640364487),o=N(o,r,n,i,t[s+12],11,-421815835),i=N(i,o,r,n,t[s+15],16,530742520),n=N(n,i,o,r,t[s+2],23,-995338651),r=D(r,n,i,o,t[s],6,-198630844),o=D(o,r,n,i,t[s+7],10,1126891415),i=D(i,o,r,n,t[s+14],15,-1416354905),n=D(n,i,o,r,t[s+5],21,-57434055),r=D(r,n,i,o,t[s+12],6,1700485571),o=D(o,r,n,i,t[s+3],10,-1894986606),i=D(i,o,r,n,t[s+10],15,-1051523),n=D(n,i,o,r,t[s+1],21,-2054922799),r=D(r,n,i,o,t[s+8],6,1873313359),o=D(o,r,n,i,t[s+15],10,-30611744),i=D(i,o,r,n,t[s+6],15,-1560198380),n=D(n,i,o,r,t[s+13],21,1309151649),r=D(r,n,i,o,t[s+4],6,-145523070),o=D(o,r,n,i,t[s+11],10,-1120210379),i=D(i,o,r,n,t[s+2],15,718787259),n=D(n,i,o,r,t[s+9],21,-343485551),r=C(r,a),n=C(n,u),i=C(i,c),o=C(o,h)}return[r,n,i,o]}function k(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(R(e)),n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}function C(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r}function O(t,e){return t<<e|t>>>32-e}function P(t,e,r,n,i,o){return C(O(C(C(e,t),C(n,o)),i),r)}function B(t,e,r,n,i,o,s){return P(e&r|~e&n,t,e,i,o,s)}function x(t,e,r,n,i,o,s){return P(e&n|r&~n,t,e,i,o,s)}function N(t,e,r,n,i,o,s){return P(e^r^n,t,e,i,o,s)}function D(t,e,r,n,i,o,s){return P(r^(e|~n),t,e,i,o,s)}var L=I,U=A("v3",48,L),j=U;function F(t,e,r){t=t||{};var n=t.random||(t.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return p(n)}var K=F;function $(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function q(t,e){return t<<e|t>>>32-e}function H(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,s=Math.ceil(o/16),a=new Array(s),u=0;u<s;++u){for(var c=new Uint32Array(16),h=0;h<16;++h)c[h]=t[64*u+4*h]<<24|t[64*u+4*h+1]<<16|t[64*u+4*h+2]<<8|t[64*u+4*h+3];a[u]=c}a[s-1][14]=8*(t.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<s;++l){for(var f=new Uint32Array(80),d=0;d<16;++d)f[d]=a[l][d];for(var p=16;p<80;++p)f[p]=q(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var y=r[0],g=r[1],m=r[2],b=r[3],w=r[4],v=0;v<80;++v){var _=Math.floor(v/20),E=q(y,5)+$(_,g,m,b)+w+e[_]+f[v]>>>0;w=b,b=m,m=q(g,30)>>>0,g=y,y=E}r[0]=r[0]+y>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+b>>>0,r[4]=r[4]+w>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var z=H,V=A("v5",80,z),G=V,W="00000000-0000-0000-0000-000000000000";function Y(t){if(!u(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var J=Y},12706:function(t,e,r){r(21703),t.exports=o;var n=128,i=127;function o(t,e){var r,s=0,a=(e=e||0,0),u=e,c=t.length;do{if(u>=c||a>49)throw o.bytes=0,new RangeError("Could not decode varint");r=t[u++],s+=a<28?(r&i)<<a:(r&i)*Math.pow(2,a),a+=7}while(r>=n);return o.bytes=u-e,s}},30799:function(t,e,r){r(21703),t.exports=a;var n=128,i=127,o=~i,s=Math.pow(2,31);function a(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw a.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;var i=r;while(t>=s)e[r++]=255&t|n,t/=128;while(t&o)e[r++]=255&t|n,t>>>=7;return e[r]=0|t,a.bytes=r-i+1,e}},42611:function(t,e,r){t.exports={encode:r(30799),decode:r(12706),encodingLength:r(63303)}},63303:function(t){var e=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),o=Math.pow(2,35),s=Math.pow(2,42),a=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);t.exports=function(t){return t<e?1:t<r?2:t<n?3:t<i?4:t<o?5:t<s?6:t<a?7:t<u?8:t<c?9:10}},3336:function(t,e,r){"use strict";const n=r(34024),i="object"===typeof window&&"object"===typeof document&&9===document.nodeType,o=n(),s=i&&!o,a=o&&!i,u=o&&i,c="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!o,h="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,l="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&"test"===globalThis.process.env["NODE"+(()=>"_")()+"ENV"],f="undefined"!==typeof navigator&&"ReactNative"===navigator.product;t.exports={isTest:l,isElectron:o,isElectronMain:a,isElectronRenderer:u,isNode:c,isBrowser:s,isWebWorker:h,isEnvWithDom:i,isReactNative:f}},61935:function(t,e,r){"use strict";var n="/index.js",i=r(96027),o=r(13374)["Buffer"];t.exports=f,t.exports.sync=p,t.exports._getTmpname=l;var s=r(41267),a=r(99039).chain,u=r(42135),c=Object.assign||r(9242)._extend,h=0;function l(t){return t+"."+u(n).hash(String(i.pid)).hash(String(++h)).result()}function f(t,e,r,n){r instanceof Function&&(n=r,r=null),r||(r={}),s.realpath(t,(function(i,o){d(o||t,e,r,n)}))}function d(t,e,r,n){var u=l(t);return r.mode&&r.chown?h():s.stat(t,(function(t,e){return t||!e||(r=c({},r),r.mode||(r.mode=e.mode),!r.chown&&i.getuid&&(r.chown={uid:e.uid,gid:e.gid})),h()}));function h(){a([[f,u,e,r.mode,r.encoding||"utf8"],r.chown&&[s,s.chown,u,r.chown.uid,r.chown.gid],r.mode&&[s,s.chmod,u,r.mode],[s,s.rename,u,t]],(function(t){t?s.unlink(u,(function(){n(t)})):n()}))}function f(t,e,n,i,a){s.open(t,"w",r.mode,(function(t,r){return t?a(t):o.isBuffer(e)?s.write(r,e,0,e.length,0,n):null!=e?s.write(r,String(e),0,String(i),n):n();function n(t){if(t)return a(t);s.fsync(r,(function(t){if(t)return a(t);s.close(r,a)}))}}))}}function p(t,e,r){r||(r={});try{t=s.realpathSync(t)}catch(h){}var n=l(t);try{if(!r.mode||!r.chown)try{var a=s.statSync(t);r=c({},r),r.mode||(r.mode=a.mode),!r.chown&&i.getuid&&(r.chown={uid:a.uid,gid:a.gid})}catch(h){}var u=s.openSync(n,"w",r.mode);o.isBuffer(e)?s.writeSync(u,e,0,e.length,0):null!=e&&s.writeSync(u,String(e),0,String(r.encoding||"utf8")),s.fsyncSync(u),s.closeSync(u),r.chown&&s.chownSync(n,r.chown.uid,r.chown.gid),r.mode&&s.chmodSync(n,r.mode),s.renameSync(n,t)}catch(f){try{s.unlinkSync(n)}catch(d){}throw f}}},73228:function(t,e,r){"use strict";r.d(e,{h:function(){return B}});r(26699),r(82801),r(48675),r(3462),r(37380),r(1118),r(21703);var n,i=r(44870),o=r(73396);r(15941),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const s="undefined"!==typeof window;Object.prototype.toString,s&&(null==(n=null==window?void 0:window.navigator)?void 0:n.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function a(t,e=!1,r="Timeout"){return new Promise(((n,i)=>{e?setTimeout((()=>i(r)),t):setTimeout(n,t)}))}function u(t,...e){return e.some((e=>e in t))}function c(){const t=[],e=e=>{const r=t.indexOf(e);-1!==r&&t.splice(r,1)},r=r=>(t.push(r),{off:()=>e(r)}),n=e=>{t.forEach((t=>t(e)))};return{on:r,off:e,trigger:n}}function h(t){return!!(0,i.nZ)()&&((0,i.EB)(t),!0)}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function l(t){let e=!1;function r(r,{flush:n="sync",deep:s=!1,timeout:u,throwOnTimeout:c}={}){let h=null;const l=new Promise((i=>{h=(0,o.YP)(t,(t=>{r(t)!==e&&(null==h||h(),i(t))}),{flush:n,deep:s,immediate:!0})})),f=[l];return null!=u&&f.push(a(u,c).then((()=>(0,i.SU)(t))).finally((()=>null==h?void 0:h()))),Promise.race(f)}function n(n,s){if(!(0,i.dq)(n))return r((t=>t===n),s);const{flush:u="sync",deep:c=!1,timeout:h,throwOnTimeout:l}=null!=s?s:{};let f=null;const d=new Promise((r=>{f=(0,o.YP)([t,n],(([t,n])=>{e!==(t===n)&&(null==f||f(),r(t))}),{flush:u,deep:c,immediate:!0})})),p=[d];return null!=h&&p.push(a(h,l).then((()=>(0,i.SU)(t))).finally((()=>(null==f||f(),(0,i.SU)(t))))),Promise.race(p)}function s(t){return r((t=>Boolean(t)),t)}function u(t){return n(null,t)}function c(t){return n(void 0,t)}function h(t){return r(Number.isNaN,t)}function l(t,e){return r((e=>{const r=Array.from(e);return r.includes(t)||r.includes((0,i.SU)(t))}),e)}function f(t){return d(1,t)}function d(t=1,e){let n=-1;return r((()=>(n+=1,n>=t)),e)}if(Array.isArray((0,i.SU)(t))){const t={toMatch:r,toContains:l,changed:f,changedTimes:d,get not(){return e=!e,this}};return t}{const t={toMatch:r,toBe:n,toBeTruthy:s,toBeNull:u,toBeNaN:h,toBeUndefined:c,changed:f,changedTimes:d,get not(){return e=!e,this}};return t}}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function f(t,e,r={}){const{immediate:n=!0}=r,o=(0,i.iH)(!1);let a=null;function u(){a&&(clearTimeout(a),a=null)}function c(){o.value=!1,u()}function l(...r){u(),o.value=!0,a=setTimeout((()=>{o.value=!1,a=null,t(...r)}),(0,i.SU)(e))}return n&&(o.value=!0,s&&l()),h(c),{isPending:o,start:l,stop:c}}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;r(15941);const d=s?window:void 0;s&&window.document,s&&window.navigator,s&&window.location;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const p="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},y="__vueuse_ssr_handlers__";p[y]=p[y]||{};p[y];Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;new Map;var g=Object.defineProperty,m=Object.defineProperties,b=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,E=(t,e,r)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,S=(t,e)=>{for(var r in e||(e={}))v.call(e,r)&&E(t,r,e[r]);if(w)for(var r of w(e))_.call(e,r)&&E(t,r,e[r]);return t},A=(t,e)=>m(t,b(e));const I={json:"application/json",text:"text/plain",formData:"multipart/form-data"};function T(t){return u(t,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch")}function R(t){return"undefined"!==typeof Headers&&t instanceof Headers?Object.fromEntries([...t.entries()]):t}function M(t={}){const e=t.options||{},r=t.fetchOptions||{};function n(n,...s){const a=(0,o.Fl)((()=>t.baseUrl?C((0,i.SU)(t.baseUrl),(0,i.SU)(n)):(0,i.SU)(n)));let u=e,c=r;return s.length>0&&(T(s[0])?u=S(S({},u),s[0]):c=A(S(S({},c),s[0]),{headers:S(S({},R(c.headers)||{}),R(s[0].headers)||{})})),s.length>1&&T(s[1])&&(u=S(S({},u),s[1])),k(a,c,u)}return n}function k(t,...e){var r;const n="function"===typeof AbortController;let s={},a={immediate:!0,refetch:!1,timeout:0};const u={method:"GET",type:"text",payload:void 0};e.length>0&&(T(e[0])?a=S(S({},a),e[0]):s=e[0]),e.length>1&&T(e[1])&&(a=S(S({},a),e[1]));const{fetch:h=(null==(r=d)?void 0:r.fetch),initialData:p,timeout:y}=a,g=c(),m=c(),b=c(),w=(0,i.iH)(!1),v=(0,i.iH)(!1),_=(0,i.iH)(!1),E=(0,i.iH)(null),M=(0,i.XI)(null),k=(0,i.XI)(null),C=(0,i.XI)(p),O=(0,o.Fl)((()=>n&&v.value));let P,B;const x=()=>{n&&P&&P.abort()},N=t=>{v.value=t,w.value=!t};y&&(B=f(x,y,{immediate:!1}));const D=async(e=!1)=>{var r;N(!0),k.value=null,E.value=null,_.value=!1,P=void 0,n&&(P=new AbortController,P.signal.onabort=()=>_.value=!0,s=A(S({},s),{signal:P.signal}));const o={method:u.method,headers:{}};if(u.payload){const t=R(o.headers);u.payloadType&&(t["Content-Type"]=null!=(r=I[u.payloadType])?r:u.payloadType),o.body="json"===u.payloadType?JSON.stringify((0,i.SU)(u.payload)):(0,i.SU)(u.payload)}let c=!1;const l={url:(0,i.SU)(t),options:S(S({},o),s),cancel:()=>{c=!0}};if(a.beforeFetch&&Object.assign(l,await a.beforeFetch(l)),c||!h)return N(!1),Promise.resolve(null);let f=null;return B&&B.start(),new Promise(((t,r)=>{var n;h(l.url,A(S(S({},o),l.options),{headers:S(S({},R(o.headers)),R(null==(n=l.options)?void 0:n.headers))})).then((async e=>{if(M.value=e,E.value=e.status,f=await e[u.type](),a.afterFetch&&E.value>=200&&E.value<300&&({data:f}=await a.afterFetch({data:f,response:e})),C.value=f,!e.ok)throw new Error(e.statusText);return g.trigger(e),t(e)})).catch((async n=>{let i=n.message||n.name;return a.onFetchError&&({data:f,error:i}=await a.onFetchError({data:f,error:n,response:M.value})),C.value=f,k.value=i,m.trigger(n),e?r(n):t(null)})).finally((()=>{N(!1),B&&B.stop(),b.trigger(null)}))}))};(0,o.YP)((()=>[(0,i.SU)(t),(0,i.SU)(a.refetch)]),(()=>(0,i.SU)(a.refetch)&&D()),{deep:!0});const L={isFinished:w,statusCode:E,response:M,error:k,data:C,isFetching:v,canAbort:O,aborted:_,abort:x,execute:D,onFetchResponse:g.on,onFetchError:m.on,onFetchFinally:b.on,get:U("GET"),put:U("PUT"),post:U("POST"),delete:U("DELETE"),patch:U("PATCH"),head:U("HEAD"),options:U("OPTIONS"),json:F("json"),text:F("text"),blob:F("blob"),arrayBuffer:F("arrayBuffer"),formData:F("formData")};function U(t){return(e,r)=>{if(!v.value)return u.method=t,u.payload=e,u.payloadType=r,(0,i.dq)(u.payload)&&(0,o.YP)((()=>[(0,i.SU)(u.payload),(0,i.SU)(a.refetch)]),(()=>(0,i.SU)(a.refetch)&&D()),{deep:!0}),!r&&(0,i.SU)(e)&&Object.getPrototypeOf((0,i.SU)(e))===Object.prototype&&(u.payloadType="json"),A(S({},L),{then(t,e){return j().then(t,e)}})}}function j(){return new Promise(((t,e)=>{l(w).toBe(!0).then((()=>t(L))).catch((t=>e(t)))}))}function F(t){return()=>{if(!v.value)return u.type=t,A(S({},L),{then(t,e){return j().then(t,e)}})}}return a.immediate&&setTimeout(D,0),A(S({},L),{then(t,e){return j().then(t,e)}})}function C(t,e){return t.endsWith("/")||e.startsWith("/")?`${t}${e}`:`${t}/${e}`}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var O;(function(t){t["UP"]="UP",t["RIGHT"]="RIGHT",t["DOWN"]="DOWN",t["LEFT"]="LEFT",t["NONE"]="NONE"})(O||(O={}));Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const P=M({baseUrl:"https://codstorage.herokuapp.com/",fetchOptions:{mode:"cors"}}),B=(...t)=>P(...t).json()},34309:function(t,e,r){"use strict";r.d(e,{t:function(){return Bp}});var n={};r.r(n),r.d(n,{code:function(){return tr},decode:function(){return rr},encode:function(){return er},name:function(){return Qe}});var i={};r.r(i),r.d(i,{JsonPatchError:function(){return Ur},_areEquals:function(){return Wr},applyOperation:function(){return qr},applyPatch:function(){return Hr},applyReducer:function(){return zr},deepClone:function(){return jr},getValueByPointer:function(){return $r},validate:function(){return Gr},validator:function(){return Vr}});var o={};r.r(o),r.d(o,{compare:function(){return sn},generate:function(){return nn},observe:function(){return rn},unobserve:function(){return en}});var s={};r.r(s),r.d(s,{keyToDidDoc:function(){return Ih}});var a={};r.r(a),r.d(a,{keyToDidDoc:function(){return kh}});var u={};r.r(u),r.d(u,{ECPointDecompress:function(){return Hh},keyToDidDoc:function(){return qh},pubKeyBytesToXY:function(){return zh}});var c={};r.r(c),r.d(c,{ECPointDecompress:function(){return Gh},keyToDidDoc:function(){return Vh},pubKeyBytesToXY:function(){return Wh}});var h={};r.r(h),r.d(h,{ECPointDecompress:function(){return Jh},keyToDidDoc:function(){return Yh},pubKeyBytesToXY:function(){return Zh}});r(21703),r(26699),r(48675),r(3462),r(37380),r(1118);var l=r(59329),f=r(52493);const d=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),p=function*(t,e){if(null!=t&&!(t instanceof Uint8Array))for(const[r,n]of Object.entries(t)){const t=[...e,r];if(null!=n&&"object"===typeof n)if(Array.isArray(n))for(const[e,r]of n.entries()){const n=[...t,e],i=f.k0.asCID(r);i?yield[n.join("/"),i]:"object"===typeof r&&(yield*p(r,n))}else{const e=f.k0.asCID(n);e?yield[t.join("/"),e]:yield*p(n,t)}}},y=function*(t,e){if(null!=t)for(const[r,n]of Object.entries(t)){const t=[...e,r];if(yield t.join("/"),null!=n&&!(n instanceof Uint8Array)&&"object"===typeof n&&!f.k0.asCID(n))if(Array.isArray(n))for(const[e,r]of n.entries()){const n=[...t,e];yield n.join("/"),"object"!==typeof r||f.k0.asCID(r)||(yield*y(r,n))}else yield*y(n,t)}},g=(t,e)=>{let r=t;for(const[n,i]of e.entries()){if(r=r[i],null==r)throw new Error(`Object has no property at ${e.slice(0,n+1).map((t=>`[${JSON.stringify(t)}]`)).join("")}`);const t=f.k0.asCID(r);if(t)return{value:t,remaining:e.slice(n+1).join("/")}}return{value:r}};class m{constructor({cid:t,bytes:e,value:r}){if(!t||!e||"undefined"===typeof r)throw new Error("Missing required argument");this.cid=t,this.bytes=e,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:d(),bytes:d(),value:d(),asBlock:d()})}links(){return p(this.value,[])}tree(){return y(this.value,[])}get(t="/"){return g(this.value,t.split("/").filter(Boolean))}}const b=async({value:t,codec:e,hasher:r})=>{if("undefined"===typeof t)throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");const n=e.encode(t),i=await r.digest(n),o=f.k0.create(1,e.code,i);return new m({value:t,bytes:n,cid:o})};var w=r(8362),v=r(51919),_=r(42611);const E=["string","number","bigint","symbol"],S=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function A(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(E.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(I(t))return"Buffer";const r=T(t);return r||"Object"}function I(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function T(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(S.includes(e))return e}class R{constructor(t,e,r){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}R.uint=new R(0,"uint",!0),R.negint=new R(1,"negint",!0),R.bytes=new R(2,"bytes",!0),R.string=new R(3,"string",!0),R.array=new R(4,"array",!1),R.map=new R(5,"map",!1),R.tag=new R(6,"tag",!1),R.float=new R(7,"float",!0),R.false=new R(7,"false",!0),R.true=new R(7,"true",!0),R.null=new R(7,"null",!0),R.undefined=new R(7,"undefined",!0),R.break=new R(7,"break",!0);class M{constructor(t,e,r){this.type=t,this.value=e,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const k=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,C=new TextDecoder,O=new TextEncoder;function P(t){return k&&globalThis.Buffer.isBuffer(t)}function B(t){return t instanceof Uint8Array?P(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const x=k?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):$(t,e,r):(t,e,r)=>r-e>64?C.decode(t.subarray(e,r)):$(t,e,r),N=k?t=>t.length>64?globalThis.Buffer.from(t):K(t):t=>t.length>64?O.encode(t):K(t),D=t=>Uint8Array.from(t),L=k?(t,e,r)=>P(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),U=k?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),B(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},j=k?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function F(t,e){if(P(t)&&P(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function K(t,e=1/0){let r;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(t,e,r){const n=[];while(e<r){const i=t[e];let o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let r,n,a,u;switch(s){case 1:i<128&&(o=i);break;case 2:r=t[e+1],128===(192&r)&&(u=(31&i)<<6|63&r,u>127&&(o=u));break;case 3:r=t[e+1],n=t[e+2],128===(192&r)&&128===(192&n)&&(u=(15&i)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[e+1],n=t[e+2],a=t[e+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&i)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),e+=s}return H(n)}const q=4096;function H(t){const e=t.length;if(e<=q)return String.fromCharCode.apply(String,t);let r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=q));return r}const z=256;class V{constructor(t=z){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];const r=this.cursor+t.length;if(r<=this.maxCursor+1){const r=e.length-(this.maxCursor-this.cursor)-1;e.set(t,r)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=j(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(1===this.chunks.length){const r=this.chunks[0];t&&this.cursor>r.length/2?(e=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=L(r,0,this.cursor)}else e=U(this.chunks,this.cursor);return t&&this.reset(),e}}const G="CBOR decode error:",W="CBOR encode error:",Y=[];function J(t,e,r){if(t.length-e<r)throw new Error(`${G} not enough data for type`)}Y[23]=1,Y[24]=2,Y[25]=3,Y[26]=5,Y[27]=9;const Z=[24,256,65536,4294967296,BigInt("18446744073709551616")];function X(t,e,r){J(t,e,1);const n=t[e];if(!0===r.strict&&n<Z[0])throw new Error(`${G} integer encoded in more bytes than necessary (strict decode)`);return n}function Q(t,e,r){J(t,e,2);const n=t[e]<<8|t[e+1];if(!0===r.strict&&n<Z[1])throw new Error(`${G} integer encoded in more bytes than necessary (strict decode)`);return n}function tt(t,e,r){J(t,e,4);const n=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===r.strict&&n<Z[2])throw new Error(`${G} integer encoded in more bytes than necessary (strict decode)`);return n}function et(t,e,r){J(t,e,8);const n=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(!0===r.strict&&o<Z[3])throw new Error(`${G} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(!0===r.allowBigInt)return o;throw new Error(`${G} integers outside of the safe integer range are not supported`)}function rt(t,e,r,n){return new M(R.uint,X(t,e+1,n),2)}function nt(t,e,r,n){return new M(R.uint,Q(t,e+1,n),3)}function it(t,e,r,n){return new M(R.uint,tt(t,e+1,n),5)}function ot(t,e,r,n){return new M(R.uint,et(t,e+1,n),9)}function st(t,e){return at(t,0,e.value)}function at(t,e,r){if(r<Z[0]){const n=Number(r);t.push([e|n])}else if(r<Z[1]){const n=Number(r);t.push([24|e,n])}else if(r<Z[2]){const n=Number(r);t.push([25|e,n>>>8,255&n])}else if(r<Z[3]){const n=Number(r);t.push([26|e,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<Z[4]))throw new Error(`${G} encountered BigInt larger than allowable range`);{const r=[27|e,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),o=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&i,i>>=8,r[7]=255&i,i>>=8,r[6]=255&i,i>>=8,r[5]=255&i,r[4]=255&o,o>>=8,r[3]=255&o,o>>=8,r[2]=255&o,o>>=8,r[1]=255&o,t.push(r)}}}function ut(t,e,r,n){return new M(R.negint,-1-X(t,e+1,n),2)}function ct(t,e,r,n){return new M(R.negint,-1-Q(t,e+1,n),3)}function ht(t,e,r,n){return new M(R.negint,-1-tt(t,e+1,n),5)}st.encodedSize=function(t){return at.encodedSize(t.value)},at.encodedSize=function(t){return t<Z[0]?1:t<Z[1]?2:t<Z[2]?3:t<Z[3]?5:9},st.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const lt=BigInt(-1),ft=BigInt(1);function dt(t,e,r,n){const i=et(t,e+1,n);if("bigint"!==typeof i){const t=-1-i;if(t>=Number.MIN_SAFE_INTEGER)return new M(R.negint,t,9)}if(!0!==n.allowBigInt)throw new Error(`${G} integers outside of the safe integer range are not supported`);return new M(R.negint,lt-BigInt(i),9)}function pt(t,e){const r=e.value,n="bigint"===typeof r?r*lt-ft:-1*r-1;at(t,e.type.majorEncoded,n)}function yt(t,e,r,n){J(t,e,r+n);const i=L(t,e+r,e+r+n);return new M(R.bytes,i,r+n)}function gt(t,e,r,n){return yt(t,e,1,r)}function mt(t,e,r,n){return yt(t,e,2,X(t,e+1,n))}function bt(t,e,r,n){return yt(t,e,3,Q(t,e+1,n))}function wt(t,e,r,n){return yt(t,e,5,tt(t,e+1,n))}function vt(t,e,r,n){const i=et(t,e+1,n);if("bigint"===typeof i)throw new Error(`${G} 64-bit integer bytes lengths not supported`);return yt(t,e,9,i)}function _t(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===R.string?N(t.value):t.value),t.encodedBytes}function Et(t,e){const r=_t(e);at(t,e.type.majorEncoded,r.length),t.push(r)}function St(t,e){return t.length<e.length?-1:t.length>e.length?1:F(t,e)}function At(t,e,r,n,i){const o=r+n;J(t,e,o);const s=new M(R.string,x(t,e+r,e+o),o);return!0===i.retainStringBytes&&(s.byteValue=L(t,e+r,e+o)),s}function It(t,e,r,n){return At(t,e,1,r,n)}function Tt(t,e,r,n){return At(t,e,2,X(t,e+1,n),n)}function Rt(t,e,r,n){return At(t,e,3,Q(t,e+1,n),n)}function Mt(t,e,r,n){return At(t,e,5,tt(t,e+1,n),n)}function kt(t,e,r,n){const i=et(t,e+1,n);if("bigint"===typeof i)throw new Error(`${G} 64-bit integer string lengths not supported`);return At(t,e,9,i,n)}pt.encodedSize=function(t){const e=t.value,r="bigint"===typeof e?e*lt-ft:-1*e-1;return r<Z[0]?1:r<Z[1]?2:r<Z[2]?3:r<Z[3]?5:9},pt.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},Et.encodedSize=function(t){const e=_t(t);return at.encodedSize(e.length)+e.length},Et.compareTokens=function(t,e){return St(_t(t),_t(e))};const Ct=Et;function Ot(t,e,r,n){return new M(R.array,n,r)}function Pt(t,e,r,n){return Ot(t,e,1,r)}function Bt(t,e,r,n){return Ot(t,e,2,X(t,e+1,n))}function xt(t,e,r,n){return Ot(t,e,3,Q(t,e+1,n))}function Nt(t,e,r,n){return Ot(t,e,5,tt(t,e+1,n))}function Dt(t,e,r,n){const i=et(t,e+1,n);if("bigint"===typeof i)throw new Error(`${G} 64-bit integer array lengths not supported`);return Ot(t,e,9,i)}function Lt(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${G} indefinite length items not allowed`);return Ot(t,e,1,1/0)}function Ut(t,e){at(t,R.array.majorEncoded,e.value)}function jt(t,e,r,n){return new M(R.map,n,r)}function Ft(t,e,r,n){return jt(t,e,1,r)}function Kt(t,e,r,n){return jt(t,e,2,X(t,e+1,n))}function $t(t,e,r,n){return jt(t,e,3,Q(t,e+1,n))}function qt(t,e,r,n){return jt(t,e,5,tt(t,e+1,n))}function Ht(t,e,r,n){const i=et(t,e+1,n);if("bigint"===typeof i)throw new Error(`${G} 64-bit integer map lengths not supported`);return jt(t,e,9,i)}function zt(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${G} indefinite length items not allowed`);return jt(t,e,1,1/0)}function Vt(t,e){at(t,R.map.majorEncoded,e.value)}function Gt(t,e,r,n){return new M(R.tag,r,1)}function Wt(t,e,r,n){return new M(R.tag,X(t,e+1,n),2)}function Yt(t,e,r,n){return new M(R.tag,Q(t,e+1,n),3)}function Jt(t,e,r,n){return new M(R.tag,tt(t,e+1,n),5)}function Zt(t,e,r,n){return new M(R.tag,et(t,e+1,n),9)}function Xt(t,e){at(t,R.tag.majorEncoded,e.value)}Ut.compareTokens=st.compareTokens,Ut.encodedSize=function(t){return at.encodedSize(t.value)},Vt.compareTokens=st.compareTokens,Vt.encodedSize=function(t){return at.encodedSize(t.value)},Xt.compareTokens=st.compareTokens,Xt.encodedSize=function(t){return at.encodedSize(t.value)};const Qt=20,te=21,ee=22,re=23;function ne(t,e,r,n){if(!1===n.allowUndefined)throw new Error(`${G} undefined values are not supported`);return!0===n.coerceUndefinedToNull?new M(R["null"],null,1):new M(R.undefined,void 0,1)}function ie(t,e,r,n){if(!1===n.allowIndefinite)throw new Error(`${G} indefinite length items not allowed`);return new M(R["break"],void 0,1)}function oe(t,e,r){if(r){if(!1===r.allowNaN&&Number.isNaN(t))throw new Error(`${G} NaN values are not supported`);if(!1===r.allowInfinity&&(t===1/0||t===-1/0))throw new Error(`${G} Infinity values are not supported`)}return new M(R.float,t,e)}function se(t,e,r,n){return oe(pe(t,e+1),3,n)}function ae(t,e,r,n){return oe(ge(t,e+1),5,n)}function ue(t,e,r,n){return oe(be(t,e+1),9,n)}function ce(t,e,r){const n=e.value;if(!1===n)t.push([R.float.majorEncoded|Qt]);else if(!0===n)t.push([R.float.majorEncoded|te]);else if(null===n)t.push([R.float.majorEncoded|ee]);else if(void 0===n)t.push([R.float.majorEncoded|re]);else{let e,i=!1;r&&!0===r.float64||(de(n),e=pe(fe,1),n===e||Number.isNaN(n)?(fe[0]=249,t.push(fe.slice(0,3)),i=!0):(ye(n),e=ge(fe,1),n===e&&(fe[0]=250,t.push(fe.slice(0,5)),i=!0))),i||(me(n),e=be(fe,1),fe[0]=251,t.push(fe.slice(0,9)))}}ce.encodedSize=function(t,e){const r=t.value;if(!1===r||!0===r||null===r||void 0===r)return 1;if(!e||!0!==e.float64){de(r);let t=pe(fe,1);if(r===t||Number.isNaN(r))return 3;if(ye(r),t=ge(fe,1),r===t)return 5}return 9};const he=new ArrayBuffer(9),le=new DataView(he,1),fe=new Uint8Array(he,0);function de(t){if(t===1/0)le.setUint16(0,31744,!1);else if(t===-1/0)le.setUint16(0,64512,!1);else if(Number.isNaN(t))le.setUint16(0,32256,!1);else{le.setFloat32(0,t);const e=le.getUint32(0),r=(2139095040&e)>>23,n=8388607&e;if(255===r)le.setUint16(0,31744,!1);else if(0===r)le.setUint16(0,(2147483648&t)>>16|n>>13,!1);else{const t=r-127;t<-24?le.setUint16(0,0):t<-14?le.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):le.setUint16(0,(2147483648&e)>>16|t+15<<10|n>>13,!1)}}}function pe(t,e){if(t.length-e<2)throw new Error(`${G} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,i=1023&r;let o;return o=0===n?i*2**-24:31!==n?(i+1024)*2**(n-25):0===i?1/0:NaN,32768&r?-o:o}function ye(t){le.setFloat32(0,t,!1)}function ge(t,e){if(t.length-e<4)throw new Error(`${G} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function me(t){le.setFloat64(0,t,!1)}function be(t,e){if(t.length-e<8)throw new Error(`${G} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}function we(t,e,r){throw new Error(`${G} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function ve(t){return()=>{throw new Error(`${G} ${t}`)}}ce.compareTokens=st.compareTokens;const _e=[];for(let xp=0;xp<=23;xp++)_e[xp]=we;_e[24]=rt,_e[25]=nt,_e[26]=it,_e[27]=ot,_e[28]=we,_e[29]=we,_e[30]=we,_e[31]=we;for(let xp=32;xp<=55;xp++)_e[xp]=we;_e[56]=ut,_e[57]=ct,_e[58]=ht,_e[59]=dt,_e[60]=we,_e[61]=we,_e[62]=we,_e[63]=we;for(let xp=64;xp<=87;xp++)_e[xp]=gt;_e[88]=mt,_e[89]=bt,_e[90]=wt,_e[91]=vt,_e[92]=we,_e[93]=we,_e[94]=we,_e[95]=ve("indefinite length bytes/strings are not supported");for(let xp=96;xp<=119;xp++)_e[xp]=It;_e[120]=Tt,_e[121]=Rt,_e[122]=Mt,_e[123]=kt,_e[124]=we,_e[125]=we,_e[126]=we,_e[127]=ve("indefinite length bytes/strings are not supported");for(let xp=128;xp<=151;xp++)_e[xp]=Pt;_e[152]=Bt,_e[153]=xt,_e[154]=Nt,_e[155]=Dt,_e[156]=we,_e[157]=we,_e[158]=we,_e[159]=Lt;for(let xp=160;xp<=183;xp++)_e[xp]=Ft;_e[184]=Kt,_e[185]=$t,_e[186]=qt,_e[187]=Ht,_e[188]=we,_e[189]=we,_e[190]=we,_e[191]=zt;for(let xp=192;xp<=215;xp++)_e[xp]=Gt;_e[216]=Wt,_e[217]=Yt,_e[218]=Jt,_e[219]=Zt,_e[220]=we,_e[221]=we,_e[222]=we,_e[223]=we;for(let xp=224;xp<=243;xp++)_e[xp]=ve("simple values are not supported");_e[244]=we,_e[245]=we,_e[246]=we,_e[247]=ne,_e[248]=ve("simple values are not supported"),_e[249]=se,_e[250]=ae,_e[251]=ue,_e[252]=we,_e[253]=we,_e[254]=we,_e[255]=ie;const Ee=[];for(let xp=0;xp<24;xp++)Ee[xp]=new M(R.uint,xp,1);for(let xp=-1;xp>=-24;xp--)Ee[31-xp]=new M(R.negint,xp,1);function Se(t){switch(t.type){case R["false"]:return D([244]);case R["true"]:return D([245]);case R["null"]:return D([246]);case R.bytes:return t.value.length?void 0:D([64]);case R.string:return""===t.value?D([96]):void 0;case R.array:return 0===t.value?D([128]):void 0;case R.map:return 0===t.value?D([160]):void 0;case R.uint:return t.value<24?D([Number(t.value)]):void 0;case R.negint:if(t.value>=-24)return D([31-Number(t.value)])}}Ee[64]=new M(R.bytes,new Uint8Array(0),1),Ee[96]=new M(R.string,"",1),Ee[128]=new M(R.array,0,1),Ee[160]=new M(R.map,0,1),Ee[244]=new M(R["false"],!1,1),Ee[245]=new M(R["true"],!0,1),Ee[246]=new M(R["null"],null,1);var Ae=r(15941);const Ie={float64:!1,mapSorter:xe,quickEncodeToken:Se};function Te(){const t=[];return t[R.uint.major]=st,t[R.negint.major]=pt,t[R.bytes.major]=Et,t[R.string.major]=Ct,t[R.array.major]=Ut,t[R.map.major]=Vt,t[R.tag.major]=Xt,t[R.float.major]=ce,t}const Re=Te(),Me=new V;class ke{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${W} object contains circular references`);return new ke(e,t)}}const Ce={null:new M(R["null"],null),undefined:new M(R.undefined,void 0),true:new M(R["true"],!0),false:new M(R["false"],!1),emptyArray:new M(R.array,0),emptyMap:new M(R.map,0)},Oe={number(t,e,r,n){return Number.isInteger(t)&&Number.isSafeInteger(t)?new M(t>=0?R.uint:R.negint,t):new M(R.float,t)},bigint(t,e,r,n){return t>=BigInt(0)?new M(R.uint,t):new M(R.negint,t)},Uint8Array(t,e,r,n){return new M(R.bytes,t)},string(t,e,r,n){return new M(R.string,t)},boolean(t,e,r,n){return t?Ce.true:Ce.false},null(t,e,r,n){return Ce.null},undefined(t,e,r,n){return Ce.undefined},ArrayBuffer(t,e,r,n){return new M(R.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new M(R.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return!0===r.addBreakTokens?[Ce.emptyArray,new M(R["break"])]:Ce.emptyArray;n=ke.createCheck(n,t);const i=[];let o=0;for(const s of t)i[o++]=Pe(s,r,n);return r.addBreakTokens?[new M(R.array,t.length),i,new M(R["break"])]:[new M(R.array,t.length),i]},Object(t,e,r,n){const i="Object"!==e,o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return!0===r.addBreakTokens?[Ce.emptyMap,new M(R["break"])]:Ce.emptyMap;n=ke.createCheck(n,t);const a=[];let u=0;for(const c of o)a[u++]=[Pe(c,r,n),Pe(i?t.get(c):t[c],r,n)];return Be(a,r),r.addBreakTokens?[new M(R.map,s),a,new M(R["break"])]:[new M(R.map,s),a]}};Oe.Map=Oe.Object,Oe.Buffer=Oe.Uint8Array;for(const xp of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Oe[`${xp}Array`]=Oe.DataView;function Pe(t,e={},r){const n=A(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||Oe[n];if("function"===typeof i){const o=i(t,n,e,r);if(null!=o)return o}const o=Oe[n];if(!o)throw new Error(`${W} unsupported type: ${n}`);return o(t,n,e,r)}function Be(t,e){e.mapSorter&&t.sort(e.mapSorter)}function xe(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,o=Re[i].compareTokens(r,n);return 0===o&&Ae.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function Ne(t,e,r,n){if(Array.isArray(e))for(const i of e)Ne(t,i,r,n);else r[e.type.major](t,e,n)}function De(t,e,r){const n=Pe(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const t=r.quickEncodeToken(n);if(t)return t;const i=e[n.type.major];if(i.encodedSize){const t=i.encodedSize(n,r),e=new V(t);if(i(e,n,r),1!==e.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return B(e.chunks[0])}}return Me.reset(),Ne(Me,n,e,r),Me.toBytes(!0)}function Le(t,e){return e=Object.assign({},Ie,e),De(t,Re,e)}const Ue={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class je{constructor(t,e={}){this.pos=0,this.data=t,this.options=e}done(){return this.pos>=this.data.length}next(){const t=this.data[this.pos];let e=Ee[t];if(void 0===e){const r=_e[t];if(!r)throw new Error(`${G} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const n=31&t;e=r(this.data,this.pos,n,this.options)}return this.pos+=e.encodedLength,e}}const Fe=Symbol.for("DONE"),Ke=Symbol.for("BREAK");function $e(t,e,r){const n=[];for(let i=0;i<t.value;i++){const o=He(e,r);if(o===Ke){if(t.value===1/0)break;throw new Error(`${G} got unexpected break to lengthed array`)}if(o===Fe)throw new Error(`${G} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=o}return n}function qe(t,e,r){const n=!0===r.useMaps,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<t.value;s++){const a=He(e,r);if(a===Ke){if(t.value===1/0)break;throw new Error(`${G} got unexpected break to lengthed map`)}if(a===Fe)throw new Error(`${G} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(!0!==n&&"string"!==typeof a)throw new Error(`${G} non-string keys not supported (got ${typeof a})`);const u=He(e,r);if(u===Fe)throw new Error(`${G} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?o.set(a,u):i[a]=u}return n?o:i}function He(t,e){if(t.done())return Fe;const r=t.next();if(r.type===R["break"])return Ke;if(r.type.terminal)return r.value;if(r.type===R.array)return $e(r,t,e);if(r.type===R.map)return qe(r,t,e);if(r.type===R.tag){if(e.tags&&"function"===typeof e.tags[r.value]){const n=He(t,e);return e.tags[r.value](n)}throw new Error(`${G} tag not supported (${r.value})`)}throw new Error("unsupported")}function ze(t,e){if(!(t instanceof Uint8Array))throw new Error(`${G} data to decode must be a Uint8Array`);e=Object.assign({},Ue,e);const r=e.tokenizer||new je(t,e),n=He(r,e);if(n===Fe)throw new Error(`${G} did not find any content to decode`);if(n===Ke)throw new Error(`${G} got unexpected break`);if(!r.done())throw new Error(`${G} too many terminals, data makes no sense`);return n}const Ve=42;function Ge(t){if(t.asCID!==t)return null;const e=l.CID.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new M(R.tag,Ve),new M(R.bytes,r)]}function We(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Ye(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Je={float64:!0,typeEncoders:{Object:Ge,undefined:We,number:Ye}};function Ze(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return l.CID.decode(t.subarray(1))}const Xe={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Xe.tags[Ve]=Ze;const Qe="dag-cbor",tr=113,er=t=>Le(t,Je),rr=t=>ze(t,Xe);var nr=r(73627);const ir=206;var or=r(55226);function sr(t){const e=_.decode(t),r=_.decode.bytes,n=t.slice(r);return[e,n,r]}function ar(t){return 0===t||1===t}function ur(t){const e=cr(t);if(e instanceof Error)throw e;return e}function cr(t){const[e,r]=sr(t);if(!ar(e))return new Error(`Unknown CID version ${e}`);const[n,i]=sr(r),[,o,s]=sr(i),[a,,u]=sr(o),c=i.slice(0,s+u+a),h=i.slice(s+u+a);return[l.CID.create(e,n,(0,or.decode)(c)),h]}function hr(t){let e,r,n;return"object"===typeof t?(e=t.hashFunction,r=t.expiring,n=t.tags):e=t,(t,i,o)=>{if(null!=o.value)o.value=fr(o.value,e,r,n);else{if(null==o.get)throw"Only put a Memoize() decorator on a method or get accessor.";o.get=fr(o.get,e,r,n)}}}const lr=new Map;function fr(t,e,r=0,n){const i=Symbol("__memoized_map__");return function(...o){let s;this.hasOwnProperty(i)||Object.defineProperty(this,i,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let a=this[i];if(Array.isArray(n))for(const t of n)lr.has(t)?lr.get(t).push(a):lr.set(t,[a]);if(e||o.length>0||r>0){let n;n=!0===e?o.map((t=>t.toString())).join("!"):e?e.apply(this,o):o[0];const i=`${n}__timestamp`;let u=!1;if(r>0)if(a.has(i)){let t=a.get(i);u=Date.now()-t>r}else u=!0;a.has(n)&&!u?s=a.get(n):(s=t.apply(this,o),a.set(n,s),r>0&&a.set(i,Date.now()))}else{const e=this;a.has(e)?s=a.get(e):(s=t.apply(this,o),a.set(e,s))}return s}}const dr={tile:0,"caip10-link":1,model:2,MID:3};function pr(t){const e=dr[t];if("undefined"!==typeof e)return e;throw new Error(`No stream type registered for name ${t}`)}function yr(t){const e=Object.entries(dr).find((([,e])=>e===t));if(e)return e[0];throw new Error(`No stream type registered for index ${t}`)}class gr{}gr.nameByCode=yr,gr.codeByName=pr;var mr=function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},br=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};function wr(t){const e=vr(t);if(e instanceof Error)throw e;return e}function vr(t){const[e,r]=sr(t);if(e!==ir)return new Error("fromBytes: invalid streamid, does not include streamid codec");const[n,i]=sr(r),o=cr(i);if(o instanceof Error)return o;const[s,a]=o;return a.length>0?new Error("Invalid StreamID: contains commit"):new Ar(n,s)}function _r(t){const e=Er(t);if(e instanceof Error)throw e;return e}function Er(t){const e=t.replace("ceramic://","").replace("/ceramic/",""),r=e.includes("commit")?e.split("?")[0]:e,n=w.base36.decode(r);return vr(n)}const Sr=Symbol.for("@ceramicnetwork/streamid/StreamID");class Ar{constructor(t,e){if(this._tag=Sr,!t&&0!==t)throw new Error("constructor: type required");if(!e)throw new Error("constructor: cid required");this._type="string"===typeof t?gr.codeByName(t):t,this._cid="string"===typeof e?l.CID.parse(e):e}static isInstance(t){return"object"===typeof t&&"_tag"in t&&t._tag===Sr}static async fromGenesis(t,e){const r=await b({value:e,codec:n,hasher:v.sha256});return new Ar(t,r.cid)}get type(){return this._type}get typeName(){return gr.nameByCode(this._type)}get cid(){return this._cid}get bytes(){const t=_.encode(ir),e=_.encode(this.type);return(0,nr.concat)([t,e,this.cid.bytes])}get baseID(){return new Ar(this._type,this._cid)}equals(t){return!!Ar.isInstance(t)&&(this.type===t.type&&this.cid.equals(t.cid))}toString(){return w.base36.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[Symbol.for("nodejs.util.inspect.custom")](){return`StreamID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}}Ar.fromBytes=wr,Ar.fromBytesNoThrow=vr,Ar.fromString=_r,Ar.fromStringNoThrow=Er,mr([hr(),br("design:type",String),br("design:paramtypes",[])],Ar.prototype,"typeName",null),mr([hr(),br("design:type",Uint8Array),br("design:paramtypes",[])],Ar.prototype,"bytes",null),mr([hr(),br("design:type",Ar),br("design:paramtypes",[])],Ar.prototype,"baseID",null),mr([hr(),br("design:type",Function),br("design:paramtypes",[]),br("design:returntype",String)],Ar.prototype,"toString",null),mr([hr(),br("design:type",Function),br("design:paramtypes",[]),br("design:returntype",String)],Ar.prototype,"toUrl",null);const Ir="ceramic://k3y52l7qbv1fry1fp4s0nwdarh0vahusarpposgevy0pemiykymd2ord6swtharcw",Tr="ceramic://k3y52l7qbv1fryjn62sggjh1lpn11c56qfofzmty190d62hwk1cal1c7qc5he54ow";
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */
var Rr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mr=Object.prototype.hasOwnProperty;function kr(t,e){return Mr.call(t,e)}function Cr(t){if(Array.isArray(t)){for(var e=new Array(t.length),r=0;r<e.length;r++)e[r]=""+r;return e}if(Object.keys)return Object.keys(t);var n=[];for(var i in t)kr(t,i)&&n.push(i);return n}function Or(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Pr(t){var e,r=0,n=t.length;while(r<n){if(e=t.charCodeAt(r),!(e>=48&&e<=57))return!1;r++}return!0}function Br(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function xr(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Nr(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,r=t.length;e<r;e++)if(Nr(t[e]))return!0}else if("object"===typeof t)for(var n=Cr(t),i=n.length,o=0;o<i;o++)if(Nr(t[n[o]]))return!0;return!1}function Dr(t,e){var r=[t];for(var n in e){var i="object"===typeof e[n]?JSON.stringify(e[n],null,2):e[n];"undefined"!==typeof i&&r.push(n+": "+i)}return r.join("\n")}var Lr=function(t){function e(e,r,n,i,o){var s=this.constructor,a=t.call(this,Dr(e,{name:r,index:n,operation:i,tree:o}))||this;return a.name=r,a.index=n,a.operation=i,a.tree=o,Object.setPrototypeOf(a,s.prototype),a.message=Dr(e,{name:r,index:n,operation:i,tree:o}),a}return Rr(e,t),e}(Error),Ur=Lr,jr=Or,Fr={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){var n=$r(r,this.path);n&&(n=Or(n));var i=qr(r,{op:"remove",path:this.from}).removed;return qr(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(t,e,r){var n=$r(r,this.from);return qr(r,{op:"add",path:this.path,value:Or(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:Wr(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}},Kr={add:function(t,e,r){return Pr(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:Fr.move,copy:Fr.copy,test:Fr.test,_get:Fr._get};function $r(t,e){if(""==e)return t;var r={op:"_get",path:e};return qr(t,r),r.value}function qr(t,e,r,n,i,o){if(void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=0),r&&("function"==typeof r?r(e,0,t,e.path):Vr(e,0)),""===e.path){var s={newDocument:t};if("add"===e.op)return s.newDocument=e.value,s;if("replace"===e.op)return s.newDocument=e.value,s.removed=t,s;if("move"===e.op||"copy"===e.op)return s.newDocument=$r(t,e.from),"move"===e.op&&(s.removed=t),s;if("test"===e.op){if(s.test=Wr(t,e.value),!1===s.test)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return s.newDocument=t,s}if("remove"===e.op)return s.removed=t,s.newDocument=null,s;if("_get"===e.op)return e.value=t,s;if(r)throw new Ur("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return s}n||(t=Or(t));var a=e.path||"",u=a.split("/"),c=t,h=1,l=u.length,f=void 0,d=void 0,p=void 0;p="function"==typeof r?r:Vr;while(1){if(d=u[h],d&&-1!=d.indexOf("~")&&(d=xr(d)),i&&("__proto__"==d||"prototype"==d&&h>0&&"constructor"==u[h-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===f&&(void 0===c[d]?f=u.slice(0,h).join("/"):h==l-1&&(f=e.path),void 0!==f&&p(e,0,t,f)),h++,Array.isArray(c)){if("-"===d)d=c.length;else{if(r&&!Pr(d))throw new Ur("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);Pr(d)&&(d=~~d)}if(h>=l){if(r&&"add"===e.op&&d>c.length)throw new Ur("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);s=Kr[e.op].call(e,c,d,t);if(!1===s.test)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return s}}else if(h>=l){s=Fr[e.op].call(e,c,d,t);if(!1===s.test)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return s}if(c=c[d],r&&h<l&&(!c||"object"!==typeof c))throw new Ur("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,t)}}function Hr(t,e,r,n,i){if(void 0===n&&(n=!0),void 0===i&&(i=!0),r&&!Array.isArray(e))throw new Ur("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=Or(t));for(var o=new Array(e.length),s=0,a=e.length;s<a;s++)o[s]=qr(t,e[s],r,!0,i,s),t=o[s].newDocument;return o.newDocument=t,o}function zr(t,e,r){var n=qr(t,e);if(!1===n.test)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",r,e,t);return n.newDocument}function Vr(t,e,r,n){if("object"!==typeof t||null===t||Array.isArray(t))throw new Ur("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(!Fr[t.op])throw new Ur("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r);if("string"!==typeof t.path)throw new Ur("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new Ur('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if(("move"===t.op||"copy"===t.op)&&"string"!==typeof t.from)throw new Ur("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new Ur("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&Nr(t.value))throw new Ur("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r)if("add"==t.op){var i=t.path.split("/").length,o=n.split("/").length;if(i!==o+1&&i!==o)throw new Ur("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==n)throw new Ur("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if("move"===t.op||"copy"===t.op){var s={op:"_get",path:t.from,value:void 0},a=Gr([s],r);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new Ur("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}function Gr(t,e,r){try{if(!Array.isArray(t))throw new Ur("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Hr(Or(e),Or(t),r||!0);else{r=r||Vr;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(i){if(i instanceof Ur)return i;throw i}}function Wr(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var r,n,i,o=Array.isArray(t),s=Array.isArray(e);if(o&&s){if(n=t.length,n!=e.length)return!1;for(r=n;0!==r--;)if(!Wr(t[r],e[r]))return!1;return!0}if(o!=s)return!1;var a=Object.keys(t);if(n=a.length,n!==Object.keys(e).length)return!1;for(r=n;0!==r--;)if(!e.hasOwnProperty(a[r]))return!1;for(r=n;0!==r--;)if(i=a[r],!Wr(t[i],e[i]))return!1;return!0}return t!==t&&e!==e}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */
var Yr=new WeakMap,Jr=function(){function t(t){this.observers=new Map,this.obj=t}return t}(),Zr=function(){function t(t,e){this.callback=t,this.observer=e}return t}();function Xr(t){return Yr.get(t)}function Qr(t,e){return t.observers.get(e)}function tn(t,e){t.observers.delete(e.callback)}function en(t,e){e.unobserve()}function rn(t,e){var r,n=[],i=Xr(t);if(i){var o=Qr(i,e);r=o&&o.observer}else i=new Jr(t),Yr.set(t,i);if(r)return r;if(r={},i.value=Or(t),e){r.callback=e,r.next=null;var s=function(){nn(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};"undefined"!==typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=t,r.unobserve=function(){nn(r),clearTimeout(r.next),tn(i,r),"undefined"!==typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(e,new Zr(e,r)),r}function nn(t,e){void 0===e&&(e=!1);var r=Yr.get(t.object);on(r.value,t.object,t.patches,"",e),t.patches.length&&Hr(r.value,t.patches);var n=t.patches;return n.length>0&&(t.patches=[],t.callback&&t.callback(n)),n}function on(t,e,r,n,i){if(e!==t){"function"===typeof e.toJSON&&(e=e.toJSON());for(var o=Cr(e),s=Cr(t),a=!1,u=s.length-1;u>=0;u--){var c=s[u],h=t[c];if(!kr(e,c)||void 0===e[c]&&void 0!==h&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(i&&r.push({op:"test",path:n+"/"+Br(c),value:Or(h)}),r.push({op:"remove",path:n+"/"+Br(c)}),a=!0):(i&&r.push({op:"test",path:n,value:t}),r.push({op:"replace",path:n,value:e}),!0);else{var l=e[c];"object"==typeof h&&null!=h&&"object"==typeof l&&null!=l&&Array.isArray(h)===Array.isArray(l)?on(h,l,r,n+"/"+Br(c),i):h!==l&&(!0,i&&r.push({op:"test",path:n+"/"+Br(c),value:Or(h)}),r.push({op:"replace",path:n+"/"+Br(c),value:Or(l)}))}}if(a||o.length!=s.length)for(u=0;u<o.length;u++){c=o[u];kr(t,c)||void 0===e[c]||r.push({op:"add",path:n+"/"+Br(c),value:Or(e[c])})}}}function sn(t,e,r){void 0===r&&(r=!1);var n=[];return on(t,e,n,"",r),n}var an,un=Object.assign({},i,o,{JsonPatchError:Lr,deepClone:Or,escapePathComponent:Br,unescapePathComponent:xr}),cn=r(33736),hn=r(21257);(function(t){t[t["PREFER_CACHE"]=0]="PREFER_CACHE",t[t["SYNC_ALWAYS"]=1]="SYNC_ALWAYS",t[t["NEVER_SYNC"]=2]="NEVER_SYNC"})(an||(an={}));var ln,fn,dn,pn=function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},yn=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},gn=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r},mn=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};function bn(t){const e=wn(t);if(e instanceof Error)throw e;return e}function wn(t){const[e,r]=sr(t);if(e!==ir)return new Error("fromBytes: invalid streamid, does not include streamid codec");const[n,i]=sr(r),o=ur(i);if(o instanceof Error)return o;const[s,a]=o;if(0===a.length)return new Error("No commit information provided");if(1===a.length)return new Tn(n,s,a[0]);{const[t]=ur(a);return new Tn(n,s,t)}}function vn(t){try{return"string"===typeof t?l.CID.parse(t):l.CID.asCID(t)}catch{return}}function _n(t,e=null){if(!e)return null;const r=vn(e);if(r)return t.equals(r)?null:r;if("0"===String(e))return null;throw new Error("Cannot specify commit as a number except to request commit 0 (the genesis commit)")}function En(t){const e=Sn(t);if(e instanceof Error)throw e;return e}function Sn(t){const e=t.replace("ceramic://","").replace("/ceramic/","");if(e.includes("commit")){const t=e.split("?")[1].split("=")[1],r=e.split("?")[0];return In(Ar.fromString(r),t)}return wn(w.base36.decode(e))}const An=Symbol.for("@ceramicnetwork/streamid/CommitID");function In(t,e){return new Tn(t.type,t.cid,e)}class Tn{constructor(t,e,r=null){if(this._tag=An,ln.set(this,void 0),fn.set(this,void 0),dn.set(this,void 0),!t&&0!==t)throw new Error("constructor: type required");if(!e)throw new Error("constructor: cid required");gn(this,ln,"string"===typeof t?gr.codeByName(t):t,"f"),gn(this,fn,"string"===typeof e?l.CID.parse(e):e,"f"),gn(this,dn,_n(mn(this,fn,"f"),r),"f")}static isInstance(t){return"object"===typeof t&&"_tag"in t&&t._tag===An}get baseID(){return new Ar(mn(this,ln,"f"),mn(this,fn,"f"))}get type(){return mn(this,ln,"f")}get typeName(){return gr.nameByCode(mn(this,ln,"f"))}get cid(){return mn(this,fn,"f")}get commit(){return mn(this,dn,"f")||mn(this,fn,"f")}get bytes(){const t=_.encode(ir),e=_.encode(this.type),r=mn(this,dn,"f")?.bytes||new Uint8Array([0]);return(0,nr.concat)([t,e,this.cid.bytes,r])}equals(t){return this.type===t.type&&this.cid.equals(t.cid)&&this.commit.equals(t.commit)}toString(){return w.base36.encode(this.bytes)}toUrl(){return`ceramic://${this.toString()}`}[(ln=new WeakMap,fn=new WeakMap,dn=new WeakMap,Symbol.for("nodejs.util.inspect.custom"))](){return`CommitID(${this.toString()})`}[Symbol.toPrimitive](){return this.toString()}}Tn.fromBytes=bn,Tn.fromBytesNoThrow=wn,Tn.fromString=En,Tn.fromStringNoThrow=Sn,Tn.make=In,pn([hr(),yn("design:type",Ar),yn("design:paramtypes",[])],Tn.prototype,"baseID",null),pn([hr(),yn("design:type",String),yn("design:paramtypes",[])],Tn.prototype,"typeName",null),pn([hr(),yn("design:type",l.CID),yn("design:paramtypes",[])],Tn.prototype,"commit",null),pn([hr(),yn("design:type",Uint8Array),yn("design:paramtypes",[])],Tn.prototype,"bytes",null),pn([hr(),yn("design:type",Function),yn("design:paramtypes",[]),yn("design:returntype",String)],Tn.prototype,"toString",null),pn([hr(),yn("design:type",Function),yn("design:paramtypes",[]),yn("design:returntype",String)],Tn.prototype,"toUrl",null);var Rn=function(t,e){return Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Rn(t,e)};function Mn(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Rn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function kn(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))}function Cn(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(r)throw new TypeError("Generator is already executing.");while(s)try{if(r=1,n&&(i=2&o[0]?n["return"]:o[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function On(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pn(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{while((void 0===e||e-- >0)&&!(n=o.next()).done)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s}function Bn(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}function xn(t){return this instanceof xn?(this.v=t,this):new xn(t)}function Nn(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{u(i[t](e))}catch(r){l(o[0][3],r)}}function u(t){t.value instanceof xn?Promise.resolve(t.value.v).then(c,h):l(o[0][2],t)}function c(t){a("next",t)}function h(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Dn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"===typeof On?On(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){e=t[r](e),i(n,o,e.done,e.value)}))}}function i(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)}}Object.create;function Ln(t){return"function"===typeof t}function Un(t){var e=function(t){Error.call(t),t.stack=(new Error).stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var jn=Un((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function Fn(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var Kn=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,r,n,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=On(o),a=s.next();!a.done;a=s.next()){var u=a.value;u.remove(this)}}catch(p){t={error:p}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else o.remove(this);var c=this.initialTeardown;if(Ln(c))try{c()}catch(y){i=y instanceof jn?y.errors:[y]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var l=On(h),f=l.next();!f.done;f=l.next()){var d=f.value;try{Hn(d)}catch(g){i=null!==i&&void 0!==i?i:[],g instanceof jn?i=Bn(Bn([],Pn(i)),Pn(g.errors)):i.push(g)}}}catch(m){r={error:m}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}if(i)throw new jn(i)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Hn(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Fn(e,t)},t.prototype.remove=function(e){var r=this._finalizers;r&&Fn(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),$n=Kn.EMPTY;function qn(t){return t instanceof Kn||t&&"closed"in t&&Ln(t.remove)&&Ln(t.add)&&Ln(t.unsubscribe)}function Hn(t){Ln(t)?t():t.unsubscribe()}var zn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Vn={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Vn.delegate;return(null===i||void 0===i?void 0:i.setTimeout)?i.setTimeout.apply(i,Bn([t,e],Pn(r))):setTimeout.apply(void 0,Bn([t,e],Pn(r)))},clearTimeout:function(t){var e=Vn.delegate;return((null===e||void 0===e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Gn(t){Vn.setTimeout((function(){var e=zn.onUnhandledError;if(!e)throw t;e(t)}))}function Wn(){}var Yn=function(){return Xn("C",void 0,void 0)}();function Jn(t){return Xn("E",void 0,t)}function Zn(t){return Xn("N",t,void 0)}function Xn(t,e,r){return{kind:t,value:e,error:r}}var Qn=null;function ti(t){if(zn.useDeprecatedSynchronousErrorHandling){var e=!Qn;if(e&&(Qn={errorThrown:!1,error:null}),t(),e){var r=Qn,n=r.errorThrown,i=r.error;if(Qn=null,n)throw i}}else t()}function ei(t){zn.useDeprecatedSynchronousErrorHandling&&Qn&&(Qn.errorThrown=!0,Qn.error=t)}var ri=function(t){function e(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,qn(e)&&e.add(r)):r.destination=hi,r}return Mn(e,t),e.create=function(t,e,r){return new si(t,e,r)},e.prototype.next=function(t){this.isStopped?ci(Zn(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?ci(Jn(t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?ci(Yn,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Kn),ni=Function.prototype.bind;function ii(t,e){return ni.call(t,e)}var oi=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(r){ai(r)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(r){ai(r)}else ai(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){ai(e)}},t}(),si=function(t){function e(e,r,n){var i,o,s=t.call(this)||this;Ln(e)||!e?i={next:null!==e&&void 0!==e?e:void 0,error:null!==r&&void 0!==r?r:void 0,complete:null!==n&&void 0!==n?n:void 0}:s&&zn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=function(){return s.unsubscribe()},i={next:e.next&&ii(e.next,o),error:e.error&&ii(e.error,o),complete:e.complete&&ii(e.complete,o)}):i=e;return s.destination=new oi(i),s}return Mn(e,t),e}(ri);function ai(t){zn.useDeprecatedSynchronousErrorHandling?ei(t):Gn(t)}function ui(t){throw t}function ci(t,e){var r=zn.onStoppedNotification;r&&Vn.setTimeout((function(){return r(t,e)}))}var hi={closed:!0,next:Wn,error:ui,complete:Wn},li=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}();function fi(t){return t}function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pi(t)}function pi(t){return 0===t.length?fi:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var yi,gi,mi,bi,wi=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this,i=Ei(t)?t:new si(t,e,r);return ti((function(){var t=n,e=t.operator,r=t.source;i.add(e?e.call(i,r):r?n._subscribe(i):n._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return e=vi(e),new e((function(e,n){var i=new si({next:function(e){try{t(e)}catch(r){n(r),i.unsubscribe()}},error:n,complete:e});r.subscribe(i)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[li]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pi(t)(this)},t.prototype.toPromise=function(t){var e=this;return t=vi(t),new t((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function vi(t){var e;return null!==(e=null!==t&&void 0!==t?t:zn.Promise)&&void 0!==e?e:Promise}function _i(t){return t&&Ln(t.next)&&Ln(t.error)&&Ln(t.complete)}function Ei(t){return t&&t instanceof ri||_i(t)&&qn(t)}(function(t){t[t["GENESIS"]=0]="GENESIS",t[t["PARTIAL"]=1]="PARTIAL",t[t["SIGNED"]=2]="SIGNED"})(yi||(yi={})),function(t){t[t["NOT_REQUESTED"]=0]="NOT_REQUESTED",t[t["PENDING"]=1]="PENDING",t[t["PROCESSING"]=2]="PROCESSING",t[t["ANCHORED"]=3]="ANCHORED",t[t["FAILED"]=4]="FAILED"}(gi||(gi={})),function(t){t[t["GENESIS"]=0]="GENESIS",t[t["SIGNED"]=1]="SIGNED",t[t["ANCHOR"]=2]="ANCHOR"}(mi||(mi={}));class Si extends wi{constructor(t,e){super((e=>{t.subscribe(e)})),this.state$=t,this._context=e}get id(){return new Ar(this.state$.value.type,this.state$.value.log[0].cid)}get api(){return this._context.api}get content(){const{next:t,content:e}=this.state$.value;return cn(t?.content??e)}get controllers(){return this.metadata.controllers}get tip(){return this.state$.value.log[this.state$.value.log.length-1].cid}get commitId(){return Tn.make(this.id,this.tip)}get allCommitIds(){return this.state$.value.log.map((({cid:t})=>Tn.make(this.id,t)))}get anchorCommitIds(){return this.state$.value.log.filter((({type:t})=>t===mi.ANCHOR)).map((({cid:t})=>Tn.make(this.id,t)))}get state(){return cn(this.state$.value)}async sync(t={}){t={sync:an.PREFER_CACHE,...t};const e=await this.api.loadStream(this.id,t);this.state$.next(e.state)}async requestAnchor(){return this.api.requestAnchor(this.id)}}function Ai(){return t=>{}}(function(t){function e(t){if(Ar.isInstance(t))return t;if(Tn.isInstance(t))return t;if(t instanceof Uint8Array){const e=Tn.fromBytesNoThrow(t);return e instanceof Error?Ar.fromBytes(t):e}if("string"===typeof t){const e=Tn.fromStringNoThrow(t);return e instanceof Error?Ar.fromString(t):e}throw new Error("Can not build CommitID or StreamID")}t.from=e})(bi||(bi={}));var Ii,Ti=function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};const Ri={anchor:!0,publish:!0,pin:!0,sync:an.PREFER_CACHE},Mi={sync:an.PREFER_CACHE},ki={anchor:!0,publish:!0,throwOnInvalidCommit:!0};function Ci(t,e){if("string"===typeof t?.schema)try{Tn.fromString(t.schema)}catch{throw new Error("Schema must be a CommitID")}const r={controllers:t?.controllers,family:t?.family,schema:t?.schema?.toString(),tags:t?.tags};if(e)t?.deterministic||(r.unique=nr.toString((0,hn.randomBytes)(12),"base64")),t?.forbidControllerChange&&(r.forbidControllerChange=!0);else{if(void 0!==t?.deterministic||void 0!==t?.unique)throw new Error("Cannot change 'deterministic' or 'unique' properties on existing Streams");if(void 0!==t?.forbidControllerChange)throw new Error("Cannot change 'forbidControllerChange' property on existing Streams")}return Object.keys(r).forEach((t=>void 0===r[t]&&delete r[t])),r}async function Oi(t){if(null==t.did)throw new Error("No DID provided");t.did.authenticated||(await t.did.authenticate(),t.loggerProvider&&t.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${t.did.id}`))}async function Pi(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}let Bi=Ii=class extends Si{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){const{next:t,metadata:e}=this.state$.value;return cn(t?.metadata??e)}static async create(t,e,r,n={}){n={...Ri,...n},r?.deterministic||void 0!=n.syncTimeoutSeconds||(n.syncTimeoutSeconds=0);const i=n.asDID?{did:n.asDID}:t,o=await Ii.makeGenesis(i,e,r);return t.createStreamFromGenesis(Ii.STREAM_TYPE_ID,o,n)}static async createFromGenesis(t,e,r={}){r={...Ri,...r},e.header?.unique&&void 0==r.syncTimeoutSeconds&&(r.syncTimeoutSeconds=0);const n=e.data?await Ii._signDagJWS(t,e):e;return t.createStreamFromGenesis(Ii.STREAM_TYPE_ID,n,r)}static async deterministic(t,e,r={}){if(r={...Ri,...r},e={...e,deterministic:!0},null==e.family&&null==e.tags)throw new Error("Family and/or tags are required when creating a deterministic tile document");const n=await Ii.makeGenesis(t,null,e);return t.createStreamFromGenesis(Ii.STREAM_TYPE_ID,n,r)}static async load(t,e,r={}){r={...Mi,...r};const n=bi.from(e);if(n.type!=Ii.STREAM_TYPE_ID)throw new Error(`StreamID ${n.toString()} does not refer to a '${Ii.STREAM_TYPE_NAME}' stream, but to a ${n.typeName}`);return t.loadStream(n,r)}async update(t,e,r={}){r={...ki,...r};const n=r.asDID?{did:r.asDID}:this.api,i=await this.makeCommit(n,t,e),o=await this.api.applyCommit(this.id,i,r);this.state$.next(o.state)}async patch(t,e={}){e={...ki,...e};const r=Ci(this.metadata,!1),n={header:r,data:t,prev:this.tip,id:this.id.cid},i=await Ii._signDagJWS(this.api,n),o=await this.api.applyCommit(this.id,i,e);this.state$.next(o.state)}makeReadOnly(){this.update=Pi,this.patch=Pi,this.sync=Pi,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}async makeCommit(t,e,r){const n=await this._makeRawCommit(t,e,r);return Ii._signDagJWS(t,n)}async _makeRawCommit(t,e,r){const n=Ci(r,!1);if(null==e&&(e=this.content),n.controllers){if(1!==n.controllers.length)throw new Error("Exactly one controller must be specified");if(!n.controllers[0])throw new Error("Controller cannot be updated to an undefined value.")}const i=un.compare(this.content,e),o={header:n,data:i,prev:this.tip,id:this.state.log[0].cid};return o}static async makeGenesis(t,e,r){if(r||(r={}),!r.controllers||0===r.controllers.length){if(!t.did)throw new Error("No controllers specified");await Oi(t),r.controllers=[t.did.hasParent?t.did.parent:t.did.id]}if(1!==r.controllers?.length)throw new Error("Exactly one controller must be specified");const n=Ci(r,!0);if(r?.deterministic&&e)throw new Error("Initial content must be null when creating a deterministic Tile document");if(null==e){const t={header:n};return er(t),t}const i={data:e,header:n};return Ii._signDagJWS(t,i)}static async _signDagJWS(t,e){return await Oi(t),t.did.createDagJWS(e)}};Bi.STREAM_TYPE_NAME="tile",Bi.STREAM_TYPE_ID=0,Bi=Ii=Ti([Ai()],Bi);var xi=r(45208);function Ni(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Di(t,e){return e.get?e.get.call(t):e.value}function Li(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Ui(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function ji(t,e){var r=Ui(t,e,"get");return Di(t,r)}function Fi(t,e,r){Ni(t,e),e.set(t,r)}function Ki(t,e,r){var n=Ui(t,e,"set");return Li(t,n,r),r}function $i(t){return"string"===typeof t||Tn.isInstance(t)||Ar.isInstance(t)?{streamId:t}:{streamId:t.streamId,genesis:t.genesis}}function qi(t){return"string"===typeof t?bi.from(t).toString():Tn.isInstance(t)||Ar.isInstance(t)?t.toString():t.streamId.toString()}async function Hi(t){const e=await Bi.makeGenesis({},null,{...t,deterministic:!0}),r=await Ar.fromGenesis("tile",e);return{genesis:e,streamId:r}}const zi=()=>Promise.resolve([]);var Vi=new WeakMap,Gi=new WeakMap;class Wi extends xi{cache(t){if(!ji(this,Gi))return!1;const e=t.id.toString();return this.clear(e).prime(e,t),!0}async create(t,e,r){const n=await Bi.create(ji(this,Vi),t,e,r);return this.cache(n),n}async deterministic(t,e){const r=await Hi(t);try{return await super.load(r)}catch(n){const t=await Bi.createFromGenesis(ji(this,Vi),r.genesis,e);return this.cache(t),t}}async load(t){return await super.load(t)}async update(t,e,r,n){const i=qi(t);this.clear(i);const o=await this.load({streamId:i});return await o.update(e,r,n),o}constructor(t){super(zi,{cache:!0,cacheKeyFn:qi,cacheMap:null!=t.cache&&"boolean"!==typeof t.cache?t.cache:void 0}),Fi(this,Vi,{writable:!0,value:void 0}),Fi(this,Gi,{writable:!0,value:void 0}),this._batchLoadFn=async e=>{t.cache||this.clearAll();const r=await t.ceramic.multiQuery(e.map($i),t.multiqueryTimeout);return e.map((t=>{const e=qi(t),n=r[e];return n||new Error(`Failed to load stream: ${e}`)}))},Ki(this,Vi,t.ceramic),Ki(this,Gi,!!t.cache)}}function Yi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ji(t,e){return e.get?e.get.call(t):e.value}function Zi(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Xi(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Qi(t,e){var r=Xi(t,e,"get");return Ji(t,r)}function to(t,e,r){Yi(t,e),e.set(t,r)}function eo(t,e,r){var n=Xi(t,e,"set");return Zi(t,n,r),r}var ro=new WeakMap,no=new WeakMap;class io{get aliases(){return Qi(this,ro)}get loader(){return Qi(this,no)}getDefinitionID(t){return Qi(this,ro).definitions[t]??null}getSchemaURL(t){return Qi(this,ro).schemas[t]??null}getTileID(t){return Qi(this,ro).tiles[t]??null}async loadTile(t){const e=this.getTileID(t);if(null==e)throw new Error(`Tile alias "${t}" is not defined`);return await Qi(this,no).load(e)}async createTile(t,e,r={}){const n=this.getSchemaURL(t);if(null==n)throw new Error(`Schema alias "${t}" is not defined`);const{controller:i,...o}=r,s={schema:n};return null!=i&&(s.controllers=[i]),await Qi(this,no).create(e,s,o)}constructor(t){if(to(this,ro,{writable:!0,value:void 0}),to(this,no,{writable:!0,value:void 0}),eo(this,ro,t.aliases),null!=t.loader)eo(this,no,t.loader);else{if(null==t.ceramic)throw new Error("Invalid DataModel parameters: missing ceramic or loader");eo(this,no,new Wi({ceramic:t.ceramic,cache:t.cache}))}}}function oo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function so(t,e){return e.get?e.get.call(t):e.value}function ao(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function uo(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function co(t,e){var r=uo(t,e,"get");return so(t,r)}function ho(t,e,r){oo(t,e),e.set(t,r)}function lo(t,e,r){var n=uo(t,e,"set");return ao(t,n,r),r}var fo=new WeakMap,po=new WeakMap,yo=new WeakMap,go=new WeakMap;class mo{_createValuePromise(){lo(this,yo,new Promise(((t,e)=>{lo(this,go,{resolve:t,reject:e})})))}change(t){return new Promise(((e,r)=>{const n=async n=>{try{const r=await t(n);e(),this._next(r)}catch(i){r(i),this._next(n)}};co(this,po).push({reject:r,run:n}),1===co(this,po).length&&this._start()}))}async changeContent(t){const e=async e=>(await e.update(t(e.content),e.metadata),e);return await this.change(e)}async get(){return 0===co(this,po).length?await co(this,fo).call(this):await co(this,yo)}async _start(){try{const t=await co(this,fo).call(this);this._next(t)}catch(t){co(this,po).forEach((e=>{e.reject(t)})),lo(this,po,[]),co(this,go).reject(t),this._createValuePromise()}}_next(t){const e=co(this,po).shift();null==e?this._end(t):e.run(t)}_end(t){co(this,go).resolve(t),this._createValuePromise()}constructor(t){ho(this,fo,{writable:!0,value:void 0}),ho(this,po,{writable:!0,value:[]}),ho(this,yo,{writable:!0,value:void 0}),ho(this,go,{writable:!0,value:void 0}),lo(this,fo,t),this._createValuePromise()}}const bo=/^did:([A-Za-z0-9]+):([A-Za-z0-9.\-:_]+)$/;function wo(t){return bo.test(t)}function vo(t){if(!wo(t))throw new Error(`Invalid DID: ${t}`)}function _o(t){return vo(t),{controllers:[t],family:"IDX"}}function Eo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function So(t,e){return e.get?e.get.call(t):e.value}function Ao(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Io(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function To(t,e){var r=Io(t,e,"get");return So(t,r)}function Ro(t,e,r){Eo(t,e),e.set(t,r)}function Mo(t,e,r){var n=Io(t,e,"set");return Ao(t,n,r),r}var ko=new WeakMap,Co=new WeakMap,Oo=new WeakMap,Po=new WeakMap,Bo=new WeakMap;class xo{get authenticated(){return null!=To(this,ko).did}get ceramic(){return To(this,ko)}get id(){if(null!=To(this,Co))return To(this,Co);if(null==To(this,ko).did)throw new Error("Ceramic instance is not authenticated");return To(this,ko).did.hasParent?To(this,ko).did.parent:To(this,ko).did.id}get loader(){return To(this,Po)}get model(){return To(this,Bo)}async has(t,e){const r=this.getDefinitionID(t),n=await this.getRecordID(r,e);return null!=n}async get(t,e){const r=this.getDefinitionID(t);return await this.getRecord(r,e)}async getMultiple(t,e){const r=this.getDefinitionID(t),n=await Promise.all(e.map((async t=>{const{genesis:e,streamId:n}=await Hi(_o(t));return{genesis:e,streamId:n.toString(),paths:[r]}}))),i=await To(this,ko).multiQuery(n),o=[];for(const s of n){const t=i[s.streamId]?.content?.[r],e=t?i[Ar.fromString(t).toString()]:null;o.push(e?.content??null)}return o}async set(t,e,r={}){const n=this.getDefinitionID(t),[i,o]=await this._setRecordOnly(n,e,r);return i&&await this._setReference(r.controller??this.id,n,o),o}async merge(t,e,r={}){const n=this.getDefinitionID(t),i=await this.getRecord(n),o=i?{...i,...e}:e;return await this.setRecord(n,o,r)}async setAll(t,e={}){const r=Object.entries(t).map((async([t,r])=>{const n=this.getDefinitionID(t),[i,o]=await this._setRecordOnly(n,r,e);return[i,n,o]})),n=await Promise.all(r),i=n.reduce(((t,[e,r,n])=>(e&&(t[r]=n.toUrl()),t)),{});return await this._setReferences(e.controller??this.id,i),i}async setDefaults(t,e={}){const r=await this.getIndex()??{},n=Object.entries(t).map((([t,e])=>[this.getDefinitionID(t),e])).filter((t=>null==r[t[0]])).map((async([t,r])=>{const n=await this.getDefinition(t),i=await this._createRecord(n,r,e);return{[t]:i.toUrl()}})),i=await Promise.all(n),o=i.reduce(((t,e)=>Object.assign(t,e)),{});return await this._setReferences(e.controller??this.id,o),o}async remove(t,e=this.id){await this._getIndexProxy(e).changeContent((e=>(null!=e&&delete e[this.getDefinitionID(t)],e)))}async getIndex(t=this.id){const e=this.authenticated&&t===this.id?await this._getIndexProxy(t).get():await this._getIDXDoc(t);return e?e.content:null}iterator(t){let e,r=0;return{[Symbol.asyncIterator](){return this},next:async()=>{if(null==e){const r=await this.getIndex(t);e=Object.entries(r??{})}if(r===e.length)return{done:!0,value:null};const[n,i]=e[r++],o=await To(this,Po).load(i);return{done:!1,value:{key:n,id:i,record:o.content}}}}}async _createIDXDoc(t){return await To(this,Po).deterministic(_o(t))}async _getIDXDoc(t){const e=await this._createIDXDoc(t);if(null==e.content||null==e.metadata.schema)return null;if(e.metadata.schema!==Tr)throw new Error("Invalid document: schema is not IdentityIndex");return e}async _getOwnIDXDoc(t){const e=await this._createIDXDoc(t);if(null==e.content||null==e.metadata.schema)await e.update({},{schema:Tr});else if(e.metadata.schema!==Tr)throw new Error("Invalid document: schema is not IdentityIndex");return e}_getIndexProxy(t){let e=To(this,Oo)[t];return null==e&&(e=new mo((async()=>await this._getOwnIDXDoc(t))),To(this,Oo)[t]=e),e}getDefinitionID(t){return To(this,Bo).getDefinitionID(t)??t}async getDefinition(t){const e=await To(this,Po).load(t);if(e.metadata.schema!==Ir)throw new Error("Invalid document: schema is not Definition");return{...e.content,id:e.id}}async getRecordID(t,e){const r=await this.getIndex(e??this.id);return r?.[t]??null}async getRecordDocument(t,e){const r=await this.getRecordID(t,e);return r?await To(this,Po).load(r):null}async getRecord(t,e){const r=await this.getRecordDocument(t,e);return r?r.content:null}async setRecord(t,e,r={}){const[n,i]=await this._setRecordOnly(t,e,r);return n&&await this._setReference(r.controller??this.id,t,i),i}async _setRecordOnly(t,e,r){const n=await this.getRecordID(t,r.controller??this.id);if(null==n){const n=await this.getDefinition(t),i=await this._createRecord(n,e,r);return[!0,i]}{const t=await To(this,Po).update(n,e);return[!1,t.id]}}async _createRecord(t,e,{controller:r,pin:n}){const i=await To(this,Po).deterministic({controllers:[r??this.id],family:t.id.toString()},{pin:n});return await i.update(e,{schema:t.schema}),i.id}async _setReference(t,e,r){await this._getIndexProxy(t).changeContent((t=>({...t,[e]:r.toUrl()})))}async _setReferences(t,e){0!==Object.keys(e).length&&await this._getIndexProxy(t).changeContent((t=>({...t,...e})))}constructor(t){Ro(this,ko,{writable:!0,value:void 0}),Ro(this,Co,{writable:!0,value:void 0}),Ro(this,Oo,{writable:!0,value:{}}),Ro(this,Po,{writable:!0,value:void 0}),Ro(this,Bo,{writable:!0,value:void 0});const{cache:e,ceramic:r,id:n,loader:i,model:o}=t;Mo(this,ko,r),Mo(this,Co,n),Mo(this,Po,i??new Wi({ceramic:r,cache:e})),Mo(this,Bo,o instanceof io?o:new io({loader:To(this,Po),aliases:o}))}}var No=Un((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Do=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Mn(e,t),e.prototype.lift=function(t){var e=new Lo(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new No},e.prototype.next=function(t){var e=this;ti((function(){var r,n;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var i=On(e.currentObservers),o=i.next();!o.done;o=i.next()){var s=o.value;s.next(t)}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},e.prototype.error=function(t){var e=this;ti((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;var r=e.observers;while(r.length)r.shift().error(t)}}))},e.prototype.complete=function(){var t=this;ti((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;var e=t.observers;while(e.length)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,r=this,n=r.hasError,i=r.isStopped,o=r.observers;return n||i?$n:(this.currentObservers=null,o.push(t),new Kn((function(){e.currentObservers=null,Fn(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,n=e.thrownError,i=e.isStopped;r?t.error(n):i&&t.complete()},e.prototype.asObservable=function(){var t=new wi;return t.source=this,t},e.create=function(t,e){return new Lo(t,e)},e}(wi),Lo=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return Mn(e,t),e.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},e.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:$n},e}(Do);function Uo(t){return Ln(null===t||void 0===t?void 0:t.lift)}function jo(t){return function(e){if(Uo(e))return e.lift((function(e){try{return t(e,this)}catch(r){this.error(r)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Fo(t,e,r,n,i){return new Ko(t,e,r,n,i)}var Ko=function(t){function e(e,r,n,i,o,s){var a=t.call(this,e)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=r?function(t){try{r(t)}catch(n){e.error(n)}}:t.prototype._next,a._error=i?function(t){try{i(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=n?function(){try{n()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return Mn(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(ri);function $o(t,e){return jo((function(r,n){var i=0;r.subscribe(Fo(n,(function(r){n.next(t.call(e,r,i++))})))}))}function qo(t,e){return jo((function(r,n){var i=0;r.subscribe(Fo(n,(function(r){return t.call(e,r,i++)&&n.next(r)})))}))}var Ho=r(15941);class zo extends Do{next(t){this._sink.next?.(t)}error(t){this._sink.error?.(t)}complete(){this._sink.complete?.()}_subscribe(t){return this._source.subscribe(t)??Kn.EMPTY}constructor(t,e){super(),this._source=t,this._sink=e}}function Vo(t){return function(e){return{__tw:!0,ns:t,msg:e}}}function Go(t){return function(e){if(!0!==e.__tw)throw new Error("Input is not a wrapped message");if("string"!==typeof e.ns)throw new Error("Invalid namespace type for wrapped message: expected a string, got "+typeof e.ns);if(e.ns!==t)throw new Error(`Invalid namespace for wrapped message: expected ${t}, got ${e.ns}`);return e.msg}}function Wo(t){return{wrap:Vo(t),unwrap:Go(t)}}function Yo(t,e={}){if(e.throwWhenInvalid)return di($o(t));const r="function"===typeof e.onInvalidInput?e.onInvalidInput:function(t,e){Ho.warn("Invalid transport input",t,e)};return di($o((e=>{try{return t(e)}catch(n){return r(e,n),null}})),qo((t=>null!==t)))}function Jo(t,e){return{...t,next:r=>{null!=r&&t.next(e(r))}}}var Zo=function(t){return t&&"number"===typeof t.length&&"function"!==typeof t};function Xo(t){return Ln(null===t||void 0===t?void 0:t.then)}function Qo(t){return Ln(t[li])}function ts(t){return Symbol.asyncIterator&&Ln(null===t||void 0===t?void 0:t[Symbol.asyncIterator])}function es(t){return new TypeError("You provided "+(null!==t&&"object"===typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function rs(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var ns=rs();function is(t){return Ln(null===t||void 0===t?void 0:t[ns])}function os(t){return Nn(this,arguments,(function(){var e,r,n,i;return Cn(this,(function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,xn(e.read())];case 3:return r=o.sent(),n=r.value,i=r.done,i?[4,xn(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,xn(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function ss(t){return Ln(null===t||void 0===t?void 0:t.getReader)}function as(t){if(t instanceof wi)return t;if(null!=t){if(Qo(t))return us(t);if(Zo(t))return cs(t);if(Xo(t))return hs(t);if(ts(t))return fs(t);if(is(t))return ls(t);if(ss(t))return ds(t)}throw es(t)}function us(t){return new wi((function(e){var r=t[li]();if(Ln(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}function cs(t){return new wi((function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()}))}function hs(t){return new wi((function(e){t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Gn)}))}function ls(t){return new wi((function(e){var r,n;try{for(var i=On(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()}))}function fs(t){return new wi((function(e){ps(t,e).catch((function(t){return e.error(t)}))}))}function ds(t){return fs(os(t))}function ps(t,e){var r,n,i,o;return kn(this,void 0,void 0,(function(){var s,a;return Cn(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=Dn(t),u.label=1;case 1:return[4,r.next()];case 2:if(n=u.sent(),n.done)return[3,4];if(s=n.value,e.next(s),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=u.sent(),i={error:a},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))}function ys(t,e,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var o=e.schedule((function(){r(),i?t.add(this.schedule(null,n)):this.unsubscribe()}),n);if(t.add(o),!i)return o}function gs(t,e,r,n,i,o,s,a){var u=[],c=0,h=0,l=!1,f=function(){!l||u.length||c||e.complete()},d=function(t){return c<n?p(t):u.push(t)},p=function(t){o&&e.next(t),c++;var a=!1;as(r(t,h++)).subscribe(Fo(e,(function(t){null===i||void 0===i||i(t),o?d(t):e.next(t)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;var t=function(){var t=u.shift();s?ys(e,s,(function(){return p(t)})):p(t)};while(u.length&&c<n)t();f()}catch(r){e.error(r)}})))};return t.subscribe(Fo(e,d,(function(){l=!0,f()}))),function(){null===a||void 0===a||a()}}function ms(t,e,r){return void 0===r&&(r=1/0),Ln(e)?ms((function(r,n){return $o((function(t,i){return e(r,t,n,i)}))(as(t(r,n)))}),r):("number"===typeof e&&(r=e),jo((function(e,n){return gs(e,n,t,r)})))}var bs=Array.isArray;function ws(t,e){return bs(e)?t.apply(void 0,Bn([],Pn(e))):t(e)}function vs(t){return $o((function(e){return ws(t,e)}))}var _s=["addListener","removeListener"],Es=["addEventListener","removeEventListener"],Ss=["on","off"];function As(t,e,r,n){if(Ln(r)&&(n=r,r=void 0),n)return As(t,e,r).pipe(vs(n));var i=Pn(Ms(t)?Es.map((function(n){return function(i){return t[n](e,i,r)}})):Ts(t)?_s.map(Is(t,e)):Rs(t)?Ss.map(Is(t,e)):[],2),o=i[0],s=i[1];if(!o&&Zo(t))return ms((function(t){return As(t,e,r)}))(as(t));if(!o)throw new TypeError("Invalid event target");return new wi((function(t){var e=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.next(1<e.length?e:e[0])};return o(e),function(){return s(e)}}))}function Is(t,e){return function(r){return function(n){return t[r](e,n)}}}function Ts(t){return Ln(t.addListener)&&Ln(t.removeListener)}function Rs(t){return Ln(t.on)&&Ln(t.off)}function Ms(t){return Ln(t.addEventListener)&&Ln(t.removeEventListener)}function ks(t){return Array.isArray(t)||(t=[t]),e=>t.includes(e.origin)}function Cs(t,e){const r=As(t,"message");if(null==e)return r;const n="function"===typeof e?e:ks(e);return r.pipe(qo(n))}function Os(t,...e){return{next:r=>{null!=r&&t.postMessage(r,...e)}}}function Ps(t,e=t,r={}){const n=r.postMessageArguments??[],i=Cs(t,r.filter),o=Os(e,...n);return new zo(i,o)}const Bs=Symbol("abortable"),xs=Symbol("aborted");function Ns(t,e){if(e.aborted)return Promise.reject(xs);let r;const n=new Promise(((t,e)=>{r=e}));return e.addEventListener("abort",(()=>{r(xs)})),Promise.race([t,n])}const Ds="utils_abort_request";var Ls;(function(t){t[t["PARSE_ERROR"]=-32700]="PARSE_ERROR",t[t["INVALID_REQUEST"]=-32600]="INVALID_REQUEST",t[t["METHOD_NOT_FOUND"]=-32601]="METHOD_NOT_FOUND",t[t["INVALID_PARAMS"]=-32602]="INVALID_PARAMS",t[t["INTERNAL_ERROR"]=-32603]="INTERNAL_ERROR"})(Ls||(Ls={}));const Us={[Ls.PARSE_ERROR]:"Parse error",[Ls.INVALID_REQUEST]:"Invalid request",[Ls.METHOD_NOT_FOUND]:"Method not found",[Ls.INVALID_PARAMS]:"Invalid params",[Ls.INTERNAL_ERROR]:"Internal error"};function js(t){return-32e3>=t&&t>=-32099}function Fs(t){return Us[t.toString()]??(js(t)?"Server error":"Application error")}class Ks extends Error{static fromObject(t){return new Ks(t.code,t.message,t.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(t,e,r){super(),Object.setPrototypeOf(this,Ks.prototype),this.code=t,this.data=r,this.message=e??Fs(t)}}function $s(t){const e=Us[t];return function(r){return new Ks(t,e,r)}}$s(Ls.PARSE_ERROR),$s(Ls.INVALID_REQUEST),$s(Ls.METHOD_NOT_FOUND),$s(Ls.INVALID_PARAMS),$s(Ls.INTERNAL_ERROR);var qs=r(15941);function Hs(t,e){return{jsonrpc:"2.0",id:t,error:{code:e,message:Fs(e)}}}function zs(t,e,r){qs.warn("Unhandled handler error",e,r)}function Vs(t,e){qs.warn("Unhandled invalid message",e)}function Gs(t,e){qs.warn("Unhandled notification",e)}function Ws(t,e={}){const r=e.onHandlerError??zs,n=e.onInvalidMessage??Vs,i=e.onNotification??Gs,o={};function s(t,e){if(e.method===Ds){const t=e.params?.id;null!=t&&o[t]?.abort()}else i(t,e)}return async function(e,i){const a=i.id;if("2.0"!==i.jsonrpc||null==i.method)return null==a?(n(e,i),null):Hs(a,Ls.INVALID_REQUEST);const u=t[i.method];if(null==u)return null==a?(s(e,i),null):Hs(a,Ls.METHOD_NOT_FOUND);try{let t;if(null!=a&&u[Bs]){const r=new AbortController;o[a]=r,t=u(e,i.params,{signal:r.signal})}else t=u(e,i.params,{});const r=null==t?t:"function"===typeof t.then?await t:t;return null==a||o[a]?.signal.aborted?null:{jsonrpc:"2.0",id:a,result:r}}catch(c){if(null==a||o[a]?.signal.aborted)return r(e,i,c),null;let t;if(c instanceof Ks)t=c.toObject();else{r(e,i,c);const n=c.code??-32e3;t={code:n,message:c.message||Fs(n)}}return{jsonrpc:"2.0",id:a,error:t}}finally{null!=a&&delete o[a]}}}var Ys=r(42278);function Js(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zs(t,e){return e.get?e.get.call(t):e.value}function Xs(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Qs(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function ta(t,e){var r=Qs(t,e,"get");return Zs(t,r)}function ea(t,e,r){Js(t,e),e.set(t,r)}function ra(t,e,r){var n=Qs(t,e,"set");return Xs(t,n,r),r}var na=new WeakMap;class ia{get connection(){return ta(this,na)}createID(){return(0,Ys.nanoid)()}request(t,e,r={}){const{signal:n}=r;if(n?.aborted)return Promise.reject(xs);const i=this.createID(),o=ta(this,na).send({jsonrpc:"2.0",id:i,method:t,params:e}).then((t=>{if(null==t)throw new Error("Missing response");if(null!=t.error)throw Ks.fromObject(t.error);return t.result}));return null==n?o:(n.addEventListener("abort",(()=>{this.notify(Ds,{id:i})})),Ns(o,n))}async notify(t,e){await ta(this,na).send({jsonrpc:"2.0",method:t,params:e})}constructor(t){ea(this,na,{writable:!0,value:void 0}),ra(this,na,t)}}function oa(t,e,r){var n=Ln(t)||e||r?{next:t,error:e,complete:r}:t;return n?jo((function(t,e){var r;null===(r=n.subscribe)||void 0===r||r.call(n);var i=!0;t.subscribe(Fo(e,(function(t){var r;null===(r=n.next)||void 0===r||r.call(n,t),e.next(t)}),(function(){var t;i=!1,null===(t=n.complete)||void 0===t||t.call(n),e.complete()}),(function(t){var r;i=!1,null===(r=n.error)||void 0===r||r.call(n,t),e.error(t)}),(function(){var t,e;i&&(null===(t=n.unsubscribe)||void 0===t||t.call(n)),null===(e=n.finalize)||void 0===e||e.call(n)})))})):fi}var sa=Un((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}})),aa=new wi((function(t){return t.complete()}));function ua(t){return t<=0?function(){return aa}:jo((function(e,r){var n=0;e.subscribe(Fo(r,(function(e){++n<=t&&(r.next(e),t<=n&&r.complete())})))}))}function ca(t){return jo((function(e,r){var n=!1;e.subscribe(Fo(r,(function(t){n=!0,r.next(t)}),(function(){n||r.next(t),r.complete()})))}))}function ha(t){return void 0===t&&(t=la),jo((function(e,r){var n=!1;e.subscribe(Fo(r,(function(t){n=!0,r.next(t)}),(function(){return n?r.complete():r.error(t())})))}))}function la(){return new sa}function fa(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?qo((function(e,r){return t(e,r,n)})):fi,ua(1),r?ca(e):ha((function(){return new sa})))}}function da(t,e,r={}){const n=Ws(t,r),i=Go(e);return di($o((t=>{try{const e=i(t.data);return e.method?{type:"request",message:t,request:e}:null}catch(e){return null}})),qo((t=>null!==t)),ms((async t=>({type:"handled",message:t.message,request:t.request,response:await n(t.message,t.request)}))))}function pa({filter:t,methods:e,namespace:r,target:n,...i}){const o=Vo(r);return Cs(n,t).pipe(da(e,r,i),oa((t=>{if(null!=t.response){const e=t.message.source??window;e.postMessage(o(t.response),t.message.origin||"*")}})))}function ya(t,e,r){const n=Wo(e),i=Jo(t,n.wrap),o=Yo(n.unwrap,r);return async function(e){return new Promise(((r,n)=>{const s=t.pipe($o((t=>t.data)),o,fa((t=>null!=t&&t.id===e.id&&("error"in t||"result"in t)))).subscribe({next:t=>{r(t),s.unsubscribe()},error:n});i.next(e)}))}}function ga(t,e,r){const n=ya(t,e,r);return new ia({send:n})}const ma={onInvalidInput:(t,e)=>{},postMessageArguments:["*"]};function ba(t,e=window,r=ma){const n=Ps(window,e,r);return ga(n,t,r)}function wa(t,e,r=window){return pa({methods:e,namespace:t,target:r})}const va="3id-connect-iframedisplay",_a="3id-connect-managedisplay",Ea=99999,Sa="position: fixed; width:0; height:0; border:0; border:none !important",Aa=`border:none; border:0; z-index: ${Ea-2}; position: fixed; max-width: 100%;`,Ia=`border:none; border:0; z-index: ${Ea-1}; position: fixed; width: 100%; height: 100%; top: 0; left: 0;`,Ta="top: 0px; right: 0px",Ra="bottom: 0px; left: 0px;",Ma=t=>()=>t.style=Sa,ka=t=>(e=!1,r="245px",n="440px")=>{t.style=`${Aa} width: ${n}; height: ${r}; ${e?Ra:Ta}`};function Ca(t){const e=ka(t),r=Ma(t);return wa(va,{hide:()=>{r()},display:(t,{mobile:r,height:n,width:i})=>{e(r,n,i)}})}const Oa=t=>{const e=document.createElement("iframe");return e.name="threeid-connect",e.className="threeid-connect",e.src=t,e.style=Sa,e.allowTransparency=!0,e.frameBorder=0,e};function Pa(t){let e;return wa(_a,{display:async(r,{accountId:n})=>{e=Ba(`${t}?accountId=${n}`),document.body.appendChild(e),await new Promise((t=>{e.onload=t}));const i=Cs(window),o=t=>"3id-connect-management"===t.data.ns;await i.pipe(fa(o)).toPromise(),e.remove()}})}const Ba=t=>{const e=document.createElement("iframe");return e.name="threeid-connect-manage",e.className="threeid-connect-manage",e.src=t,e.allowtransparency=!1,e.style=Ia,e};function xa(){return xa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xa.apply(this,arguments)}var Na={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},Da={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},La={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},Ua={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:Na,1:La}}},ja={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:Na,1:La,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},Fa={2:Na,10:Da,19:{assetName:La,assetType:Ua,assetId:ja}};function Ka(t,e){return t.split(e.parameters.delimiter)}function $a(t,e){var r=Ka(t,e),n={};return r.forEach((function(t,r){n[e.parameters.values[r].name]=t})),n}function qa(t,e){return Object.values(e.parameters.values).map((function(e){var r=t[e.name];return"string"===typeof r?r:qa(r,e)})).join(e.parameters.delimiter)}function Ha(t,e){if(!new RegExp(e.regex).test(t))return!1;var r=Ka(t,e);if(r.length!==Object.keys(e.parameters.values).length)return!1;var n=r.map((function(t,r){return new RegExp(e.parameters.values[r].regex).test(t)})).filter((function(t){return!!t}));return n.length===r.length}var za=function(){function t(e){"string"===typeof e&&(e=t.parse(e)),this.namespace=e.namespace,this.reference=e.reference}t.parse=function(e){if(!Ha(e,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+e);return new t($a(e,this.spec)).toJSON()},t.format=function(t){return qa(t,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},t}();za.spec=Fa["2"];var Va=function(){function t(e){"string"===typeof e&&(e=t.parse(e)),this.chainId=new za(e.chainId),this.address=e.address}t.parse=function(e){if(!Ha(e,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+e);var r=$a(e,this.spec),n=r.namespace,i=r.reference,o=r.address,s=new za({namespace:n,reference:i});return new t({chainId:s,address:o}).toJSON()},t.format=function(t){var e=new za(t.chainId),r=xa({},e.toJSON(),{address:t.address});return qa(r,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},t}();Va.spec=Fa["10"];var Ga=function(){function t(e){"string"===typeof e&&(e=t.parse(e)),this.namespace=e.namespace,this.reference=e.reference}t.parse=function(e){if(!Ha(e,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+e);return new t($a(e,this.spec)).toJSON()},t.format=function(t){return qa(t,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},t}();Ga.spec=Fa["19"].assetName;var Wa=function(){function t(e){"string"===typeof e&&(e=t.parse(e)),this.chainId=new za(e.chainId),this.assetName=new Ga(e.assetName)}t.parse=function(e){if(!Ha(e,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+e);return new t($a(e,this.spec)).toJSON()},t.format=function(t){return qa(t,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),assetName:this.assetName}},t}();Wa.spec=Fa["19"].assetType;var Ya=function(){function t(e){"string"===typeof e&&(e=t.parse(e)),this.chainId=new za(e.chainId),this.assetName=new Ga(e.assetName),this.tokenId=e.tokenId}t.parse=function(e){if(!Ha(e,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+e);return new t($a(e,this.spec)).toJSON()},t.format=function(t){return qa(t,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),assetName:this.assetName.toJSON(),tokenId:this.tokenId}},t}();Ya.spec=Fa["19"].assetId;var Ja=r(96027);let Za="3id-connect-authprovider";"undefined"!==typeof Ja&&(Za={NODE_ENV:"production",BASE_URL:"/codstorage/"}.NAMESPACE||"3id-connect-authprovider");function Xa(t,e=Za){return wa(e,{accountId:async()=>(await t.accountId()).toString(),authenticate:async(e,{message:r})=>await t.authenticate(r),createLink:async(e,{did:r})=>await t.createLink(r)})}const Qa=["dev-unstable","testnet-clay","mainnet","local"],tu="v2",eu=`https://app-dev.3idconnect.org/${tu}`,ru=`https://app-clay.3idconnect.org/${tu}`,nu=`https://app.3idconnect.org/${tu}`,iu=`http://localhost:30001/${tu}`,ou="/management.html",su="/index.html",au={"dev-unstable":eu,"testnet-clay":ru,mainnet:nu,local:iu},uu=t=>`${t}${ou}`,cu=t=>`${t}${su}`,hu=t=>au[t],lu=t=>Qa.includes(t),fu="3id-connect-did-provider";class du{get isDidProvider(){return!0}async send(t){return this._client.connection.send(t)}constructor(t,e=fu){this._client=ba(e,t)}}const pu="testnet-clay",yu=()=>{if("undefined"===typeof window||"undefined"===typeof document)throw new Error("ThreeIdConnect not supported in this enviroment")};class gu{async connect(t){this._authProviderSubscription&&this._authProviderSubscription.unsubscribe(),t&&await this.setAuthProvider(t),await this.iframeLoadedPromise,this._authProviderSubscription=Xa(t).subscribe(),Ca(this.iframe).subscribe(),Pa(this.manageUrl).subscribe(),this._connected=!0}async setAuthProvider(t){this.authProvider=t,this.accountId=(await this.authProvider.accountId()).toString()}get connected(){return this._connected}getDidProvider(){if(!this.authProvider)throw new Error("setAuthProvider required");if(!this.iframe.contentWindow)throw new Error("3id connect iframe service not found");return new du(this.iframe.contentWindow)}constructor(t){this._authProviderSubscription=null,this._connected=!1,yu();const e=lu(t||"")?hu(t):t||hu(pu);this.iframe=Oa(cu(e)),this.manageUrl=uu(e),this.iframeLoadedPromise=new Promise((t=>{this.iframe.onload=()=>{t()}})),document.body.appendChild(this.iframe)}}var mu=r(76037),bu=r(29026);const wu="https://ipfs.3box.io",vu=100,_u=new bu.LRUMap(vu),Eu=async t=>{const e=_u.get(t);if(e)return e;const r=await mu(t);if(r.ok){const e=await r.json();return _u.set(t,e),e}throw new Error("Not a valid 3ID")},Su=t=>`${wu}/did-doc?cid=${encodeURIComponent(t)}`,Au={dag:{get:async t=>Eu(Su(t))}},Iu=(t,e)=>{const r=new Uint8Array(t.length+2);return r[0]=e?236:231,r[1]=1,r.set(t,2),`z${nr.toString(r,"base58btc")}`},Tu=t=>{const e=t.slice(2,66),r=t.slice(66,130),n=0===(1&r)?"02":"03";return`${n}${e}`},Ru=async(t,e=Au)=>{const r=(await e.dag.get(t)).value;let n,i;try{const t=r.publicKey.findIndex((t=>t.id.endsWith("signingKey"))),e=r.publicKey.findIndex((t=>t.id.endsWith("encryptionKey")));n=r.publicKey[t].publicKeyHex,i=r.publicKey[e].publicKeyBase64}catch(u){throw new Error("Not a valid 3ID")}const o=Tu(n),s=Iu(nr.fromString(o,"base16")),a=Iu(nr.fromString(i,"base64pad"),!0);return{keyDid:`did:key:${s}`,publicKeys:{[s.slice(-15)]:s,[a.slice(-15)]:a}}},Mu=t=>({didResolutionMetadata:t,didDocument:null,didDocumentMetadata:{}}),ku=t=>t().catch((t=>Mu({error:"invalidDid",message:t.toString()}))),Cu="application/did+ld+json",Ou="application/did+json",Pu=t=>{try{return l.CID.parse(t),!0}catch(e){return!1}},Bu=t=>new Date(1e3*t).toISOString().split(".")[0]+"Z";function xu(t,e){if(!t||!t.publicKeys)return null;const r={id:e,verificationMethod:[],authentication:[],keyAgreement:[]};return Object.entries(t.publicKeys).reduce(((t,[r,n])=>{const i=nr.fromString(n.slice(1),"base58btc"),o={id:`${e}#${r}`,type:"",controller:e,publicKeyBase58:nr.toString(i.slice(2),"base58btc")};return 231===i[0]?(o.type="EcdsaSecp256k1Signature2019",t.verificationMethod.push(o),t.authentication.push(o)):236===i[0]&&(o.type="X25519KeyAgreementKey2019",t.verificationMethod.push(o),t.keyAgreement.push(o)),t}),r)}function Nu(t){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r.type===mi.ANCHOR)return r}return t[0]}function Du(t,e){const r={},{timestamp:n,cid:i}=Nu(t.log),{timestamp:o,cid:s}=e.log.find((({timestamp:t})=>t>n||!n&&t))||{};return n&&(r.updated=Bu(n)),o&&(r.nextUpdate=Bu(o)),i&&(r.versionId=1===t.log.length?"0":i?.toString()),s&&(r.nextVersionId=s.toString()),r}function Lu(t=""){const e=t.split("&").find((t=>t.includes("versionId")||t.includes("version-id"))),r=t.split("&").find((t=>t.includes("versionTime")));return{commit:e?e.split("=")[1]:void 0,timestamp:r?Math.floor(new Date(r.split("=")[1]).getTime()/1e3):void 0}}const Uu=async(t,e,r)=>{const n=await Ru(e),i={controllers:[n.keyDid],family:"3id",deterministic:!0},o=(await Bi.create(t,null,i,{anchor:!1,publish:!1})).id,s=await ju(t,o.toString(),r,e);return null===s.didDocument&&(s.didDocument=xu(n,`did:3:${e}`)),s},ju=async(t,e,r,n)=>{const i=Ar.fromString(e);let o;const s=[{streamId:i}];r.commit?(o=Tn.make(i,r.commit),s.push({streamId:o})):r.timestamp&&s.push({streamId:i,atTime:r.timestamp});const a=await t.multiQuery(s);if(!a[e])throw new Error(`Failed to properly resolve 3ID, stream ${e} not found in response.`);const u=a[e].state,c=o?.toString()||Object.keys(a).find((t=>t!==e)),h=a[c]?.state||u,l=Du(h,u),f=a[c||e];if(c&&!f)throw new Error(`No resolution for commit ${c}`);const d=f.state.content,p=xu(d,`did:3:${n||e}`);return{didResolutionMetadata:{contentType:Ou},didDocument:p,didDocumentMetadata:l}};function Fu(t){return{3:(e,r,n,i)=>ku((async()=>{const e=i.accept||Ou,n=Lu(r.query),o=r.id,s=()=>Pu(o)?Uu(t,o,n):ju(t,o,n);switch(e){case Ou:return s();case Cu:{const t=await s();return t.didDocument["@context"]="https://www.w3.org/ns/did/v1",t.didResolutionMetadata.contentType=Cu,t}default:return Mu({error:"representationNotSupported"})}}))}}function Ku(t){return"string"===typeof t?Ar.fromString(t):t}var $u=function(t){function e(e,r){return t.call(this)||this}return Mn(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(Kn),qu={setInterval:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=qu.delegate;return(null===i||void 0===i?void 0:i.setInterval)?i.setInterval.apply(i,Bn([t,e],Pn(r))):setInterval.apply(void 0,Bn([t,e],Pn(r)))},clearInterval:function(t){var e=qu.delegate;return((null===e||void 0===e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},Hu=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return Mn(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),qu.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return e;qu.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r,n=!1;try{this.work(t)}catch(i){n=!0,r=i||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},e.prototype.unsubscribe=function(){if(!this.closed){var e=this,r=e.id,n=e.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Fn(i,this),null!=r&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}($u),zu={now:function(){return(zu.delegate||Date).now()},delegate:void 0},Vu=function(){function t(e,r){void 0===r&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(r,e)},t.now=zu.now,t}(),Gu=function(t){function e(e,r){void 0===r&&(r=Vu.now);var n=t.call(this,e,r)||this;return n.actions=[],n._active=!1,n._scheduled=void 0,n}return Mn(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){while(t=e.shift())t.unsubscribe();throw r}}},e}(Vu),Wu=new Gu(Hu),Yu=Wu;function Ju(t){return t&&Ln(t.schedule)}function Zu(t){return t instanceof Date&&!isNaN(t)}function Xu(t,e,r){void 0===t&&(t=0),void 0===r&&(r=Yu);var n=-1;return null!=e&&(Ju(e)?r=e:n=e),new wi((function(e){var i=Zu(t)?+t-r.now():t;i<0&&(i=0);var o=0;return r.schedule((function(){e.closed||(e.next(o++),0<=n?this.schedule(void 0,n):e.complete())}),i)}))}var Qu={leading:!0,trailing:!1};function tc(t,e){return void 0===e&&(e=Qu),jo((function(r,n){var i=e.leading,o=e.trailing,s=!1,a=null,u=null,c=!1,h=function(){null===u||void 0===u||u.unsubscribe(),u=null,o&&(d(),c&&n.complete())},l=function(){u=null,c&&n.complete()},f=function(e){return u=as(t(e)).subscribe(Fo(n,h,l))},d=function(){if(s){s=!1;var t=a;a=null,n.next(t),!c&&f(t)}};r.subscribe(Fo(n,(function(t){s=!0,a=t,(!u||u.closed)&&(i?d():f(t))}),(function(){c=!0,(!(o&&s&&u)||u.closed)&&n.complete()})))}))}var ec=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return Mn(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){var t=this,e=t.hasError,r=t.thrownError,n=t._value;if(e)throw r;return this._throwIfClosed(),n},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(Do);function rc(t){const e=l.CID.asCID(t);if(e)return e;if("string"===typeof t)return l.CID.parse(t);if(t instanceof Uint8Array)return l.CID.decode(t);throw new Error(`${t} cannot be converted to a CID`)}const nc=0;class ic{static streamIdFromState(t){return new Ar(t.type,t.log[0].cid)}static serializeCommit(t){const e=cn(t);return ic.isSignedCommitContainer(e)?(e.jws.link=e.jws.link.toString(),e.linkedBlock=nr.toString(e.linkedBlock,"base64"),e.cacaoBlock&&(e.cacaoBlock=nr.toString(e.cacaoBlock,"base64")),e):(ic.isSignedCommit(t)&&(e.link=e.link.toString()),ic.isAnchorCommit(t)&&(e.proof=e.proof.toString()),e.id&&(e.id=e.id.toString()),e.prev&&(e.prev=e.prev.toString()),t.header?.model&&(e.header.model=t.header.model.toString()),e)}static deserializeCommit(t){const e=cn(t);return ic.isSignedCommitContainer(e)?(e.jws.link=rc(e.jws.link),e.linkedBlock=nr.fromString(e.linkedBlock,"base64"),e.cacaoBlock&&(e.cacaoBlock=nr.fromString(e.cacaoBlock,"base64")),e):(ic.isSignedCommit(e)&&(e.link=rc(e.link)),ic.isAnchorCommit(e)&&(e.proof=rc(e.proof)),e.id&&(e.id=rc(e.id)),e.prev&&(e.prev=rc(e.prev)),e.header?.model&&(e.header.model=Ar.fromString(e.header.model)),e)}static serializeState(t){const e=cn(t);return e.log=e.log.map((t=>({...t,cid:t.cid.toString()}))),null!=e.anchorStatus&&(e.anchorStatus=gi[e.anchorStatus]),null!=e.anchorScheduledFor&&(e.anchorScheduledFor=new Date(e.anchorScheduledFor).toISOString()),null!=e.anchorProof&&(e.anchorProof.txHash=e.anchorProof.txHash.toString(),e.anchorProof.root=e.anchorProof.root.toString()),t.metadata?.model&&(e.metadata.model=t.metadata.model.toString()),t.next?.metadata?.model&&(e.next.metadata.model=t.next.metadata.model.toString()),t.metadata?.unique&&t.type!=nc&&(e.metadata.unique=nr.toString(e.metadata.unique,"base64")),e.doctype=gr.nameByCode(e.type),e}static deserializeState(t){const e=cn(t);e.doctype&&(e.type=gr.codeByName(e.doctype),delete e.doctype),e.log=e.log.map((t=>({...t,cid:rc(t.cid)}))),e.anchorProof&&(e.anchorProof.txHash=rc(e.anchorProof.txHash),e.anchorProof.root=rc(e.anchorProof.root));let r=!0;return e.anchorStatus&&(e.anchorStatus=gi[e.anchorStatus],r=e.anchorStatus!==gi.FAILED&&e.anchorStatus!==gi.ANCHORED),e.anchorScheduledFor&&(r?e.anchorScheduledFor=Date.parse(e.anchorScheduledFor):delete e.anchorScheduledFor),t.metadata?.model&&(e.metadata.model=Ar.fromString(t.metadata.model)),t.next?.metadata?.model&&(e.next.metadata.model=Ar.fromString(t.next.metadata.model)),t.metadata?.unique&&t.type!=nc&&(e.metadata.unique=nr.fromString(t.metadata.unique,"base64")),e}static statesEqual(t,e){return JSON.stringify(ic.serializeState(t))===JSON.stringify(ic.serializeState(e))}static isStateSupersetOf(t,e){if(t.log.length<e.log.length)return!1;for(const r in e.log)if(!t.log[r].cid.equals(e.log[r].cid))return!1;return t.anchorStatus==e.anchorStatus}static assertCommitLinksToState(t,e){const r=this.streamIdFromState(t);if(e.id&&!e.id.equals(t.log[0].cid))throw new Error(`Invalid genesis CID in commit for StreamID ${r.toString()}. Found: ${e.id}, expected ${t.log[0].cid}`);const n=t.log[t.log.length-1].cid;if(!e.prev.equals(n))throw new Error(`Commit doesn't properly point to previous commit in log. Expected ${n}, found 'prev' ${e.prev}`)}static async convertCommitToSignedCommitContainer(t,e){if(ic.isSignedCommit(t)){const r=await e.block.get(t.link);return{jws:t,linkedBlock:r}}return t}static isSignedCommitContainer(t){return t&&void 0!==t.jws}static isSignedCommit(t){return t&&void 0!==t.link}static isAnchorCommit(t){return t&&void 0!==t.proof}static isSignedCommitData(t){return t&&void 0!==t.envelope}static isAnchorCommitData(t){return t&&void 0!==t.proof}}class oc extends ec{next(t){const e=this.value;ic.statesEqual(e,t)||super.next(t)}}function sc(t){return void 0===t&&(t=1/0),ms(fi,t)}function ac(t){return t[t.length-1]}function uc(t){return Ju(ac(t))?t.pop():void 0}function cc(t,e){return"number"===typeof ac(t)?t.pop():e}function hc(t,e){return void 0===e&&(e=0),jo((function(r,n){r.subscribe(Fo(n,(function(r){return ys(n,t,(function(){return n.next(r)}),e)}),(function(){return ys(n,t,(function(){return n.complete()}),e)}),(function(r){return ys(n,t,(function(){return n.error(r)}),e)})))}))}function lc(t,e){return void 0===e&&(e=0),jo((function(r,n){n.add(t.schedule((function(){return r.subscribe(n)}),e))}))}function fc(t,e){return as(t).pipe(lc(e),hc(e))}function dc(t,e){return as(t).pipe(lc(e),hc(e))}function pc(t,e){return new wi((function(r){var n=0;return e.schedule((function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())}))}))}function yc(t,e){return new wi((function(r){var n;return ys(r,e,(function(){n=t[ns](),ys(r,e,(function(){var t,e,i;try{t=n.next(),e=t.value,i=t.done}catch(o){return void r.error(o)}i?r.complete():r.next(e)}),0,!0)})),function(){return Ln(null===n||void 0===n?void 0:n.return)&&n.return()}}))}function gc(t,e){if(!t)throw new Error("Iterable cannot be null");return new wi((function(r){ys(r,e,(function(){var n=t[Symbol.asyncIterator]();ys(r,e,(function(){n.next().then((function(t){t.done?r.complete():r.next(t.value)}))}),0,!0)}))}))}function mc(t,e){return gc(os(t),e)}function bc(t,e){if(null!=t){if(Qo(t))return fc(t,e);if(Zo(t))return pc(t,e);if(Xo(t))return dc(t,e);if(ts(t))return gc(t,e);if(is(t))return yc(t,e);if(ss(t))return mc(t,e)}throw es(t)}function wc(t,e){return e?bc(t,e):as(t)}function vc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=uc(t),n=cc(t,1/0),i=t;return i.length?1===i.length?as(i[0]):sc(n)(wc(i,r)):aa}function _c(t){const e=new AbortController;if(0===t.length)throw Error("Need abort signals to create a merged abort signal");return t.some((t=>t.aborted))?(e.abort(),e.signal):(vc(...t.map((t=>As(t,"abort")))).pipe(fa()).subscribe((()=>{e.abort()})),e.signal)}class Ec{constructor(t){const e=new AbortController;this.signal=e.signal,t<=0?e.abort():this._subscription=Xu(t).subscribe((()=>{e.abort()}))}clear(){this._subscription?.unsubscribe()}}async function Sc(t,e){const r=new AbortController,n=()=>{r.abort()};return t.addEventListener("abort",n),t.aborted&&r.abort(),e(r.signal).finally((()=>{t.removeEventListener("abort",n)}))}const Ac=18e4;async function Ic(t,e={}){e.body&&Object.assign(e,{body:JSON.stringify(e.body),headers:{"Content-Type":"application/json"}});const r=e.timeout||Ac,n=new Ec(r),i=e.signal?_c([e.signal,n.signal]):n.signal,o=await Sc(i,(r=>mu(String(t),{...e,signal:r}))).finally((()=>n.clear()));if(!o.ok){const e=await o.text();throw new Error(`HTTP request to '${t}' failed with status '${o.statusText}': ${e}`)}return o.json()}class Tc extends wi{constructor(t,e,r){super((t=>{const e=0===this.state$.observers.length;e&&(this.periodicSubscription=Xu(0,r).pipe(tc((()=>this._syncState(this.id,{sync:an.PREFER_CACHE})))).subscribe()),this.state$.subscribe(t).add((()=>{const t=0===this.state$.observers.length;t&&this.periodicSubscription?.unsubscribe()}))})),this.state$=new oc(t),this._apiUrl=new URL(e)}get value(){return this.state$.value}get state(){return this.state$.value}next(t){this.state$.next(t)}async _syncState(t,e){const r=await Tc._load(t,this._apiUrl,e);this.state$.next(ic.deserializeState(r))}get id(){return new Ar(this.state$.value.type,this.state$.value.log[0].cid)}static async createFromGenesis(t,e,r,n,i){const o=new URL("./streams",t),{state:s}=await Ic(o,{method:"post",body:{type:e,genesis:ic.serializeCommit(r),opts:n}});return new Tc(ic.deserializeState(s),t,i)}static async applyCommit(t,e,r,n,i){const o=new URL("./commits",t),{state:s}=await Ic(o,{method:"post",body:{streamId:e.toString(),commit:ic.serializeCommit(r),opts:n}});return new Tc(ic.deserializeState(s),t,i)}static async _load(t,e,r){const n=new URL(`./streams/${t}`,e);for(const o in r)n.searchParams.set(o,r[o]);const{state:i}=await Ic(n);return i}static async load(t,e,r,n){const i=await Tc._load(t,e,n);return new Tc(ic.deserializeState(i),e,r)}static async loadStreamCommits(t,e){const r=new URL(`./commits/${t}`,e),{commits:n}=await Ic(r);return n.map((t=>({cid:t.cid,value:ic.deserializeCommit(t.value)})))}complete(){this.state$.complete()}}function Rc(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}function Mc(){const t=new Map;return function(e,r){try{let i;function o(n){if(i)return n;const o=t.get(e.didUrl);return void 0!==o?o:Promise.resolve(r()).then((function(r){var n;return"notFound"!==(null==(n=r.didResolutionMetadata)?void 0:n.error)&&t.set(e.didUrl,r),r}))}const s=function(){if(e.params&&"true"===e.params["no-cache"])return Promise.resolve(r()).then((function(t){return i=1,t}))}();return Promise.resolve(s&&s.then?s.then(o):o(s))}catch(n){return Promise.reject(n)}}}function kc(t,e){return e()}const Cc="(?:%[0-9a-fA-F]{2})",Oc=`(?:[a-zA-Z0-9._-]|${Cc})`,Pc="([a-z0-9]+)",Bc=`((?:${Oc}*:)*(${Oc}+))`,xc="[a-zA-Z0-9_.:%-]",Nc=`;${xc}+=${xc}*`,Dc=`((${Nc})*)`,Lc="(/[^#?]*)?",Uc="([?][^#]*)?",jc="(#.*)?",Fc=new RegExp(`^did:${Pc}:${Bc}${Dc}${Lc}${Uc}${jc}$`);function Kc(t){if(""===t||!t)return null;const e=t.match(Fc);if(e){const r={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:t};if(e[4]){const t=e[4].slice(1).split(";");r.params={};for(const e of t){const t=e.split("=");r.params[t[0]]=t[1]}}return e[6]&&(r.path=e[6]),e[7]&&(r.query=e[7].slice(1)),e[8]&&(r.fragment=e[8].slice(1)),r}return null}const $c={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function qc(t){return function(e,r,n){try{return Promise.resolve(Rc((function(){return Promise.resolve(t(e,r,n)).then((function(t){return{...$c,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:t}}))}),(function(t){return{...$c,didResolutionMetadata:{error:"notFound",message:t.toString()}}})))}catch(i){return Promise.reject(i)}}}class Hc{constructor(t={},e={}){this.registry=void 0,this.cache=void 0,this.registry=t,this.cache=!0===e.cache?Mc():e.cache||kc,e.legacyResolvers&&Object.keys(e.legacyResolvers).map((t=>{this.registry[t]||(this.registry[t]=qc(e.legacyResolvers[t]))}))}resolve(t,e={}){try{const r=this,n=Kc(t);if(null===n)return Promise.resolve({...$c,didResolutionMetadata:{error:"invalidDid"}});const i=r.registry[n.method];return i?Promise.resolve(r.cache(n,(()=>i(n.did,n,r,e)))):Promise.resolve({...$c,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(r){return Promise.reject(r)}}}function zc(t){if("string"===typeof t&&t.includes("@")){const[e,r]=t.split("@");if(!e||!r)throw new Error("Invalid accountId provided");return new Va({address:e,chainId:r})}return new Va(t)}var Vc,Gc=function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};const Wc=()=>{throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")},Yc={anchor:!1,publish:!0,pin:!0,sync:an.PREFER_CACHE},Jc={anchor:!0,publish:!0,throwOnInvalidCommit:!0},Zc={sync:an.PREFER_CACHE};let Xc=Vc=class extends Si{constructor(){super(...arguments),this._isReadOnly=!1}get did(){return this.content}get metadata(){const{next:t,metadata:e}=this.state$.value;return cn(t?.metadata??e)}static async fromAccount(t,e,r={}){r={...Yc,...r};const n=zc(e),i=Vc.makeGenesis(n);return Vc.fromGenesis(t,i,r)}static async fromGenesis(t,e,r={}){return r={...Yc,...r},t.createStreamFromGenesis(Vc.STREAM_TYPE_ID,e,r)}async setDid(t,e,r={}){r={...Jc,...r};const n="string"==typeof t?t.trim():t.id,i=Kc(n);if(i?.did!==n)throw new Error(`DID is not valid: '${n}'`);const o=await e.createLink(n);return this.setDidProof(o,r)}async setDidProof(t,e={}){e={...Jc,...e};const r=this.makeCommit(t),n=await this.api.applyCommit(this.id,r,e);this.state$.next(n.state)}async clearDid(t,e={}){e={...Jc,...e};const r=await t.createLink("");return this.setDidProof(r,e)}static async load(t,e,r={}){r={...Zc,...r};const n=bi.from(e);if(n.type!=Vc.STREAM_TYPE_ID)throw new Error(`StreamID ${n.toString()} does not refer to a '${Vc.STREAM_TYPE_NAME}' stream, but to a ${n.typeName}`);return t.loadStream(n,r)}static makeGenesis(t){"eip155"===t.chainId.namespace&&(t.address=t.address.toLowerCase());const e=`${t.address}@${t.chainId.toString()}`;return{header:{controllers:[e],family:`caip10-${t.chainId.toString()}`}}}makeCommit(t){return{data:t,prev:this.tip,id:this.id.cid}}makeReadOnly(){this.setDidProof=Wc,this.setDid=Wc,this.sync=Wc,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}};Xc.STREAM_TYPE_NAME="caip10-link",Xc.STREAM_TYPE_ID=1,Xc=Vc=Gc([Ai()],Xc);var Qc,th=r(21272),eh=function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};const rh={sync:an.PREFER_CACHE};async function nh(t){if(null==t.did)throw new Error("No DID provided");t.did.authenticated||(await t.did.authenticate(),t.loggerProvider&&t.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${t.did.id}`))}async function ih(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}var oh;(function(t){t["LIST"]="list",t["SINGLE"]="single"})(oh||(oh={}));let sh=Qc=class extends Si{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){return{controller:this.state$.value.metadata.controllers[0],model:Qc.MODEL}}static async create(t,e,r){Qc.assertComplete(e);const n={publish:!0,anchor:!0,pin:!0,sync:an.NEVER_SYNC,throwOnInvalidCommit:!0},i=await Qc._makeGenesis(t,e,r),o=await t.createStreamFromGenesis(Qc.STREAM_TYPE_ID,i,n);return o}static async createPlaceholder(t,e,r){const n={publish:!1,anchor:!1,pin:!1,sync:an.NEVER_SYNC,throwOnInvalidCommit:!0},i=await Qc._makeGenesis(t,e,r);return t.createStreamFromGenesis(Qc.STREAM_TYPE_ID,i,n)}async replacePlaceholder(t){Qc.assertComplete(t,this.id);const e={publish:!0,anchor:!0,pin:!0,throwOnInvalidCommit:!0},r=await this._makeCommit(this.api,t),n=await this.api.applyCommit(this.id,r,e);this.state$.next(n.state)}static assertComplete(t,e){if(!t.name)throw e?new Error(`Model with StreamID ${e.toString()} is missing a 'name' field`):new Error("Model is missing a 'name' field");if(!t.schema)throw e?new Error(`Model ${t.name} (${e.toString()}) is missing a 'schema' field`):new Error(`Model ${t.name} is missing a 'schema' field`);if(!t.accountRelation)throw e?new Error(`Model ${t.name} (${e.toString()}) is missing a 'accountRelation' field`):new Error(`Model ${t.name} is missing a 'accountRelation' field`)}static async load(t,e,r={}){r={...rh,...r};const n=bi.from(e);if(n.type!=Qc.STREAM_TYPE_ID)throw new Error(`StreamID ${n.toString()} does not refer to a '${Qc.STREAM_TYPE_NAME}' stream, but to a ${n.typeName}`);const i=await t.loadStream(n,r);try{Qc.assertComplete(i.content,e)}catch(o){throw new Error(`Incomplete placeholder Models cannot be loaded: ${o.message}`)}return i}async _makeCommit(t,e){const r=this._makeRawCommit(e);return Qc._signDagJWS(t,r)}_makeRawCommit(t){if(null==t)throw new Error("Cannot set Model content to null");const e=un.compare(this.content,t);return{data:e,prev:this.tip,id:this.state.log[0].cid}}static async _makeGenesis(t,e,r){const n=await this._makeRawGenesis(t,e,r);return Qc._signDagJWS(t,n)}static async _makeRawGenesis(t,e,r){if(null==e)throw new Error("Genesis content cannot be null");if(!r||!r.controller){if(!t.did)throw new Error("No controller specified");await nh(t),r={controller:t.did.hasParent?t.did.parent:t.did.id}}const n={controllers:[r.controller],unique:(0,hn.randomBytes)(12),model:Qc.MODEL.bytes};return{data:e,header:n}}makeReadOnly(){this.replacePlaceholder=ih,this.sync=ih,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}static async _signDagJWS(t,e){return await nh(t),t.did.createDagJWS(e)}};sh.STREAM_TYPE_NAME="model",sh.STREAM_TYPE_ID=2,sh.MODEL=function(){const t=er("model-v1"),e=th.encode(t,"identity"),r=(0,or.create)(tr,e),n=l.CID.createV1(tr,r);return new Ar(Qc.STREAM_TYPE_ID,n)}(),sh=Qc=eh([Ai()],sh);var ah,uh=function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};const ch={anchor:!0,publish:!0,pin:!0,sync:an.NEVER_SYNC,syncTimeoutSeconds:0},hh={sync:an.PREFER_CACHE},lh={anchor:!0,publish:!0,throwOnInvalidCommit:!0};async function fh(t){if(null==t.did)throw new Error("No DID provided");t.did.authenticated||(await t.did.authenticate(),t.loggerProvider&&t.loggerProvider.getDiagnosticsLogger().imp(`Now authenticated as DID ${t.did.id}`))}async function dh(){throw new Error("Historical stream commits cannot be modified. Load the stream without specifying a commit to make updates.")}let ph=ah=class extends Si{constructor(){super(...arguments),this._isReadOnly=!1}get content(){return super.content}get metadata(){const t=this.state$.value.metadata;return{controller:t.controllers[0],model:t.model}}static async create(t,e,r,n={}){n={...ch,...n};const i=n.asDID?{did:n.asDID}:t,o=await ah._makeGenesis(i,e,r);return t.createStreamFromGenesis(ah.STREAM_TYPE_ID,o,n)}static async load(t,e,r={}){r={...hh,...r};const n=bi.from(e);if(n.type!=ah.STREAM_TYPE_ID)throw new Error(`StreamID ${n.toString()} does not refer to a '${ah.STREAM_TYPE_NAME}' stream, but to a ${n.typeName}`);return t.loadStream(n,r)}async replace(t,e={}){e={...lh,...e};const r=e.asDID?{did:e.asDID}:this.api,n=await this._makeCommit(r,t),i=await this.api.applyCommit(this.id,n,e);this.state$.next(i.state)}async patch(t,e={}){e={...lh,...e};const r={data:t,prev:this.tip,id:this.id.cid},n=await ah._signDagJWS(this.api,r),i=await this.api.applyCommit(this.id,n,e);this.state$.next(i.state)}makeReadOnly(){this.replace=dh,this.patch=dh,this.sync=dh,this._isReadOnly=!0}get isReadOnly(){return this._isReadOnly}_makeCommit(t,e){const r=this._makeRawCommit(e);return ah._signDagJWS(t,r)}_makeRawCommit(t){const e=un.compare(this.content,t||{});return{data:e,prev:this.tip,id:this.state.log[0].cid}}static async _makeGenesis(t,e,r){const n=await this._makeRawGenesis(t,e,r);return ah._signDagJWS(t,n)}static async _makeRawGenesis(t,e,r){if(!r.model)throw new Error("Must specify a 'model' when creating a ModelInstanceDocument");if(!r.controller){if(!t.did)throw new Error("No controller specified");await fh(t),r.controller=t.did.hasParent?t.did.parent:t.did.id}const n={controllers:[r.controller],unique:(0,hn.randomBytes)(12),model:r.model.bytes};return{data:e,header:n}}static async _signDagJWS(t,e){return await fh(t),t.did.createDagJWS(e)}};ph.STREAM_TYPE_NAME="MID",ph.STREAM_TYPE_ID=3,ph=ah=uh([Ai()],ph);class yh{constructor(t){this._apiUrl=t}async add(t,e){const r={};e&&(r.force=!0);const n=new URL(`./pins/${t}`,this._apiUrl);await Ic(n,{method:"post",body:r})}async rm(t,e){const r=new URL(`./pins/${t}`,this._apiUrl);await Ic(r,{method:"delete",body:{opts:e}})}async ls(t){let e=new URL("./pins",this._apiUrl);t&&(e=new URL(`./pins/${t.toString()}`,this._apiUrl));const r=await Ic(e),{pinnedStreamIds:n}=r;return{[Symbol.asyncIterator](){let t=0;return{next(){return t===n.length?Promise.resolve({value:null,done:!0}):Promise.resolve({value:n[t++],done:!1})}}}}}}class gh{constructor(t){this._fetchJson=Ic,this._collectionURL=new URL("./collection",t)}async queryIndex(t){const e=new URL(this._collectionURL);for(const i in t)e.searchParams.set(i,t[i]);const r=await this._fetchJson(e),n=r.edges.map((t=>({cursor:t.cursor,node:ic.deserializeState(t.node)})));return{edges:n,pageInfo:r.pageInfo}}}const mh="/api/v0/",bh="http://localhost:7007",wh={syncInterval:5e3},vh={anchor:!0,publish:!0,sync:an.PREFER_CACHE},_h={anchor:!0,publish:!0,sync:an.PREFER_CACHE},Eh={sync:an.PREFER_CACHE};class Sh{constructor(t=bh,e={}){this._config={...wh,...e},this._apiUrl=new URL(mh,t),this._streamCache=new Map,this.context={api:this},this.pin=new yh(this._apiUrl),this.index=new gh(this._apiUrl),this._streamConstructors={[Xc.STREAM_TYPE_ID]:Xc,[sh.STREAM_TYPE_ID]:sh,[ph.STREAM_TYPE_ID]:ph,[Bi.STREAM_TYPE_ID]:Bi}}get did(){return this.context.did}set did(t){this.context.did=t}async createStreamFromGenesis(t,e,r={}){r={..._h,...r};const n=await Tc.createFromGenesis(this._apiUrl,t,e,r,this._config.syncInterval),i=this._streamCache.get(n.id.toString());return i?(ic.statesEqual(n.state,i.state)||i.next(n.state),this.buildStreamFromDocument(i)):(this._streamCache.set(n.id.toString(),n),this.buildStreamFromDocument(n))}async loadStream(t,e={}){e={...Eh,...e};const r=bi.from(t);let n=this._streamCache.get(r.baseID.toString());return n?await n._syncState(r,e):(n=await Tc.load(r,this._apiUrl,this._config.syncInterval,e),this._streamCache.set(n.id.toString(),n)),this.buildStreamFromDocument(n)}async multiQuery(t,e){const r=t.map((t=>({...t,streamId:"string"===typeof t.streamId?t.streamId:t.streamId.toString()}))),n=new URL("./multiqueries",this._apiUrl),i=await Ic(n,{method:"post",body:{queries:r,timeout:e}});return Object.entries(i).reduce(((t,e)=>{const[r,n]=e,i=ic.deserializeState(n),o=new Tc(i,this._apiUrl,this._config.syncInterval);return t[r]=this.buildStreamFromDocument(o),t}),{})}loadStreamCommits(t){const e=Ku(t);return Tc.loadStreamCommits(e,this._apiUrl)}async applyCommit(t,e,r={}){r={...vh,...r};const n=Ku(t),i=await Tc.applyCommit(this._apiUrl,n,e,r,this._config.syncInterval),o=this._streamCache.get(n.toString());return o?(o.next(i.state),this.buildStreamFromDocument(i)):(this._streamCache.set(n.toString(),i),this.buildStreamFromDocument(i))}async requestAnchor(t,e={}){e={...Eh,...e};const{anchorStatus:r}=await Ic(`${this._apiUrl}/streams/${t.toString()}/anchor`,{method:"post",body:{opts:e}});return r}addStreamHandler(t){this._streamConstructors[t.name]=t.stream_constructor}buildStreamFromState(t){const e=new Tc(t,this._apiUrl,this._config.syncInterval);return this.buildStreamFromDocument(e)}buildStreamFromDocument(t){const e=t.state.type,r=this._streamConstructors[e];if(!r)throw new Error(`Failed to find constructor for stream ${e}`);return new r(t,this.context)}async setDID(t){this.context.did=t}async getSupportedChains(){if(this._supportedChains)return this._supportedChains;const{supportedChains:t}=await Ic(this._apiUrl+"/node/chains");return this._supportedChains=t,t}async close(){Array.from(this._streamCache).map((([,t])=>{t.complete()})),this._streamCache.clear()}}var Ah=r(78334);function Ih(t,e){const r=`did:key:${e}`,n=`${r}#${e}`;return{id:r,verificationMethod:[{id:n,type:"Secp256k1VerificationKey2018",controller:r,publicKeyBase58:nr.toString(t,"base58btc")}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}var Th=r(96523),Rh=r(81725);function Mh(t){const e=new Uint8Array(t.length+2);return e[0]=236,e[1]=1,e.set(t,2),`z${(0,Th.toString)(e,"base58btc")}`}function kh(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=(0,Rh.SH)(t),o=`${r}#${Mh(i)}`;return{id:r,verificationMethod:[{id:n,type:"Ed25519VerificationKey2018",controller:r,publicKeyBase58:(0,Th.toString)(t,"base58btc")}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n],keyAgreement:[{id:o,type:"X25519KeyAgreementKey2019",controller:r,publicKeyBase58:(0,Th.toString)(i,"base58btc")}]}}function Ch(t,e){if("number"===typeof t&&(t=BigInt(t)),"number"===typeof e&&(e=BigInt(e)),e<=0n)throw new RangeError("n must be > 0");const r=t%e;return r<0n?r+e:r}function Oh(t,e){if("number"===typeof t&&(t=BigInt(t)),"number"===typeof e&&(e=BigInt(e)),t<=0n||e<=0n)throw new RangeError("a and b MUST be > 0");let r=0n,n=1n,i=1n,o=0n;while(0n!==t){const s=e/t,a=e%t,u=r-i*s,c=n-o*s;e=t,t=a,r=i,n=o,i=u,o=c}return{g:e,x:r,y:n}}function Ph(t,e){const r=Oh(Ch(t,e),e);if(1n!==r.g)throw new RangeError(`${t.toString()} does not have inverse modulo ${e.toString()}`);return Ch(r.x,e)}function Bh(t){return t>=0?t:-t}function xh(t,e,r){if("number"===typeof t&&(t=BigInt(t)),"number"===typeof e&&(e=BigInt(e)),"number"===typeof r&&(r=BigInt(r)),r<=0n)throw new RangeError("n must be > 0");if(1n===r)return 0n;if(t=Ch(t,r),e<0n)return Ph(xh(t,Bh(e),r),r);let n=1n;while(e>0)e%2n===1n&&(n=n*t%r),e/=2n,t=t**2n%r;return n}var Nh=r(61058);function Dh(t){if(!Fh(t))throw new TypeError("input must be a Uint8Array");const e=nr.toString(t,"base16");return e}function Lh(t){if(!jh(t))throw new TypeError("input must be string with characters 0-9,A-F,a-f");const e=Uh(t),r=Nh.base64url.encode(e.xOctet).slice(1),n=Nh.base64url.encode(e.yOctet).slice(1);return{xm:r,ym:n}}function Uh(t){if(!jh(t))throw new TypeError("input must be string with characters 0-9,A-F,a-f");const e=t.slice(0,t.length/2),r=t.slice(t.length/2,t.length),n=nr.fromString(e,"base16"),i=nr.fromString(r,"base16");return{xOctet:n,yOctet:i}}function jh(t){const e=new RegExp(/^[A-Fa-f0-9]+/i);return!(!e.test(t)||t.length!=e.exec(t)[0].length)}function Fh(t){return null!=t&&t.constructor===Uint8Array}function Kh(t){if(null==t)throw new TypeError("input cannot be null or undefined.");if("object"!==typeof t)throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(t,"x")||!Object.prototype.hasOwnProperty.call(t,"y"))throw new Error("Input must have properties x and y");if("bigint"!==typeof t.x&&"bigint"!==typeof t.y)throw new Error("Input coordinates must be BigInt");const e=$h(t),r=Nh.base64url.encode(e.xOctet).slice(1),n=Nh.base64url.encode(e.yOctet).slice(1);return{xm:r,ym:n}}function $h(t){if(null==t)throw new TypeError("input cannot be null or undefined.");if("object"!==typeof t)throw new TypeError("Input must be an object with properties x and y");if(!Object.prototype.hasOwnProperty.call(t,"x")||!Object.prototype.hasOwnProperty.call(t,"y"))throw new Error("Input must have properties x and y");if("bigint"!==typeof t.x&&"bigint"!==typeof t.y)throw new Error("Input coordinates must be BigInt");const e=t.x.toString(),r=t.y.toString(),n=nr.fromString(e,"base10"),i=nr.fromString(r,"base10");return{xOctet:n,yOctet:i}}function qh(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=zh(t);return{id:r,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-256",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function Hh(t){if(!Fh(t))throw new TypeError("input must be a Uint8Array");const e=BigInt(2),r=e**256n-e**224n+e**192n+e**96n-1n,n=41058363725152142129326129780047268409114441015993725554835256314039467401291n,i=(r+1n)/4n,o=BigInt(t[0]-2),s=t.subarray(1),a=BigInt(nr.toString(s,"base10")),u=a**3n-3n*a+n;let c=xh(u,i,r);return c%2n!==o&&(c=r-c),{x:a,y:c}}function zh(t){if(!Fh(t))throw new TypeError("input must be a Uint8Array");const e=Dh(t),r=e.length/2;if(64==r)return Lh(e);if(65==r&&"04"==e.slice(0,2)){const t=e.slice(2);return Lh(t)}if(33==r&&("03"==e.slice(0,2)||"02"==e.slice(0,2))){const t=nr.fromString(e,"base16"),r=Hh(t);return Kh(r)}throw new Error("Unexpected pubKeyBytes")}function Vh(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=Wh(t);return{id:r,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-384",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function Gh(t){if(!Fh(t))throw new TypeError("input must be a Uint8Array");const e=BigInt(2),r=e**384n-e**128n-e**96n+e**32n-1n,n=27580193559959705877849011840389048093056905856361568521428707301988689241309860865136260764883745107765439761230575n,i=(r+1n)/4n,o=BigInt(t[0]-2),s=t.subarray(1),a=BigInt(nr.toString(s,"base10")),u=a**3n-3n*a+n;let c=xh(u,i,r);return c%2n!==o&&(c=r-c),{x:a,y:c}}function Wh(t){if(!Fh(t))throw new TypeError("input must be a Uint8Array");const e=Dh(t),r=e.length/2;if(96==r)return Lh(e);if(97==r&&"04"==e.slice(0,2)){const t=e.slice(2);return Lh(t)}if(49==r&&("03"==e.slice(0,2)||"02"==e.slice(0,2))){const t=nr.fromString(e,"base16"),r=Gh(t);return Kh(r)}throw new Error("Unexpected pubKeyBytes")}function Yh(t,e){const r=`did:key:${e}`,n=`${r}#${e}`,i=Zh(t);return{id:r,verificationMethod:[{id:n,type:"JsonWebKey2020",controller:r,publicKeyJwk:{kty:"EC",crv:"P-521",x:i.xm,y:i.ym}}],authentication:[n],assertionMethod:[n],capabilityDelegation:[n],capabilityInvocation:[n]}}function Jh(t){if(!Fh(t))throw new TypeError("input must be a Uint8Array");const e=BigInt(2),r=e**521n-1n,n=1093849038073734274511112390766805569936207598951683748994586394495953116150735016013708737573759623248592132296706313309438452531591012912142327488478985984n,i=(r+1n)/4n,o=BigInt(t[0]-2),s=t.subarray(1),a=BigInt(nr.toString(s,"base10")),u=a**3n-3n*a+n;let c=xh(u,i,r);return c%2n!==o&&(c=r-c),{x:a,y:c}}function Zh(t){if(!Fh(t))throw new TypeError("input must be a Uint8Array");const e=Dh(t);if(132<=e.length&&e.length<=134&&("03"==e.slice(0,2)||"02"==e.slice(0,2))){const t=nr.fromString(e,"base16"),r=Jh(t);return Kh(r)}throw new Error("Unexpected pubKeyBytes")}const Xh="application/did+ld+json",Qh="application/did+json",tl={231:s,237:a,4608:u,4609:c,4610:h};function el(){return{key:async(t,e,r,n)=>{const i=n.accept||Qh,o={didResolutionMetadata:{contentType:i},didDocument:null,didDocumentMetadata:{}};try{const t=Ah.base58btc.decode(e.id),r=_.decode(t),n=t.slice(_.decode.bytes),s=await tl[r].keyToDidDoc(n,e.id);i===Xh?(s["@context"]="https://w3id.org/did/v1",o.didDocument=s):i===Qh?o.didDocument=s:(delete o.didResolutionMetadata.contentType,o.didResolutionMetadata.error="representationNotSupported")}catch(s){o.didResolutionMetadata.error="invalidDid",o.didResolutionMetadata.message=s.toString()}return o}}}var rl={getResolver:el};const nl={definitions:{cryptoAccounts:"kjzl6cwe1jw149z4rvwzi56mjjukafta30kojzktd9dsrgqdgz4wlnceu59f95f",alsoKnownAs:"kjzl6cwe1jw146zfmqa10a5x1vry6au3t362p44uttz4l0k4hi88o41zplhmxnf",basicProfile:"kjzl6cwe1jw145cjbeko9kil8g9bxszjhyde21ob8epxuxkaon1izyqsu8wgcic"},schemas:{CryptoAccounts:"ceramic://k3y52l7qbv1frypussjburqg4fykyyycfu0p9znc75lv2t5cg4xaslhagkd7h7mkg",AlsoKnownAs:"ceramic://k3y52l7qbv1fryojt8n8cw2k04p9wp67ly59iwqs65dejso566fij5wsdrb871yio",BasicProfile:"ceramic://k3y52l7qbv1frxt706gqfzmq6cbqdkptzk8uudaryhlkf6ly9vx21hqu4r6k1jqio"},tiles:{}};function il(t){try{return Va.parse(t),!0}catch(e){return!1}}function ol(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sl(t,e){return e.get?e.get.call(t):e.value}function al(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function ul(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function cl(t,e){var r=ul(t,e,"get");return sl(t,r)}function hl(t,e,r){ol(t,e),e.set(t,r)}function ll(t,e,r){var n=ul(t,e,"set");return al(t,n,r),r}const fl={local:"http://localhost:7007","mainnet-gateway":"https://gateway.ceramic.network","testnet-clay":"https://ceramic-clay.3boxlabs.com","testnet-clay-gateway":"https://gateway-clay.ceramic.network"};var dl=new WeakMap,pl=new WeakMap,yl=new WeakMap;class gl{get ceramic(){return this._ceramic}get dataModel(){return cl(this,dl)}get dataStore(){return this._dataStore}get resolver(){return cl(this,pl)}get tileLoader(){return cl(this,yl)}async getAccountDID(t){const e=await Xc.fromAccount(this._ceramic,t);if(null==e.did)throw new Error(`No DID found for ${t}`);return e.did}async toDID(t){return wo(t)?t:il(t)?await this.getAccountDID(t):t}async get(t,e){const r=await this.toDID(e);return await this._dataStore.get(t,r)}constructor(t){hl(this,dl,{writable:!0,value:void 0}),hl(this,pl,{writable:!0,value:void 0}),hl(this,yl,{writable:!0,value:void 0});const e=new Sh(fl[t.ceramic]??t.ceramic),r=t.loader??new Wi({ceramic:e,cache:t.cache});this._ceramic=e,ll(this,dl,new io({loader:r,aliases:t.aliases??nl})),this._dataStore=new xo({ceramic:e,loader:r,model:cl(this,dl)}),ll(this,pl,new Hc({...el(),...Fu(this._ceramic)})),ll(this,yl,r)}}var ml=r(24364),bl=r(14185),wl=r(69893),vl=r(32127),_l=r(65417),El=r(70116),Sl=r(92982),Al=r(31499),Il=r(92259);function Tl(t){return nr.toString(t,"base64url")}function Rl(t){const e=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return nr.fromString(e,"base64url")}function Ml(t){return nr.fromString(t,"base58btc")}function kl(t){return nr.toString(t,"base58btc")}function Cl(t){const e=t.startsWith("0x")?t.substring(2):t;return nr.fromString(e.toLowerCase(),"base16")}function Ol(t){return Tl(nr.fromString(t))}function Pl(t){return nr.toString(Rl(t))}function Bl(t){return nr.toString(t,"base16")}function xl(t){return nr.fromString(t)}function Nl({r:t,s:e,recoveryParam:r},n){const i=new Uint8Array(n?65:64);if(i.set(nr.fromString(t,"base16"),0),i.set(nr.fromString(e,"base16"),32),n){if("undefined"===typeof r)throw new Error("Signer did not return a recoveryParam");i[64]=r}return Tl(i)}function Dl(t){const e=Rl(t);if(e.length<64||e.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${e.length}`);const r=Bl(e.slice(0,32)),n=Bl(e.slice(32,64)),i=65===e.length?e[64]:void 0;return{r:r,s:n,recoveryParam:i}}function Ll(t,e){return nr.concat([Rl(t),Rl(e)])}function Ul(t){const e="string"===typeof t?nr.fromString(t):t;return(0,bl.hash)(e)}function jl(t){return new Uint8Array(wl.keccak_256.arrayBuffer(t))}function Fl(t){const e=nr.fromString(t.slice(2),"base16");return`0x${nr.toString(jl(e).slice(-20),"base16")}`}function Kl(t,e=new Uint8Array(4)){const r=nr.fromString(t.toString(),"base10");return e.set(r,4-r.length),e}const $l=t=>nr.concat([Kl(t.length),t]);function ql(t,e,r,n,i){if(256!==e)throw new Error(`Unsupported key length: ${e}`);const o=nr.concat([$l(nr.fromString(r)),$l("undefined"===typeof n?new Uint8Array(0):n),$l("undefined"===typeof i?new Uint8Array(0):i),Kl(e)]),s=1;return(0,bl.hash)(nr.concat([Kl(s),t,o]))}new vl.ec("secp256k1");function Hl(t){const e=t;if(64!==e.length)throw new Error(`bad_key: Invalid private key format. Expecting 64 bytes, but got ${e.length}`);return function(t){try{const r="string"===typeof t?xl(t):t,n=(0,Rh.Xx)(e,r);return Promise.resolve(Tl(n))}catch(r){return Promise.reject(r)}}}function zl(t){return"object"===typeof t&&"r"in t&&"s"in t}function Vl(t){return function(e,r){try{return Promise.resolve(r(e)).then((function(e){if(zl(e))return Nl(e,t);if(t&&"undefined"===typeof Dl(e).recoveryParam)throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return e}))}catch(n){return Promise.reject(n)}}}function Gl(){return function(t,e){try{return Promise.resolve(e(t)).then((function(t){if(zl(t))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return t}))}catch(r){return Promise.reject(r)}}}const Wl={ES256K:Vl(),"ES256K-R":Vl(!0),Ed25519:Gl(),EdDSA:Gl()};function Yl(t){const e=Wl[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}const Jl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Zl=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Xl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Ql=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],tf=[0,1518500249,1859775393,2400959708,2840853838],ef=[1352829926,1548603684,1836072691,2053994217,0];function rf(t,e){return t<<e|t>>>32-e}function nf(t,e,r,n,i,o,s,a){return rf(t+(e^r^n)+o+s|0,a)+i|0}function of(t,e,r,n,i,o,s,a){return rf(t+(e&r|~e&n)+o+s|0,a)+i|0}function sf(t,e,r,n,i,o,s,a){return rf(t+((e|~r)^n)+o+s|0,a)+i|0}function af(t,e,r,n,i,o,s,a){return rf(t+(e&n|r&~n)+o+s|0,a)+i|0}function uf(t,e,r,n,i,o,s,a){return rf(t+(e^(r|~n))+o+s|0,a)+i|0}class cf{constructor(t=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=t=>{if(this._finalized)throw new Error("Digest already called");const e=this._block;let r=0;while(this._blockOffset+t.length-r>=this._blockSize){for(let n=this._blockOffset;n<this._blockSize;)e[n++]=t[r++];this._update(),this._blockOffset=0}while(r<t.length)e[this._blockOffset++]=t[r++];for(let n=0,i=8*t.length;i>0;++n)this._length[n]+=i,i=this._length[n]/4294967296|0,i>0&&(this._length[n]-=4294967296*i);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;const t=this._digest();this._block.fill(0),this._blockOffset=0;for(let e=0;e<4;++e)this._length[e]=0;return t},this._update=()=>{const t=new Array(16),e=new DataView(this._block.buffer);for(let d=0;d<16;++d)t[d]=t[d]=e.getInt32(4*d,!0);let r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,a=0|this._a,u=0|this._b,c=0|this._c,h=0|this._d,l=0|this._e;for(let d=0;d<80;d+=1){let e,f;d<16?(e=nf(r,n,i,o,s,t[Jl[d]],tf[0],Xl[d]),f=uf(a,u,c,h,l,t[Zl[d]],ef[0],Ql[d])):d<32?(e=of(r,n,i,o,s,t[Jl[d]],tf[1],Xl[d]),f=af(a,u,c,h,l,t[Zl[d]],ef[1],Ql[d])):d<48?(e=sf(r,n,i,o,s,t[Jl[d]],tf[2],Xl[d]),f=sf(a,u,c,h,l,t[Zl[d]],ef[2],Ql[d])):d<64?(e=af(r,n,i,o,s,t[Jl[d]],tf[3],Xl[d]),f=of(a,u,c,h,l,t[Zl[d]],ef[3],Ql[d])):(e=uf(r,n,i,o,s,t[Jl[d]],tf[4],Xl[d]),f=nf(a,u,c,h,l,t[Zl[d]],ef[4],Ql[d])),r=s,s=o,o=rf(i,10),i=n,n=e,a=l,l=h,h=rf(c,10),c=u,u=f}const f=this._b+i+h|0;this._b=this._c+o+l|0,this._c=this._d+s+a|0,this._d=this._e+r+u|0,this._e=this._a+n+c|0,this._a=f},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);const t=new DataView(this._block.buffer);t.setUint32(56,this._length[0],!0),t.setUint32(60,this._length[1],!0),this._block=new Uint8Array(t.buffer),this._update();const e=new DataView(new Uint8Array(20).buffer);return e.setInt32(0,this._a,!0),e.setInt32(4,this._b,!0),e.setInt32(8,this._c,!0),e.setInt32(12,this._d,!0),e.setInt32(16,this._e,!0),new Uint8Array(e.buffer)},this._block=new Uint8Array(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}}const hf=(t,e)=>{const r=nr.toString(Ml(e).slice(0,1),"hex"),n=nr.fromString(t,"hex"),i=(new cf).update(Ul(n)).digest(),o=r+nr.toString(i,"hex"),s=Ul(nr.fromString(o,"hex")),a=Ul(s),u=nr.toString(a,"hex").substring(0,8),c=o+u;return kl(nr.fromString(c,"hex"))},lf=vl.ec,ff=(t,e)=>{const r=new lf("secp256k1"),n=r.keyFromPublic(t,"hex").getPublic().encode("hex",!0),i=nr.fromString(n,"hex"),o=(new cf).update(Ul(i)).digest(),s=El.gW.toWords(o);return El.gW.encode(e,s).replace(e,"")},df=(t,e)=>{if(e){const r=e.split(":");switch(r[0]){case"bip122":r[r.length-1]=hf(t,r[r.length-1]);break;case"cosmos":r[r.length-1]=ff(t,r[1]);break;case"eip155":r[r.length-1]=Fl(t);break;default:return!1}return r.join(":").toLowerCase()===e.toLowerCase()}return!1},pf=new vl.ec("secp256k1");function yf(t,e=!1){const r=Rl(t);if(r.length!==(e?65:64))throw new Error("wrong signature length");const n=Bl(r.slice(0,32)),i=Bl(r.slice(32,64)),o={r:n,s:i};return e&&(o.recoveryParam=r[64]),o}function gf(t){if(t.publicKeyBase58)return Ml(t.publicKeyBase58);if(t.publicKeyBase64)return Rl(t.publicKeyBase64);if(t.publicKeyHex)return Cl(t.publicKeyHex);if(t.publicKeyJwk&&"secp256k1"===t.publicKeyJwk.crv&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return Cl(pf.keyFromPublic({x:Bl(Rl(t.publicKeyJwk.x)),y:Bl(Rl(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&"OKP"===t.publicKeyJwk.kty&&"Ed25519"===t.publicKeyJwk.crv&&t.publicKeyJwk.x)return Rl(t.publicKeyJwk.x);if(t.publicKeyMultibase){const{base16:e,base58btc:r,base64:n,base64url:i}=ml.gh,o=e.decoder.or(r.decoder.or(n.decoder.or(i.decoder)));return o.decode(t.publicKeyMultibase)}return new Uint8Array}function mf(t,e,r){const n=Ul(t),i=yf(e),o=r.filter((({ethereumAddress:t,blockchainAccountId:e})=>"undefined"===typeof t&&"undefined"===typeof e)),s=r.filter((({ethereumAddress:t,blockchainAccountId:e})=>"undefined"!==typeof t||"undefined"!==typeof e));let a=o.find((t=>{try{const e=gf(t);return pf.keyFromPublic(e).verify(n,i)}catch(e){return!1}}));if(!a&&s.length>0&&(a=bf(t,e,s)),!a)throw new Error("invalid_signature: Signature invalid for JWT");return a}function bf(t,e,r){let n;if(e.length>86)n=[yf(e,!0)];else{const t=yf(e,!1);n=[{...t,recoveryParam:0},{...t,recoveryParam:1}]}const i=e=>{const n=Ul(t),i=pf.recoverPubKey(n,e,e.recoveryParam),o=i.encode("hex"),s=i.encode("hex",!0),a=Fl(o).toLowerCase(),u=r.find((t=>{var e,r,n;const i=Bl(gf(t));return i===o||i===s||(null==(e=t.ethereumAddress)?void 0:e.toLowerCase())===a||(null==(r=t.blockchainAccountId)||null==(n=r.split("@eip155"))?void 0:n[0].toLowerCase())===a||df(o,t.blockchainAccountId)}));return u},o=n.map(i).filter((t=>"undefined"!==typeof t));if(0===o.length)throw new Error("invalid_signature: Signature invalid for JWT");return o[0]}function wf(t,e,r){const n=xl(t),i=Rl(e),o=r.find((t=>(0,Rh.T)(gf(t),n,i)));if(!o)throw new Error("invalid_signature: Signature invalid for JWT");return o}const vf={ES256K:mf,"ES256K-R":bf,Ed25519:wf,EdDSA:wf};function _f(t){const e=vf[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}_f.toSignatureObject=yf;const Ef=function(t,e,r={},n={}){try{r.alg||(r.alg=Sf);const i="string"===typeof t?t:Af(t,n.canonicalize),o=[Af(r,n.canonicalize),i].join("."),s=Yl(r.alg);return Promise.resolve(s(o,e)).then((function(t){return[o,t].join(".")}))}catch(i){return Promise.reject(i)}},Sf="ES256K";function Af(t,e=!1){return Ol(e?_l(t):JSON.stringify(t))}function If(t){const e=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(e)return{header:JSON.parse(Pl(e[1])),payload:e[2],signature:e[3],data:`${e[1]}.${e[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function Tf({header:t,data:e,signature:r},n){Array.isArray(n)||(n=[n]);const i=_f(t.alg)(e,r,n);return i}function Rf(t,e){const r=If(t);return Tf(r,e)}const Mf="undefined"!==typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function kf(t,e,r){if(!t.s){if(r instanceof Cf){if(!r.s)return void(r.o=kf.bind(null,t,e));1&e&&(e=r.s),r=r.v}if(r&&r.then)return void r.then(kf.bind(null,t,e),kf.bind(null,t,2));t.s=e,t.v=r;const n=t.o;n&&n(t)}}const Cf=function(){function t(){}return t.prototype.then=function(e,r){const n=new t,i=this.s;if(i){const t=1&i?e:r;if(t){try{kf(n,1,t(this.v))}catch(o){kf(n,2,o)}return n}return this}return this.o=function(t){try{const i=t.v;1&t.s?kf(n,1,e?e(i):i):r?kf(n,1,r(i)):kf(n,2,i)}catch(o){kf(n,2,o)}},n},t}();function Of(t){return t instanceof Cf&&1&t.s}function Pf(t,e,r){var n,i,o=-1;function s(a){try{while(++o<t.length&&(!r||!r()))if(a=e(o),a&&a.then){if(!Of(a))return void a.then(s,i||(i=kf.bind(null,n=new Cf,2)));a=a.v}n?kf(n,1,a):n=a}catch(u){kf(n||(n=new Cf),2,u)}}return s(),n}function Bf(t,e,r){if("function"===typeof t[Mf]){var n,i,o,s=t[Mf]();function h(t){try{while(!(n=s.next()).done&&(!r||!r()))if(t=e(n.value),t&&t.then){if(!Of(t))return void t.then(h,o||(o=kf.bind(null,i=new Cf,2)));t=t.v}i?kf(i,1,t):i=t}catch(a){kf(i||(i=new Cf),2,a)}}if(h(),s.return){var a=function(t){try{n.done||s.return()}catch(e){}return t};if(i&&i.then)return i.then(a,(function(t){throw a(t)}));a()}return i}if(!("length"in t))throw new TypeError("Object is not iterable");for(var u=[],c=0;c<t.length;c++)u.push(t[c]);return Pf(u,(function(t){return e(u[t])}),r)}function xf(t,e,r){for(var n;;){var i=t();if(Of(i)&&(i=i.v),!i)return o;if(i.then){n=0;break}var o=r();if(o&&o.then){if(!Of(o)){n=1;break}o=o.s}if(e){var s=e();if(s&&s.then&&!Of(s)){n=2;break}}}var a=new Cf,u=kf.bind(null,a,2);return(0===n?i.then(h):1===n?o.then(c):s.then(l)).then(void 0,u),a;function c(n){o=n;do{if(e&&(s=e(),s&&s.then&&!Of(s)))return void s.then(l).then(void 0,u);if(i=t(),!i||Of(i)&&!i.v)return void kf(a,1,o);if(i.then)return void i.then(h).then(void 0,u);o=r(),Of(o)&&(o=o.v)}while(!o||!o.then);o.then(c).then(void 0,u)}function h(t){t?(o=r(),o&&o.then?o.then(c).then(void 0,u):c(o)):kf(a,1,o)}function l(){(i=t())?i.then?i.then(h).then(void 0,u):h(i):kf(a,1,o)}}function Nf(t){if(!(t.protected&&t.iv&&t.ciphertext&&t.tag))throw new Error("bad_jwe: missing properties");t.recipients&&t.recipients.map((t=>{if(!t.header||!t.encrypted_key)throw new Error("bad_jwe: malformed recipients")}))}function Df({ciphertext:t,tag:e,iv:r,protectedHeader:n,recipient:i},o){const s={protected:n,iv:Tl(r),ciphertext:Tl(t),tag:Tl(e)};return o&&(s.aad=Tl(o)),i&&(s.recipients=[i]),s}const Lf=function(t,e){try{function n(t){if(null===a)throw new Error("failure: Failed to decrypt");return a}Nf(t);const i=JSON.parse(Pl(t.protected));if(i.enc!==e.enc)throw new Error(`not_supported: Decrypter does not supported: '${i.enc}'`);const o=Ll(t.ciphertext,t.tag),s=(0,nr.fromString)(t.aad?`${t.protected}.${t.aad}`:t.protected);let a=null;const u=function(){return"dir"===i.alg&&"dir"===e.alg?Promise.resolve(e.decrypt(o,Rl(t.iv),s)).then((function(t){a=t})):function(){if(t.recipients&&0!==t.recipients.length){let r=0;return xf((function(){return!a&&r<t.recipients.length}),(function(){return r++}),(function(){const n=t.recipients[r];Object.assign(n.header,i);const u=function(){if(n.header.alg===e.alg)return Promise.resolve(e.decrypt(o,Rl(t.iv),s,n)).then((function(t){a=t}))}();if(u&&u.then)return u.then((function(){}))}))}throw new Error("bad_jwe: missing recipients")}()}();return Promise.resolve(u&&u.then?u.then(n):n(u))}catch(r){return Promise.reject(r)}},Uf=function(t,e,r={},n){try{if("dir"===e[0].alg){if(e.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(e[0].encrypt(t,r,n)).then((function(t){return Df(t,n)}))}{const i=e[0].enc;if(!e.reduce(((t,e)=>t&&e.enc===i),!0))throw new Error("invalid_argument: Incompatible encrypters passed");let o,s;const a=Bf(e,(function(e){const i=function(){return o?Promise.resolve(null==e.encryptCek?void 0:e.encryptCek(o)).then((function(t){var e,r;t&&(null==(e=s)||null==(r=e.recipients)||r.push(t))})):Promise.resolve(e.encrypt(t,r,n)).then((function(t){o=t.cek,s=Df(t,n)}))}();if(i&&i.then)return i.then((function(){}))}));return Promise.resolve(a&&a.then?a.then((function(){return s})):s)}}catch(i){return Promise.reject(i)}};const jf=function(t,e){try{const r=function(t,n=[]){try{return Promise.resolve(e.resolve(t)).then((function({didResolutionMetadata:e,didDocument:i}){function o(){var e,r;const n=null==(e=i.keyAgreement)||null==(r=e.map((t=>"string"===typeof t?[...i.publicKey||[],...i.verificationMethod||[]].find((e=>e.id===t)):t)))?void 0:r.filter((t=>"undefined"!==typeof t)),o=(null==n?void 0:n.filter((t=>"X25519KeyAgreementKey2019"===t.type&&Boolean(t.publicKeyBase58))))||[];if(!o.length&&!s.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${t}`);return o.map((t=>qf(Ml(t.publicKeyBase58),t.id))).concat(...s)}if(n.push(t),null!=e&&e.error||null==i)throw new Error(`resolver_error: Could not resolve ${t}: ${e.error}, ${e.message}`);let s=[];if(!i.controller&&!i.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${t}`);const a=function(){if(i.controller){let t=Array.isArray(i.controller)?i.controller:[i.controller];t=t.filter((t=>!n.includes(t)));const e=t.map((t=>r(t,n).catch((()=>[]))));return Promise.resolve(Promise.all(e)).then((function(t){s=[].concat(...t)}))}}();return a&&a.then?a.then(o):o(a)}))}catch(i){return Promise.reject(i)}},n=t.map((t=>r(t)));return Promise.resolve(Promise.all(n)).then((function(t){const e=[].concat(...t);return e}))}catch(r){return Promise.reject(r)}};function Ff(t){const e=new Al.NV(t);return(t,r)=>{const n=(0,hn.randomBytes)(e.nonceLength),i=e.seal(n,t,r);return{ciphertext:i.subarray(0,i.length-e.tagLength),tag:i.subarray(i.length-e.tagLength),iv:n}}}function Kf(t){const e=function(t,e={},o){try{const s=Ol(JSON.stringify(Object.assign({alg:i},e,{enc:n}))),a=(0,Il.fromString)(o?`${s}.${Tl(o)}`:s);return Promise.resolve({...r(t,a),protectedHeader:s})}catch(s){return Promise.reject(s)}},r=Ff(t),n="XC20P",i="dir";return{alg:i,enc:n,encrypt:e}}function $f(t){const e=function(t,e,n){try{return Promise.resolve(r.open(e,t,n))}catch(i){return Promise.reject(i)}},r=new Al.NV(t);return{alg:"dir",enc:"XC20P",decrypt:e}}function qf(t,e){const r=function(t,e={},r){try{Object.assign(e,{alg:void 0});const i=(0,hn.randomBytes)(32);return Promise.resolve(Kf(i).encrypt(t,e,r)).then((function(t){return Promise.resolve(n(i)).then((function(e){return{...t,recipient:e,cek:i}}))}))}catch(i){return Promise.reject(i)}},n=function(r){try{const n=(0,Sl.generateKeyPair)(),a=(0,Sl.sharedKey)(n.secretKey,t),u=ql(a,o,i),c=Ff(u)(r),h={encrypted_key:Tl(c.ciphertext),header:{alg:i,iv:Tl(c.iv),tag:Tl(c.tag),epk:{kty:"OKP",crv:s,x:Tl(n.publicKey)}}};return e&&(h.header.kid=e),Promise.resolve(h)}catch(n){return Promise.reject(n)}},i="ECDH-ES+XC20PKW",o=256,s="X25519";return{alg:i,enc:"XC20P",encrypt:r,encryptCek:n}}function Hf(t){if(!(t&&t.epk&&t.iv&&t.tag))throw new Error("bad_jwe: malformed header")}function zf(t){const e=function(e,o,s,a){try{var u,c;function l(){const t=ql(d,n,r),i=Ll(a.encrypted_key,a.header.tag);return Promise.resolve($f(t).decrypt(i,Rl(a.header.iv))).then((function(t){return null===t?null:$f(t).decrypt(e,o,s)}))}if(Hf(null==(u=a)?void 0:u.header),(null==(c=a.header.epk)?void 0:c.crv)!==i||"undefined"==typeof a.header.epk.x)return Promise.resolve(null);const f=Rl(a.header.epk.x);let d;const p=function(){if(!(t instanceof Uint8Array))return Promise.resolve(t(f)).then((function(t){d=t}));d=(0,Sl.sharedKey)(t,f)}();return Promise.resolve(p&&p.then?p.then(l):l(p))}catch(h){return Promise.reject(h)}},r="ECDH-ES+XC20PKW",n=256,i="X25519";return{alg:r,enc:"XC20P",decrypt:e}}var Vf=r(67041);const Gf=24;async function Wf(t){const e=await b({value:t,codec:n,hasher:v.sha256});return{cid:e.cid,linkedBlock:e.bytes}}function Yf(t,e=Gf){const r=(e-t.length%e)%e,n=new Uint8Array(t.length+r);return n.set(t,0),n}async function Jf(t){const e=await b({value:t,codec:n,hasher:Vf.identity});return e.cid}function Zf(t){if(t=l.CID.asCID(t),t.code!==tr)throw new Error("CID codec must be dag-cbor");if(t.multihash.code!==Vf.identity.code)throw new Error("CID must use identity multihash");return rr(t.multihash.digest)}async function Xf(t,e){return Yf((await Jf(t)).bytes,e)}function Qf(t){return Zf(l.CID.decodeFirst(t)[0])}var td=r(21249),ed=r(88017),rd=r(16343),nd=r(6831),id=r(48737);const od="wallet/5.6.2";new id.Yd(od);function sd(t,e){return(0,nd.RJ)((0,rd.r)(t),e)}var ad=r(15941);const ud='\nsign-in-with-ethereum =\n    domain %s" wants you to sign in with your Ethereum account:" LF\n    address LF\n    LF\n    [ statement LF ]\n    LF\n    %s"URI: " URI LF\n    %s"Version: " version LF\n    %s"Nonce: " nonce LF\n    %s"Issued At: " issued-at\n    [ LF %s"Expiration Time: " expiration-time ]\n    [ LF %s"Not Before: " not-before ]\n    [ LF %s"Request ID: " request-id ]\n    [ LF %s"Chain ID: " chain-id ]\n    [ LF %s"Resources:"\n    resources ]\n\ndomain = dnsauthority\n\naddress = "0x" 40*40HEXDIG\n    ; Must also conform to captilization\n    ; checksum encoding specified in EIP-55\n    ; where applicable (EOAs).\n\nstatement = *( reserved / unreserved / " " )\n    ; The purpose is to exclude LF (line breaks).\n\nversion = "1"\n\nnonce = 8*( ALPHA / DIGIT )\n\nissued-at = date-time\nexpiration-time = date-time\nnot-before = date-time\n\nrequest-id = *pchar\n\nchain-id = 1*DIGIT\n    ; See EIP-155 for valid CHAIN_IDs.\n\nresources = *( LF resource )\n\nresource = "- " URI\n\n; ------------------------------------------------------------------------------\n; RFC 3986\n\nURI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]\n\nhier-part     = "//" authority path-abempty\n              / path-absolute\n              / path-rootless\n              / path-empty\n\nscheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )\n\nauthority     = [ userinfo "@" ] host [ ":" port ]\nuserinfo      = *( unreserved / pct-encoded / sub-delims / ":" )\nhost          = IP-literal / IPv4address / reg-name\nport          = *DIGIT\n\nIP-literal    = "[" ( IPv6address / IPvFuture  ) "]"\n\nIPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )\n\nIPv6address   =                            6( h16 ":" ) ls32\n              /                       "::" 5( h16 ":" ) ls32\n              / [               h16 ] "::" 4( h16 ":" ) ls32\n              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32\n              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32\n              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32\n              / [ *4( h16 ":" ) h16 ] "::"              ls32\n              / [ *5( h16 ":" ) h16 ] "::"              h16\n              / [ *6( h16 ":" ) h16 ] "::"\n\nh16           = 1*4HEXDIG\nls32          = ( h16 ":" h16 ) / IPv4address\nIPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet\ndec-octet     = DIGIT                 ; 0-9\n                 / %x31-39 DIGIT         ; 10-99\n                 / "1" 2DIGIT            ; 100-199\n                 / "2" %x30-34 DIGIT     ; 200-249\n                 / "25" %x30-35          ; 250-255\n\nreg-name      = *( unreserved / pct-encoded / sub-delims )\n\npath-abempty  = *( "/" segment )\npath-absolute = "/" [ segment-nz *( "/" segment ) ]\npath-rootless = segment-nz *( "/" segment )\npath-empty    = 0pchar\n\nsegment       = *pchar\nsegment-nz    = 1*pchar\n\npchar         = unreserved / pct-encoded / sub-delims / ":" / "@"\n\nquery         = *( pchar / "/" / "?" )\n\nfragment      = *( pchar / "/" / "?" )\n\npct-encoded   = "%" HEXDIG HEXDIG\n\nunreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"\nreserved      = gen-delims / sub-delims\ngen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"\nsub-delims    = "!" / "$" / "&" / "\'" / "(" / ")"\n              / "*" / "+" / "," / ";" / "="\n\n; ------------------------------------------------------------------------------\n; RFC 4501\n\ndnsauthority    = host [ ":" port ]\n                             ; See RFC 3986 for the\n                             ; definition of "host" and "port".\n\n; ------------------------------------------------------------------------------\n; RFC 3339\n\ndate-fullyear   = 4DIGIT\ndate-month      = 2DIGIT  ; 01-12\ndate-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on\n                          ; month/year\ntime-hour       = 2DIGIT  ; 00-23\ntime-minute     = 2DIGIT  ; 00-59\ntime-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second\n                          ; rules\ntime-secfrac    = "." 1*DIGIT\ntime-numoffset  = ("+" / "-") time-hour ":" time-minute\ntime-offset     = "Z" / time-numoffset\n\npartial-time    = time-hour ":" time-minute ":" time-second\n                  [time-secfrac]\nfull-date       = date-fullyear "-" date-month "-" date-mday\nfull-time       = partial-time time-offset\n\ndate-time       = full-date "T" full-time\n\n; ------------------------------------------------------------------------------\n; RFC 5234\n\nALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z\nLF             =  %x0A\n                  ; linefeed\nDIGIT          =  %x30-39\n                  ; 0-9\nHEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"\n';class cd{constructor(t){this.domain=void 0,this.address=void 0,this.statement=void 0,this.uri=void 0,this.version=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.chainId=void 0,this.resources=void 0;const e=new td(ud);if(e.generate(),e.errors.length)throw ad.error(e.errorsToAscii()),ad.error(e.linesToAscii()),ad.log(e.displayAttributeErrors()),new Error("ABNF grammar has errors");const r=e.toObject(),n=new ed.parser;n.ast=new ed.ast;const i=ed.ids,o=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.domain=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks.domain=o;const s=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.address=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks.address=s;const a=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.statement=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks.statement=a;const u=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.uri||(o.uri=ed.utils.charsToString(e,r,n))),s};n.ast.callbacks.uri=u;const c=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.version=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks.version=c;const h=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.chainId=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks["chain-id"]=h;const l=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.nonce=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks.nonce=l;const f=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.issuedAt=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks["issued-at"]=f;const d=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.expirationTime=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks["expiration-time"]=d;const p=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.notBefore=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks["not-before"]=p;const y=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.requestId=ed.utils.charsToString(e,r,n)),s};n.ast.callbacks["request-id"]=y;const g=function(t,e,r,n,o){const s=i.SEM_OK;return t===i.SEM_PRE&&(o.resources=ed.utils.charsToString(e,r,n).slice(3).split("\n- ")),s};n.ast.callbacks.resources=g;const m=n.parse(r,"sign-in-with-ethereum",t);if(!m.success)throw new Error(`Invalid message: ${JSON.stringify(m)}`);const b={};n.ast.translate(b);for(const[w,v]of Object.entries(b))this[w]=v}}var hd,ld;(function(t){t["INVALID_SIGNATURE"]="Invalid signature.",t["EXPIRED_MESSAGE"]="Expired message.",t["MALFORMED_SESSION"]="Malformed session."})(hd||(hd={})),function(t){t["PERSONAL_SIGNATURE"]="Personal signature"}(ld||(ld={}));class fd{constructor(t){if(this.domain=void 0,this.address=void 0,this.statement=void 0,this.uri=void 0,this.version=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.chainId=void 0,this.resources=void 0,this.signature=void 0,this.type=void 0,"string"===typeof t){const e=new cd(t);this.domain=e.domain,this.address=e.address,this.statement=e.statement,this.uri=e.uri,this.version=e.version,this.nonce=e.nonce,this.issuedAt=e.issuedAt,this.expirationTime=e.expirationTime,this.notBefore=e.notBefore,this.requestId=e.requestId,this.chainId=e.chainId,this.resources=e.resources}else Object.assign(this,t)}static fromCacao(t){const e=Va.parse(t.p.iss.replace("did:pkh:","")),r=new fd({domain:t.p.domain,address:e.address,uri:t.p.aud,version:t.p.version,chainId:new za(e.chainId).reference});return t.p.statement&&(r.statement=t.p.statement),t.p.nonce&&(r.nonce=t.p.nonce),t.p.iat&&(r.issuedAt=t.p.iat),t.p.exp&&(r.expirationTime=t.p.exp),t.p.nbf&&(r.notBefore=t.p.nbf),t.p.requestId&&(r.requestId=t.p.requestId),t.p.resources&&(r.resources=t.p.resources),t.s&&(t.s.s&&(r.signature=t.s.s),"eip191"===t.s.t&&(r.type=ld.PERSONAL_SIGNATURE)),r}toMessage(){const t=`${this.domain} wants you to sign in with your Ethereum account:`,e=`URI: ${this.uri}`;let r=[t,this.address].join("\n");const n=`Version: ${this.version}`;this.nonce||(this.nonce=(Math.random()+1).toString(36).substring(4));const i=`Nonce: ${this.nonce}`,o=[e,n,i];if(this.issuedAt=this.issuedAt?this.issuedAt:(new Date).toISOString(),o.push(`Issued At: ${this.issuedAt}`),this.expirationTime){const t=`Expiration Time: ${this.expirationTime}`;o.push(t)}this.notBefore&&o.push(`Not Before: ${this.notBefore}`),this.requestId&&o.push(`Request ID: ${this.requestId}`),this.chainId&&o.push(`Chain ID: ${this.chainId}`),this.resources&&o.push(["Resources:",...this.resources.map((t=>`- ${t}`))].join("\n"));const s=o.join("\n");return this.statement&&(r=[r,this.statement].join("\n\n")),[r,s].join("\n\n")}signMessage(){let t;switch(this.type){case ld.PERSONAL_SIGNATURE:t=this.toMessage();break;default:t=this.toMessage();break}return t}}const dd=300;var pd,yd;(function(t){function e(t){const e={h:{t:"eip4361"},p:{domain:t.domain,iat:t.issuedAt,iss:`did:pkh:eip155:${t.chainId}:${t.address}`,aud:t.uri,version:t.version,nonce:t.nonce}};return t.signature&&(e.s={t:"eip191",s:t.signature}),t.notBefore&&(e.p.nbf=t.notBefore),t.expirationTime&&(e.p.exp=t.expirationTime),t.statement&&(e.p.statement=t.statement),t.requestId&&(e.p.requestId=t.requestId),t.resources&&(e.p.resources=t.resources),e}function r(t,e={}){var r;if("eip4361"===t.h.t&&"eip191"===(null==(r=t.s)?void 0:r.t))return n(t,e);throw new Error("Unsupported CACAO signature type")}function n(t,e){if(!t.s)throw new Error("CACAO does not have a signature");const r=e.atTime?e.atTime.getTime():Date.now(),n=1e3*(e.clockSkewSecs??dd);if(Date.parse(t.p.iat)>r+n||Date.parse(t.p.nbf)>r+n)throw new Error("CACAO is not valid yet");const i=e.revocationPhaseOutSecs?1e3*e.revocationPhaseOutSecs:0;if(Date.parse(t.p.exp)+i+n<r)throw new Error("CACAO has expired");const o=fd.fromCacao(t),s=t.s.s,a=sd(o.toMessage(),s),u=Va.parse(t.p.iss.replace("did:pkh:","")).address;if(a.toLowerCase()!==u.toLowerCase())throw new Error("Signature does not belong to issuer")}t.fromSiweMessage=e,t.verify=r,t.verifyEIP191Signature=n})(pd||(pd={})),function(t){const e=function(t){try{return Promise.resolve(b({value:t,codec:n,hasher:v.sha256}))}catch(e){return Promise.reject(e)}};t.fromCacao=e}(yd||(yd={}));const gd="base64pad",md="base64url";function bd(t){return(0,Th.toString)(t,gd)}function wd(t){return(0,Th.toString)(t,md)}function vd(t){return(0,Il.fromString)(t,gd)}function _d(t){return JSON.parse((0,Th.toString)((0,Il.fromString)(t,md)))}function Ed(t){if(t.signatures.length>1)throw new Error("Cant convert to compact jws");return`${t.signatures[0].protected}.${t.payload}.${t.signatures[0].signature}`}function Sd(t,e){if(e){const r=e.toISOString().split(".")[0]+"Z";return`${t}?versionTime=${r}`}return t}function Ad(t){return t?Array.isArray(t)?t:[t]:[]}function Id(){return(0,Th.toString)((0,hn.randomBytes)(16),"base64")}function Td(t){return"registry"in t&&"cache"in t}class Rd{constructor({provider:t,resolver:e={},resolverOptions:r,capability:n,parent:i}={}){if(null!=t&&(this._client=new ia(t)),n){if(this._capability=n,this._parentId=this._capability.p.iss,i&&this._parentId!==i)throw new Error("Capability issuer and parent not equal")}else i&&(this._parentId=i);this.setResolver(e,r)}get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return null!=this._capability}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return null!=this._parentId}get id(){if(null==this._id)throw new Error("DID is not authenticated");return this._id}get authenticated(){return null!=this._id}withCapability(t){return new Rd({provider:this._client?.connection,resolver:this._resolver,capability:t,parent:this._parentId})}setProvider(t){if(null==this._client)this._client=new ia(t);else if(this._client.connection!==t)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(t,e){this._resolver=Td(t)?t:new Hc(t,e)}async authenticate({provider:t,paths:e=[],aud:r}={}){if(null!=t&&this.setProvider(t),null==this._client)throw new Error("No provider available");const n=Id(),i=await this._client.request("did_authenticate",{nonce:n,aud:r,paths:e}),{kid:o}=await this.verifyJWS(i),s=_d(i.payload);if(!o.includes(s.did))throw new Error("Invalid authencation response, kid mismatch");if(s.nonce!==n)throw new Error("Invalid authencation response, wrong nonce");if(s.aud!==r)throw new Error("Invalid authencation response, wrong aud");if(s.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=s.did,this._id}async createJWS(t,e={}){if(null==this._client)throw new Error("No provider available");if(null==this._id)throw new Error("DID is not authenticated");if(this._capability){const t=await yd.fromCacao(this._capability),r=l.CID.asCID(t.cid);if(!r)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");e.protected=e.protected||{},e.protected.cap=`ipfs://${r?.toString()}`}const{jws:r}=await this._client.request("did_createJWS",{did:this._id,...e,payload:t});return r}async createDagJWS(t,e={}){const{cid:r,linkedBlock:n}=await Wf(t),i=wd(r.bytes);Object.assign(e,{linkedBlock:bd(n)});const o=await this.createJWS(i,e),s=l.CID.asCID(r);if(!s)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(o.link=s,this._capability){const t=await yd.fromCacao(this._capability);return{jws:o,linkedBlock:n,cacaoBlock:t.bytes}}return{jws:o,linkedBlock:n}}async verifyJWS(t,e={}){"string"!==typeof t&&(t=Ed(t));const r=_d(t.split(".")[0]).kid;if(!r)throw new Error('No "kid" found in jws');const n=await this.resolve(r),i=!e.disableTimecheck;if(i){const t=n.didDocumentMetadata?.nextUpdate;if(t){const n=e.revocationPhaseOutSecs?1e3*e.revocationPhaseOutSecs:0,i=new Date(t).valueOf()+n,o=e.atTime&&e.atTime.getTime()<i,s=!o;if(s)throw new Error(`invalid_jws: signature authored with a revoked DID version: ${r}`)}const i=n.didDocumentMetadata?.updated;if(i&&e.atTime&&e.atTime.getTime()<new Date(i).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${r}`)}const o=n.didDocument?.id;if(e.issuer&&e.issuer===e.capability?.p.iss&&o===e.capability.p.aud)pd.verify(e.capability,{atTime:e.atTime?e.atTime:void 0,revocationPhaseOutSecs:e.revocationPhaseOutSecs});else if(e.issuer&&e.issuer!==o){const t=Sd(e.issuer,e.atTime),n=await this.resolve(t),i=n.didDocument?.controller,s=Ad(i);if(e.capability?.s&&e.capability.p.aud===o&&s.includes(e.capability.p.iss))pd.verify(e.capability,{atTime:e.atTime?e.atTime:void 0,revocationPhaseOutSecs:e.revocationPhaseOutSecs});else{const t=!!o&&s.includes(o);if(!t)throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${r}`)}}const s=n.didDocument?.verificationMethod||[];let a;Rf(t,s);try{a=_d(t.split(".")[1])}catch(u){}return{kid:r,payload:a,didResolutionResult:n}}async createJWE(t,e,r={}){const n=await jf(e,this._resolver);return Uf(t,n,r.protectedHeader,r.aad)}async createDagJWE(t,e,r={}){const n=await Xf(t);return this.createJWE(n,e,r)}async decryptJWE(t,e={}){if(null==this._client)throw new Error("No provider available");if(null==this._id)throw new Error("DID is not authenticated");const{cleartext:r}=await this._client.request("did_decryptJWE",{did:this._id,...e,jwe:t});return vd(r)}async decryptDagJWE(t){const e=await this.decryptJWE(t);return Qf(e)}async resolve(t){const e=await this._resolver.resolve(t);if(e.didResolutionMetadata.error){const{error:r,message:n}=e.didResolutionMetadata,i=n?`, ${n}`:"";throw new Error(`Failed to resolve ${t}: ${r}${i}`)}return e}}class Md extends gl{get threeId(){return this._threeId}async authenticate(t,e=!0){const r=await this.connect(t);return await r.authenticate(),e&&(this.ceramic.did=r),r}async connect(t){return await this._threeId.connect(t),new Rd({provider:this._threeId.getDidProvider(),resolver:this.resolver})}constructor(t){super(t),this._threeId=new gu(t.connectNetwork??t.ceramic)}}var kd=r(28154);const Cd="base64pad";function Od(t){return JSON.parse(kd(t))}function Pd(t){const e=new Uint8Array(t.length+2);return e[0]=237,e[1]=1,e.set(t,2),`did:key:z${nr.toString(e,"base58btc")}`}function Bd(t){const[e,r,n]=t.split(".");return{payload:r,signatures:[{protected:e,signature:n}]}}const xd=async(t,e,r,n={})=>{const i=`${e}#${e.split(":")[2]}`,o=Hl(r),s=Od(Object.assign(n,{kid:i,alg:"EdDSA"}));return Ef("string"===typeof t?t:Od(t),o,s)},Nd={did_authenticate:async({did:t,secretKey:e},r)=>{const n=await xd({did:t,aud:r.aud,nonce:r.nonce,paths:r.paths,exp:Math.floor(Date.now()/1e3)+600},t,e);return Bd(n)},did_createJWS:async({did:t,secretKey:e},r)=>{const n=r.did.split("#")[0];if(n!==t)throw new Ks(4100,`Unknown DID: ${t}`);const i=await xd(r.payload,t,e,r.protected);return{jws:Bd(i)}},did_decryptJWE:async({secretKey:t},e)=>{const r=zf((0,Rh.zh)(t));try{const t=await Lf(e.jwe,r);return{cleartext:nr.toString(t,Cd)}}catch(n){throw new Ks(-32e3,n.message)}}};class Dd{constructor(t){const{secretKey:e,publicKey:r}=(0,Rh._w)(t),n=Pd(r),i=Ws(Nd);this._handle=async t=>await i({did:n,secretKey:e},t)}get isDidProvider(){return!0}async send(t){return await this._handle(t)}}function Ld(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ud(t,e){return e.get?e.get.call(t):e.value}function jd(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Fd(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Kd(t,e){var r=Fd(t,e,"get");return Ud(t,r)}function $d(t,e,r){Ld(t,e),e.set(t,r)}function qd(t,e,r){var n=Fd(t,e,"set");return jd(t,n,r),r}async function Hd(t){const e=new Dd(t||(0,hn.randomBytes)(32)),r=new Rd({provider:e,resolver:rl.getResolver()});return await r.authenticate(),r}var zd=new WeakMap,Vd=new WeakMap;class Gd{get authProvider(){return Kd(this,zd)}async authorize(t={}){const e=await Hd(),r=Object.assign({resources:["ceramic://*"]},t),n=await Kd(this,zd).requestCapability(e.id,[],r),i=e.withCapability(n);return await i.authenticate(),qd(this,Vd,i),i}getDID(){if(!Kd(this,Vd))throw new Error("DID not available, has not authorized");return Kd(this,Vd)}get id(){if(!Kd(this,Vd))throw new Error("ID not available, has not authorized");return Kd(this,Vd).parent}constructor(t){$d(this,zd,{writable:!0,value:void 0}),$d(this,Vd,{writable:!0,value:void 0}),qd(this,zd,t.authProvider)}}function Wd(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yd(t,e){return e.get?e.get.call(t):e.value}function Jd(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function Zd(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Xd(t,e){var r=Zd(t,e,"get");return Yd(t,r)}function Qd(t,e,r){Wd(t,e),e.set(t,r)}function tp(t,e,r){var n=Zd(t,e,"set");return Jd(t,n,r),r}var ep=new WeakMap;class rp extends gl{async authenticate(t,e=!0){tp(this,ep,new Gd({authProvider:t}));const r=await Xd(this,ep).authorize();return e&&(this.ceramic.did=r),r}constructor(...t){super(...t),Qd(this,ep,{writable:!0,value:void 0})}}function np(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ip(t,e){return e.get?e.get.call(t):e.value}function op(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function sp(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function ap(t,e){var r=sp(t,e,"get");return ip(t,r)}function up(t,e,r){np(t,e),e.set(t,r)}function cp(t,e,r){var n=sp(t,e,"set");return op(t,n,r),r}var hp=new WeakMap;class lp{static async authenticate(t){const{authProvider:e,session:r,...n}=t,i=r?new rp(n):new Md(n);return await i.authenticate(e,!0),new lp({client:i})}get client(){return ap(this,hp)}get did(){const t=ap(this,hp).ceramic.did;if(null==t||!t.authenticated)throw new Error("Expected authenticated DID instance to be attached to Ceramic");return t}get id(){return this.did.hasParent?this.did.parent:this.did.id}async get(t){return await ap(this,hp).dataStore.get(t,this.id)}async set(t,e){return await ap(this,hp).dataStore.set(t,e)}async merge(t,e){return await ap(this,hp).dataStore.merge(t,e)}constructor(t){if(up(this,hp,{writable:!0,value:void 0}),!t.client.ceramic.did?.authenticated)throw new Error("Input DID must be authenticated, use SelfID.authenticate() instead of new SelfID()");cp(this,hp,t.client)}}function fp(t,e=!0){const r={message:"Link this account to your identity\n\n"+t};return e&&(r.timestamp=Math.floor(Date.now()/1e3),r.message+=" \nTimestamp: "+r.timestamp),r}function dp(t,e){return{jsonrpc:"2.0",id:1,method:t,params:e}}function pp(t){return`${t.address}@${t.chainId.namespace}:${t.chainId.reference}`}var yp=r(15941);const gp={ethereumEOA:"ethereum-eoa",erc1271:"erc1271"},mp="eip155",bp=new WeakMap;async function wp(t){let e=bp.get(t);if(!e){const r=await Ep(t,"eth_chainId",[]);e=parseInt(r,16),bp.set(t,e)}return e}class vp{constructor(t,e,r={}){this.provider=t,this.address=e,this.opts=r,this.isAuthProvider=!0}async accountId(){if(!this._accountId){const t=await wp(this.provider);this._accountId=new Va({address:this.address,chainId:`${mp}:${t}`})}return this._accountId}async authenticate(t){const e=await this.accountId();return Cp(t,e,this.provider)}async createLink(t){const e=await this.accountId();return kp(t,e,this.provider,this.opts)}async requestCapability(t,e,r={}){yp.warn("WARN: requestCapability os an experimental API, that is subject to change any time.");const n="undefined"!==typeof window?window.location.hostname:r.domain;if(!n)throw new Error("Missing parameter 'domain'");const i=new Date,o=new Date(i.getTime()+864e5),s=new fd({domain:n,address:this.address,statement:r.statement??"Give this application access to some of your data on Ceramic",uri:t,version:r.version??"1",nonce:r.nonce??(0,hn.randomString)(10),issuedAt:i.toISOString(),expirationTime:r.expirationTime??o.toISOString(),chainId:(await this.accountId()).chainId.reference,resources:(r.resources??[]).concat(e.map((t=>("string"===typeof t?Ar.fromString(t):t).toUrl())))});r.requestId&&(s.requestId=r.requestId);const a=await this.accountId(),u=await Ep(this.provider,"personal_sign",[s.signMessage(),a.address]);s.signature=u;const c=pd.fromSiweMessage(s);return c}withAddress(t){return new vp(this.provider,t)}}async function _p(t,e){return Ep(e,"eth_getCode",[t,"latest"])}function Ep(t,e,r){if(null==r&&(r=[]),t.request)return t.request({method:e,params:r}).then((t=>t),(t=>{throw t}));if(t.sendAsync||t.send){const n=(t.sendAsync?t.sendAsync:t.send).bind(t),i=dp(e,r);return new Promise(((t,e)=>{n(i,((r,n)=>{if(r&&e(r),n.error){const t=new Error(n.error.message);t.code=n.error.code,t.data=n.error.data,e(t)}t(n.result)}))}))}throw new Error("Unsupported provider; provider must implement one of the following methods: send, sendAsync, request")}async function Sp(t,e){const r=await _p(t.address,e).catch((()=>null));return Boolean(r&&"0x"!==r&&"0x0"!==r&&"0x00"!==r)}function Ap(t){return new Va({address:t.address.toLowerCase(),chainId:t.chainId})}function Ip(t){const e=nr.fromString(t),r=nr.toString(e,"base16");return"0x"+r}async function Tp(t,e,r,n={}){const{message:i,timestamp:o}=fp(t,!n.skipTimestamp),s=Ip(i),a=await Ep(r,"personal_sign",[s,e.address]),u={version:2,type:gp.ethereumEOA,message:i,signature:a,account:pp(e)};return n.skipTimestamp||(u.timestamp=o),u}async function Rp(t,e){const r=await wp(e);if(r!==parseInt(t.chainId.reference))throw new Error(`ChainId in provider (${r}) is different from AccountId (${t.chainId.reference})`)}async function Mp(t,e,r,n){const i=n?.eoaSignAccount||e,o=await Tp(t,i,r,n);return await Rp(e,r),Object.assign(o,{type:gp.erc1271,account:pp(e)})}async function kp(t,e,r,n){return e=Ap(e),await Sp(e,r)?Mp(t,e,r,n):Tp(t,e,r,n)}async function Cp(t,e,r){if(e&&(e=Ap(e)),r.isAuthereum)return r.signMessageWithSigningKey(t);const n=Ip(t),i=await Ep(r,"personal_sign",[n,e.address]),o=nr.fromString(i.slice(2)),s=bl.hash(o);return`0x${nr.toString(s,"base16")}`}var Op=r(26877);const Pp={definitions:{likes:"kjzl6cwe1jw145oekmuo8v8tqncvla6nmgcck54qqfdwsb4h4ddxbhzkel5qygw"},schemas:{likes:"ceramic://k3y52l7qbv1fry8ntb87p0yya7qj9ujfuiy6iqv3rw75xqyrddykxyfr1nlfh2l8g"},tiles:{}},Bp=()=>{const{ethereum:t,account:e,request:r}=(0,Op.i)(),n=async()=>{await r();const n=await lp.authenticate({authProvider:new vp(t,e.value),ceramic:"testnet-clay",connectNetwork:"testnet-clay"}),i=n.client.ceramic;return new xo({ceramic:i,model:Pp})};return{authenticate:n}}},990:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return _}});var n=r(73396),i=r(44870),o=r(87139),s=r(22483),a=r(73228);const u={class:"flex flex-col"},c=(0,n._)("h1",{class:"text-3xl font-bold"}," Commits ",-1),h={class:"mt-5 table-auto"},l=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{class:"text-left text-xl font-bold"}," Hash "),(0,n._)("th",{class:"text-left text-xl font-bold"}," Message "),(0,n._)("th",{class:"text-left text-xl font-bold"}," Commiter "),(0,n._)("th",{class:"text-left text-xl font-bold"}," Date ")])],-1),f={class:"py-1 font-mono"},d={class:"py-1 font-mono max-w-[32em]"},p={class:"line-clamp-1"},y={class:"py-1 font-mono"},g={class:"py-1 font-mono"},m=(0,n._)("h1",{class:"mt-5 text-3xl font-bold"}," API Response ",-1),b={class:"mt-5 p-3 border"};var w={__name:"BranchView",async setup(t){let e,r;const{params:{ipld:w}}=(0,s.yj)(),{data:v}=([e,r]=(0,n.mv)((()=>(0,a.h)(`ipld/${w}`))),e=await e,r(),e);return(t,e)=>{const r=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",u,[c,(0,n._)("table",h,[l,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(v),(t=>((0,n.wg)(),(0,n.iD)("tr",{class:"border-y",key:t.hash},[(0,n._)("td",f,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",title:t.hash,to:`/trees/${t["tree"]["/"]}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.hash.substring(0,8)),1)])),_:2},1032,["title","to"])]),(0,n._)("td",d,[(0,n._)("p",p,(0,o.zw)(t.message),1)]),(0,n._)("td",y,(0,o.zw)(t.author.name),1),(0,n._)("td",g,(0,o.zw)(t.author.date),1)])))),128))])]),m,(0,n._)("pre",b," "+(0,o.zw)((0,i.SU)(v))+" ",1)])}}};const v=w;var _=v},24285:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return p}});var n=r(73396),i=r(87139),o=r(44870),s=r(22483),a=r(73228);const u={class:"flex flex-col"},c=(0,n._)("h1",{class:"text-3xl font-bold"}," File ",-1),h={class:"text-xl font-medium"},l={class:"mt-5 p-3 border"};var f={__name:"FileView",async setup(t){let e,r;const{params:{ipfs:f}}=(0,s.yj)(),{data:d}=([e,r]=(0,n.mv)((()=>(0,a.h)(`files/${f}`))),e=await e,r(),e);return(t,e)=>((0,n.wg)(),(0,n.iD)("div",u,[c,(0,n._)("h2",h,(0,i.zw)((0,o.SU)(f)),1),(0,n._)("pre",l," "+(0,i.zw)((0,o.SU)(d))+" ",1)]))}};const d=f;var p=d},97379:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return m}});var n=r(73396),i=r(44870),o=r(87139),s=r(34309);const a={class:"flex flex-col"},u=(0,n._)("h1",{class:"text-3xl font-bold"}," Liked ",-1),c={class:"mt-5 table-auto"},h=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{class:"text-left text-xl font-bold"}," IPFS "),(0,n._)("th",{class:"text-left text-xl font-bold"}," IPLD ")])],-1),l={class:"py-2 font-mono"},f={class:"py-2 font-mono"},d=(0,n._)("h1",{class:"mt-5 text-3xl font-bold"}," API Response ",-1),p={class:"mt-5 p-3 border"};var y={__name:"LikesView",async setup(t){let e,r;const{authenticate:y}=(0,s.t)(),g=([e,r]=(0,n.mv)((()=>y())),e=await e,r(),e),{repos:m=[]}=([e,r]=(0,n.mv)((()=>g.get("likes"))),e=await e,r(),e);return(t,e)=>{const r=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",a,[u,(0,n._)("table",c,[h,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(m),((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{class:"border-y",key:e},[(0,n._)("td",l,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/repos/${t.ipld}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.ipfs),1)])),_:2},1032,["to"])]),(0,n._)("td",f,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/repos/${t.ipld}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.ipld),1)])),_:2},1032,["to"])])])))),128))])]),d,(0,n._)("pre",p," "+(0,o.zw)((0,i.SU)(m))+" ",1)])}}};const g=y;var m=g},78522:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return b}});var n=r(73396),i=r(44870),o=r(87139),s=r(22483),a=r(73228);const u={class:"flex flex-col"},c=(0,n._)("h1",{class:"text-3xl font-bold"}," Branches ",-1),h={class:"mt-5 table-auto"},l=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{class:"text-left text-xl font-bold"}," Branch "),(0,n._)("th",{class:"text-left text-xl font-bold"}," IPLD ")])],-1),f={class:"py-2 font-mono"},d={class:"py-2 font-mono"},p=(0,n._)("h1",{class:"mt-5 text-3xl font-bold"}," API Response ",-1),y={class:"mt-5 p-3 border"};var g={__name:"RepoView",async setup(t){let e,r;const{params:{ipld:g}}=(0,s.yj)(),{data:m}=([e,r]=(0,n.mv)((()=>(0,a.h)(`ipld/${g}`))),e=await e,r(),e);return(t,e)=>{const r=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",u,[c,(0,n._)("table",h,[l,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(m),((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{class:"border-y",key:e},[(0,n._)("td",f,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/branches/${t["/"]}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e),1)])),_:2},1032,["to"])]),(0,n._)("td",d,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/branches/${t["/"]}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t["/"]),1)])),_:2},1032,["to"])])])))),128))])]),p,(0,n._)("pre",y," "+(0,o.zw)((0,i.SU)(m))+" ",1)])}}};const m=g;var b=m},2594:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return Ls}});var n=r(73396),i=r(44870),o=r(87139),s=r(73228),a=(r(21703),r(72224)),u=r(48737);const c="providers/5.6.8",h="abstract-signer/5.6.2";var l=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const f=new u.Yd(h),d=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],p=[u.Yd.errors.INSUFFICIENT_FUNDS,u.Yd.errors.NONCE_EXPIRED,u.Yd.errors.REPLACEMENT_UNDERPRICED];class y{constructor(){f.checkAbstract(new.target,y),(0,a.zG)(this,"_isSigner",!0)}getBalance(t){return l(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return l(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return l(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield(0,a.mE)(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return l(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield(0,a.mE)(this.checkTransaction(t));return yield this.provider.call(r,e)}))}sendTransaction(t){return l(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const e=yield this.populateTransaction(t),r=yield this.signTransaction(e);return yield this.provider.sendTransaction(r)}))}getChainId(){return l(this,void 0,void 0,(function*(){this._checkProvider("getChainId");const t=yield this.provider.getNetwork();return t.chainId}))}getGasPrice(){return l(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return l(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(t){return l(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)}))}checkTransaction(t){for(const r in t)-1===d.indexOf(r)&&f.throwArgumentError("invalid transaction key: "+r,"transaction",t);const e=(0,a.DC)(t);return null==e.from?e.from=this.getAddress():e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>(e[0].toLowerCase()!==e[1].toLowerCase()&&f.throwArgumentError("from address mismatch","transaction",t),e[0]))),e}populateTransaction(t){return l(this,void 0,void 0,(function*(){const e=yield(0,a.mE)(this.checkTransaction(t));null!=e.to&&(e.to=Promise.resolve(e.to).then((t=>l(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.resolveName(t);return null==e&&f.throwArgumentError("provided ENS name resolves to null","tx.to",t),e})))),e.to.catch((t=>{})));const r=null!=e.maxFeePerGas||null!=e.maxPriorityFeePerGas;if(null==e.gasPrice||2!==e.type&&!r?0!==e.type&&1!==e.type||!r||f.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):f.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==e.type&&null!=e.type||null==e.maxFeePerGas||null==e.maxPriorityFeePerGas)if(0===e.type||1===e.type)null==e.gasPrice&&(e.gasPrice=this.getGasPrice());else{const t=yield this.getFeeData();if(null==e.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(e.type=2,null!=e.gasPrice){const t=e.gasPrice;delete e.gasPrice,e.maxFeePerGas=t,e.maxPriorityFeePerGas=t}else null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(r&&f.throwError("network does not support EIP-1559",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==e.gasPrice&&(e.gasPrice=t.gasPrice),e.type=0):f.throwError("failed to get consistent fee data",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===e.type&&(null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else e.type=2;return null==e.nonce&&(e.nonce=this.getTransactionCount("pending")),null==e.gasLimit&&(e.gasLimit=this.estimateGas(e).catch((t=>{if(p.indexOf(t.code)>=0)throw t;return f.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",u.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))),null==e.chainId?e.chainId=this.getChainId():e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>(0!==e[1]&&e[0]!==e[1]&&f.throwArgumentError("chainId address mismatch","transaction",t),e[0]))),yield(0,a.mE)(e)}))}_checkProvider(t){this.provider||f.throwError("missing provider",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!(!t||!t._isSigner)}}var g=r(83966),m=r(36482),b=(r(48675),r(3462),r(37380),r(1118),r(80594)),w=r(76502);const v="hash/5.6.1";var _=r(94469);function E(t){return(0,w.w)((0,_.Y0)(t))}var S=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const A=new u.Yd(v),I=new Uint8Array(32);I.fill(0);const T=g.O$.from(-1),R=g.O$.from(0),M=g.O$.from(1),k=g.O$.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function C(t){const e=(0,m.lE)(t),r=e.length%32;return r?(0,m.xs)([e,I.slice(r)]):(0,m.Dv)(e)}const O=(0,m.$m)(M.toHexString(),32),P=(0,m.$m)(R.toHexString(),32),B={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},x=["name","version","chainId","verifyingContract","salt"];function N(t){return function(e){return"string"!==typeof e&&A.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const D={name:N("name"),version:N("version"),chainId:function(t){try{return g.O$.from(t).toString()}catch(e){}return A.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return(0,b.Kn)(t).toLowerCase()}catch(e){}return A.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=(0,m.lE)(t);if(32!==e.length)throw new Error("bad length");return(0,m.Dv)(e)}catch(e){}return A.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function L(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=""===e[1],n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&A.throwArgumentError("invalid numeric width","type",t);const i=k.mask(r?n-1:n),o=r?i.add(M).mul(T):R;return function(e){const r=g.O$.from(e);return(r.lt(o)||r.gt(i))&&A.throwArgumentError(`value out-of-bounds for ${t}`,"value",e),(0,m.$m)(r.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(0===r||r>32||e[1]!==String(r))&&A.throwArgumentError("invalid bytes width","type",t),function(e){const n=(0,m.lE)(e);return n.length!==r&&A.throwArgumentError(`invalid length for ${t}`,"value",e),C(e)}}}switch(t){case"address":return function(t){return(0,m.$m)((0,b.Kn)(t),32)};case"bool":return function(t){return t?O:P};case"bytes":return function(t){return(0,w.w)(t)};case"string":return function(t){return E(t)}}return null}function U(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class j{constructor(t){(0,a.zG)(this,"types",Object.freeze((0,a.p$)(t))),(0,a.zG)(this,"_encoderCache",{}),(0,a.zG)(this,"_types",{});const e={},r={},n={};Object.keys(t).forEach((t=>{e[t]={},r[t]=[],n[t]={}}));for(const s in t){const n={};t[s].forEach((i=>{n[i.name]&&A.throwArgumentError(`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(s)}`,"types",t),n[i.name]=!0;const o=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===s&&A.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",t);const a=L(o);a||(r[o]||A.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",t),r[o].push(s),e[s][o]=!0)}))}const i=Object.keys(r).filter((t=>0===r[t].length));function o(i,s){s[i]&&A.throwArgumentError(`circular type reference to ${JSON.stringify(i)}`,"types",t),s[i]=!0,Object.keys(e[i]).forEach((t=>{r[t]&&(o(t,s),Object.keys(s).forEach((e=>{n[e][t]=!0})))})),delete s[i]}0===i.length?A.throwArgumentError("missing primary type","types",t):i.length>1&&A.throwArgumentError(`ambiguous primary types or unused types: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),(0,a.zG)(this,"primaryType",i[0]),o(this.primaryType,{});for(const s in n){const e=Object.keys(n[s]);e.sort(),this._types[s]=U(s,t[s])+e.map((e=>U(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e}_getEncoder(t){{const e=L(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],r=this.getEncoder(t),n=parseInt(e[3]);return e=>{n>=0&&e.length!==n&&A.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);let i=e.map(r);return this._types[t]&&(i=i.map(w.w)),(0,w.w)((0,m.xs)(i))}}const r=this.types[t];if(r){const e=E(this._types[t]);return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);return this._types[r]?(0,w.w)(n):n}));return n.unshift(e),(0,m.xs)(n)}}return A.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const e=this._types[t];return e||A.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return(0,w.w)(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){{const n=L(t);if(n)return r(t,e)}const n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const t=n[1],i=parseInt(n[3]);return i>=0&&e.length!==i&&A.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((e=>this._visit(t,e,r)))}const i=this.types[t];return i?i.reduce(((t,{name:n,type:i})=>(t[n]=this._visit(i,e[n],r),t)),{}):A.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new j(t)}static getPrimaryType(t){return j.from(t).primaryType}static hashStruct(t,e,r){return j.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){const n=B[r];n||A.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>x.indexOf(t.name)-x.indexOf(e.name))),j.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return(0,m.xs)(["0x1901",j.hashDomain(t),j.from(e).hash(r)])}static hash(t,e,r){return(0,w.w)(j.encode(t,e,r))}static resolveNames(t,e,r,n){return S(this,void 0,void 0,(function*(){t=(0,a.DC)(t);const i={};t.verifyingContract&&!(0,m.A7)(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=j.from(e);o.visit(r,((t,e)=>("address"!==t||(0,m.A7)(e,20)||(i[e]="0x"),e)));for(const t in i)i[t]=yield n(t);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=o.visit(r,((t,e)=>"address"===t&&i[e]?i[e]:e)),{domain:t,value:r}}))}static getPayload(t,e,r){j.hashDomain(t);const n={},i=[];x.forEach((e=>{const r=t[e];null!=r&&(n[e]=D[e](r),i.push({name:e,type:B[e]}))}));const o=j.from(e),s=(0,a.DC)(e);return s.EIP712Domain?A.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e):s.EIP712Domain=i,o.encode(r),{types:s,domain:n,primaryType:o.primaryType,message:o.visit(r,((t,e)=>{if(t.match(/^bytes(\d*)/))return(0,m.Dv)((0,m.lE)(e));if(t.match(/^u?int/))return g.O$.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!==typeof e&&A.throwArgumentError("invalid string","value",e),e}return A.throwArgumentError("unsupported type","type",t)}))}}}var F=r(6831);r(82801);function K(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return(0,m.lE)(e)}function $(t){t=(0,m.lE)(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}const q="web/5.6.1";var H=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};function z(t,e){return H(this,void 0,void 0,(function*(){null==e&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};!0!==e.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client");const n=yield fetch(t,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach(((t,e)=>{o[e.toLowerCase()]=t})):n.headers.keys().forEach((t=>{o[t.toLowerCase()]=n.headers.get(t)})),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:(0,m.lE)(new Uint8Array(i))}}))}var V=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const G=new u.Yd(q);function W(t){return new Promise((e=>{setTimeout(e,t)}))}function Y(t,e){if(null==t)return null;if("string"===typeof t)return t;if((0,m.Zq)(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return(0,_.ZN)(t)}catch(r){}return(0,m.Dv)(t)}return t}function J(t,e,r){const n="object"===typeof t&&null!=t.throttleLimit?t.throttleLimit:12;G.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"===typeof t?t.throttleCallback:null,o="object"===typeof t&&"number"===typeof t.throttleSlotInterval?t.throttleSlotInterval:100;G.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const s="object"===typeof t&&!!t.errorPassThrough,a={};let c=null;const h={method:"GET"};let l=!1,f=12e4;if("string"===typeof t)c=t;else if("object"===typeof t){if(null!=t&&null!=t.url||G.throwArgumentError("missing URL","connection.url",t),c=t.url,"number"===typeof t.timeout&&t.timeout>0&&(f=t.timeout),t.headers)for(const e in t.headers)a[e.toLowerCase()]={key:e,value:String(t.headers[e])},["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0&&(l=!0);if(h.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==c.substring(0,6)&&!0!==t.allowInsecureAuthentication&&G.throwError("basic authentication requires a secure https url",u.Yd.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const e=t.user+":"+t.password;a["authorization"]={key:"Authorization",value:"Basic "+$((0,_.Y0)(e))}}null!=t.skipFetchSetup&&(h.skipFetchSetup=!!t.skipFetchSetup)}const d=new RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),p=c?c.match(d):null;if(p)try{const t={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]},body:K(p[2])};let e=t.body;return r&&(e=r(t.body,t)),Promise.resolve(e)}catch(b){G.throwError("processing response error",u.Yd.errors.SERVER_ERROR,{body:Y(p[1],p[2]),error:b,requestBody:null,requestMethod:"GET",url:c})}e&&(h.method="POST",h.body=e,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const y={};Object.keys(a).forEach((t=>{const e=a[t];y[e.key]=e.value})),h.headers=y;const g=function(){let t=null;const e=new Promise((function(e,r){f&&(t=setTimeout((()=>{null!=t&&(t=null,r(G.makeError("timeout",u.Yd.errors.TIMEOUT,{requestBody:Y(h.body,y["content-type"]),requestMethod:h.method,timeout:f,url:c})))}),f))})),r=function(){null!=t&&(clearTimeout(t),t=null)};return{promise:e,cancel:r}}(),m=function(){return V(this,void 0,void 0,(function*(){for(let t=0;t<n;t++){let e=null;try{if(e=yield z(c,h),t<n)if(301===e.statusCode||302===e.statusCode){const t=e.headers.location||"";if("GET"===h.method&&t.match(/^https:/)){c=e.headers.location;continue}}else if(429===e.statusCode){let r=!0;if(i&&(r=yield i(t,c)),r){let r=0;const n=e.headers["retry-after"];r="string"===typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):o*parseInt(String(Math.random()*Math.pow(2,t))),yield W(r);continue}}}catch(b){e=b.response,null==e&&(g.cancel(),G.throwError("missing response",u.Yd.errors.SERVER_ERROR,{requestBody:Y(h.body,y["content-type"]),requestMethod:h.method,serverError:b,url:c}))}let a=e.body;if(l&&304===e.statusCode?a=null:!s&&(e.statusCode<200||e.statusCode>=300)&&(g.cancel(),G.throwError("bad response",u.Yd.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:Y(a,e.headers?e.headers["content-type"]:null),requestBody:Y(h.body,y["content-type"]),requestMethod:h.method,url:c})),r)try{const t=yield r(a,e);return g.cancel(),t}catch(b){if(b.throttleRetry&&t<n){let e=!0;if(i&&(e=yield i(t,c)),e){const e=o*parseInt(String(Math.random()*Math.pow(2,t)));yield W(e);continue}}g.cancel(),G.throwError("processing response error",u.Yd.errors.SERVER_ERROR,{body:Y(a,e.headers?e.headers["content-type"]:null),error:b,requestBody:Y(h.body,y["content-type"]),requestMethod:h.method,url:c})}return g.cancel(),a}return G.throwError("failed response",u.Yd.errors.SERVER_ERROR,{requestBody:Y(h.body,y["content-type"]),requestMethod:h.method,url:c})}))}();return Promise.race([g.promise,m])}function Z(t,e,r){let n=(t,e)=>{let n=null;if(null!=t)try{n=JSON.parse((0,_.ZN)(t))}catch(i){G.throwError("invalid JSON",u.Yd.errors.SERVER_ERROR,{body:t,error:i})}return r&&(n=r(n,e)),n},i=null;if(null!=e){i=(0,_.Y0)(e);const r="string"===typeof t?{url:t}:(0,a.DC)(t);if(r.headers){const t=0!==Object.keys(r.headers).filter((t=>"content-type"===t.toLowerCase())).length;t||(r.headers=(0,a.DC)(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};t=r}return J(t,i,n)}function X(t,e){return e||(e={}),e=(0,a.DC)(e),null==e.floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(r,n){let i=null,o=!1;const s=()=>!o&&(o=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout((()=>{s()&&n(new Error("timeout"))}),e.timeout));const a=e.retryLimit;let u=0;function c(){return t().then((function(t){if(void 0!==t)s()&&r(t);else if(e.oncePoll)e.oncePoll.once("poll",c);else if(e.onceBlock)e.onceBlock.once("block",c);else if(!o){if(u++,u>a)return void(s()&&n(new Error("retry limit reached")));let t=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));t<e.floor&&(t=e.floor),t>e.ceiling&&(t=e.ceiling),setTimeout(c,t)}return null}),(function(t){s()&&n(t)}))}c()}))}const Q="abstract-provider/5.6.1";var tt=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const et=new u.Yd(Q);class rt extends a.dk{static isForkEvent(t){return!(!t||!t._isForkEvent)}}class nt{constructor(){et.checkAbstract(new.target,nt),(0,a.zG)(this,"_isProvider",!0)}getFeeData(){return tt(this,void 0,void 0,(function*(){const{block:t,gasPrice:e}=yield(0,a.mE)({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let r=null,n=null;return t&&t.baseFeePerGas&&(n=g.O$.from("1500000000"),r=t.baseFeePerGas.mul(2).add(n)),{maxFeePerGas:r,maxPriorityFeePerGas:n,gasPrice:e}}))}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!(!t||!t._isProvider)}}class it{constructor(t){(0,a.zG)(this,"alphabet",t),(0,a.zG)(this,"base",t.length),(0,a.zG)(this,"_alphabetMap",{}),(0,a.zG)(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}encode(t){let e=(0,m.lE)(t);if(0===e.length)return"";let r=[0];for(let i=0;i<e.length;++i){let t=e[i];for(let e=0;e<r.length;++e)t+=r[e]<<8,r[e]=t%this.base,t=t/this.base|0;while(t>0)r.push(t%this.base),t=t/this.base|0}let n="";for(let i=0;0===e[i]&&i<e.length-1;++i)n+=this._leader;for(let i=r.length-1;i>=0;--i)n+=this.alphabet[r[i]];return n}decode(t){if("string"!==typeof t)throw new TypeError("Expected String");let e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(let r=0;r<t.length;r++){let n=this._alphabetMap[t[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let t=0;t<e.length;++t)i+=e[t]*this.base,e[t]=255&i,i>>=8;while(i>0)e.push(255&i),i>>=8}for(let r=0;t[r]===this._leader&&r<t.length-1;++r)e.push(0);return(0,m.lE)(new Uint8Array(e.reverse()))}}new it("abcdefghijklmnopqrstuvwxyz234567");const ot=new it("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),st="0x0000000000000000000000000000000000000000000000000000000000000000";function at(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function ut(t,e){e||(e=function(t){return[parseInt(t,16)]});let r=0,n={};return t.split(",").forEach((t=>{let i=t.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])})),n}function ct(t){let e=0;return t.split(",").map((t=>{let r=t.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=e+parseInt(r[0],16);return e=parseInt(r[1],16),{l:n,h:e}}))}function ht(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&-1!==i.e.indexOf(t-r))continue;return i}}return null}const lt=ct("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),ft="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16))),dt=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],pt=ut("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),yt=ut("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),gt=ut("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",at),mt=ct("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function bt(t){return t.reduce(((t,e)=>(e.forEach((e=>{t.push(e)})),t)),[])}function wt(t){return!!ht(t,lt)}function vt(t){let e=ht(t,dt);if(e)return[t+e.s];let r=pt[t];if(r)return r;let n=yt[t];if(n)return[t+n[0]];let i=gt[t];return i||null}function _t(t){return!!ht(t,mt)}function Et(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=(0,_.XL)(t);e=bt(e.map((t=>{if(ft.indexOf(t)>=0)return[];if(t>=65024&&t<=65039)return[];let e=vt(t);return e||[t]}))),e=(0,_.XL)((0,_.uu)(e),_.Uj.NFKC),e.forEach((t=>{if(_t(t))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),e.forEach((t=>{if(wt(t))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let r=(0,_.uu)(e);if("-"===r.substring(0,1)||"--"===r.substring(2,4)||"-"===r.substring(r.length-1))throw new Error("invalid hyphen");if(r.length>63)throw new Error("too long");return r}const St=new u.Yd(v),At=new Uint8Array(32);At.fill(0);const It=new RegExp("^((.*)\\.)?([^.]+)$");function Tt(t){"string"!==typeof t&&St.throwArgumentError("invalid ENS name; not a string","name",t);let e=t,r=At;while(e.length){const n=e.match(It);null!=n&&""!==n[2]||St.throwArgumentError("invalid ENS address; missing component","name",t);const i=(0,_.Y0)(Et(n[3]));r=(0,w.w)((0,m.zo)([r,(0,w.w)(i)])),e=n[2]||""}return(0,m.Dv)(r)}function Rt(t){return(0,m.Dv)((0,m.zo)(t.split(".").map((t=>{const e=(0,_.Y0)("_"+Et(t));return e[0]=e.length-1,e}))))+"00"}const Mt="networks/5.6.4",kt=new u.Yd(Mt);function Ct(t){return t&&"function"===typeof t.renetwork}function Ot(t){const e=function(e,r){null==r&&(r={});const n=[];if(e.InfuraProvider&&"-"!==r.infura)try{n.push(new e.InfuraProvider(t,r.infura))}catch(i){}if(e.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new e.EtherscanProvider(t,r.etherscan))}catch(i){}if(e.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new e.AlchemyProvider(t,r.alchemy))}catch(i){}if(e.PocketProvider&&"-"!==r.pocket){const o=["goerli","ropsten","rinkeby"];try{const i=new e.PocketProvider(t,r.pocket);i.network&&-1===o.indexOf(i.network.name)&&n.push(i)}catch(i){}}if(e.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new e.CloudflareProvider(t))}catch(i){}if(e.AnkrProvider&&"-"!==r.ankr)try{const i=["ropsten"],o=new e.AnkrProvider(t,r.ankr);o.network&&-1===i.indexOf(o.network.name)&&n.push(o)}catch(i){}if(0===n.length)return null;if(e.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===t&&(i=2),new e.FallbackProvider(n,i)}return n[0]};return e.renetwork=function(t){return Ot(t)},e}function Pt(t,e){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(t,e):null};return r.renetwork=function(e){return Pt(t,e)},r}const Bt={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Ot("homestead")},xt={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Ot("ropsten")},Nt={chainId:63,name:"classicMordor",_defaultProvider:Pt("https://www.ethercluster.com/mordor","classicMordor")},Dt={unspecified:{chainId:0,name:"unspecified"},homestead:Bt,mainnet:Bt,morden:{chainId:2,name:"morden"},ropsten:xt,testnet:xt,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Ot("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Ot("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Ot("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},classic:{chainId:61,name:"classic",_defaultProvider:Pt("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Nt,classicTestnet:Nt,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Pt("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Ot("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Ot("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Lt(t){if(null==t)return null;if("number"===typeof t){for(const e in Dt){const r=Dt[e];if(r.chainId===t)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"===typeof t){const e=Dt[t];return null==e?null:{name:e.name,chainId:e.chainId,ensAddress:e.ensAddress,_defaultProvider:e._defaultProvider||null}}const e=Dt[t.name];if(!e)return"number"!==typeof t.chainId&&kt.throwArgumentError("invalid network chainId","network",t),t;0!==t.chainId&&t.chainId!==e.chainId&&kt.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return null==r&&e._defaultProvider&&(r=Ct(e._defaultProvider)?e._defaultProvider.renetwork(t):e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}var Ut=r(78730),jt=r.n(Ut);const Ft="sha2/5.6.1";new u.Yd(Ft);function Kt(t){return"0x"+jt().sha256().update((0,m.lE)(t)).digest("hex")}var $t=r(51742),qt=r.n($t);const Ht="0x0000000000000000000000000000000000000000";r(15941);const zt=new u.Yd(c);class Vt{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={},e=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),o=this.hash.bind(this),s=this.hex.bind(this),u=this.number.bind(this),c=this.type.bind(this),h=t=>this.data(t,!0);return t.transaction={hash:o,type:c,accessList:Vt.allowNull(this.accessList.bind(this),null),blockHash:Vt.allowNull(o,null),blockNumber:Vt.allowNull(u,null),transactionIndex:Vt.allowNull(u,null),confirmations:Vt.allowNull(u,null),from:e,gasPrice:Vt.allowNull(r),maxPriorityFeePerGas:Vt.allowNull(r),maxFeePerGas:Vt.allowNull(r),gasLimit:r,to:Vt.allowNull(e,null),value:r,nonce:u,data:i,r:Vt.allowNull(this.uint256),s:Vt.allowNull(this.uint256),v:Vt.allowNull(u),creates:Vt.allowNull(e,null),raw:Vt.allowNull(i)},t.transactionRequest={from:Vt.allowNull(e),nonce:Vt.allowNull(u),gasLimit:Vt.allowNull(r),gasPrice:Vt.allowNull(r),maxPriorityFeePerGas:Vt.allowNull(r),maxFeePerGas:Vt.allowNull(r),to:Vt.allowNull(e),value:Vt.allowNull(r),data:Vt.allowNull(h),type:Vt.allowNull(u),accessList:Vt.allowNull(this.accessList.bind(this),null)},t.receiptLog={transactionIndex:u,blockNumber:u,transactionHash:o,address:e,topics:Vt.arrayOf(o),data:i,logIndex:u,blockHash:o},t.receipt={to:Vt.allowNull(this.address,null),from:Vt.allowNull(this.address,null),contractAddress:Vt.allowNull(e,null),transactionIndex:u,root:Vt.allowNull(s),gasUsed:r,logsBloom:Vt.allowNull(i),blockHash:o,transactionHash:o,logs:Vt.arrayOf(this.receiptLog.bind(this)),blockNumber:u,confirmations:Vt.allowNull(u,null),cumulativeGasUsed:r,effectiveGasPrice:Vt.allowNull(r),status:Vt.allowNull(u),type:c},t.block={hash:Vt.allowNull(o),parentHash:o,number:u,timestamp:u,nonce:Vt.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Vt.allowNull(e),extraData:i,transactions:Vt.allowNull(Vt.arrayOf(o)),baseFeePerGas:Vt.allowNull(r)},t.blockWithTransactions=(0,a.DC)(t.block),t.blockWithTransactions.transactions=Vt.allowNull(Vt.arrayOf(this.transactionResponse.bind(this))),t.filter={fromBlock:Vt.allowNull(n,void 0),toBlock:Vt.allowNull(n,void 0),blockHash:Vt.allowNull(o,void 0),address:Vt.allowNull(e,void 0),topics:Vt.allowNull(this.topics.bind(this),void 0)},t.filterLog={blockNumber:Vt.allowNull(u),blockHash:Vt.allowNull(o),transactionIndex:u,removed:Vt.allowNull(this.boolean.bind(this)),address:e,data:Vt.allowFalsish(i,"0x"),topics:Vt.arrayOf(o),transactionHash:o,logIndex:u},t}accessList(t){return(0,F.z7)(t||[])}number(t){return"0x"===t?0:g.O$.from(t).toNumber()}type(t){return"0x"===t||null==t?0:g.O$.from(t).toNumber()}bigNumber(t){return g.O$.from(t)}boolean(t){if("boolean"===typeof t)return t;if("string"===typeof t){if(t=t.toLowerCase(),"true"===t)return!0;if("false"===t)return!1}throw new Error("invalid boolean - "+t)}hex(t,e){return"string"===typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),(0,m.A7)(t))?t.toLowerCase():zt.throwArgumentError("invalid hash","value",t)}data(t,e){const r=this.hex(t,e);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+t);return r}address(t){return(0,b.Kn)(t)}callAddress(t){if(!(0,m.A7)(t,32))return null;const e=(0,b.Kn)((0,m.p3)(t,12));return e===Ht?null:e}contractAddress(t){return(0,b.CR)(t)}blockTag(t){if(null==t)return"latest";if("earliest"===t)return"0x0";if("latest"===t||"pending"===t)return t;if("number"===typeof t||(0,m.A7)(t))return(0,m.$P)(t);throw new Error("invalid blockTag")}hash(t,e){const r=this.hex(t,e);return 32!==(0,m.E1)(r)?zt.throwArgumentError("invalid hash","value",t):r}difficulty(t){if(null==t)return null;const e=g.O$.from(t);try{return e.toNumber()}catch(r){}return null}uint256(t){if(!(0,m.A7)(t))throw new Error("invalid uint256");return(0,m.$m)(t,32)}_block(t,e){null!=t.author&&null==t.miner&&(t.miner=t.author);const r=null!=t._difficulty?t._difficulty:t.difficulty,n=Vt.check(e,t);return n._difficulty=null==r?null:g.O$.from(r),n}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return Vt.check(this.formats.transactionRequest,t)}transactionResponse(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&g.O$.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);const e=Vt.check(this.formats.transaction,t);if(null!=t.chainId){let r=t.chainId;(0,m.A7)(r)&&(r=g.O$.from(r).toNumber()),e.chainId=r}else{let r=t.networkId;null==r&&null==e.v&&(r=t.chainId),(0,m.A7)(r)&&(r=g.O$.from(r).toNumber()),"number"!==typeof r&&null!=e.v&&(r=(e.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!==typeof r&&(r=0),e.chainId=r}return e.blockHash&&"x"===e.blockHash.replace(/0/g,"")&&(e.blockHash=null),e}transaction(t){return(0,F.Qc)(t)}receiptLog(t){return Vt.check(this.formats.receiptLog,t)}receipt(t){const e=Vt.check(this.formats.receipt,t);if(null!=e.root)if(e.root.length<=4){const t=g.O$.from(e.root).toNumber();0===t||1===t?(null!=e.status&&e.status!==t&&zt.throwArgumentError("alt-root-status/status mismatch","value",{root:e.root,status:e.status}),e.status=t,delete e.root):zt.throwArgumentError("invalid alt-root-status","value.root",e.root)}else 66!==e.root.length&&zt.throwArgumentError("invalid root hash","value.root",e.root);return null!=e.status&&(e.byzantium=!0),e}topics(t){return Array.isArray(t)?t.map((t=>this.topics(t))):null!=t?this.hash(t,!0):null}filter(t){return Vt.check(this.formats.filter,t)}filterLog(t){return Vt.check(this.formats.filterLog,t)}static check(t,e){const r={};for(const i in t)try{const n=t[i](e[i]);void 0!==n&&(r[i]=n)}catch(n){throw n.checkKey=i,n.checkValue=e[i],n}return r}static allowNull(t,e){return function(r){return null==r?e:t(r)}}static allowFalsish(t,e){return function(r){return r?t(r):e}}static arrayOf(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");const r=[];return e.forEach((function(e){r.push(t(e))})),r}}}var Gt=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const Wt=new u.Yd(c),Yt=10;function Jt(t){return null==t?"null":(32!==(0,m.E1)(t)&&Wt.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function Zt(t){t=t.slice();while(t.length>0&&null==t[t.length-1])t.pop();return t.map((t=>{if(Array.isArray(t)){const e={};t.forEach((t=>{e[Jt(t)]=!0}));const r=Object.keys(e);return r.sort(),r.join("|")}return Jt(t)})).join("&")}function Xt(t){return""===t?[]:t.split(/&/g).map((t=>{if(""===t)return[];const e=t.split("|").map((t=>"null"===t?null:t));return 1===e.length?e[0]:e}))}function Qt(t){if("string"===typeof t){if(t=t.toLowerCase(),32===(0,m.E1)(t))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter:*:"+Zt(t);if(rt.isForkEvent(t))throw Wt.warn("not implemented"),new Error("not implemented");if(t&&"object"===typeof t)return"filter:"+(t.address||"*")+":"+Zt(t.topics||[])}throw new Error("invalid event - "+t)}function te(){return(new Date).getTime()}function ee(t){return new Promise((e=>{setTimeout(e,t)}))}const re=["block","network","pending","poll"];class ne{constructor(t,e,r){(0,a.zG)(this,"tag",t),(0,a.zG)(this,"listener",e),(0,a.zG)(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");return"tx"!==t[0]?null:t[1]}get filter(){const t=this.tag.split(":");if("filter"!==t[0])return null;const e=t[1],r=Xt(t[2]),n={};return r.length>0&&(n.topics=r),e&&"*"!==e&&(n.address=e),n}pollable(){return this.tag.indexOf(":")>=0||re.indexOf(this.tag)>=0}}const ie={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function oe(t){return(0,m.$m)(g.O$.from(t).toHexString(),32)}function se(t){return ot.encode((0,m.zo)([t,(0,m.p3)(Kt(Kt(t)),0,4)]))}const ae=new RegExp("^(ipfs)://(.*)$","i"),ue=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ae,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function ce(t,e){try{return(0,_.ZN)(he(t,e))}catch(r){}return null}function he(t,e){if("0x"===t)return null;const r=g.O$.from((0,m.p3)(t,e,e+32)).toNumber(),n=g.O$.from((0,m.p3)(t,r,r+32)).toNumber();return(0,m.p3)(t,r+32,r+32+n)}function le(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Wt.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function fe(t){const e=(0,m.lE)(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function de(t){if(t.length%32===0)return t;const e=new Uint8Array(32*Math.ceil(t.length/32));return e.set(t),e}function pe(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=(0,m.lE)(t[n]);e[n]=fe(r),e.push(fe(i.length)),e.push(de(i)),r+=32+32*Math.ceil(i.length/32)}return(0,m.xs)(e)}class ye{constructor(t,e,r,n){(0,a.zG)(this,"provider",t),(0,a.zG)(this,"name",r),(0,a.zG)(this,"address",t.formatter.address(e)),(0,a.zG)(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((t=>g.O$.from(t).eq(1))).catch((t=>{if(t.code===u.Yd.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,t}))),this._supportsEip2544}_fetch(t,e){return Gt(this,void 0,void 0,(function*(){const r={to:this.address,ccipReadEnabled:!0,data:(0,m.xs)([t,Tt(this.name),e||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=(0,m.xs)(["0x9061b923",pe([Rt(this.name),r.data])]));try{let t=yield this.provider.call(r);return(0,m.lE)(t).length%32===4&&Wt.throwError("resolver threw error",u.Yd.errors.CALL_EXCEPTION,{transaction:r,data:t}),n&&(t=he(t,0)),t}catch(i){if(i.code===u.Yd.errors.CALL_EXCEPTION)return null;throw i}}))}_fetchBytes(t,e){return Gt(this,void 0,void 0,(function*(){const r=yield this._fetch(t,e);return null!=r?he(r,0):null}))}_getAddress(t,e){const r=ie[String(t)];if(null==r&&Wt.throwError(`unsupported coin type: ${t}`,u.Yd.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`}),"eth"===r.ilk)return this.provider.formatter.address(e);const n=(0,m.lE)(e);if(null!=r.p2pkh){const t=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return se((0,m.zo)([[r.p2pkh],"0x"+t[2]]))}}if(null!=r.p2sh){const t=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return se((0,m.zo)([[r.p2sh],"0x"+t[2]]))}}if(null!=r.prefix){const t=n[1];let e=n[0];if(0===e?20!==t&&32!==t&&(e=-1):e=-1,e>=0&&n.length===2+t&&t>=1&&t<=75){const t=qt().toWords(n.slice(2));return t.unshift(e),qt().encode(r.prefix,t)}}return null}getAddress(t){return Gt(this,void 0,void 0,(function*(){if(null==t&&(t=60),60===t)try{const t=yield this._fetch("0x3b3b57de");return"0x"===t||t===st?null:this.provider.formatter.callAddress(t)}catch(n){if(n.code===u.Yd.errors.CALL_EXCEPTION)return null;throw n}const e=yield this._fetchBytes("0xf1cb7e06",oe(t));if(null==e||"0x"===e)return null;const r=this._getAddress(t,e);return null==r&&Wt.throwError("invalid or unsupported coin data",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:e}),r}))}getAvatar(){return Gt(this,void 0,void 0,(function*(){const t=[{type:"name",content:this.name}];try{const e=yield this.getText("avatar");if(null==e)return null;for(let r=0;r<ue.length;r++){const n=e.match(ue[r]);if(null==n)continue;const i=n[1].toLowerCase();switch(i){case"https":return t.push({type:"url",content:e}),{linkage:t,url:e};case"data":return t.push({type:"data",content:e}),{linkage:t,url:e};case"ipfs":return t.push({type:"ipfs",content:e}),{linkage:t,url:le(e)};case"erc721":case"erc1155":{const r="erc721"===i?"0xc87b56dd":"0x0e89341c";t.push({type:i,content:e});const o=this._resolvedAddress||(yield this.getAddress()),s=(n[2]||"").split("/");if(2!==s.length)return null;const a=yield this.provider.formatter.address(s[0]),u=(0,m.$m)(g.O$.from(s[1]).toHexString(),32);if("erc721"===i){const e=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:(0,m.xs)(["0x6352211e",u])}));if(o!==e)return null;t.push({type:"owner",content:e})}else if("erc1155"===i){const e=g.O$.from(yield this.provider.call({to:a,data:(0,m.xs)(["0x00fdd58e",(0,m.$m)(o,32),u])}));if(e.isZero())return null;t.push({type:"balance",content:e.toString()})}const c={to:this.provider.formatter.address(s[0]),data:(0,m.xs)([r,u])};let h=ce(yield this.provider.call(c),0);if(null==h)return null;t.push({type:"metadata-url-base",content:h}),"erc1155"===i&&(h=h.replace("{id}",u.substring(2)),t.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=le(h)),t.push({type:"metadata-url",content:h});const l=yield Z(h);if(!l)return null;t.push({type:"metadata",content:JSON.stringify(l)});let f=l.image;if("string"!==typeof f)return null;if(f.match(/^(https:\/\/|data:)/i));else{const e=f.match(ae);if(null==e)return null;t.push({type:"url-ipfs",content:f}),f=le(f)}return t.push({type:"url",content:f}),{linkage:t,url:f}}}}}catch(e){}return null}))}getContentHash(){return Gt(this,void 0,void 0,(function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(null==t||"0x"===t)return null;const e=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t=parseInt(e[3],16);if(e[4].length===2*t)return"ipfs://"+ot.encode("0x"+e[1])}const r=t.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const t=parseInt(r[3],16);if(r[4].length===2*t)return"ipns://"+ot.encode("0x"+r[1])}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const i=t.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&68===i[1].length){const t={"=":"","+":"-","/":"_"},e=$("0x"+i[1]).replace(/[=+\/]/g,(e=>t[e]));return"sia://"+e}return Wt.throwError("invalid or unsupported content hash data",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})}))}getText(t){return Gt(this,void 0,void 0,(function*(){let e=(0,_.Y0)(t);e=(0,m.zo)([oe(64),oe(e.length),e]),e.length%32!==0&&(e=(0,m.zo)([e,(0,m.$m)("0x",32-t.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",(0,m.Dv)(e));return null==r||"0x"===r?null:(0,_.ZN)(r)}))}}let ge=null,me=1;class be extends nt{constructor(t){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),(0,a.zG)(this,"anyNetwork","any"===t),this.anyNetwork&&(t=this.detectNetwork()),t instanceof Promise)this._networkPromise=t,t.catch((t=>{})),this._ready().catch((t=>{}));else{const e=(0,a.tu)(new.target,"getNetwork")(t);e?((0,a.zG)(this,"_network",e),this.emit("network",e,null)):Wt.throwArgumentError("invalid network","network",t)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Gt(this,void 0,void 0,(function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(t){}null==e&&(e=yield this.detectNetwork()),e||Wt.throwError("no network detected",u.Yd.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:(0,a.zG)(this,"_network",e),this.emit("network",e,null))}return this._network}))}get ready(){return X((()=>this._ready().then((t=>t),(t=>{if(t.code!==u.Yd.errors.NETWORK_ERROR||"noNetwork"!==t.event)throw t}))))}static getFormatter(){return null==ge&&(ge=new Vt),ge}static getNetwork(t){return Lt(null==t?"homestead":t)}ccipReadFetch(t,e,r){return Gt(this,void 0,void 0,(function*(){if(this.disableCcipRead||0===r.length)return null;const n=t.to.toLowerCase(),i=e.toLowerCase(),o=[];for(let t=0;t<r.length;t++){const e=r[t],s=e.replace("{sender}",n).replace("{data}",i),a=e.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n}),c=yield Z({url:s,errorPassThrough:!0},a,((t,e)=>(t.status=e.statusCode,t)));if(c.data)return c.data;const h=c.message||"unknown error";if(c.status>=400&&c.status<500)return Wt.throwError(`response not found during CCIP fetch: ${h}`,u.Yd.errors.SERVER_ERROR,{url:e,errorMessage:h});o.push(h)}return Wt.throwError(`error encountered during CCIP fetch: ${o.map((t=>JSON.stringify(t))).join(", ")}`,u.Yd.errors.SERVER_ERROR,{urls:r,errorMessages:o})}))}_getInternalBlockNumber(t){return Gt(this,void 0,void 0,(function*(){if(yield this._ready(),t>0)while(this._internalBlockNumber){const e=this._internalBlockNumber;try{const r=yield e;if(te()-r.respTime<=t)return r.blockNumber;break}catch(n){if(this._internalBlockNumber===e)break}}const e=te(),r=(0,a.mE)({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((t=>null),(t=>t))}).then((({blockNumber:t,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=te();return t=g.O$.from(t).toNumber(),t<this._maxInternalBlockNumber&&(t=this._maxInternalBlockNumber),this._maxInternalBlockNumber=t,this._setFastBlockNumber(t),{blockNumber:t,reqTime:e,respTime:i}}));return this._internalBlockNumber=r,r.catch((t=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return Gt(this,void 0,void 0,(function*(){const t=me++,e=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(n){return void this.emit("error",n)}if(this._setFastBlockNumber(r),this.emit("poll",t,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Wt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Wt.makeError("network block skew detected",u.Yd.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let t=this._emitted.block+1;t<=r;t++)this.emit("block",t);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((t=>{if("block"===t)return;const e=this._emitted[t];"pending"!==e&&r-e>12&&delete this._emitted[t]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((t=>{switch(t.type){case"tx":{const r=t.hash;let n=this.getTransactionReceipt(r).then((t=>t&&null!=t.blockNumber?(this._emitted["t:"+r]=t.blockNumber,this.emit(r,t),null):null)).catch((t=>{this.emit("error",t)}));e.push(n);break}case"filter":if(!t._inflight){t._inflight=!0;const n=t.filter;n.fromBlock=t._lastBlockNumber+1,n.toBlock=r,n.toBlock-this._maxFilterBlockRange>n.fromBlock&&(n.fromBlock=n.toBlock-this._maxFilterBlockRange);const i=this.getLogs(n).then((e=>{t._inflight=!1,0!==e.length&&e.forEach((e=>{e.blockNumber>t._lastBlockNumber&&(t._lastBlockNumber=e.blockNumber),this._emitted["b:"+e.blockHash]=e.blockNumber,this._emitted["t:"+e.transactionHash]=e.blockNumber,this.emit(n,e)}))})).catch((e=>{this.emit("error",e),t._inflight=!1}));e.push(i)}break}})),this._lastBlockNumber=r,Promise.all(e).then((()=>{this.emit("didPoll",t)})).catch((t=>{this.emit("error",t)}))}else this.emit("didPoll",t)}))}resetEventsBlock(t){this._lastBlockNumber=t-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Gt(this,void 0,void 0,(function*(){return Wt.throwError("provider does not support network detection",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return Gt(this,void 0,void 0,(function*(){const t=yield this._ready(),e=yield this.detectNetwork();if(t.chainId!==e.chainId){if(this.anyNetwork)return this._network=e,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",e,t),yield ee(0),this._network;const r=Wt.makeError("underlying network changed",u.Yd.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:e});throw this.emit("error",r),r}return t}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((t=>{this._setFastBlockNumber(t)}),(t=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(t){t&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if("number"!==typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const t=te();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((t=>((null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=te(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))}waitForTransaction(t,e,r){return Gt(this,void 0,void 0,(function*(){return this._waitForTransaction(t,null==e?1:e,r||0,null)}))}_waitForTransaction(t,e,r,n){return Gt(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(t);return(i?i.confirmations:0)>=e?i:new Promise(((i,o)=>{const s=[];let a=!1;const c=function(){return!!a||(a=!0,s.forEach((t=>{t()})),!1)},h=t=>{t.confirmations<e||c()||i(t)};if(this.on(t,h),s.push((()=>{this.removeListener(t,h)})),n){let r=n.startBlock,i=null;const h=s=>Gt(this,void 0,void 0,(function*(){a||(yield ee(1e3),this.getTransactionCount(n.from).then((l=>Gt(this,void 0,void 0,(function*(){if(!a){if(l<=n.nonce)r=s;else{{const e=yield this.getTransaction(t);if(e&&null!=e.blockNumber)return}null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));while(i<=s){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const s=r.transactions[i];if(s.hash===t)return;if(s.from===n.from&&s.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(s.hash,e);if(c())return;let i="replaced";return s.data===n.data&&s.to===n.to&&s.value.eq(n.value)?i="repriced":"0x"===s.data&&s.from===s.to&&s.value.isZero()&&(i="cancelled"),void o(Wt.makeError("transaction was replaced",u.Yd.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(s),hash:t,receipt:r}))}}i++}}a||this.once("block",h)}}))),(t=>{a||this.once("block",h)})))}));if(a)return;this.once("block",h),s.push((()=>{this.removeListener("block",h)}))}if("number"===typeof r&&r>0){const t=setTimeout((()=>{c()||o(Wt.makeError("timeout exceeded",u.Yd.errors.TIMEOUT,{timeout:r}))}),r);t.unref&&t.unref(),s.push((()=>{clearTimeout(t)}))}}))}))}getBlockNumber(){return Gt(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return g.O$.from(t)}catch(e){return Wt.throwError("bad result from backend",u.Yd.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e})}}))}getBalance(t,e){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield(0,a.mE)({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getBalance",r);try{return g.O$.from(n)}catch(i){return Wt.throwError("bad result from backend",u.Yd.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:i})}}))}getTransactionCount(t,e){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield(0,a.mE)({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getTransactionCount",r);try{return g.O$.from(n).toNumber()}catch(i){return Wt.throwError("bad result from backend",u.Yd.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:i})}}))}getCode(t,e){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield(0,a.mE)({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getCode",r);try{return(0,m.Dv)(n)}catch(i){return Wt.throwError("bad result from backend",u.Yd.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:i})}}))}getStorageAt(t,e,r){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield(0,a.mE)({address:this._getAddress(t),blockTag:this._getBlockTag(r),position:Promise.resolve(e).then((t=>(0,m.$P)(t)))}),i=yield this.perform("getStorageAt",n);try{return(0,m.Dv)(i)}catch(o){return Wt.throwError("bad result from backend",u.Yd.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:o})}}))}_wrapTransaction(t,e,r){if(null!=e&&32!==(0,m.E1)(e))throw new Error("invalid response - sendTransaction");const n=t;return null!=e&&t.hash!==e&&Wt.throwError("Transaction hash mismatch from Provider.sendTransaction.",u.Yd.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),n.wait=(e,n)=>Gt(this,void 0,void 0,(function*(){let i;null==e&&(e=1),null==n&&(n=0),0!==e&&null!=r&&(i={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:r});const o=yield this._waitForTransaction(t.hash,e,n,i);return null==o&&0===e?null:(this._emitted["t:"+t.hash]=o.blockNumber,0===o.status&&Wt.throwError("transaction failed",u.Yd.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:o}),o)})),n}sendTransaction(t){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Promise.resolve(t).then((t=>(0,m.Dv)(t))),r=this.formatter.transaction(t);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const t=yield this.perform("sendTransaction",{signedTransaction:e});return this._wrapTransaction(r,t,n)}catch(i){throw i.transaction=r,i.transactionHash=r.hash,i}}))}_getTransactionRequest(t){return Gt(this,void 0,void 0,(function*(){const e=yield t,r={};return["from","to"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?this._getAddress(t):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?g.O$.from(t):null)))})),["type"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>null!=t?t:null)))})),e.accessList&&(r.accessList=this.formatter.accessList(e.accessList)),["data"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?(0,m.Dv)(t):null)))})),this.formatter.transactionRequest(yield(0,a.mE)(r))}))}_getFilter(t){return Gt(this,void 0,void 0,(function*(){t=yield t;const e={};return null!=t.address&&(e.address=this._getAddress(t.address)),["blockHash","topics"].forEach((r=>{null!=t[r]&&(e[r]=t[r])})),["fromBlock","toBlock"].forEach((r=>{null!=t[r]&&(e[r]=this._getBlockTag(t[r]))})),this.formatter.filter(yield(0,a.mE)(e))}))}_call(t,e,r){return Gt(this,void 0,void 0,(function*(){r>=Yt&&Wt.throwError("CCIP read exceeded maximum redirections",u.Yd.errors.SERVER_ERROR,{redirects:r,transaction:t});const n=t.to,i=yield this.perform("call",{transaction:t,blockTag:e});if(r>=0&&"latest"===e&&null!=n&&"0x556f1830"===i.substring(0,10)&&(0,m.E1)(i)%32===4)try{const o=(0,m.p3)(i,4),s=(0,m.p3)(o,0,32);g.O$.from(s).eq(n)||Wt.throwError("CCIP Read sender did not match",u.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:i});const a=[],c=g.O$.from((0,m.p3)(o,32,64)).toNumber(),h=g.O$.from((0,m.p3)(o,c,c+32)).toNumber(),l=(0,m.p3)(o,c+32);for(let e=0;e<h;e++){const r=ce(l,32*e);null==r&&Wt.throwError("CCIP Read contained corrupt URL string",u.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:i}),a.push(r)}const f=he(o,64);g.O$.from((0,m.p3)(o,100,128)).isZero()||Wt.throwError("CCIP Read callback selector included junk",u.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:i});const d=(0,m.p3)(o,96,100),p=he(o,128),y=yield this.ccipReadFetch(t,f,a);null==y&&Wt.throwError("CCIP Read disabled or provided no URLs",u.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:i});const b={to:n,data:(0,m.xs)([d,pe([y,p])])};return this._call(b,e,r+1)}catch(o){if(o.code===u.Yd.errors.SERVER_ERROR)throw o}try{return(0,m.Dv)(i)}catch(o){return Wt.throwError("bad result from backend",u.Yd.errors.SERVER_ERROR,{method:"call",params:{transaction:t,blockTag:e},result:i,error:o})}}))}call(t,e){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield(0,a.mE)({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e),ccipReadEnabled:Promise.resolve(t.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)}))}estimateGas(t){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield(0,a.mE)({transaction:this._getTransactionRequest(t)}),r=yield this.perform("estimateGas",e);try{return g.O$.from(r)}catch(n){return Wt.throwError("bad result from backend",u.Yd.errors.SERVER_ERROR,{method:"estimateGas",params:e,result:r,error:n})}}))}_getAddress(t){return Gt(this,void 0,void 0,(function*(){t=yield t,"string"!==typeof t&&Wt.throwArgumentError("invalid address or ENS name","name",t);const e=yield this.resolveName(t);return null==e&&Wt.throwError("ENS name not configured",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`}),e}))}_getBlock(t,e){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;let r=-128;const n={includeTransactions:!!e};if((0,m.A7)(t,32))n.blockHash=t;else try{n.blockTag=yield this._getBlockTag(t),(0,m.A7)(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(i){Wt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}return X((()=>Gt(this,void 0,void 0,(function*(){const t=yield this.perform("getBlock",n);if(null==t)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(e){let e=null;for(let n=0;n<t.transactions.length;n++){const r=t.transactions[n];if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations){null==e&&(e=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let t=e-r.blockNumber+1;t<=0&&(t=1),r.confirmations=t}}const r=this.formatter.blockWithTransactions(t);return r.transactions=r.transactions.map((t=>this._wrapTransaction(t))),r}return this.formatter.block(t)}))),{oncePoll:this})}))}getBlock(t){return this._getBlock(t,!1)}getBlockWithTransactions(t){return this._getBlock(t,!0)}getTransaction(t){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return X((()=>Gt(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){const t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(t){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return X((()=>Gt(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){const t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}))),{oncePoll:this})}))}getLogs(t){return Gt(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield(0,a.mE)({filter:this._getFilter(t)}),r=yield this.perform("getLogs",e);return r.forEach((t=>{null==t.removed&&(t.removed=!1)})),Vt.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return Gt(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(t){return Gt(this,void 0,void 0,(function*(){if(t=yield t,"number"===typeof t&&t<0){t%1&&Wt.throwArgumentError("invalid BlockTag","blockTag",t);let e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return e+=t,e<0&&(e=0),this.formatter.blockTag(e)}return this.formatter.blockTag(t)}))}getResolver(t){return Gt(this,void 0,void 0,(function*(){let e=t;while(1){if(""===e||"."===e)return null;if("eth"!==t&&"eth"===e)return null;const r=yield this._getResolver(e,"getResolver");if(null!=r){const n=new ye(this,r,t);return e===t||(yield n.supportsWildcard())?n:null}e=e.split(".").slice(1).join(".")}}))}_getResolver(t,e){return Gt(this,void 0,void 0,(function*(){null==e&&(e="ENS");const r=yield this.getNetwork();r.ensAddress||Wt.throwError("network does not support ENS",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:e,network:r.name});try{const e=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Tt(t).substring(2)});return this.formatter.callAddress(e)}catch(n){}return null}))}resolveName(t){return Gt(this,void 0,void 0,(function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(r){if((0,m.A7)(t))throw r}"string"!==typeof t&&Wt.throwArgumentError("invalid ENS name","name",t);const e=yield this.getResolver(t);return e?yield e.getAddress():null}))}lookupAddress(t){return Gt(this,void 0,void 0,(function*(){t=yield t,t=this.formatter.address(t);const e=t.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(e,"lookupAddress");if(null==r)return null;const n=ce(yield this.call({to:r,data:"0x691f3431"+Tt(e).substring(2)}),0),i=yield this.resolveName(n);return i!=t?null:n}))}getAvatar(t){return Gt(this,void 0,void 0,(function*(){let e=null;if((0,m.A7)(t)){const r=this.formatter.address(t),i=r.substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(i,"getAvatar");if(!o)return null;e=new ye(this,o,i);try{const t=yield e.getAvatar();if(t)return t.url}catch(n){if(n.code!==u.Yd.errors.CALL_EXCEPTION)throw n}try{const t=ce(yield this.call({to:o,data:"0x691f3431"+Tt(i).substring(2)}),0);e=yield this.getResolver(t)}catch(n){if(n.code!==u.Yd.errors.CALL_EXCEPTION)throw n;return null}}else if(e=yield this.getResolver(t),!e)return null;const r=yield e.getAvatar();return null==r?null:r.url}))}perform(t,e){return Wt.throwError(t+" not implemented",u.Yd.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_stopEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_addEventListener(t,e,r){const n=new ne(Qt(t),e,r);return this._events.push(n),this._startEvent(n),this}on(t,e){return this._addEventListener(t,e,!1)}once(t,e){return this._addEventListener(t,e,!0)}emit(t,...e){let r=!1,n=[],i=Qt(t);return this._events=this._events.filter((t=>t.tag!==i||(setTimeout((()=>{t.listener.apply(this,e)}),0),r=!0,!t.once||(n.push(t),!1)))),n.forEach((t=>{this._stopEvent(t)})),r}listenerCount(t){if(!t)return this._events.length;let e=Qt(t);return this._events.filter((t=>t.tag===e)).length}listeners(t){if(null==t)return this._events.map((t=>t.listener));let e=Qt(t);return this._events.filter((t=>t.tag===e)).map((t=>t.listener))}off(t,e){if(null==e)return this.removeAllListeners(t);const r=[];let n=!1,i=Qt(t);return this._events=this._events.filter((t=>t.tag!==i||t.listener!=e||(!!n||(n=!0,r.push(t),!1)))),r.forEach((t=>{this._stopEvent(t)})),this}removeAllListeners(t){let e=[];if(null==t)e=this._events,this._events=[];else{const r=Qt(t);this._events=this._events.filter((t=>t.tag!==r||(e.push(t),!1)))}return e.forEach((t=>{this._stopEvent(t)})),this}}var we=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const ve=new u.Yd(c),_e=["call","estimateGas"];function Ee(t,e){if(null==t)return null;if("string"===typeof t.message&&t.message.match("reverted")){const r=(0,m.A7)(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if("object"===typeof t){for(const r in t){const n=Ee(t[r],e);if(n)return n}return null}if("string"===typeof t)try{return Ee(JSON.parse(t),e)}catch(r){}return null}function Se(t,e,r){const n=r.transaction||r.signedTransaction;if("call"===t){const t=Ee(e,!0);if(t)return t.data;ve.throwError("missing revert data in call exception; Transaction reverted without a reason string",u.Yd.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if("estimateGas"===t){let r=Ee(e.body,!1);null==r&&(r=Ee(e,!1)),r&&ve.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",u.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===u.Yd.errors.SERVER_ERROR&&e.error&&"string"===typeof e.error.message?i=e.error.message:"string"===typeof e.body?i=e.body:"string"===typeof e.responseText&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit/i)&&ve.throwError("insufficient funds for intrinsic transaction cost",u.Yd.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&ve.throwError("nonce has already been used",u.Yd.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&ve.throwError("replacement fee too low",u.Yd.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&ve.throwError("legacy pre-eip-155 transactions not supported",u.Yd.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),_e.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&ve.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",u.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function Ae(t){return new Promise((function(e){setTimeout(e,t)}))}function Ie(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Te(t){return t?t.toLowerCase():t}const Re={};class Me extends y{constructor(t,e,r){if(super(),t!==Re)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");(0,a.zG)(this,"provider",e),null==r&&(r=0),"string"===typeof r?((0,a.zG)(this,"_address",this.provider.formatter.address(r)),(0,a.zG)(this,"_index",null)):"number"===typeof r?((0,a.zG)(this,"_index",r),(0,a.zG)(this,"_address",null)):ve.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(t){return ve.throwError("cannot alter JSON-RPC Signer connection",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new ke(Re,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((t=>(t.length<=this._index&&ve.throwError("unknown account #"+this._index,u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(t[this._index]))))}sendUncheckedTransaction(t){t=(0,a.DC)(t);const e=this.getAddress().then((t=>(t&&(t=t.toLowerCase()),t)));if(null==t.gasLimit){const r=(0,a.DC)(t);r.from=e,t.gasLimit=this.provider.estimateGas(r)}return null!=t.to&&(t.to=Promise.resolve(t.to).then((t=>we(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.provider.resolveName(t);return null==e&&ve.throwArgumentError("provided ENS name resolves to null","tx.to",t),e}))))),(0,a.mE)({tx:(0,a.mE)(t),sender:e}).then((({tx:e,sender:r})=>{null!=e.from?e.from.toLowerCase()!==r&&ve.throwArgumentError("from address mismatch","transaction",t):e.from=r;const n=this.provider.constructor.hexlifyTransaction(e,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((t=>t),(t=>Se("sendTransaction",t,n)))}))}signTransaction(t){return ve.throwError("signing transactions is unsupported",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return we(this,void 0,void 0,(function*(){const e=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(t);try{return yield X((()=>we(this,void 0,void 0,(function*(){const t=yield this.provider.getTransaction(r);if(null!==t)return this.provider._wrapTransaction(t,r,e)}))),{oncePoll:this.provider})}catch(n){throw n.transactionHash=r,n}}))}signMessage(t){return we(this,void 0,void 0,(function*(){const e="string"===typeof t?(0,_.Y0)(t):t,r=yield this.getAddress();return yield this.provider.send("personal_sign",[(0,m.Dv)(e),r.toLowerCase()])}))}_legacySignMessage(t){return we(this,void 0,void 0,(function*(){const e="string"===typeof t?(0,_.Y0)(t):t,r=yield this.getAddress();return yield this.provider.send("eth_sign",[r.toLowerCase(),(0,m.Dv)(e)])}))}_signTypedData(t,e,r){return we(this,void 0,void 0,(function*(){const n=yield j.resolveNames(t,e,r,(t=>this.provider.resolveName(t))),i=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(j.getPayload(n.domain,e,n.value))])}))}unlock(t){return we(this,void 0,void 0,(function*(){const e=this.provider,r=yield this.getAddress();return e.send("personal_unlockAccount",[r.toLowerCase(),t,null])}))}}class ke extends Me{sendTransaction(t){return this.sendUncheckedTransaction(t).then((t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:e=>this.provider.waitForTransaction(t,e)})))}}const Ce={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Oe extends be{constructor(t,e){let r=e;null==r&&(r=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then((e=>{t(e)}),(t=>{e(t)}))}),0)}))),super(r),t||(t=(0,a.tu)(this.constructor,"defaultUrl")()),"string"===typeof t?(0,a.zG)(this,"connection",Object.freeze({url:t})):(0,a.zG)(this,"connection",Object.freeze((0,a.DC)(t))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache["detectNetwork"]||(this._cache["detectNetwork"]=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache["detectNetwork"]=null}),0)),this._cache["detectNetwork"]}_uncachedDetectNetwork(){return we(this,void 0,void 0,(function*(){yield Ae(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch(e){try{t=yield this.send("net_version",[])}catch(e){}}if(null!=t){const r=(0,a.tu)(this.constructor,"getNetwork");try{return r(g.O$.from(t).toNumber())}catch(e){return ve.throwError("could not detect network",u.Yd.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}}return ve.throwError("could not detect network",u.Yd.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(t){return new Me(Re,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((t=>t.map((t=>this.formatter.address(t)))))}send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:(0,a.p$)(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(n&&this._cache[t])return this._cache[t];const i=Z(this.connection,JSON.stringify(r),Ie).then((t=>(this.emit("debug",{action:"response",request:r,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",error:t,request:r,provider:this}),t}));return n&&(this._cache[t]=i,setTimeout((()=>{this._cache[t]=null}),0)),i}prepareRequest(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Te(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Te(e.address),e.blockTag]];case"getCode":return["eth_getCode",[Te(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Te(e.address),(0,m.$m)(e.position,32),e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":return e.blockTag?["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]:e.blockHash?["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":{const t=(0,a.tu)(this.constructor,"hexlifyTransaction");return["eth_call",[t(e.transaction,{from:!0}),e.blockTag]]}case"estimateGas":{const t=(0,a.tu)(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[t(e.transaction,{from:!0})]]}case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=Te(e.filter.address)),["eth_getLogs",[e.filter]];default:break}return null}perform(t,e){return we(this,void 0,void 0,(function*(){if("call"===t||"estimateGas"===t){const t=e.transaction;if(t&&null!=t.type&&g.O$.from(t.type).isZero()&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(e=(0,a.DC)(e),e.transaction=(0,a.DC)(t),delete e.transaction.type)}}const r=this.prepareRequest(t,e);null==r&&ve.throwError(t+" not implemented",u.Yd.errors.NOT_IMPLEMENTED,{operation:t});try{return yield this.send(r[0],r[1])}catch(n){return Se(t,n,e)}}))}_startEvent(t){"pending"===t.tag&&this._startPending(),super._startEvent(t)}_startPending(){if(null!=this._pendingFilter)return;const t=this,e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e,e.then((function(r){function n(){t.send("eth_getFilterChanges",[r]).then((function(r){if(t._pendingFilter!=e)return null;let n=Promise.resolve();return r.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",n=n.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),n.then((function(){return Ae(1e3)}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){n()}),0),null;t.send("eth_uninstallFilter",[r])})).catch((t=>{}))}return n(),r})).catch((t=>{}))}_stopEvent(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(t)}static hexlifyTransaction(t,e){const r=(0,a.DC)(Ce);if(e)for(const i in e)e[i]&&(r[i]=!0);(0,a.uj)(t,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(null==t[e])return;const r=(0,m.$P)(g.O$.from(t[e]));"gasLimit"===e&&(e="gas"),n[e]=r})),["from","to","data"].forEach((function(e){null!=t[e]&&(n[e]=(0,m.Dv)(t[e]))})),t.accessList&&(n["accessList"]=(0,F.z7)(t.accessList)),n}}const Pe=new u.Yd(c);let Be=1;function xe(t,e){const r="Web3LegacyFetcher";return function(t,n){const i={method:t,params:n,id:Be++,jsonrpc:"2.0"};return new Promise(((t,n)=>{this.emit("debug",{action:"request",fetcher:r,request:(0,a.p$)(i),provider:this}),e(i,((e,o)=>{if(e)return this.emit("debug",{action:"response",fetcher:r,error:e,request:i,provider:this}),n(e);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:o,provider:this}),o.error){const t=new Error(o.error.message);return t.code=o.error.code,t.data=o.error.data,n(t)}t(o.result)}))}))}}function Ne(t){return function(e,r){null==r&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:(0,a.p$)(n),provider:this}),t.request(n).then((t=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:t,provider:this}),t}))}}class De extends Oe{constructor(t,e){null==t&&Pe.throwArgumentError("missing provider","provider",t);let r=null,n=null,i=null;"function"===typeof t?(r="unknown:",n=t):(r=t.host||t.path||"",!r&&t.isMetaMask&&(r="metamask"),i=t,t.request?(""===r&&(r="eip-1193:"),n=Ne(t)):t.sendAsync?n=xe(t,t.sendAsync.bind(t)):t.send?n=xe(t,t.send.bind(t)):Pe.throwArgumentError("unsupported provider","provider",t),r||(r="unknown:")),super(r,e),(0,a.zG)(this,"jsonRpcFetchFunc",n),(0,a.zG)(this,"provider",i)}send(t,e){return this.jsonRpcFetchFunc(t,e)}}var Le=r(19438),Ue=r.n(Le),je=r(86425),Fe=r.n(je);var Ke;function $e(t){switch(t){case 0:case"deflate":return Ke.deflate;case 1:case"gzip":return Ke.gzip;case-1:case"UNRECOGNIZED":default:return Ke.UNRECOGNIZED}}function qe(t){switch(t){case Ke.deflate:return"deflate";case Ke.gzip:return"gzip";default:return"UNKNOWN"}}function He(){return{ecdsaCompact:void 0}}(function(t){t[t["deflate"]=0]="deflate",t[t["gzip"]=1]="gzip",t[t["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Ke||(Ke={}));const ze={encode(t,e=Fe().Writer.create()){return void 0!==t.ecdsaCompact&&Ge.encode(t.ecdsaCompact,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=He();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.ecdsaCompact=Ge.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{ecdsaCompact:Rr(t.ecdsaCompact)?Ge.fromJSON(t.ecdsaCompact):void 0}},toJSON(t){const e={};return void 0!==t.ecdsaCompact&&(e.ecdsaCompact=t.ecdsaCompact?Ge.toJSON(t.ecdsaCompact):void 0),e},fromPartial(t){const e=He();return e.ecdsaCompact=void 0!==t.ecdsaCompact&&null!==t.ecdsaCompact?Ge.fromPartial(t.ecdsaCompact):void 0,e}};function Ve(){return{bytes:new Uint8Array,recovery:0}}const Ge={encode(t,e=Fe().Writer.create()){return 0!==t.bytes.length&&e.uint32(10).bytes(t.bytes),0!==t.recovery&&e.uint32(16).uint32(t.recovery),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=Ve();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.bytes=r.bytes();break;case 2:i.recovery=r.uint32();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{bytes:Rr(t.bytes)?Er(t.bytes):new Uint8Array,recovery:Rr(t.recovery)?Number(t.recovery):0}},toJSON(t){const e={};return void 0!==t.bytes&&(e.bytes=Ar(void 0!==t.bytes?t.bytes:new Uint8Array)),void 0!==t.recovery&&(e.recovery=Math.round(t.recovery)),e},fromPartial(t){var e,r;const n=Ve();return n.bytes=null!==(e=t.bytes)&&void 0!==e?e:new Uint8Array,n.recovery=null!==(r=t.recovery)&&void 0!==r?r:0,n}};function We(){return{timestamp:0,signature:void 0,secp256k1Uncompressed:void 0}}const Ye={encode(t,e=Fe().Writer.create()){return 0!==t.timestamp&&e.uint32(8).uint64(t.timestamp),void 0!==t.signature&&ze.encode(t.signature,e.uint32(18).fork()).ldelim(),void 0!==t.secp256k1Uncompressed&&Ze.encode(t.secp256k1Uncompressed,e.uint32(26).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=We();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.timestamp=Ir(r.uint64());break;case 2:i.signature=ze.decode(r,r.uint32());break;case 3:i.secp256k1Uncompressed=Ze.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{timestamp:Rr(t.timestamp)?Number(t.timestamp):0,signature:Rr(t.signature)?ze.fromJSON(t.signature):void 0,secp256k1Uncompressed:Rr(t.secp256k1Uncompressed)?Ze.fromJSON(t.secp256k1Uncompressed):void 0}},toJSON(t){const e={};return void 0!==t.timestamp&&(e.timestamp=Math.round(t.timestamp)),void 0!==t.signature&&(e.signature=t.signature?ze.toJSON(t.signature):void 0),void 0!==t.secp256k1Uncompressed&&(e.secp256k1Uncompressed=t.secp256k1Uncompressed?Ze.toJSON(t.secp256k1Uncompressed):void 0),e},fromPartial(t){var e;const r=We();return r.timestamp=null!==(e=t.timestamp)&&void 0!==e?e:0,r.signature=void 0!==t.signature&&null!==t.signature?ze.fromPartial(t.signature):void 0,r.secp256k1Uncompressed=void 0!==t.secp256k1Uncompressed&&null!==t.secp256k1Uncompressed?Ze.fromPartial(t.secp256k1Uncompressed):void 0,r}};function Je(){return{bytes:new Uint8Array}}const Ze={encode(t,e=Fe().Writer.create()){return 0!==t.bytes.length&&e.uint32(10).bytes(t.bytes),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=Je();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.bytes=r.bytes();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{bytes:Rr(t.bytes)?Er(t.bytes):new Uint8Array}},toJSON(t){const e={};return void 0!==t.bytes&&(e.bytes=Ar(void 0!==t.bytes?t.bytes:new Uint8Array)),e},fromPartial(t){var e;const r=Je();return r.bytes=null!==(e=t.bytes)&&void 0!==e?e:new Uint8Array,r}};function Xe(){return{identityKey:void 0,preKey:void 0}}const Qe={encode(t,e=Fe().Writer.create()){return void 0!==t.identityKey&&Ye.encode(t.identityKey,e.uint32(10).fork()).ldelim(),void 0!==t.preKey&&Ye.encode(t.preKey,e.uint32(18).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=Xe();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.identityKey=Ye.decode(r,r.uint32());break;case 2:i.preKey=Ye.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{identityKey:Rr(t.identityKey)?Ye.fromJSON(t.identityKey):void 0,preKey:Rr(t.preKey)?Ye.fromJSON(t.preKey):void 0}},toJSON(t){const e={};return void 0!==t.identityKey&&(e.identityKey=t.identityKey?Ye.toJSON(t.identityKey):void 0),void 0!==t.preKey&&(e.preKey=t.preKey?Ye.toJSON(t.preKey):void 0),e},fromPartial(t){const e=Xe();return e.identityKey=void 0!==t.identityKey&&null!==t.identityKey?Ye.fromPartial(t.identityKey):void 0,e.preKey=void 0!==t.preKey&&null!==t.preKey?Ye.fromPartial(t.preKey):void 0,e}};function tr(){return{keyBundle:void 0}}const er={encode(t,e=Fe().Writer.create()){return void 0!==t.keyBundle&&Qe.encode(t.keyBundle,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=tr();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.keyBundle=Qe.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{keyBundle:Rr(t.keyBundle)?Qe.fromJSON(t.keyBundle):void 0}},toJSON(t){const e={};return void 0!==t.keyBundle&&(e.keyBundle=t.keyBundle?Qe.toJSON(t.keyBundle):void 0),e},fromPartial(t){const e=tr();return e.keyBundle=void 0!==t.keyBundle&&null!==t.keyBundle?Qe.fromPartial(t.keyBundle):void 0,e}};function rr(){return{v1:void 0}}const nr={encode(t,e=Fe().Writer.create()){return void 0!==t.v1&&er.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=rr();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.v1=er.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{v1:Rr(t.v1)?er.fromJSON(t.v1):void 0}},toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?er.toJSON(t.v1):void 0),e},fromPartial(t){const e=rr();return e.v1=void 0!==t.v1&&null!==t.v1?er.fromPartial(t.v1):void 0,e}};function ir(){return{authorityId:"",typeId:"",versionMajor:0,versionMinor:0}}const or={encode(t,e=Fe().Writer.create()){return""!==t.authorityId&&e.uint32(10).string(t.authorityId),""!==t.typeId&&e.uint32(18).string(t.typeId),0!==t.versionMajor&&e.uint32(24).uint32(t.versionMajor),0!==t.versionMinor&&e.uint32(32).uint32(t.versionMinor),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=ir();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.authorityId=r.string();break;case 2:i.typeId=r.string();break;case 3:i.versionMajor=r.uint32();break;case 4:i.versionMinor=r.uint32();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{authorityId:Rr(t.authorityId)?String(t.authorityId):"",typeId:Rr(t.typeId)?String(t.typeId):"",versionMajor:Rr(t.versionMajor)?Number(t.versionMajor):0,versionMinor:Rr(t.versionMinor)?Number(t.versionMinor):0}},toJSON(t){const e={};return void 0!==t.authorityId&&(e.authorityId=t.authorityId),void 0!==t.typeId&&(e.typeId=t.typeId),void 0!==t.versionMajor&&(e.versionMajor=Math.round(t.versionMajor)),void 0!==t.versionMinor&&(e.versionMinor=Math.round(t.versionMinor)),e},fromPartial(t){var e,r,n,i;const o=ir();return o.authorityId=null!==(e=t.authorityId)&&void 0!==e?e:"",o.typeId=null!==(r=t.typeId)&&void 0!==r?r:"",o.versionMajor=null!==(n=t.versionMajor)&&void 0!==n?n:0,o.versionMinor=null!==(i=t.versionMinor)&&void 0!==i?i:0,o}};function sr(){return{type:void 0,parameters:{},fallback:void 0,compression:void 0,content:new Uint8Array}}const ar={encode(t,e=Fe().Writer.create()){return void 0!==t.type&&or.encode(t.type,e.uint32(10).fork()).ldelim(),Object.entries(t.parameters).forEach((([t,r])=>{cr.encode({key:t,value:r},e.uint32(18).fork()).ldelim()})),void 0!==t.fallback&&e.uint32(26).string(t.fallback),void 0!==t.compression&&e.uint32(40).int32(t.compression),0!==t.content.length&&e.uint32(34).bytes(t.content),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=sr();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.type=or.decode(r,r.uint32());break;case 2:const e=cr.decode(r,r.uint32());void 0!==e.value&&(i.parameters[e.key]=e.value);break;case 3:i.fallback=r.string();break;case 5:i.compression=r.int32();break;case 4:i.content=r.bytes();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{type:Rr(t.type)?or.fromJSON(t.type):void 0,parameters:Tr(t.parameters)?Object.entries(t.parameters).reduce(((t,[e,r])=>(t[e]=String(r),t)),{}):{},fallback:Rr(t.fallback)?String(t.fallback):void 0,compression:Rr(t.compression)?$e(t.compression):void 0,content:Rr(t.content)?Er(t.content):new Uint8Array}},toJSON(t){const e={};return void 0!==t.type&&(e.type=t.type?or.toJSON(t.type):void 0),e.parameters={},t.parameters&&Object.entries(t.parameters).forEach((([t,r])=>{e.parameters[t]=r})),void 0!==t.fallback&&(e.fallback=t.fallback),void 0!==t.compression&&(e.compression=void 0!==t.compression?qe(t.compression):void 0),void 0!==t.content&&(e.content=Ar(void 0!==t.content?t.content:new Uint8Array)),e},fromPartial(t){var e,r,n,i;const o=sr();return o.type=void 0!==t.type&&null!==t.type?or.fromPartial(t.type):void 0,o.parameters=Object.entries(null!==(e=t.parameters)&&void 0!==e?e:{}).reduce(((t,[e,r])=>(void 0!==r&&(t[e]=String(r)),t)),{}),o.fallback=null!==(r=t.fallback)&&void 0!==r?r:void 0,o.compression=null!==(n=t.compression)&&void 0!==n?n:void 0,o.content=null!==(i=t.content)&&void 0!==i?i:new Uint8Array,o}};function ur(){return{key:"",value:""}}const cr={encode(t,e=Fe().Writer.create()){return""!==t.key&&e.uint32(10).string(t.key),""!==t.value&&e.uint32(18).string(t.value),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=ur();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.key=r.string();break;case 2:i.value=r.string();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{key:Rr(t.key)?String(t.key):"",value:Rr(t.value)?String(t.value):""}},toJSON(t){const e={};return void 0!==t.key&&(e.key=t.key),void 0!==t.value&&(e.value=t.value),e},fromPartial(t){var e,r;const n=ur();return n.key=null!==(e=t.key)&&void 0!==e?e:"",n.value=null!==(r=t.value)&&void 0!==r?r:"",n}};function hr(){return{aes256GcmHkdfSha256:void 0}}const lr={encode(t,e=Fe().Writer.create()){return void 0!==t.aes256GcmHkdfSha256&&dr.encode(t.aes256GcmHkdfSha256,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=hr();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.aes256GcmHkdfSha256=dr.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{aes256GcmHkdfSha256:Rr(t.aes256GcmHkdfSha256)?dr.fromJSON(t.aes256GcmHkdfSha256):void 0}},toJSON(t){const e={};return void 0!==t.aes256GcmHkdfSha256&&(e.aes256GcmHkdfSha256=t.aes256GcmHkdfSha256?dr.toJSON(t.aes256GcmHkdfSha256):void 0),e},fromPartial(t){const e=hr();return e.aes256GcmHkdfSha256=void 0!==t.aes256GcmHkdfSha256&&null!==t.aes256GcmHkdfSha256?dr.fromPartial(t.aes256GcmHkdfSha256):void 0,e}};function fr(){return{hkdfSalt:new Uint8Array,gcmNonce:new Uint8Array,payload:new Uint8Array}}const dr={encode(t,e=Fe().Writer.create()){return 0!==t.hkdfSalt.length&&e.uint32(10).bytes(t.hkdfSalt),0!==t.gcmNonce.length&&e.uint32(18).bytes(t.gcmNonce),0!==t.payload.length&&e.uint32(26).bytes(t.payload),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=fr();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.hkdfSalt=r.bytes();break;case 2:i.gcmNonce=r.bytes();break;case 3:i.payload=r.bytes();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{hkdfSalt:Rr(t.hkdfSalt)?Er(t.hkdfSalt):new Uint8Array,gcmNonce:Rr(t.gcmNonce)?Er(t.gcmNonce):new Uint8Array,payload:Rr(t.payload)?Er(t.payload):new Uint8Array}},toJSON(t){const e={};return void 0!==t.hkdfSalt&&(e.hkdfSalt=Ar(void 0!==t.hkdfSalt?t.hkdfSalt:new Uint8Array)),void 0!==t.gcmNonce&&(e.gcmNonce=Ar(void 0!==t.gcmNonce?t.gcmNonce:new Uint8Array)),void 0!==t.payload&&(e.payload=Ar(void 0!==t.payload?t.payload:new Uint8Array)),e},fromPartial(t){var e,r,n;const i=fr();return i.hkdfSalt=null!==(e=t.hkdfSalt)&&void 0!==e?e:new Uint8Array,i.gcmNonce=null!==(r=t.gcmNonce)&&void 0!==r?r:new Uint8Array,i.payload=null!==(n=t.payload)&&void 0!==n?n:new Uint8Array,i}};function pr(){return{sender:void 0,recipient:void 0,timestamp:0}}const yr={encode(t,e=Fe().Writer.create()){return void 0!==t.sender&&Qe.encode(t.sender,e.uint32(10).fork()).ldelim(),void 0!==t.recipient&&Qe.encode(t.recipient,e.uint32(18).fork()).ldelim(),0!==t.timestamp&&e.uint32(24).uint64(t.timestamp),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=pr();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.sender=Qe.decode(r,r.uint32());break;case 2:i.recipient=Qe.decode(r,r.uint32());break;case 3:i.timestamp=Ir(r.uint64());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{sender:Rr(t.sender)?Qe.fromJSON(t.sender):void 0,recipient:Rr(t.recipient)?Qe.fromJSON(t.recipient):void 0,timestamp:Rr(t.timestamp)?Number(t.timestamp):0}},toJSON(t){const e={};return void 0!==t.sender&&(e.sender=t.sender?Qe.toJSON(t.sender):void 0),void 0!==t.recipient&&(e.recipient=t.recipient?Qe.toJSON(t.recipient):void 0),void 0!==t.timestamp&&(e.timestamp=Math.round(t.timestamp)),e},fromPartial(t){var e;const r=pr();return r.sender=void 0!==t.sender&&null!==t.sender?Qe.fromPartial(t.sender):void 0,r.recipient=void 0!==t.recipient&&null!==t.recipient?Qe.fromPartial(t.recipient):void 0,r.timestamp=null!==(e=t.timestamp)&&void 0!==e?e:0,r}};function gr(){return{headerBytes:new Uint8Array,ciphertext:void 0}}const mr={encode(t,e=Fe().Writer.create()){return 0!==t.headerBytes.length&&e.uint32(10).bytes(t.headerBytes),void 0!==t.ciphertext&&lr.encode(t.ciphertext,e.uint32(18).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=gr();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.headerBytes=r.bytes();break;case 2:i.ciphertext=lr.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{headerBytes:Rr(t.headerBytes)?Er(t.headerBytes):new Uint8Array,ciphertext:Rr(t.ciphertext)?lr.fromJSON(t.ciphertext):void 0}},toJSON(t){const e={};return void 0!==t.headerBytes&&(e.headerBytes=Ar(void 0!==t.headerBytes?t.headerBytes:new Uint8Array)),void 0!==t.ciphertext&&(e.ciphertext=t.ciphertext?lr.toJSON(t.ciphertext):void 0),e},fromPartial(t){var e;const r=gr();return r.headerBytes=null!==(e=t.headerBytes)&&void 0!==e?e:new Uint8Array,r.ciphertext=void 0!==t.ciphertext&&null!==t.ciphertext?lr.fromPartial(t.ciphertext):void 0,r}};function br(){return{v1:void 0}}const wr={encode(t,e=Fe().Writer.create()){return void 0!==t.v1&&mr.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=br();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.v1=mr.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{v1:Rr(t.v1)?mr.fromJSON(t.v1):void 0}},toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?mr.toJSON(t.v1):void 0),e},fromPartial(t){const e=br();return e.v1=void 0!==t.v1&&null!==t.v1?mr.fromPartial(t.v1):void 0,e}};var vr=(()=>{if("undefined"!==typeof vr)return vr;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw"Unable to locate global object"})();const _r=vr.atob||(t=>vr.Buffer.from(t,"base64").toString("binary"));function Er(t){const e=_r(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const Sr=vr.btoa||(t=>vr.Buffer.from(t,"binary").toString("base64"));function Ar(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return Sr(e.join(""))}function Ir(t){if(t.gt(Number.MAX_SAFE_INTEGER))throw new vr.Error("Value is larger than Number.MAX_SAFE_INTEGER");return t.toNumber()}function Tr(t){return"object"===typeof t&&null!==t}function Rr(t){return null!==t&&void 0!==t}Fe().util.Long!==Ue()&&(Fe().util.Long=Ue(),Fe().configure());const Mr=32,kr=12,Cr=16;class Or{constructor(t){if(!t.aes256GcmHkdfSha256)throw new Error("invalid ciphertext");if(t.aes256GcmHkdfSha256.payload.length<Cr)throw new Error(`invalid ciphertext ciphertext length: ${t.aes256GcmHkdfSha256.payload.length}`);if(t.aes256GcmHkdfSha256.hkdfSalt.length!==Mr)throw new Error(`invalid ciphertext salt length: ${t.aes256GcmHkdfSha256.hkdfSalt.length}`);if(t.aes256GcmHkdfSha256.gcmNonce.length!==kr)throw new Error(`invalid ciphertext nonce length: ${t.aes256GcmHkdfSha256.gcmNonce.length}`);this.aes256GcmHkdfSha256=t.aes256GcmHkdfSha256}toBytes(){return lr.encode(this).finish()}static fromBytes(t){return new Or(lr.decode(t))}}var Pr=r(95856),Br=r.t(Pr,2);
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const xr=BigInt(0),Nr=BigInt(1),Dr=BigInt(2),Lr=BigInt(3),Ur=BigInt(8),jr=Dr**BigInt(256),Fr={a:xr,b:BigInt(7),P:jr-Dr**BigInt(32)-BigInt(977),n:jr-BigInt("432420386565659656852420866394968145599"),h:Nr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function Kr(t){const{a:e,b:r}=Fr,n=cn(t*t),i=cn(n*t);return cn(i+e*t+r)}const $r=Fr.a===xr;class qr{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof zr))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new qr(t.x,t.y,Nr)}static toAffineBatch(t){const e=dn(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return qr.toAffineBatch(t).map(qr.fromAffine)}equals(t){if(!(t instanceof qr))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:i,y:o,z:s}=t,a=cn(n**Dr),u=cn(s**Dr),c=cn(e*u),h=cn(i*a),l=cn(cn(r*s)*u),f=cn(cn(o*n)*a);return c===h&&l===f}negate(){return new qr(this.x,cn(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,n=cn(t**Dr),i=cn(e**Dr),o=cn(i**Dr),s=cn(Dr*(cn((t+i)**Dr)-n-o)),a=cn(Lr*n),u=cn(a**Dr),c=cn(u-Dr*s),h=cn(a*(s-c)-Ur*o),l=cn(Dr*e*r);return new qr(c,h,l)}add(t){if(!(t instanceof qr))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:n}=this,{x:i,y:o,z:s}=t;if(i===xr||o===xr)return this;if(e===xr||r===xr)return t;const a=cn(n**Dr),u=cn(s**Dr),c=cn(e*u),h=cn(i*a),l=cn(cn(r*s)*u),f=cn(cn(o*n)*a),d=cn(h-c),p=cn(f-l);if(d===xr)return p===xr?this.double():qr.ZERO;const y=cn(d**Dr),g=cn(d*y),m=cn(c*y),b=cn(p**Dr-g-Dr*m),w=cn(p*(m-b)-l*g),v=cn(n*s*d);return new qr(b,w,v)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=qr.ZERO;if("bigint"===typeof t&&t===xr)return e;let r=un(t);if(r===Nr)return this;if(!$r){let t=e,n=this;while(r>xr)r&Nr&&(t=t.add(n)),n=n.double(),r>>=Nr;return t}let{k1neg:n,k1:i,k2neg:o,k2:s}=gn(r),a=e,u=e,c=this;while(i>xr||s>xr)i&Nr&&(a=a.add(c)),s&Nr&&(u=u.add(c)),c=c.double(),i>>=Nr,s>>=Nr;return n&&(a=a.negate()),o&&(u=u.negate()),u=new qr(cn(u.x*Fr.beta),u.y,u.z),a.add(u)}precomputeWindow(t){const e=$r?128/t+1:256/t+1,r=[];let n=this,i=n;for(let o=0;o<e;o++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(qr.BASE)&&(e=zr.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&Hr.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=qr.normalizeZ(n),Hr.set(e,n)));let i=qr.ZERO,o=qr.ZERO;const s=1+($r?128/r:256/r),a=2**(r-1),u=BigInt(2**r-1),c=2**r,h=BigInt(r);for(let l=0;l<s;l++){const e=l*a;let r=Number(t&u);if(t>>=h,r>a&&(r-=c,t+=Nr),0===r){let t=n[e];l%2&&(t=t.negate()),o=o.add(t)}else{let t=n[e+Math.abs(r)-1];r<0&&(t=t.negate()),i=i.add(t)}}return{p:i,f:o}}multiply(t,e){let r,n,i=un(t);if($r){const{k1neg:t,k1:o,k2neg:s,k2:a}=gn(i);let{p:u,f:c}=this.wNAF(o,e),{p:h,f:l}=this.wNAF(a,e);t&&(u=u.negate()),s&&(h=h.negate()),h=new qr(cn(h.x*Fr.beta),h.y,h.z),r=u.add(h),n=c.add(l)}else{const{p:t,f:o}=this.wNAF(i,e);r=t,n=o}return qr.normalizeZ([r,n])[0]}toAffine(t=fn(this.z)){const{x:e,y:r,z:n}=this,i=t,o=cn(i*i),s=cn(o*i),a=cn(e*o),u=cn(r*s),c=cn(n*i);if(c!==Nr)throw new Error("invZ was invalid");return new zr(a,u)}}qr.BASE=new qr(Fr.Gx,Fr.Gy,Nr),qr.ZERO=new qr(xr,Nr,xr);const Hr=new WeakMap;class zr{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Hr.delete(this)}static fromCompressedHex(t){const e=32===t.length,r=sn(e?t:t.subarray(1));if(!vn(r))throw new Error("Point is not on curve");const n=Kr(r);let i=ln(n);const o=(i&Nr)===Nr;if(e)o&&(i=cn(-i));else{const e=1===(1&t[0]);e!==o&&(i=cn(-i))}const s=new zr(r,i);return s.assertValidity(),s}static fromUncompressedHex(t){const e=sn(t.subarray(1,33)),r=sn(t.subarray(33,65)),n=new zr(e,r);return n.assertValidity(),n}static fromHex(t){const e=an(t),r=e.length,n=e[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(e);if(65===r&&4===n)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return zr.BASE.multiply(En(t))}static fromSignature(t,e,r){t=an(t);const n=mn(t),{r:i,s:o}=An(e);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");const s=1&r?"03":"02",a=zr.fromHex(s+tn(i)),{n:u}=Fr,c=fn(i,u),h=cn(-n*c,u),l=cn(o*c,u),f=zr.BASE.multiplyAndAddUnsafe(a,h,l);if(!f)throw new Error("Cannot recover signature: point at infinify");return f.assertValidity(),f}toRawBytes(t=!1){return on(this.toHex(t))}toHex(t=!1){const e=tn(this.x);if(t){const t=this.y&Nr?"03":"02";return`${t}${e}`}return`04${e}${tn(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!vn(e)||!vn(r))throw new Error(t);const n=cn(r*r),i=Kr(e);if(cn(n-i)!==xr)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new zr(this.x,cn(-this.y))}double(){return qr.fromAffine(this).double().toAffine()}add(t){return qr.fromAffine(this).add(qr.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return qr.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const n=qr.fromAffine(this),i=e===xr||e===Nr||this!==zr.BASE?n.multiplyUnsafe(e):n.multiply(e),o=qr.fromAffine(t).multiplyUnsafe(r),s=i.add(o);return s.equals(qr.ZERO)?void 0:s.toAffine()}}function Vr(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Gr(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${Qr(t)}`);const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:sn(r),left:t.subarray(e+2)}}function Wr(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${Qr(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:r}=Gr(t.subarray(2)),{data:n,left:i}=Gr(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Qr(i)}`);return{r:e,s:n}}zr.BASE=new zr(Fr.Gx,Fr.Gy),zr.ZERO=new zr(xr,xr);class Yr{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=Zr(t),r="Signature.fromCompact";if("string"!==typeof t&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=e?Qr(t):t;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new Yr(nn(n.slice(0,64)),nn(n.slice(64,128)))}static fromDER(t){const e=Zr(t);if("string"!==typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=Wr(e?t:on(t));return new Yr(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!wn(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!wn(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=Fr.n>>Nr;return this.s>t}normalizeS(){return this.hasHighS()?new Yr(this.r,Fr.n-this.s):this}toDERRawBytes(t=!1){return on(this.toDERHex(t))}toDERHex(t=!1){const e=Vr(rn(this.s));if(t)return e;const r=Vr(rn(this.r)),n=rn(r.length/2),i=rn(e.length/2),o=rn(r.length/2+e.length/2+4);return`30${o}02${n}${r}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return on(this.toCompactHex())}toCompactHex(){return tn(this.r)+tn(this.s)}}function Jr(...t){if(!t.every(Zr))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const e=t[n];r.set(e,i),i+=e.length}return r}function Zr(t){return t instanceof Uint8Array}const Xr=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Qr(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=Xr[t[r]];return e}function tn(t){if(t>jr)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function en(t){return on(tn(t))}function rn(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function nn(t){if("string"!==typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function on(t){if("string"!==typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function sn(t){return nn(Qr(t))}function an(t){return t instanceof Uint8Array?Uint8Array.from(t):on(t)}function un(t){if("number"===typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"===typeof t&&wn(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function cn(t,e=Fr.P){const r=t%e;return r>=xr?r:e+r}function hn(t,e){const{P:r}=Fr;let n=t;while(e-- >xr)n*=n,n%=r;return n}function ln(t){const{P:e}=Fr,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),u=t*t*t%e,c=u*u*t%e,h=hn(c,Lr)*c%e,l=hn(h,Lr)*c%e,f=hn(l,Dr)*u%e,d=hn(f,n)*f%e,p=hn(d,i)*d%e,y=hn(p,s)*p%e,g=hn(y,a)*y%e,m=hn(g,s)*p%e,b=hn(m,Lr)*c%e,w=hn(b,o)*d%e,v=hn(w,r)*u%e;return hn(v,Dr)}function fn(t,e=Fr.P){if(t===xr||e<=xr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=cn(t,e),n=e,i=xr,o=Nr,s=Nr,a=xr;while(r!==xr){const t=n/r,e=n%r,u=i-s*t,c=o-a*t;n=r,r=e,i=s,o=a,s=u,a=c}const u=n;if(u!==Nr)throw new Error("invert: does not exist");return cn(i,e)}function dn(t,e=Fr.P){const r=new Array(t.length),n=t.reduce(((t,n,i)=>n===xr?t:(r[i]=t,cn(t*n,e))),Nr),i=fn(n,e);return t.reduceRight(((t,n,i)=>n===xr?t:(r[i]=cn(t*r[i],e),cn(t*n,e))),i),r}const pn=(t,e)=>(t+e/Dr)/e,yn=Dr**BigInt(128);function gn(t){const{n:e}=Fr,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Nr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=pn(o*t,e),a=pn(-n*t,e);let u=cn(t-s*r-a*i,e),c=cn(-s*n-a*o,e);const h=u>yn,l=c>yn;if(h&&(u=e-u),l&&(c=e-c),u>yn||c>yn)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:l,k2:c}}function mn(t){const{n:e}=Fr,r=t.length,n=8*r-256;let i=sn(t);return n>0&&(i>>=BigInt(n)),i>=e&&(i-=e),i}class bn{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...t){return jn.hmacSha256(this.k,...t)}hmacSync(...t){if("function"!==typeof jn.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");const e=jn.hmacSha256Sync(this.k,...t);if(e instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return e}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function wn(t){return xr<t&&t<Fr.n}function vn(t){return xr<t&&t<Fr.P}function _n(t,e,r){const n=sn(t);if(!wn(n))return;const{n:i}=Fr,o=zr.BASE.multiply(n),s=cn(o.x,i);if(s===xr)return;const a=cn(fn(n,i)*cn(e+r*s,i),i);if(a===xr)return;const u=new Yr(s,a),c=(o.x===u.r?0:2)|Number(o.y&Nr);return{sig:u,recovery:c}}function En(t){let e;if("bigint"===typeof t)e=t;else if("number"===typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"===typeof t){if(64!==t.length)throw new Error("Expected 32 bytes of private key");e=nn(t)}else{if(!Zr(t))throw new TypeError("Expected valid private key");if(32!==t.length)throw new Error("Expected 32 bytes of private key");e=sn(t)}if(!wn(e))throw new Error("Expected private key: 0 < key < n");return e}function Sn(t){return t instanceof zr?(t.assertValidity(),t):zr.fromHex(t)}function An(t){if(t instanceof Yr)return t.assertValidity(),t;try{return Yr.fromDER(t)}catch(e){return Yr.fromCompact(t)}}function In(t,e=!1){return zr.fromPrivateKey(t).toRawBytes(e)}function Tn(t,e,r,n=!1){return zr.fromSignature(t,e,r).toRawBytes(n)}function Rn(t){const e=Zr(t),r="string"===typeof t,n=(e||r)&&t.length;return e?33===n||65===n:r?66===n||130===n:t instanceof zr}function Mn(t,e,r=!1){if(Rn(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!Rn(e))throw new TypeError("getSharedSecret: second arg must be public key");const n=Sn(e);return n.assertValidity(),n.multiply(En(t)).toRawBytes(r)}function kn(t){const e=t.length>32?t.slice(0,32):t;return sn(e)}function Cn(t){const e=kn(t),r=cn(e,Fr.n);return On(r<xr?e:r)}function On(t){if("bigint"!==typeof t)throw new Error("Expected bigint");const e=tn(t);return on(e)}function Pn(t,e,r){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const n=an(t),i=En(e),o=[On(i),Cn(n)];if(null!=r){!0===r&&(r=jn.randomBytes(32));const t=an(r);if(32!==t.length)throw new Error("sign: Expected 32 bytes of extra data");o.push(t)}const s=Jr(...o),a=kn(n);return{seed:s,m:a,d:i}}function Bn(t,e){let{sig:r,recovery:n}=t;const{canonical:i,der:o,recovered:s}=Object.assign({canonical:!0,der:!0},e);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=o?r.toDERRawBytes():r.toCompactRawBytes();return s?[a,n]:a}async function xn(t,e,r={}){const{seed:n,m:i,d:o}=Pn(t,e,r.extraEntropy);let s;const a=new bn;await a.reseed(n);while(!(s=_n(await a.generate(),i,o)))await a.reseed();return Bn(s,r)}const Nn={strict:!0};function Dn(t,e,r,n=Nn){let i;try{i=An(t),e=an(e)}catch(y){return!1}const{r:o,s:s}=i;if(n.strict&&i.hasHighS())return!1;const a=mn(e);let u;try{u=Sn(r)}catch(y){return!1}const{n:c}=Fr,h=fn(s,c),l=cn(a*h,c),f=cn(o*h,c),d=zr.BASE.multiplyAndAddUnsafe(u,l,f);if(!d)return!1;const p=cn(d.x,c);return p===o}zr.BASE._setWindowSize(8);const Ln={node:Br,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Un={},jn={isValidPrivateKey(t){try{return En(t),!0}catch(e){return!1}},privateAdd:(t,e)=>{const r=En(t),n=En(e);return en(cn(r+n,Fr.n))},privateNegate:t=>{const e=En(t);return en(Fr.n-e)},pointAddScalar:(t,e,r)=>{const n=zr.fromHex(t),i=En(e),o=zr.BASE.multiplyAndAddUnsafe(n,i,Nr);if(!o)throw new Error("Tweaked point at infinity");return o.toRawBytes(r)},pointMultiply:(t,e,r)=>{const n=zr.fromHex(t),i=sn(an(e));return n.multiply(i).toRawBytes(r)},hashToPrivateKey:t=>{if(t=an(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=cn(sn(t),Fr.n-Nr)+Nr;return en(e)},randomBytes:(t=32)=>{if(Ln.web)return Ln.web.getRandomValues(new Uint8Array(t));if(Ln.node){const{randomBytes:e}=Ln.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>jn.hashToPrivateKey(jn.randomBytes(40)),bytesToHex:Qr,hexToBytes:on,concatBytes:Jr,mod:cn,invert:fn,sha256:async(...t)=>{if(Ln.web){const e=await Ln.web.subtle.digest("SHA-256",Jr(...t));return new Uint8Array(e)}if(Ln.node){const{createHash:e}=Ln.node,r=e("sha256");return t.forEach((t=>r.update(t))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Ln.web){const r=await Ln.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Jr(...e),i=await Ln.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(Ln.node){const{createHmac:r}=Ln.node,n=r("sha256",t);return e.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=Un[t];if(void 0===r){const e=await jn.sha256(Uint8Array.from(t,(t=>t.charCodeAt(0))));r=Jr(e,e),Un[t]=r}return jn.sha256(r,...e)},taggedHashSync:(t,...e)=>{if("function"!==typeof jn.sha256Sync)throw new Error("utils.sha256Sync is undefined, you need to set it");let r=Un[t];if(void 0===r){const e=jn.sha256Sync(Uint8Array.from(t,(t=>t.charCodeAt(0))));r=Jr(e,e),Un[t]=r}return jn.sha256Sync(r,...e)},precompute(t=8,e=zr.BASE){const r=e===zr.BASE?e:new zr(e.x,e.y);return r._setWindowSize(t),r.multiply(Lr),r}};class Fn{constructor(t){if(!t.ecdsaCompact)throw new Error("invalid signature");if(64!==t.ecdsaCompact.bytes.length)throw new Error(`invalid signature length: ${t.ecdsaCompact.bytes.length}`);if(this.ecdsaCompact=t.ecdsaCompact,0!==t.ecdsaCompact.recovery&&1!==t.ecdsaCompact.recovery)throw new Error(`invalid recovery bit: ${t.ecdsaCompact.recovery}`);this.ecdsaCompact.recovery=t.ecdsaCompact.recovery}getPublicKey(t){if(!this.ecdsaCompact)throw new Error("invalid signature");const e=Tn(t,this.ecdsaCompact.bytes,this.ecdsaCompact.recovery);return e?new ti({secp256k1Uncompressed:{bytes:e},timestamp:0}):void 0}toBytes(){return ze.encode(this).finish()}static fromBytes(t){return new Fn(ze.decode(t))}}var Kn=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const $n="undefined"!==typeof window?window.crypto:r(59821).webcrypto,qn=new ArrayBuffer(0);function Hn(t){return Kn(this,void 0,void 0,(function*(){return new Uint8Array(yield $n.subtle.digest("SHA-256",t))}))}function zn(t,e,r){return Kn(this,void 0,void 0,(function*(){const n=$n.getRandomValues(new Uint8Array(Mr)),i=$n.getRandomValues(new Uint8Array(kr)),o=yield Wn(e,n),s=yield $n.subtle.encrypt(Gn(i,r),o,t);return new Or({aes256GcmHkdfSha256:{payload:new Uint8Array(s),hkdfSalt:n,gcmNonce:i}})}))}function Vn(t,e,r){return Kn(this,void 0,void 0,(function*(){if(!t.aes256GcmHkdfSha256)throw new Error("invalid payload ciphertext");const n=yield Wn(e,t.aes256GcmHkdfSha256.hkdfSalt),i=yield $n.subtle.decrypt(Gn(t.aes256GcmHkdfSha256.gcmNonce,r),n,t.aes256GcmHkdfSha256.payload);return new Uint8Array(i)}))}function Gn(t,e){const r={name:"AES-GCM",iv:t};return e&&(r.additionalData=e),r}function Wn(t,e){return Kn(this,void 0,void 0,(function*(){const r=yield $n.subtle.importKey("raw",t,"HKDF",!1,["deriveKey"]);return $n.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:e,info:qn},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}))}function Yn(t){return $n.getRandomValues(t)}const Jn=jn.bytesToHex;function Zn(t){t.startsWith("0x")&&(t=t.slice(2));const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}var Xn=r(16343),Qn=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class ti{constructor(t){var e;if(!(null===(e=null===t||void 0===t?void 0:t.secp256k1Uncompressed)||void 0===e?void 0:e.bytes))throw new Error("invalid public key");if(65!==t.secp256k1Uncompressed.bytes.length)throw new Error(`invalid public key length: ${t.secp256k1Uncompressed.bytes.length}`);if(4!==t.secp256k1Uncompressed.bytes[0])throw new Error(`unrecognized public key prefix: ${t.secp256k1Uncompressed.bytes[0]}`);this.timestamp=t.timestamp,this.secp256k1Uncompressed=t.secp256k1Uncompressed,t.signature&&(this.signature=new Fn(t.signature))}generated(){if(this.timestamp)return new Date(this.timestamp)}verify(t,e){return!!this.secp256k1Uncompressed&&(!!t.ecdsaCompact&&Dn(t.ecdsaCompact.bytes,e,this.secp256k1Uncompressed.bytes))}bytesToSign(){return Ye.encode({timestamp:this.timestamp,secp256k1Uncompressed:this.secp256k1Uncompressed}).finish()}identitySigRequestText(){return`XMTP : Create Identity\n${Jn(this.bytesToSign())}\n\nFor more info: https://xmtp.org/signatures/`}verifyKey(t){return Qn(this,void 0,void 0,(function*(){if(void 0===typeof t.signature)return!1;if(!t.secp256k1Uncompressed)return!1;const e=yield Hn(t.bytesToSign());return!!t.signature&&this.verify(t.signature,e)}))}signWithWallet(t){return Qn(this,void 0,void 0,(function*(){if(!this.secp256k1Uncompressed)throw new Error("missing public key");const e=yield t.signMessage(this.identitySigRequestText()),r=m.N(e),n=Zn(r.r),i=Zn(r.s),o=new Uint8Array(64);o.set(n),o.set(i,n.length),this.signature=new Fn({ecdsaCompact:{bytes:o,recovery:r.recoveryParam}})}))}walletSignatureAddress(){if(!this.signature)throw new Error("key is not signed");if(!this.secp256k1Uncompressed)throw new Error("missing public key");const t=Zn(Xn.r(this.identitySigRequestText())),e=this.signature.getPublicKey(t);if(!e)throw new Error("key signature is malformed");return e.getEthereumAddress()}getEthereumAddress(){if(!this.secp256k1Uncompressed)throw new Error("missing public key");return F.db(this.secp256k1Uncompressed.bytes)}equals(t){if(!this.secp256k1Uncompressed||!t.secp256k1Uncompressed)return!this.secp256k1Uncompressed&&!t.secp256k1Uncompressed;for(let e=0;e<this.secp256k1Uncompressed.bytes.length;e++)if(this.secp256k1Uncompressed.bytes[e]!==t.secp256k1Uncompressed.bytes[e])return!1;return!0}toBytes(){return Ye.encode(this).finish()}static fromBytes(t){return new ti(Ye.decode(t))}}class ei{constructor(t,e){if(!t)throw new Error("missing identity key");if(!e)throw new Error("missing pre-key");this.identityKey=t,this.preKey=e}walletSignatureAddress(){return this.identityKey.walletSignatureAddress()}toBytes(){return Qe.encode(this).finish()}static fromBytes(t){const e=Qe.decode(t);if(!e.identityKey)throw new Error("missing identity key");if(!e.preKey)throw new Error("missing pre-key");return new ei(new ti(e.identityKey),new ti(e.preKey))}}function ri(){return{timestamp:0,secp256k1:void 0,publicKey:void 0}}const ni={encode(t,e=Fe().Writer.create()){return 0!==t.timestamp&&e.uint32(8).uint64(t.timestamp),void 0!==t.secp256k1&&oi.encode(t.secp256k1,e.uint32(18).fork()).ldelim(),void 0!==t.publicKey&&Ye.encode(t.publicKey,e.uint32(26).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=ri();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.timestamp=wi(r.uint64());break;case 2:i.secp256k1=oi.decode(r,r.uint32());break;case 3:i.publicKey=Ye.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{timestamp:vi(t.timestamp)?Number(t.timestamp):0,secp256k1:vi(t.secp256k1)?oi.fromJSON(t.secp256k1):void 0,publicKey:vi(t.publicKey)?Ye.fromJSON(t.publicKey):void 0}},toJSON(t){const e={};return void 0!==t.timestamp&&(e.timestamp=Math.round(t.timestamp)),void 0!==t.secp256k1&&(e.secp256k1=t.secp256k1?oi.toJSON(t.secp256k1):void 0),void 0!==t.publicKey&&(e.publicKey=t.publicKey?Ye.toJSON(t.publicKey):void 0),e},fromPartial(t){var e;const r=ri();return r.timestamp=null!==(e=t.timestamp)&&void 0!==e?e:0,r.secp256k1=void 0!==t.secp256k1&&null!==t.secp256k1?oi.fromPartial(t.secp256k1):void 0,r.publicKey=void 0!==t.publicKey&&null!==t.publicKey?Ye.fromPartial(t.publicKey):void 0,r}};function ii(){return{bytes:new Uint8Array}}const oi={encode(t,e=Fe().Writer.create()){return 0!==t.bytes.length&&e.uint32(10).bytes(t.bytes),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=ii();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.bytes=r.bytes();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{bytes:vi(t.bytes)?gi(t.bytes):new Uint8Array}},toJSON(t){const e={};return void 0!==t.bytes&&(e.bytes=bi(void 0!==t.bytes?t.bytes:new Uint8Array)),e},fromPartial(t){var e;const r=ii();return r.bytes=null!==(e=t.bytes)&&void 0!==e?e:new Uint8Array,r}};function si(){return{identityKey:void 0,preKeys:[]}}const ai={encode(t,e=Fe().Writer.create()){void 0!==t.identityKey&&ni.encode(t.identityKey,e.uint32(10).fork()).ldelim();for(const r of t.preKeys)ni.encode(r,e.uint32(18).fork()).ldelim();return e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=si();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.identityKey=ni.decode(r,r.uint32());break;case 2:i.preKeys.push(ni.decode(r,r.uint32()));break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{identityKey:vi(t.identityKey)?ni.fromJSON(t.identityKey):void 0,preKeys:Array.isArray(null===t||void 0===t?void 0:t.preKeys)?t.preKeys.map((t=>ni.fromJSON(t))):[]}},toJSON(t){const e={};return void 0!==t.identityKey&&(e.identityKey=t.identityKey?ni.toJSON(t.identityKey):void 0),t.preKeys?e.preKeys=t.preKeys.map((t=>t?ni.toJSON(t):void 0)):e.preKeys=[],e},fromPartial(t){var e;const r=si();return r.identityKey=void 0!==t.identityKey&&null!==t.identityKey?ni.fromPartial(t.identityKey):void 0,r.preKeys=(null===(e=t.preKeys)||void 0===e?void 0:e.map((t=>ni.fromPartial(t))))||[],r}};function ui(){return{v1:void 0}}const ci={encode(t,e=Fe().Writer.create()){return void 0!==t.v1&&ai.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=ui();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.v1=ai.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{v1:vi(t.v1)?ai.fromJSON(t.v1):void 0}},toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?ai.toJSON(t.v1):void 0),e},fromPartial(t){const e=ui();return e.v1=void 0!==t.v1&&null!==t.v1?ai.fromPartial(t.v1):void 0,e}};function hi(){return{walletPreKey:new Uint8Array,ciphertext:void 0}}const li={encode(t,e=Fe().Writer.create()){return 0!==t.walletPreKey.length&&e.uint32(10).bytes(t.walletPreKey),void 0!==t.ciphertext&&lr.encode(t.ciphertext,e.uint32(18).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=hi();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.walletPreKey=r.bytes();break;case 2:i.ciphertext=lr.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{walletPreKey:vi(t.walletPreKey)?gi(t.walletPreKey):new Uint8Array,ciphertext:vi(t.ciphertext)?lr.fromJSON(t.ciphertext):void 0}},toJSON(t){const e={};return void 0!==t.walletPreKey&&(e.walletPreKey=bi(void 0!==t.walletPreKey?t.walletPreKey:new Uint8Array)),void 0!==t.ciphertext&&(e.ciphertext=t.ciphertext?lr.toJSON(t.ciphertext):void 0),e},fromPartial(t){var e;const r=hi();return r.walletPreKey=null!==(e=t.walletPreKey)&&void 0!==e?e:new Uint8Array,r.ciphertext=void 0!==t.ciphertext&&null!==t.ciphertext?lr.fromPartial(t.ciphertext):void 0,r}};function fi(){return{v1:void 0}}const di={encode(t,e=Fe().Writer.create()){return void 0!==t.v1&&li.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=fi();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.v1=li.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{v1:vi(t.v1)?li.fromJSON(t.v1):void 0}},toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?li.toJSON(t.v1):void 0),e},fromPartial(t){const e=fi();return e.v1=void 0!==t.v1&&null!==t.v1?li.fromPartial(t.v1):void 0,e}};var pi=(()=>{if("undefined"!==typeof pi)return pi;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw"Unable to locate global object"})();const yi=pi.atob||(t=>pi.Buffer.from(t,"base64").toString("binary"));function gi(t){const e=yi(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const mi=pi.btoa||(t=>pi.Buffer.from(t,"binary").toString("base64"));function bi(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return mi(e.join(""))}function wi(t){if(t.gt(Number.MAX_SAFE_INTEGER))throw new pi.Error("Value is larger than Number.MAX_SAFE_INTEGER");return t.toNumber()}function vi(t){return null!==t&&void 0!==t}Fe().util.Long!==Ue()&&(Fe().util.Long=Ue(),Fe().configure());var _i=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class Ei{constructor(t){if(!t.secp256k1)throw new Error("invalid private key");if(32!==t.secp256k1.bytes.length)throw new Error(`invalid private key length: ${t.secp256k1.bytes.length}`);if(this.timestamp=t.timestamp,this.secp256k1=t.secp256k1,!t.publicKey)throw new Error("missing public key");this.publicKey=new ti(t.publicKey)}static generate(){const t={bytes:jn.randomPrivateKey()},e=(new Date).getTime();return new Ei({secp256k1:t,timestamp:e,publicKey:new ti({secp256k1Uncompressed:{bytes:In(t.bytes)},timestamp:e})})}generated(){if(this.timestamp)return new Date(this.timestamp)}sign(t){return _i(this,void 0,void 0,(function*(){if(!this.secp256k1)throw new Error("invalid private key");const[e,r]=yield xn(t,this.secp256k1.bytes,{recovered:!0,der:!1});return new Fn({ecdsaCompact:{bytes:e,recovery:r}})}))}signKey(t){return _i(this,void 0,void 0,(function*(){if(!t.secp256k1Uncompressed)throw new Error("invalid public key");const e=yield Hn(t.bytesToSign());return t.signature=yield this.sign(e),t}))}sharedSecret(t){if(!t.secp256k1Uncompressed)throw new Error("invalid public key");if(!this.secp256k1)throw new Error("invalid private key");return Mn(this.secp256k1.bytes,t.secp256k1Uncompressed.bytes,!1)}encrypt(t,e,r){const n=this.sharedSecret(e);return zn(t,n,r)}decrypt(t,e,r){const n=this.sharedSecret(e);return Vn(t,n,r)}matches(t){return this.publicKey.equals(t)}toBytes(){return ni.encode(this).finish()}static fromBytes(t){return new Ei(ni.decode(t))}}class Si extends Error{constructor(){super("no matching pre-key")}}var Ai=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class Ii{constructor(t,e){this.identityKey=t,this.preKeys=e||[]}static generate(t){return Ai(this,void 0,void 0,(function*(){const e=Ei.generate();t&&(yield e.publicKey.signWithWallet(t));const r=new Ii(e);return yield r.addPreKey(),r}))}getCurrentPreKey(){return this.preKeys[0]}findPreKey(t){const e=this.preKeys.find((e=>e.matches(t)));if(!e)throw new Si;return e}addPreKey(){return Ai(this,void 0,void 0,(function*(){const t=Ei.generate();yield this.identityKey.signKey(t.publicKey),this.preKeys.unshift(t)}))}getPublicKeyBundle(){return new ei(this.identityKey.publicKey,this.getCurrentPreKey().publicKey)}sharedSecret(t,e,r){return Ai(this,void 0,void 0,(function*(){if(!t.identityKey||!t.preKey)throw new Error("invalid peer key bundle");if(!(yield t.identityKey.verifyKey(t.preKey)))throw new Error("peer preKey signature invalid");if(!this.identityKey)throw new Error("missing identity key");let n,i,o;r?(o=this.findPreKey(e),n=o.sharedSecret(t.identityKey),i=this.identityKey.sharedSecret(t.preKey)):(o=this.findPreKey(e),n=this.identityKey.sharedSecret(t.preKey),i=o.sharedSecret(t.identityKey));const s=o.sharedSecret(t.preKey),a=new Uint8Array(n.length+i.length+s.length);return a.set(n,0),a.set(i,n.length),a.set(s,n.length+i.length),a}))}static storageSigRequestText(t){return`XMTP : Enable Identity\n${Jn(t)}\n\nFor more info: https://xmtp.org/signatures/`}encode(t){return Ai(this,void 0,void 0,(function*(){if(0===this.preKeys.length)throw new Error("missing pre-keys");if(!this.identityKey)throw new Error("missing identity key");const e=ci.encode({v1:{identityKey:this.identityKey,preKeys:this.preKeys}}).finish(),r=Yn(new Uint8Array(32)),n=Zn(yield t.signMessage(Ii.storageSigRequestText(r))),i=yield zn(e,n);return di.encode({v1:{walletPreKey:r,ciphertext:i}}).finish()}))}static decode(t,e){var r;return Ai(this,void 0,void 0,(function*(){const[n,i]=Ri(e);if(!n)throw new Error("invalid bundle version");if(!n.walletPreKey)throw new Error("missing wallet pre-key");const o=Zn(yield t.signMessage(Ii.storageSigRequestText(n.walletPreKey)));if(!(null===(r=null===n||void 0===n?void 0:n.ciphertext)||void 0===r?void 0:r.aes256GcmHkdfSha256))throw new Error("missing bundle ciphertext");const s=new Or(n.ciphertext),a=yield Vn(s,o),[u,c]=Mi(a);if(!u)throw new Error("could not decode bundle");if(!u.identityKey)throw new Error("missing identity key");if(0===u.preKeys.length)throw new Error("missing pre-keys");const h=new Ii(new Ei(u.identityKey),u.preKeys.map((t=>new Ei(t))));if(i||c)throw new Ti(h);return h}))}}class Ti extends Error{constructor(t){super("BundleFormatIsOutdated"),this.bundle=t}}function Ri(t){try{const e=di.decode(t);return[e.v1,!1]}catch(e){if(e instanceof RangeError||e instanceof Error&&e.message.startsWith("invalid wire type"))return[li.decode(t),!0];throw new Error("Couldn't decode encrypted bundle:"+e)}}function Mi(t){try{const e=ci.decode(t);return[e.v1,!1]}catch(e){if(e instanceof RangeError||e instanceof Error&&e.message.startsWith("invalid wire type"))return[ai.decode(t),!0];throw new Error("Couldn't decode private bundle:"+e)}}var ki=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const Ci=t=>{if(!t.v1)throw new Error("Message is not of type v1");return t.v1};class Oi{constructor(t,e,r,n){const i=Ci(r);if(this.id=t,this.bytes=e,this.headerBytes=i.headerBytes,this.header=n,!i.ciphertext)throw new Error("missing message ciphertext");this.ciphertext=new Or(i.ciphertext)}toBytes(){return this.bytes}static create(t,e,r){return ki(this,void 0,void 0,(function*(){const n=Jn(yield Hn(r));return new Oi(n,r,t,e)}))}static fromBytes(t){return ki(this,void 0,void 0,(function*(){const e=wr.decode(t),r=Ci(e),n=yr.decode(r.headerBytes);return Oi.create(e,n,t)}))}get sent(){var t;return this.header?new Date(null===(t=this.header)||void 0===t?void 0:t.timestamp):void 0}get senderAddress(){var t,e;if(null===(e=null===(t=this.header)||void 0===t?void 0:t.sender)||void 0===e?void 0:e.identityKey)return new ti(this.header.sender.identityKey).walletSignatureAddress()}get recipientAddress(){var t,e;if(null===(e=null===(t=this.header)||void 0===t?void 0:t.recipient)||void 0===e?void 0:e.identityKey)return new ti(this.header.recipient.identityKey).walletSignatureAddress()}static encode(t,e,r,n){return ki(this,void 0,void 0,(function*(){const i=yield t.sharedSecret(e,t.getCurrentPreKey().publicKey,!1),o={sender:t.getPublicKeyBundle(),recipient:e,timestamp:n.getTime()},s=yr.encode(o).finish(),a=yield zn(r,i,s),u={v1:{headerBytes:s,ciphertext:a}},c=wr.encode(u).finish(),h=yield Oi.create(u,o,c);return h.decrypted=r,h}))}static decode(t,e){var r;return ki(this,void 0,void 0,(function*(){const n=wr.decode(e),i=Ci(n),o=yr.decode(i.headerBytes);if(!o)throw new Error("missing message header");if(!o.sender)throw new Error("missing message sender");if(!o.sender.identityKey)throw new Error("missing message sender identity key");if(!o.sender.preKey)throw new Error("missing message sender pre-key");if(!o.recipient)throw new Error("missing message recipient");if(!o.recipient.identityKey)throw new Error("missing message recipient identity-key");if(!o.recipient.preKey)throw new Error("missing message recipient pre-key");const s=new ei(new ti(o.recipient.identityKey),new ti(o.recipient.preKey)),a=new ei(new ti(o.sender.identityKey),new ti(o.sender.preKey));if(!(null===(r=i.ciphertext)||void 0===r?void 0:r.aes256GcmHkdfSha256))throw new Error("missing message ciphertext");const u=new Or(i.ciphertext),c=yield Oi.create(n,o,e);let h;try{h=t.identityKey.matches(a.identityKey)?yield t.sharedSecret(s,a.preKey,!1):yield t.sharedSecret(a,s.preKey,!0)}catch(l){if(!(l instanceof Si))throw l;return c.error=l,c}return c.decrypted=yield Vn(u,h,i.headerBytes),c}))}}var Pi=r(36912);class Bi{constructor(t){if(!t)throw new Error("missing keyBundle");this.keyBundle=t}toBytes(){return nr.encode({v1:{keyBundle:this.keyBundle}}).finish()}static fromBytes(t){const e=this.decodeV1(t);if(!e)throw new Error("could not parse bundle");if(!e.identityKey)throw new Error("missing keyBundle");if(!e.preKey)throw new Error("missing pre-key");return new Bi(new ei(new ti(e.identityKey),new ti(e.preKey)))}static decodeV1(t){var e;try{const r=nr.decode(t);return null===(e=r.v1)||void 0===e?void 0:e.keyBundle}catch(r){if(r instanceof RangeError||r instanceof Error&&r.message.startsWith("invalid wire type"))try{return Qe.decode(t)}catch(r){throw new Error("Couldn't decode contact bundle: "+r)}}}}const xi=t=>`/xmtp/0/${t}/proto`,Ni=(t,e)=>{const r=[t,e];return r.sort(),xi(`dm-${r.join("-")}`)},Di=t=>xi(`contact-${t}`),Li=t=>xi(`intro-${t}`),Ui=t=>xi(`privatestore-${t}`),ji=t=>new Promise((e=>setTimeout(e,t))),Fi=(t,e,r)=>{let n;const i=new Promise(((e,i)=>{n=setTimeout((()=>i(new Error(r))),t)}));return Promise.race([e(),i]).then((t=>(clearTimeout(n),t)))};var Ki=r(15941),$i=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const qi=1e3;class Hi{constructor(t,e,r,n){this.messages=[],this.resolvers=[],this.topic=e,this.client=t,this.callback=this.newMessageCallback(r,n)}newMessageCallback(t,e){return r=>$i(this,void 0,void 0,(function*(){if(!r.payload)return;const n=yield this.client.decodeMessage(r.payload);if(e&&!e(n))return;const i=this.resolvers.pop();i?i({value:t(n)}):this.messages.unshift(t(n))}))}start(){return $i(this,void 0,void 0,(function*(){if(!this.callback)throw new Error("Missing callback for stream");this.unsubscribeFn=yield this.client.waku.filter.subscribe(this.callback,[this.topic]),yield this.listenForDisconnect()}))}listenForDisconnect(){return $i(this,void 0,void 0,(function*(){const t=yield this.client.waku.filter.randomPeer;this._disconnectCallback=e=>$i(this,void 0,void 0,(function*(){var r;if(e.remotePeer.toB58String()===(null===(r=null===t||void 0===t?void 0:t.id)||void 0===r?void 0:r.toB58String())){Ki.log(`Connection to peer ${e.remoteAddr} lost`);while(1)try{if(!this.callback)return;return this.unsubscribeFn=yield this.client.waku.filter.subscribe(this.callback,[this.topic]),void Ki.log(`Connection to peer ${e.remoteAddr} restored`)}catch(n){Ki.warn(`Error reconnecting to ${e.remoteAddr}`),yield ji(qi)}}})),this.client.waku.libp2p.connectionManager.on("peer:disconnect",this._disconnectCallback)}))}static create(t,e,r,n){return $i(this,void 0,void 0,(function*(){const i=new Hi(t,e,r,n);return yield i.start(),i}))}[Symbol.asyncIterator](){return this}return(){return $i(this,void 0,void 0,(function*(){return this._disconnectCallback&&this.client.waku.libp2p.connectionManager.off("peer:disconnect",this._disconnectCallback),this.callback?(this.unsubscribeFn&&(yield this.unsubscribeFn()),this.callback=void 0,this.resolvers.forEach((t=>t({value:void 0,done:!0}))),{value:void 0,done:!0}):{value:void 0,done:!0}}))}next(){const t=this.messages.pop();return t?Promise.resolve({value:t}):this.callback?new Promise((t=>this.resolvers.unshift(t))):Promise.resolve({value:void 0,done:!0})}}var zi=r(76037),Vi=r.n(zi);r(75130);const Gi=t=>new Promise((e=>setTimeout(e,t)));r(31866);var Wi=r(13374)["Buffer"],Yi=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const Ji="/xmtp/",Zi="binary";class Xi{constructor(t=Ji){this.keyPrefix=t}get(t){return Yi(this,void 0,void 0,(function*(){const e=localStorage.getItem(this.keyPrefix+t);return null===e?null:Wi.from(e,Zi)}))}set(t,e){return Yi(this,void 0,void 0,(function*(){return localStorage.setItem(this.keyPrefix+t,e.toString(Zi))}))}}var Qi=r(13374)["Buffer"],to=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const eo="key_bundle";class ro{constructor(t,e){this.signer=t,this.store=e}getStorageAddress(t){return to(this,void 0,void 0,(function*(){const e=yield this.signer.getAddress();return`${e}/${t}`}))}loadPrivateKeyBundle(){return to(this,void 0,void 0,(function*(){const t=yield this.store.get(yield this.getStorageAddress(eo));if(!t)return null;try{return yield Ii.decode(this.signer,Uint8Array.from(t))}catch(e){if(e instanceof Ti){const t=e.bundle;return yield this.storePrivateKeyBundle(t),t}throw e}}))}storePrivateKeyBundle(t){return to(this,void 0,void 0,(function*(){const e=yield this.getStorageAddress(eo),r=yield t.encode(this.signer);yield this.store.set(e,Qi.from(r))}))}}var no=r(13374)["Buffer"],io=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class oo{constructor(t){this.waku=t}get(t){return io(this,void 0,void 0,(function*(){const e=(yield this.waku.store.queryHistory([Ui(t)],{pageSize:1,pageDirection:Pi.PageDirection.BACKWARD,callback:function(t){return Boolean(t[0].payload)}})).filter((t=>t.payload)).map((t=>t.payload));return e.length>0?no.from(e[0]):null}))}set(t,e){return io(this,void 0,void 0,(function*(){const r=Uint8Array.from(e);yield this.waku.lightPush.push(yield Pi.WakuMessage.fromBytes(r,this.buildTopic(t)))}))}buildTopic(t){return Ui(t)}}var so=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class ao{constructor(t,e){this.peerAddress=e,this.client=t}messages(t){return so(this,void 0,void 0,(function*(){return this.client.listConversationMessages(this.peerAddress,t)}))}streamMessages(){return this.client.streamConversationMessages(this.peerAddress)}send(t,e){return so(this,void 0,void 0,(function*(){yield this.client.sendMessage(this.peerAddress,t,e)}))}}var uo=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const co=t=>Boolean(t.recipientAddress&&t.senderAddress);class ho{constructor(t){this.client=t}list(){return uo(this,void 0,void 0,(function*(){const t=yield this.client.listIntroductionMessages(),e=new Set;for(const r of t){if(!co(r))continue;const t=this.getPeerAddress(r);t&&e.add(t)}return Array.from(e).sort().map((t=>new ao(this.client,t)))}))}stream(){const t=t=>{const e=this.getPeerAddress(t);return new ao(this.client,e)},e=new Set,r=t=>{if(!co(t))return!1;const r=this.getPeerAddress(t);return!e.has(r)&&(e.add(r),!0)};return Hi.create(this.client,Li(this.client.address),t,r)}newConversation(t){return uo(this,void 0,void 0,(function*(){const e=yield this.client.getUserContact(t);if(!e)throw new Error(`Recipient ${t} is not on the XMTP network`);return new ao(this.client,t)}))}getPeerAddress(t){const e=t.recipientAddress===this.client.address?t.senderAddress:t.recipientAddress;return e}}r(26699);("object"!==typeof window||"object"!==typeof navigator||navigator.userAgent.includes("jsdom"))&&r(14937);class lo{constructor(t){this.authorityId=t.authorityId,this.typeId=t.typeId,this.versionMajor=t.versionMajor,this.versionMinor=t.versionMinor}toString(){return`${this.authorityId}/${this.typeId}:${this.versionMajor}.${this.versionMinor}`}sameAs(t){return this.authorityId===t.authorityId&&this.typeId===t.typeId}}const fo=new lo({authorityId:"xmtp.org",typeId:"fallback",versionMajor:1,versionMinor:0}),po=new lo({authorityId:"xmtp.org",typeId:"text",versionMajor:1,versionMinor:0});var yo;(function(t){t["utf8"]="UTF-8"})(yo||(yo={}));class go{get contentType(){return po}encode(t){return{type:po,parameters:{encoding:yo.utf8},content:(new TextEncoder).encode(t)}}decode(t){const e=t.parameters.encoding;if(e&&e!==yo.utf8)throw new Error(`unrecognized encoding ${e}`);return(new TextDecoder).decode(t.content)}}var mo=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};function bo(t,e){return mo(this,void 0,void 0,(function*(){if(void 0===t.compression)return;const r={bytes:new Uint8Array(t.content.length)};yield _o(t.content).pipeThrough(new DecompressionStream(vo(t.compression))).pipeTo(Eo(r,e)),t.content=r.bytes}))}function wo(t){return mo(this,void 0,void 0,(function*(){if(void 0===t.compression)return;const e={bytes:new Uint8Array(t.content.length/10)};yield _o(t.content).pipeThrough(new CompressionStream(vo(t.compression))).pipeTo(Eo(e,t.content.length+1e3)),t.content=e.bytes}))}function vo(t){if(t===Ke.gzip)return"gzip";if(t===Ke.deflate)return"deflate";throw new Error("unrecognized compression algorithm")}function _o(t,e=1024){let r=0;return new ReadableStream({pull(n){if(r>=t.length)return n.close();let i=r+e;i=i<=t.length?i:t.length,n.enqueue(t.subarray(r,i)),r=i}})}function Eo(t,e){let r=0;return new WritableStream({write(n){const i=r+n.length;if(i>e)throw new Error("maximum output size exceeded");while(t.bytes.length<i)t.bytes=So(t.bytes,e);t.bytes.set(n,r),r=i},close(){r<t.bytes.length&&(t.bytes=t.bytes.subarray(0,r))}})}function So(t,e){let r=2*t.length;r>e&&(r=e);const n=new Uint8Array(r);return n.set(t),n}var Ao=r(69893);function Io(){return{identityKeyBytes:new Uint8Array,walletSignature:void 0,authnDataBytes:new Uint8Array,authnSignature:void 0}}const To={encode(t,e=Fe().Writer.create()){return 0!==t.identityKeyBytes.length&&e.uint32(10).bytes(t.identityKeyBytes),void 0!==t.walletSignature&&ze.encode(t.walletSignature,e.uint32(18).fork()).ldelim(),0!==t.authnDataBytes.length&&e.uint32(26).bytes(t.authnDataBytes),void 0!==t.authnSignature&&ze.encode(t.authnSignature,e.uint32(34).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=Io();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.identityKeyBytes=r.bytes();break;case 2:i.walletSignature=ze.decode(r,r.uint32());break;case 3:i.authnDataBytes=r.bytes();break;case 4:i.authnSignature=ze.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{identityKeyBytes:Ko(t.identityKeyBytes)?Lo(t.identityKeyBytes):new Uint8Array,walletSignature:Ko(t.walletSignature)?ze.fromJSON(t.walletSignature):void 0,authnDataBytes:Ko(t.authnDataBytes)?Lo(t.authnDataBytes):new Uint8Array,authnSignature:Ko(t.authnSignature)?ze.fromJSON(t.authnSignature):void 0}},toJSON(t){const e={};return void 0!==t.identityKeyBytes&&(e.identityKeyBytes=jo(void 0!==t.identityKeyBytes?t.identityKeyBytes:new Uint8Array)),void 0!==t.walletSignature&&(e.walletSignature=t.walletSignature?ze.toJSON(t.walletSignature):void 0),void 0!==t.authnDataBytes&&(e.authnDataBytes=jo(void 0!==t.authnDataBytes?t.authnDataBytes:new Uint8Array)),void 0!==t.authnSignature&&(e.authnSignature=t.authnSignature?ze.toJSON(t.authnSignature):void 0),e},fromPartial(t){var e,r;const n=Io();return n.identityKeyBytes=null!==(e=t.identityKeyBytes)&&void 0!==e?e:new Uint8Array,n.walletSignature=void 0!==t.walletSignature&&null!==t.walletSignature?ze.fromPartial(t.walletSignature):void 0,n.authnDataBytes=null!==(r=t.authnDataBytes)&&void 0!==r?r:new Uint8Array,n.authnSignature=void 0!==t.authnSignature&&null!==t.authnSignature?ze.fromPartial(t.authnSignature):void 0,n}};function Ro(){return{v1:void 0}}const Mo={encode(t,e=Fe().Writer.create()){return void 0!==t.v1&&To.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=Ro();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.v1=To.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{v1:Ko(t.v1)?To.fromJSON(t.v1):void 0}},toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?To.toJSON(t.v1):void 0),e},fromPartial(t){const e=Ro();return e.v1=void 0!==t.v1&&null!==t.v1?To.fromPartial(t.v1):void 0,e}};function ko(){return{authnSuccessful:!1,errorStr:""}}const Co={encode(t,e=Fe().Writer.create()){return!0===t.authnSuccessful&&e.uint32(8).bool(t.authnSuccessful),""!==t.errorStr&&e.uint32(18).string(t.errorStr),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=ko();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.authnSuccessful=r.bool();break;case 2:i.errorStr=r.string();break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{authnSuccessful:!!Ko(t.authnSuccessful)&&Boolean(t.authnSuccessful),errorStr:Ko(t.errorStr)?String(t.errorStr):""}},toJSON(t){const e={};return void 0!==t.authnSuccessful&&(e.authnSuccessful=t.authnSuccessful),void 0!==t.errorStr&&(e.errorStr=t.errorStr),e},fromPartial(t){var e,r;const n=ko();return n.authnSuccessful=null!==(e=t.authnSuccessful)&&void 0!==e&&e,n.errorStr=null!==(r=t.errorStr)&&void 0!==r?r:"",n}};function Oo(){return{v1:void 0}}const Po={encode(t,e=Fe().Writer.create()){return void 0!==t.v1&&Co.encode(t.v1,e.uint32(10).fork()).ldelim(),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=Oo();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.v1=Co.decode(r,r.uint32());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{v1:Ko(t.v1)?Co.fromJSON(t.v1):void 0}},toJSON(t){const e={};return void 0!==t.v1&&(e.v1=t.v1?Co.toJSON(t.v1):void 0),e},fromPartial(t){const e=Oo();return e.v1=void 0!==t.v1&&null!==t.v1?Co.fromPartial(t.v1):void 0,e}};function Bo(){return{walletAddr:"",peerId:"",timestamp:0}}const xo={encode(t,e=Fe().Writer.create()){return""!==t.walletAddr&&e.uint32(10).string(t.walletAddr),""!==t.peerId&&e.uint32(18).string(t.peerId),0!==t.timestamp&&e.uint32(24).uint64(t.timestamp),e},decode(t,e){const r=t instanceof Fe().Reader?t:new(Fe().Reader)(t);let n=void 0===e?r.len:r.pos+e;const i=Bo();while(r.pos<n){const t=r.uint32();switch(t>>>3){case 1:i.walletAddr=r.string();break;case 2:i.peerId=r.string();break;case 3:i.timestamp=Fo(r.uint64());break;default:r.skipType(7&t);break}}return i},fromJSON(t){return{walletAddr:Ko(t.walletAddr)?String(t.walletAddr):"",peerId:Ko(t.peerId)?String(t.peerId):"",timestamp:Ko(t.timestamp)?Number(t.timestamp):0}},toJSON(t){const e={};return void 0!==t.walletAddr&&(e.walletAddr=t.walletAddr),void 0!==t.peerId&&(e.peerId=t.peerId),void 0!==t.timestamp&&(e.timestamp=Math.round(t.timestamp)),e},fromPartial(t){var e,r,n;const i=Bo();return i.walletAddr=null!==(e=t.walletAddr)&&void 0!==e?e:"",i.peerId=null!==(r=t.peerId)&&void 0!==r?r:"",i.timestamp=null!==(n=t.timestamp)&&void 0!==n?n:0,i}};var No=(()=>{if("undefined"!==typeof No)return No;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw"Unable to locate global object"})();const Do=No.atob||(t=>No.Buffer.from(t,"base64").toString("binary"));function Lo(t){const e=Do(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}const Uo=No.btoa||(t=>No.Buffer.from(t,"binary").toString("base64"));function jo(t){const e=[];for(const r of t)e.push(String.fromCharCode(r));return Uo(e.join(""))}function Fo(t){if(t.gt(Number.MAX_SAFE_INTEGER))throw new No.Error("Value is larger than Number.MAX_SAFE_INTEGER");return t.toNumber()}function Ko(t){return null!==t&&void 0!==t}Fe().util.Long!==Ue()&&(Fe().util.Long=Ue(),Fe().configure());class $o{constructor(t){this.proto=t,this.proto=t}static create(t,e,r){return r=r||new Date,new $o({walletAddr:t,peerId:e,timestamp:r.getTime()})}static decode(t){const e=xo.decode(je.Reader.create(t));return new $o(e)}encode(){return xo.encode(this.proto).finish()}}var qo=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class Ho{constructor(t){this.proto=t,this.proto=t}static create(t,e){return qo(this,void 0,void 0,(function*(){if(!t.publicKey.signature)throw new Error("no signature");const r=$o.create(t.publicKey.walletSignatureAddress(),e,new Date),n=r.encode(),i=yield(0,Ao.keccak256)(n),o=yield t.sign(Zn(i));return new Ho({v1:{identityKeyBytes:t.publicKey.bytesToSign(),walletSignature:t.publicKey.signature,authnDataBytes:n,authnSignature:o}})}))}static decode(t){const e=Mo.decode(je.Reader.create(t));return new Ho(e)}encode(){return Mo.encode(this.proto).finish()}}var zo=r(9694),Vo=r.n(zo),Go=r(92992),Wo=r(62100);class Yo{constructor(t){this.proto=t,this.proto=t}static create(t,e){return new Yo({v1:{authnSuccessful:t,errorStr:e}})}static decode(t){const e=Po.decode(je.Reader.create(t));return new Yo(e)}encode(){return Po.encode(this.proto).finish()}isSuccess(){if(this.proto.v1)return this.proto.v1.authnSuccessful;throw new Error("unsupported response version")}getErrorStr(){if(this.proto.v1)return this.proto.v1.authnSuccessful?"":this.proto.v1.errorStr;throw new Error("unsupported response version")}}var Jo=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class Zo{}class Xo extends Zo{send(t,e){return Jo(this,void 0,void 0,(function*(){const r=yield(0,Wo.pipe)([e.encode()],Go.encode(),t,Go.decode(),Vo());return Yo.decode(r.slice())}))}}var Qo=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const ts="/xmtplabs/xmtp-v1/clientauthn/1.0.0";class es{constructor(t,e,r){this.authnState=new Map,this.identityKey=e,this.libp2p=t,this.walletAddress=e.publicKey.walletSignatureAddress(),this.sender=r}static create(t,e,r){const n=(null===r||void 0===r?void 0:r.sender)?r.sender:new Xo,i=new es(t,e,n);return i}hasAuthenticated(t){var e;return null!==(e=this.authnState.get(t.toB58String()))&&void 0!==e&&e}authenticate(t){return Qo(this,void 0,void 0,(function*(){const e=this.libp2p.peerId,r=yield Ho.create(this.identityKey,e.toB58String()),n=yield this.sendAuthnRequest(t,r),i=n.isSuccess();return this.authnState.set(t.toB58String(),i),Object.assign({isAuthenticated:i},!i&&{errorString:n.getErrorStr()})}))}sendAuthnRequest(t,e){return Qo(this,void 0,void 0,(function*(){const r=this.libp2p.connectionManager.get(t);if(!r)throw new Error("cannot authenticate without valid connection");const{stream:n}=yield r.newStream(ts),i=yield this.sender.send(n,e);return i}))}}var rs=r(15941),ns=function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):i(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const is="https://nodes.xmtp.com/",os=104857600;class ss extends Error{constructor(){super("Authentication Error"),Object.setPrototypeOf(this,ss.prototype)}}var as;function us(t){const e={keyStoreType:as.networkTopicStoreV1,env:"dev",waitForPeersTimeoutMs:1e4,codecs:[new go],maxContentSize:os};return(null===t||void 0===t?void 0:t.codecs)&&(t.codecs=e.codecs.concat(t.codecs)),Object.assign(Object.assign({},e),t)}(function(t){t[t["networkTopicStoreV1"]=0]="networkTopicStoreV1",t[t["localStorage"]=1]="localStorage"})(as||(as={}));class cs{constructor(t,e){this.waku=t,this.contacts=new Set,this.knownPublicKeyBundles=new Map,this.keys=e,this.address=e.identityKey.publicKey.walletSignatureAddress(),this._conversations=new ho(this),this._codecs=new Map,this._maxContentSize=os,this.authenticator=es.create(t.libp2p,e.identityKey),this._disconnectWatcher=this.createDisconnectWatcher()}get conversations(){return this._conversations}static create(t,e){return ns(this,void 0,void 0,(function*(){const r=us(e),n=yield ps(r),i=hs(r,t,n),o=yield ds(t,i),s=new cs(n,o);return yield s.init(r),s}))}init(t){return ns(this,void 0,void 0,(function*(){t.codecs.forEach((t=>{this.registerCodec(t)})),this._maxContentSize=t.maxContentSize,yield this.publishUserContact()}))}close(){return ns(this,void 0,void 0,(function*(){return clearInterval(this._disconnectWatcher),this.waku.stop()}))}publishUserContact(){return ns(this,void 0,void 0,(function*(){const t=this.keys.getPublicKeyBundle();yield this.sendWakuMessage(yield Pi.WakuMessage.fromBytes(t.toBytes(),Di(this.address)))}))}getUserContactFromNetwork(t){return ns(this,void 0,void 0,(function*(){let e=null;return yield this.waku.store.queryHistory([Di(t)],{pageSize:5,pageDirection:Pi.PageDirection.BACKWARD,callback:r=>{for(const n of r){if(!n.payload)continue;const r=Bi.fromBytes(n.payload),i=r.keyBundle,o=null===i||void 0===i?void 0:i.walletSignatureAddress();if(o===t){e=i;break}}return null!==e}}),null===e?void 0:e}))}getUserContact(t){return ns(this,void 0,void 0,(function*(){const e=this.knownPublicKeyBundles.get(t);if(e)return e;const r=yield this.getUserContactFromNetwork(t);return r&&this.knownPublicKeyBundles.set(t,r),r}))}canMessage(t){return ns(this,void 0,void 0,(function*(){const e=yield this.getUserContact(t);return void 0!==e}))}sendMessage(t,e,r){return ns(this,void 0,void 0,(function*(){let n;const i=yield this.getUserContact(t);if(!i)throw new Error(`recipient ${t} is not registered`);this.contacts.has(t)?n=[Ni(this.address,t)]:(n=[Li(t),Ni(this.address,t)],t!==this.address&&n.push(Li(this.address)),this.contacts.add(t));const o=(null===r||void 0===r?void 0:r.timestamp)||new Date,s=yield this.encodeMessage(i,o,e,r);yield Promise.all(n.map((t=>ns(this,void 0,void 0,(function*(){const e=yield Pi.WakuMessage.fromBytes(s.toBytes(),t,{timestamp:o});return this.sendWakuMessage(e)})))))}))}sendWakuMessage(t){return ns(this,void 0,void 0,(function*(){const e=yield this.waku.lightPush.randomPeer;if(!e)throw new Error("no peer available to send message");if(!this.authenticator.hasAuthenticated(e.id)){const t=yield this.authenticator.authenticate(e.id);if(!t.isAuthenticated)throw new ss}const r=yield this.waku.lightPush.push(t,{peerId:e.id});if(!1===(null===r||void 0===r?void 0:r.isSuccess))throw new Error(`Failed to send message with error: ${null===r||void 0===r?void 0:r.info}`)}))}registerCodec(t){const e=t.contentType,r=`${e.authorityId}/${e.typeId}`;this._codecs.set(r,t)}codecFor(t){const e=`${t.authorityId}/${t.typeId}`,r=this._codecs.get(e);if(r&&!(t.versionMajor>r.contentType.versionMajor))return r}encodeMessage(t,e,r,n){return ns(this,void 0,void 0,(function*(){const i=(null===n||void 0===n?void 0:n.contentType)||po,o=this.codecFor(i);if(!o)throw new Error("unknown content type "+i);const s=o.encode(r,this);(null===n||void 0===n?void 0:n.contentFallback)&&(s.fallback=n.contentFallback),(null===n||void 0===n?void 0:n.compression)&&(s.compression=n.compression),yield wo(s);const a=ar.encode(s).finish();return Oi.encode(this.keys,t,a,e)}))}decodeMessage(t){return ns(this,void 0,void 0,(function*(){const e=yield Oi.decode(this.keys,t);if(e.error)return e;if(!e.decrypted)throw new Error("decrypted bytes missing");const r=ar.decode(e.decrypted);if(yield bo(r,this._maxContentSize),!r.type)throw new Error("missing content type");const n=new lo(r.type),i=this.codecFor(n);return i?(e.content=i.decode(r,this),e.contentType=n):(e.error=new Error("unknown content type "+n),r.fallback&&(e.content=r.fallback,e.contentType=fo)),e}))}streamIntroductionMessages(){return Hi.create(this,Li(this.address),gs)}streamConversationMessages(t){const e=Ni(t,this.address);return Hi.create(this,e,gs,ms(e))}listIntroductionMessages(t){return this.listMessages(Li(this.address),t)}listConversationMessages(t,e){return this.listMessages(Ni(t,this.address),Object.assign(Object.assign({},e),{checkAddresses:!0}))}listMessages(t,e){return ns(this,void 0,void 0,(function*(){e||(e={}),e.startTime||(e.startTime=new Date(0)),e.endTime||(e.endTime=new Date((new Date).toUTCString())),e.pageSize||(e.pageSize=10);let r=yield this.waku.store.queryHistory([t],{pageSize:e.pageSize,pageDirection:Pi.PageDirection.FORWARD,timeFilter:{startTime:e.startTime,endTime:e.endTime}});r=r.filter((t=>null===t||void 0===t?void 0:t.payload));let n=yield Promise.all(r.map((t=>this.decodeMessage(t.payload))));return(null===e||void 0===e?void 0:e.checkAddresses)&&(n=n.filter(ms(t))),n}))}createDisconnectWatcher(){return setInterval((()=>ns(this,void 0,void 0,(function*(){const t=[];for(const e of this.waku.libp2p.connectionManager.connections.values())for(const r of e)r.streams.length||(rs.log(`Closing connection to ${r.remoteAddr}`),t.push(r.close()));yield Promise.allSettled(t)}))),1e4)}}function hs(t,e,r){switch(t.keyStoreType){case as.networkTopicStoreV1:return ls(e,r);case as.localStorage:return fs(e)}}function ls(t,e){return new ro(t,new oo(e))}function fs(t){return new ro(t,new Xi)}function ds(t,e){return ns(this,void 0,void 0,(function*(){let r=yield e.loadPrivateKeyBundle();return r||(r=yield Ii.generate(t),yield e.storePrivateKeyBundle(r),r)}))}function ps({bootstrapAddrs:t,env:e,waitForPeersTimeoutMs:r}){return ns(this,void 0,void 0,(function*(){const n=(null===t||void 0===t?void 0:t.length)?{peers:t}:{getPeers:()=>ys(e)},i=yield Pi.Waku.create({libp2p:{config:{pubsub:{enabled:!0,emitSelf:!0}}},bootstrap:n});try{yield Fi(r,(()=>i.waitForRemotePeer()),"timeout connecting to peers")}catch(o){throw yield i.stop(),o}return yield Gi(200),i}))}function ys(t){return ns(this,void 0,void 0,(function*(){const e=yield Vi()(is),r=yield e.json();return Object.values(r[t])}))}function gs(t){return t}function ms(t){return e=>{const r=e.senderAddress,n=e.recipientAddress;return void 0!==r&&void 0!==n&&Ni(r,n)===t}}Fe().util.Long!==Ue()&&(Fe().util.Long=Ue(),Fe().configure());new lo({authorityId:"xmtp.org",typeId:"composite",versionMajor:1,versionMinor:0});var bs=r(26877);const ws=async()=>{const{ethereum:t,request:e}=(0,bs.i)(),r=async()=>{await e();const r=new De(t),n=r.getSigner();return await cs.create(n)};return{authenticate:r}};var vs=r(34309),_s=r(15941);const Es={class:"flex flex-col"},Ss=(0,n._)("h1",{class:"text-3xl font-bold"}," Repos ",-1),As={class:"mt-5 table-auto"},Is=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{class:"text-left text-xl font-bold"}," IPFS "),(0,n._)("th",{class:"text-left text-xl font-bold"}," IPLD "),(0,n._)("th",{class:"text-left text-xl font-bold"}," Likes "),(0,n._)("th",{class:"text-left text-xl font-bold invisible"}," - ")])],-1),Ts={class:"py-2 font-mono"},Rs={class:"py-2 font-mono"},Ms={class:"py-2"},ks=["onClick"],Cs=["onClick"],Os={class:"py-2"},Ps=["onClick"],Bs=(0,n._)("h1",{class:"mt-5 text-3xl font-bold"}," API Response ",-1),xs={class:"mt-5 p-3 border"};var Ns={__name:"ReposView",async setup(t){let e,r;const{authenticate:a}=(0,vs.t)(),{authenticate:u}=([e,r]=(0,n.mv)((()=>ws())),e=await e,r(),e),{data:c}=([e,r]=(0,n.mv)((()=>(0,s.h)("repos"))),e=await e,r(),e),h=([e,r]=(0,n.mv)((()=>a())),e=await e,r(),e),l=([e,r]=(0,n.mv)((()=>h.get("likes"))),e=await e,r(),e);l.repos=l.repos?l.repos:[];const f=(0,i.iH)(l),d=(0,n.Fl)((()=>c.value.map((t=>({...t,liked:f.value.repos.some((e=>e.ipfs===t.ipfs))}))))),p=async t=>{const e=await a(),{repos:r=[]}=await e.get("likes");r.push(t),await e.set("likes",{repos:r}),f.value=await e.get("likes")},y=async t=>{const e=await a(),{repos:r=[]}=await e.get("likes"),n=r.filter((e=>e.ipfs!==t.ipfs));await e.set("likes",{repos:n}),f.value=await e.get("likes")},g=async t=>{_s.log(t);const e=await u();_s.log(e)};return(t,e)=>{const r=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",Es,[Ss,(0,n._)("table",As,[Is,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(d),((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{class:"border-y",key:e},[(0,n._)("td",Ts,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/repos/${t.ipld}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.ipfs),1)])),_:2},1032,["to"])]),(0,n._)("td",Rs,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/repos/${t.ipld}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.ipld),1)])),_:2},1032,["to"])]),(0,n._)("td",Ms,[t.liked?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:e=>y(t)}," Unlike ",8,Cs)):((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e=>p(t)}," Like ",8,ks))]),(0,n._)("td",Os,[(0,n._)("button",{onClick:e=>g(t)}," Share ",8,Ps)])])))),128))])]),Bs,(0,n._)("pre",xs," "+(0,o.zw)((0,i.SU)(c))+" ",1)])}}};const Ds=Ns;var Ls=Ds},69957:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return v}});var n=r(73396),i=r(44870),o=r(87139),s=r(22483),a=r(73228);const u={class:"flex flex-col"},c=(0,n._)("h1",{class:"text-3xl font-bold"}," Files ",-1),h={class:"mt-5 table-auto"},l=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{class:"text-left text-xl font-bold"}," Filename "),(0,n._)("th",{class:"text-left text-xl font-bold"}," IPFS / IPLD ")])],-1),f={class:"py-1 font-mono"},d=["title"],p={class:"py-1 font-mono"},y=["title"],g=(0,n._)("h1",{class:"mt-5 text-3xl font-bold"}," API Response ",-1),m={class:"mt-5 p-3 border"};var b={__name:"TreeView",async setup(t){let e,r;const{params:{ipld:b}}=(0,s.yj)(),{data:w}=([e,r]=(0,n.mv)((()=>(0,a.h)(`ipld/${b}`))),e=await e,r(),e),v=(0,n.Fl)((()=>Object.entries(w.value).filter((([t,e])=>!e["/"].startsWith("Qm"))).sort(((t,e)=>t[0].localeCompare(e[0]))).map((([t,e])=>[t,e["/"]])))),_=(0,n.Fl)((()=>Object.entries(w.value).filter((([t,e])=>e["/"].startsWith("Qm"))).sort(((t,e)=>t[0].localeCompare(e[0]))).map((([t,e])=>[t,e["/"]]))));return(t,e)=>{const r=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",u,[c,(0,n._)("table",h,[l,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(v),(([t,e])=>((0,n.wg)(),(0,n.iD)("tr",{class:"border-y",key:t},[(0,n._)("td",f,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/trees/${e}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t),1)])),_:2},1032,["to"])]),(0,n._)("td",{class:"py-1 font-mono",title:e},[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/trees/${e}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e),1)])),_:2},1032,["to"])],8,d)])))),128)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(_),(([t,e])=>((0,n.wg)(),(0,n.iD)("tr",{class:"border-y",key:t},[(0,n._)("td",p,[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/files/${e}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t),1)])),_:2},1032,["to"])]),(0,n._)("td",{class:"py-1 font-mono",title:e},[(0,n.Wm)(r,{class:"hover:text-blue-800 hover:underline",to:`/files/${e}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e),1)])),_:2},1032,["to"])],8,y)])))),128))])]),g,(0,n._)("pre",m," "+(0,o.zw)((0,i.SU)(w))+" ",1)])}}};const w=b;var v=w},43094:function(){},95856:function(){},69159:function(){},35883:function(){},80950:function(){},46601:function(){},89214:function(){},5696:function(){},8623:function(){},7748:function(){},85568:function(){},45443:function(){},89408:function(){},28339:function(){},47956:function(){},56619:function(){},21724:function(){},25819:function(){},63818:function(){},77108:function(){},52361:function(){},94616:function(){},69526:function(t,e){var r,n,i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=l,t.encode=h,t.familyOf=c,t.name=void 0,t.sizeOf=u,t.v6=t.v4=void 0;const e=/^(\d{1,3}\.){3,3}\d{1,3}$/,r=4,n=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,i=16,o={name:"v4",size:r,isFormat:t=>e.test(t),encode(t,e,n){n=~~n,e=e||new Uint8Array(n+r);const i=t.length;let o=0;for(let r=0;r<i;){const i=t.charCodeAt(r++);46===i?(e[n++]=o,o=0):o=10*o+(i-48)}return e[n]=o,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}};t.v4=o;const s={name:"v6",size:i,isFormat:t=>t.length>0&&n.test(t),encode(t,e,r){r=~~r;let n=r+i,o=-1,s=0,a=0,u=!0,c=!1;e=e||new Uint8Array(r+i);for(let i=0;i<t.length;i++){let h=t.charCodeAt(i);58===h?(u?-1!==o?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(o=r):(!0===c?(r<n&&(e[r]=a),r++):(r<n&&(e[r]=s>>8),r<n-1&&(e[r+1]=255&s),r+=2),s=0,a=0),u=!0,c=!1):46===h?(r<n&&(e[r]=a),r++,a=0,s=0,u=!1,c=!0):(u=!1,h>=97?h-=87:h>=65?h-=55:(h-=48,a=10*a+h),s=(s<<4)+h)}if(!1===u)!0===c?(r<n&&(e[r]=a),r++):(r<n&&(e[r]=s>>8),r<n-1&&(e[r+1]=255&s),r+=2);else if(0===o)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(-1!==o){r+=2;for(let t=Math.min(r-1,n-1);t>=o+2;t--)e[t]=e[t-2];e[o]=0,e[o+1]=0,o=r}if(o!==r&&-1!==o){r>n-2&&(r=n-2);while(n>o)e[--n]=r<n&&r>o?e[--r]:0}else while(r<n)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<i;n+=2)0!==n&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};t.v6=s;const a="ip";function u(t){if(o.isFormat(t))return o.size;if(s.isFormat(t))return s.size;throw Error(`Invalid ip address: ${t}`)}function c(t){return u(t)===o.size?1:2}function h(t,e,r){r=~~r;const n=u(t);return"function"===typeof e&&(e=e(r+n)),n===o.size?o.encode(t,e,r):s.encode(t,e,r)}function l(t,e,r){if(e=~~e,r=r||t.length-e,r===o.size)return o.decode(t,e,r);if(r===s.size)return s.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${o.size} for v4 or ${s.size} for v6.`)}return t.name=a,"default"in t?t.default:t}({});r=[],n=function(){return i}.apply(e,r),void 0===n||(t.exports=n)},86316:function(t,e,r){"use strict";r.r(e),r.d(e,{MemoryDatastore:function(){return f}});r(21703);var n=r(97192);const i=(t,e)=>async function*(){const r=await n(t);yield*r.sort(e)}();var o=r(29164),s=r(13726),a=r(16855);class u{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(t,e,r){return Promise.reject(new Error(".put is not implemented"))}get(t,e){return Promise.reject(new Error(".get is not implemented"))}has(t,e){return Promise.reject(new Error(".has is not implemented"))}delete(t,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(t,e={}){for await(const{key:r,value:n}of t)await this.put(r,n,e),yield{key:r,value:n}}async*getMany(t,e={}){for await(const r of t)yield this.get(r,e)}async*deleteMany(t,e={}){for await(const r of t)await this.delete(r,e),yield r}batch(){let t=[],e=[];return{put(e,r){t.push({key:e,value:r})},delete(t){e.push(t)},commit:async r=>{await o(this.putMany(t,r)),t=[],await o(this.deleteMany(e,r)),e=[]}}}async*_all(t,e){throw new Error("._all is not implemented")}async*_allKeys(t,e){throw new Error("._allKeys is not implemented")}query(t,e){let r=this._all(t,e);if(null!=t.prefix&&(r=s(r,(e=>e.key.toString().startsWith(t.prefix)))),Array.isArray(t.filters)&&(r=t.filters.reduce(((t,e)=>s(t,e)),r)),Array.isArray(t.orders)&&(r=t.orders.reduce(((t,e)=>i(t,e)),r)),null!=t.offset){let e=0;r=s(r,(()=>e++>=t.offset))}return null!=t.limit&&(r=a(r,t.limit)),r}queryKeys(t,e){let r=this._allKeys(t,e);if(null!=t.prefix&&(r=s(r,(e=>e.toString().startsWith(t.prefix)))),Array.isArray(t.filters)&&(r=t.filters.reduce(((t,e)=>s(t,e)),r)),Array.isArray(t.orders)&&(r=t.orders.reduce(((t,e)=>i(t,e)),r)),null!=t.offset){let e=0;r=s(r,(()=>e++>=t.offset))}return null!=t.limit&&(r=a(r,t.limit)),r}}var c=r(34676),h=r(19998);function l(t){return t=t||new Error("Not Found"),h(t,"ERR_NOT_FOUND")}class f extends u{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(t,e){this.data[t.toString()]=e}async get(t){const e=await this.has(t);if(!e)throw l();return this.data[t.toString()]}async has(t){return void 0!==this.data[t.toString()]}async delete(t){delete this.data[t.toString()]}async*_all(){yield*Object.entries(this.data).map((([t,e])=>({key:new c.Key(t),value:e})))}async*_allKeys(){yield*Object.entries(this.data).map((([t])=>new c.Key(t)))}}},34676:function(t,e,r){"use strict";r.r(e),r.d(e,{Key:function(){return c}});r(48675),r(3462),r(37380),r(1118),r(21703);var n=r(42278),i=r(96523),o=r(92259);const s="/",a=(new TextEncoder).encode(s),u=a[0];class c{constructor(t,e){if("string"===typeof t)this._buf=(0,o.fromString)(t);else{if(!(t instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=t}if(null==e&&(e=!0),e&&this.clean(),0===this._buf.byteLength||this._buf[0]!==u)throw new Error("Invalid key")}toString(t="utf8"){return(0,i.toString)(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new c(t.join(s))}static random(){return new c((0,n.nanoid)().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||"string"===typeof t?new c(t):t.uint8Array?new c(t.uint8Array()):null}clean(){if(this._buf&&0!==this._buf.byteLength||(this._buf=a),this._buf[0]!==u){const t=new Uint8Array(this._buf.byteLength+1);t.fill(u,0,1),t.set(this._buf,1),this._buf=t}while(this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===u)this._buf=this._buf.subarray(0,-1)}less(t){const e=this.list(),r=t.list();for(let n=0;n<e.length;n++){if(r.length<n+1)return!1;const t=e[n],i=r[n];if(t<i)return!0;if(t>i)return!1}return e.length<r.length}reverse(){return c.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(s).slice(1)}type(){return h(this.baseNamespace())}name(){return l(this.baseNamespace())}instance(t){return new c(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(s)||(t+=s),t+=this.type(),new c(t)}parent(){const t=this.list();return 1===t.length?new c(s):new c(t.slice(0,-1).join(s))}child(t){return this.toString()===s?t:t.toString()===s?this:new c(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()!==this.toString()&&t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()!==this.toString()&&this.toString().startsWith(t.toString())}isTopLevel(){return 1===this.list().length}concat(...t){return c.withNamespaces([...this.namespaces(),...f(t.map((t=>t.namespaces())))])}}function h(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function l(t){const e=t.split(":");return e[e.length-1]}function f(t){return[].concat(...t)}},54711:function(t,e,r){"use strict";r.d(e,{kU:function(){return p},Dp:function(){return d},ET:function(){return m}});r(48675),r(3462),r(37380),r(1118),r(21703);function n(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function l(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var r=0,n=0,i=0,o=e.length;while(i!==o&&0===e[i])i++,r++;var s=(o-i)*h+1>>>0,c=new Uint8Array(s);while(i!==o){for(var l=e[i],f=0,d=s-1;(0!==l||f<n)&&-1!==d;d--,f++)l+=256*c[d]>>>0,c[d]=l%a>>>0,l=l/a>>>0;if(0!==l)throw new Error("Non-zero carry");n=f,i++}var p=s-n;while(p!==s&&0===c[p])p++;for(var y=u.repeat(r);p<s;++p)y+=t.charAt(c[p]);return y}function f(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var n=0,i=0;while(t[e]===u)n++,e++;var o=(t.length-e)*c+1>>>0,s=new Uint8Array(o);while(t[e]){var h=r[t.charCodeAt(e)];if(255===h)return;for(var l=0,f=o-1;(0!==h||l<i)&&-1!==f;f--,l++)h+=a*s[f]>>>0,s[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,e++}if(" "!==t[e]){var d=o-i;while(d!==o&&0===s[d])d++;var p=new Uint8Array(n+(o-d)),y=n;while(d!==o)p[y++]=s[d++];return p}}}function d(t){var r=f(t);if(r)return r;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:f,decode:d}}var i=n,o=i,s=o,a=r(3914);class u{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class c{constructor(t,e,r){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return l(this,t)}}class h{constructor(t){this.decoders=t}or(t){return l(this,t)}decode(t){const e=t[0],r=this.decoders[e];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const l=(t,e)=>new h({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class f{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new u(t,e,r),this.decoder=new c(t,e,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const d=({name:t,prefix:e,encode:r,decode:n})=>new f(t,e,r,n),p=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=s(r,e);return d({prefix:t,name:e,encode:n,decode:t=>(0,a.oQ)(i(t))})},y=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let o=t.length;while("="===t[o-1])--o;const s=new Uint8Array(o*r/8|0);let a=0,u=0,c=0;for(let h=0;h<o;++h){const e=i[t[h]];if(void 0===e)throw new SyntaxError(`Non-${n} character`);u=u<<r|e,a+=r,a>=8&&(a-=8,s[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return s},g=(t,e,r)=>{const n="="===e[e.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let u=0;u<t.length;++u){a=a<<8|t[u],s+=8;while(s>r)s-=r,o+=e[i&a>>s]}if(s&&(o+=e[i&a<<r-s]),n)while(o.length*r&7)o+="=";return o},m=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>d({prefix:e,name:t,encode(t){return g(t,n,r)},decode(e){return y(e,n,r,t)}})},38850:function(t,e,r){"use strict";r.r(e),r.d(e,{base16:function(){return i},base16upper:function(){return o}});var n=r(54711);const i=(0,n.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),o=(0,n.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})},12056:function(t,e,r){"use strict";r.r(e),r.d(e,{base32:function(){return i},base32hex:function(){return u},base32hexpad:function(){return h},base32hexpadupper:function(){return l},base32hexupper:function(){return c},base32pad:function(){return s},base32padupper:function(){return a},base32upper:function(){return o},base32z:function(){return f}});var n=r(54711);const i=(0,n.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),o=(0,n.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s=(0,n.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,n.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u=(0,n.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),c=(0,n.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),h=(0,n.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),l=(0,n.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f=(0,n.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},8362:function(t,e,r){"use strict";r.r(e),r.d(e,{base36:function(){return i},base36upper:function(){return o}});var n=r(54711);const i=(0,n.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),o=(0,n.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},78334:function(t,e,r){"use strict";r.r(e),r.d(e,{base58btc:function(){return i},base58flickr:function(){return o}});var n=r(54711);const i=(0,n.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o=(0,n.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},61058:function(t,e,r){"use strict";r.r(e),r.d(e,{base64:function(){return i},base64pad:function(){return o},base64url:function(){return s},base64urlpad:function(){return a}});var n=r(54711);const i=(0,n.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),o=(0,n.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),s=(0,n.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a=(0,n.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},24364:function(t,e,r){"use strict";r.d(e,{gh:function(){return j}});var n={};r.r(n),r.d(n,{identity:function(){return f}});var i={};r.r(i),r.d(i,{base2:function(){return d}});var o={};r.r(o),r.d(o,{base8:function(){return p}});var s={};r.r(s),r.d(s,{base10:function(){return y}});var a={};r.r(a),r.d(a,{base256emoji:function(){return T}});var u={};r.r(u),r.d(u,{code:function(){return C},decode:function(){return P},encode:function(){return O},name:function(){return k}});var c={};r.r(c),r.d(c,{code:function(){return D},decode:function(){return U},encode:function(){return L},name:function(){return N}});var h=r(54711),l=r(3914);const f=(0,h.Dp)({prefix:"\0",name:"identity",encode:t=>(0,l.BB)(t),decode:t=>(0,l.mL)(t)}),d=(0,h.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),p=(0,h.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),y=(0,h.kU)({prefix:"9",name:"base10",alphabet:"0123456789"});var g=r(38850),m=r(12056),b=r(8362),w=r(78334),v=r(61058);r(21703),r(48675),r(3462),r(37380),r(1118);const _=Array.from("ððªâð°ðððððððððððððâð»ð¥ð¾ð¿ðâ¤ðð¤£ðððð­ðððððð¥ð¥°ðððð¢ð¤ðððªðâºðð¤ððððð¹ð¤¦ððââ¨ð¤·ð±ðð¸ððððððððð¤©ððð¤ðð¯ððð¶ðð¤­â£ððððªðð¥ððð©ð¡ð¤ªðð¥³ð¥ð¤¤ððð³âððð´ðð¬ððð·ð»ðâ­âð¥ºððð¤ð¦âð£ððâ¹ððð âððºðð»ððððð¹ð£ð«ðððµð¤ðð´ð¤ð¼ð«â½ð¤âðð¤«ðð®ðð»ðð¶ðð²ð¿ð§¡ðâ¡ððââðð°ð¤¨ð¶ð¤ð¶ð°ðð¢ð¤ðð¨ð¨ð¤¬âððºð¤ððð±ðð¶ð¥´â¶â¡âðð¸â¬ð¨ðð¦ð·ðºâ ðððµðð¤²ð¤ ð¤§ððµðð§ð¾ððð¤ðð¤¯ð·âð§ð¯ððð¤ððâð´ð£ð¸ððð¥ð¤¢ðð¡ð©ðð¸ð»ð¤ð¤®ð¼ð¥µð©ððð¼ðð£ð¥"),E=_.reduce(((t,e,r)=>(t[r]=e,t)),[]),S=_.reduce(((t,e,r)=>(t[e.codePointAt(0)]=r,t)),[]);function A(t){return t.reduce(((t,e)=>(t+=E[e],t)),"")}function I(t){const e=[];for(const r of t){const t=S[r.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${r}`);e.push(t)}return new Uint8Array(e)}const T=(0,h.Dp)({prefix:"ð",name:"base256emoji",encode:A,decode:I});var R=r(51919),M=r(67041);const k="raw",C=85,O=t=>(0,l.oQ)(t),P=t=>(0,l.oQ)(t),B=new TextEncoder,x=new TextDecoder,N="json",D=512,L=t=>B.encode(JSON.stringify(t)),U=t=>JSON.parse(x.decode(t));r(52493);const j={...n,...i,...o,...s,...g,...m,...b,...w,...v,...a}},3914:function(t,e,r){"use strict";r.d(e,{BB:function(){return s},fS:function(){return n},mL:function(){return o},oQ:function(){return i}});r(48675),r(3462),r(37380),r(1118),r(21703);new Uint8Array(0);const n=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},i=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},o=t=>(new TextEncoder).encode(t),s=t=>(new TextDecoder).decode(t)},59329:function(t,e,r){"use strict";r.r(e),r.d(e,{CID:function(){return c}});r(21703),r(48675),r(3462),r(37380),r(1118);var n=r(30550),i=r(55226),o=r(78334),s=r(12056),a=r(3914),u=r(15941);class c{constructor(t,e,r,n){this.code=e,this.version=t,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:b,byteLength:b,code:m,version:m,multihash:m,bytes:m,_baseCache:b,asCID:b})}toV0(){switch(this.version){case 0:return this;default:{const{code:t,multihash:e}=this;if(t!==d)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==p)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return c.createV0(e)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,r=i.create(t,e);return c.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&i.equals(this.multihash,t.multihash)}toString(t){const{bytes:e,version:r,_baseCache:n}=this;switch(r){case 0:return l(e,n,t||o.base58btc.encoder);default:return f(e,n,t||s.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return v(/^0\.0/,_),!(!t||!t[g]&&t.asCID!==t)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof c)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new c(e,r,n,i||y(e,r,n.bytes))}if(null!=t&&!0===t[g]){const{version:e,multihash:r,code:n}=t,o=i.decode(r);return c.create(e,n,o)}return null}static create(t,e,r){if("number"!==typeof e)throw new Error("String codecs are no longer supported");switch(t){case 0:if(e!==d)throw new Error(`Version 0 CID must use dag-pb (code: ${d}) block encoding`);return new c(t,e,r,r.bytes);case 1:{const n=y(t,e,r.bytes);return new c(t,e,r,n)}default:throw new Error("Invalid version")}}static createV0(t){return c.create(0,d,t)}static createV1(t,e){return c.create(1,t,e)}static decode(t){const[e,r]=c.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=c.inspectBytes(t),r=e.size-e.multihashSize,n=(0,a.oQ)(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");const o=n.subarray(e.multihashSize-e.digestSize),s=new i.Digest(e.multihashCode,e.digestSize,o,n),u=0===e.version?c.createV0(s):c.createV1(e.codec,s);return[u,t.subarray(e.size)]}static inspectBytes(t){let e=0;const r=()=>{const[r,i]=n.Jx(t.subarray(e));return e+=i,r};let i=r(),o=d;if(18===i?(i=0,e=0):1===i&&(o=r()),0!==i&&1!==i)throw new RangeError(`Invalid CID version ${i}`);const s=e,a=r(),u=r(),c=e+u,h=c-s;return{version:i,codec:o,multihashCode:a,digestSize:u,multihashSize:h,size:c}}static parse(t,e){const[r,n]=h(t,e),i=c.decode(n);return i._baseCache.set(r,t),i}}const h=(t,e)=>{switch(t[0]){case"Q":{const r=e||o.base58btc;return[o.base58btc.prefix,r.decode(`${o.base58btc.prefix}${t}`)]}case o.base58btc.prefix:{const r=e||o.base58btc;return[o.base58btc.prefix,r.decode(t)]}case s.base32.prefix:{const r=e||s.base32;return[s.base32.prefix,r.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},l=(t,e,r)=>{const{prefix:n}=r;if(n!==o.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(null==i){const i=r.encode(t).slice(1);return e.set(n,i),i}return i},f=(t,e,r)=>{const{prefix:n}=r,i=e.get(n);if(null==i){const i=r.encode(t);return e.set(n,i),i}return i},d=112,p=18,y=(t,e,r)=>{const i=n.P$(t),o=i+n.P$(e),s=new Uint8Array(o+r.byteLength);return n.mL(t,s,0),n.mL(e,s,i),s.set(r,o),s},g=Symbol.for("@ipld/js-cid/CID"),m={writable:!1,configurable:!1,enumerable:!0},b={writable:!1,enumerable:!1,configurable:!1},w="0.0.0-dev",v=(t,e)=>{if(!t.test(w))throw new Error(e);u.warn(e)},_="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},55226:function(t,e,r){"use strict";r.r(e),r.d(e,{Digest:function(){return u},create:function(){return o},decode:function(){return s},equals:function(){return a}});r(48675),r(3462),r(37380),r(1118),r(21703);var n=r(3914),i=r(30550);const o=(t,e)=>{const r=e.byteLength,n=i.P$(t),o=n+i.P$(r),s=new Uint8Array(o+r);return i.mL(t,s,0),i.mL(r,s,n),s.set(e,o),new u(t,r,e,s)},s=t=>{const e=(0,n.oQ)(t),[r,o]=i.Jx(e),[s,a]=i.Jx(e.subarray(o)),c=e.subarray(o+a);if(c.byteLength!==s)throw new Error("Incorrect length");return new u(r,s,c,e)},a=(t,e)=>t===e||t.code===e.code&&t.size===e.size&&(0,n.fS)(t.bytes,e.bytes);class u{constructor(t,e,r,n){this.code=t,this.size=e,this.digest=r,this.bytes=n}}},68212:function(t,e,r){"use strict";r.d(e,{D:function(){return i}});r(48675),r(3462),r(37380),r(1118),r(21703);var n=r(55226);const i=({name:t,code:e,encode:r})=>new o(t,e,r);class o{constructor(t,e,r){this.name=t,this.code=e,this.encode=r}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?n.create(this.code,e):e.then((t=>n.create(this.code,t)))}throw Error("Unknown type, must be binary type")}}},67041:function(t,e,r){"use strict";r.r(e),r.d(e,{identity:function(){return c}});var n=r(3914),i=r(55226);const o=0,s="identity",a=n.oQ,u=t=>i.create(o,a(t)),c={code:o,name:s,encode:a,digest:u}},51919:function(t,e,r){"use strict";r.r(e),r.d(e,{sha256:function(){return o},sha512:function(){return s}});r(48675),r(3462),r(37380),r(1118);var n=r(68212);const i=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),o=(0,n.D)({name:"sha2-256",code:18,encode:i("SHA-256")}),s=(0,n.D)({name:"sha2-512",code:19,encode:i("SHA-512")})},52493:function(t,e,r){"use strict";r.d(e,{k0:function(){return n.CID}});var n=r(59329);r(30550),r(3914),r(68212),r(55226)},30550:function(t,e,r){"use strict";r.d(e,{Jx:function(){return T},mL:function(){return R},P$:function(){return M}});r(21703);var n=u,i=128,o=127,s=~o,a=Math.pow(2,31);function u(t,e,r){e=e||[],r=r||0;var n=r;while(t>=a)e[r++]=255&t|i,t/=128;while(t&s)e[r++]=255&t|i,t>>>=7;return e[r]=0|t,u.bytes=r-n+1,e}var c=f,h=128,l=127;function f(t,e){var r,n=0,i=(e=e||0,0),o=e,s=t.length;do{if(o>=s)throw f.bytes=0,new RangeError("Could not decode varint");r=t[o++],n+=i<28?(r&l)<<i:(r&l)*Math.pow(2,i),i+=7}while(r>=h);return f.bytes=o-e,n}var d=Math.pow(2,7),p=Math.pow(2,14),y=Math.pow(2,21),g=Math.pow(2,28),m=Math.pow(2,35),b=Math.pow(2,42),w=Math.pow(2,49),v=Math.pow(2,56),_=Math.pow(2,63),E=function(t){return t<d?1:t<p?2:t<y?3:t<g?4:t<m?5:t<b?6:t<w?7:t<v?8:t<_?9:10},S={encode:n,decode:c,encodingLength:E},A=S,I=A;const T=t=>{const e=I.decode(t);return[e,I.decode.bytes]},R=(t,e,r=0)=>(I.encode(t,e,r),e),M=t=>I.encodingLength(t)},42278:function(t,e,r){"use strict";r.r(e),r.d(e,{customAlphabet:function(){return s},customRandom:function(){return o},nanoid:function(){return a},random:function(){return i},urlAlphabet:function(){return n}});r(48675),r(3462),r(37380),r(1118);let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=t=>crypto.getRandomValues(new Uint8Array(t)),o=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*n*e/t.length);return(o=e)=>{let s="";while(1){let e=r(i),a=i;while(a--)if(s+=t[e[a]&n]||"",s.length===o)return s}}},s=(t,e=21)=>o(t,e,i),a=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>(e&=63,t+=e<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_",t)),"")},85489:function(t,e,r){"use strict";r.r(e),r.d(e,{concat:function(){return n}});r(48675),r(3462),r(37380),r(1118);function n(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}},74141:function(t,e,r){"use strict";function n(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}r.r(e),r.d(e,{equals:function(){return n}})},92259:function(t,e,r){"use strict";r.r(e),r.d(e,{fromString:function(){return i}});r(21703);var n=r(92884);function i(t,e="utf8"){const r=n.Z[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}},73627:function(t,e,r){"use strict";function n(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}r.r(e),r.d(e,{compare:function(){return n},concat:function(){return i.concat},equals:function(){return o.equals},fromString:function(){return s.fromString},toString:function(){return a.toString},xor:function(){return u}});var i=r(85489),o=r(74141),s=r(92259),a=r(96523);r(21703),r(48675),r(3462),r(37380),r(1118);function u(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}},96523:function(t,e,r){"use strict";r.r(e),r.d(e,{toString:function(){return i}});r(21703);var n=r(92884);function i(t,e="utf8"){const r=n.Z[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}},92884:function(t,e,r){"use strict";r(48675),r(3462),r(37380),r(1118);var n=r(24364);function i(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const o=i("utf8","u",(t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)}),(t=>{const e=new TextEncoder;return e.encode(t.substring(1))})),s=i("ascii","a",(t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}),(t=>{t=t.substring(1);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e})),a={utf8:o,"utf-8":o,hex:n.gh.base16,latin1:s,ascii:s,binary:s,...n.gh};e["Z"]=a},44946:function(t){"use strict";t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},75207:function(t){"use strict";t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:function(t){"use strict";t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},83208:function(t){"use strict";t.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},29799:function(t){"use strict";t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},35438:function(t){"use strict";t.exports=JSON.parse('{"cloudflare":{"host":"cloudflare-dns.com","docs":"https://developers.cloudflare.com/1.1.1.1/dns-over-https","cors":true},"cloudflareFamily":{"host":"family.cloudflare-dns.com","docs":"https://developers.cloudflare.com/1.1.1.1/1.1.1.1-for-families/setup-instructions/dns-over-https","cors":true,"filter":true},"cloudflareSecurity":{"host":"security.cloudflare-dns.com","docs":"https://developers.cloudflare.com/1.1.1.1/1.1.1.1-for-families/setup-instructions/dns-over-https","cors":true,"filter":true},"cloudflareEth":{"host":"eth.resolver.cloudflare-eth.com","docs":"https://www.cloudflare.com/distributed-web-gateway/#ethereum-gateway","cors":true,"filter":true},"aAndA":{"host":"dns.aa.net.uk","docs":"https://www.aa.net.uk/legal/dohdot-disclaimer/","filter":true},"usablePrivacy":{"host":"adfree.usableprivacy.net","docs":"https://docs.usableprivacy.com","filter":true},"adguard":{"host":"dns.adguard.com","docs":"https://adguard.com/en/adguard-dns/overview.html","filter":true},"adguardFamily":{"host":"dns-family.adguard.com","docs":"https://adguard.com/en/adguard-dns/overview.html","filter":true},"adguardUnfiltered":{"host":"dns-unfiltered.adguard.com","docs":"https://adguard.com/en/adguard-dns/overview.html"},"ahadnsIn":{"host":"doh.in.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"India"},"ahadnsIt":{"host":"doh.it.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Italy"},"ahadnsEs":{"host":"doh.es.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Spain"},"ahadnsNo":{"host":"doh.no.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Norway"},"ahadnsNl":{"host":"doh.nl.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Netherlands"},"ahadnsPl":{"host":"doh.pl.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Poland"},"ahadnsNy":{"host":"doh.ny.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"New York"},"ahadnsChi":{"host":"doh.chi.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Chicago"},"ahadnsAu":{"host":"doh.au.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Australia"},"ahadnsLa":{"host":"doh.la.ahadns.net","docs":"https://ahadns.com/dns-over-https/","cors":true,"filter":true,"location":"Los Angeles"},"alidns":{"host":"dns.alidns.com","docs":"https://alidns.com/knowledge?type=SETTING_DOCS#umpt6","cors":true,"filter":true,"location":"China"},"amsNl":{"host":"dnsnl.alekberg.net","docs":"https://alekberg.net/doh","location":"Amsterdam"},"amsSe":{"host":"dnsse.alekberg.net","docs":"https://alekberg.net/doh","location":"Sweden"},"amsEs":{"host":"dnses.alekberg.net","docs":"https://alekberg.net/doh","location":"Spain"},"arapurayil":{"host":"dns.arapurayil.com","docs":"https://www.dns.arapurayil.com/","filter":true},"digitaleGesellschaft":{"host":"dns.digitale-gesellschaft.ch","docs":"https://www.digitale-gesellschaft.ch/dns","cors":true,"location":"Switzerland"},"dnsForFamily":{"host":"dns-doh.dnsforfamily.com","docs":"https://dnsforfamily.com/","filter":true},"dnsHome":{"host":"dns.dnshome.de","docs":"https://www.dnshome.de/doh-dot-public-resolver.php","location":"Germany"},"blahDnsCh":{"host":"doh-ch.blahdns.com","docs":"https://blahdns.com/","cors":true,"filter":true,"location":"Switzerland"},"blahDnsJp":{"host":"doh-jp.blahdns.com","docs":"https://blahdns.com/","cors":true,"filter":true,"location":"Japan"},"blahDnsDe":{"host":"doh-de.blahdns.com","docs":"https://blahdns.com/","cors":true,"filter":true,"location":"Germany"},"blahDnsFi":{"host":"doh-fi.blahdns.com","docs":"https://blahdns.com/","cors":true,"filter":true,"location":"Finland"},"cleanBrowsingSecurity":{"host":"doh.cleanbrowsing.org","docs":"https://cleanbrowsing.org/guides/dnsoverhttps","path":"/doh/security-filter/","cors":true,"filter":true},"cleanBrowsingFamily":{"host":"doh.cleanbrowsing.org","docs":"https://cleanbrowsing.org/guides/dnsoverhttps","path":"/doh/family-filter/","cors":true,"filter":true},"cleanBrowsingAdult":{"host":"doh.cleanbrowsing.org","docs":"https://cleanbrowsing.org/guides/dnsoverhttps","path":"/doh/adult-filter/","cors":true,"filter":true},"appliedPrivacy":{"host":"doh.applied-privacy.net","docs":"https://applied-privacy.net/services/dns/","path":"/query","location":"Austria"},"ffmuc":{"host":"doh.ffmuc.net","docs":"https://ffmuc.net/wiki/doku.php?id=knb:dohdot","location":"Germany"},"tiarap":{"host":"doh.tiar.app","docs":"https://tiarap.org/","filter":true},"tiarapJp":{"host":"jp.tiar.app","docs":"https://jp.tiar.app/","filter":true,"location":"Japan"},"google":{"host":"dns.google","docs":"https://developers.google.com/speed/public-dns/docs/doh/","cors":true},"he":{"host":"ordns.he.net","docs":"https://dns.he.net/","log":true},"iij":{"host":"public.dns.iij.jp","docs":"https://public.dns.iij.jp/","filter":true,"log":true,"location":"Japan"},"libredns":{"host":"doh.libredns.gr","docs":"https://libredns.gr/","location":"Germany"},"librednsAds":{"host":"doh.libredns.gr","docs":"https://libredns.gr/","path":"/ads","filter":true,"location":"Germany"},"njalla":{"host":"dns.njal.la","docs":"https://dns.njal.la/","location":"Sweden"},"opendns":{"host":"doh.opendns.com","docs":"https://support.opendns.com/hc/en-us/articles/360038086532-Using-DNS-over-HTTPS-DoH-with-OpenDNS"},"opendnsFamily":{"host":"doh.familyshield.opendns.com","docs":"https://support.opendns.com/hc/en-us/articles/360038086532-Using-DNS-over-HTTPS-DoH-with-OpenDNS","filter":true},"sebyVultr":{"host":"doh.seby.io","docs":"https://dns.seby.io/","port":8443,"cors":true,"filter":true,"location":"Sydney"},"sebyOVH":{"host":"doh-2.seby.io","docs":"https://dns.seby.io/","cors":true,"filter":true,"location":"Sydney"},"quad9":{"host":"dns10.quad9.net","docs":"https://quad9.net/service/service-addresses-and-features"},"quad9Ads":{"host":"dns.quad9.net","docs":"https://quad9.net/service/service-addresses-and-features","filter":true},"switchCh":{"host":"dns.switch.ch","docs":"https://www.switch.ch/security/info/public-dns/","filter":true,"location":"Switzerland"},"yepdns":{"host":"sg.yepdns.com","docs":"https://get.yepdns.com/","filter":true,"location":"Singapore"},"lavaDnsEU1":{"host":"eu1.dns.lavate.ch","docs":"https://dns.lavate.ch/","location":"Helsinki"},"controlId":{"host":"freedns.controld.com","docs":"https://controld.com/","path":"/p0"},"controlIdMw":{"host":"freedns.controld.com","docs":"https://controld.com/","path":"/p1","filter":true},"controlIdAds":{"host":"freedns.controld.com","docs":"https://controld.com/","path":"/p2","filter":true},"controlIdSoc":{"host":"freedns.controld.com","docs":"https://controld.com/","path":"/p3","filter":true},"uncensoredAny":{"host":"anycast.censurfridns.dk","docs":"https://blog.uncensoreddns.org/"},"uncensoredUni":{"host":"unicast.censurfridns.dk","docs":"https://blog.uncensoreddns.org/","location":"Copenhagen"},"dnssbGlobal":{"host":"doh.dns.sb","docs":"https://dns.sb/doh/","cors":true},"dbssbDeDus":{"host":"de-dus.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"DÃ¼sseldorf"},"dnssbDeFra":{"host":"de-fra.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Frankfurt"},"dnssbNlAms":{"host":"nl-ams.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Amsterdam"},"dnssbNlAms2":{"host":"nl-ams2.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Amsterdam"},"dnssbEeTll":{"host":"ee-tll.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Tallinn"},"dnssbJpKix":{"host":"jp-kix.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Osaka"},"dnssbHkHkg":{"host":"hk-hkg.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Hong Kong"},"dnssbAuSyd":{"host":"au-syd.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Sydney"},"dnssbUsChi":{"host":"us-chi.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Chicago"},"dnssbInBlr":{"host":"in-blr.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Bengaluru"},"dnssbSgSin":{"host":"sg-sin.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Singapore"},"dnssbKrSel":{"host":"kr-sel.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Seoul"},"dnssbRuMow":{"host":"ru-mow.doh.sb","docs":"https://dns.sb/doh/","cors":true,"location":"Moscow"},"ethlink":{"host":"eth.link","docs":"https://eth.link/","cors":true},"handshake":{"host":"query.hdns.io","docs":"https://docs.namebase.io/guides-1/resolving-handshake-1/hdns.io#dns-over-https-doh","cors":true}}')},18597:function(t){"use strict";t.exports={i8:"6.5.4"}},28362:function(t){"use strict";t.exports=JSON.parse('{"name":"libp2p","version":"0.36.2","description":"JavaScript implementation of libp2p, a modular peer to peer network stack","leadMaintainer":"Jacob Heun <jacobheun@gmail.com>","main":"src/index.js","types":"dist/src/index.d.ts","typesVersions":{"*":{"src/*":["dist/src/*","dist/src/*/index"]}},"files":["dist","src"],"scripts":{"lint":"aegir lint","build":"aegir build","build:proto":"npm run build:proto:circuit && npm run build:proto:fetch && npm run build:proto:identify && npm run build:proto:plaintext && npm run build:proto:address-book && npm run build:proto:proto-book && npm run build:proto:peer && npm run build:proto:peer-record && npm run build:proto:envelope","build:proto:circuit":"pbjs -t static-module -w commonjs -r libp2p-circuit --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/circuit/protocol/index.js ./src/circuit/protocol/index.proto","build:proto:fetch":"pbjs -t static-module -w commonjs -r libp2p-fetch --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/fetch/proto.js ./src/fetch/proto.proto","build:proto:identify":"pbjs -t static-module -w commonjs -r libp2p-identify --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/identify/message.js ./src/identify/message.proto","build:proto:plaintext":"pbjs -t static-module -w commonjs -r libp2p-plaintext --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/insecure/proto.js ./src/insecure/proto.proto","build:proto:peer":"pbjs -t static-module -w commonjs -r libp2p-peer --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/pb/peer.js ./src/peer-store/pb/peer.proto","build:proto:peer-record":"pbjs -t static-module -w commonjs -r libp2p-peer-record --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/peer-record/peer-record.js ./src/record/peer-record/peer-record.proto","build:proto:envelope":"pbjs -t static-module -w commonjs -r libp2p-envelope --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/envelope/envelope.js ./src/record/envelope/envelope.proto","build:proto-types":"npm run build:proto-types:circuit && npm run build:proto-types:fetch && npm run build:proto-types:identify && npm run build:proto-types:plaintext && npm run build:proto-types:address-book && npm run build:proto-types:proto-book && npm run build:proto-types:peer && npm run build:proto-types:peer-record && npm run build:proto-types:envelope","build:proto-types:circuit":"pbts -o src/circuit/protocol/index.d.ts src/circuit/protocol/index.js","build:proto-types:fetch":"pbts -o src/fetch/proto.d.ts src/fetch/proto.js","build:proto-types:identify":"pbts -o src/identify/message.d.ts src/identify/message.js","build:proto-types:plaintext":"pbts -o src/insecure/proto.d.ts src/insecure/proto.js","build:proto-types:peer":"pbts -o src/peer-store/pb/peer.d.ts src/peer-store/pb/peer.js","build:proto-types:peer-record":"pbts -o src/record/peer-record/peer-record.d.ts src/record/peer-record/peer-record.js","build:proto-types:envelope":"pbts -o src/record/envelope/envelope.d.ts src/record/envelope/envelope.js","test":"aegir test","test:ts":"aegir build --no-bundle && npm run test --prefix test/ts-use","test:node":"aegir test -t node -f \\"./test/**/*.{node,spec}.js\\"","test:browser":"aegir test -t browser","test:examples":"cd examples && npm run test:all","test:interop":"LIBP2P_JS=$PWD npx aegir test -t node -f ./node_modules/libp2p-interop/test/*","prepare":"npm run build","coverage":"nyc --reporter=text --reporter=lcov npm run test:node"},"repository":{"type":"git","url":"https://github.com/libp2p/js-libp2p.git"},"keywords":["libp2p","network","p2p","peer","peer-to-peer","IPFS"],"bugs":{"url":"https://github.com/libp2p/js-libp2p/issues"},"homepage":"https://libp2p.io","license":"MIT","engines":{"node":">=15.0.0"},"browser":{"nat-api":false},"eslintConfig":{"extends":"ipfs","ignorePatterns":["!.aegir.js","test/ts-use","*.d.ts"]},"dependencies":{"@vascosantos/moving-average":"^1.1.0","abortable-iterator":"^3.0.0","aggregate-error":"^3.1.0","any-signal":"^3.0.0","bignumber.js":"^9.0.1","class-is":"^1.1.0","datastore-core":"^7.0.0","debug":"^4.3.1","err-code":"^3.0.0","es6-promisify":"^7.0.0","events":"^3.3.0","hashlru":"^2.3.0","interface-datastore":"^6.0.2","it-all":"^1.0.4","it-buffer":"^0.1.2","it-drain":"^1.0.3","it-filter":"^1.0.1","it-first":"^1.0.4","it-foreach":"^0.1.1","it-handshake":"^2.0.0","it-length-prefixed":"^5.0.2","it-map":"^1.0.4","it-merge":"^1.0.0","it-pipe":"^1.1.0","it-sort":"^1.0.1","it-take":"^1.0.0","libp2p-crypto":"^0.21.2","libp2p-interfaces":"^4.0.0","libp2p-utils":"^0.4.0","mafmt":"^10.0.0","merge-options":"^3.0.4","mortice":"^2.0.1","multiaddr":"^10.0.0","multiformats":"^9.0.0","multistream-select":"^3.0.0","mutable-proxy":"^1.0.0","nat-api":"^0.3.1","node-forge":"^1.2.1","p-any":"^3.0.0","p-fifo":"^1.0.0","p-retry":"^4.4.0","p-settle":"^4.1.1","peer-id":"^0.16.0","private-ip":"^2.1.0","protobufjs":"^6.10.2","retimer":"^3.0.0","sanitize-filename":"^1.6.3","set-delayed-interval":"^1.0.0","streaming-iterables":"^6.0.0","timeout-abort-controller":"^3.0.0","uint8arrays":"^3.0.0","varint":"^6.0.0","wherearewe":"^1.0.0","xsalsa20":"^1.1.0"},"devDependencies":{"@chainsafe/libp2p-noise":"^5.0.0","@nodeutils/defaults-deep":"^1.1.0","@types/es6-promisify":"^6.0.0","@types/node":"^16.0.1","@types/node-forge":"^1.0.0","@types/varint":"^6.0.0","aegir":"^36.0.0","buffer":"^6.0.3","delay":"^5.0.0","into-stream":"^6.0.0","ipfs-http-client":"^54.0.2","it-concat":"^2.0.0","it-pair":"^1.0.0","it-pushable":"^1.4.0","libp2p":".","libp2p-bootstrap":"^0.14.0","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.11.1","libp2p-interfaces-compliance-tests":"^4.0.8","libp2p-interop":"^0.7.1","libp2p-kad-dht":"^0.28.6","libp2p-mdns":"^0.18.0","libp2p-mplex":"^0.10.4","libp2p-tcp":"^0.17.0","libp2p-webrtc-star":"^0.25.0","libp2p-websockets":"^0.16.0","nock":"^13.0.3","p-defer":"^3.0.0","p-times":"^3.0.0","p-wait-for":"^3.2.0","rimraf":"^3.0.2","sinon":"^12.0.1","util":"^0.12.3"},"contributors":["Vasco Santos <vasco.santos@moxy.studio>","David Dias <daviddias.p@gmail.com>","Jacob Heun <jacobheun@gmail.com>","Alex Potsides <alex@achingbrain.net>","Alan Shaw <alan@tableflip.io>","Cayman <caymannava@gmail.com>","Pedro Teixeira <i@pgte.me>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Maciej KrÃ¼ger <mkg20001@gmail.com>","Hugo Dias <mail@hugodias.me>","dirkmc <dirkmdev@gmail.com>","Volker Mische <volker.mische@gmail.com>","Chris Dostert <chrisdostert@users.noreply.github.com>","zeim839 <50573884+zeim839@users.noreply.github.com>","Robert Kiel <robert.kiel@hoprnet.org>","Richard Littauer <richard.littauer@gmail.com>","a1300 <matthias-knopp@gmx.net>","Ryan Bell <ryan@piing.net>","á´ Éªá´á´á´Ê Êá´á´Êá´Êá´Êá´ <victorbjelkholm@gmail.com>","Andrew Nesbitt <andrewnez@gmail.com>","Franck Royer <franck@royer.one>","Thomas Eizinger <thomas@eizinger.io>","VÃ­t Habada <vithabada93@gmail.com>","Giovanni T. Parra <fiatjaf@gmail.com>","acolytec3 <17355484+acolytec3@users.noreply.github.com>","Alan Smithee <ggnore.alan.smithee@gmail.com>","Elven <mon.samuel@qq.com>","Samlior <samlior@foxmail.com>","Didrik NordstrÃ¶m <didrik.nordstrom@gmail.com>","Aditya Bose <13054902+adbose@users.noreply.github.com>","TJKoury <TJKoury@gmail.com>","TheStarBoys <41286328+TheStarBoys@users.noreply.github.com>","Tiago Alves <alvesjtiago@gmail.com>","Tim DaubenschÃ¼tz <tim@daubenschuetz.de>","XiaoZhang <zxinmyth@gmail.com>","Yusef Napora <yusef@napora.org>","Zane Starr <zcstarr@gmail.com>","ebinks <elizabethjbinks@gmail.com>","greenSnot <greenSnot@users.noreply.github.com>","isan_rivkin <isanrivkin@gmail.com>","mayerwin <mayerwin@users.noreply.github.com>","mcclure <andi.m.mcclure@gmail.com>","patrickwoodhead <91056047+patrickwoodhead@users.noreply.github.com>","phillmac <phillmac@users.noreply.github.com>","robertkiel <robert.kiel@validitylabs.org>","shresthagrawal <34920931+shresthagrawal@users.noreply.github.com>","swedneck <40505480+swedneck@users.noreply.github.com>","tuyennhv <vutuyen2636@gmail.com>","SÃ¶nke Hahn <soenkehahn@gmail.com>","Aleksei <vozhdb@gmail.com>","Bernd Strehl <bernd.strehl@gmail.com>","Chris Bratlien <chrisbratlien@gmail.com>","Cindy Wu <ciindy.wu@gmail.com>","Daijiro Wachi <daijiro.wachi@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Ethan Lam <elmemphis2000@gmail.com>","Fei Liu <liu.feiwood@gmail.com>","Felipe Martins <felipebrasil93@gmail.com>","Florian-Merle <florian.david.merle@gmail.com>","Francis Gulotta <wizard@roborooter.com>","Guy Sviry <32539816+guysv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Irakli Gozalishvili <rfobic@gmail.com>","Joel Gustafson <joelg@mit.edu>","John Rees <johnrees@users.noreply.github.com>","JoÃ£o Santos <joaosantos15@users.noreply.github.com>","Julien Bouquillon <contact@revolunet.com>","Kevin Kwok <antimatter15@gmail.com>","Kevin Lacker <lacker@gmail.com>","Lars Gierth <lgierth@users.noreply.github.com>","Leask Wong <i@leaskh.com>","Marcin Tojek <mtojek@users.noreply.github.com>","Marston Connell <34043723+TheMarstonConnell@users.noreply.github.com>","Michael Burns <5170+mburns@users.noreply.github.com>","Miguel Mota <miguelmota2@gmail.com>","Nuno Nogueira <nunofmn@gmail.com>","Philipp Muens <raute1337@gmx.de>","RasmusErik Voel Jensen <github@solsort.com>","Smite Chow <xiaopengyou@live.com>","Soeren <nikorpoulsen@gmail.com>"]}')},22562:function(t){"use strict";t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}}]);
//# sourceMappingURL=group-landing.d10c5d42.js.map